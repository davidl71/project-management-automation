var $f=Object.defineProperty;var Lf=(e,t,n)=>t in e?$f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>Lf(e,typeof t!="symbol"?t+"":t,n);import{M as Pt,by as Bf,bz as ql,a as u,bA as Uf,bB as za,j as o,c as B,bC as Be,bD as et,bE as vt,bF as K,bG as Me,bH as Ff,bI as Jl,bJ as Hf,bv as Ql,bK as ko,b4 as at,a1 as Oo,bL as ed,bM as Xn,at as se,P as x,H as $t,bN as ki,bO as zf,bP as Oi,ay as je,bQ as Yf,bR as jn,bS as Po,V as Wf,bT as td,bU as nd,bV as Zf,bW as Gf,bX as Vf,bY as Kf,bZ as Xf,b_ as qf,b$ as Jf,c0 as $o,c1 as as,c2 as Qf,am as js,al as rd,i as eh,c3 as Lo,c4 as th,c5 as Ht,c6 as nh,c7 as Bo,c8 as rh,an as Dn,c9 as Ya,ca as ar,cb as sh,cc as os,A as pe,cd as ah,ce as na,cf as _t,b8 as Wa,s as oh,cg as Nn,ch as Qt,ae as N,ci as sd,cj as Je,ck as Ds,ar as ih,cl as ch,cm as ad,cn as lh,co as Pi,b3 as od,a7 as we,$ as it,aI as _r,cp as id,cq as dh,L as cd,a8 as or,a9 as Ns,aN as Za,ah as Rs,N as ld,ai as dd,ad as Uo,cr as F,cs as uh,ct as fh,cu as ud,v as Le,cv as fd,av as hd,X as md,aR as zt,aU as ye,aS as he,a0 as Rn,w as ir,cw as ge,aQ as Ze,aV as $i,aW as hh,aX as zn,Y as Xt,Z as pd,af as Ga,ac as Fo,Q as gd,ba as mh,aP as Rt,bb as ph,aY as wt,bh as gh,cx as vd,bc as Li,cy as yd,cz as qn,aA as Ho,aB as zo,aG as Yo,aH as vh,cA as yh,cB as ht,aZ as ra,aa as bh,b2 as _h,O as xr,cC as Bi,cD as xh,aj as Eh,cE as wh,cF as Sh,cG as Ch,cH as Mh,cI as Th,aT as bd,cJ as Ah,aJ as Wo,cK as _d,cL as Ui,cM as jh,cN as Dh,cO as Nh,aK as xd,ab as Rh,b5 as Ih,aw as kh,aO as Fi,cP as Hi,cQ as Oh,aL as Ph,cR as $h,aM as Lh,cS as Bh,b1 as Nr,a$ as Uh,cT as Fh,a_ as Hh,J as zh,K as Yh,cU as Wh,cV as Zh,ak as Rr,cW as Gh,cX as Vh,cY as Kh,cZ as Xh,c_ as Ed,c$ as qh,d0 as Jh,d1 as Qh,d2 as e1,d3 as t1,d4 as n1,bt as r1,bu as s1,d5 as a1,bw as o1,bx as i1,d6 as c1,bo as l1}from"../../../CategoryPickerMenu.js";import{a_ as d1,a$ as u1,b0 as f1,b1 as h1,b2 as wd,I as fe,b3 as m1,b4 as p1,b5 as Zo,b6 as g1,b7 as z,n as Go,b8 as zi,k as Er,b9 as Sd,H as _n,q as Is,r as ks,v as Os,g as v1,a7 as Cd,y as Md,z as Td,E as Ad,F as jd,a8 as Vo,a9 as Dd,d as Nd,c as y1,e as Ir,A as b1,ba as Rd,V as _1,bb as Id,ac as x1,bc as E1,bd as w1,be as kd,bf as Od,bg as Ko,a4 as cr,bh as S1,bi as C1,bj as Ps,bk as M1,a3 as T1,bl as Pd,bm as Xo,aK as qo,aM as Jo,m as Qo,bn as A1,bo as j1,bp as ei,bq as $d,br as D1,B as Jn,T as N1,ah as R1,ai as I1,bs as Va,bt as k1,as as Ka,bu as O1,bv as P1,bw as $1,bx as L1,by as B1,bz as U1,ar as F1,aq as H1,af as z1,al as sa,bA as Y1,bB as W1,bC as Z1,bD as G1,aI as V1,ap as K1,ae as X1,bE as Xa,bF as q1,bG as Ge,bH as J1,K as Q1,a1 as em,bI as ti,bJ as tm,bK as nm,aj as rm,aa as sm,bL as am,aP as om,bM as im,bN as cm,aF as lm,bO as dm,bP as um,bQ as fm,bR as hm,bS as mm,bT as Ld,N as pm,bU as gm,bV as vm,J as ym,U as bm,bW as _m,bX as xm,a0 as Em,bY as wm,bZ as Sm,b_ as Cm,b$ as Mm,c0 as Tm,c1 as qa,c2 as Am,c3 as jm,p as Dm,C as Bd,S as Nm,c4 as Rm,aN as Im,c5 as km,c6 as Ud,c7 as Om,c8 as Yi,c9 as Pm,ad as $m,ca as Lm,x as Bm,w as Um,aW as Fm,aX as Hm,aY as zm,aZ as Ym,cb as Wm,i as Zm,cc as Gm,L as Vm}from"../../../persistence.js";import{g as Km,a as Ja,S as Xm,b as qm,c as Jm,u as Qm,d as ep,e as tp,f as np}from"../../../SyncRecoilWithAuth.js";var mt=(e=>(e[e.READER=0]="READER",e[e.WRITER=1]="WRITER",e[e.OWNER=2]="OWNER",e))(mt||{}),pt=(e=>(e[e.CONFIRMED=0]="CONFIRMED",e[e.TENTATIVE=1]="TENTATIVE",e[e.CANCELLED=2]="CANCELLED",e))(pt||{}),Ue=(e=>(e[e.NEEDS_ACTION=0]="NEEDS_ACTION",e[e.DECLINED=1]="DECLINED",e[e.TENTATIVE=2]="TENTATIVE",e[e.ACCEPTED=3]="ACCEPTED",e))(Ue||{});const aa="external__current_user";function ve(e,t){return e===void 0?t:e}function Qa(e,t){return e===void 0?t():e}function rp(e,t,...n){const r=[];return t.forEach(s=>{if(s)for(let a of n){const i=Pt.get(s,a,"");if(!(!i||typeof i!="string")&&i.toLowerCase().includes(e.toLowerCase())){r.push(s);break}}}),r}function ni(e,{isDarkMode:t}){if(e.source==="unsplash")return{"4k":`${e.url}&w=3840`,"4k_webp":`${e.url}&w=3840`,hd:`${e.url}&w=1920`,hd_webp:`${e.url}&w=1920`,settingsThumbnail:`${e.url}&w=44`,settingsThumbnail_webp:`${e.url}&w=44`,thumbnail:`${e.url}&w=400`,thumbnail_webp:`${e.url}&w=400`,"4k_svg":""};const n=Bf,r=window.location.protocol==="file:"?"":"/",s=t?"assets/themes/dark":"assets/themes";return{"4k":`${n}${r}${s}/4k/${e.value}.jpg`,hd:`${n}${r}${s}/hd/${e.value}.jpg`,settingsThumbnail:`${n}${r}${s}/settings-thumbnails/${e.value}.jpg`,thumbnail:`${n}${r}${s}/thumbnails/${e.value}.jpg`,"4k_webp":`${n}${r}${s}/4k/${e.value}.webp`,hd_webp:`${n}${r}${s}/hd/${e.value}.webp`,settingsThumbnail_webp:`${n}${r}${s}/settings-thumbnails/${e.value}.webp`,thumbnail_webp:`${n}${r}${s}/thumbnails/${e.value}.webp`,"4k_svg":`${n}${r}${s}/4k/${e.value}.svg`}}const sp=`${Uf}/ping`,ap=1e3,op={getCurrentValue:()=>navigator.onLine,subscribe:e=>(window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)})};function ip(e){const[t,n]=u.useState(e);return u.useEffect(()=>{if(e)return;const r=new AbortController;let s=null;async function a(){if(s=null,!r.signal.aborted){try{if(await fetch(sp,{credentials:"omit"}),r.signal.aborted)return;n(!0)}catch{n(!1)}s=setTimeout(()=>a(),ap)}}return a(),()=>{r.abort(),s!=null&&clearTimeout(s)}},[e]),t}function cp(){const e=ql.useSubscription(op),t=ip(e);return e||t}function lp({children:e,className:t}){const n=za();return o.jsx("div",{className:B(t,"BareInlineScrollView",{"BareInlineScrollView--custom":n,"BareInlineScrollView--noCustom":!n}),children:e})}function dp(e,t=globalThis==null?void 0:globalThis.document){const n=Be(e);u.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const eo="dismissableLayer.update",up="dismissableLayer.pointerDownOutside",fp="dismissableLayer.focusOutside";let Wi;const hp=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fd=u.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:c,onDismiss:l,...d}=e,f=u.useContext(hp),[h,m]=u.useState(null),p=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=u.useState({}),g=et(t,C=>m(C)),y=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(_),E=h?y.indexOf(h):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,T=E>=b,j=mp(C=>{const w=C.target,I=[...f.branches].some(R=>R.contains(w));!T||I||(a==null||a(C),c==null||c(C),C.defaultPrevented||l==null||l())},p),M=pp(C=>{const w=C.target;[...f.branches].some(R=>R.contains(w))||(i==null||i(C),c==null||c(C),C.defaultPrevented||l==null||l())},p);return dp(C=>{E===f.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},p),u.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Wi=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),Zi(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Wi)}},[h,p,r,f]),u.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),Zi())},[h,f]),u.useEffect(()=>{const C=()=>v({});return document.addEventListener(eo,C),()=>document.removeEventListener(eo,C)},[]),u.createElement(vt.div,K({},d,{ref:g,style:{pointerEvents:S?T?"auto":"none":void 0,...e.style},onFocusCapture:Me(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Me(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Me(e.onPointerDownCapture,j.onPointerDownCapture)}))});function mp(e,t=globalThis==null?void 0:globalThis.document){const n=Be(e),r=u.useRef(!1),s=u.useRef(()=>{});return u.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){Hd(up,n,l,{discrete:!0})};const l={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function pp(e,t=globalThis==null?void 0:globalThis.document){const n=Be(e),r=u.useRef(!1);return u.useEffect(()=>{const s=a=>{a.target&&!r.current&&Hd(fp,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Zi(){const e=new CustomEvent(eo);document.dispatchEvent(e)}function Hd(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Ff(s,a):s.dispatchEvent(a)}let oa=0;function zd(){u.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:Gi()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:Gi()),oa++,()=>{oa===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),oa--}},[])}function Gi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const ia="focusScope.autoFocusOnMount",ca="focusScope.autoFocusOnUnmount",Vi={bubbles:!1,cancelable:!0},Yd=u.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[c,l]=u.useState(null),d=Be(s),f=Be(a),h=u.useRef(null),m=et(t,g=>l(g)),p=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(r){let g=function(E){if(p.paused||!c)return;const S=E.target;c.contains(S)?h.current=S:At(h.current,{select:!0})},y=function(E){if(p.paused||!c)return;const S=E.relatedTarget;S!==null&&(c.contains(S)||At(h.current,{select:!0}))},_=function(E){const S=document.activeElement;for(const T of E)T.removedNodes.length>0&&(c!=null&&c.contains(S)||At(c))};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const b=new MutationObserver(_);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),b.disconnect()}}},[r,c,p.paused]),u.useEffect(()=>{if(c){Xi.add(p);const g=document.activeElement;if(!c.contains(g)){const _=new CustomEvent(ia,Vi);c.addEventListener(ia,d),c.dispatchEvent(_),_.defaultPrevented||(gp(xp(Wd(c)),{select:!0}),document.activeElement===g&&At(c))}return()=>{c.removeEventListener(ia,d),setTimeout(()=>{const _=new CustomEvent(ca,Vi);c.addEventListener(ca,f),c.dispatchEvent(_),_.defaultPrevented||At(g!=null?g:document.body,{select:!0}),c.removeEventListener(ca,f),Xi.remove(p)},0)}}},[c,d,f,p]);const v=u.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,_=document.activeElement;if(y&&_){const b=g.currentTarget,[E,S]=vp(b);E&&S?!g.shiftKey&&_===S?(g.preventDefault(),n&&At(E,{select:!0})):g.shiftKey&&_===E&&(g.preventDefault(),n&&At(S,{select:!0})):_===b&&g.preventDefault()}},[n,r,p.paused]);return u.createElement(vt.div,K({tabIndex:-1},i,{ref:m,onKeyDown:v}))});function gp(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(At(r,{select:t}),document.activeElement!==n)return}function vp(e){const t=Wd(e),n=Ki(t,e),r=Ki(t.reverse(),e);return[n,r]}function Wd(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ki(e,t){for(const n of e)if(!yp(n,{upTo:t}))return n}function yp(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function bp(e){return e instanceof HTMLInputElement&&"select"in e}function At(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&bp(e)&&t&&e.select()}}const Xi=_p();function _p(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=qi(e,t),e.unshift(t)},remove(t){var n;e=qi(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function qi(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function xp(e){return e.filter(t=>t.tagName!=="A")}const Ep=Hf.useId||(()=>{});let wp=0;function Qr(e){const[t,n]=u.useState(Ep());return Jl(()=>{e||n(r=>r!=null?r:String(wp++))},[e]),e||(t?`radix-${t}`:"")}const Zd=u.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=e;return r?Ql.createPortal(u.createElement(vt.div,K({},s,{ref:t})),r):null});function Gd({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=Sp({defaultProp:t,onChange:n}),a=e!==void 0,i=a?e:r,c=Be(n),l=u.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&c(h)}else s(d)},[a,e,s,c]);return[i,l]}function Sp({defaultProp:e,onChange:t}){const n=u.useState(e),[r]=n,s=u.useRef(r),a=Be(t);return u.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var Cp=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},sn=new WeakMap,kr=new WeakMap,Or={},la=0,Vd=function(e){return e&&(e.host||Vd(e.parentNode))},Mp=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Vd(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Tp=function(e,t,n,r){var s=Mp(t,Array.isArray(e)?e:[e]);Or[n]||(Or[n]=new WeakMap);var a=Or[n],i=[],c=new Set,l=new Set(s),d=function(h){!h||c.has(h)||(c.add(h),d(h.parentNode))};s.forEach(d);var f=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(c.has(m))f(m);else{var p=m.getAttribute(r),v=p!==null&&p!=="false",g=(sn.get(m)||0)+1,y=(a.get(m)||0)+1;sn.set(m,g),a.set(m,y),i.push(m),g===1&&v&&kr.set(m,!0),y===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}})};return f(t),c.clear(),la++,function(){i.forEach(function(h){var m=sn.get(h)-1,p=a.get(h)-1;sn.set(h,m),a.set(h,p),m||(kr.has(h)||h.removeAttribute(r),kr.delete(h)),p||h.removeAttribute(n)}),la--,la||(sn=new WeakMap,sn=new WeakMap,kr=new WeakMap,Or={})}},Kd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=Cp(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Tp(r,s,n,"aria-hidden")):function(){return null}},jt=function(){return jt=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},jt.apply(this,arguments)};function Ap(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function jp(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var es="right-scroll-bar-position",ts="width-before-scroll-bar",Dp="with-scroll-bars-hidden",Np="--removed-body-scroll-bar-size",Xd=function(e){var t=e.sideCar,n=d1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return u.createElement(r,u1({},n))};Xd.isSideCarExport=!0;function Rp(e,t){return e.useMedium(t),Xd}var qd=f1(),da=function(){},$s=u.forwardRef(function(e,t){var n=u.useRef(null),r=u.useState({onScrollCapture:da,onWheelCapture:da,onTouchMoveCapture:da}),s=r[0],a=r[1],i=e.forwardProps,c=e.children,l=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,_=y===void 0?"div":y,b=Ap(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),E=m,S=h1([n,t]),T=jt(jt({},b),s);return u.createElement(u.Fragment,null,f&&u.createElement(E,{sideCar:qd,removeScrollBar:d,shards:h,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:n}),i?u.cloneElement(u.Children.only(c),jt(jt({},T),{ref:S})):u.createElement(_,jt({},T,{className:l,ref:S}),c))});$s.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$s.classNames={fullWidth:ts,zeroRight:es};var Ip=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kp(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ip();return t&&e.setAttribute("nonce",t),e}function Op(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Pp(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $p=function(){var e=0,t=null;return{add:function(n){e==0&&(t=kp())&&(Op(t,n),Pp(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Lp=function(){var e=$p();return function(t,n){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Jd=function(){var e=Lp(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Bp={left:0,top:0,right:0,gap:0},ua=function(e){return parseInt(e||"",10)||0},Up=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ua(n),ua(r),ua(s)]},Fp=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Bp;var t=Up(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Hp=Jd(),zp=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Dp,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(es,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ts,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(es," .").concat(es,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ts," .").concat(ts,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Np,": ").concat(c,`px;
  }
`)},Yp=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r,a=u.useMemo(function(){return Fp(s)},[s]);return u.createElement(Hp,{styles:zp(a,!t,s,n?"":"!important")})},to=!1;if(typeof window<"u")try{var Pr=Object.defineProperty({},"passive",{get:function(){return to=!0,!0}});window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{to=!1}var an=to?{passive:!1}:!1,Wp=function(e){return e.tagName==="TEXTAREA"},Qd=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Wp(e)&&n[t]==="visible")},Zp=function(e){return Qd(e,"overflowY")},Gp=function(e){return Qd(e,"overflowX")},Ji=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=eu(e,n);if(r){var s=tu(e,n),a=s[1],i=s[2];if(a>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Vp=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Kp=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},eu=function(e,t){return e==="v"?Zp(t):Gp(t)},tu=function(e,t){return e==="v"?Vp(t):Kp(t)},Xp=function(e,t){return e==="h"&&t==="rtl"?-1:1},qp=function(e,t,n,r,s){var a=Xp(e,window.getComputedStyle(t).direction),i=a*r,c=n.target,l=t.contains(c),d=!1,f=i>0,h=0,m=0;do{var p=tu(e,c),v=p[0],g=p[1],y=p[2],_=g-y-a*v;(v||_)&&eu(e,c)&&(h+=_,m+=v),c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(f&&(h===0||!s)||!f&&(m===0||!s))&&(d=!0),d},$r=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Qi=function(e){return[e.deltaX,e.deltaY]},ec=function(e){return e&&"current"in e?e.current:e},Jp=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Qp=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},e2=0,on=[];function t2(e){var t=u.useRef([]),n=u.useRef([0,0]),r=u.useRef(),s=u.useState(e2++)[0],a=u.useState(function(){return Jd()})[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=jp([e.lockRef.current],(e.shards||[]).map(ec)).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=u.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!i.current.allowPinchZoom;var _=$r(g),b=n.current,E="deltaX"in g?g.deltaX:b[0]-_[0],S="deltaY"in g?g.deltaY:b[1]-_[1],T,j=g.target,M=Math.abs(E)>Math.abs(S)?"h":"v";if("touches"in g&&M==="h"&&j.type==="range")return!1;var C=Ji(M,j);if(!C)return!0;if(C?T=M:(T=M==="v"?"h":"v",C=Ji(M,j)),!C)return!1;if(!r.current&&"changedTouches"in g&&(E||S)&&(r.current=T),!T)return!0;var w=r.current||T;return qp(w,y,g,w==="h"?E:S,!0)},[]),l=u.useCallback(function(g){var y=g;if(!(!on.length||on[on.length-1]!==a)){var _="deltaY"in y?Qi(y):$r(y),b=t.current.filter(function(T){return T.name===y.type&&T.target===y.target&&Jp(T.delta,_)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var E=(i.current.shards||[]).map(ec).filter(Boolean).filter(function(T){return T.contains(y.target)}),S=E.length>0?c(y,E[0]):!i.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),d=u.useCallback(function(g,y,_,b){var E={name:g,delta:y,target:_,should:b};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(S){return S!==E})},1)},[]),f=u.useCallback(function(g){n.current=$r(g),r.current=void 0},[]),h=u.useCallback(function(g){d(g.type,Qi(g),g.target,c(g,e.lockRef.current))},[]),m=u.useCallback(function(g){d(g.type,$r(g),g.target,c(g,e.lockRef.current))},[]);u.useEffect(function(){return on.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,an),document.addEventListener("touchmove",l,an),document.addEventListener("touchstart",f,an),function(){on=on.filter(function(g){return g!==a}),document.removeEventListener("wheel",l,an),document.removeEventListener("touchmove",l,an),document.removeEventListener("touchstart",f,an)}},[]);var p=e.removeScrollBar,v=e.inert;return u.createElement(u.Fragment,null,v?u.createElement(a,{styles:Qp(s)}):null,p?u.createElement(Yp,{gapMode:"margin"}):null)}const n2=Rp(qd,t2);var nu=u.forwardRef(function(e,t){return u.createElement($s,jt({},e,{ref:t,sideCar:n2}))});nu.classNames=$s.classNames;const r2=at;function ru({enabled:e=!0,onOpen:t,withBackdrop:n=!1}={}){const[r,s]=u.useState(!1),[a,i]=u.useState(null),c=u.useRef(null),l=u.useRef(null),d=u.useCallback(h=>{s(!0),i(h.currentTarget),t==null||t(h)},[t]),f=u.useCallback(()=>{s(!1),i(null)},[]);return ko(["pointerdown","wheel"],[l],r?f:void 0),{isOpen:r,open:d,close:f,rootProps:{ref:c,onContextMenu:e?h=>{h.preventDefault(),s(!0),i({x:h.clientX,y:h.clientY}),t==null||t("onContextMenu")}:void 0},renderMenu:u.useCallback((h,m="modern")=>o.jsxs(o.Fragment,{children:[n&&o.jsx(wd,{isVisible:r,transparent:!0}),o.jsx(fe,{isVisible:r,from:a,position:"bottom-start",theme:m,children:o.jsx("div",{ref:l,onPointerDown:r2,children:h})})]}),[a,r,n])}}u.createContext(null);const s2=u.createContext(!1);function a2(){return u.useContext(s2)}Oo((e,t)=>{e.delete(t)});Oo((e,t)=>{e.has(t.id)?Object.assign(e.get(t.id),t):e.set(t.id,t)});function o2(){const e=u.useRef();e.current=!0,u.useEffect(()=>{e.current=!1},[]);const t=ed(),n=u.useRef(!1);return u.useCallback(function(){if(n.current)return;n.current=!0;function a(){n.current=!1}t.retryUpdateUserDetails().then(a,a)},[t])}function i2(){const e=ed(),t=u.useMemo(()=>({getCurrentValue:()=>{switch(e.getUpdateUserDetailsStatus()){case"idle":return Xn.NONE;case"loading":return Xn.PENDING;case"error":return Xn.REJECTED}},subscribe:n=>{const r=[e.subscribe("userDetailsUpdateStatusChange",n),e.subscribe("userDetailsUpdate",n)];return()=>{let s;for(;s=r.pop();)s()}}}),[e]);return ql.useSubscription(t)}const c2="_header_1j4da_1",l2="_title_1j4da_9",tc={header:c2,title:l2},d2=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.555 8.75H7.083l3.89-3.89L10 3.89 4.444 9.444 10 15l.972-.972-3.889-3.89h8.472V8.75Z",clipRule:"evenodd"})),u2=({label:e,onBack:t})=>o.jsxs("div",{className:tc.header,children:[o.jsx(se,{onClick:t,theme:"secondary",children:o.jsx(d2,{})}),o.jsx("div",{className:tc.title,children:e})]}),f2=u.forwardRef(function({onEnterAnimationEnd:t,animationEnterIndex:n,children:r},s){const[a,i]=u.useState(!1),c=u.useMemo(()=>m1(()=>{i(!0)}),[]);u.useEffect(()=>()=>{c.cancel()},[c]);const l=u.useMemo(()=>({blip(){c()}}),[c]);u.useImperativeHandle(s,()=>l,[l]);const d=n!==void 0,f=d?{"--BaseCard-index":n}:void 0;function h(p){p.target===p.currentTarget&&t!=null&&t()}function m(p){p.target===p.currentTarget&&i(!1)}return o.jsx("article",{onTransitionEnd:a?m:void 0,onAnimationEnd:d&&t!=null?h:void 0,className:B("BaseCard",{"BaseCard--blip":a,"BaseCard--animatedIn":d}),style:f,children:r})});function ce(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(i=>[i]));let r=t[0].length,s=t[0].map((i,c)=>t.map(l=>l[c])),a=e.map(i=>s.map(c=>{let l=0;if(!Array.isArray(i)){for(let d of c)l+=i*d;return l}for(let d=0;d<i.length;d++)l+=i[d]*(c[d]||0);return l}));return n===1&&(a=a[0]),r===1?a.map(i=>i[0]):a}function wr(e){return It(e)==="string"}function It(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function is(e,{precision:t,unit:n}){return Lt(e)?"none":su(e,t)+(n!=null?n:"")}function Lt(e){return Number.isNaN(e)||e instanceof Number&&(e==null?void 0:e.none)}function be(e){return Lt(e)?0:e}function su(e,t){if(e===0)return 0;let n=~~e,r=0;n&&t&&(r=~~Math.log10(Math.abs(n))+1);const s=10**(t-r);return Math.floor(e*s+.5)/s}const h2={deg:1,grad:.9,rad:180/Math.PI,turn:360};function au(e){if(!e)return;e=e.trim();const t=/^([a-z]+)\((.+?)\)$/i,n=/^-?[\d.]+$/,r=/%|deg|g?rad|turn$/,s=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let a=e.match(t);if(a){let i=[];return a[2].replace(s,(c,l)=>{let d=l.match(r),f=l;if(d){let h=d[0],m=f.slice(0,-h.length);h==="%"?(f=new Number(m/100),f.type="<percentage>"):(f=new Number(m*h2[h]),f.type="<angle>",f.unit=h)}else n.test(f)?(f=new Number(f),f.type="<number>"):f==="none"&&(f=new Number(NaN),f.none=!0);c.startsWith("/")&&(f=f instanceof Number?f:new Number(f),f.alpha=!0),typeof f=="object"&&f instanceof Number&&(f.raw=l),i.push(f)}),{name:a[1].toLowerCase(),rawName:a[1],rawArgs:a[2],args:i}}}function ou(e){return e[e.length-1]}function lr(e,t,n){return isNaN(e)?t:isNaN(t)?e:e+(t-e)*n}function iu(e,t,n){return(n-e)/(t-e)}function ri(e,t,n){return lr(t[0],t[1],iu(e[0],e[1],n))}function cu(e){return e.map(t=>t.split("|").map(n=>{n=n.trim();let r=n.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(r){let s=new String(r[1]);return s.range=[+r[2],+r[3]],s}return n}))}function lu(e,t,n){return Math.max(Math.min(n,t),e)}function Ls(e,t){return Math.sign(e)===Math.sign(t)?e:-e}function gt(e,t){return Ls(Math.abs(e)**t,e)}function si(e,t){return t===0?0:e/t}function du(e,t,n=0,r=e.length){for(;n<r;){const s=n+r>>1;e[s]<t?n=s+1:r=s}return n}var m2=Object.freeze({__proto__:null,bisectLeft:du,clamp:lu,copySign:Ls,interpolate:lr,interpolateInv:iu,isNone:Lt,isString:wr,last:ou,mapRange:ri,multiplyMatrices:ce,parseCoordGrammar:cu,parseFunction:au,serializeNumber:is,skipNone:be,spow:gt,toPrecision:su,type:It,zdiv:si});class p2{add(t,n,r){if(typeof arguments[0]!="string"){for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1]);return}(Array.isArray(t)?t:[t]).forEach(function(s){this[s]=this[s]||[],n&&this[s][r?"unshift":"push"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(r){r.call(n&&n.context?n.context:n,n)})}}const Bt=new p2;var Vl,Kl,Xl,qe={gamut_mapping:"css",precision:5,deltaE:"76",verbose:((Xl=(Kl=(Vl=globalThis==null?void 0:globalThis.process)==null?void 0:Vl.env)==null?void 0:Kl.NODE_ENV)==null?void 0:Xl.toLowerCase())!=="test",warn:function(t){var n,r;this.verbose&&((r=(n=globalThis==null?void 0:globalThis.console)==null?void 0:n.warn)==null||r.call(n,t))}};const Oe={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function no(e){return Array.isArray(e)?e:Oe[e]}function cs(e,t,n,r={}){if(e=no(e),t=no(t),!e||!t)throw new TypeError(`Missing white point to convert ${e?"":"from"}${!e&&!t?"/":""}${t?"":"to"}`);if(e===t)return n;let s={W1:e,W2:t,XYZ:n,options:r};if(Bt.run("chromatic-adaptation-start",s),s.M||(s.W1===Oe.D65&&s.W2===Oe.D50?s.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:s.W1===Oe.D50&&s.W2===Oe.D65&&(s.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Bt.run("chromatic-adaptation-end",s),s.M)return ce(s.M,s.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const g2=new Set(["<number>","<percentage>","<angle>"]);function nc(e,t,n,r){return Object.entries(e.coords).map(([a,i],c)=>{let l=t.coordGrammar[c],d=r[c],f=d==null?void 0:d.type,h;if(d.none?h=l.find(v=>g2.has(v)):h=l.find(v=>v==f),!h){let v=i.name||a;throw new TypeError(`${f!=null?f:d.raw} not allowed for ${v} in ${n}()`)}let m=h.range;f==="<percentage>"&&(m||(m=[0,1]));let p=i.range||i.refRange;return m&&p&&(r[c]=ri(m,p,r[c])),h})}function uu(e,{meta:t}={}){var r,s,a,i,c;let n={str:(r=String(e))==null?void 0:r.trim()};if(Bt.run("parse-start",n),n.color)return n.color;if(n.parsed=au(n.str),n.parsed){let l=n.parsed.name;if(l==="color"){let d=n.parsed.args.shift(),f=d.startsWith("--")?d.substring(2):`--${d}`,h=[d,f],m=n.parsed.rawArgs.indexOf("/")>0?n.parsed.args.pop():1;for(let g of U.all){let y=g.getFormat("color");if(y&&(h.includes(y.id)||(s=y.ids)!=null&&s.filter(_=>h.includes(_)).length)){const _=Object.keys(g.coords).map((E,S)=>n.parsed.args[S]||0);let b;return y.coordGrammar&&(b=nc(g,y,"color",_)),t&&Object.assign(t,{formatId:"color",types:b}),y.id.startsWith("--")&&!d.startsWith("--")&&qe.warn(`${g.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${y.id}) instead of color(${d}).`),d.startsWith("--")&&!y.id.startsWith("--")&&qe.warn(`${g.name} is a standard space and supported in the CSS spec. Use color(${y.id}) instead of prefixed color(${d}).`),{spaceId:g.id,coords:_,alpha:m}}}let p="",v=d in U.registry?d:f;if(v in U.registry){let g=(i=(a=U.registry[v].formats)==null?void 0:a.color)==null?void 0:i.id;g&&(p=`Did you mean color(${g})?`)}throw new TypeError(`Cannot parse color(${d}). `+(p||"Missing a plugin?"))}else for(let d of U.all){let f=d.getFormat(l);if(f&&f.type==="function"){let h=1;(f.lastAlpha||ou(n.parsed.args).alpha)&&(h=n.parsed.args.pop());let m=n.parsed.args,p;return f.coordGrammar&&(p=nc(d,f,l,m)),t&&Object.assign(t,{formatId:f.name,types:p}),{spaceId:d.id,coords:m,alpha:h}}}}else for(let l of U.all)for(let d in l.formats){let f=l.formats[d];if(f.type!=="custom"||f.test&&!f.test(n.str))continue;let h=f.parse(n.str);if(h)return(c=h.alpha)!=null||(h.alpha=1),t&&(t.formatId=d),h}throw new TypeError(`Could not parse ${e} as a color. Missing a plugin?`)}function Y(e){if(Array.isArray(e))return e.map(Y);if(!e)throw new TypeError("Empty color reference");wr(e)&&(e=uu(e));let t=e.space||e.spaceId;return t instanceof U||(e.space=U.get(t)),e.alpha===void 0&&(e.alpha=1),e}const v2=75e-6,Pe=class Pe{constructor(t){var s,a,i,c,l,d;this.id=t.id,this.name=t.name,this.base=t.base?Pe.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let n=(s=t.coords)!=null?s:this.base.coords;for(let f in n)"name"in n[f]||(n[f].name=f);this.coords=n;let r=(i=(a=t.white)!=null?a:this.base.white)!=null?i:"D65";this.white=no(r),this.formats=(c=t.formats)!=null?c:{};for(let f in this.formats){let h=this.formats[f];h.type||(h.type="function"),h.name||(h.name=f)}(l=this.formats.color)!=null&&l.id||(this.formats.color={...(d=this.formats.color)!=null?d:{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace=t.gamutSpace==="self"?this:Pe.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(f,h)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:y2(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Bt.run("colorspace-init-end",this)}inGamut(t,{epsilon:n=v2}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:n});let r=Object.values(this.coords);return t.every((s,a)=>{let i=r[a];if(i.type!=="angle"&&i.range){if(Number.isNaN(s))return!0;let[c,l]=i.range;return(c===void 0||s>=c-n)&&(l===void 0||s<=l+n)}return!0})}get isUnbounded(){return Object.values(this.coords).every(t=>!("range"in t))}get cssId(){var t,n;return((n=(t=this.formats)==null?void 0:t.color)==null?void 0:n.id)||this.id}get isPolar(){for(let t in this.coords)if(this.coords[t].type==="angle")return!0;return!1}getFormat(t){if(typeof t=="object")return t=rc(t,this),t;let n;return t==="default"?n=Object.values(this.formats)[0]:n=this.formats[t],n?(n=rc(n,this),n):null}equals(t){return t?this===t||this.id===t||this.id===t.id:!1}to(t,n){if(arguments.length===1){const c=Y(t);[t,n]=[c.space,c.coords]}if(t=Pe.get(t),this.equals(t))return n;n=n.map(c=>Number.isNaN(c)?0:c);let r=this.path,s=t.path,a,i;for(let c=0;c<r.length&&r[c].equals(s[c]);c++)a=r[c],i=c;if(!a)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let c=r.length-1;c>i;c--)n=r[c].toBase(n);for(let c=i+1;c<s.length;c++)n=s[c].fromBase(n);return n}from(t,n){if(arguments.length===1){const r=Y(t);[t,n]=[r.space,r.coords]}return t=Pe.get(t),t.to(this,n)}toString(){return`${this.name} (${this.id})`}getMinCoords(){var n;let t=[];for(let r in this.coords){let s=this.coords[r],a=s.range||s.refRange;t.push((n=a==null?void 0:a.min)!=null?n:0)}return t}static get all(){return[...new Set(Object.values(Pe.registry))]}static register(t,n){if(arguments.length===1&&(n=arguments[0],t=n.id),n=this.get(n),this.registry[t]&&this.registry[t]!==n)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=n,arguments.length===1&&n.aliases)for(let r of n.aliases)this.register(r,n);return n}static get(t,...n){if(!t||t instanceof Pe)return t;if(It(t)==="string"){let s=Pe.registry[t.toLowerCase()];if(!s)throw new TypeError(`No color space found with id = "${t}"`);return s}if(n.length)return Pe.get(...n);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,n){var l;let r=It(t),s,a;if(r==="string"?t.includes(".")?[s,a]=t.split("."):[s,a]=[,t]:Array.isArray(t)?[s,a]=t:(s=t.space,a=t.coordId),s=Pe.get(s),s||(s=n),!s)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(r=It(a),r==="number"||r==="string"&&a>=0){let d=Object.entries(s.coords)[a];if(d)return{space:s,id:d[0],index:a,...d[1]}}s=Pe.get(s);let i=a.toLowerCase(),c=0;for(let d in s.coords){let f=s.coords[d];if(d.toLowerCase()===i||((l=f.name)==null?void 0:l.toLowerCase())===i)return{space:s,id:d,index:c,...f};c++}throw new TypeError(`No "${a}" coordinate found in ${s.name}. Its coordinates are: ${Object.keys(s.coords).join(", ")}`)}};ee(Pe,"registry",{}),ee(Pe,"DEFAULT_FORMAT",{type:"functions",name:"color"});let U=Pe;function y2(e){let t=[e];for(let n=e;n=n.base;)t.push(n);return t}function rc(e,{coords:t}={}){if(e.coords&&!e.coordGrammar){e.type||(e.type="function"),e.name||(e.name="color"),e.coordGrammar=cu(e.coords);let n=Object.entries(t).map(([r,s],a)=>{let i=e.coordGrammar[a][0],c=s.range||s.refRange,l=i.range,d="";return i=="<percentage>"?(l=[0,100],d="%"):i=="<angle>"&&(d="deg"),{fromRange:c,toRange:l,suffix:d}});e.serializeCoords=(r,s)=>r.map((a,i)=>{let{fromRange:c,toRange:l,suffix:d}=n[i];return c&&l&&(a=ri(c,l,a)),a=is(a,{precision:s,unit:d}),a})}return e}var De=new U({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class Fe extends U{constructor(t){var n,r,s;t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=De),t.toXYZ_M&&t.fromXYZ_M&&((n=t.toBase)!=null||(t.toBase=a=>{let i=ce(t.toXYZ_M,a);return this.white!==this.base.white&&(i=cs(this.white,this.base.white,i)),i}),(r=t.fromBase)!=null||(t.fromBase=a=>(a=cs(this.base.white,this.white,a),ce(t.fromXYZ_M,a)))),(s=t.referred)!=null||(t.referred="display"),super(t)}}function Sr(e,t){return e=Y(e),!t||e.space.equals(t)?e.coords.slice():(t=U.get(t),t.from(e))}function Ke(e,t){e=Y(e);let{space:n,index:r}=U.resolveCoord(t,e.space);return Sr(e,n)[r]}function ai(e,t,n){return e=Y(e),t=U.get(t),e.coords=t.to(e.space,n),e}ai.returns="color";function St(e,t,n){if(e=Y(e),arguments.length===2&&It(arguments[1])==="object"){let r=arguments[1];for(let s in r)St(e,s,r[s])}else{typeof n=="function"&&(n=n(Ke(e,t)));let{space:r,index:s}=U.resolveCoord(t,e.space),a=Sr(e,r);a[s]=n,ai(e,r,a)}return e}St.returns="color";var oi=new U({id:"xyz-d50",name:"XYZ D50",white:"D50",base:De,fromBase:e=>cs(De.white,"D50",e),toBase:e=>cs("D50",De.white,e)});const b2=216/24389,sc=24/116,Lr=24389/27;let fa=Oe.D50;var Xe=new U({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:fa,base:oi,fromBase(e){let n=e.map((r,s)=>r/fa[s]).map(r=>r>b2?Math.cbrt(r):(Lr*r+16)/116);return[116*n[1]-16,500*(n[0]-n[1]),200*(n[1]-n[2])]},toBase(e){let t=[];return t[1]=(e[0]+16)/116,t[0]=e[1]/500+t[1],t[2]=t[1]-e[2]/200,[t[0]>sc?Math.pow(t[0],3):(116*t[0]-16)/Lr,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/Lr,t[2]>sc?Math.pow(t[2],3):(116*t[2]-16)/Lr].map((r,s)=>r*fa[s])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function yt(e){return(e%360+360)%360}function _2(e,t){if(e==="raw")return t;let[n,r]=t.map(yt),s=r-n;return e==="increasing"?s<0&&(r+=360):e==="decreasing"?s>0&&(n+=360):e==="longer"?-180<s&&s<180&&(s>0?n+=360:r+=360):e==="shorter"&&(s>180?n+=360:s<-180&&(r+=360)),[n,r]}var dr=new U({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Xe,fromBase(e){let[t,n,r]=e,s;const a=.02;return Math.abs(n)<a&&Math.abs(r)<a?s=NaN:s=Math.atan2(r,n)*180/Math.PI,[t,Math.sqrt(n**2+r**2),yt(s)]},toBase(e){let[t,n,r]=e;return n<0&&(n=0),isNaN(r)&&(r=0),[t,n*Math.cos(r*Math.PI/180),n*Math.sin(r*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const ac=25**7,ls=Math.PI,oc=180/ls,cn=ls/180;function ic(e){const t=e*e;return t*t*t*e}function fu(e,t,{kL:n=1,kC:r=1,kH:s=1}={}){[e,t]=Y([e,t]);let[a,i,c]=Xe.from(e),l=dr.from(Xe,[a,i,c])[1],[d,f,h]=Xe.from(t),m=dr.from(Xe,[d,f,h])[1];l<0&&(l=0),m<0&&(m=0);let p=(l+m)/2,v=ic(p),g=.5*(1-Math.sqrt(v/(v+ac))),y=(1+g)*i,_=(1+g)*f,b=Math.sqrt(y**2+c**2),E=Math.sqrt(_**2+h**2),S=y===0&&c===0?0:Math.atan2(c,y),T=_===0&&h===0?0:Math.atan2(h,_);S<0&&(S+=2*ls),T<0&&(T+=2*ls),S*=oc,T*=oc;let j=d-a,M=E-b,C=T-S,w=S+T,I=Math.abs(C),R;b*E===0?R=0:I<=180?R=C:C>180?R=C-360:C<-180?R=C+360:qe.warn("the unthinkable has happened");let L=2*Math.sqrt(E*b)*Math.sin(R*cn/2),P=(a+d)/2,A=(b+E)/2,k=ic(A),O;b*E===0?O=w:I<=180?O=w/2:w<360?O=(w+360)/2:O=(w-360)/2;let H=(P-50)**2,le=1+.015*H/Math.sqrt(20+H),X=1+.045*A,G=1;G-=.17*Math.cos((O-30)*cn),G+=.24*Math.cos(2*O*cn),G+=.32*Math.cos((3*O+6)*cn),G-=.2*Math.cos((4*O-63)*cn);let W=1+.015*A*G,Ne=30*Math.exp(-1*((O-275)/25)**2),Yt=2*Math.sqrt(k/(k+ac)),Te=-1*Math.sin(2*Ne*cn)*Yt,te=(j/(n*le))**2;return te+=(M/(r*X))**2,te+=(L/(s*W))**2,te+=Te*(M/(r*X))*(L/(s*W)),Math.sqrt(te)}const x2=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],E2=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],w2=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],S2=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var xn=new U({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:De,fromBase(e){let n=ce(x2,e).map(r=>Math.cbrt(r));return ce(w2,n)},toBase(e){let n=ce(S2,e).map(r=>r**3);return ce(E2,n)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function ro(e,t){[e,t]=Y([e,t]);let[n,r,s]=xn.from(e),[a,i,c]=xn.from(t),l=n-a,d=r-i,f=s-c;return Math.sqrt(l**2+d**2+f**2)}const C2=75e-6;function qt(e,t,{epsilon:n=C2}={}){e=Y(e),t||(t=e.space),t=U.get(t);let r=e.coords;return t!==e.space&&(r=t.from(e)),t.inGamut(r,{epsilon:n})}function En(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function hu(e,t,n="lab"){n=U.get(n);let r=n.from(e),s=n.from(t);return Math.sqrt(r.reduce((a,i,c)=>{let l=s[c];return isNaN(i)||isNaN(l)?a:a+(l-i)**2},0))}function M2(e,t){return hu(e,t,"lab")}const T2=Math.PI,cc=T2/180;function A2(e,t,{l:n=2,c:r=1}={}){[e,t]=Y([e,t]);let[s,a,i]=Xe.from(e),[,c,l]=dr.from(Xe,[s,a,i]),[d,f,h]=Xe.from(t),m=dr.from(Xe,[d,f,h])[1];c<0&&(c=0),m<0&&(m=0);let p=s-d,v=c-m,g=a-f,y=i-h,_=g**2+y**2-v**2,b=.511;s>=16&&(b=.040975*s/(1+.01765*s));let E=.0638*c/(1+.0131*c)+.638,S;Number.isNaN(l)&&(l=0),l>=164&&l<=345?S=.56+Math.abs(.2*Math.cos((l+168)*cc)):S=.36+Math.abs(.4*Math.cos((l+35)*cc));let T=Math.pow(c,4),j=Math.sqrt(T/(T+1900)),M=E*(j*S+1-j),C=(p/(n*b))**2;return C+=(v/(r*E))**2,C+=_/M**2,Math.sqrt(C)}const lc=203;var ii=new U({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:De,fromBase(e){return e.map(t=>Math.max(t*lc,0))},toBase(e){return e.map(t=>Math.max(t/lc,0))}});const Br=1.15,Ur=.66,dc=2610/2**14,j2=2**14/2610,uc=3424/2**12,fc=2413/2**7,hc=2392/2**7,D2=1.7*2523/2**5,mc=2**5/(1.7*2523),Fr=-.56,ha=16295499532821565e-27,N2=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],R2=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],I2=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],k2=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var mu=new U({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:ii,fromBase(e){let[t,n,r]=e,s=Br*t-(Br-1)*r,a=Ur*n-(Ur-1)*t,c=ce(N2,[s,a,r]).map(function(m){let p=uc+fc*(m/1e4)**dc,v=1+hc*(m/1e4)**dc;return(p/v)**D2}),[l,d,f]=ce(I2,c);return[(1+Fr)*l/(1+Fr*l)-ha,d,f]},toBase(e){let[t,n,r]=e,s=(t+ha)/(1+Fr-Fr*(t+ha)),i=ce(k2,[s,n,r]).map(function(m){let p=uc-m**mc,v=hc*m**mc-fc;return 1e4*(p/v)**j2}),[c,l,d]=ce(R2,i),f=(c+(Br-1)*d)/Br,h=(l+(Ur-1)*f)/Ur;return[f,h,d]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),so=new U({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:mu,fromBase(e){let[t,n,r]=e,s;const a=2e-4;return Math.abs(n)<a&&Math.abs(r)<a?s=NaN:s=Math.atan2(r,n)*180/Math.PI,[t,Math.sqrt(n**2+r**2),yt(s)]},toBase(e){return[e[0],e[1]*Math.cos(e[2]*Math.PI/180),e[1]*Math.sin(e[2]*Math.PI/180)]}});function O2(e,t){[e,t]=Y([e,t]);let[n,r,s]=so.from(e),[a,i,c]=so.from(t),l=n-a,d=r-i;Number.isNaN(s)&&Number.isNaN(c)?(s=0,c=0):Number.isNaN(s)?s=c:Number.isNaN(c)&&(c=s);let f=s-c,h=2*Math.sqrt(r*i)*Math.sin(f/2*(Math.PI/180));return Math.sqrt(l**2+d**2+h**2)}const pu=3424/4096,gu=2413/128,vu=2392/128,pc=2610/16384,P2=2523/32,$2=16384/2610,gc=32/2523,L2=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],B2=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],U2=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],F2=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var ao=new U({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:ii,fromBase(e){let t=ce(L2,e);return H2(t)},toBase(e){let t=z2(e);return ce(F2,t)}});function H2(e){let t=e.map(function(n){let r=pu+gu*(n/1e4)**pc,s=1+vu*(n/1e4)**pc;return(r/s)**P2});return ce(B2,t)}function z2(e){return ce(U2,e).map(function(r){let s=Math.max(r**gc-pu,0),a=gu-vu*r**gc;return 1e4*(s/a)**$2})}function Y2(e,t){[e,t]=Y([e,t]);let[n,r,s]=ao.from(e),[a,i,c]=ao.from(t);return 720*Math.sqrt((n-a)**2+.25*(r-i)**2+(s-c)**2)}const W2=Oe.D65,yu=.42,vc=1/yu,ma=2*Math.PI,bu=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],Z2=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],G2=[[460,451,288],[460,-891,-261],[460,-220,-6300]],V2={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},Vt={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},K2=180/Math.PI,yc=Math.PI/180;function _u(e,t){return e.map(r=>{const s=gt(t*Math.abs(r)*.01,yu);return 400*Ls(s,r)/(s+27.13)})}function X2(e,t){const n=100/t*27.13**vc;return e.map(r=>{const s=Math.abs(r);return Ls(n*gt(s/(400-s),vc),r)})}function q2(e){let t=yt(e);t<=Vt.h[0]&&(t+=360);const n=du(Vt.h,t)-1,[r,s]=Vt.h.slice(n,n+2),[a,i]=Vt.e.slice(n,n+2),c=Vt.H[n],l=(t-r)/a;return c+100*l/(l+(s-t)/i)}function J2(e){let t=(e%400+400)%400;const n=Math.floor(.01*t);t=t%100;const[r,s]=Vt.h.slice(n,n+2),[a,i]=Vt.e.slice(n,n+2);return yt((t*(i*r-a*s)-100*r*i)/(t*(i-a)-100*i))}function xu(e,t,n,r,s){const a={};a.discounting=s,a.refWhite=e,a.surround=r;const i=e.map(g=>g*100);a.la=t,a.yb=n;const c=i[1],l=ce(bu,i);r=V2[a.surround];const d=r[0];a.c=r[1],a.nc=r[2];const h=(1/(5*a.la+1))**4;a.fl=h*a.la+.1*(1-h)*(1-h)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/c,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const m=Math.max(Math.min(d*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=l.map(g=>lr(1,c/g,m)),a.dRgbInv=a.dRgb.map(g=>1/g);const p=l.map((g,y)=>g*a.dRgb[y]),v=_u(p,a.fl);return a.aW=a.nbb*(2*v[0]+v[1]+.05*v[2]),a}const bc=xu(W2,64/Math.PI*.2,20,"average",!1);function oo(e,t){if(!(e.J!==void 0^e.Q!==void 0))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(e.C!==void 0^e.M!==void 0^e.s!==void 0))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(e.h!==void 0^e.H!==void 0))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(e.J===0||e.Q===0)return[0,0,0];let n=0;e.h!==void 0?n=yt(e.h)*yc:n=J2(e.H)*yc;const r=Math.cos(n),s=Math.sin(n);let a=0;e.J!==void 0?a=gt(e.J,1/2)*.1:e.Q!==void 0&&(a=.25*t.c*e.Q/((t.aW+4)*t.flRoot));let i=0;e.C!==void 0?i=e.C/a:e.M!==void 0?i=e.M/t.flRoot/a:e.s!==void 0&&(i=4e-4*e.s**2*(t.aW+4)/t.c);const c=gt(i*Math.pow(1.64-Math.pow(.29,t.n),-.73),10/9),l=.25*(Math.cos(n+2)+3.8),d=t.aW*gt(a,2/t.c/t.z),f=5e4/13*t.nc*t.ncb*l,h=d/t.nbb,m=23*(h+.305)*si(c,23*f+c*(11*r+108*s)),p=m*r,v=m*s,g=X2(ce(G2,[h,p,v]).map(y=>y*1/1403),t.fl);return ce(Z2,g.map((y,_)=>y*t.dRgbInv[_])).map(y=>y/100)}function Eu(e,t){const n=e.map(E=>E*100),r=_u(ce(bu,n).map((E,S)=>E*t.dRgb[S]),t.fl),s=r[0]+(-12*r[1]+r[2])/11,a=(r[0]+r[1]-2*r[2])/9,i=(Math.atan2(a,s)%ma+ma)%ma,c=.25*(Math.cos(i+2)+3.8),l=5e4/13*t.nc*t.ncb*si(c*Math.sqrt(s**2+a**2),r[0]+r[1]+1.05*r[2]+.305),d=gt(l,.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),f=t.nbb*(2*r[0]+r[1]+.05*r[2]),h=gt(f/t.aW,.5*t.c*t.z),m=100*gt(h,2),p=4/t.c*h*(t.aW+4)*t.flRoot,v=d*h,g=v*t.flRoot,y=yt(i*K2),_=q2(y),b=50*gt(t.c*d/(t.aW+4),1/2);return{J:m,C:v,h:y,s:b,Q:p,M:g,H:_}}var Q2=new U({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:De,fromBase(e){const t=Eu(e,bc);return[t.J,t.M,t.h]},toBase(e){return oo({J:e[0],M:e[1],h:e[2]},bc)}});const eg=Oe.D65,tg=216/24389,wu=24389/27;function ng(e){return 116*(e>tg?Math.cbrt(e):(wu*e+16)/116)-16}function io(e){return e>8?Math.pow((e+16)/116,3):e/wu}function rg(e,t){let[n,r,s]=e,a=[],i=0;if(s===0)return[0,0,0];let c=io(s);s>0?i=.00379058511492914*s**2+.608983189401032*s+.9155088574762233:i=9514440756550361e-21*s**2+.08693057439788597*s-21.928975842194614;const l=2e-12,d=15;let f=0,h=1/0;for(;f<=d;){a=oo({J:i,C:r,h:n},t);const m=Math.abs(a[1]-c);if(m<h){if(m<=l)return a;h=m}i=i-(a[1]-c)*i/(2*a[1]),f+=1}return oo({J:i,C:r,h:n},t)}function sg(e,t){const n=ng(e[1]);if(n===0)return[0,0,0];const r=Eu(e,ci);return[yt(r.h),r.C,n]}const ci=xu(eg,200/Math.PI*io(50),io(50)*100,"average",!1);var ur=new U({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:De,fromBase(e){return sg(e)},toBase(e){return rg(e,ci)},formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ag=Math.PI/180,_c=[1,.007,.0228];function xc(e){e[1]<0&&(e=ur.fromBase(ur.toBase(e)));const t=Math.log(Math.max(1+_c[2]*e[1]*ci.flRoot,1))/_c[2],n=e[0]*ag,r=t*Math.cos(n),s=t*Math.sin(n);return[e[2],r,s]}function og(e,t){[e,t]=Y([e,t]);let[n,r,s]=xc(ur.from(e)),[a,i,c]=xc(ur.from(t));return Math.sqrt((n-a)**2+(r-i)**2+(s-c)**2)}var wn={deltaE76:M2,deltaECMC:A2,deltaE2000:fu,deltaEJz:O2,deltaEITP:Y2,deltaEOK:ro,deltaEHCT:og};function ig(e){const t=e?Math.floor(Math.log10(Math.abs(e))):0;return Math.max(parseFloat(`1e${t-2}`),1e-6)}const Ec={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Ut(e,{method:t=qe.gamut_mapping,space:n=void 0,deltaEMethod:r="",jnd:s=2,blackWhiteClamp:a={}}={}){if(e=Y(e),wr(arguments[1])?n=arguments[1]:n||(n=e.space),n=U.get(n),qt(e,n,{epsilon:0}))return e;let i;if(t==="css")i=cg(e,{space:n});else{if(t!=="clip"&&!qt(e,n)){Object.prototype.hasOwnProperty.call(Ec,t)&&({method:t,jnd:s,deltaEMethod:r,blackWhiteClamp:a}=Ec[t]);let c=fu;if(r!==""){for(let d in wn)if("deltae"+r.toLowerCase()===d.toLowerCase()){c=wn[d];break}}let l=Ut(ie(e,n),{method:"clip",space:n});if(c(e,l)>s){if(Object.keys(a).length===3){let b=U.resolveCoord(a.channel),E=Ke(ie(e,b.space),b.id);if(Lt(E)&&(E=0),E>=a.max)return ie({space:"xyz-d65",coords:Oe.D65},e.space);if(E<=a.min)return ie({space:"xyz-d65",coords:[0,0,0]},e.space)}let d=U.resolveCoord(t),f=d.space,h=d.id,m=ie(e,f);m.coords.forEach((b,E)=>{Lt(b)&&(m.coords[E]=0)});let v=(d.range||d.refRange)[0],g=ig(s),y=v,_=Ke(m,h);for(;_-y>g;){let b=En(m);b=Ut(b,{space:n,method:"clip"}),c(m,b)-s<g?y=Ke(m,h):_=Ke(m,h),St(m,h,(y+_)/2)}i=ie(m,n)}else i=l}else i=ie(e,n);if(t==="clip"||!qt(i,n,{epsilon:0})){let c=Object.values(n.coords).map(l=>l.range||[]);i.coords=i.coords.map((l,d)=>{let[f,h]=c[d];return f!==void 0&&(l=Math.max(f,l)),h!==void 0&&(l=Math.min(l,h)),l})}}return n!==e.space&&(i=ie(i,e.space)),e.coords=i.coords,e}Ut.returns="color";const wc={WHITE:{space:xn,coords:[1,0,0]},BLACK:{space:xn,coords:[0,0,0]}};function cg(e,{space:t}={}){e=Y(e),t||(t=e.space),t=U.get(t);const s=U.get("oklch");if(t.isUnbounded)return ie(e,t);const a=ie(e,s);let i=a.coords[0];if(i>=1){const v=ie(wc.WHITE,t);return v.alpha=e.alpha,ie(v,t)}if(i<=0){const v=ie(wc.BLACK,t);return v.alpha=e.alpha,ie(v,t)}if(qt(a,t,{epsilon:0}))return ie(a,t);function c(v){const g=ie(v,t),y=Object.values(t.coords);return g.coords=g.coords.map((_,b)=>{if("range"in y[b]){const[E,S]=y[b].range;return lu(E,_,S)}return _}),g}let l=0,d=a.coords[1],f=!0,h=En(a),m=c(h),p=ro(m,h);if(p<.02)return m;for(;d-l>1e-4;){const v=(l+d)/2;if(h.coords[1]=v,f&&qt(h,t,{epsilon:0}))l=v;else if(m=c(h),p=ro(m,h),p<.02){if(.02-p<1e-4)break;f=!1,l=v}else d=v}return m}function ie(e,t,{inGamut:n}={}){e=Y(e),t=U.get(t);let r=t.from(e),s={space:t,coords:r,alpha:e.alpha};return n&&(s=Ut(s,n===!0?void 0:n)),s}ie.returns="color";function Qn(e,{precision:t=qe.precision,format:n="default",inGamut:r=!0,...s}={}){var l,d,f;let a;e=Y(e);let i=n;n=(d=(l=e.space.getFormat(n))!=null?l:e.space.getFormat("default"))!=null?d:U.DEFAULT_FORMAT;let c=e.coords.slice();if(r||(r=n.toGamut),r&&!qt(e)&&(c=Ut(En(e),r===!0?void 0:r).coords),n.type==="custom")if(s.precision=t,n.serialize)a=n.serialize(c,e.alpha,s);else throw new TypeError(`format ${i} can only be used to parse colors, not for serialization`);else{let h=n.name||"color";n.serializeCoords?c=n.serializeCoords(c,t):t!==null&&(c=c.map(g=>is(g,{precision:t})));let m=[...c];if(h==="color"){let g=n.id||((f=n.ids)==null?void 0:f[0])||e.space.id;m.unshift(g)}let p=e.alpha;t!==null&&(p=is(p,{precision:t}));let v=e.alpha>=1||n.noAlpha?"":`${n.commas?",":" /"} ${p}`;a=`${h}(${m.join(n.commas?", ":" ")}${v})`}return a}const lg=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],dg=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]];var Bs=new Fe({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:lg,fromXYZ_M:dg});const Hr=1.09929682680944,Sc=.018053968510807;var Su=new Fe({id:"rec2020",name:"REC.2020",base:Bs,toBase(e){return e.map(function(t){return t<Sc*4.5?t/4.5:Math.pow((t+Hr-1)/Hr,1/.45)})},fromBase(e){return e.map(function(t){return t>=Sc?Hr*Math.pow(t,.45)-(Hr-1):4.5*t})}});const ug=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fg=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]];var Cu=new Fe({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:ug,fromXYZ_M:fg});const hg=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],Se=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Mu=new Fe({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:hg,fromXYZ_M:Se}),Cc={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Mc=Array(3).fill("<percentage> | <number>[0, 255]"),Tc=Array(3).fill("<number>[0, 255]");var Sn=new Fe({id:"srgb",name:"sRGB",base:Mu,fromBase:e=>e.map(t=>{let n=t<0?-1:1,r=t*n;return r>.0031308?n*(1.055*r**(1/2.4)-.055):12.92*t}),toBase:e=>e.map(t=>{let n=t<0?-1:1,r=t*n;return r<=.04045?t/12.92:n*((r+.055)/1.055)**2.4}),formats:{rgb:{coords:Mc},rgb_number:{name:"rgb",commas:!0,coords:Tc,noAlpha:!0},color:{},rgba:{coords:Mc,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Tc},hex:{type:"custom",toGamut:!0,test:e=>/^#([a-f0-9]{3,4}){1,2}$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let t=[];return e.replace(/[a-f0-9]{2}/gi,n=>{t.push(parseInt(n,16)/255)}),{spaceId:"srgb",coords:t.slice(0,3),alpha:t.slice(3)[0]}},serialize:(e,t,{collapse:n=!0}={})=>{t<1&&e.push(t),e=e.map(a=>Math.round(a*255));let r=n&&e.every(a=>a%17===0);return"#"+e.map(a=>r?(a/17).toString(16):a.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){e=e.toLowerCase();let t={spaceId:"srgb",coords:null,alpha:1};if(e==="transparent"?(t.coords=Cc.black,t.alpha=0):t.coords=Cc[e],t.coords)return t}}}}),Tu=new Fe({id:"p3",cssId:"display-p3",name:"P3",base:Cu,fromBase:Sn.fromBase,toBase:Sn.toBase});qe.display_space=Sn;let pa;if(typeof CSS<"u"&&CSS.supports)for(let e of[Xe,Su,Tu]){let t=e.getMinCoords(),r=Qn({space:e,coords:t,alpha:1});if(CSS.supports("color",r)){qe.display_space=e;break}}function mg(e,{space:t=qe.display_space,...n}={}){let r=Qn(e,n);if(typeof CSS>"u"||CSS.supports("color",r)||!qe.display_space)r=new String(r),r.color=e;else{let s=e;if((e.coords.some(Lt)||Lt(e.alpha))&&!(pa!=null?pa:pa=CSS.supports("color","hsl(none 50% 50%)"))&&(s=En(e),s.coords=s.coords.map(be),s.alpha=be(s.alpha),r=Qn(s,n),CSS.supports("color",r)))return r=new String(r),r.color=s,r;s=ie(s,t),r=new String(Qn(s,n)),r.color=s}return r}function pg(e,t){return e=Y(e),t=Y(t),e.space===t.space&&e.alpha===t.alpha&&e.coords.every((n,r)=>n===t.coords[r])}function Ft(e){return Ke(e,[De,"y"])}function Au(e,t){St(e,[De,"y"],t)}function gg(e){Object.defineProperty(e.prototype,"luminance",{get(){return Ft(this)},set(t){Au(this,t)}})}var vg=Object.freeze({__proto__:null,getLuminance:Ft,register:gg,setLuminance:Au});function yg(e,t){e=Y(e),t=Y(t);let n=Math.max(Ft(e),0),r=Math.max(Ft(t),0);return r>n&&([n,r]=[r,n]),(n+.05)/(r+.05)}const bg=.56,_g=.57,xg=.62,Eg=.65,Ac=.022,wg=1.414,Sg=.1,Cg=5e-4,Mg=1.14,jc=.027,Tg=1.14;function Dc(e){return e>=Ac?e:e+(Ac-e)**wg}function ln(e){let t=e<0?-1:1,n=Math.abs(e);return t*Math.pow(n,2.4)}function Ag(e,t){t=Y(t),e=Y(e);let n,r,s,a,i,c;t=ie(t,"srgb"),[a,i,c]=t.coords;let l=ln(a)*.2126729+ln(i)*.7151522+ln(c)*.072175;e=ie(e,"srgb"),[a,i,c]=e.coords;let d=ln(a)*.2126729+ln(i)*.7151522+ln(c)*.072175,f=Dc(l),h=Dc(d),m=h>f;return Math.abs(h-f)<Cg?r=0:m?(n=h**bg-f**_g,r=n*Mg):(n=h**Eg-f**xg,r=n*Tg),Math.abs(r)<Sg?s=0:r>0?s=r-jc:s=r+jc,s*100}function jg(e,t){e=Y(e),t=Y(t);let n=Math.max(Ft(e),0),r=Math.max(Ft(t),0);r>n&&([n,r]=[r,n]);let s=n+r;return s===0?0:(n-r)/s}const Dg=5e4;function Ng(e,t){e=Y(e),t=Y(t);let n=Math.max(Ft(e),0),r=Math.max(Ft(t),0);return r>n&&([n,r]=[r,n]),r===0?Dg:(n-r)/r}function Rg(e,t){e=Y(e),t=Y(t);let n=Ke(e,[Xe,"l"]),r=Ke(t,[Xe,"l"]);return Math.abs(n-r)}const Ig=216/24389,Nc=24/116,zr=24389/27;let ga=Oe.D65;var co=new U({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:ga,base:De,fromBase(e){let n=e.map((r,s)=>r/ga[s]).map(r=>r>Ig?Math.cbrt(r):(zr*r+16)/116);return[116*n[1]-16,500*(n[0]-n[1]),200*(n[1]-n[2])]},toBase(e){let t=[];return t[1]=(e[0]+16)/116,t[0]=e[1]/500+t[1],t[2]=t[1]-e[2]/200,[t[0]>Nc?Math.pow(t[0],3):(116*t[0]-16)/zr,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/zr,t[2]>Nc?Math.pow(t[2],3):(116*t[2]-16)/zr].map((r,s)=>r*ga[s])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const va=Math.pow(5,.5)*.5+.5;function kg(e,t){e=Y(e),t=Y(t);let n=Ke(e,[co,"l"]),r=Ke(t,[co,"l"]),s=Math.abs(Math.pow(n,va)-Math.pow(r,va)),a=Math.pow(s,1/va)*Math.SQRT2-40;return a<7.5?0:a}var ns=Object.freeze({__proto__:null,contrastAPCA:Ag,contrastDeltaPhi:kg,contrastLstar:Rg,contrastMichelson:jg,contrastWCAG21:yg,contrastWeber:Ng});function Og(e,t,n={}){wr(n)&&(n={algorithm:n});let{algorithm:r,...s}=n;if(!r){let a=Object.keys(ns).map(i=>i.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${a}`)}e=Y(e),t=Y(t);for(let a in ns)if("contrast"+r.toLowerCase()===a.toLowerCase())return ns[a](e,t,s);throw new TypeError(`Unknown contrast algorithm: ${r}`)}function Us(e){let[t,n,r]=Sr(e,De),s=t+15*n+3*r;return[4*t/s,9*n/s]}function ju(e){let[t,n,r]=Sr(e,De),s=t+n+r;return[t/s,n/s]}function Pg(e){Object.defineProperty(e.prototype,"uv",{get(){return Us(this)}}),Object.defineProperty(e.prototype,"xy",{get(){return ju(this)}})}var $g=Object.freeze({__proto__:null,register:Pg,uv:Us,xy:ju});function Yn(e,t,n={}){wr(n)&&(n={method:n});let{method:r=qe.deltaE,...s}=n;for(let a in wn)if("deltae"+r.toLowerCase()===a.toLowerCase())return wn[a](e,t,s);throw new TypeError(`Unknown deltaE method: ${r}`)}function Lg(e,t=.25){let r=[U.get("oklch","lch"),"l"];return St(e,r,s=>s*(1+t))}function Bg(e,t=.25){let r=[U.get("oklch","lch"),"l"];return St(e,r,s=>s*(1-t))}var Ug=Object.freeze({__proto__:null,darken:Bg,lighten:Lg});function Du(e,t,n=.5,r={}){return[e,t]=[Y(e),Y(t)],It(n)==="object"&&([n,r]=[.5,n]),Cr(e,t,r)(n)}function Nu(e,t,n={}){let r;li(e)&&([r,n]=[e,t],[e,t]=r.rangeArgs.colors);let{maxDeltaE:s,deltaEMethod:a,steps:i=2,maxSteps:c=1e3,...l}=n;r||([e,t]=[Y(e),Y(t)],r=Cr(e,t,l));let d=Yn(e,t),f=s>0?Math.max(i,Math.ceil(d/s)+1):i,h=[];if(c!==void 0&&(f=Math.min(f,c)),f===1)h=[{p:.5,color:r(.5)}];else{let m=1/(f-1);h=Array.from({length:f},(p,v)=>{let g=v*m;return{p:g,color:r(g)}})}if(s>0){let m=h.reduce((p,v,g)=>{if(g===0)return 0;let y=Yn(v.color,h[g-1].color,a);return Math.max(p,y)},0);for(;m>s;){m=0;for(let p=1;p<h.length&&h.length<c;p++){let v=h[p-1],g=h[p],y=(g.p+v.p)/2,_=r(y);m=Math.max(m,Yn(_,v.color),Yn(_,g.color)),h.splice(p,0,{p:y,color:r(y)}),p++}}}return h=h.map(m=>m.color),h}function Cr(e,t,n={}){if(li(e)){let[l,d]=[e,t];return Cr(...l.rangeArgs.colors,{...l.rangeArgs.options,...d})}let{space:r,outputSpace:s,progression:a,premultiplied:i}=n;e=Y(e),t=Y(t),e=En(e),t=En(t);let c={colors:[e,t],options:n};if(r?r=U.get(r):r=U.registry[qe.interpolationSpace]||e.space,s=s?U.get(s):r,e=ie(e,r),t=ie(t,r),e=Ut(e),t=Ut(t),r.coords.h&&r.coords.h.type==="angle"){let l=n.hue=n.hue||"shorter",d=[r,"h"],[f,h]=[Ke(e,d),Ke(t,d)];isNaN(f)&&!isNaN(h)?f=h:isNaN(h)&&!isNaN(f)&&(h=f),[f,h]=_2(l,[f,h]),St(e,d,f),St(t,d,h)}return i&&(e.coords=e.coords.map(l=>l*e.alpha),t.coords=t.coords.map(l=>l*t.alpha)),Object.assign(l=>{l=a?a(l):l;let d=e.coords.map((m,p)=>{let v=t.coords[p];return lr(m,v,l)}),f=lr(e.alpha,t.alpha,l),h={space:r,coords:d,alpha:f};return i&&(h.coords=h.coords.map(m=>m/f)),s!==r&&(h=ie(h,s)),h},{rangeArgs:c})}function li(e){return It(e)==="function"&&!!e.rangeArgs}qe.interpolationSpace="lab";function Fg(e){e.defineFunction("mix",Du,{returns:"color"}),e.defineFunction("range",Cr,{returns:"function<color>"}),e.defineFunction("steps",Nu,{returns:"array<color>"})}var Hg=Object.freeze({__proto__:null,isRange:li,mix:Du,range:Cr,register:Fg,steps:Nu}),Ru=new U({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Sn,fromBase:e=>{let t=Math.max(...e),n=Math.min(...e),[r,s,a]=e,[i,c,l]=[NaN,0,(n+t)/2],d=t-n;if(d!==0){switch(c=l===0||l===1?0:(t-l)/Math.min(l,1-l),t){case r:i=(s-a)/d+(s<a?6:0);break;case s:i=(a-r)/d+2;break;case a:i=(r-s)/d+4}i=i*60}return c<0&&(i+=180,c=Math.abs(c)),i>=360&&(i-=360),[i,c*100,l*100]},toBase:e=>{let[t,n,r]=e;t=t%360,t<0&&(t+=360),n/=100,r/=100;function s(a){let i=(a+t/30)%12,c=n*Math.min(r,1-r);return r-c*Math.max(-1,Math.min(i-3,9-i,1))}return[s(0),s(8),s(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),Iu=new U({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Ru,fromBase(e){let[t,n,r]=e;n/=100,r/=100;let s=r+n*Math.min(r,1-r);return[t,s===0?0:200*(1-r/s),100*s]},toBase(e){let[t,n,r]=e;n/=100,r/=100;let s=r*(1-n/2);return[t,s===0||s===1?0:(r-s)/Math.min(s,1-s)*100,s*100]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),zg=new U({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:Iu,fromBase(e){let[t,n,r]=e;return[t,r*(100-n)/100,100-r]},toBase(e){let[t,n,r]=e;n/=100,r/=100;let s=n+r;if(s>=1){let c=n/s;return[t,0,c*100]}let a=1-r,i=a===0?0:1-n/a;return[t,i*100,a*100]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Yg=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],Wg=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]];var ku=new Fe({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe 98 RGB compatible",white:"D65",toXYZ_M:Yg,fromXYZ_M:Wg}),Zg=new Fe({id:"a98rgb",cssId:"a98-rgb",name:"Adobe 98 RGB compatible",base:ku,toBase:e=>e.map(t=>Math.pow(Math.abs(t),563/256)*Math.sign(t)),fromBase:e=>e.map(t=>Math.pow(Math.abs(t),256/563)*Math.sign(t))});const Gg=[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],Vg=[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]];var Ou=new Fe({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:oi,toXYZ_M:Gg,fromXYZ_M:Vg});const Kg=1/512,Xg=16/512;var qg=new Fe({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Ou,toBase(e){return e.map(t=>t<Xg?t/16:t**1.8)},fromBase(e){return e.map(t=>t>=Kg?t**(1/1.8):16*t)}}),Jg=new U({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:xn,fromBase(e){let[t,n,r]=e,s;const a=2e-4;return Math.abs(n)<a&&Math.abs(r)<a?s=NaN:s=Math.atan2(r,n)*180/Math.PI,[t,Math.sqrt(n**2+r**2),yt(s)]},toBase(e){let[t,n,r]=e,s,a;return isNaN(r)?(s=0,a=0):(s=n*Math.cos(r*Math.PI/180),a=n*Math.sin(r*Math.PI/180)),[t,s,a]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});let Pu=Oe.D65;const Qg=216/24389,Rc=24389/27,[Ic,kc]=Us({space:De,coords:Pu});var $u=new U({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Pu,base:De,fromBase(e){let t=[be(e[0]),be(e[1]),be(e[2])],n=t[1],[r,s]=Us({space:De,coords:t});if(!Number.isFinite(r)||!Number.isFinite(s))return[0,0,0];let a=n<=Qg?Rc*n:116*Math.cbrt(n)-16;return[a,13*a*(r-Ic),13*a*(s-kc)]},toBase(e){let[t,n,r]=e;if(t===0||Lt(t))return[0,0,0];n=be(n),r=be(r);let s=n/(13*t)+Ic,a=r/(13*t)+kc,i=t<=8?t/Rc:Math.pow((t+16)/116,3);return[i*(9*s/(4*a)),i,i*((12-3*s-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),di=new U({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:$u,fromBase(e){let[t,n,r]=e,s;const a=.02;return Math.abs(n)<a&&Math.abs(r)<a?s=NaN:s=Math.atan2(r,n)*180/Math.PI,[t,Math.sqrt(n**2+r**2),yt(s)]},toBase(e){let[t,n,r]=e;return n<0&&(n=0),isNaN(r)&&(r=0),[t,n*Math.cos(r*Math.PI/180),n*Math.sin(r*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const ev=216/24389,tv=24389/27,Oc=Se[0][0],Pc=Se[0][1],ya=Se[0][2],$c=Se[1][0],Lc=Se[1][1],ba=Se[1][2],Bc=Se[2][0],Uc=Se[2][1],_a=Se[2][2];function dn(e,t,n){const r=t/(Math.sin(n)-e*Math.cos(n));return r<0?1/0:r}function ds(e){const t=Math.pow(e+16,3)/1560896,n=t>ev?t:e/tv,r=n*(284517*Oc-94839*ya),s=n*(838422*ya+769860*Pc+731718*Oc),a=n*(632260*ya-126452*Pc),i=n*(284517*$c-94839*ba),c=n*(838422*ba+769860*Lc+731718*$c),l=n*(632260*ba-126452*Lc),d=n*(284517*Bc-94839*_a),f=n*(838422*_a+769860*Uc+731718*Bc),h=n*(632260*_a-126452*Uc);return{r0s:r/a,r0i:s*e/a,r1s:r/(a+126452),r1i:(s-769860)*e/(a+126452),g0s:i/l,g0i:c*e/l,g1s:i/(l+126452),g1i:(c-769860)*e/(l+126452),b0s:d/h,b0i:f*e/h,b1s:d/(h+126452),b1i:(f-769860)*e/(h+126452)}}function Fc(e,t){const n=t/360*Math.PI*2,r=dn(e.r0s,e.r0i,n),s=dn(e.r1s,e.r1i,n),a=dn(e.g0s,e.g0i,n),i=dn(e.g1s,e.g1i,n),c=dn(e.b0s,e.b0i,n),l=dn(e.b1s,e.b1i,n);return Math.min(r,s,a,i,c,l)}var nv=new U({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:di,gamutSpace:Sn,fromBase(e){let[t,n,r]=[be(e[0]),be(e[1]),be(e[2])],s;if(t>99.9999999)s=0,t=100;else if(t<1e-8)s=0,t=0;else{let a=ds(t),i=Fc(a,r);s=n/i*100}return[r,s,t]},toBase(e){let[t,n,r]=[be(e[0]),be(e[1]),be(e[2])],s;if(r>99.9999999)r=100,s=0;else if(r<1e-8)r=0,s=0;else{let a=ds(r);s=Fc(a,t)/100*n}return[r,s,t]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});Se[0][0];Se[0][1];Se[0][2];Se[1][0];Se[1][1];Se[1][2];Se[2][0];Se[2][1];Se[2][2];function un(e,t){return Math.abs(t)/Math.sqrt(Math.pow(e,2)+1)}function Hc(e){let t=un(e.r0s,e.r0i),n=un(e.r1s,e.r1i),r=un(e.g0s,e.g0i),s=un(e.g1s,e.g1i),a=un(e.b0s,e.b0i),i=un(e.b1s,e.b1i);return Math.min(t,n,r,s,a,i)}var rv=new U({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:di,gamutSpace:"self",fromBase(e){let[t,n,r]=[be(e[0]),be(e[1]),be(e[2])],s;if(t>99.9999999)s=0,t=100;else if(t<1e-8)s=0,t=0;else{let a=ds(t),i=Hc(a);s=n/i*100}return[r,s,t]},toBase(e){let[t,n,r]=[be(e[0]),be(e[1]),be(e[2])],s;if(r>99.9999999)r=100,s=0;else if(r<1e-8)r=0,s=0;else{let a=ds(r);s=Hc(a)/100*n}return[r,s,t]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const zc=203,Yc=2610/2**14,sv=2**14/2610,av=2523/2**5,Wc=2**5/2523,Zc=3424/2**12,Gc=2413/2**7,Vc=2392/2**7;var ov=new Fe({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:Bs,toBase(e){return e.map(function(t){return(Math.max(t**Wc-Zc,0)/(Gc-Vc*t**Wc))**sv*1e4/zc})},fromBase(e){return e.map(function(t){let n=Math.max(t*zc/1e4,0),r=Zc+Gc*n**Yc,s=1+Vc*n**Yc;return(r/s)**av})}});const Kc=.17883277,Xc=.28466892,qc=.55991073,xa=3.7743;var iv=new Fe({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Bs,toBase(e){return e.map(function(t){return t<=.5?t**2/3*xa:(Math.exp((t-qc)/Kc)+Xc)/12*xa})},fromBase(e){return e.map(function(t){return t/=xa,t<=1/12?Math.sqrt(3*t):Kc*Math.log(12*t-Xc)+qc})}});const Lu={};Bt.add("chromatic-adaptation-start",e=>{e.options.method&&(e.M=Bu(e.W1,e.W2,e.options.method))});Bt.add("chromatic-adaptation-end",e=>{e.M||(e.M=Bu(e.W1,e.W2,e.options.method))});function Fs({id:e,toCone_M:t,fromCone_M:n}){Lu[e]=arguments[0]}function Bu(e,t,n="Bradford"){let r=Lu[n],[s,a,i]=ce(r.toCone_M,e),[c,l,d]=ce(r.toCone_M,t),f=[[c/s,0,0],[0,l/a,0],[0,0,d/i]],h=ce(f,r.toCone_M);return ce(r.fromCone_M,h)}Fs({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]});Fs({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]});Fs({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]});Fs({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]});Object.assign(Oe,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});Oe.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];const cv=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],lv=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]];var Uu=new Fe({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:Oe.ACES,toXYZ_M:cv,fromXYZ_M:lv});const Yr=2**-16,Ea=-.35828683,Wr=(Math.log2(65504)+9.72)/17.52;var dv=new Fe({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[Ea,Wr],name:"Red"},g:{range:[Ea,Wr],name:"Green"},b:{range:[Ea,Wr],name:"Blue"}},referred:"scene",base:Uu,toBase(e){const t=-.3013698630136986;return e.map(function(n){return n<=t?(2**(n*17.52-9.72)-Yr)*2:n<Wr?2**(n*17.52-9.72):65504})},fromBase(e){return e.map(function(t){return t<=0?(Math.log2(Yr)+9.72)/17.52:t<Yr?(Math.log2(Yr+t*.5)+9.72)/17.52:(Math.log2(t)+9.72)/17.52})}}),Jc=Object.freeze({__proto__:null,A98RGB:Zg,A98RGB_Linear:ku,ACEScc:dv,ACEScg:Uu,CAM16_JMh:Q2,HCT:ur,HPLuv:rv,HSL:Ru,HSLuv:nv,HSV:Iu,HWB:zg,ICTCP:ao,JzCzHz:so,Jzazbz:mu,LCH:dr,LCHuv:di,Lab:Xe,Lab_D65:co,Luv:$u,OKLCH:Jg,OKLab:xn,P3:Tu,P3_Linear:Cu,ProPhoto:qg,ProPhoto_Linear:Ou,REC_2020:Su,REC_2020_Linear:Bs,REC_2100_HLG:iv,REC_2100_PQ:ov,XYZ_ABS_D65:ii,XYZ_D50:oi,XYZ_D65:De,sRGB:Sn,sRGB_Linear:Mu});class ne{constructor(...t){let n;t.length===1&&(n=Y(t[0]));let r,s,a;n?(r=n.space||n.spaceId,s=n.coords,a=n.alpha):[r,s,a]=t,Object.defineProperty(this,"space",{value:U.get(r),writable:!1,enumerable:!0,configurable:!0}),this.coords=s?s.slice():[0,0,0],this.alpha=a>1||a===void 0?1:a<0?0:a;for(let i=0;i<this.coords.length;i++)this.coords[i]==="NaN"&&(this.coords[i]=NaN);for(let i in this.space.coords)Object.defineProperty(this,i,{get:()=>this.get(i),set:c=>this.set(i,c)})}get spaceId(){return this.space.id}clone(){return new ne(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...t){let n=mg(this,...t);return n.color=new ne(n.color),n}static get(t,...n){return t instanceof ne?t:new ne(t,...n)}static defineFunction(t,n,r=n){let{instance:s=!0,returns:a}=r,i=function(...c){let l=n(...c);if(a==="color")l=ne.get(l);else if(a==="function<color>"){let d=l;l=function(...f){let h=d(...f);return ne.get(h)},Object.assign(l,d)}else a==="array<color>"&&(l=l.map(d=>ne.get(d)));return l};t in ne||(ne[t]=i),s&&(ne.prototype[t]=function(...c){return i(this,...c)})}static defineFunctions(t){for(let n in t)ne.defineFunction(n,t[n],t[n])}static extend(t){if(t.register)t.register(ne);else for(let n in t)ne.defineFunction(n,t[n])}}ne.defineFunctions({get:Ke,getAll:Sr,set:St,setAll:ai,to:ie,equals:pg,inGamut:qt,toGamut:Ut,distance:hu,toString:Qn});Object.assign(ne,{util:m2,hooks:Bt,WHITES:Oe,Space:U,spaces:U.registry,parse:uu,defaults:qe});for(let e of Object.keys(Jc))U.register(Jc[e]);for(let e in U.registry)lo(e,U.registry[e]);Bt.add("colorspace-init-end",e=>{var t;lo(e.id,e),(t=e.aliases)==null||t.forEach(n=>{lo(n,e)})});function lo(e,t){let n=e.replace(/-/g,"_");Object.defineProperty(ne.prototype,n,{get(){let r=this.getAll(e);return typeof Proxy>"u"?r:new Proxy(r,{has:(s,a)=>{try{return U.resolveCoord([t,a]),!0}catch{}return Reflect.has(s,a)},get:(s,a,i)=>{if(a&&typeof a!="symbol"&&!(a in s)){let{index:c}=U.resolveCoord([t,a]);if(c>=0)return s[c]}return Reflect.get(s,a,i)},set:(s,a,i,c)=>{if(a&&typeof a!="symbol"&&!(a in s)||a>=0){let{index:l}=U.resolveCoord([t,a]);if(l>=0)return s[l]=i,this.setAll(e,s),!0}return Reflect.set(s,a,i,c)}})},set(r){this.setAll(e,r)},configurable:!0,enumerable:!0})}ne.extend(wn);ne.extend({deltaE:Yn});Object.assign(ne,{deltaEMethods:wn});ne.extend(Ug);ne.extend({contrast:Og});ne.extend($g);ne.extend(vg);ne.extend(Hg);ne.extend(ns);function uv(e){const t=new ne(e);return t.luminance<=.5&&t.alpha>=.5}const fv="_root_8ksd3_1",hv="_svg_8ksd3_5",mv="_circle_8ksd3_10",pv="_hide_8ksd3_15",gv="_children_8ksd3_25",Ln={root:fv,svg:hv,circle:mv,"ani-dash":"_ani-dash_8ksd3_1",hide:pv,children:gv},vv=314,Qc=100,yv=({size:e=Qc,value:t=1,duration:n=0,lineWidth:r=1,isVisible:s=!0,className:a,onAnimationEnd:i,paused:c,children:l})=>{const d=vv/Qc*e,f={"--round-progress-animation-duration":`${n}s`,"--round-progress-dash-offset":`${-1*d*t}`,"--round-progress-animation-play-state":`${c?"paused":"running"}`},[h,m]=x.useMemo(()=>{const p=$t();return[`RoundProgressCircle-${p}`,`RoundProgressClip-${p}`]},[]);return o.jsxs("div",{className:B(Ln.root,a,{[Ln.hide]:!s}),children:[o.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",className:Ln.svg,children:[o.jsxs("defs",{children:[o.jsx("circle",{id:h,className:Ln.circle,onAnimationEnd:i,style:f,cx:e/2,cy:e/2,r:e/2,fill:"none",strokeDasharray:d,strokeDashoffset:0,strokeLinecap:"butt"}),o.jsx("clipPath",{id:m,children:o.jsx("use",{href:`#${h}`})})]}),o.jsx("g",{children:o.jsx("use",{href:`#${h}`,stroke:"currentColor",strokeWidth:r*2,clipPath:`url(#${m})`})})]}),l&&o.jsx("div",{className:Ln.children,children:l})]})},bv=x.memo(yv),_v=u.createContext(null),xv=e=>!e.isLayoutDirty&&e.willUpdate(!1);function el(){const e=new Set,t=new WeakMap,n=()=>e.forEach(xv);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const Fu=e=>e===!0,Ev=e=>Fu(e===!0)||e==="id",wv=({children:e,id:t,inherit:n=!0})=>{const r=u.useContext(ki),s=u.useContext(_v),[a,i]=zf(),c=u.useRef(null),l=r.id||s;c.current===null&&(Ev(n)&&l&&(t=t?l+"-"+t:l),c.current={id:t,group:Fu(n)&&r.group||el()});const d=u.useMemo(()=>({...c.current,forceRender:a}),[i]);return u.createElement(ki.Provider,{value:d},e)},Sv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAABPpJREFUeAHtnE2IHEUUx/+v14QsoihJSFT0IuJ6kZgYiKISQRSCFz/wohcvfuAhGghhs9lD2MxublkPInrJxVyCHzchIrJokBBQRAJZP/CgbBTNhwghgexO+Wp2ZzfdXQkz3VNvasK/oXe6X1e99+r3n6qantlqgBsJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkAAJkMCAE5Bk8//ArcI5PNPKby2O4XW5UivXSfe41t+AYXyJd+TfWr4iVk5TEC/GP5iBw6Ottgu+xXpsryzKAfe++npjydccBFsxJn9G5FrZdVa5ZsyKvme0xfBx/HG7t3Qbt+HuWBZj0ddd+vJat26syqcpiMOdJQAhW6lQwJD10FfAfa9NaQrS61YOkL/+zSENt0mHkqeU1d26rykwG9FrT+Rsgq/1fDZn6+REsA5NPF8oelrnkW9yNsEVjfmX7sdxv157SRZy141O7AVpuAe10e/p/phRG6uE+QVDeBt75fMqlevUsRWk4fxk/YnuN9dJ2qSuaJbALuyTaZN4S0HsBJlw92rM73W/1bKBtWJ5UTI8a9lTLCf1gwMlhlfS6UyzgGkcdUO1hO2isk0PmXK3Yx5/a1435XITHNEmH9Z3Yf7OuYnndCIey5XN0NByn+VsnZ2MaOyPCkU/1Uwmc7YFvYd32KG23brn8wSexLjM5MpHOikGjhOmiW3qOB9L8IWOz68EAzbcloD9d4zKdwH79U1TfioobIKz1/B1HBOt8qO5GtL6ADKTs0U6sRmymthYyl9wvU8w86Xy0Pd5lU2C9a7tK5SXBPKvkksHdWwEybAqkMulgK1tOqlD2dVv7aZeONm+2NXravysvi4U6pwonK+cDqGclwvmv1Knh0c2gnSb8JicUoj+y8AzrT3Dm/pl4Klu3bTK75JLKu2L6m92SZhDOjsV55RKrmNUyo/rMSJU9TkmH2pVv9ffxuUrdfLAsqPx5aPkDtLsIclhskuIgtix7igSBekIk12hfs4h92AqeL9h1/pwpJGw2cbaP0H8nXjxbtymzVWimHGyGbIc7qtCIZk67qpPaJGTshFEcEvkdsR2Pxw7QNu/jSDA6XbAAX391Spvq7Gx/HVE1Z9kY5Nx+pMvCj/5Cs7HDtv2byVIO97Kq//qffFufMWWwpH/5DdfEMQwL6shy7BJgx2KgiSmHwWhIIkRSCwd9hAKkhiBxNJhD6EgiRFILB32EAqSGIHE0mEPoSCJEUgsHfYQCpIYgcTSYQ+hIIkRSCwd9hAKkhiBxNJhD6EgiRFILB2rHnK51G6H20q2FAzNYF7l/CPlaiXIH4H8X9bVrasD9v6aHF4NJBDKP1CsvslmFe5htwZzutCy+MAAwY/aBL8SN78Kt367qnhYXIXr8HSpcoaH9F+WfijZIxhsBPGJT7hp/bszQhviuhR99sk+8Q8/M9mshiy/KHq/9oTfTFrVqyCCi5rzW71y14kfO0FG5YKuZd0xQKL8p7m+oEOVH1bNNjtBfJP2yE/6lJ2H9ehdbexFs1Z2F8ivYf9Y980qxrHuqtYvbTeHFHP1E/0ZPKLm0POyiqXjnzf1eVmZPi8rwwl9ykNxXXv8+IxAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRwoxD4H91KyeHt4MJCAAAAAElFTkSuQmCC";class Cv{constructor({i18n:t,manager:n,onNotificationClick:r}){ee(this,"_i18n");ee(this,"_manager");ee(this,"_offNotificationClick");this._i18n=t,this._manager=n,this._offNotificationClick=this._manager.addNotificationClickListener(s=>{if(s.type!==Oi.CALENDAR_EVENT)return;const a=s.meta;r(a)})}destory(){var t;(t=this._offNotificationClick)==null||t.call(this)}_setNotification(t){var i;const{calendarId:n,id:r,conference:s}=t,a=Tv(t);a==null?this._cancelNotification(n,r):this._manager.scheduleNotification({id:tl(n,r),type:Oi.CALENDAR_EVENT,meta:{calendarId:n,eventId:r,joinUri:(i=s==null?void 0:s.entries.find(c=>c.type==="video"))==null?void 0:i.uri},icon:Sv,title:this._i18n.formatMessage("_.notifications.event.titleSoon",{summary:t.summary}),dueDate:a,body:Mv(this._i18n,t.start,t.end)})}_cancelNotification(t,n){this._manager.cancelNotification(tl(t,n))}cancelNotifications(t,n){for(let r of n)this._cancelNotification(t,r)}cancelAllNotifications(){this._manager.cancelAllNotification()}updateNotifications(t,n){for(let r of n)this._setNotification(r)}}function Mv(e,t,n){const r=je(uo(t)),s=je(uo(n));return t.year===n.year&&t.month===n.month&&t.date===n.date?e.formatMessage("_.notifications.event.body",{startTime:r.format(e.momentParams.time),endTime:s.format(e.momentParams.time)}):e.formatMessage("_.notifications.event.body-start-only",{startTime:r.format(e.momentParams.time)})}function tl(e,t){return`calendar-event:${encodeURIComponent(e)}:${encodeURIComponent(t)}`}function Tv(e){return e.isAllDay?null:uo(e.start)-6e5}function Av(e){const t=new Date;return t.setFullYear(e.year,e.month,e.date),t.setHours(e.hour,e.minute,0,0),t}function uo(e){return Av(e).getTime()}class jv{constructor(){ee(this,"_notificationEmitter",Yf());ee(this,"onNotificationClick",this._notificationEmitter.on)}show(t){}getNotificationsPermission(){return"denied"}async requestPermission(){return"denied"}setupForegroundNotifications(){return()=>{}}}function Dv(){const e=u.useContext(Km),{onConnectivityChange:t,forceSync:n}=e,[r,s]=u.useState(()=>({isOnline:e.getIsOnline(),isSyncing:e.getIsSyncing(),lastUpdate:e.getLastUpdate()}));return u.useEffect(()=>t(a=>{s(i=>Oo(i,c=>{c.isOnline=a.isOnline,c.isSyncing=a.isSyncing,c.lastUpdate=a.lastUpdate}))}),[t]),u.useMemo(()=>({...r,forceSync:n}),[n,r])}async function Nv(e,t,n,r){return await(await jn({requestName:"fetchSyncHttpMyDayEntryExternalSuggestions",authToken:e,path:`/me/myday/external_suggestions?locale=${encodeURIComponent(t)}&date=${encodeURIComponent(n)}`,signal:r})).json()}async function Rv(e,t){return await(await jn({requestName:"fetchSyncHttpCalendarProviders",authToken:e,path:"/me/calendar_providers/fetch",signal:t})).json()}async function wa(e,{type:t,...n},r){return await(await Po({requestName:"fetchSyncHttpCalendarProvidersConnect",authToken:e,path:`/me/calendar_providers/connect/${t}`,signal:r,body:n})).json()}async function Iv(e,t,n){await Po({requestName:"fetchSyncHttpCalendarProvidersDisconnect",authToken:e,path:"/me/calendar_providers/disconnect",signal:n,body:t})}async function nl(e,t,n,r){return await(await jn({requestName:"fetchSyncHttpCalendarProviderToken",authToken:e,path:`/me/calendar_providers/${n}/access_token?id=${encodeURIComponent(t)}`,signal:r})).json()}async function Zr(e,t,n){return await(await Po({requestName:"fetchSyncHttpCalendarProviderUpdate",authToken:e,path:"/me/calendar_providers/update",signal:n,body:t})).json()}async function kv({pageSize:e},t,n){return await(await jn({requestName:"fetchSyncHttpUnsplashCollection",authToken:t,path:`/unsplash/default_photos?${new URLSearchParams({per_page:String(e)})}`,signal:n})).json()}async function Ov({query:e,orientation:t,pageSize:n},r,s){return await(await jn({requestName:"fetchSyncHttpUnsplashSearch",authToken:r,path:`/unsplash/search/photos?${new URLSearchParams({query:e,orientation:t,per_page:String(n)})}`,signal:s})).json()}async function Pv({photoId:e},t,n){return await(await jn({requestName:"fetchSyncHttpUnsplashTrackDownload",authToken:t,path:`/unsplash/track_download?${new URLSearchParams({photo_id:String(e)})}`,signal:n})).json()}function rl(e){return[...e.values()].reduce((t,n)=>(Object.values(n.members).forEach(r=>{t.set(r.email.toLowerCase(),r)}),t),new Map)}function $v(){const e=x.useMemo(()=>({getValue:n=>rl(n.space),getUpdatedValue:(n,r)=>rl(r.store.space)}),[]);return{membersByEmail:Wf(e)}}function Lv(){const e=td(),{normalize:t}=nd(),[n,r]=x.useState([]),[s,a]=x.useState(""),i=x.useCallback(f=>{a(f)},[]),c=x.useMemo(()=>{if(!s.trim())return;const f=rp(s,n,"objectInfo.name","objectInfo.note"),h=Zf(f);return t(h).slice(0,Gf)},[t,s,n]),l=x.useMemo(()=>t(n),[n,t]),d=x.useCallback(async(f,h)=>{if(e===null)return;const m=await Nv(e,h,f);r(m)},[e]);return{defaultExternalSuggestions:l,fetchDefaultExternalSuggestions:d,searchSuggestions:i,searchResults:c}}const Bv={button:Vf,card:Kf,typography:Xf,skeleton:qf,dropdownMenu:Jf};function Uv(e){return $o(e,`/${as.Tasks}/all`)}function us(e,t,{taskId:n=null}={}){if(Qf(t))return Uv(e);{const r=encodeURIComponent(t);let s;if(n==null)s=`/${as.Tasks}/lists/${r}`;else{const a=encodeURIComponent(n);s=`/${as.Tasks}/lists/${r}/tasks/${a}`}return $o(e,s)}}function Fv(e,t,n){const r=encodeURIComponent(t),s=`/${as.Labels}/tag/${r}`;return $o(e,s)}function Hv(){const{pathname:e}=js();return u.useMemo(()=>{const{isMyDay:n,isMyCalendar:r,selectedCalendarId:s,selectedEventId:a,selectedTaskId:i}=p1(e);return{isMyDay:n,isMyCalendar:r,selectedCalendarId:s,selectedEventId:a,selectedTaskId:i}},[e])}function zv(){const e=rd();return u.useCallback(function(r,s){const a=Zo(window.location.search,{calendarId:r,eventId:s});e(a)},[e])}function Yv(){const e=rd();return u.useCallback(()=>{const t=Zo(window.location.search,{});e(t)},[e])}function Hu(){const e=js(),{isMyDay:t,selectedTaskId:n,selectedCalendarId:r,selectedEventId:s}=g1(e.pathname),a=zv(),i=Yv();return{isMyDay:t,selectedTaskId:n,selectedCalendarId:r,selectedEventId:s,deselectEvent:i,selectEvent:a}}function Wv(e){const n=z("card",e),r=z("task",e);return n?[n,void 0]:r!=null&&!eh(r)?[void 0,void 0]:[void 0,r]}function Zv(e,t){return u.useReducer((n,r)=>{const s=t[n][r];return s!=null?s:n},e)}const zu="ScrollArea",[Yu,S8]=Lo(zu),[Gv,bt]=Yu(zu),Vv=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[c,l]=u.useState(null),[d,f]=u.useState(null),[h,m]=u.useState(null),[p,v]=u.useState(null),[g,y]=u.useState(null),[_,b]=u.useState(0),[E,S]=u.useState(0),[T,j]=u.useState(!1),[M,C]=u.useState(!1),w=et(t,R=>l(R)),I=th(s);return u.createElement(Gv,{scope:n,type:r,dir:I,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:f,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:T,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:M,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:S},u.createElement(vt.div,K({dir:I},i,{ref:w,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})))}),Kv="ScrollAreaViewport",Xv=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...s}=e,a=bt(Kv,n),i=u.useRef(null),c=et(t,i,a.onViewportChange);return u.createElement(u.Fragment,null,u.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),u.createElement(vt.div,K({"data-radix-scroll-area-viewport":""},s,{ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style}}),u.createElement("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Mt="ScrollAreaScrollbar",qv=u.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bt(Mt,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,c=e.orientation==="horizontal";return u.useEffect(()=>(c?a(!0):i(!0),()=>{c?a(!1):i(!1)}),[c,a,i]),s.type==="hover"?u.createElement(Jv,K({},r,{ref:t,forceMount:n})):s.type==="scroll"?u.createElement(Qv,K({},r,{ref:t,forceMount:n})):s.type==="auto"?u.createElement(Wu,K({},r,{ref:t,forceMount:n})):s.type==="always"?u.createElement(ui,K({},r,{ref:t})):null}),Jv=u.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bt(Mt,e.__scopeScrollArea),[a,i]=u.useState(!1);return u.useEffect(()=>{const c=s.scrollArea;let l=0;if(c){const d=()=>{window.clearTimeout(l),i(!0)},f=()=>{l=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),u.createElement(Ht,{present:n||a},u.createElement(Wu,K({"data-state":a?"visible":"hidden"},r,{ref:t})))}),Qv=u.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bt(Mt,e.__scopeScrollArea),a=e.orientation==="horizontal",i=zs(()=>l("SCROLL_END"),100),[c,l]=Zv("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,s.scrollHideDelay,l]),u.useEffect(()=>{const d=s.viewport,f=a?"scrollLeft":"scrollTop";if(d){let h=d[f];const m=()=>{const p=d[f];h!==p&&(l("SCROLL"),i()),h=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,a,l,i]),u.createElement(Ht,{present:n||c!=="hidden"},u.createElement(ui,K({"data-state":c==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:Me(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Me(e.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),Wu=u.forwardRef((e,t)=>{const n=bt(Mt,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=u.useState(!1),c=e.orientation==="horizontal",l=zs(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(c?d:f)}},10);return hs(n.viewport,l),hs(n.content,l),u.createElement(Ht,{present:r||a},u.createElement(ui,K({"data-state":a?"visible":"hidden"},s,{ref:t})))}),ui=u.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=bt(Mt,e.__scopeScrollArea),a=u.useRef(null),i=u.useRef(0),[c,l]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Vu(c.viewport,c.content),f={...r,sizes:c,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return a5(m,i.current,c,p)}return n==="horizontal"?u.createElement(e5,K({},f,{ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=sl(m,c,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}})):n==="vertical"?u.createElement(t5,K({},f,{ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=sl(m,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}})):null}),e5=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=bt(Mt,e.__scopeScrollArea),[i,c]=u.useState(),l=u.useRef(null),d=et(t,l,a.onScrollbarXChange);return u.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),u.createElement(Gu,K({"data-orientation":"horizontal"},s,{ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Hs(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),Xu(m,h)&&f.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:fs(i.paddingLeft),paddingEnd:fs(i.paddingRight)}})}}))}),t5=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=bt(Mt,e.__scopeScrollArea),[i,c]=u.useState(),l=u.useRef(null),d=et(t,l,a.onScrollbarYChange);return u.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),u.createElement(Gu,K({"data-orientation":"vertical"},s,{ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Hs(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(a.viewport){const m=a.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),Xu(m,h)&&f.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:fs(i.paddingTop),paddingEnd:fs(i.paddingBottom)}})}}))}),[n5,Zu]=Yu(Mt),Gu=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:f,onResize:h,...m}=e,p=bt(Mt,n),[v,g]=u.useState(null),y=et(t,w=>g(w)),_=u.useRef(null),b=u.useRef(""),E=p.viewport,S=r.content-r.viewport,T=Be(f),j=Be(l),M=zs(h,10);function C(w){if(_.current){const I=w.clientX-_.current.left,R=w.clientY-_.current.top;d({x:I,y:R})}}return u.useEffect(()=>{const w=I=>{const R=I.target;(v==null?void 0:v.contains(R))&&T(I,S)};return document.addEventListener("wheel",w,{passive:!1}),()=>document.removeEventListener("wheel",w,{passive:!1})},[E,v,S,T]),u.useEffect(j,[r,j]),hs(v,M),hs(p.content,M),u.createElement(n5,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:Be(a),onThumbPointerUp:Be(i),onThumbPositionChange:j,onThumbPointerDown:Be(c)},u.createElement(vt.div,K({},m,{ref:y,style:{position:"absolute",...m.style},onPointerDown:Me(e.onPointerDown,w=>{w.button===0&&(w.target.setPointerCapture(w.pointerId),_.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(w))}),onPointerMove:Me(e.onPointerMove,C),onPointerUp:Me(e.onPointerUp,w=>{const I=w.target;I.hasPointerCapture(w.pointerId)&&I.releasePointerCapture(w.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),_.current=null})})))}),fo="ScrollAreaThumb",r5=u.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Zu(fo,e.__scopeScrollArea);return u.createElement(Ht,{present:n||s.hasThumb},u.createElement(s5,K({ref:t},r)))}),s5=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=bt(fo,n),i=Zu(fo,n),{onThumbPositionChange:c}=i,l=et(t,h=>i.onThumbChange(h)),d=u.useRef(),f=zs(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(f(),!d.current){const p=o5(h,c);d.current=p,c()}};return c(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,f,c]),u.createElement(vt.div,K({"data-state":i.hasThumb?"visible":"hidden"},s,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Me(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:v,y:g})}),onPointerUp:Me(e.onPointerUp,i.onThumbPointerUp)}))});function fs(e){return e?parseInt(e,10):0}function Vu(e,t){const n=e/t;return isNaN(n)?0:n}function Hs(e){const t=Vu(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function a5(e,t,n,r="ltr"){const s=Hs(n),a=s/2,i=t||a,c=s-i,l=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return Ku([l,d],h)(e)}function sl(e,t,n="ltr"){const r=Hs(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,c=a-r,l=n==="ltr"?[0,i]:[i*-1,0],d=nh(e,l);return Ku([0,i],[0,c])(d)}function Ku(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Xu(e,t){return e>0&&e<t}const o5=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,c=n.top!==a.top;(i||c)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function zs(e,t){const n=Be(e),r=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(r.current),[]),u.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function hs(e,t){const n=Be(t);Jl(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}const i5=Vv,c5=Xv,l5=qv,d5=r5;var qu={exports:{}},Ju={},Qu={exports:{}},e0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cn=u;function u5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var f5=typeof Object.is=="function"?Object.is:u5,h5=Cn.useState,m5=Cn.useEffect,p5=Cn.useLayoutEffect,g5=Cn.useDebugValue;function v5(e,t){var n=t(),r=h5({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return p5(function(){s.value=n,s.getSnapshot=t,Sa(s)&&a({inst:s})},[e,n,t]),m5(function(){return Sa(s)&&a({inst:s}),e(function(){Sa(s)&&a({inst:s})})},[e]),g5(n),n}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!f5(e,n)}catch{return!0}}function y5(e,t){return t()}var b5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y5:v5;e0.useSyncExternalStore=Cn.useSyncExternalStore!==void 0?Cn.useSyncExternalStore:b5;Qu.exports=e0;var _5=Qu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=u,x5=_5;function E5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var w5=typeof Object.is=="function"?Object.is:E5,S5=x5.useSyncExternalStore,C5=Ys.useRef,M5=Ys.useEffect,T5=Ys.useMemo,A5=Ys.useDebugValue;Ju.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var a=C5(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=T5(function(){function l(p){if(!d){if(d=!0,f=p,p=r(p),s!==void 0&&i.hasValue){var v=i.value;if(s(v,p))return h=v}return h=p}if(v=h,w5(f,p))return v;var g=r(p);return s!==void 0&&s(v,g)?v:(f=p,h=g)}var d=!1,f,h,m=n===void 0?null:n;return[function(){return l(t())},m===null?void 0:function(){return l(m())}]},[t,n,r,s]);var c=S5(e,a[0],a[1]);return M5(function(){i.hasValue=!0,i.value=c},[c]),A5(c),c};qu.exports=Ju;var t0=qu.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D=function(){return D=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},D.apply(this,arguments)};function fi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Z(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){i={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function ae(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Q;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(Q||(Q={}));var Ct;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(Ct||(Ct={}));var ms=Q.Start,Ws=Q.Stop,In=Q.Raise,Mr=Q.Send,hi=Q.Cancel,n0=Q.NullEvent,Zs=Q.Assign,j5=Q.After,D5=Q.DoneState,Gs=Q.Log,r0=Q.Init,ps=Q.Invoke,N5=Q.ErrorExecution,ho=Q.ErrorPlatform,mi=Q.ErrorCustom,Vs=Q.Update,s0=Q.Choose,a0=Q.Pure;const R5=Object.freeze(Object.defineProperty({__proto__:null,after:j5,assign:Zs,cancel:hi,choose:s0,doneState:D5,error:mi,errorExecution:N5,errorPlatform:ho,init:r0,invoke:ps,log:Gs,nullEvent:n0,pure:a0,raise:In,send:Mr,start:ms,stop:Ws,update:Vs},Symbol.toStringTag,{value:"Module"}));var o0=".",al={},mo="xstate.guard",I5="",Gr;function Tr(e,t,n){n===void 0&&(n=o0);var r=er(e,n),s=er(t,n);return J(s)?J(r)?s===r:!1:J(r)?r in s:Object.keys(r).every(function(a){return a in s?Tr(r[a],s[a]):!1})}function i0(e){try{return J(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function po(e,t){try{return kn(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function k5(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function er(e,t){if(k5(e))return e.value;if(kn(e))return gs(e);if(typeof e!="string")return e;var n=po(e,t);return gs(n)}function gs(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function Wn(e,t){for(var n={},r=Object.keys(e),s=0;s<r.length;s++){var a=r[s];n[a]=t(e[a],a,e,s)}return n}function ol(e,t,n){var r,s,a={};try{for(var i=Z(Object.keys(e)),c=i.next();!c.done;c=i.next()){var l=c.value,d=e[l];n(d)&&(a[l]=t(d,l,e))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return a}var O5=function(e){return function(t){var n,r,s=t;try{for(var a=Z(e),i=a.next();!i.done;i=a.next()){var c=i.value;s=s[c]}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s}};function P5(e,t){return function(n){var r,s,a=n;try{for(var i=Z(e),c=i.next();!c.done;c=i.next()){var l=c.value;a=a[t][l]}}catch(d){r={error:d}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return a}}function rs(e){if(!e)return[[]];if(J(e))return[[e]];var t=de(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:rs(e[n]).map(function(s){return[n].concat(s)})}));return t}function de(e){var t;return(t=[]).concat.apply(t,ae([],V(e),!1))}function c0(e){return kn(e)?e:[e]}function rt(e){return e===void 0?[]:c0(e)}function vs(e,t,n){var r,s;if(q(e))return e(t,n.data);var a={};try{for(var i=Z(Object.keys(e)),c=i.next();!c.done;c=i.next()){var l=c.value,d=e[l];q(d)?a[l]=d(t,n.data):a[l]=d}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return a}function $5(e){return/^(done|error)\./.test(e)}function il(e){return!!(e instanceof Promise||e!==null&&(q(e)||typeof e=="object")&&q(e.then))}function L5(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function B5(e,t){var n,r,s=V([[],[]],2),a=s[0],i=s[1];try{for(var c=Z(e),l=c.next();!l.done;l=c.next()){var d=l.value;t(d)?a.push(d):i.push(d)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return[a,i]}function l0(e,t){return Wn(e.states,function(n,r){if(n){var s=(J(t)?void 0:t[r])||(n?n.current:void 0);if(s)return{current:s,states:l0(n,s)}}})}function U5(e,t){return{current:t,states:l0(e,t)}}function cl(e,t,n,r){var s=e&&n.reduce(function(a,i){var c,l,d=i.assignment,f={state:r,action:i,_event:t},h={};if(q(d))h=d(a,t.data,f);else try{for(var m=Z(Object.keys(d)),p=m.next();!p.done;p=m.next()){var v=p.value,g=d[v];h[v]=q(g)?g(a,t.data,f):g}}catch(y){c={error:y}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}return Object.assign({},a,h)},e);return s}var F5=function(){};function kn(e){return Array.isArray(e)}function q(e){return typeof e=="function"}function J(e){return typeof e=="string"}function d0(e,t){if(e)return J(e)?{type:mo,name:e,predicate:t?t[e]:void 0}:q(e)?{type:mo,name:e.name,predicate:e}:e}function H5(e){try{return"subscribe"in e&&q(e.subscribe)}catch{return!1}}var Dt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Gr={},Gr[Dt]=function(){return this},Gr[Symbol.observable]=function(){return this};function Mn(e){return!!e&&"__xstatenode"in e}function z5(e){return!!e&&typeof e.send=="function"}var Y5=function(){var e=0;return function(){return e++,e.toString(16)}}();function Ar(e,t){return J(e)||typeof e=="number"?D({type:e},t):e}function Ce(e,t){if(!J(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=Ar(e);return D({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function fn(e,t){var n=c0(t).map(function(r){return typeof r>"u"||typeof r=="string"||Mn(r)?{target:r,event:e}:D(D({},r),{event:e})});return n}function W5(e){if(!(e===void 0||e===I5))return rt(e)}function u0(e,t,n,r,s){var a=e.options.guards,i={state:s,cond:t,_event:r};if(t.type===mo)return((a==null?void 0:a[t.name])||t.predicate)(n,r.data,i);var c=a==null?void 0:a[t.type];if(!c)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return c(n,r.data,i)}function f0(e){return typeof e=="string"?{type:e}:e}function yn(e,t,n){var r=function(){},s=typeof e=="object",a=s?e:null;return{next:((s?e.next:e)||r).bind(a),error:((s?e.error:t)||r).bind(a),complete:((s?e.complete:n)||r).bind(a)}}function Vr(e,t){return"".concat(e,":invocation[").concat(t,"]")}function go(e){return(e.type===In||e.type===Mr&&e.to===Ct.Internal)&&typeof e.delay!="number"}var Jt=Ce({type:r0});function ys(e,t){return t&&t[e]||void 0}function Tn(e,t){var n;if(J(e)||typeof e=="number"){var r=ys(e,t);q(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if(q(e))n={type:e.name||e.toString(),exec:e};else{var r=ys(e.type,t);if(q(r))n=D(D({},e),{exec:r});else if(r){var s=r.type||e.type;n=D(D(D({},r),e),{type:s})}else n=e}return n}var Et=function(e,t){if(!e)return[];var n=kn(e)?e:[e];return n.map(function(r){return Tn(r,t)})};function Ks(e){var t=Tn(e);return D(D({id:J(e)?e:t.id},t),{type:t.type})}function pi(e,t){return{type:In,event:typeof e=="function"?e:Ar(e),delay:t?t.delay:void 0,id:t==null?void 0:t.id}}function h0(e,t,n,r){var s={_event:n},a=Ce(q(e.event)?e.event(t,n.data,s):e.event),i;if(J(e.delay)){var c=r&&r[e.delay];i=q(c)?c(t,n.data,s):c}else i=q(e.delay)?e.delay(t,n.data,s):e.delay;return D(D({},e),{type:In,_event:a,delay:i})}function nn(e,t){return{to:t?t.to:void 0,type:Mr,event:q(e)?e:Ar(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:q(e)?e.name:i0(e)}}function m0(e,t,n,r){var s={_event:n},a=Ce(q(e.event)?e.event(t,n.data,s):e.event),i;if(J(e.delay)){var c=r&&r[e.delay];i=q(c)?c(t,n.data,s):c}else i=q(e.delay)?e.delay(t,n.data,s):e.delay;var l=q(e.to)?e.to(t,n.data,s):e.to;return D(D({},e),{to:l,_event:a,event:a.data,delay:i})}function Xs(e,t){return nn(e,D(D({},t),{to:Ct.Parent}))}function p0(e,t,n){return nn(t,D(D({},n),{to:e}))}function g0(){return Xs(Vs)}function Z5(e,t){return nn(e,D(D({},t),{to:function(n,r,s){var a=s._event;return a.origin}}))}var G5=function(e,t){return{context:e,event:t}};function V5(e,t){return e===void 0&&(e=G5),{type:Gs,label:t,expr:e}}var v0=function(e,t,n){return D(D({},e),{value:J(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},y0=function(e){return{type:hi,sendId:e}};function b0(e){var t=Ks(e);return{type:Q.Start,activity:t,exec:void 0}}function _0(e){var t=q(e)?e:Ks(e);return{type:Q.Stop,activity:t,exec:void 0}}function x0(e,t,n){var r=q(e.activity)?e.activity(t,n.data):e.activity,s=typeof r=="string"?{id:r}:r,a={type:Q.Stop,activity:s};return a}var E0=function(e){return{type:Zs,assignment:e}};function K5(e){return typeof e=="object"&&"type"in e}function w0(e,t){var n=t?"#".concat(t):"";return"".concat(Q.After,"(").concat(e,")").concat(n)}function Zn(e,t){var n="".concat(Q.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function bn(e,t){var n="".concat(Q.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function vn(e,t){var n="".concat(Q.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function X5(e){return{type:Q.Pure,get:e}}function S0(e,t){return nn(function(n,r){return r},D(D({},t),{to:e}))}function q5(e,t){return Xs(function(n,r,s){return{type:mi,data:q(e)?e(n,r,s):e}},D(D({},t),{to:Ct.Parent}))}function J5(e){return{type:Q.Choose,conds:e}}var Q5=function(e){var t,n,r=[];try{for(var s=Z(e),a=s.next();!a.done;a=s.next())for(var i=a.value,c=0;c<i.actions.length;){if(i.actions[c].type===Zs){r.push(i.actions[c]),i.actions.splice(c,1);continue}c++}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r};function fr(e,t,n,r,s,a,i){i===void 0&&(i=!1);var c=i?[]:Q5(s),l=c.length?cl(n,r,c,t):n,d=i?[n]:void 0,f=[];function h(v,g){var y;switch(g.type){case In:{var _=h0(g,l,r,e.options.delays);return a&&typeof _.delay=="number"&&a(_,l,r),_}case Mr:var b=m0(g,l,r,e.options.delays);return a&&b.to!==Ct.Internal&&(v==="entry"?f.push(b):a(b,l,r)),b;case Gs:{var E=v0(g,l,r);return a==null||a(E,l,r),E}case s0:{var S=g,T=(y=S.conds.find(function(O){var H=d0(O.cond,e.options.guards);return!H||u0(e,H,l,r,a?void 0:t)}))===null||y===void 0?void 0:y.actions;if(!T)return[];var j=V(fr(e,t,l,r,[{type:v,actions:Et(rt(T),e.options.actions)}],a,i),2),M=j[0],C=j[1];return l=C,d==null||d.push(l),M}case a0:{var T=g.get(l,r.data);if(!T)return[];var w=V(fr(e,t,l,r,[{type:v,actions:Et(rt(T),e.options.actions)}],a,i),2),I=w[0],R=w[1];return l=R,d==null||d.push(l),I}case Ws:{var E=x0(g,l,r);return a==null||a(E,n,r),E}case Zs:{l=cl(l,r,[g],a?void 0:t),d==null||d.push(l);break}default:var L=Tn(g,e.options.actions),P=L.exec;if(a)a(L,l,r);else if(P&&d){var A=d.length-1,k=D(D({},L),{exec:function(O){for(var H=[],le=1;le<arguments.length;le++)H[le-1]=arguments[le];P.apply(void 0,ae([d[A]],V(H),!1))}});L=k}return L}}function m(v){var g,y,_=[];try{for(var b=Z(v.actions),E=b.next();!E.done;E=b.next()){var S=E.value,T=h(v.type,S);T&&(_=_.concat(T))}}catch(j){g={error:j}}finally{try{E&&!E.done&&(y=b.return)&&y.call(b)}finally{if(g)throw g.error}}return f.forEach(function(j){a(j,l,r)}),f.length=0,_}var p=de(s.map(m));return[p,l]}const ey=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:R5,after:w0,assign:E0,cancel:y0,choose:J5,done:Zn,doneInvoke:bn,error:vn,escalate:q5,forwardTo:S0,getActionFunction:ys,initEvent:Jt,isActionObject:K5,log:V5,pure:X5,raise:pi,resolveActions:fr,resolveLog:v0,resolveRaise:h0,resolveSend:m0,resolveStop:x0,respond:Z5,send:nn,sendParent:Xs,sendTo:p0,sendUpdate:g0,start:b0,stop:_0,toActionObject:Tn,toActionObjects:Et,toActivityDefinition:Ks},Symbol.toStringTag,{value:"Module"}));var bs=[],gn=function(e,t){bs.push(e);var n=t(e);return bs.pop(),n},ty=function(e){return e(bs[bs.length-1])};function C0(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[Dt]=function(){return this},t}function ny(e,t,n,r){var s,a=f0(e.src),i=(s=t==null?void 0:t.options.services)===null||s===void 0?void 0:s[a.type],c=e.data?vs(e.data,n,r):void 0,l=i?gi(i,e.id,c):C0(e.id);return l.meta=e,l}function gi(e,t,n){var r=C0(t);if(r.deferred=!0,Mn(e)){var s=r.state=gn(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return s}}return r}function ry(e){try{return typeof e.send=="function"}catch{return!1}}function sy(e){return ry(e)&&"id"in e}function M0(e){var t;return D((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[Dt]=function(){return this},t),e)}var _s=function(e){return e.type==="atomic"||e.type==="final"};function T0(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function hr(e){return T0(e).filter(function(t){return t.type!=="history"})}function A0(e){var t=[e];return _s(e)?t:t.concat(de(hr(e).map(A0)))}function Gn(e,t){var n,r,s,a,i,c,l,d,f=new Set(e),h=vo(f),m=new Set(t);try{for(var p=Z(m),v=p.next();!v.done;v=p.next())for(var g=v.value,y=g.parent;y&&!m.has(y);)m.add(y),y=y.parent}catch(w){n={error:w}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var _=vo(m);try{for(var b=Z(m),E=b.next();!E.done;E=b.next()){var g=E.value;if(g.type==="compound"&&(!_.get(g)||!_.get(g).length))h.get(g)?h.get(g).forEach(function(I){return m.add(I)}):g.initialStateNodes.forEach(function(I){return m.add(I)});else if(g.type==="parallel")try{for(var S=(i=void 0,Z(hr(g))),T=S.next();!T.done;T=S.next()){var j=T.value;m.has(j)||(m.add(j),h.get(j)?h.get(j).forEach(function(I){return m.add(I)}):j.initialStateNodes.forEach(function(I){return m.add(I)}))}}catch(I){i={error:I}}finally{try{T&&!T.done&&(c=S.return)&&c.call(S)}finally{if(i)throw i.error}}}}catch(w){s={error:w}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}try{for(var M=Z(m),C=M.next();!C.done;C=M.next())for(var g=C.value,y=g.parent;y&&!m.has(y);)m.add(y),y=y.parent}catch(w){l={error:w}}finally{try{C&&!C.done&&(d=M.return)&&d.call(M)}finally{if(l)throw l.error}}return m}function j0(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(_s(r))return r.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=j0(a,t)}),s}function vo(e){var t,n,r=new Map;try{for(var s=Z(e),a=s.next();!a.done;a=s.next()){var i=a.value;r.has(i)||r.set(i,[]),i.parent&&(r.has(i.parent)||r.set(i.parent,[]),r.get(i.parent).push(i))}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r}function ay(e,t){var n=Gn([e],t);return j0(e,vo(n))}function Vn(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function oy(e){return ae([],V(new Set(de(ae([],V(e.map(function(t){return t.ownEvents})),!1)))),!1)}function ss(e,t){return t.type==="compound"?hr(t).some(function(n){return n.type==="final"&&Vn(e,n)}):t.type==="parallel"?hr(t).every(function(n){return ss(e,n)}):!1}function iy(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function ll(e){return new Set(de(e.map(function(t){return t.tags})))}function D0(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(J(e)||J(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(s){return D0(e[s],t[s])})}function cy(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function ly(e,t){var n=e.exec,r=D(D({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var $e=function(){function e(t){var n=this,r;this.actions=[],this.activities=al,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||al,this.meta=iy(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return oy(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var r=Jt;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=Jt;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),J(t))return[t];var s=Object.keys(t);return s.concat.apply(s,ae([],V(s.map(function(a){return r.toStrings(t[a],n).map(function(i){return a+n+i})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=fi(t,["configuration","transitions","tags","machine"]);return D(D({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return Tr(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;F5(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},e}(),dy={deferEvents:!1},dl=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=D(D({},dy),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e}(),Ca=new Map,uy=0,Bn={bookId:function(){return"x:".concat(uy++)},register:function(e,t){return Ca.set(e,t),e},get:function(e){return Ca.get(e)},free:function(e){Ca.delete(e)}};function vi(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function fy(){var e=vi();if(e&&"__xstate__"in e)return e.__xstate__}function hy(e){if(vi()){var t=fy();t&&t.register(e)}}function N0(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,s=[],a=!1,i=function(){if(!a){for(a=!0;s.length>0;){var d=s.shift();n=e.transition(n,d,l),r.forEach(function(f){return f.next(n)})}a=!1}},c=M0({id:t.id,send:function(d){s.push(d),i()},getSnapshot:function(){return n},subscribe:function(d,f,h){var m=yn(d,f,h);return r.add(m),m.next(n),{unsubscribe:function(){r.delete(m)}}}}),l={parent:t.parent,self:c,id:t.id||"anonymous",observers:r};return n=e.start?e.start(l):n,c}var yo={sync:!1,autoForward:!1},me;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(me||(me={}));var R0=function(){function e(t,n){n===void 0&&(n=e.defaultOptions);var r=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=me.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,h){if(kn(f))return r.batch(f),r.state;var m=Ce(Ar(f,h));if(r.status===me.Stopped)return r.state;if(r.status!==me.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(m.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(m.data)));return r.scheduler.schedule(function(){r.forward(m);var p=r._nextState(m);r.update(p,m)}),r._state},this.sendTo=function(f,h,m){var p=r.parent&&(h===Ct.Parent||r.parent.id===h),v=p?r.parent:J(h)?h===Ct.Internal?r:r.children.get(h)||Bn.get(h):z5(h)?h:void 0;if(!v){if(!p)throw new Error("Unable to send event to child '".concat(h,"' from service '").concat(r.id,"'."));return}if("machine"in v){if(r.status!==me.Stopped||r.parent!==v||r.state.done){var g=D(D({},f),{name:f.name===mi?"".concat(vn(r.id)):f.name,origin:r.sessionId});!m&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([v,g]):v.send(g)}}else!m&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([v,f.data]):v.send(f.data)},this._exec=function(f,h,m,p){p===void 0&&(p=r.machine.options.actions);var v=f.exec||ys(f.type,p),g=q(v)?v:v?v.exec:f.exec;if(g)try{return g(h,m.data,r.machine.config.predictableActionArguments?{action:f,_event:m}:{action:f,state:r.state,_event:m})}catch(A){throw r.parent&&r.parent.send({type:"xstate.error",data:A}),A}switch(f.type){case In:{var y=f;r.defer(y);break}case Mr:var _=f;if(typeof _.delay=="number"){r.defer(_);return}else _.to?r.sendTo(_._event,_.to,m===Jt):r.send(_._event);break;case hi:r.cancel(f.sendId);break;case ms:{if(r.status!==me.Running)return;var b=f.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[b.id||b.type])break;if(b.type===Q.Invoke){var E=f0(b.src),S=r.machine.options.services?r.machine.options.services[E.type]:void 0,T=b.id,j=b.data,M="autoForward"in b?b.autoForward:!!b.forward;if(!S)return;var C=j?vs(j,h,m):void 0;if(typeof S=="string")return;var w=q(S)?S(h,m.data,{data:C,src:E,meta:b.meta}):S;if(!w)return;var I=void 0;Mn(w)&&(w=C?w.withContext(C):w,I={autoForward:M}),r.spawn(w,T,I)}else r.spawnActivity(b);break}case Ws:{r.stopChild(f.activity.id);break}case Gs:var R=f,L=R.label,P=R.value;L?r.logger(L,P):r.logger(P);break}};var s=D(D({},e.defaultOptions),n),a=s.clock,i=s.logger,c=s.parent,l=s.id,d=l!==void 0?l:t.id;this.id=d,this.logger=i,this.clock=a,this.parent=c,this.options=s,this.scheduler=new dl({deferEvents:this.options.deferEvents}),this.sessionId=Bn.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:gn(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,s;try{for(var a=Z(t.actions),i=a.next();!i.done;i=a.next()){var c=i.value;this.exec(c,t,n)}}catch(l){r={error:l}}finally{try{i&&!i.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,s,a,i,c,l,d,f,h=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||n===Jt)&&this.options.execute)this.execute(this.state);else for(var m=void 0;m=this._outgoingQueue.shift();)m[0].send(m[1]);if(this.children.forEach(function(w){h.state.children[w.id]=w}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var p=Z(this.eventListeners),v=p.next();!v.done;v=p.next()){var g=v.value;g(t.event)}}catch(w){r={error:w}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(r)throw r.error}}try{for(var y=Z(this.listeners),_=y.next();!_.done;_=y.next()){var g=_.value;g(t,t.event)}}catch(w){a={error:w}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}try{for(var b=Z(this.contextListeners),E=b.next();!E.done;E=b.next()){var S=E.value;S(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(w){c={error:w}}finally{try{E&&!E.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}if(this.state.done){var T=t.configuration.find(function(w){return w.type==="final"&&w.parent===h.machine}),j=T&&T.doneData?vs(T.doneData,t.context,n):void 0;this._doneEvent=bn(this.id,j);try{for(var M=Z(this.doneListeners),C=M.next();!C.done;C=M.next()){var g=C.value;g(this._doneEvent)}}catch(w){d={error:w}}finally{try{C&&!C.done&&(f=M.return)&&f.call(M)}finally{if(d)throw d.error}}this._stop(),this._stopChildren(),Bn.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===me.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var s=this,a=yn(t,n,r);this.listeners.add(a.next),this.status!==me.NotStarted&&a.next(this.state);var i=function(){s.doneListeners.delete(i),s.stopListeners.delete(i),a.complete()};return this.status===me.Stopped?a.complete():(this.onDone(i),this.onStop(i)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(i),s.stopListeners.delete(i)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===me.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===me.Running)return this;this.machine._init(),Bn.register(this.sessionId,this),this.initialized=!0,this.status=me.Running;var r=t===void 0?this.initialState:gn(this,function(){return cy(t)?n.machine.resolveState(t):n.machine.resolveState($e.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,Jt)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){q(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,n,r,s,a,i,c,l,d,f;try{for(var h=Z(this.listeners),m=h.next();!m.done;m=h.next()){var p=m.value;this.listeners.delete(p)}}catch(M){t={error:M}}finally{try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}try{for(var v=Z(this.stopListeners),g=v.next();!g.done;g=v.next()){var p=g.value;p(),this.stopListeners.delete(p)}}catch(M){r={error:M}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}try{for(var y=Z(this.contextListeners),_=y.next();!_.done;_=y.next()){var p=_.value;this.contextListeners.delete(p)}}catch(M){a={error:M}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}try{for(var b=Z(this.doneListeners),E=b.next();!E.done;E=b.next()){var p=E.value;this.doneListeners.delete(p)}}catch(M){c={error:M}}finally{try{E&&!E.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=me.Stopped,this._initialState=void 0;try{for(var S=Z(Object.keys(this.delayedEventsMap)),T=S.next();!T.done;T=S.next()){var j=T.value;this.clock.clearTimeout(this.delayedEventsMap[j])}}catch(M){d={error:M}}finally{try{T&&!T.done&&(f=S.return)&&f.call(S)}finally{if(d)throw d.error}}this.scheduler.clear(),this.scheduler=new dl({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r=Ce({type:"xstate.stop"}),s=gn(t,function(){var a=de(ae([],V(t.state.configuration),!1).sort(function(f,h){return h.order-f.order}).map(function(f){return Et(f.onExit,t.machine.options.actions)})),i=V(fr(t.machine,t.state,t.state.context,r,[{type:"exit",actions:a}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),c=i[0],l=i[1],d=new $e({value:t.state.value,context:l,_event:r,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:c.filter(function(f){return!go(f)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return d.changed=!0,d});t.update(s,r),t._stopChildren(),Bn.free(t.sessionId)}),this},e.prototype.batch=function(t){var n=this;if(!(this.status===me.NotStarted&&this.options.deferEvents)){if(this.status!==me.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(t.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,i=n.state,c=!1,l=[],d=function(p){var v=Ce(p);n.forward(v),i=gn(n,function(){return n.machine.transition(i,v,void 0,r||void 0)}),l.push.apply(l,ae([],V(n.machine.config.predictableActionArguments?i.actions:i.actions.map(function(g){return ly(g,i)})),!1)),c=c||!!i.changed};try{for(var f=Z(t),h=f.next();!h.done;h=f.next()){var m=h.value;d(m)}}catch(p){s={error:p}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}i.changed=c,i.actions=l,n.update(i,Ce(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Ce(t);if(s.name.indexOf(ho)===0&&!this.state.nextEvents.some(function(i){return i.indexOf(ho)===0}))throw s.data.data;var a=gn(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return a},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var n,r;try{for(var s=Z(this.forwardTo),a=s.next();!a.done;a=s.next()){var i=a.value,c=this.children.get(i);if(!c)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(i,"'."));c.send(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this,r=this.clock.setTimeout(function(){"to"in t&&t.to?n.sendTo(t._event,t.to,!0):n.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=r)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(t,n.context,n._event,r)},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);n&&(this.removeChild(t),q(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(this.status!==me.Running)return gi(t,n);if(il(t))return this.spawnPromise(Promise.resolve(t),n);if(q(t))return this.spawnCallback(t,n);if(sy(t))return this.spawnActor(t,n);if(H5(t))return this.spawnObservable(t,n);if(Mn(t))return this.spawnMachine(t,D(D({},r),{id:n}));if(L5(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var s=new e(t,D(D({},this.options),{parent:this,id:n.id||t.id})),a=D(D({},yo),n);a.sync&&s.onTransition(function(c){r.send(Vs,{state:c,id:s.id})});var i=s;return this.children.set(s.id,i),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){r.removeChild(s.id),r.send(Ce(c,{origin:s.id}))}).start(),i},e.prototype.spawnBehavior=function(t,n){var r=N0(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,s=this,a=!1,i;t.then(function(l){a||(i=l,s.removeChild(n),s.send(Ce(bn(n,l),{origin:n})))},function(l){if(!a){s.removeChild(n);var d=vn(n,l);try{s.send(Ce(d,{origin:n}))}catch{s.devTools&&s.devTools.send(d,s.state),s.machine.strict&&s.stop()}}});var c=(r={id:n,send:function(){},subscribe:function(l,d,f){var h=yn(l,d,f),m=!1;return t.then(function(p){m||(h.next(p),!m&&h.complete())},function(p){m||h.error(p)}),{unsubscribe:function(){return m=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return i}},r[Dt]=function(){return this},r);return this.children.set(n,c),c},e.prototype.spawnCallback=function(t,n){var r,s=this,a=!1,i=new Set,c=new Set,l,d=function(m){l=m,c.forEach(function(p){return p(m)}),!a&&s.send(Ce(m,{origin:n}))},f;try{f=t(d,function(m){i.add(m)})}catch(m){this.send(vn(n,m))}if(il(f))return this.spawnPromise(f,n);var h=(r={id:n,send:function(m){return i.forEach(function(p){return p(m)})},subscribe:function(m){var p=yn(m);return c.add(p.next),{unsubscribe:function(){c.delete(p.next)}}},stop:function(){a=!0,q(f)&&f()},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},r[Dt]=function(){return this},r);return this.children.set(n,h),h},e.prototype.spawnObservable=function(t,n){var r,s=this,a,i=t.subscribe(function(l){a=l,s.send(Ce(l,{origin:n}))},function(l){s.removeChild(n),s.send(Ce(vn(n,l),{origin:n}))},function(){s.removeChild(n),s.send(Ce(bn(n),{origin:n}))}),c=(r={id:n,send:function(){},subscribe:function(l,d,f){return t.subscribe(l,d,f)},stop:function(){return i.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},r[Dt]=function(){return this},r);return this.children.set(n,c),c},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(n){var r=n(this.state.context,t);this.spawnEffect(t.id,r)}},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[Dt]=function(){return this},r))},e.prototype.attachDev=function(){var t=vi();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(D(D({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:D({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}hy(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[Dt]=function(){return this},e.prototype.getSnapshot=function(){return this.status===me.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=yi,e}(),my=function(e){return J(e)?D(D({},yo),{name:e}):D(D(D({},yo),{name:Y5()}),e)};function py(e,t){var n=my(t);return ty(function(r){return r?r.spawn(e,n.name,n):gi(e,n.name)})}function yi(e,t){var n=new R0(e,t);return n}function gy(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function Kr(e){return D(D({type:ps},e),{toJSON:function(){e.onDone,e.onError;var t=fi(e,["onDone","onError"]);return D(D({},t),{type:ps,src:gy(e.src)})}})}var Xr="",bo="#",Ma="*",hn={},mn=function(e){return e[0]===bo},vy=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},bi=function(){function e(t,n,r,s){r===void 0&&(r="context"in t?t.context:void 0);var a=this,i;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(vy(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:o0),this.id=this.config.id||ae([this.machine.key],V(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(i=this.config.schema)!==null&&i!==void 0?i:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Wn(this.config.states,function(d,f){var h,m=new e(d,{},void 0,{parent:a,key:f});return Object.assign(a.idMap,D((h={},h[m.id]=m,h),m.idMap)),m}):hn;var c=0;function l(d){var f,h;d.order=c++;try{for(var m=Z(T0(d)),p=m.next();!p.done;p=m.next()){var v=p.value;l(v)}}catch(g){f={error:g}}finally{try{p&&!p.done&&(h=m.return)&&h.call(m)}finally{if(f)throw f.error}}}l(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(d){var f=d.event;return f===Xr}):Xr in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=rt(this.config.entry||this.config.onEntry).map(function(d){return Tn(d)}),this.onExit=rt(this.config.exit||this.config.onExit).map(function(d){return Tn(d)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=rt(this.config.invoke).map(function(d,f){var h,m;if(Mn(d)){var p=Vr(a.id,f);return a.machine.options.services=D((h={},h[p]=d,h),a.machine.options.services),Kr({src:p,id:p})}else if(J(d.src)){var p=d.id||Vr(a.id,f);return Kr(D(D({},d),{id:p,src:d.src}))}else if(Mn(d.src)||q(d.src)){var p=d.id||Vr(a.id,f);return a.machine.options.services=D((m={},m[p]=d.src,m),a.machine.options.services),Kr(D(D({id:p},d),{src:p}))}else{var v=d.src;return Kr(D(D({id:Vr(a.id,f)},d),{src:v}))}}),this.activities=rt(this.config.activities).concat(this.invoke).map(function(d){return Ks(d)}),this.transition=this.transition.bind(this),this.tags=rt(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||A0(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,s=r.actions,a=r.activities,i=r.guards,c=r.services,l=r.delays;return new e(this.config,{actions:D(D({},s),t.actions),activities:D(D({},a),t.activities),guards:D(D({},i),t.guards),services:D(D({},c),t.services),delays:D(D({},l),t.delays)},n!=null?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return q(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Wn(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===Xr,r=this.transitions.filter(function(s){var a=s.eventType===t;return n?a:a||s.eventType===Ma});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(a,i){var c=q(a)?"".concat(t.id,":delay[").concat(i,"]"):a,l=w0(c,t.id);return t.onEntry.push(nn(l,{delay:a})),t.onExit.push(y0(l)),l},s=kn(n)?n.map(function(a,i){var c=r(a.delay,i);return D(D({},a),{event:c})}):de(Object.keys(n).map(function(a,i){var c=n[a],l=J(c)?{target:c}:c,d=isNaN(+a)?a:+a,f=r(d,i);return rt(l).map(function(h){return D(D({},h),{event:f,delay:d})})}));return s.map(function(a){var i=a.delay;return D(D({},t.formatTransition(a)),{delay:i})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var s=t instanceof $e?t.value:er(t,this.delimiter);if(J(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var i=Object.keys(s),c=[this];return c.push.apply(c,ae([],V(de(i.map(function(l){return r.getStateNode(l).getStateNodes(s[l])}))),!1)),c},e.prototype.handles=function(t){var n=i0(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof $e?t:$e.create(t),r=Array.from(Gn([],this.getStateNodes(n.value)));return new $e(D(D({},n),{value:this.resolve(n.value),configuration:r,done:ss(r,this),tags:ll(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var s=this.getStateNode(t),a=s.next(n,r);return!a||!a.transitions.length?this.next(n,r):a},e.prototype.transitionCompoundNode=function(t,n,r){var s=Object.keys(t),a=this.getStateNode(s[0]),i=a._transition(t[s[0]],n,r);return!i||!i.transitions.length?this.next(n,r):i},e.prototype.transitionParallelNode=function(t,n,r){var s,a,i={};try{for(var c=Z(Object.keys(t)),l=c.next();!l.done;l=c.next()){var d=l.value,f=t[d];if(f){var h=this.getStateNode(d),m=h._transition(f,n,r);m&&(i[d]=m)}}}catch(_){s={error:_}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var p=Object.keys(i).map(function(_){return i[_]}),v=de(p.map(function(_){return _.transitions})),g=p.some(function(_){return _.transitions.length>0});if(!g)return this.next(n,r);var y=de(Object.keys(i).map(function(_){return i[_].configuration}));return{transitions:v,exitSet:de(p.map(function(_){return _.exitSet})),configuration:y,source:n,actions:de(Object.keys(i).map(function(_){return i[_].actions}))}},e.prototype._transition=function(t,n,r){return J(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,Ce(n))},e.prototype.next=function(t,n){var r,s,a=this,i=n.name,c=[],l=[],d;try{for(var f=Z(this.getCandidates(i)),h=f.next();!h.done;h=f.next()){var m=h.value,p=m.cond,v=m.in,g=t.context,y=v?J(v)&&mn(v)?t.matches(er(this.getStateNodeById(v).path,this.delimiter)):Tr(er(v,this.delimiter),O5(this.path.slice(0,-2))(t.value)):!0,_=!1;try{_=!p||u0(this.machine,p,g,n,t)}catch(S){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(i,"' in state node '").concat(this.id,`':
`).concat(S.message))}if(_&&y){m.target!==void 0&&(l=m.target),c.push.apply(c,ae([],V(m.actions),!1)),d=m;break}}}catch(S){r={error:S}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}if(d){if(!l.length)return{transitions:[d],exitSet:[],configuration:t.value?[this]:[],source:t,actions:c};var b=de(l.map(function(S){return a.getRelativeStateNodes(S,t.historyValue)})),E=!!d.internal;return{transitions:[d],exitSet:E?[]:de(l.map(function(S){return a.getPotentiallyReenteringNodes(S)})),configuration:b,source:t,actions:c}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var n=[],r=this,s=t;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},e.prototype.getActions=function(t,n,r,s,a,i,c){var l,d,f,h,m=this,p=i?Gn([],this.getStateNodes(i.value)):[],v=new Set;try{for(var g=Z(Array.from(t).sort(function(R,L){return R.order-L.order})),y=g.next();!y.done;y=g.next()){var _=y.value;(!Vn(p,_)||Vn(r.exitSet,_)||_.parent&&v.has(_.parent))&&v.add(_)}}catch(R){l={error:R}}finally{try{y&&!y.done&&(d=g.return)&&d.call(g)}finally{if(l)throw l.error}}try{for(var b=Z(p),E=b.next();!E.done;E=b.next()){var _=E.value;(!Vn(t,_)||Vn(r.exitSet,_.parent))&&r.exitSet.push(_)}}catch(R){f={error:R}}finally{try{E&&!E.done&&(h=b.return)&&h.call(b)}finally{if(f)throw f.error}}r.exitSet.sort(function(R,L){return L.order-R.order});var S=Array.from(v).sort(function(R,L){return R.order-L.order}),T=new Set(r.exitSet),j=de(S.map(function(R){var L=[];if(R.type!=="final")return L;var P=R.parent;if(!P.parent)return L;L.push(Zn(R.id,R.doneData),Zn(P.id,R.doneData?vs(R.doneData,s,a):void 0));var A=P.parent;return A.type==="parallel"&&hr(A).every(function(k){return ss(r.configuration,k)})&&L.push(Zn(A.id)),L})),M=S.map(function(R){var L=R.onEntry,P=R.activities.map(function(A){return b0(A)});return{type:"entry",actions:Et(c?ae(ae([],V(L),!1),V(P),!1):ae(ae([],V(P),!1),V(L),!1),m.machine.options.actions)}}).concat({type:"state_done",actions:j.map(function(R){return pi(R)})}),C=Array.from(T).map(function(R){return{type:"exit",actions:Et(ae(ae([],V(R.onExit),!1),V(R.activities.map(function(L){return _0(L)})),!1),m.machine.options.actions)}}),w=C.concat({type:"transition",actions:Et(r.actions,this.machine.options.actions)}).concat(M);if(n){var I=Et(de(ae([],V(t),!1).sort(function(R,L){return L.order-R.order}).map(function(R){return R.onExit})),this.machine.options.actions).filter(function(R){return!go(R)});return w.concat({type:"stop",actions:I})}return w},e.prototype.transition=function(t,n,r,s){t===void 0&&(t=this.initialState);var a=Ce(n),i;if(t instanceof $e)i=r===void 0?t:this.resolveState($e.from(t,r));else{var c=J(t)?this.resolve(gs(this.getResolvedPath(t))):this.resolve(t),l=r!=null?r:this.machine.context;i=this.resolveState($e.from(c,l))}if(this.strict&&!this.events.includes(a.name)&&!$5(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var d=this._transition(i.value,i,a)||{transitions:[],configuration:[],exitSet:[],source:i,actions:[]},f=Gn([],this.getStateNodes(i.value)),h=d.configuration.length?Gn(f,d.configuration):f;return d.configuration=ae([],V(h),!1),this.resolveTransition(d,i,i.context,s,a)},e.prototype.resolveRaisedTransition=function(t,n,r,s){var a,i=t.actions;return t=this.transition(t,n,void 0,s),t._event=r,t.event=r.data,(a=t.actions).unshift.apply(a,ae([],V(i),!1)),t},e.prototype.resolveTransition=function(t,n,r,s,a){var i,c,l,d,f=this;a===void 0&&(a=Jt);var h=t.configuration,m=!n||t.transitions.length>0,p=m?t.configuration:n?n.configuration:[],v=ss(p,this),g=m?ay(this.machine,h):void 0,y=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,_=this.getActions(new Set(p),v,t,r,a,n,s),b=n?D({},n.activities):{};try{for(var E=Z(_),S=E.next();!S.done;S=E.next()){var T=S.value;try{for(var j=(l=void 0,Z(T.actions)),M=j.next();!M.done;M=j.next()){var C=M.value;C.type===ms?b[C.activity.id||C.activity.type]=C:C.type===Ws&&(b[C.activity.id||C.activity.type]=!1)}}catch(Te){l={error:Te}}finally{try{M&&!M.done&&(d=j.return)&&d.call(j)}finally{if(l)throw l.error}}}}catch(Te){i={error:Te}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(i)throw i.error}}var w=V(fr(this,n,r,a,_,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),I=w[0],R=w[1],L=V(B5(I,go),2),P=L[0],A=L[1],k=I.filter(function(Te){var te;return Te.type===ms&&((te=Te.activity)===null||te===void 0?void 0:te.type)===ps}),O=k.reduce(function(Te,te){return Te[te.activity.id]=ny(te.activity,f.machine,R,a),Te},n?D({},n.children):{}),H=new $e({value:g||n.value,context:R,_event:a,_sessionid:n?n._sessionid:null,historyValue:g?y?U5(y,g):void 0:n?n.historyValue:void 0,history:!g||t.source?n:void 0,actions:g?A:[],activities:g?b:n?n.activities:{},events:[],configuration:p,transitions:t.transitions,children:O,done:v,tags:ll(p),machine:this}),le=r!==R;H.changed=a.name===Vs||le;var X=H.history;X&&delete X.history;var G=!v&&(this._transient||h.some(function(Te){return Te._transient}));if(!m&&(!G||a.name===Xr))return H;var W=H;if(!v)for(G&&(W=this.resolveRaisedTransition(W,{type:n0},a,s));P.length;){var Ne=P.shift();W=this.resolveRaisedTransition(W,Ne._event,a,s)}var Yt=W.changed||(X?!!W.actions.length||le||typeof X.value!=typeof W.value||!D0(W.value,X.value):void 0);return W.changed=Yt,W.history=X,W},e.prototype.getStateNode=function(t){if(mn(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=mn(t)?t.slice(bo.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&mn(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=po(t,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||hn;switch(this.type){case"parallel":return Wn(this.initialStateValue,function(a,i){return a?r.getStateNode(i).resolve(t[i]||a):hn});case"compound":if(J(t)){var s=this.getStateNode(t);return s.type==="parallel"||s.type==="compound"?(n={},n[t]=s.initialStateValue,n):t}return Object.keys(t).length?Wn(t,function(a,i){return a?r.getStateNode(i).resolve(a):hn}):this.initialStateValue||{};default:return t||hn}},e.prototype.getResolvedPath=function(t){if(mn(t)){var n=this.machine.idMap[t.slice(bo.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return po(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=ol(this.states,function(r){return r.initialStateValue||hn},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=_s(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n!=null?n:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;J(n.target)?t=mn(n.target)?gs(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(_s(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=rs(this.initialStateValue);return de(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=V(t),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var a=this.getStateNode(r);if(a.type==="history")return a.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:ol(this.states,function(n,r){if(!t)return n.historyValue();var s=J(t)?void 0:t[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var s=this.target;return s?de(rs(s).map(function(i){return r.getFromRelativePath(i)})):r.initialStateNodes}var a=P5(r.path,"states")(t).current;return J(a)?[r.getStateNode(a)]:de(rs(a).map(function(i){return n.history==="deep"?r.getFromRelativePath(i):[r.states[i[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=de(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,s;if(this.__cache.events)return this.__cache.events;var a=this.states,i=new Set(this.ownEvents);if(a)try{for(var c=Z(Object.keys(a)),l=c.next();!l.done;l=c.next()){var d=l.value,f=a[d];if(f.states)try{for(var h=(r=void 0,Z(f.events)),m=h.next();!m.done;m=h.next()){var p=m.value;i.add("".concat(p))}}catch(v){r={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!J(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var a=s?n.key+r:r;if(n.parent)try{var i=n.parent.getStateNodeByPath(a);return i}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},e.prototype.formatTransition=function(t){var n=this,r=W5(t.target),s="internal"in t?t.internal:r?r.some(function(l){return J(l)&&l[0]===n.delimiter}):!0,a=this.machine.options.guards,i=this.resolveTarget(r),c=D(D({},t),{actions:Et(rt(t.actions)),cond:d0(t.cond,a),target:i,source:this,internal:s,eventType:t.event,toJSON:function(){return D(D({},c),{target:c.target?c.target.map(function(l){return"#".concat(l.id)}):void 0,source:"#".concat(n.id)})}});return c},e.prototype.formatTransitions=function(){var t,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,i=Ma,c=a[i],l=c===void 0?[]:c,d=fi(a,[typeof i=="symbol"?i:i+""]);s=de(Object.keys(d).map(function(b){var E=fn(b,d[b]);return E}).concat(fn(Ma,l)))}var f=this.config.always?fn("",this.config.always):[],h=this.config.onDone?fn(String(Zn(this.id)),this.config.onDone):[],m=de(this.invoke.map(function(b){var E=[];return b.onDone&&E.push.apply(E,ae([],V(fn(String(bn(b.id)),b.onDone)),!1)),b.onError&&E.push.apply(E,ae([],V(fn(String(vn(b.id)),b.onError)),!1)),E})),p=this.after,v=de(ae(ae(ae(ae([],V(h),!1),V(m),!1),V(s),!1),V(f),!1).map(function(b){return rt(b).map(function(E){return r.formatTransition(E)})}));try{for(var g=Z(p),y=g.next();!y.done;y=g.next()){var _=y.value;v.push(_)}}catch(b){t={error:b}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return v},e}();function yy(e,t,n){return n===void 0&&(n=e.context),new bi(e,t,n)}function I0(e,t){return new bi(e,t)}function by(e,t){var n,r,s;try{for(var a=Z(Object.keys(e)),i=a.next();!i.done;i=a.next()){var c=i.value;Tr(c,t)&&(!s||t.length>s.length)&&(s=c)}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return e[s]}function _y(e,t,n){var r,s,a=$e.from(e,e instanceof $e?e.context:void 0);try{for(var i=Z(t),c=i.next();!c.done;c=i.next()){var l=V(c.value,2),d=l[0],f=l[1];if(a.matches(d))return f(a)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return n(a)}function k0(e){return e}var xy=k0,Ey=E0,wy=nn,O0=p0,Sy=Xs,Cy=g0,My=S0,Ty=bn,Ay=pi;const jy=Object.freeze(Object.defineProperty({__proto__:null,get ActionTypes(){return Q},Interpreter:R0,get InterpreterStatus(){return me},Machine:yy,get SpecialTargets(){return Ct},State:$e,StateNode:bi,actions:ey,assign:Ey,createMachine:I0,createSchema:k0,doneInvoke:Ty,forwardTo:My,interpret:yi,mapState:by,matchState:_y,matchesState:Tr,raise:Ay,send:wy,sendParent:Sy,sendTo:O0,sendUpdate:Cy,spawn:py,spawnBehavior:N0,t:xy,toActorRef:M0,toEventObject:Ar,toObserver:yn,toSCXMLEvent:Ce},Symbol.toStringTag,{value:"Module"}));var P0=u.useLayoutEffect;function _o(e){var t=u.useRef();return t.current||(t.current={v:e()}),t.current.v}var xs=function(){return xs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},xs.apply(this,arguments)},Dy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n},Ny=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){i={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};function Ry(e,t){var n=_o(function(){return typeof e=="function"?e():e}),r=t.context,s=t.guards,a=t.actions,i=t.activities,c=t.services,l=t.delays;t.state;var d=Dy(t,["context","guards","actions","activities","services","delays","state"]),f=_o(function(){var h={context:r,guards:s,actions:a,activities:i,services:c,delays:l},m=n.withConfig(h,function(){return xs(xs({},n.context),r)});return yi(m,d)});return P0(function(){Object.assign(f.machine.options.actions,a),Object.assign(f.machine.options.guards,s),Object.assign(f.machine.options.activities,i),Object.assign(f.machine.options.services,c),Object.assign(f.machine.options.delays,l)},[a,s,i,c,l]),f}function Iy(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Ny(t,2),s=r[0],a=s===void 0?{}:s,i=r[1],c=Ry(e,a);return u.useEffect(function(){if(i){var l=c.subscribe(yn(i));return function(){l.unsubscribe()}}},[i]),u.useEffect(function(){var l=a.state;return c.start(l?$e.create(l):void 0),function(){c.stop(),c.status=me.NotStarted}},[]),c}function $0(e){return e.status!==0?e.getSnapshot():e.machine.initialState}function _i(e){return"state"in e&&"machine"in e}function ky(e,t,n){if(e.status===me.NotStarted)return!0;var r=n.changed===void 0&&(Object.keys(n.children).length>0||typeof t.changed=="boolean");return!(n.changed||r)}function Oy(e){return e}function L0(e){return"state"in e}function Py(e){return"deferred"in e}function $y(e){return"getSnapshot"in e?_i(e)?$0(e):e.getSnapshot():L0(e)?e.state:void 0}function Ly(e,t){t===void 0&&(t=$y);var n=u.useRef(e),r=u.useRef([]),s=u.useCallback(function(d){var f=e.subscribe(d).unsubscribe;return f},[e]),a=u.useCallback(function(){return t(e)},[e,t]),i=u.useCallback(function(d,f){return _i(e)?ky(e,d,f):d===f},[e]),c=t0.useSyncExternalStoreWithSelector(s,a,a,Oy,i),l=_o(function(){return function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];var h=d[0],m=n.current;Py(m)&&m.deferred?r.current.push(h):m.send(h)}});return P0(function(){for(n.current=e;r.current.length>0;){var d=r.current.shift();e.send(d)}},[e]),[c,l]}var By=function(e,t){return e===t},Uy=function(e,t){if(_i(e)){if(e.status===0&&t.current)return t.current;var n=$0(e);return t.current=e.status===0?n:null,n}return L0(e)?e.state:void 0};function Fy(e,t,n,r){n===void 0&&(n=By);var s=u.useRef(null),a=u.useCallback(function(l){var d=e.subscribe(l).unsubscribe;return d},[e]),i=u.useCallback(function(){return Uy(e,s)},[e,r]),c=t0.useSyncExternalStoreWithSelector(a,i,i,t,n);return c}var Es=function(){return Es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Es.apply(this,arguments)};function Hy(e,t,n){var r=u.createContext(null),s=r.Provider;function a(d){var f=d.children,h=d.machine,m=h===void 0?e:h,p=d.options,v=Iy(m,Es(Es({},t),p),n);return u.createElement(s,{value:v},f)}a.displayName="ActorProvider(".concat(e.id,")");function i(){var d=u.useContext(r);if(!d)throw new Error('You used a hook from "'.concat(a.displayName,`" but it's not inside a <`).concat(a.displayName,"> component."));return d}function c(){var d=i();return Ly(d)}function l(d,f){var h=i();return Fy(h,d,f)}return{Provider:a,useActorRef:i,useActor:c,useSelector:l}}var mr={};const zy=Bo(jy),Yy=Bo(rh);Object.defineProperty(mr,"__esModule",{value:!0});mr.createUpdater=Re=mr.assign=void 0;var Wy=zy,Zy=Yy;function B0(e){return(0,Wy.assign)(function(t,n,r){return(0,Zy.produce)(t,function(s){return void e(s,n,r)})})}var Re=mr.assign=B0;function Gy(e,t){var n=function(r){return{type:e,input:r}};return{update:n,action:B0(function(r,s,a){t(r,s,a)}),type:e}}mr.createUpdater=Gy;const Vy=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},u.createElement("circle",{cx:11.4,cy:11.4,r:6.4}),u.createElement("path",{d:"m19.4 19.4-3.48-3.48"})));function Ky(e){return e&&e.__esModule?e:{default:e}}const Xy=Object.freeze(Object.defineProperty({__proto__:null,default:Ky},Symbol.toStringTag,{value:"Module"})),qy=Bo(Xy);var xo={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(xo,xo.exports);var Jy=xo.exports;const Qy=Dn(Jy);var Eo={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default})(Eo,Eo.exports);var eb=Eo.exports;const ul=Dn(eb);function tb(e,t){var n=ab(t);return n.formatToParts?rb(n,e):sb(n,e)}var nb={year:0,month:1,day:2,hour:3,minute:4,second:5};function rb(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=nb[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function sb(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var Ta={};function ab(e){if(!Ta[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";Ta[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Ta[e]}function xi(e,t,n,r,s,a,i){var c=new Date(0);return c.setUTCFullYear(e,t,n),c.setUTCHours(r,s,a,i),c}var fl=36e5,ob=6e4,Aa={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function U0(e,t,n){var r,s;if(!e||(r=Aa.timezoneZ.exec(e),r))return 0;var a;if(r=Aa.timezoneHH.exec(e),r)return a=parseInt(r[1],10),hl(a)?-(a*fl):NaN;if(r=Aa.timezoneHHMM.exec(e),r){a=parseInt(r[1],10);var i=parseInt(r[2],10);return hl(a,i)?(s=Math.abs(a)*fl+i*ob,a>0?-s:s):NaN}if(lb(e)){t=new Date(t||Date.now());var c=ib(t),l=wo(c,e),d=cb(t,l,e);return-d}return NaN}function ib(e){return xi(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function wo(e,t){var n=tb(e,t),r=xi(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function cb(e,t,n){var r=e.getTime(),s=r-t,a=wo(new Date(s),n);if(t===a)return t;s-=a-t;var i=wo(new Date(s),n);return a===i?a:Math.max(a,i)}function hl(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var ml={};function lb(e){if(ml[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),ml[e]=!0,!0}catch{return!1}}var F0=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ja=36e5,pl=6e4,db=2,ke={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:F0};function gl(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},r=n.additionalDigits==null?db:Qy(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=ub(e),a=fb(s.date,r),i=a.year,c=a.restDateString,l=hb(c,i);if(isNaN(l))return new Date(NaN);if(l){var d=l.getTime(),f=0,h;if(s.time&&(f=mb(s.time),isNaN(f)))return new Date(NaN);if(s.timeZone||n.timeZone){if(h=U0(s.timeZone||n.timeZone,new Date(d+f)),isNaN(h))return new Date(NaN)}else h=ul(new Date(d+f)),h=ul(new Date(d+f+h));return new Date(d+f+h)}else return new Date(NaN)}function ub(e){var t={},n=ke.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=ke.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=ke.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function fb(e,t){var n=ke.YYY[t],r=ke.YYYYY[t],s;if(s=ke.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=ke.YY.exec(e)||n.exec(e),s){var i=s[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function hb(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=ke.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,yl(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=ke.DDD.exec(e),n){r=new Date(0);var i=parseInt(n[1],10);return vb(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(n=ke.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return yl(t,s,c)?(r.setUTCFullYear(t,s,c),r):new Date(NaN)}if(n=ke.Www.exec(e),n)return a=parseInt(n[1],10)-1,bl(t,a)?vl(t,a):new Date(NaN);if(n=ke.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return bl(t,a,l)?vl(t,a,l):new Date(NaN)}return null}function mb(e){var t,n,r;if(t=ke.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Da(n)?n%24*ja:NaN;if(t=ke.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),Da(n,r)?n%24*ja+r*pl:NaN;if(t=ke.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return Da(n,r,s)?n%24*ja+r*pl+s*1e3:NaN}return null}function vl(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var pb=[31,28,31,30,31,30,31,31,30,31,30,31],gb=[31,29,31,30,31,30,31,31,30,31,30,31];function H0(e){return e%400===0||e%4===0&&e%100!==0}function yl(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=H0(e);if(r&&n>gb[t]||!r&&n>pb[t])return!1}return!0}function vb(e,t){if(t<1)return!1;var n=H0(e);return!(n&&t>366||!n&&t>365)}function bl(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Da(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}var So={exports:{}},Co={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,s){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a]);return r}e.exports=t.default})(Co,Co.exports);var yb=Co.exports;(function(e,t){var n=qy.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(yb);function s(a){return(0,r.default)({},a)}e.exports=t.default})(So,So.exports);var bb=So.exports;const _b=Dn(bb);function _l(e,t,n){if(typeof e=="string"&&!e.match(F0)){var r=_b(n);return r.timeZone=t,gl(e,r)}var s=gl(e,n),a=xi(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()).getTime(),i=U0(t,new Date(a));return new Date(a+i)}const z0="#0da5f3",xb=1*60*1e3;function qr(e){const t=new Date(e);return Number.isNaN(t.getTime())?null:{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),hour:t.getHours(),minute:t.getMinutes()}}const He={attendees:[],calendarId:Ya,conference:null,description:"",endDateTime:"",endTimeZone:"",iCalUid:null,id:Ya,isAllDay:!1,isRecurrent:!1,location:null,startDateTime:"",startTimeZone:"",status:pt.CONFIRMED,summary:"",updatedAt:void 0,responseRequested:void 0,responseStatus:void 0,editable:!1,reminderMinutes:[]},Eb=new Set(["isAllDay","startDateTime"]),wb=new Set(["isAllDay","endDateTime"]),Y0={create(e){const t=e.isAllDay,n=ve(e.startDateTime,He.startDateTime),r=Qa(e.startTimeZone,ar),s=ve(e.endDateTime,He.endDateTime),a=Qa(e.endTimeZone,ar),i=ve(e.conference,null),c=qr(n),l=qr(s);return{id:ve(e.id,He.id),iCalUid:ve(e.iCalUid,He.iCalUid),calendarId:ve(e.calendarId,He.calendarId),conference:i,endDateTime:s,endTimeZone:a,isAllDay:t,isRecurrent:ve(e.isRecurrent,He.isRecurrent),recurrentId:e.recurrentId,location:ve(e.location,He.location),startDateTime:n,startTimeZone:r,status:ve(e.status,He.status),summary:ve(e.summary,He.summary),description:ve(e.description,He.description),attendees:ve(e.attendees,He.attendees),start:c,end:l,updatedAt:e.updatedAt,responseRequested:e.responseRequested,responseStatus:e.responseStatus,editable:ve(e.editable,He.editable),reminderMinutes:[...ve(e.reminderMinutes,He.reminderMinutes)].sort()}},set(e,t,n){if(e[t]=n,Eb.has(t)){const r=qr(e.startDateTime);r!=null&&(e.start=r)}if(wb.has(t)){const r=qr(e.endDateTime);r!=null&&(e.end=r)}}},pn={acl:mt.READER,color:"#0da5f3",id:Ya,isPrimary:!1,summary:"",timeZone:"",reminderMinutes:[],meetingSolutions:[]},W0={create(e){return{id:e.id,color:ve(e.color,pn.color),acl:ve(e.acl,pn.acl),isPrimary:ve(e.isPrimary,pn.isPrimary),summary:ve(e.summary,pn.summary),timeZone:Qa(e.timeZone,ar),reminderMinutes:[...ve(e.reminderMinutes,pn.reminderMinutes)].sort(),meetingSolutions:[...ve(e.meetingSolutions,pn.meetingSolutions)]}}},Z0=e=>e.acl===mt.OWNER||e.acl===mt.WRITER;class Sb{constructor(){ee(this,"_calendars",new Map);ee(this,"_colors",new Map)}clear(){this._calendars.clear(),this._colors.clear()}destroy(){this.clear(),this._calendars=void 0,this._colors=void 0}hasColors(){return this._colors.size>0}serializeCalendarListEntries(t){const n=[];t.forEach(r=>{var a,i,c;const s=W0.create({id:r.id,acl:r.canEdit?mt.WRITER:mt.READER,color:r.hexColor||z0,isPrimary:r.isDefaultCalendar===!0,summary:(i=r.isDefaultCalendar?(a=r.owner)==null?void 0:a.name:r.name)!=null?i:"",timeZone:ar(),meetingSolutions:((c=r.allowedOnlineMeetingProviders)!=null?c:[]).filter(l=>l!=="unknown")});n.push(s)}),this._calendars.clear();for(let r of n)this._calendars.set(r.id,r);return n}serializeEvents(t,n){const r=[];return n.forEach(s=>{var d,f;if(s.id==null||((d=s.start)==null?void 0:d.dateTime)==null||((f=s.end)==null?void 0:f.dateTime)==null)return;const c=this._calendars.get(t);if(c==null)return;const l=Cb(c,s);l&&r.push(l)}),r}}function xl(e){switch(e==null?void 0:e.response){case"notResponded":return Ue.NEEDS_ACTION;case"declined":return Ue.DECLINED;case"tentativelyAccepted":return Ue.TENTATIVE;case"accepted":return Ue.ACCEPTED;default:return Ue.NEEDS_ACTION}}function Cb(e,t){var f,h,m,p,v,g,y,_,b,E,S,T,j,M,C;const n=(f=t.start)==null?void 0:f.dateTime;let r=(h=t.end)==null?void 0:h.dateTime;const s=!!t.isAllDay;if(n==null)throw new TypeError("CalendarGoogleRestAdapterSerializer#setEvents(): 'startDateTime' wasn't defined");if(r==null)throw new TypeError("CalendarGoogleRestAdapterSerializer#setEvents(): 'endDateTime' wasn't defined");const a=_l(n,(p=(m=t.start)==null?void 0:m.timeZone)!=null?p:e.timeZone),i=_l(r,(g=(v=t.end)==null?void 0:v.timeZone)!=null?g:e.timeZone);let c=a.toISOString(),l=i.toISOString();s&&(c=new Date(new Date(c).getTime()+new Date(c).getTimezoneOffset()*6e4).toISOString(),l=new Date(sh(new Date(l),-1).getTime()+new Date(l).getTimezoneOffset()*6e4).toISOString());let d=[];if(t.attendees)for(let w of t.attendees)(y=w.emailAddress)!=null&&y.address&&d.push({email:w.emailAddress.address,isOrganizer:((_=w.status)==null?void 0:_.response)==="organizer",name:w.emailAddress.name||"",status:xl(w.status),self:!1});return d=Pt.sortBy(d,w=>!w.isOrganizer,w=>w.status),Y0.create({id:t.id,iCalUid:t.iCalUId,calendarId:e.id,conference:t.onlineMeeting?{solutionName:"Outlook",entries:[t.onlineMeeting.joinUrl?{label:"Video call",type:"video",uri:t.onlineMeeting.joinUrl,pin:null}:null,t.onlineMeeting.quickDial?{type:"instructions",uri:t.onlineMeeting.quickDial}:null].filter(Go)}:null,isAllDay:s,startDateTime:c,startTimeZone:(E=(b=t.start)==null?void 0:b.timeZone)!=null?E:e.timeZone,endDateTime:l,endTimeZone:(T=(S=t.end)==null?void 0:S.timeZone)!=null?T:e.timeZone,isRecurrent:!!t.seriesMasterId,location:(j=t.location)==null?void 0:j.displayName,status:Mb(t.responseStatus),summary:t.subject||"",description:t.bodyPreview||"",attendees:d,recurrentId:(M=t.seriesMasterId)!=null?M:void 0,updatedAt:(C=t.lastModifiedDateTime)!=null?C:void 0,responseRequested:!!t.responseRequested&&!t.isOrganizer,responseStatus:xl(t.responseStatus),editable:!!t.isOrganizer||Z0(e),reminderMinutes:typeof t.reminderMinutesBeforeStart=="number"?[t.reminderMinutesBeforeStart]:[]})}function Mb(e){switch(e==null?void 0:e.response){case"accepted":return pt.CONFIRMED;case"tentativelyAccepted":return pt.TENTATIVE;case"declined":return pt.CANCELLED}return pt.TENTATIVE}function re(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(f){try{d(r.next(f))}catch(h){i(h)}}function l(f){try{d(r.throw(f))}catch(h){i(h)}}function d(f){f.done?a(f.value):s(f.value).then(c,l)}d((r=r.apply(e,[])).next())})}var Ye;(function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(Ye||(Ye={}));const Tb="v1.0",Ab="https://graph.microsoft.com/",jb=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class en extends Error{static setGraphClientError(t){let n;return t instanceof Error?n=t:(n=new en,n.customError=t),n}constructor(t){super(t),Object.setPrototypeOf(this,en.prototype)}}const Db=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],Nb=e=>{const t=a=>a.replace(/\/+$/,""),n=a=>a.replace(/^\/+/,""),r=(a,i)=>[t(a),n(i)].join("/");return Array.prototype.slice.call(e).reduce(r)},Na=e=>{const t=e&&e.constructor&&e.constructor.name;if(t==="Buffer"||t==="Blob"||t==="File"||t==="FormData"||typeof e=="string")return e;if(t==="ArrayBuffer")e=Buffer.from(e);else if(t==="Int8Array"||t==="Int16Array"||t==="Int32Array"||t==="Uint8Array"||t==="Uint16Array"||t==="Uint32Array"||t==="Uint8ClampedArray"||t==="Float32Array"||t==="Float64Array"||t==="DataView")e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch{throw new Error("Unable to stringify the content")}return e},G0=e=>K0(e),V0=(e,t)=>(t.forEach(n=>Rb(n)),K0(e,t)),K0=(e,t=jb)=>{if(e=e.toLowerCase(),e.indexOf("https://")!==-1){e=e.replace("https://","");const n=e.indexOf(":"),r=e.indexOf("/");let s="";if(r!==-1)return n!==-1&&n<r?(s=e.substring(0,n),t.has(s)):(s=e.substring(0,r),t.has(s))}return!1},Rb=e=>{if(e.indexOf("/")!==-1)throw new en("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class tn{constructor(t=[]){this.middlewareOptions=new Map;for(const n of t){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(t){return this.middlewareOptions.get(t)}setMiddlewareOptions(t,n){this.middlewareOptions.set(t,n)}}const Ib=()=>{let e="";for(let t=0;t<32;t++)(t===8||t===12||t===16||t===20)&&(e+="-"),e+=Math.floor(Math.random()*16).toString(16);return e},X0=(e,t,n)=>{let r=null;if(typeof Request<"u"&&e instanceof Request)r=e.headers.get(n);else if(typeof t<"u"&&t.headers!==void 0)if(typeof Headers<"u"&&t.headers instanceof Headers)r=t.headers.get(n);else if(t.headers instanceof Array){const s=t.headers;for(let a=0,i=s.length;a<i;a++)if(s[a][0]===n){r=s[a][1];break}}else t.headers[n]!==void 0&&(r=t.headers[n]);return r},q0=(e,t,n,r)=>{if(typeof Request<"u"&&e instanceof Request)e.headers.set(n,r);else if(typeof t<"u")if(t.headers===void 0)t.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&t.headers instanceof Headers)t.headers.set(n,r);else if(t.headers instanceof Array){let s=0;const a=t.headers.length;for(;s<a;s++){const i=t.headers[s];if(i[0]===n){i[1]=r;break}}s===a&&t.headers.push([n,r])}else Object.assign(t.headers,{[n]:r})},J0=(e,t,n,r)=>{typeof Request<"u"&&e instanceof Request?e.headers.append(n,r):typeof t<"u"&&(t.headers===void 0?t.headers=new Headers({[n]:r}):typeof Headers<"u"&&t.headers instanceof Headers?t.headers.append(n,r):t.headers instanceof Array?t.headers.push([n,r]):t.headers===void 0?t.headers={[n]:r}:t.headers[n]===void 0?t.headers[n]=r:t.headers[n]+=`, ${r}`)},kb=(e,t)=>re(void 0,void 0,void 0,function*(){const n=t.headers.get("Content-Type")?yield t.blob():yield Promise.resolve(void 0),{method:r,headers:s,referrer:a,referrerPolicy:i,mode:c,credentials:l,cache:d,redirect:f,integrity:h,keepalive:m,signal:p}=t;return new Request(e,{method:r,headers:s,body:n,referrer:a,referrerPolicy:i,mode:c,credentials:l,cache:d,redirect:f,integrity:h,keepalive:m,signal:p})});class Ob{constructor(t,n){this.authenticationProvider=t,this.authenticationProviderOptions=n}}var An;(function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(An||(An={}));class kt{constructor(){this.featureUsage=An.NONE}static updateFeatureUsageFlag(t,n){let r;t.middlewareControl instanceof tn?r=t.middlewareControl.getMiddlewareOptions(kt):t.middlewareControl=new tn,typeof r>"u"&&(r=new kt,t.middlewareControl.setMiddlewareOptions(kt,r)),r.setFeatureUsage(n)}setFeatureUsage(t){this.featureUsage=this.featureUsage|t}getFeatureUsage(){return this.featureUsage.toString(16)}}class pr{constructor(t){this.authenticationProvider=t}execute(t){return re(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(G0(n)||t.customHosts&&V0(n,t.customHosts)){let r;t.middlewareControl instanceof tn&&(r=t.middlewareControl.getMiddlewareOptions(Ob));let s,a;r&&(s=r.authenticationProvider,a=r.authenticationProviderOptions),s||(s=this.authenticationProvider);const c=`Bearer ${yield s.getAccessToken(a)}`;J0(t.request,t.options,pr.AUTHORIZATION_HEADER,c),kt.updateFeatureUsageFlag(t,An.AUTHENTICATION_HANDLER_ENABLED)}else t.options.headers&&delete t.options.headers[pr.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}pr.AUTHORIZATION_HEADER="Authorization";class Pb{execute(t){return re(this,void 0,void 0,function*(){t.response=yield fetch(t.request,t.options)})}}class ue{constructor(t=ue.DEFAULT_DELAY,n=ue.DEFAULT_MAX_RETRIES,r=ue.defaultShouldRetry){if(t>ue.MAX_DELAY&&n>ue.MAX_MAX_RETRIES){const s=new Error(`Delay and MaxRetries should not be more than ${ue.MAX_DELAY} and ${ue.MAX_MAX_RETRIES}`);throw s.name="MaxLimitExceeded",s}else if(t>ue.MAX_DELAY){const s=new Error(`Delay should not be more than ${ue.MAX_DELAY}`);throw s.name="MaxLimitExceeded",s}else if(n>ue.MAX_MAX_RETRIES){const s=new Error(`MaxRetries should not be more than ${ue.MAX_MAX_RETRIES}`);throw s.name="MaxLimitExceeded",s}else if(t<0&&n<0){const s=new Error("Delay and MaxRetries should not be negative");throw s.name="MinExpectationNotMet",s}else if(t<0){const s=new Error("Delay should not be negative");throw s.name="MinExpectationNotMet",s}else if(n<0){const s=new Error("MaxRetries should not be negative");throw s.name="MinExpectationNotMet",s}this.delay=Math.min(t,ue.MAX_DELAY),this.maxRetries=Math.min(n,ue.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return ue.MAX_DELAY}}ue.DEFAULT_DELAY=3;ue.DEFAULT_MAX_RETRIES=3;ue.MAX_DELAY=180;ue.MAX_MAX_RETRIES=10;ue.defaultShouldRetry=()=>!0;class Ot{constructor(t=new ue){this.options=t}isRetry(t){return Ot.RETRY_STATUS_CODES.indexOf(t.status)!==-1}isBuffered(t,n){const r=typeof t=="string"?n.method:t.method;return!((r===Ye.PUT||r===Ye.PATCH||r===Ye.POST)&&X0(t,n,"Content-Type")==="application/octet-stream")}getDelay(t,n,r){const s=()=>Number(Math.random().toFixed(3)),a=t.headers!==void 0?t.headers.get(Ot.RETRY_AFTER_HEADER):null;let i;return a!==null?Number.isNaN(Number(a))?i=Math.round((new Date(a).getTime()-Date.now())/1e3):i=Number(a):i=n>=2?this.getExponentialBackOffTime(n)+r+s():r+s(),Math.min(i,this.options.getMaxDelay()+s())}getExponentialBackOffTime(t){return Math.round(1/2*(Math.pow(2,t)-1))}sleep(t){return re(this,void 0,void 0,function*(){const n=t*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(t){let n;return t.middlewareControl instanceof tn&&(n=t.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new ue,this.options)),n}executeWithRetry(t,n,r){return re(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(t),n<r.maxRetries&&this.isRetry(t.response)&&this.isBuffered(t.request,t.options)&&r.shouldRetry(r.delay,n,t.request,t.options,t.response)){++n,q0(t.request,t.options,Ot.RETRY_ATTEMPT_HEADER,n.toString());const s=this.getDelay(t.response,n,r.delay);return yield this.sleep(s),yield this.executeWithRetry(t,n,r)}else return})}execute(t){return re(this,void 0,void 0,function*(){const r=this.getOptions(t);return kt.updateFeatureUsageFlag(t,An.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(t,0,r)})}setNext(t){this.nextMiddleware=t}}Ot.RETRY_STATUS_CODES=[429,503,504];Ot.RETRY_ATTEMPT_HEADER="Retry-Attempt";Ot.RETRY_AFTER_HEADER="Retry-After";class Qe{constructor(t=Qe.DEFAULT_MAX_REDIRECTS,n=Qe.defaultShouldRedirect){if(t>Qe.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${Qe.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(t<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=t,this.shouldRedirect=n}}Qe.DEFAULT_MAX_REDIRECTS=5;Qe.MAX_MAX_REDIRECTS=20;Qe.defaultShouldRedirect=()=>!0;class Ve{constructor(t=new Qe){this.options=t}isRedirect(t){return Ve.REDIRECT_STATUS_CODES.indexOf(t.status)!==-1}hasLocationHeader(t){return t.headers.has(Ve.LOCATION_HEADER)}getLocationHeader(t){return t.headers.get(Ve.LOCATION_HEADER)}isRelativeURL(t){return t.indexOf("://")===-1}shouldDropAuthorizationHeader(t,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,s=r.exec(t);let a,i;s!==null&&(a=s[0]);const c=r.exec(n);return c!==null&&(i=c[0]),typeof a<"u"&&typeof i<"u"&&a!==i}updateRequestUrl(t,n){return re(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?t:yield kb(t,n.request)})}getOptions(t){let n;return t.middlewareControl instanceof tn&&(n=t.middlewareControl.getMiddlewareOptions(Qe)),typeof n>"u"&&(n=Object.assign(new Qe,this.options)),n}executeWithRedirect(t,n,r){return re(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(t);const s=t.response;if(n<r.maxRedirects&&this.isRedirect(s)&&this.hasLocationHeader(s)&&r.shouldRedirect(s)){if(++n,s.status===Ve.STATUS_CODE_SEE_OTHER)t.options.method=Ye.GET,delete t.options.body;else{const a=this.getLocationHeader(s);!this.isRelativeURL(a)&&this.shouldDropAuthorizationHeader(s.url,a)&&delete t.options.headers[Ve.AUTHORIZATION_HEADER],yield this.updateRequestUrl(a,t)}yield this.executeWithRedirect(t,n,r)}else return})}execute(t){return re(this,void 0,void 0,function*(){const r=this.getOptions(t);return t.options.redirect=Ve.MANUAL_REDIRECT,kt.updateFeatureUsageFlag(t,An.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(t,0,r)})}setNext(t){this.nextMiddleware=t}}Ve.REDIRECT_STATUS_CODES=[301,302,303,307,308];Ve.STATUS_CODE_SEE_OTHER=303;Ve.LOCATION_HEADER="Location";Ve.AUTHORIZATION_HEADER="Authorization";Ve.MANUAL_REDIRECT="manual";const $b="3.0.5";class We{execute(t){return re(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(G0(n)||t.customHosts&&V0(n,t.customHosts)){let r=X0(t.request,t.options,We.CLIENT_REQUEST_ID_HEADER);r||(r=Ib(),q0(t.request,t.options,We.CLIENT_REQUEST_ID_HEADER,r));let s=`${We.PRODUCT_NAME}/${$b}`,a;if(t.middlewareControl instanceof tn&&(a=t.middlewareControl.getMiddlewareOptions(kt)),a){const i=a.getFeatureUsage();s+=` (${We.FEATURE_USAGE_STRING}=${i})`}J0(t.request,t.options,We.SDK_VERSION_HEADER,s)}else delete t.options.headers[We.CLIENT_REQUEST_ID_HEADER],delete t.options.headers[We.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}We.CLIENT_REQUEST_ID_HEADER="client-request-id";We.SDK_VERSION_HEADER="SdkVersion";We.PRODUCT_NAME="graph-js";We.FEATURE_USAGE_STRING="featureUsage";var El;(function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"})(El||(El={}));var ft;(function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"})(ft||(ft={}));var Mo;(function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"})(Mo||(Mo={}));var ws;(function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"})(ws||(ws={}));var Ss;(function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"})(Ss||(Ss={}));class tr{static parseDocumentResponse(t,n){return typeof DOMParser<"u"?new Promise((r,s)=>{t.text().then(a=>{try{const c=new DOMParser().parseFromString(a,n);r(c)}catch(i){s(i)}})}):Promise.resolve(t.body)}static convertResponse(t,n){return re(this,void 0,void 0,function*(){if(t.status===204)return Promise.resolve();let r;const s=t.headers.get("Content-type");switch(n){case ft.ARRAYBUFFER:r=yield t.arrayBuffer();break;case ft.BLOB:r=yield t.blob();break;case ft.DOCUMENT:r=yield tr.parseDocumentResponse(t,Mo.TEXT_XML);break;case ft.JSON:r=yield t.json();break;case ft.STREAM:r=yield Promise.resolve(t.body);break;case ft.TEXT:r=yield t.text();break;default:if(s!==null){const a=s.split(";")[0];new RegExp(Ss.DOCUMENT).test(a)?r=yield tr.parseDocumentResponse(t,a):new RegExp(Ss.IMAGE).test(a)?r=t.blob():a===ws.TEXT_PLAIN?r=yield t.text():a===ws.APPLICATION_JSON?r=yield t.json():r=Promise.resolve(t.body)}else r=Promise.resolve(t.body);break}return r})}static getResponse(t,n,r){return re(this,void 0,void 0,function*(){if(n===ft.RAW)return Promise.resolve(t);{const s=yield tr.convertResponse(t,n);if(t.ok)if(typeof r=="function")r(null,s);else return s;else throw s}})}}class Lb{constructor(t){this.provider=t}getAccessToken(){return re(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.provider((r,s)=>re(this,void 0,void 0,function*(){if(s)t(s);else{if(!r){const i="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new en(i)}const a=yield en.setGraphClientError(r);n(a)}}))})})}}class nr extends Error{constructor(t=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,nr.prototype),this.statusCode=t,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class Cs{static constructError(t,n,r){const s=new nr(n,"",t);return t.name!==void 0&&(s.code=t.name),s.body=t.toString(),s.date=new Date,s.headers=r==null?void 0:r.headers,s}static constructErrorFromResponse(t,n,r){const s=t.error,a=new nr(n,s.message);return a.code=s.code,s.innerError!==void 0&&(a.requestId=s.innerError["request-id"],a.date=new Date(s.innerError.date)),a.body=JSON.stringify(s),a.headers=r==null?void 0:r.headers,a}static getError(t=null,n=-1,r,s){return re(this,void 0,void 0,function*(){let a;if(t&&t.error?a=Cs.constructErrorFromResponse(t,n,s):t instanceof Error?a=Cs.constructError(t,n,s):(a=new nr(n),a.body=t),typeof r=="function")r(a,null);else return a})}}class Bb{constructor(t,n,r){this.parsePath=s=>{if(s.indexOf("https://")!==-1){s=s.replace("https://","");const i=s.indexOf("/");i!==-1&&(this.urlComponents.host="https://"+s.substring(0,i),s=s.substring(i+1,s.length));const c=s.indexOf("/");c!==-1&&(this.urlComponents.version=s.substring(0,c),s=s.substring(c+1,s.length))}s.charAt(0)==="/"&&(s=s.substr(1));const a=s.indexOf("?");if(a===-1)this.urlComponents.path=s;else{this.urlComponents.path=s.substr(0,a);const i=s.substring(a+1,s.length).split("&");for(const c of i)this.parseQueryParameter(c)}},this.httpClient=t,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(t,n,r){this.urlComponents.oDataQueryParams[t]=this.urlComponents.oDataQueryParams[t]?this.urlComponents.oDataQueryParams[t]+",":"";let s=[];r.length>1&&typeof n=="string"?s=Array.prototype.slice.call(r):typeof n=="string"?s.push(n):s=s.concat(n),this.urlComponents.oDataQueryParams[t]+=s.join(",")}buildFullUrl(){const t=Nb([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(t),t}createQueryString(){const t=this.urlComponents,n=[];if(Object.keys(t.oDataQueryParams).length!==0)for(const r in t.oDataQueryParams)Object.prototype.hasOwnProperty.call(t.oDataQueryParams,r)&&n.push(r+"="+t.oDataQueryParams[r]);if(Object.keys(t.otherURLQueryParams).length!==0)for(const r in t.otherURLQueryParams)Object.prototype.hasOwnProperty.call(t.otherURLQueryParams,r)&&n.push(r+"="+t.otherURLQueryParams[r]);if(t.otherURLQueryOptions.length!==0)for(const r of t.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(t){if(typeof t=="string")if(t.charAt(0)==="?"&&(t=t.substring(1)),t.indexOf("&")!==-1){const n=t.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(t);else if(t.constructor===Object)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.setURLComponentsQueryParamater(n,t[n]);return this}parseQueryParamenterString(t){if(this.isValidQueryKeyValuePair(t)){const n=t.indexOf("="),r=t.substring(0,n),s=t.substring(n+1);this.setURLComponentsQueryParamater(r,s)}else this.urlComponents.otherURLQueryOptions.push(t)}setURLComponentsQueryParamater(t,n){if(Db.indexOf(t)!==-1){const r=this.urlComponents.oDataQueryParams[t],s=r&&(t==="$expand"||t==="$select"||t==="$orderby");this.urlComponents.oDataQueryParams[t]=s?r+","+n:n}else this.urlComponents.otherURLQueryParams[t]=n}isValidQueryKeyValuePair(t){const n=t.indexOf("=");return!(n===-1||t.indexOf("(")!==-1&&t.indexOf("(")<n)}updateRequestOptions(t){const n=Object.assign({},t.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(t,r),typeof this.config.fetchOptions.headers!==void 0&&(t.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(t,this._options),t.headers!==void 0&&Object.assign(n,t.headers),Object.assign(n,this._headers),t.headers=n}send(t,n,r){var s;return re(this,void 0,void 0,function*(){let a;const i=new tn(this._middlewareOptions);this.updateRequestOptions(n);const c=(s=this.config)===null||s===void 0?void 0:s.customHosts;try{return a=(yield this.httpClient.sendRequest({request:t,options:n,middlewareControl:i,customHosts:c})).response,yield tr.getResponse(a,this._responseType,r)}catch(l){if(l instanceof en)throw l;let d;throw a&&(d=a.status),yield Cs.getError(l,d,r,a)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const t=Object.keys(this._headers);for(const n of t)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(t,n){return this._headers[t]=n,this}headers(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._headers[n]=t[n]);return this}option(t,n){return this._options[t]=n,this}options(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._options[n]=t[n]);return this}middlewareOptions(t){return this._middlewareOptions=t,this}version(t){return this.urlComponents.version=t,this}responseType(t){return this._responseType=t,this}select(t){return this.addCsvQueryParameter("$select",t,arguments),this}expand(t){return this.addCsvQueryParameter("$expand",t,arguments),this}orderby(t){return this.addCsvQueryParameter("$orderby",t,arguments),this}filter(t){return this.urlComponents.oDataQueryParams.$filter=t,this}search(t){return this.urlComponents.oDataQueryParams.$search=t,this}top(t){return this.urlComponents.oDataQueryParams.$top=t,this}skip(t){return this.urlComponents.oDataQueryParams.$skip=t,this}skipToken(t){return this.urlComponents.oDataQueryParams.$skipToken=t,this}count(t=!0){return this.urlComponents.oDataQueryParams.$count=t.toString(),this}query(t){return this.parseQueryParameter(t)}get(t){return re(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ye.GET};return yield this.send(n,r,t)})}post(t,n){return re(this,void 0,void 0,function*(){const r=this.buildFullUrl(),s={method:Ye.POST,body:Na(t)};return(t&&t.constructor&&t.constructor.name)==="FormData"?s.headers={}:(this.setHeaderContentType(),s.headers=this._headers),yield this.send(r,s,n)})}create(t,n){return re(this,void 0,void 0,function*(){return yield this.post(t,n)})}put(t,n){return re(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const s={method:Ye.PUT,body:Na(t)};return yield this.send(r,s,n)})}patch(t,n){return re(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const s={method:Ye.PATCH,body:Na(t)};return yield this.send(r,s,n)})}update(t,n){return re(this,void 0,void 0,function*(){return yield this.patch(t,n)})}delete(t){return re(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ye.DELETE};return yield this.send(n,r,t)})}del(t){return re(this,void 0,void 0,function*(){return yield this.delete(t)})}getStream(t){return re(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ye.GET};return this.responseType(ft.STREAM),yield this.send(n,r,t)})}putStream(t,n){return re(this,void 0,void 0,function*(){const r=this.buildFullUrl(),s={method:Ye.PUT,headers:{"Content-Type":"application/octet-stream"},body:t};return yield this.send(r,s,n)})}}class Q0{constructor(...t){if(!t||!t.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...t)}setMiddleware(...t){t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(t){t.forEach((n,r)=>{r<t.length-1&&n.setNext(t[r+1])}),this.middleware=t[0]}sendRequest(t){return re(this,void 0,void 0,function*(){if(typeof t.request=="string"&&t.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(t),t})}}const Ub=()=>typeof process=="object"&&typeof require=="function";class Ei{static createWithAuthenticationProvider(t){const n=new pr(t),r=new Ot(new ue),s=new We,a=new Pb;if(n.setNext(r),Ub()){const i=new Ve(new Qe);r.setNext(i),i.setNext(s)}else r.setNext(s);return s.setNext(a),Ei.createWithMiddleware(n)}static createWithMiddleware(...t){return new Q0(...t)}}const Fb=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}else if(typeof Promise>"u"){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}else if(typeof fetch>"u"){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}return!0};class Ms{static init(t){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=r==="authProvider"?new Lb(t[r]):t[r]);return Ms.initWithMiddleware(n)}static initWithMiddleware(t){return new Ms(t)}constructor(t){this.config={baseUrl:Ab,debugLogging:!1,defaultVersion:Tb},Fb();for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.config[r]=t[r]);let n;if(t.authProvider!==void 0&&t.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(t.authProvider!==void 0)n=Ei.createWithAuthenticationProvider(t.authProvider);else if(t.middleware!==void 0)n=new Q0(...[].concat(t.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(t){return new Bb(this.httpClient,this.config,t)}}const Jr=e=>Ms.init({authProvider:n=>{n(null,e)}});function wl(e){const t=e.match(/^(\d\d\d\d)-(\d\d)-(\d\d)$/);if(t==null)throw new Error(`extractYearMonthDate(): Wasn't receive needed format for '${e}'`);const[,n,r,s]=t,a=Number(n),i=Number(r)-1,c=Number(s);if(Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(c))throw new Error(`extractYearMonthDate(): Couldn't extract number from '${e}'`);if(i<0||i>11)throw new Error(`extractYearMonthDate(): month isn't valid, got '${r}'`);if(c<1||c>31)throw new Error(`extractYearMonthDate(): date isn't valid, got '${s}'`);return[a,i,c]}const dt={getCalendarList(){return"https://www.googleapis.com/calendar/v3/users/me/calendarList"},getColors(){return"https://www.googleapis.com/calendar/v3/colors"},getEventsListUrl(e){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events`},getSingleEvent(e,t){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(t)}`},getPatchEventUrl(e,t){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(t)}`},getUpdateEventUrl(e,t){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(t)}`},getMoveEventUrl(e,t){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(t)}/move`},getCreateEventUrl(e){return`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e)}/events`},getUserProfile(e="me"){return`https://people.googleapis.com/v1/people/${e}?personFields=emailAddresses`}};var st=(e=>(e[e.NETWORK_ERROR=0]="NETWORK_ERROR",e[e.INVALID_CREDENTIALS=1]="INVALID_CREDENTIALS",e[e.NOT_FOUND=2]="NOT_FOUND",e[e.LIMIT_EXCEEDED=3]="LIMIT_EXCEEDED",e[e.SERVER_ERROR=4]="SERVER_ERROR",e[e.UNKNOWN_ERROR=5]="UNKNOWN_ERROR",e[e.ACCESS_TOKEN_SCOPE_INSUFFICIENT=6]="ACCESS_TOKEN_SCOPE_INSUFFICIENT",e))(st||{});class Hb extends Error{constructor(n){super(`CalendarGoogleRestAdapterError - '${st[n]}'`);ee(this,"isCalendarGoogleRestAdapterError",!0);ee(this,"status");this.status=n}}function xt(e){return new Hb(e)}var To=(e=>(e[e.INVALID_CREDENTIALS=401]="INVALID_CREDENTIALS",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.GONE=410]="GONE",e[e.PERMISSION_DENIED_OR_LIMIT_EXCEEDED=403]="PERMISSION_DENIED_OR_LIMIT_EXCEEDED",e[e.ID_ALREADY_EXISTS=409]="ID_ALREADY_EXISTS",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.GOOGLE_SERVER_ERROR=500]="GOOGLE_SERVER_ERROR",e))(To||{});class ut{constructor(t,n){ee(this,"_accessToken");ee(this,"_url");ee(this,"_getSyncToken");ee(this,"_setSyncToken");this._accessToken=t,this._url=n}setSyncToken({get:t,set:n}){return this._getSyncToken=t,this._setSyncToken=n,this}async fetch(t){var a,i,c;const n=[];let r=null;for(;;){const l=new URL(this._url),d=(a=this._getSyncToken)==null?void 0:a.call(this);d!=null&&l.searchParams.set("syncToken",d),r!=null&&l.searchParams.set("pageToken",r);try{var s=await fetch(l.toString(),{headers:Sl(this._accessToken)})}catch{throw xt(st.NETWORK_ERROR)}if((await zb(s,l)).forceFullSync){(i=this._setSyncToken)==null||i.call(this,null);continue}else if(s.ok){const f=await s.json(),h=t(f);h!=null&&n.push(h);const m=f;if(m.nextPageToken!=null){r=m.nextPageToken;continue}if(this._getSyncToken!=null&&this._setSyncToken!=null){if(m.nextSyncToken)return(c=this._setSyncToken)==null||c.call(this,m.nextSyncToken),n;throw os("Got response without 'nextPageToken' or 'nextSyncToken'",`CalendarGoogleRestAdapterFetcherFetchLoopBuilder#create() - ${l.pathname}`),xt(st.SERVER_ERROR)}return n}Yb(s.status,"create")}}}ee(ut,"createHeaders",Sl);async function zb(e,t){const{status:n}=e;switch(To[n]!=null&&os(To[n],`runResponseStatusEffect() - ${t.pathname}`),n){case 401:throw xt(st.INVALID_CREDENTIALS);case 410:return{forceFullSync:!0};case 500:throw xt(st.SERVER_ERROR);case 403:let r="";try{r=(await e.json()).error.details[0].reason}catch{}throw xt(r==="ACCESS_TOKEN_SCOPE_INSUFFICIENT"?st.ACCESS_TOKEN_SCOPE_INSUFFICIENT:st.LIMIT_EXCEEDED);case 404:throw xt(st.NOT_FOUND);case 409:case 412:throw os(`Unsupported status ${n}`,`runResponseStatusEffect() - ${t.pathname}`),xt(st.UNKNOWN_ERROR)}return{forceFullSync:!1}}function Sl(e){const t=new Headers;return t.append("Authorization",`Bearer ${e}`),t.append("Accept","application/json"),t.append("Content-Type","application/json"),t}function Yb(e,t){throw os(`Unsupported status ${e}`,`CalendarGoogleRestAdapterFetcherFetchLoopBuilder#${t}()`),xt(st.UNKNOWN_ERROR)}class Cl{constructor(t){ee(this,"_accessToken");ee(this,"_syncTokenCalendarList",null);this._accessToken=t}async getColors(){const t=new Map;return await new ut(this._accessToken,dt.getColors()).fetch(n=>{n.calendar!=null&&Object.entries(n.calendar).forEach(([r,s])=>{t.set(r,s)}),n.event!=null&&Object.entries(n.event).forEach(([r,s])=>{t.set(r,s)})}),t}async getCalendarList(){const t=new Headers;t.append("Authorization",`Bearer ${this._accessToken}`),t.append("Accept","application/json"),t.append("Content-Type","application/json");const[n,r]=await Promise.all([new ut(this._accessToken,dt.getCalendarList()).setSyncToken({get:()=>this._syncTokenCalendarList,set:s=>{this._syncTokenCalendarList=s}}).fetch(s=>s.items),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:t}).then(s=>s.json())]);return n.flat(1).map(s=>s.primary?{...s,summary:r.name}:s)}async getEventsFromCalendar(t,n,r){const s=new URL(dt.getEventsListUrl(t)),a=Ml(wl(n),0,0,0,0),i=Ml(wl(r),23,59,59,999);s.searchParams.set("orderBy","startTime"),s.searchParams.set("singleEvents","true"),s.searchParams.set("timeMin",new Date(a).toISOString()),s.searchParams.set("timeMax",new Date(i).toISOString()),s.searchParams.set("maxResults","2500");const c=await new ut(this._accessToken,String(s)).fetch(l=>l.items);return[t,c.flat(1)]}getSingleEvent(t,n){const r=new URL(dt.getSingleEvent(t,n));return new ut(this._accessToken,String(r)).fetch(s=>s)}async updateEvent(t,n,r={}){const s=new URL(dt.getUpdateEventUrl(t,n.id));if(r.sendUpdates&&s.searchParams.append("sendUpdates",r.sendUpdates),r.conferenceDataVersion&&s.searchParams.append("conferenceDataVersion",r.conferenceDataVersion),!(await fetch(s.toString(),{method:"PUT",headers:ut.createHeaders(this._accessToken),body:JSON.stringify(n)})).ok)throw new Error("CalendarGoogleRestAdapterFetcher#updateEvent(): Error")}async deleteEvent(t,n,r="none"){const s=new URL(dt.getUpdateEventUrl(t,n));if(!(await fetch(s.toString(),{method:"DELETE",headers:ut.createHeaders(this._accessToken),body:JSON.stringify({sendUpdates:r})})).ok)throw new Error("CalendarGoogleRestAdapterFetcher#deleteEvent(): Error")}async moveEvent(t,n,r){const s=new URL(dt.getMoveEventUrl(t,n));if(!(await fetch(s.toString(),{method:"POST",headers:ut.createHeaders(this._accessToken),body:JSON.stringify({destination:r})})).ok)throw new Error("CalendarGoogleRestAdapterFetcher#deleteEvent(): Error")}async createEvent(t,n,r={}){const s=new URL(dt.getCreateEventUrl(t));if(r.sendUpdates&&s.searchParams.append("sendUpdates",r.sendUpdates),r.conferenceDataVersion&&s.searchParams.append("conferenceDataVersion",r.conferenceDataVersion),!(await fetch(s.toString(),{method:"POST",headers:ut.createHeaders(this._accessToken),body:JSON.stringify(n)})).ok)throw new Error("CalendarGoogleRestAdapterFetcher#createEvent(): Error")}async patchEvent(t,n,r){const s=new URL(dt.getPatchEventUrl(t,n));if(!(await fetch(s.toString(),{method:"PATCH",headers:ut.createHeaders(this._accessToken),body:JSON.stringify(r)})).ok)throw new Error("CalendarGoogleRestAdapterFetcher#patchEvent(): Error")}}function Ml([e,t,n],r,s,a,i){const c=new Date;return c.setFullYear(e,t,n),c.setHours(r,s,a,i),c.getTime()}function Tl(e,t){const n=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n==null)return null;const[,r,s,a]=n,i=Number.parseInt(r,10),c=Number.parseInt(s,10)-1,l=Number.parseInt(a,10);if(Number.isNaN(i)||Number.isNaN(c)||Number.isNaN(l))return null;const d=new Date;return d.setFullYear(i,c,l),t?d.setHours(23,59,0,0):d.setHours(0,0,0,0),Number.isNaN(d.getTime())?null:{year:d.getFullYear(),month:d.getMonth(),date:d.getDate(),hour:d.getHours(),minute:d.getMinutes()}}function Wb(e){var t,n,r,s,a,i;return W0.create({id:e.id,acl:e.accessRole==null?void 0:Kb(e.accessRole),color:(t=e.backgroundColor)!=null?t:z0,isPrimary:e.primary===!0,summary:(r=(n=e.summaryOverride)!=null?n:e.summary)!=null?r:"",timeZone:(s=e.timeZone)!=null?s:ar(),reminderMinutes:e.defaultReminders?e.defaultReminders.map(c=>{var l;return(l=c.minutes)!=null?l:0}):[],meetingSolutions:(i=(a=e.conferenceProperties)==null?void 0:a.allowedConferenceSolutionTypes)!=null?i:[]})}function Zb(e,t){var f,h,m,p,v,g,y,_,b,E,S,T,j,M,C;let n=(m=(f=t.start)==null?void 0:f.date)!=null?m:(h=t.start)==null?void 0:h.dateTime,r=(g=(p=t.end)==null?void 0:p.date)!=null?g:(v=t.end)==null?void 0:v.dateTime,s=n,a=r;const i=((y=t.start)==null?void 0:y.date)!=null;if(s==null)throw new TypeError("CalendarGoogleRestAdapterSerializer#setEvents(): 'startDateTime' wasn't defined");if(a==null)throw new TypeError("CalendarGoogleRestAdapterSerializer#setEvents(): 'endDateTime' wasn't defined");let c=[];if(t.attendees)for(let w of t.attendees)w.email!=null&&c.push({email:w.email,isOrganizer:!!w.organizer,self:!!w.self,name:w.displayName||"",status:jl(w.responseStatus)});c=Pt.sortBy(c,[w=>!w.isOrganizer,w=>!w.self,w=>-w.status]);const l=(_=t.attendees)==null?void 0:_.find(w=>w.self);if(i){const w=Tl(s,!1);if(w!=null){const I=new Date;I.setFullYear(w.year,w.month,w.date),I.setHours(0,0,0,0),I.setDate(I.getDate()),s=I.toISOString()}}if(i&&a!=null){const w=Tl(a,!0);if(w!=null){const I=new Date;I.setFullYear(w.year,w.month,w.date),I.setHours(0,0,0,0),I.setDate(I.getDate()-(r===n?0:1)),a=I.toISOString()}}let d=[];return(b=t.reminders)!=null&&b.useDefault&&(d=[...e.reminderMinutes]),(E=t.reminders)!=null&&E.overrides&&(d=[...d,...t.reminders.overrides.map(w=>{var I;return(I=w.minutes)!=null?I:0})]),Y0.create({id:t.id,iCalUid:t.iCalUID,calendarId:e.id,conference:Vb(t),isAllDay:i,startDateTime:s,startTimeZone:(T=(S=t.start)==null?void 0:S.timeZone)!=null?T:e.timeZone,endDateTime:a,endTimeZone:(M=(j=t.end)==null?void 0:j.timeZone)!=null?M:e.timeZone,isRecurrent:t.recurringEventId!=null,recurrentId:t.recurringEventId,location:t.location,status:Xb(t.status),summary:t.summary,description:(C=t.description)!=null?C:"",attendees:c,updatedAt:t.updated,responseRequested:!!l,responseStatus:l?jl(l.responseStatus):void 0,editable:!!(t.guestsCanModify&&l)||Z0(e),reminderMinutes:d})}const Gb={hangouts:{regex:/https:\/\/meet.google.com\/\w+-\w+-\w+/gi,name:"Hangouts Meet"},zoom:{regex:/https:\/\/(.*\.)?zoom\.us\/j\/\w+(\?[\w=&]+)?/gi,name:"Zoom"},msTeams:{regex:/(https:\/\/teams\.live\.com\/meet\/\w+(\?[\w=&]+)?)|((https:\/\/teams\.microsoft\.com\/l\/meetup-join\/(\w+|%|\.)+)\/\w+\?[\w+|%|.|\-=&]+)/gi,name:"Microsoft Teams"},webex:{regex:/https:\/\/(.*)\.webex\.com\/[\w\/\.]+\?[\w=&]+/gi,name:"webex"},faceTime:{regex:/https:\/\/facetime\.apple\.com\/\w+#\w=\w(&|&amp;)p=\w+(&|&amp;)k=\w+?[\w+|%|.|\-=&]+/gi,name:"FaceTime"}},Al=Object.values(Gb);function Vb({conferenceData:e,location:t,description:n}){if(e==null){if(t)for(let s of Al){const a=t.match(s.regex);if(a!=null&&a[0])return{entries:[{type:"video",label:a[0],uri:a[0],pin:null}],solutionName:s.name}}if(n)for(let s of Al){const a=n.match(s.regex);if(a!=null&&a[0])return{entries:[{type:"video",label:a[0],uri:a[0],pin:null}],solutionName:s.name}}return null}if(e.conferenceSolution==null||e.entryPoints==null||e.entryPoints.length===0||!e.entryPoints.some(s=>["video","phone"].includes(s.entryPointType)))return null;const r=e.entryPoints.map(s=>{var a;switch(s.entryPointType){case"video":case"phone":return{type:s.entryPointType,label:s.label,uri:s.uri,pin:(a=s.pin)!=null?a:null};case"more":return{type:"instructions",uri:s.uri};default:return null}}).filter(Boolean);return r.sort((s,a)=>{const i=["video","phone","instructions"],c=i.indexOf(s.type),l=i.indexOf(a.type);return c===l?0:c>l?1:-1}),{entries:r,solutionName:e.conferenceSolution.name}}function jl(e){switch(e){case"needsAction":return Ue.NEEDS_ACTION;case"declined":return Ue.DECLINED;case"tentative":return Ue.TENTATIVE;case"accepted":return Ue.ACCEPTED;default:return Ue.NEEDS_ACTION}}function Kb(e){switch(e){case"freeBusyReader":return mt.READER;case"owner":return mt.OWNER;case"reader":return mt.READER;case"writer":return mt.WRITER}throw new Error(`mapAccessRoleToCalendarAcl(): Unknown '${e}'`)}function Xb(e){switch(e){case"confirmed":return pt.CONFIRMED;case"tentative":return pt.TENTATIVE;case"cancelled":return pt.CANCELLED}return pt.TENTATIVE}class qb{constructor(){ee(this,"_calendars",new Map)}clear(){this._calendars.clear()}destroy(){this.clear(),this._calendars=void 0}hasColors(){return!0}serializeCalendarListEntries(t){const n=[];t.forEach(r=>{if(r.id!=null){const a=Wb(r);n.push(a)}}),this._calendars.clear();for(let r of n)this._calendars.set(r.id,r);return n}serializeEvents(t,n){const r=[];return n.forEach(s=>{var d,f,h,m,p,v;if(s.id==null||((h=(d=s.start)==null?void 0:d.date)!=null?h:(f=s.start)==null?void 0:f.dateTime)==null||((v=(m=s.end)==null?void 0:m.date)!=null?v:(p=s.end)==null?void 0:p.dateTime)==null)return;const c=this._calendars.get(t);if(c==null)return;const l=Zb(c,s);r.push(l)}),r}}function Jb(){throw new Error("not implemented")}const Qb=I0({id:"calendars",tsTypes:{},schema:{context:{},events:{}},predictableActionArguments:!0,preserveActionOrder:!0,initial:"initializing",on:{SET_AUTH_TOKEN:{target:"initializing",cond:(e,t)=>t.value!==e.authToken,actions:[Re((e,t)=>{e.authToken=t.value,e.providerStates=[],e.calendarsPendingVisibilityChange={},e.lastFetchedAt=null}),"resetNotifications"]},PROVIDE_MICROSOFT_CODE:{cond:(e,t)=>e.authToken!==null&&t.value!==null,target:"ready.processingMicrosoftCode.pending"},DISMISS_ERROR:{actions:Re(e=>{e.error=null})},SET_ERROR:{actions:Re((e,t)=>{e.error=t.error,pe.addBreadcrumb({data:{ctx:e,event:t},type:"calendarsMachine"}),pe.captureMessage(t.error,"error")})}},context:{authToken:null,providerStates:[],calendarsPendingVisibilityChange:{},error:null,lastFetchedAt:null},states:{initializing:{always:{cond:e=>e.authToken!==null,target:"fetchingProviders"}},fetchingProviders:{id:"fetchProviders",invoke:{src:"fetchProviders",onDone:{target:"fetchingEvents",actions:Re((e,t)=>{e.providerStates=t.data.map(n=>({record:n,status:"pending",events:[],calendars:[]}))})},onError:{target:"ready",actions:Re((e,t)=>{pe.addBreadcrumb({data:{ctx:e,event:t},type:"calendarsMachine"}),pe.captureMessage("error.fetchingProviders","error"),e.error="error.fetchingProviders"})}}},fetchingEvents:{id:"fetchingEvents",invoke:{src:"fetchEvents",onDone:{target:"ready",actions:[Re((e,t)=>{e.providerStates=t.data,e.lastFetchedAt=new Date}),"updateNotifications"]},onError:{target:"ready",actions:Re((e,t)=>{pe.addBreadcrumb({data:{ctx:e,event:t},type:"calendarsMachine"}),pe.captureMessage("error.fetchingEvents","error"),e.error="error.fetchingEvents",e.lastFetchedAt=new Date})}}},ready:{type:"parallel",on:{ADD_CALENDAR_PROVIDER:{target:".addingProvider.pending"},DISCONNECT_PROVIDER:{target:".disconnectingProvider.pending"},REFETCH_EVENTS_MAYBE:{cond:(e,t)=>e.lastFetchedAt!==null&&(t.date!==e.lastFetchedAt.getDate()||new Date().getTime()-e.lastFetchedAt.getTime()>=xb),actions:Re(e=>{e.providerStates.forEach(t=>{t.status="pending",t.events=[],t.calendars=[]})}),target:"#fetchingEvents"},TOGGLE_CALENDAR_VISIBILITY:{cond:(e,t)=>e.providerStates.some(n=>n.record.id===t.providerId),actions:O0("processCalendarVisibilityToogle",(e,t)=>({authToken:e.authToken,type:"_UPDATE_CALENDAR_VISIBILITY",record:e.providerStates.find(n=>n.record.id===t.providerId).record,calendarId:t.calendarId}))},_SET_CALENDAR_VISIBILITY_PENDING:{actions:Re((e,t)=>{e.calendarsPendingVisibilityChange[`${t.providerId}/${t.calendarId}`]=t.isPending})},_UPDATE_PROVIDER_RECORD:{actions:[Re((e,t)=>{e.providerStates=e.providerStates.map(n=>n.record.id===t.record.id?{...n,record:t.record}:n)}),"updateNotifications"]}},invoke:{id:"processCalendarVisibilityToogle",src:"processCalendarVisibilityToogle"},states:{addingProvider:{initial:"idle",states:{idle:{},pending:{invoke:{src:"addProvider",onDone:{target:["#fetchProviders","idle"],actions:Re((e,t)=>{e.providerStates.push({record:t.data,status:"pending",calendars:[],events:[]})})},onError:{target:"idle",actions:"processAddCalendarError"}}}}},disconnectingProvider:{initial:"idle",states:{idle:{},pending:{invoke:{src:async(e,t)=>{if(t.type==="DISCONNECT_PROVIDER")return await Iv(e.authToken,{id:t.id}),t.id;throw new Error("invalid action")},onDone:{target:"idle",actions:[Re((e,t)=>{e.providerStates=e.providerStates.filter(n=>n.record.id!==t.data)}),"updateNotifications"]},onError:{target:"idle",actions:Re((e,t)=>{pe.addBreadcrumb({data:{ctx:e,event:t},type:"calendarsMachine"}),pe.captureMessage("error.disconnectingProvider","error"),e.error="error.disconnectingProvider"})}}}}},processingMicrosoftCode:{initial:"idle",states:{idle:{},pending:{invoke:{src:"processMicrosoftCode",onDone:{target:"#fetchProviders"},onError:{target:"#fetchProviders",actions:"processAddCalendarError"}}}}}}}}},{actions:{updateNotifications:(e,t)=>{console.log("updateNotifications",e,t)},resetNotifications:(e,t)=>{console.log("resetNotifications",e,t)},processAddCalendarError:Re((e,t)=>{var r,s;let n="error.addingProvider";((s=(r=t.data)==null?void 0:r.payload)==null?void 0:s.error_code)===10046&&(n="error.duplicateProvider"),pe.addBreadcrumb({data:{ctx:e,event:t},type:"calendarsMachine"}),pe.captureMessage(n,"error"),e.error=n})},services:{processCalendarVisibilityToogle:()=>(e,t)=>{t(n=>{var r,s;if(n.type==="_UPDATE_CALENDAR_VISIBILITY"){e({type:"_SET_CALENDAR_VISIBILITY_PENDING",calendarId:n.calendarId,providerId:n.record.id,isPending:!0});let a=[...(s=(r=n.record.config)==null?void 0:r.disabledCalendars)!=null?s:[]];a.includes(n.calendarId)?a=a.filter(i=>i!==n.calendarId):a.push(n.calendarId),Zr(n.authToken,{id:n.record.id,config:{disabledCalendars:a}}).then(i=>{e({type:"_UPDATE_PROVIDER_RECORD",record:i})}).catch(()=>e({type:"SET_ERROR",error:"error.toggleCalendarVisibility"})).finally(()=>{e({type:"_SET_CALENDAR_VISIBILITY_PENDING",calendarId:n.calendarId,isPending:!1,providerId:n.record.id})})}})},addProvider:async(e,t)=>{var r,s,a,i,c,l;const n=t.value;switch(n){case"google":const{code:d,redirectUri:f}=await Jb();let h=await wa(e.authToken,{code:d,redirectUri:f,type:"google",id:na(),name:"google"});const m=new Headers;m.append("Authorization",`Bearer ${h.accessToken}`),m.append("Accept","application/json"),m.append("Content-Type","application/json");const g=(s=(r=(await(await fetch(dt.getUserProfile(),{headers:m})).json()).emailAddresses)==null?void 0:r[0])==null?void 0:s.value;return h=await Zr(e.authToken,{id:h.id,name:g!=null?g:"Google"}),h;case"microsoft":if(typeof AnydoElectronPreload<"u"){const{code:y,codeVerifier:_}=await AnydoElectronPreload.thirdPartyAuth.getMicrosoftCalendarAuthCode();let b=await wa(e.authToken,{code:y,codeVerifier:_,type:"microsoft",id:na(),name:"microsoft",redirectUri:_t.electronRedirectUri});const S=await Jr(b.accessToken).api("/me").get();return b=await Zr(e.authToken,{id:b.id,name:(c=(i=(a=S.mail)!=null?a:S.displayName)!=null?i:S.userPrincipalName)!=null?c:"Microsoft"}),b}else{const y=JSON.stringify({returnTo:(l=t.returnTo)!=null?l:"myday"});window.location.href=`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?prompt=consent&client_id=${encodeURIComponent(_t.clientId)}&response_type=code&redirect_uri=${encodeURIComponent(`${window.location.origin}/${_t.webRedirectUriSegment}`)}&response_mode=query&scope=${_t.scopes.join("%20")}&state=${y}&code_challenge=${_t.codeChallenge}&code_challenge_method=${_t.codeChallengeMethod}`}return;default:throw new ah(n)}},fetchProviders:async e=>await Rv(e.authToken),processMicrosoftCode:async(e,t)=>{var a,i,c;let n=await wa(e.authToken,{code:t.value,type:"microsoft",id:na(),name:"microsoft",redirectUri:`${window.location.origin}/${_t.webRedirectUriSegment}`});const s=await Jr(n.accessToken).api("/me").get();return n=await Zr(e.authToken,{id:n.id,name:(c=(i=(a=s.mail)!=null?a:s.displayName)!=null?i:s.userPrincipalName)!=null?c:"Microsoft"}),n},fetchEvents:async e=>{const t=e.providerStates.filter(n=>n.status==="pending").map(async n=>{if(n.record.provider==="google"){let r=n.record.accessToken;try{let s=new Cl(r);const a=new qb;let i;try{i=await s.getCalendarList()}catch{const{accessToken:p}=await nl(e.authToken,n.record.id,n.record.provider);r=p,s=new Cl(r),i=await s.getCalendarList()}const c=a.serializeCalendarListEntries(i).map(m=>({...m,providerId:n.record.id})),l=Wa(new Date,"yyyy-MM-dd"),d=new Map,f=c.map(m=>{const p=l,v=l;return s.getEventsFromCalendar(m.id,p,v)});for(let[m,p]of await Promise.all(f))d.set(m,p);const h=[];return d.forEach((m,p)=>{const v=a.serializeEvents(p,m);h.push(...v)}),{...n,record:{...n.record,accessToken:r},status:"success",calendars:c,events:h}}catch(s){return pe.addBreadcrumb({data:{ctx:e,providerState:n},type:"calendarsMachine",message:"Failed to fetch provider calendars/events"}),pe.captureException(s),{...n,record:{...n.record,accessToken:r},status:"error",calendars:[],events:[]}}}if(n.record.provider==="microsoft"){let r=n.record.accessToken;try{const s=new Sb;let a,i;try{a=Jr(r),i=await a.api(_t.calendarEndpoint).get()}catch{const{accessToken:v}=await nl(e.authToken,n.record.id,n.record.provider);r=v,a=Jr(r),i=await a.api(_t.calendarEndpoint).get()}const c=i.value,l=s.serializeCalendarListEntries(c).map(p=>({...p,providerId:n.record.id})),d=new Map,f=oh(new Date).getTime(),h=await Promise.all(l.map(p=>a.api(`/me/calendars/${p.id}/calendarView?startDateTime=${new Date(f).toISOString()}&endDateTime=${zi(new Date).toISOString()}&top=999`).get().then(v=>[p.id,v.value])));for(let[p,v]of await Promise.all(h))d.set(p,v);const m=[];return d.forEach((p,v)=>{const g=s.serializeEvents(v,p).filter(y=>y.isAllDay?zi(new Date(y.endDateTime)).getTime()>f:new Date(y.endDateTime).getTime()>f);m.push(...g)}),{...n,record:{...n.record,accessToken:r},status:"success",calendars:l,events:m}}catch(s){return pe.addBreadcrumb({data:{ctx:e,providerState:n},type:"calendarsMachine",message:"Failed to fetch provider calendars/events"}),pe.captureException(s),{...n,record:{...n.record,accessToken:r},status:"error",calendars:[],events:[]}}}return{...n,status:"success",calendars:[],events:[]}});return await Promise.all(t)}}}),Ie=Hy(Qb,{devTools:!0}),e3=({children:e,authToken:t,onError:n})=>{const r=Ie.useActorRef(),{error:s,dismiss:a}=ef();return x.useEffect(()=>{s&&n(s,a)},[a,s,n]),x.useEffect(()=>{r.send({type:"SET_AUTH_TOKEN",value:t})},[t,r]),o.jsx(o.Fragment,{children:e})},t3=({children:e,notificationManager:t,onError:n,authToken:r})=>o.jsx(Ie.Provider,{options:{services:void 0,actions:{updateNotifications:s=>{t.cancelAllNotifications();const a=s.providerStates.map(c=>{var d,f;const l=((f=(d=c.record)==null?void 0:d.config)==null?void 0:f.disabledCalendars)||[];return l.length>0?c.events.filter(h=>!l.includes(h.calendarId)):c.events}).flat(),i=Pt.groupBy(a,"calendarId");Object.entries(i).forEach(([c,l])=>{t.updateNotifications(c,l)})},resetNotifications:()=>t.cancelAllNotifications()}},children:o.jsx(e3,{authToken:r,onError:n,children:e})}),wi=()=>Ie.useSelector(e=>e.context.providerStates.map(t=>{var r,s;const n=((s=(r=t.record)==null?void 0:r.config)==null?void 0:s.disabledCalendars)||[];return n.length>0?t.events.filter(a=>!n.includes(a.calendarId)):t.events}).flat()),n3=()=>{const e=Ie.useSelector(t=>t.context.providerStates);return x.useMemo(()=>e.map(({record:t})=>t).filter(Boolean),[e])},r3=()=>{const{send:e}=Ie.useActorRef(),t=Ie.useSelector(g=>g.context.providerStates.filter(y=>!!y.record)),n=Ie.useSelector(g=>g.context.providerStates.map(y=>y.calendars.map(_=>({..._,providerId:y.record.id}))).flat()),r=wi(),s=Ie.useSelector(g=>g.matches("ready")),a=Ie.useSelector(g=>g.matches("fetchingProviders")||g.matches("fetchingEvents")),i=Ie.useSelector(g=>g.matches("ready")&&g.context.providerStates.length===0),c=Ie.useSelector(g=>g.matches("ready.addingProvider.pending")||g.matches("ready.processingMicrosoftCode.pending")),l=Ie.useSelector(g=>g.matches("ready.disconnectingProvider.pending")),d=Ie.useSelector(g=>g.context.calendarsPendingVisibilityChange),f=x.useCallback((g,{returnTo:y}={})=>{e({type:"ADD_CALENDAR_PROVIDER",value:g,returnTo:y})},[e]),h=x.useCallback(g=>{e({type:"DISCONNECT_PROVIDER",id:g})},[e]),m=x.useCallback(g=>{e({type:"REFETCH_EVENTS_MAYBE",date:g})},[e]),p=x.useCallback((g,y)=>{e({type:"TOGGLE_CALENDAR_VISIBILITY",providerId:g,calendarId:y})},[e]),v=x.useMemo(()=>{const g=new Map;return n.length>0&&n.forEach(y=>{g.set(y.id,y.color)}),g},[n]);return{providerStates:t,calendars:n,events:r,isReady:s,isFetching:a,shouldShowConnectPrompts:i,isConnecting:c,isDisconnecting:l,connect:f,disconnect:h,refetchEventsMaybe:m,toggleCalendarVisibility:p,calendarsPendingVisibilityChange:d,calendarsColorsMap:v}},ef=()=>{const e=Ie.useActorRef();return{error:Ie.useSelector(t=>t.context.error),dismiss:x.useCallback(()=>e.send("DISMISS_ERROR"),[e])}},s3=e=>{const t=wi();return e&&t.find(n=>n.id===e)||null},Ao={useAllEvents:wi,useProviders:r3,useProviderRecords:n3,useSingleEvent:s3,useError:ef},a3=({children:e,notificationManager:t})=>{const n=td(),r=Nn(),s=x.useCallback((a,i)=>{r.set({id:$t(),theme:Qt.ERROR,message:o.jsx(N,{id:`_.calendarMachine.${a}`}),autoDismiss:!1,actionsId:["DISMISS"],renderButton:()=>o.jsx(N,{id:"_.buttons.dismiss"}),onActionClick:c=>{c==="DIMISS"&&i()}})},[r]);return o.jsx(t3,{notificationManager:t,authToken:n,onError:s,children:e})},Kt={bundled:e=>({source:"bundled",uid:e,value:e}),unsplash:({id:e,color:t,urls:n})=>({source:"unsplash",uid:rr+e,color:t,id:e,url:n.raw})};function Si(){const{userSettings:e,updateUserSettings:t}=sd(),n=u.useMemo(()=>Dl(e.selectedImage),[e.selectedImage]),r=u.useMemo(()=>Dl(e.selectedImageDark),[e.selectedImageDark]);return{selectedImage:n,selectedImageDark:r,updateSelectedImage:u.useCallback((s,a)=>{t(s,o3(a))},[t])}}function qs(){const e=Ds(),{userSettings:{selectedImage:t,selectedImageDark:n}}=sd(),r=e?n:t;return r!==Je.BLANK&&r!==Je.NONE&&r.length>0}const rr="unsplash";function Dl(e){var t;if(e.startsWith(rr)){const n=new URLSearchParams(e.replace(rr,"")),r=n.get("id"),s=n.get("url"),a=(t=n.get("color"))!=null?t:"";return r==null||s==null?Kt.bundled(Je.NONE):{source:"unsplash",uid:rr+r,id:r,url:s,color:a}}return Kt.bundled(e)}function o3(e){switch(e.source){case"bundled":return e.value;case"unsplash":return rr+new URLSearchParams({id:e.id,url:e.url,color:e.color}).toString()}}const sr=1920,Ts=3840;function tf(e,t){return typeof e=="object"&&"url"in e?e.dimmed?"dimmed::"+e.url:e.url:`${t?"dark-":"light-"}${e}`}function Nl(e,t,n,r){var a;const s=tf(e,t);if(typeof e=="object"&&"url"in e)return{id:s,src:e,element:o.jsx(Ra,{isFirstLayer:r,media:[{src:e.url,srcSet:(a=e.srcSet)==null?void 0:a.join(","),type:"image/png"}],onEnterAnimationEnd:n},s)};if(ch.has(e))return{id:s,src:e,element:o.jsx(Rl,{className:"AppImageAnimatedDom__element--none",onEnterAnimationEnd:n},s)};if(e===ad)return{id:s,src:e,element:o.jsx(Rl,{className:"AppImageAnimatedDom__element--blank",onEnterAnimationEnd:n},s)};{const i=ni(Kt.bundled(e),{isDarkMode:t});return{id:s,src:e,element:lh.includes(e)?o.jsx(Ra,{isFirstLayer:r,media:[{src:i["4k_svg"],type:"image/svg"}],onEnterAnimationEnd:n},s):o.jsx(Ra,{isFirstLayer:r,media:[{src:i.hd_webp,srcSet:`${i.hd_webp} ${sr}w, ${i["4k_webp"]} ${Ts}w`,type:"image/webp"},{src:i.hd,srcSet:`${i.hd} ${sr}w, ${i["4k"]} ${Ts}w`,type:"image/png"}],onEnterAnimationEnd:n},s)}}}function nf(e,t){return new Promise(n=>{e.addEventListener(t,n,{once:!0})})}const Rl=({className:e,onEnterAnimationEnd:t})=>{const n=u.useRef(null),r=Er(t);return u.useEffect(()=>{const s=n.current;s&&requestAnimationFrame(()=>{s.classList.add("AppImageAnimatedDom__element--in"),Promise.race([Sd(5e3),nf(s,"animationend")]).then(r)})},[r]),o.jsx("div",{ref:n,className:`${e} AppImageAnimatedDom__element `})},Ra=({isFirstLayer:e,media:t,onEnterAnimationEnd:n})=>{const[r,s]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{!r||a.current},[r]),o.jsxs("picture",{children:[t.length>1?o.jsx(o.Fragment,{children:t.map(i=>o.jsx("source",{src:i.src,srcSet:i.srcSet,type:i.type},i.type))}):null,o.jsx("img",{ref:a,hidden:!e&&!r,className:"AppImageAnimatedDom__element AppImageAnimatedDom__element--image",src:t[0].src,srcSet:t[0].srcSet,sizes:"100vw",alt:"","aria-hidden":!0,onLoad:()=>{s(!0);const i=a.current;!i||e||requestAnimationFrame(()=>{i.classList.add("AppImageAnimatedDom__element--in"),Promise.race([Sd(5e3),nf(i,"animationend")]).then(n)})}})]})};function i3({isDarkMode:e,onSelectedEnter:t=()=>{},selected:n,container:r=document.body}){const s=Er(t),[a,i]=u.useState(()=>Nl(n,e,()=>{},!0)),c=u.useMemo(()=>{const l=a.id;if(tf(n,e)===l)return;const f=Nl(n,e,()=>{i(f),s()},!1);return f},[a.id,s,e,n]);return r&&ih.createPortal(o.jsxs("div",{children:[a.element,c==null?void 0:c.element,typeof a.src=="object"&&a.src.dimmed||typeof(c==null?void 0:c.src)=="object"&&c.src.dimmed?o.jsx("div",{className:"AppImageAnimatedDom__element AppImageAnimatedDom__element--dimmed"}):null]}),r)}const c3={source:"bundled",value:ad},l3=({selectedLight:e,selectedDark:t,isMyDay:n,isBlank:r,container:s})=>{const a=Ds();let{selectedImage:i,selectedImageDark:c}=Si();e!=null||(e=i),t!=null||(t=c);const l=u.useMemo(()=>{const d=r?c3:a?c:i;switch(d.source){case"bundled":return n&&d.value===Je.NONE?Je.BLANK:d.value;default:const f=`${d.url}&w=${sr}`,h=[`${d.url}&w=${sr} ${sr}w`,`${d.url}&w=${Ts} ${Ts}w`],m=uv(d.color);return{url:f,srcSet:h,isDark:m,dimmed:!m&&a}}},[r,a,n,i,c]);return u.useLayoutEffect(()=>{const d=l!==Je.BLANK&&l!==Je.NONE,f=typeof l=="object"&&"isDark"in l?l.isDark:a;document.documentElement.classList.toggle("AppImage__hasImage",d),document.documentElement.classList.toggle("AppImage__lightImage",d&&!f),document.documentElement.classList.toggle("AppImage__darkImage",d&&f)},[a,l]),o.jsx(i3,{container:s,isDarkMode:a,selected:l})},jo=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:o.jsx("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,children:o.jsx("path",{d:"m11.2 5.602 1.945 5.255 5.255 1.945-5.255 1.944-1.945 5.256-1.945-5.256L4 12.802l5.255-1.945L11.2 5.602ZM18 4l.54 1.46L20 6l-1.46.54L18 8l-.54-1.46L16 6l1.46-.54L18 4Z"})})}),Il=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",viewBox:"0 0 25 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19.5 4h-14a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM16.5 2v4M8.5 2v4M3.5 10h18"})),d3="myday-side-bar-open-state",Do=0,u3=1,f3=Do,h3="myday-side-bar-active-tab";var Nt=(e=>(e[e.SUGGESTIONS=0]="SUGGESTIONS",e[e.CALENDAR=1]="CALENDAR",e[e.NOTES=2]="NOTES",e))(Nt||{});const m3="myday-suggestions-deeplink";function Js(){const[e,t]=Pi(d3,f3),[n,r]=Pi(h3,0),[s,a]=od(m3,!1),i=u.useCallback(()=>t(Do),[t]),c=u.useCallback(()=>t(u3),[t]);return{isSideBarOpen:e===Do,openSideBar:i,closeSideBar:c,activeTabId:n,setActiveTabId:r,hasSuggestionsDeeplink:s,setHasSuggestionsDeeplink:a}}const Ci=u.forwardRef(function({children:t,disabled:n,label:r,hidden:s,onClick:a,title:i},c){return o.jsx("button",{type:"button",ref:c,"aria-label":r,hidden:s,disabled:n,title:i,onClick:n===!0?void 0:a,className:"AppHeaderControlButton",children:t})}),p3=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M20.6 5.5v4.8h-4.8M3 18.3v-4.8h4.8"}),u.createElement("path",{fill:"currentColor",d:"M4.254 9.233a.8.8 0 0 0 1.508.534l-1.508-.534Zm12.634-2.421-.566.565a.78.78 0 0 0 .018.018l.548-.583Zm3.164 4.07a.8.8 0 1 0 1.096-1.165l-1.096 1.166ZM3.548 12.918a.8.8 0 1 0-1.096 1.166l1.096-1.166Zm3.164 4.07.566-.565a.617.617 0 0 0-.018-.017l-.548.583Zm12.634-2.42a.8.8 0 0 0-1.508-.534l1.508.534Zm-13.584-4.8a6.4 6.4 0 0 1 4.621-4.107l-.353-1.561a8 8 0 0 0-5.776 5.134l1.508.534Zm4.621-4.107a6.4 6.4 0 0 1 5.94 1.717l1.13-1.13a8 8 0 0 0-7.423-2.148l.353 1.56Zm5.957 1.735 3.712 3.488 1.096-1.166-3.712-3.488-1.096 1.166ZM2.452 14.083l3.712 3.488 1.096-1.166-3.712-3.488-1.096 1.166Zm3.694 3.47a8 8 0 0 0 7.424 2.148l-.353-1.56a6.4 6.4 0 0 1-5.94-1.719l-1.13 1.131Zm7.424 2.148a8 8 0 0 0 5.776-5.134l-1.508-.534a6.4 6.4 0 0 1-4.621 4.107l.353 1.56Z"}));function g3(){return o.jsxs(u.Fragment,{children:[o.jsx("h3",{children:o.jsx(N,{id:"AppSidebarSync.offline.title"})}),o.jsx("p",{children:o.jsx("small",{children:o.jsx(N,{id:"AppSidebarSync.offline.info"})})})]})}function v3(e,t){return o.jsxs(u.Fragment,{children:[o.jsx("h3",{children:o.jsx(N,{id:"AppSidebarSync.serverIsDown.title"})}),o.jsx("p",{children:o.jsx("small",{children:o.jsx(N,{id:"AppSidebarSync.serverIsDown.info",values:{lastUpdateFormatted:e}})})}),o.jsx("p",{children:o.jsx(se,{onClick:t,children:o.jsx("small",{children:o.jsx("strong",{children:o.jsx(N,{id:"AppSidebarSync.serverIsDown.reconnectButton"})})})})})]})}function y3({className:e,onAfterSyncClick:t}){const n=u.useRef(null),r=u.useRef(null),s=we(),{track:a}=it(),i=cp(),{isOnline:c,isSyncing:l,lastUpdate:d,forceSync:f}=Dv(),h=i2(),m=o2();let[p,v]=u.useState(!1);p&&c&&!l&&(p=!1,v(p));const g=u.useMemo(()=>je(d).format("D/M"),[d]),y=u.useMemo(()=>je(d).format("h:mma"),[d]),_=u.useCallback(function(){f(),m()},[f,m]);_n(u.useMemo(()=>[n,r],[]),p?()=>v(!1):void 0);const b=u.useRef(!0);u.useEffect(()=>{if(b.current){b.current=!1;return}i&&(v(!1),_())},[i,_]);const E=i&&c&&h!==Xn.REJECTED,S=l||h===Xn.PENDING;return o.jsxs(u.Fragment,{children:[o.jsx(Ci,{ref:r,title:s.formatMessage("AppSidebarSync.button.title",{lastUpdateDateFormatted:g,lastUpdateTimeFormatted:y}),label:s.formatMessage("AppSidebarSync.button.label"),disabled:S,onClick:()=>{i?(a("clicked_sync_now"),_()):v(T=>!T),t==null||t()},children:o.jsx("span",{className:B("AppSidebarSync__button",{"AppSidebarSync__button--failure":!E}),"data-testid":i&&S?"app-sidebar-sync-running":"app-sidebar-sync-idle",children:o.jsx("span",{className:B("AppSidebarSync__button__content",e,{"AppSidebarSync__button__content--syncRunning":i&&S}),children:o.jsx(p3,{})})})}),o.jsx(_r,{from:r,isVisible:p&&!c,className:"AppSidebarSync__tooltip",children:()=>o.jsxs("div",{ref:n,className:"AppSidebarSync__tooltipContent",children:[i?null:g3(),i&&!c?v3(y,_):null]})})]})}const b3=u.memo(y3);var _3=id,x3=dh;function E3(e,t){return e&&e.length?x3(e,_3(t)):[]}var w3=E3;const kl=Dn(w3),S3=e=>{const t={type:"activityUpdate",model:e.data},{listeners:n,transform:r,transition:s,setNodeRef:a}=Is({id:e.data.id,data:t,animateLayoutChanges:ks}),i={transform:Os.Transform.toString(r),transition:s},c=x.useMemo(()=>{let l=n==null?void 0:n.onPointerDown;return l=()=>!1,{...n,onPointerDown:l}},[n]);return o.jsx("div",{ref:a,style:i,...c,children:o.jsx(v1,{...e})})},C3="_root_10uz1_1",M3="_list_10uz1_10",T3="_scrolledFromTop_10uz1_16",A3="_scrolledFromBottom_10uz1_27",j3="_spinnerContainer_10uz1_39",Un={root:C3,list:M3,scrolledFromTop:T3,scrolledFromBottom:A3,spinnerContainer:j3},D3=x.forwardRef(({activityUpdates:e,loadMore:t,canLoadMore:n,loading:r,onInteract:s,onUpdate:a,onClose:i,onDismiss:c,models:l},d)=>{const f=x.useRef(null),h=x.useRef(null),m=x.useRef(null),p=x.useRef(),v=x.useRef(),g=x.useRef(!1),[y,_]=x.useState(!0),[b,E]=x.useState(!0);return x.useLayoutEffect(()=>{if(m.current){const S=new IntersectionObserver(T=>{const j=T.some(M=>M.isIntersecting);_(j)},{threshold:.1,root:f.current});S.observe(m.current),p.current=S}return()=>{var S;return(S=p.current)==null?void 0:S.disconnect()}},[]),x.useLayoutEffect(()=>{if(h.current){const S=new IntersectionObserver(T=>{const j=T.some(M=>M.isIntersecting);E(j),!g.current&&j&&t()},{threshold:.1,root:f.current});S.observe(h.current),v.current=S}return()=>{var S;return(S=v.current)==null?void 0:S.disconnect()}},[t]),o.jsx("div",{ref:d,children:o.jsxs("div",{ref:f,className:B(Un.root,{[Un.scrolledFromTop]:!y&&!r,[Un.scrolledFromBottom]:!b&&!r}),children:[o.jsx("div",{ref:m}),o.jsx("div",{className:Un.list,children:o.jsx(Cd,{sensors:Md(Td()),collisionDetection:Ad,measuring:jd,children:o.jsx(Vo,{items:e,strategy:Dd,children:e.map(S=>o.jsx(S3,{theme:"notificationCenter",data:S,models:l,onInteract:s,onUpdate:a,onDismiss:c,onClose:i},S.id))})})}),n&&!r&&o.jsx("div",{ref:h}),o.jsx("div",{className:Un.spinnerContainer,children:r&&o.jsx(cd,{spin:!0})})]})})}),N3="_tooltip_1iumb_1",R3="_noUpdates_1iumb_5",I3="_noUpdatesText_1iumb_19",Ia={tooltip:N3,noUpdates:R3,noUpdatesText:I3},k3="/success.webp",O3=({isOpen:e,onOpenChange:t,parentElementRef:n,outsideClickWhitelist:r=[],filter:s})=>{const[a,i]=x.useState(!1),{formatMessage:c,locale:l}=we(),{track:d}=it(),f=x.useRef(null),h=x.useRef(null),m=x.useCallback(()=>{e||d("entered_notification_center"),t(!e)},[e,t,d]),p=x.useCallback(()=>{t(!1)},[t]);_n([f,h,...r],x.useCallback(()=>{e&&t(!1)},[e,t]));const v=[or(Ns),p],[g,y]=x.useState([]),[_,b]=x.useState("idle"),{fetch:E,changeStatus:S}=Nd(),T=Nn(),{hasUnreadNotifications:j,dismissUnreadNotifications:M}=y1(),C=Za(j);x.useEffect(()=>{if(j&&e&&_==="idle"&&!C){async function X(){var G;try{b("loading");const W=await E({locale:l,after:((G=g[0])==null?void 0:G.creationDate)||0,importantOnly:s==="important"});y(Ne=>kl([...W.data,...Ne],"id")),M(),b("idle")}catch(W){b("error");const Ne=$t();pe.captureException(W),T.set({id:Ne,theme:Qt.ERROR,message:o.jsx(N,{id:"_.errors.unknown.please-try-again"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick(){}}),t(!1)}}X()}},[g,M,E,_,s,j,e,l,T,C,t]),x.useEffect(()=>{e||(i(!1),y([]))},[M,e]);const w=x.useCallback(async()=>{var X;if(!a&&_==="idle")try{b("loading");const G=await E({locale:l,before:((X=g[g.length-1])==null?void 0:X.creationDate)||new Date().valueOf(),importantOnly:s==="important"});y(W=>kl([...W,...G.data],"id")),i(G.is_last_page),b("idle"),C&&M()}catch(G){b("error");const W=$t();pe.captureException(G),T.set({id:W,theme:Qt.ERROR,message:o.jsx(N,{id:"_.errors.unknown.please-try-again"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick(){}}),t(!1)}},[g,M,E,_,s,a,l,T,C,t]),I=Za(s);x.useEffect(()=>{s!==I&&(i(!1),y([]),w())},[s,w,I]);const R=x.useCallback(async X=>{if(X.status!==Ir.Interacted){y(G=>G.map(W=>W.id===X.id?{...W,status:Ir.Interacted}:W));try{await S({userUpdateIds:[X.id],status:Ir.Interacted})}catch(G){pe.captureException(G)}}},[S]),L=x.useCallback(X=>{y(G=>G.map(W=>W.id===X.id?X:W))},[]),P=x.useCallback(async X=>{y(G=>G.filter(W=>W.id!==X.id));try{await S({userUpdateIds:[X.id],status:Ir.Deleted})}catch(G){pe.captureException(G)}},[S]),{syncSections:A}=Rs(),{syncCards:k}=ld(),{syncBoards:O}=dd(),H=x.useMemo(()=>({sections:A,cards:k,boards:O}),[O,k,A]),le=x.useMemo(()=>c("AppHeaderNotifications.noUpdates"),[c]);return o.jsxs(o.Fragment,{children:[o.jsx(Ci,{ref:f,title:c("AppHeaderNotifications.button.notifications"),label:c("AppHeaderNotifications.button.notifications"),onClick:m,children:o.jsx(b1,{hasNotifications:j})}),o.jsx(_r,{from:n,isVisible:e,className:Ia.tooltip,position:"bottom-end",offset:12,children:o.jsx(Uo,{shortcuts:[v],children:o.jsxs("div",{style:{width:360},children:[o.jsx(D3,{models:H,onInteract:R,onUpdate:L,onDismiss:P,onClose:p,ref:h,activityUpdates:g,loading:_==="loading",canLoadMore:!a,loadMore:w,filter:s}),_==="idle"&&g.length===0&&o.jsx(Rd,{ms:100,children:o.jsxs("div",{className:Ia.noUpdates,children:[o.jsx("img",{src:k3,alt:le,title:le}),o.jsx("div",{className:Ia.noUpdatesText,children:le})]})})]})})})]})},P3=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("rect",{width:16.4,height:16.4,x:3.8,y:3.8,stroke:"currentColor",strokeWidth:1.6,rx:8.2})),$3=u.memo(function(){const t=Math.floor(Math.random()*1e4),n=`svg-a-${t}`,r=`svg-b-${t}`;return o.jsxs("svg",{width:"104",height:"77",viewBox:"0 0 104 77",children:[o.jsxs("defs",{children:[o.jsx("path",{id:r,d:"M23.138 55.258c20.75-9.759 40.253-10.816 58.513-3.173C99.91 59.727 72.926 63.549.699 63.549l22.44-8.291z"}),o.jsxs("filter",{id:n,width:"139.3%",height:"306.1%",x:"-19.7%",y:"-78.8%",filterUnits:"objectBoundingBox",children:[o.jsx("feOffset",{dy:"4",in:"SourceAlpha",result:"shadowOffsetOuter1"}),o.jsx("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),o.jsx("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0212013134 0"})]})]}),o.jsxs("g",{fill:"none",fillRule:"evenodd",transform:"translate(8)",children:[o.jsx("circle",{cx:"50.5",cy:"13.5",r:"13.5",fill:"#FFC422"}),o.jsx("path",{stroke:"#2FC14A",strokeLinecap:"round",strokeWidth:"4",d:"M28 23v22.635a3.434 3.434 0 0 0 3.428 3.435h3.428"}),o.jsx("path",{stroke:"#2FC14A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M35 59V30M65 49V34"}),o.jsx("path",{stroke:"#2FC14A",strokeLinecap:"round",strokeWidth:"4",d:"M42.1 14v22.576a3.489 3.489 0 0 1-3.485 3.488H35.13"}),o.jsxs("g",{transform:"rotate(3 43.938 55.3)",children:[o.jsx("use",{fill:"#000",filter:`url(#${n})`,xlinkHref:`#${r}`}),o.jsx("use",{fill:"#FFC422",xlinkHref:`#${r}`})]})]})]})}),L3=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M8.348 5.487H21M8.348 11.326H21M8.348 17.164H21"}),u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.482 5.487h.01M3.482 11.326h.01M3.482 17.164h.01"})),B3=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"currentColor",d:"M20.025 8.416c.538 0 .975.393.975.877 0 .445-.367.812-.843.87l-.132.008H3.975c-.538 0-.975-.393-.975-.878 0-.444.367-.81.843-.869l.132-.008h16.05ZM20.025 13.83c.538 0 .975.393.975.877 0 .445-.367.812-.843.87l-.132.008H3.975c-.538 0-.975-.393-.975-.878 0-.444.367-.81.843-.869l.132-.008h16.05Z"}),u.createElement("path",{fill:"currentColor",d:"m9.97 3 .133.005c.49.05.855.418.867.85l-.006.12-2.006 16.244c-.06.482-.542.83-1.077.776-.49-.05-.856-.418-.867-.85l.005-.12L9.026 3.78c.054-.441.464-.77.944-.78ZM16.12 3.005c.49.05.856.418.867.85l-.005.12-2.006 16.244c-.06.482-.542.83-1.077.776-.491-.05-.856-.418-.868-.85l.006-.12L15.043 3.78c.055-.441.464-.77.945-.78l.132.005Z"})),gr=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6.767h-7a.817.817 0 0 0-.817.817v3.5c0 .451.366.817.817.817h7a.817.817 0 0 0 .817-.817v-3.5a.817.817 0 0 0-.817-.817Zm-7-.933a1.75 1.75 0 0 0-1.75 1.75v3.5c0 .966.784 1.75 1.75 1.75h7a1.75 1.75 0 0 0 1.75-1.75v-3.5a1.75 1.75 0 0 0-1.75-1.75h-7Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.984 5.834V4.083a1.983 1.983 0 1 0-3.967 0v1.75h3.967ZM7.001 1.166a2.917 2.917 0 0 0-2.917 2.917v2.684h5.833V4.083a2.917 2.917 0 0 0-2.916-2.917Z",clipRule:"evenodd"})),On=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.483 2.45a2.333 2.333 0 1 0 0 4.666 2.333 2.333 0 0 0 0-4.667Zm0 .933a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8Zm4.197 6.883A2.333 2.333 0 0 0 7.35 8.05H3.617l-.117.003a2.333 2.333 0 0 0-2.217 2.33v.934l.004.058a.467.467 0 0 0 .93-.058v-.933l.003-.096a1.4 1.4 0 0 1 1.397-1.304H7.35l.096.003a1.4 1.4 0 0 1 1.304 1.397v.933l.004.058a.467.467 0 0 0 .93-.058v-.933l-.004-.117Zm.485-1.806c.064-.25.319-.4.568-.335a2.333 2.333 0 0 1 1.747 2.14l.003.118v.933a.467.467 0 0 1-.93.058l-.003-.058v-.933a1.4 1.4 0 0 0-1.05-1.355.467.467 0 0 1-.335-.568Zm-1.3-5.936a.467.467 0 1 0-.23.905 1.4 1.4 0 0 1 0 2.712.467.467 0 1 0 .23.904 2.333 2.333 0 0 0 0-4.52Z",clipRule:"evenodd"})),U3="_root_w2oj7_1",F3="_icon_w2oj7_11",H3="_path_w2oj7_17",ka={root:U3,icon:F3,path:H3},ot=({icon:e,items:t})=>{const n=u.useMemo(()=>t.join(" > "),[t]);return o.jsxs("div",{className:ka.root,children:[o.jsx("div",{className:ka.icon,children:e}),o.jsx("div",{className:B(ka.path),"data-private":"lipsum",children:n})]})},z3=({taskId:e})=>{var c,l;const t=we(),n=z("task",e),r=(c=n==null?void 0:n.categoryId)!=null?c:null,s=z("category",r),a=(l=n==null?void 0:n.parentGlobalTaskId)!=null?l:null,i=z("task",a);return!n||!s?null:i?o.jsx(ot,{icon:o.jsx(gr,{}),items:[t.formatMessage("_.sidebar.title.my-lists"),s.name,i.title]}):o.jsx(ot,{icon:o.jsx(gr,{}),items:[t.formatMessage("_.sidebar.title.my-lists"),s.name]})},Y3=({attachmentId:e})=>{var l,d;const t=we(),n=z("attachment",e),r=z("task",n==null?void 0:n.globalTaskId),s=(l=r==null?void 0:r.categoryId)!=null?l:null,a=z("category",s),i=(d=r==null?void 0:r.parentGlobalTaskId)!=null?d:null,c=z("task",i);return!n||!r||!a?null:c?o.jsx(ot,{icon:o.jsx(gr,{}),items:[t.formatMessage("_.sidebar.title.my-lists"),a.name,c.title,r.title]}):o.jsx(ot,{icon:o.jsx(gr,{}),items:[t.formatMessage("_.sidebar.title.my-lists"),a.name,r.title]})},W3=({cardId:e})=>{var l,d,f;const t=z("card",e),n=(l=t==null?void 0:t.sectionId)!=null?l:null,r=z("section",n),s=(d=r==null?void 0:r.boardId)!=null?d:null,a=z("board",s),i=(f=a==null?void 0:a.spaceId)!=null?f:null,c=z("space",i);return!t||!c||!a||!r?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[c.name,a.name,r.name]})},Z3=({cardAttachmentId:e})=>{var d,f,h;const t=z("cardAttachment",e),n=z("card",t==null?void 0:t.cardId),r=(d=n==null?void 0:n.sectionId)!=null?d:null,s=z("section",r),a=(f=s==null?void 0:s.boardId)!=null?f:null,i=z("board",a),c=(h=i==null?void 0:i.spaceId)!=null?h:null,l=z("space",c);return!t||!n||!l||!i?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[l.name,i.name,n.name]})},G3=({checklistId:e})=>{var d,f,h;const t=z("cardChecklist",e),n=z("card",t==null?void 0:t.cardId),r=(d=n==null?void 0:n.sectionId)!=null?d:null,s=z("section",r),a=(f=s==null?void 0:s.boardId)!=null?f:null,i=z("board",a),c=(h=i==null?void 0:i.spaceId)!=null?h:null,l=z("space",c);return!t||!n||!l||!i?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[l.name,i.name,n.name]})},V3=({checklistItemId:e})=>{var f,h,m;const t=z("checklistItem",e),n=z("cardChecklist",t==null?void 0:t.checklistId),r=z("card",n==null?void 0:n.cardId),s=(f=r==null?void 0:r.sectionId)!=null?f:null,a=z("section",s),i=(h=a==null?void 0:a.boardId)!=null?h:null,c=z("board",i),l=(m=c==null?void 0:c.spaceId)!=null?m:null,d=z("space",l);return!t||!n||!r||!d||!c?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[d.name,c.name,r.name,n.name]})},K3=({tagId:e})=>{var i,c;const t=z("tag",e),n=(i=t==null?void 0:t.boardId)!=null?i:null,r=z("board",n),s=(c=r==null?void 0:r.spaceId)!=null?c:null,a=z("space",s);return!t||!r||!a?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[a.name,r.name]})},Ol=()=>{const e=we();return o.jsx(ot,{icon:o.jsx(gr,{}),items:[e.formatMessage("_.sidebar.title.my-lists")]})},X3=({boardId:e})=>{var s;const t=z("board",e),n=(s=t==null?void 0:t.spaceId)!=null?s:null,r=z("space",n);return!t||!r?null:o.jsx(ot,{icon:o.jsx(On,{}),items:[r.name]})},q3=({searchResult:e})=>{switch(e.item.searchCategory){case F.TASK:case F.SUB_TASK:case F.TASK_NOTE:return o.jsx(z3,{taskId:e.item.id});case F.CARD:case F.CARD_NOTE:return o.jsx(W3,{cardId:e.item.id});case F.LABEL:return o.jsx(Ol,{});case F.TAG:return o.jsx(K3,{tagId:e.item.id});case F.CATEGORY:return o.jsx(Ol,{});case F.BOARD:return o.jsx(X3,{boardId:e.item.id});case F.TASK_ATTACHMENT:return o.jsx(Y3,{attachmentId:e.item.id});case F.CARD_ATTACHMENT:return o.jsx(Z3,{cardAttachmentId:e.item.id});case F.CARD_CHECKLIST:return o.jsx(G3,{checklistId:e.item.id});case F.CARD_CHECKLIST_ITEM:return o.jsx(V3,{checklistItemId:e.item.id})}},Pl=1,J3=2,Q3=[{titleI18nId:"AppHeaderSearch.searchGroups.tasks",searchCategories:[F.CARD,F.TASK]},{titleI18nId:"_.tasks.subtasks",searchCategories:[F.SUB_TASK]},{titleI18nId:"_.checklist",searchCategories:[F.CARD_CHECKLIST,F.CARD_CHECKLIST_ITEM]},{titleI18nId:"_.tasks.note",searchCategories:[F.TASK_NOTE,F.CARD_NOTE]},{titleI18nId:"_.tags.title",searchCategories:[F.TAG,F.LABEL]},{titleI18nId:"AppHeaderSearch.searchGroups.lists",searchCategories:[F.CATEGORY]},{titleI18nId:"AppHeaderSearch.searchGroups.boards",searchCategories:[F.BOARD]},{titleI18nId:"TaskEditPaneDetails.attachments.title",searchCategories:[F.TASK_ATTACHMENT,F.CARD_ATTACHMENT]}];function $l(e){var a,i,c,l;const{searchCategory:t}=e,n=((a=e.meta)==null?void 0:a.taskStatus)===Le.UNCHECKED,r=(i=e.meta)==null?void 0:i.isChecked,s=(c=e.meta)==null?void 0:c.boardEmoji;switch(t){case F.TASK:return o.jsx("div",{className:B("AppHeaderSearch__searchItem__icon",{"AppHeaderSearch__searchItem__icon--taskStatusNotUnchecked":!n}),children:o.jsx(P3,{})});case F.SUB_TASK:return o.jsx("div",{className:B("AppHeaderSearch__searchItem__icon",{"AppHeaderSearch__searchItem__icon--taskStatusNotUnchecked":!n}),children:o.jsx(cr,{checked:!n,theme:"secondary"})});case F.CATEGORY:return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",children:o.jsx(L3,{})});case F.CARD:return o.jsx("div",{className:B("AppHeaderSearch__searchItem__icon",{"AppHeaderSearch__searchItem__icon--taskStatusNotUnchecked":r}),children:o.jsx(cr,{checked:!!r,theme:"secondary"})});case F.BOARD:return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",children:s||o.jsx(fd,{})});case F.TAG:case F.LABEL:if((l=e.meta)!=null&&l.tagOrlabelColor)return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",style:{color:e.meta.tagOrlabelColor},children:o.jsx(B3,{})});break;case F.TASK_NOTE:case F.CARD_NOTE:return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M12 19.5458H19.9999",stroke:"currentcolor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9998 4.5642C16.4762 4.07761 17.1705 3.88757 17.8212 4.06568C18.4719 4.24378 18.9801 4.76296 19.1545 5.42766C19.3288 6.09235 19.1428 6.80157 18.6665 7.28816L7.55551 18.638L4 19.546L4.88888 15.9141L15.9998 4.5642Z",stroke:"currentcolor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})});case F.TASK_ATTACHMENT:case F.CARD_ATTACHMENT:return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",children:o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M20.44 11.6689L12.1948 19.9141C11.1847 20.9242 9.81467 21.4917 8.38617 21.4917C6.95767 21.4917 5.58768 20.9242 4.57757 19.9141C3.56747 18.904 3 17.534 3 16.1055C3 14.677 3.56747 13.307 4.57757 12.2969L12.8228 4.05172C13.4962 3.37831 14.4095 3 15.3619 3C16.3142 3 17.2275 3.37831 17.9009 4.05172C18.5743 4.72512 18.9527 5.63845 18.9527 6.59078C18.9527 7.54311 18.5743 8.45644 17.9009 9.12985L9.64673 17.3751C9.31003 17.7118 8.85337 17.9009 8.3772 17.9009C7.90103 17.9009 7.44437 17.7118 7.10767 17.3751C6.77096 17.0384 6.58181 16.5817 6.58181 16.1055C6.58181 15.6294 6.77096 15.1727 7.10767 14.836L14.7249 7.22779",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})});case F.CARD_CHECKLIST:case F.CARD_CHECKLIST_ITEM:return o.jsx("div",{className:"AppHeaderSearch__searchItem__icon",children:o.jsx(Ko,{})})}return null}function e4(e){var a;const t=e.item.text;if(e.matches==null||e.matches.length===0)return o.jsx("div",{className:"AppHeaderSearch__searchItem__text",children:t});const n=e.matches[0],r=[];let s=0;for(let[i,c]of n.indices)c=c+1,r.push(t.substring(s,i)),r.push(o.jsx("strong",{children:t.substring(i,c)})),s=c;return s<t.length&&r.push(t.substring(s,t.length)),e.item.searchCategory===F.TAG||e.item.searchCategory===F.LABEL?o.jsx("div",{className:"AppHeaderSearch__searchItem__text","data-private":"lipsum",style:{color:(a=e.item.meta)==null?void 0:a.tagOrlabelColor},children:u.Children.toArray(r)}):o.jsx("div",{className:"AppHeaderSearch__searchItem__text","data-private":"lipsum",children:u.Children.toArray(r)})}function t4(){return o.jsxs("div",{className:"AppHeaderSearch__tooltip__noResult",children:[o.jsx($3,{}),o.jsx("div",{className:"AppHeaderSearch__tooltip__noResult__text",children:o.jsx(N,{id:"AppHeaderSearch.titles.noResults"})})]})}class n4 extends u.Component{constructor(){super(...arguments);ee(this,"textFieldRef",u.createRef());ee(this,"_openSearchButton",u.createRef());ee(this,"state",{isActive:!1,isRecentSearched:!1,searchResults:[],searchValue:"",submitSearchValue:null});ee(this,"beginSearchFlowFromDeepLink",()=>{this.props.track("search_deep_link_activated"),this.setState(n=>n.isActive?null:{searchResults:[],isRecentSearched:!0,isActive:!0,submitSearchValue:null})});ee(this,"handleButtonClick",()=>{var n;this.state.isActive?(this.endSearchFlow(),(n=this._openSearchButton.current)==null||n.focus()):this.beginSearchFlow()});ee(this,"handleTextFieldValueChange",n=>{this.setState(r=>({isRecentSearched:r.isRecentSearched&&n.trim().length<2,searchValue:n}))});ee(this,"handleTextFieldAnimationEnter",()=>{this.textFieldRef.current!=null&&this.textFieldRef.current.focus()});ee(this,"handleOutSideClick",()=>{this.endSearchFlow()});ee(this,"handleSubmitSearch",n=>{n.preventDefault();const r=this.state.searchValue;this.props.userSearch.searchImmediate(r,this.props.selectedBoardId?{sortingOverride:{boardId:this.props.selectedBoardId}}:void 0),this.setState({submitSearchValue:r})})}static getDerivedStateFromProps(n,r){let s=[];const{userSearch:a}=n;return r.isActive&&r.searchValue===a.searchValue&&r.searchResults!==a.searchResults&&s.push({searchResults:a.searchResults}),s.length===0?null:Object.assign({},...s)}componentDidUpdate(n,r){var a,i;const s=this.state.searchValue.trim();if(r.searchValue.trim()!==s&&s.length>=Pl&&this.props.userSearch.search(s,this.props.selectedBoardId?{sortingOverride:{boardId:this.props.selectedBoardId}}:void 0),this.state.submitSearchValue!=null){const c=this.state.submitSearchValue.trim();if(c===this.props.userSearch.searchValue&&c.length>=Pl){const{searchResults:l}=this.props.userSearch;this.setState({submitSearchValue:null},()=>{if(l.length===0)return;const d=l[0];this.gotoSearchItemClick("NEW_SEARCH",d.item.searchCategory,d.item.id)})}}r.isActive!==this.state.isActive&&((i=(a=this.props).onActiveChange)==null||i.call(a,this.state.isActive))}gotoSearchItemClick(n,r,s){n==="RECENT"?this.props.userSearch.selectRecentSearch(r,s):n==="NEW_SEARCH"&&this.props.userSearch.selectSearch(r,s),this.setState({searchValue:"",isActive:!1})}beginSearchFlow(){this.props.track("search_button_tapped"),this.setState(n=>n.isActive?null:{searchResults:[],isRecentSearched:!0,isActive:!0,submitSearchValue:null})}endSearchFlow(){this.props.userSearch.searchResults.length===0&&this.props.track("search_dismiss_on_empty_state"),this.props.userSearch.cancel(),this.setState({searchValue:"",isActive:!1,submitSearchValue:null})}getTabIndex(){return this.state.isActive?J3:void 0}renderSearchResult(n){return o.jsxs("button",{type:"button",tabIndex:this.getTabIndex(),onClick:()=>this.gotoSearchItemClick("NEW_SEARCH",n.item.searchCategory,n.item.id),className:"AppHeaderSearch__searchItem",children:[o.jsx("div",{className:"AppHeaderSearch__searchItem__iconWrapper",children:$l(n.item)}),o.jsxs("div",{className:"AppHeaderSearch__searchItem__content",children:[e4(n),o.jsx(q3,{searchResult:n})]})]},n.item.id)}renderSearchResultGroup(n,r){const{i18n:s}=this.props;return o.jsxs("div",{children:[o.jsx("div",{className:"AppHeaderSearch__searchGroup",children:s.formatMessage(n)}),r.map(a=>this.renderSearchResult(a))]},`search-group-${n}`)}renderSearchResults(){const n=[];return Q3.forEach(r=>{n.push({...r,searchResults:this.state.searchResults.filter(s=>r.searchCategories.includes(s.item.searchCategory))})}),o.jsx("div",{children:n.map(r=>r.searchResults.length===0?null:this.renderSearchResultGroup(r.titleI18nId,r.searchResults))})}renderRecentSearched(){const{recentSearches:n}=this.props.userSearch;return o.jsxs("div",{className:"AppHeaderSearch__tooltip__recentSearched",children:[o.jsx("div",{className:"AppHeaderSearch__tooltip__recentSearched__title",children:o.jsx(x1,{children:o.jsx(N,{id:"AppHeaderSearch.titles.recentSearched"})})}),n.map(r=>o.jsxs("button",{type:"button",tabIndex:this.getTabIndex(),onClick:()=>this.gotoSearchItemClick("RECENT",r.searchCategory,r.id),className:"AppHeaderSearch__searchItem",children:[$l(r),o.jsx("div",{className:"AppHeaderSearch__searchItem__text","data-private":"lipsum",children:r.text})]},r.id))]})}render(){const{i18n:n}=this.props,{isRecentSearched:r,searchResults:s,isActive:a}=this.state,i=a?this.props.userSearch.recentSearches.length:0,c=this.state.isActive&&(!r||i>0),l=!r&&s.length===0;return o.jsxs(o.Fragment,{children:[o.jsx(r4,{onDeepLinkActivated:this.beginSearchFlowFromDeepLink}),o.jsx(E1,{onOutSideClick:this.handleOutSideClick,ignoreOutSideClick:!a,render:d=>{const{searchValue:f}=this.state,{openShortcut:h,closeShortcut:m}=this.props,p=[[h,this.handleButtonClick]];return this.state.isActive&&p.push([m,this.handleButtonClick]),o.jsxs(o.Fragment,{children:[o.jsx(fh,{preventDefaultShortcuts:[h],shortcuts:p,children:o.jsxs("div",{ref:d("tooltip-all-content"),className:"AppHeaderSearch",children:[o.jsx(Ci,{ref:this._openSearchButton,title:a?n.formatMessage("AppHeaderSearch.buttons.search.close"):n.formatMessage("AppHeaderSearch.buttons.search.open"),label:a?n.formatMessage("AppHeaderSearch.buttons.search.close"):n.formatMessage("AppHeaderSearch.buttons.search.open"),onClick:this.handleButtonClick,children:o.jsx(Vy,{})}),o.jsx("div",{className:B("AppHeaderSearch__controls",{"AppHeaderSearch__controls--isOpen":a}),children:o.jsx(ud,{onEnter:this.handleTextFieldAnimationEnter,isVisible:a,render:({isEntering:v,isLeaving:g,props:y})=>o.jsx("form",{onSubmit:this.handleSubmitSearch,className:B({"AppHeaderSearch__textFieldAnimationContainer--animated":v||g}),children:o.jsx("div",{onAnimationEnd:v&&y!=null?y.onAnimationEnd:void 0,className:B("AppHeaderSearch__textFieldContainer",{"AppHeaderSearch__textFieldContainer--in":v,"AppHeaderSearch__textFieldContainer--out":g}),children:o.jsx(w1,{ref:this.textFieldRef,tabIndex:this.getTabIndex(),theme:"headerSearch",value:f,onChange:this.handleTextFieldValueChange,placeholder:n.formatMessage("AppHeaderSearch.textField.placeholder")})})})})})]})}),o.jsx(_r,{from:this.props.parentElementRef,isVisible:c,className:"AppHeaderSearch__tooltipWrapper",position:"bottom-start",offset:12,children:o.jsx("div",{className:B("AppHeaderSearch__tooltip",{"AppHeaderSearch__tooltip--customScrollbar":za()}),children:o.jsx(kd,{children:o.jsx("div",{className:B("AppHeaderSearch__tooltip__content",{"AppHeaderSearch__tooltip__content--customScrollbar":za()}),children:r?this.renderRecentSearched():l?t4():this.renderSearchResults()})})})})]})}})]})}}const r4=({onDeepLinkActivated:e})=>{const t=Js(),{isMyDay:n}=Hv();return Od("opensearch",u.useCallback(()=>{n&&t.closeSideBar(),e()},[n,t,e])),null},s4=u.memo(uh(function(t){const n=we(),r=it(),s=or(_1.OPEN_SEARCH),a=or(Ns),{selectedBoardId:i}=Id();return o.jsx(n4,{...t,...r,i18n:n,openShortcut:s,closeShortcut:a,selectedBoardId:i})})),a4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:8,fill:"none",viewBox:"0 0 12 8",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.2 1.6 6 6.4l4.8-4.8"}));function o4({isMyDay:e,isSearchActive:t,intercomButton:n,setIsSearchActive:r,isNotificationCenterActive:s,setIsNotificationCenterActive:a,theme:i="default",onAfterSyncClick:c}){const l=x.useRef(null),d=x.useCallback(A=>r(A),[r]),f=Nn(),[h,m]=x.useState("all"),[p,v]=x.useState(!1),g=x.useRef(null),y=x.useRef(null),[_,b]=x.useState(0),{clear:E}=Nd(),{formatMessage:S}=we(),{closeSideBar:T,isSideBarOpen:j,activeTabId:M,setActiveTabId:C}=Js(),{track:w}=it();Od("opennotificationcenter",x.useCallback(()=>{e&&T(),a(!0),w("entered_notification_center_by_deep_link")},[e,a,w,T]));const I=x.useCallback(async()=>{try{w("notification_tapped_clear"),await E(),b(A=>A+1)}catch(A){pe.captureException(A);const k=$t();f.set({id:k,theme:Qt.ERROR,message:o.jsx(N,{id:"_.errors.unknown.please-try-again"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick(){}})}},[E,f,w]);_n([g],x.useCallback(A=>{A.stopPropagation(),v(!1)},[])),x.useEffect(()=>{s||v(!1)},[s]);const[R,L]=x.useState(!1),P=x.useRef(null);return _n(x.useMemo(()=>[P],[]),x.useCallback(()=>L(!1),[])),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"AppHeader__controls",children:[s&&o.jsxs("div",{className:"AppHeader__controls__notificationFilters",children:[o.jsxs(se,{className:"AppHeader__controls__notificationFilterButton",ref:g,onClickNative:A=>{A.stopPropagation(),v(k=>!k)},children:[S(`AppHeader.notificationFilter.${h}`)," ",o.jsx(a4,{})]}),o.jsxs(fe,{onLeave:()=>v(!1),className:"AppHeader__controls__notificationFilterBackdrop",isVisible:p,position:"bottom-start",from:g.current,children:[o.jsx(fe.Item,{onClickNative:A=>{A.stopPropagation(),m("all"),v(!1),w("notification_tapped_filter",{extra_str1:"all"})},selected:h==="all",children:o.jsx(N,{id:"AppHeader.notificationFilter.all"})},"all"),o.jsx(fe.Item,{onClickNative:A=>{A.stopPropagation(),m("important"),v(!1),w("notification_tapped_filter",{extra_str1:"important"})},selected:h==="important",children:o.jsx(N,{id:"AppHeader.notificationFilter.important"})},"important")]}),h==="all"&&o.jsx(se,{onClick:I,ref:y,className:"AppHeader__controls__notificationClearButton",children:o.jsx(N,{id:"AppHeader.notifications.clearAll"})})]}),o.jsxs("div",{ref:l,className:B("AppHeader__controls__bg",`AppHeader__controls__bg--theme-${i}`,{"AppHeader__controls__bg--myDay":e,"AppHeader__controls__bg--inOverlay":t||s}),children:[e&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:B("AppHeader__controls__tabMenuButton",{"AppHeader__controls__tabMenuButton--open":j&&!t&&!s}),style:{pointerEvents:"none"},ref:P,onClick:()=>L(!0),disabled:!0,children:[o.jsx("div",{className:"AppHeader__controls__tabIcon",children:M===Nt.SUGGESTIONS?o.jsx(jo,{}):o.jsx(Il,{})}),o.jsx("div",{className:"AppHeader__controls__tabLabelText",children:o.jsx(N,{id:M===Nt.SUGGESTIONS?"MyDaySideBar.suggestions":"MyDaySideBar.events"})})]}),o.jsxs(fe,{isVisible:R,from:P,position:"bottom-start",offset:-46,children:[o.jsx(fe.Item,{onClick:()=>C(Nt.SUGGESTIONS),children:o.jsxs("div",{className:"AppHeader__controls__tabLabel",children:[o.jsx("div",{className:"AppHeader__controls__tabIcon",children:o.jsx(jo,{})}),o.jsx("div",{className:"AppHeader__controls__tabLabelText",children:o.jsx(N,{id:"MyDaySideBar.suggestions"})})]})}),o.jsx(fe.Item,{onClick:()=>C(Nt.CALENDAR),children:o.jsxs("div",{className:"AppHeader__controls__tabLabel",children:[o.jsx("div",{className:"AppHeader__controls__tabIcon",children:o.jsx(Il,{})}),o.jsx("div",{className:"AppHeader__controls__tabLabelText",children:o.jsx(N,{id:"MyDaySideBar.events"})})]})})]})]}),o.jsxs("div",{className:B("AppHeader__controls__buttonsWrapper",{"AppHeader__controls__buttonsWrapper--inOverlay":t||s}),"data-sidebar-open":e&&j,children:[o.jsx(b3,{className:"AppHeader__controls__syncButton",onAfterSyncClick:c}),n,o.jsx(O3,{isOpen:s,onOpenChange:a,parentElementRef:l,filter:h,outsideClickWhitelist:[g,y]},`${_}-${h}`),o.jsx(s4,{onActiveChange:d,parentElementRef:l})]})]})]})})}const i4=()=>{const[e,t]=u.useState(!1),[n,r]=u.useState(!1);return o.jsx(o.Fragment,{children:o.jsxs("header",{className:B("AppHeader__component",{"AppHeader__component--isActive":e||n}),children:[o.jsx(o4,{isMyDay:!0,isNotificationCenterActive:n,setIsNotificationCenterActive:r,isSearchActive:e,setIsSearchActive:t,intercomButton:null}),o.jsx(wd,{isVisible:e||n})]})})};function c4({task:e,showMoveToBoard:t}){const{track:n}=it(),[r,s]=u.useState(!1),a=u.useCallback(()=>{s(!1)},[]),{categories:i}=hd(),c=md(),l=u.useCallback(d=>{c([{id:e.id,key:"categoryId",value:d.id}]),s(!1),n("changed_list_for_task_from_dialog",{extra_str1:e.id,extra_str3:"existing_task"})},[e.id,n,c]);return{open:u.useCallback(()=>{s(!0)},[]),modal:o.jsx(S1,{fromRef:null,categories:i,isVisible:r,selectedCategoryId:e.categoryId,taskId:e.id,onCancel:a,onUpdate:l,showMoveToBoard:t})}}const l4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("circle",{r:9,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),u.createElement("circle",{r:5,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),u.createElement("circle",{r:1,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"})),d4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("mask",{id:"mask0",width:24,height:23,x:-4,y:5,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},u.createElement("path",{fill:"#EDEDED",d:"m5.5 5-9.5.5 4.5 17L17 28l2.5-9-14-14Z"})),u.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask0)"},u.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),u.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"})),u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.5,d:"M3.061 3 21 20.939"}),u.createElement("mask",{id:"mask1",width:25,height:25,x:6,y:-7,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},u.createElement("path",{fill:"#C4C4C4",d:"M16.156-6.414 30.729 8.159l-9.299 9.3L6.857 2.884z"})),u.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask1)"},u.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),u.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"}),u.createElement("circle",{r:2,transform:"matrix(1 0 0 -1 12 12)"}))),u4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.308 5H3.692C3.31 5 3 5.358 3 5.8v2.4c0 .442.31.8.692.8h16.616c.382 0 .692-.358.692-.8V5.8c0-.442-.31-.8-.692-.8ZM19 9v9.23c0 .205-.067.4-.186.545a.586.586 0 0 1-.45.225H5.636a.586.586 0 0 1-.45-.225A.858.858 0 0 1 5 18.23V9M10 13h4"})),f4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.09 9H21M16.5 3.75l-3 16.5M10.5 3.75l-3 16.5M3 15h16.91"})),h4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.4,d:"M13.5 6.45c0-2.32-2.015-4.2-4.5-4.2s-4.5 1.88-4.5 4.2c0 4.9-2.25 6.3-2.25 6.3h13.5s-2.25-1.4-2.25-6.3M11.25 15.75c-.388.464-1.102.75-1.875.75-.773 0-1.487-.286-1.875-.75"})),m4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:18,height:18,viewBox:"3 3 18 18",...e},u.createElement("defs",null,u.createElement("path",{id:"0kkx5vjasa",d:"M17.2 3.2a2.4 2.4 0 0 1 2.4 2.4v12.8a2.4 2.4 0 0 1-2.4 2.4H7.6a2.4 2.4 0 0 1-2.4-2.4V5.6a2.4 2.4 0 0 1 2.4-2.4zm0 1.6H7.6a.8.8 0 0 0-.8.8v12.8a.8.8 0 0 0 .8.8h9.6a.8.8 0 0 0 .8-.8V5.6a.8.8 0 0 0-.8-.8zm-1.6 10.4a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594l.1-.006h6.4zm0-3.2a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594L9.2 12h6.4zm-4.8-3.2a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594l.1-.006h1.6z"})),u.createElement("use",{xlinkHref:"#0kkx5vjasa",fill:"currentColor",fillRule:"nonzero"})),p4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M8 5v3M10.598 9.5 8 8M11.51 6.232h2.5v-2.5"}),u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M11.89 11.89a5.5 5.5 0 1 1 0-7.78l2.12 2.122"})),g4="_dropdownItemContent_15wc1_1",v4={dropdownItemContent:g4},Tt=({children:e,...t})=>o.jsx(fe.Item,{...t,itemClassName:v4.dropdownItemContent,children:e}),y4=({hideMenu:e,archiveTask:t,model:n,openLists:r,openReminder:s,openTags:a,isPinned:i,pinItem:c,showMyDay:l=!0})=>{const{createMyDayEntry:d,updateMyDayEntries:f,myDayEntries:h}=zt(),[m]=x.useState(()=>{var M;return(M=h.find(C=>C.referencedObjectId===n.id))==null?void 0:M.id}),p=x.useCallback(()=>{e(),t==null||t()},[e,t]),v=x.useCallback(()=>{e(),a()},[e,a]),g=x.useCallback(()=>{e(),r()},[e,r]),y=x.useCallback(()=>{e(),s()},[e,s]),_=x.useCallback(()=>{e(),c==null||c()},[e,c]),b=x.useCallback(()=>{e(),d({referencedObjectId:n.id,referencedObjectType:ye.ANYDO_TASK,source:"task_view"})},[d,e,n.id]),E=x.useCallback(()=>{m&&(e(),f([{key:"visibilityStatus",value:he.DISMISSED,id:m}]))},[e,m,f]),S=Rn(),T=[or(Ns),e],j=m?o.jsx(Tt,{icon:o.jsx(d4,{}),onClick:E,children:o.jsx(N,{id:"_.buttons.remove-from-my-day"})}):o.jsx(Tt,{icon:o.jsx(l4,{}),onClick:b,children:o.jsx(N,{id:"_.buttons.add-to-my-day"})});return o.jsxs(Uo,{shortcuts:[T],children:[l?j:null,o.jsx(Tt,{icon:ir.isRepeatReminder(n,S)?o.jsx(p4,{}):o.jsx(h4,{}),onClick:y,children:o.jsx(N,{id:"_.reminders.title"})}),o.jsx(Tt,{icon:o.jsx(m4,{}),onClick:g,children:o.jsx(N,{id:"_.lists.title"})}),o.jsx(Tt,{icon:o.jsx(f4,{}),onClick:v,children:o.jsx(N,{id:"_.tags.title"})}),t?o.jsx(Tt,{icon:o.jsx(u4,{}),onClick:p,children:o.jsx(N,{id:"_.buttons.archive"})}):null,c&&(i?o.jsx(Tt,{icon:o.jsx(C1,{}),onClick:_,children:o.jsx(N,{id:"_.buttons.unpin"})}):o.jsx(Tt,{icon:o.jsx(Ps,{}),onClick:_,children:o.jsx(N,{id:"_.buttons.pin"})}))]})},b4="_myDayEntry_ei11s_3",_4="_isDragOverlay_ei11s_44",x4="_isChecked_ei11s_44",E4="_isPlaceholder_ei11s_69",w4="_isFilesDragOver_ei11s_74",S4="_buttons_ei11s_83",C4="_isPinned_ei11s_87",M4="_isMenuVisible_ei11s_92",T4="_button_ei11s_83",A4="_isPinButton_ei11s_112",j4="_breadcrumbs_ei11s_122",D4="_checkbox_ei11s_153",N4="_content_ei11s_161",R4="_title_ei11s_169",I4="_labels_ei11s_187",k4="_titleWrapper_ei11s_192",O4="_indicators_ei11s_197",P4="_indicatorLeft_ei11s_208",$4="_indicatorRight_ei11s_214",L4="_tags_ei11s_218",B4="_dueDate_ei11s_224",U4="_indicatorIcon_ei11s_229",F4="_indicatorCount_ei11s_242",H4="_indicatorCountIcon_ei11s_253",z4="_attachmentsIcon_ei11s_257",Y4="_checklistsIcon_ei11s_261",W4="_progress_ei11s_272",$={myDayEntry:b4,isDragOverlay:_4,isChecked:x4,isPlaceholder:E4,isFilesDragOver:w4,buttons:S4,isPinned:C4,isMenuVisible:M4,button:T4,isPinButton:A4,breadcrumbs:j4,checkbox:D4,content:N4,title:R4,labels:I4,titleWrapper:k4,indicators:O4,indicatorLeft:P4,indicatorRight:$4,tags:L4,dueDate:B4,indicatorIcon:U4,indicatorCount:F4,indicatorCountIcon:H4,attachmentsIcon:z4,checklistsIcon:Y4,progress:W4},rf=400,sf=e=>`myday-${e.id}`,Mi=u.forwardRef(({model:e,onFileDragOver:t,className:n,isDragging:r,isDragOverlay:s,isMenuOpen:a,children:i,...c},l)=>{const d=e.visibilityStatus===he.PINNED,f=e.status===ge.CHECKED,h=u.useMemo(()=>sf(e),[e]),m=u.useRef(null),[p,v]=u.useState(!1),g=Er(t!=null?t:()=>{}),y=u.useCallback(()=>{v(!0),m.current===null&&(m.current=setTimeout(()=>{g()},700))},[g]),_=u.useCallback(E=>{E.preventDefault(),v(!0),m.current===null&&(m.current=setTimeout(()=>{g()},700))},[g]),b=u.useCallback(()=>{v(!1),m.current!==null&&(clearTimeout(m.current),m.current=null)},[]);return o.jsx("div",{ref:l,...c,id:h,onDragEnter:y,onDragOver:_,onDragLeave:b,className:B($.myDayEntry,n,{[$.isChecked]:f,[$.isPlaceholder]:r,[$.isFilesDragOver]:p,[$.isDragOverlay]:s,[$.isPinned]:d,[$.isMenuVisible]:a}),children:i})}),Ti=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m16.4 6.8-9.6 9.6M6.8 6.8l9.6 9.6"})),Z4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e},u.createElement("path",{fill:"#9B9B9B",fillRule:"evenodd",d:"M10.5 6.767h-7a.817.817 0 0 0-.817.816v3.5c0 .451.366.817.817.817h7a.817.817 0 0 0 .817-.816v-3.5a.817.817 0 0 0-.817-.817Zm-7-.934a1.75 1.75 0 0 0-1.75 1.75v3.5c0 .967.784 1.75 1.75 1.75h7a1.75 1.75 0 0 0 1.75-1.75v-3.5a1.75 1.75 0 0 0-1.75-1.75h-7Z",clipRule:"evenodd"}),u.createElement("path",{fill:"#9B9B9B",fillRule:"evenodd",d:"M8.983 5.834v-1.75a1.983 1.983 0 0 0-3.967 0v1.75h3.967ZM7 1.167a2.917 2.917 0 0 0-2.917 2.916v2.684h5.833V4.083A2.917 2.917 0 0 0 7 1.166Z",clipRule:"evenodd"})),G4="_link_duydb_1",V4="_text_duydb_8",Ll={link:G4,text:V4};function K4({categoryId:e}){const t=z("category",e),n=js();return t?o.jsxs("a",{className:Ll.link,target:"_blank",rel:"noreferrer",href:new URL(us(n.search,e),Ze).href,draggable:!1,children:[o.jsx(Z4,{}),o.jsxs("span",{className:Ll.text,children:[o.jsx("span",{children:o.jsx(N,{id:"_.sidebar.title.my-lists"})})," ","> ",o.jsx("span",{children:t.name})]})]}):null}const af=x.memo(K4),of=u.memo(function(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:o.jsxs("g",{fill:"none",fillRule:"evenodd",children:[o.jsx("path",{fill:"currentColor",d:"M11.742 5.13a4.53 4.53 0 0 1 .951 2.78c0 2.538-2.084 4.603-4.644 4.603a4.07 4.07 0 0 1-.984-.114l.689-.667a.312.312 0 0 0 0-.455.32.32 0 0 0-.46 0l-1.526 1.48 1.51 1.642a.32.32 0 0 0 .46.016.312.312 0 0 0 .016-.455l-.837-.927c.36.081.738.13 1.116.13 2.92 0 5.3-2.358 5.3-5.252 0-1.155-.377-2.26-1.083-3.17a.338.338 0 0 0-.46-.066.345.345 0 0 0-.048.455zM8.295 1.667c0 .081.033.163.082.211l.837.911a5.56 5.56 0 0 0-1.165-.13c-2.92 0-5.3 2.358-5.3 5.252a5.15 5.15 0 0 0 1.132 3.236c.115.146.312.162.46.049.147-.114.164-.31.049-.456a4.565 4.565 0 0 1-.985-2.83c0-2.536 2.084-4.6 4.644-4.6.345 0 .706.048 1.034.113l-.69.683a.312.312 0 0 0 0 .455.32.32 0 0 0 .46 0l1.526-1.48L8.87 1.44a.32.32 0 0 0-.459-.016.292.292 0 0 0-.115.244z"}),o.jsx("path",{d:"M0 0h16v16H0z"}),o.jsx("g",{fill:"currentColor",fillRule:"nonzero",children:o.jsx("path",{d:"M8.05 12.313c2.45 0 4.443-1.976 4.443-4.402a4.33 4.33 0 0 0-.91-2.659.55.55 0 0 1 .098-.744.538.538 0 0 1 .727.11 5.352 5.352 0 0 1 1.125 3.293c0 3.005-2.47 5.452-5.5 5.452-.19 0-.385-.012-.58-.035l.442.49a.51.51 0 0 1-.017.74.518.518 0 0 1-.747-.024l-1.642-1.786.14-.135 1.525-1.478a.52.52 0 0 1 .74 0c.21.208.21.53-.001.74l-.413.4c.183.025.372.038.57.038zm4.843-4.402c0 2.647-2.174 4.802-4.844 4.802a4.26 4.26 0 0 1-1.032-.12l-.351-.087.26-.251.687-.665c.052-.052.052-.12 0-.171-.053-.053-.125-.053-.18.001l-1.386 1.345 1.38 1.501c.043.048.124.052.18-.002.047-.041.05-.118-.002-.17l-1.259-1.395.615.139c.364.082.725.125 1.072.125 2.81 0 5.1-2.269 5.1-5.052 0-1.11-.363-2.173-1.04-3.047-.045-.058-.123-.067-.171-.038-.05.044-.06.123-.017.189a4.73 4.73 0 0 1 .988 2.896zM8.237 2.02a.507.507 0 0 1-.142-.353c0-.161.063-.299.174-.386a.518.518 0 0 1 .748.023l1.642 1.786-.14.135-1.525 1.478a.52.52 0 0 1-.74 0 .512.512 0 0 1 0-.739l.412-.409a4.539 4.539 0 0 0-.617-.046c-2.45 0-4.444 1.976-4.444 4.402 0 .98.33 1.928.942 2.706a.514.514 0 0 1-.084.737.52.52 0 0 1-.738-.083 5.35 5.35 0 0 1-1.176-3.36c0-3.005 2.47-5.452 5.5-5.452.205 0 .414.013.625.037l-.437-.476zM10.1 3.074L8.72 1.572c-.043-.048-.123-.052-.186.008-.029.023-.039.044-.039.087 0 .028.012.059.03.076l1.263 1.374-.616-.132a5.353 5.353 0 0 0-1.123-.126c-2.81 0-5.1 2.269-5.1 5.052 0 1.14.377 2.219 1.09 3.112.044.057.115.064.18.014.056-.043.062-.11.014-.173A4.765 4.765 0 0 1 3.205 7.91c0-2.648 2.174-4.802 4.844-4.802.33 0 .692.042 1.073.118l.37.073-.957.948c-.053.052-.053.12 0 .171.053.053.124.053.18-.001L10.1 3.074z"})})]})})});function X4({time:e}){return o.jsx("time",{dateTime:e,className:"TaskIndicatorReminderIcon",children:e})}function cf(e,t,n){const r=$i(n),s=$i(r);switch(hh({dueDate:t,todayMidnight:r,tomorrowMidnight:s})){case zn.TODAY:return e.time;case zn.TOMORROW:return`${e.weekdayShort} ${e.time}`;case zn.UPCOMING:case zn.SOMEDAY:default:return e.date}}u.memo(function({dueDate:t,repeatingMethod:n,status:r,alert:s,now:a}){const{momentParams:i}=we(),c={alert:s,dueDate:t,repeatingMethod:n,status:r},l=ir.isRepeatReminder(c,a),d=l||ir.isOneTimeReminder(c),f=u.useMemo(()=>!d||t==null?null:je(t).format(cf(i,t,a)),[t,d,i,a]);return o.jsxs(u.Fragment,{children:[l?o.jsx("div",{className:"TaskIndicators__indicator",children:o.jsx(of,{})}):null,f==null?null:o.jsx("div",{className:"TaskIndicators__indicator",children:o.jsx(X4,{time:f})})]})});const q4=({task:e})=>{var h,m;const t=Rn(),{attachments:n}=M1(e.id),r=T1(e.id),s=Xt(pd.label.all),a=(m=(h=e==null?void 0:e.labels)==null?void 0:h.map(p=>s==null?void 0:s.dictionary[p]).filter(Go))!=null?m:[],{formatMessage:i,momentParams:c}=we(),l=e?ir.isRepeatReminder(e,t):!1,d=e?l||ir.isOneTimeReminder(e):!1,f=u.useMemo(()=>!d||(e==null?void 0:e.dueDate)==null?null:je(e.dueDate).format(cf(c,e.dueDate,t)),[d,c,t,e==null?void 0:e.dueDate]);return f==null&&!n.length&&r.checked+r.unchecked>0&&!a.length?null:o.jsxs("div",{className:$.indicatorLeft,children:[f!=null?o.jsx("span",{className:$.dueDate,children:f}):null,l?o.jsx("span",{className:$.indicatorCount,children:o.jsx(of,{})}):null,n.length>0?o.jsx("span",{className:$.indicatorCount,children:o.jsx("span",{className:B($.indicatorCountIcon,$.attachmentsIcon),children:o.jsx(Pd,{})})}):null,r.checked+r.unchecked===0?null:o.jsxs("span",{className:$.progress,children:[o.jsx("span",{className:$.indicatorCount,children:o.jsx("span",{className:B($.indicatorCountIcon,$.checklistsIcon),children:o.jsx(Ga,{label:i("_.tasks.subtasks"),children:o.jsx(Ko,{})})})}),r.checked,"/",r.checked+r.unchecked]}),a.length?o.jsx("div",{className:$.tags,children:a==null?void 0:a.map((p,v)=>o.jsx(Xo,{tag:p,size:"sm",shape:v>=3?"circle":"pill"},p.id))}):null]})},lf=({model:e,isDragging:t,isDragOverlay:n,onSelect:r,onStatusChange:s,onVisibilityStatusChange:a,className:i})=>{const{track:c}=it(),l=e.referencedObject,d=e.status===ge.CHECKED,f=u.useMemo(()=>qo(l.title,Jo),[l.title]),{isOpen:h,rootProps:m,open:p,close:v,renderMenu:g}=ru({enabled:e.status!==ge.CHECKED,onOpen(A){c("my_day_right_click_opened",{extra_str1:"anydo_task",extra_str2:A==="onContextMenu"?"right_click":"button"})}}),y=Qo(),_=A1(l.id),b=j1(),E=u.useCallback(A=>b({taskId:l.id,...A}),[b,l.id]),[S,T]=u.useState(!1),{open:j,modal:M}=c4({task:l,showMoveToBoard:!0}),C=u.useCallback(()=>{c("my_day_entry_dismissed",{extra_str1:e.referencedObjectId,extra_str3:"anydo_task"}),a==null||a(e,he.DISMISSED)},[e,a,c]),w=u.useCallback(()=>{const A=e.visibilityStatus===he.PINNED;c(A?"my_day_entry_unpinned":"my_day_entry_pinned",{extra_str1:e.referencedObjectId,extra_str3:"anydo_task"});const k=A?he.DEFAULT:he.PINNED;a==null||a(e,k)},[e,a,c]),[I,R]=u.useState(!1),L=ei(Er(()=>{n||R(!0)}),rf),P=qs();return o.jsxs(o.Fragment,{children:[o.jsxs(Mi,{...m,model:e,className:i,isDragging:t,isDragOverlay:n,isMenuOpen:h,onFileDragOver:()=>{c("task_opened_by_dragging_files_over",{extra_str1:l.id,extra_str2:"myday"}),r==null||r(l.id)},onClick:()=>{c("task_tapped",{extra_str1:l.id,extra_str2:"myday"}),r==null||r(l.id)},onMouseOver:L,onMouseLeave:()=>{L.cancel(),R(!1)},children:[o.jsx("div",{className:$.checkbox,children:o.jsx(cr,{theme:P?void 0:"secondary",checked:d,onClick:s?()=>{const A=d?ge.UNCHECKED:ge.CHECKED;s==null||s(e,A)}:void 0})}),o.jsxs("div",{className:$.content,children:[o.jsx("div",{className:$.breadcrumbs,children:o.jsx("span",{onClick:at,children:o.jsx(af,{categoryId:l.categoryId})})}),o.jsx("div",{className:$.titleWrapper,children:o.jsx("div",{className:$.title,"data-private":"lipsum",children:f})})]}),o.jsx(Fo.div,{className:$.indicators,animate:{height:I?"100%":"0"},children:o.jsx(q4,{task:l})}),o.jsx("div",{className:$.buttons,onClick:at,children:o.jsxs("div",{children:[!d&&o.jsx(se,{className:B($.button,$.isPinButton),theme:"faint",onClick:a?w:void 0,children:o.jsx(Ps,{})}),!d&&o.jsx(se,{theme:"faint",className:$.button,onClickNative:p,children:o.jsx($d,{})}),o.jsx(se,{className:$.button,theme:"faint",onClick:a?C:void 0,children:o.jsx(Ti,{})})]})})]}),o.jsx(D1,{task:l,isUserPremium:y,onUpdate:_,children:A=>o.jsx(o.Fragment,{children:g(o.jsx(y4,{model:l,hideMenu:v,showMyDay:!1,isPinned:e.visibilityStatus===he.PINNED,pinItem:w,openTags:()=>T(!0),openLists:j,openReminder:()=>A.isRepeatReminder?A.setCustomRepeateReminder({fromRef:null}):A.setCustomOneTimeReminder({fromRef:null})}))})}),M,o.jsx(Jn,{isVisible:S,onClose:()=>T(!1),children:o.jsx(N1,{closeEditLabelsModal:()=>T(!1),isPremium:y,showPremiumUpsell:!0,taskLabelsIds:l.labels||[],updateTaskLabels:E})})]})};function J4({card:e}){const[t,n]=u.useState(!1),r=u.useRef(null),s=u.useCallback(()=>{var h;(h=r.current)==null||h.destroy(),n(!1)},[]),a=Rn(),i=e.dueDate?gd(e.dueDate):null,c=mh(),{syncSections:l}=Rs(),d=l.get(e.sectionId);Rt(d);const f=u.useCallback(({dueDate:h,recurrence:m,userReminders:p})=>{c([{id:e.id,key:"dueDate",value:h?ph(h):null},{id:e.id,key:"recurrence",value:m},{id:e.id,key:"userReminders",value:p}])},[e.id,c]);return{open:u.useCallback(()=>{n(!0)},[]),modal:o.jsx(R1,{frameLess:!0,isVisible:t,onClose:s,children:o.jsx(I1,{ref:r,boardId:d.boardId,defaultSectionId:e.sectionId,now:a,dueDate:i,recurrence:e.recurrence,onChange:f,userReminders:e.userReminders})})}}const Q4="_showActions_cn0a5_1",e6="_isDragOverlay_cn0a5_1",t6="_buttons_cn0a5_7",n6="_actions_cn0a5_12",r6="_content_cn0a5_32",s6="_titleWrapper_cn0a5_36",a6="_cardNameBreadcrumbs_cn0a5_40",o6="_unread_cn0a5_54",i6="_markAsComplete_cn0a5_61",c6="_markAsCompleteIcon_cn0a5_73",l6="_markAsCompleteMessage_cn0a5_77",d6="_markAsCompleteButtons_cn0a5_81",u6="_boardEmoji_cn0a5_89",ze={showActions:Q4,isDragOverlay:e6,buttons:t6,actions:n6,content:r6,titleWrapper:s6,cardNameBreadcrumbs:a6,unread:o6,markAsComplete:i6,markAsCompleteIcon:c6,markAsCompleteMessage:l6,markAsCompleteButtons:d6,boardEmoji:u6},df=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.483 2.45a2.333 2.333 0 1 0 0 4.667 2.333 2.333 0 0 0 0-4.667Zm0 .934a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8Zm4.197 6.883A2.333 2.333 0 0 0 7.35 8.05H3.617l-.117.003a2.333 2.333 0 0 0-2.217 2.33v.934l.004.058a.467.467 0 0 0 .93-.058v-.934l.003-.095a1.4 1.4 0 0 1 1.397-1.304H7.35l.096.003a1.4 1.4 0 0 1 1.304 1.396v.934l.004.058a.467.467 0 0 0 .93-.058v-.934l-.004-.116Zm.485-1.806c.064-.25.319-.4.568-.335a2.333 2.333 0 0 1 1.747 2.14l.003.117v.934a.467.467 0 0 1-.93.058l-.003-.058v-.933a1.4 1.4 0 0 0-1.05-1.355.467.467 0 0 1-.335-.568Zm-1.3-5.936a.467.467 0 1 0-.23.905 1.4 1.4 0 0 1 0 2.712.467.467 0 0 0 .23.904 2.333 2.333 0 0 0 0-4.52Z",clipRule:"evenodd"})),f6="_link_duydb_1",h6="_text_duydb_8",Bl={link:f6,text:h6};function m6({sectionId:e}){const t=z("section",e),n=z("board",(t==null?void 0:t.boardId)||null),r=z("space",(n==null?void 0:n.spaceId)||null);return t?o.jsxs("a",{className:Bl.link,target:"_blank",rel:"noreferrer",href:new URL(Va(window.location.search,t.boardId),Ze).href,draggable:!1,children:[o.jsx(df,{}),o.jsxs("span",{className:Bl.text,children:[o.jsx("span",{children:r==null?void 0:r.name})," > ",o.jsx("span",{children:n==null?void 0:n.name})," > ",o.jsx("span",{children:t==null?void 0:t.name})]})]}):null}const uf=x.memo(m6),p6=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",...e,children:o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12 5.733C12 3.671 10.21 2 8 2S4 3.671 4 5.733c0 4.356-2 5.6-2 5.6h12s-2-1.244-2-5.6M10 14c-.344.413-.98.667-1.666.667-.687 0-1.322-.254-1.667-.667"})}),g6=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",...e,children:[o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.07,d:"M11.334 1.402 14 4.07l-2.666 2.667"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.07,d:"M2 8.133V6.799a2.667 2.667 0 0 1 2.667-2.666H13.2M4.667 14.599 2 11.933l2.667-2.667"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.07,d:"M14 7.867v1.334a2.667 2.667 0 0 1-2.666 2.666H2.8"})]}),v6=({card:e})=>{var l,d,f;const t=Rn(),n=Xt(pd.tag.all),r=(d=(l=e==null?void 0:e.tags)==null?void 0:l.map(h=>n==null?void 0:n.dictionary[h]).filter(Go))!=null?d:[],s=(e==null?void 0:e.dueDate)!=null?gd(e==null?void 0:e.dueDate):null,a=k1({dueDate:s,userReminders:(f=e==null?void 0:e.userReminders)!=null?f:Ka,now:t}),i=Xt(O1.countByCardId(e.id)),c=Xt(P1.countByCardId(e.id));return(e==null?void 0:e.dueDate)==null&&!i&&!c&&!(e!=null&&e.hasUnreadActivity)&&!(e!=null&&e.unreadChatMentionCount)&&!r.length?null:o.jsxs("div",{className:$.indicatorLeft,children:[s&&o.jsx($1,{buttonClassName:$.dueDate,cardId:e.id,dueDate:s,isEditable:!1,now:t,allowRecurrenceConfig:!1,showPassedDueDateAsOverdue:!1,recurrence:null,onChange:()=>{}}),s&&e.recurrence&&o.jsx(wt,{position:"top",text:o.jsx(L1,{dueDate:s,recurrence:e.recurrence}),children:o.jsx("span",{className:$.indicatorIcon,children:o.jsx(g6,{})})}),i>0?o.jsx("span",{className:$.indicatorCount,children:o.jsx("span",{className:B($.indicatorCountIcon,$.attachmentsIcon),children:o.jsx(Pd,{})})}):null,c>0&&o.jsxs("span",{className:$.progress,children:[o.jsx("span",{className:$.indicatorCount,children:o.jsx("span",{className:B($.indicatorCountIcon,$.checklistsIcon),children:o.jsx(Ko,{})})}),o.jsx(B1,{cardId:e.id})]}),a.length?o.jsx(U1,{reminders:a,children:o.jsx("span",{className:$.indicatorCount,children:o.jsx("span",{className:B($.indicatorCountIcon),children:o.jsx(p6,{})})})}):null,r.length?o.jsx("div",{className:$.tags,children:r==null?void 0:r.map((h,m)=>o.jsx(Xo,{tag:h,size:"sm",shape:m>=3?"circle":"pill"},h.id))}):null]})},ff=({model:e,isDragging:t,isDragOverlay:n,onHideActions:r,onSelect:s,onStatusChange:a,onVisibilityStatusChange:i,onUnreadClick:c,className:l})=>{var Dr,Di,Ni;const{track:d}=it(),f=e.status===ge.CHECKED,h=e.referencedObject,m=u.useMemo(()=>qo(h.name,Jo),[h.name]),p=F1(),{sections:v,syncSections:g}=Rs(),y=e.referencedObject?g.get(e.referencedObject.sectionId):null,{syncBoards:_}=dd(),b=y?_.get(y.boardId):null,{canEditCards:E,canArchiveCards:S}=H1(b),{boardMembers:T}=z1((Dr=b==null?void 0:b.id)!=null?Dr:""),j=gh(),M=b?j.get(b.spaceId):null,[C,w]=u.useState(!1),I=ei(Er(()=>{n||w(!0)}),rf),{isOpen:R,rootProps:L,open:P,close:A,renderMenu:k}=ru({enabled:e.status!==ge.CHECKED,onOpen(Ee){d("my_day_right_click_opened",{extra_str1:"anydo_card",extra_str2:Ee==="onContextMenu"?"right_click":"button"})}}),O=u.useMemo(()=>{var Ee;return b?(Ee=v.get(b.id))!=null?Ee:Ka:Ka},[b,v]),H=u.useCallback(()=>{!b||!e.referencedObject||sa(Y1,{boardId:b.id,card:e.referencedObject})},[b,e.referencedObject]),le=u.useCallback(()=>{!b||!e.referencedObject||sa(W1,{boardId:b.id,card:e.referencedObject,isEditable:E})},[b,E,e.referencedObject]),{open:X,modal:G}=J4({card:e.referencedObject}),W=u.useCallback(()=>{X(),d("card_time_date_picker_tapped",{extra_str1:e.referencedObject.id})},[e.referencedObject,X,d]),Ne=Z1(),Yt=u.useCallback(async()=>{const Ee=await sa(G1,{sections:O,initialSectionId:y.id});Ee!==void 0&&(Ne([h.id],Ee.sectionId),d("card_section_changed",{extra_str1:h.id,extra_str2:"myday_whats_next",extra_str3:Ee.sectionId}))},[h.id,Ne,y,O,d]),Te=u.useCallback(()=>vd("",b.id,h.id),[b,h.id]),te=u.useCallback(()=>{s==null||s(h.id,{activity:!0})},[h.id,s]),_e=u.useCallback(()=>{d("my_day_entry_dismissed",{extra_str1:e.referencedObjectId,extra_str3:"anydo_card"}),i==null||i(e,he.DISMISSED)},[e,i,d]),xe=u.useCallback(()=>{const Ee=e.visibilityStatus===he.PINNED;d(Ee?"my_day_entry_unpinned":"my_day_entry_pinned",{extra_str1:e.referencedObjectId,extra_str3:"anydo_card"});const $n=Ee?he.DEFAULT:he.PINNED;i==null||i(e,$n)},[e,i,d]),Wt=u.useCallback(Ee=>{c&&(Ee.stopPropagation(),d("card_activity_opened",{extra_str1:h.id,extra_str2:"myday_unread_indicator"}),c(h))},[c,h,d]),[ct,Zt]=u.useState(!1),tt=u.useCallback(()=>{Zt(!1),r==null||r(e)},[e,r]);u.useEffect(()=>{t&&tt()},[tt,t]),u.useEffect(()=>{ct&&d("my_day_entry_whats_next_shown",{extra_str1:e.referencedObjectId,extra_str3:"anydo_card"})},[ct,d,e]);const jr=u.useMemo(()=>{var Ri;const Ee=[];return(Ri=h.owners)==null||Ri.forEach(ta=>{const Ii=T.get(ta);Ii&&Ee.push(Ii)}),Pt.sortBy(Ee,ta=>ta.name)},[h==null?void 0:h.owners,T]),ea=qs();return e.referencedObject?o.jsxs(o.Fragment,{children:[o.jsxs(Mi,{...L,className:B(l,{[ze.showActions]:ct,[ze.isDragOverlay]:n}),model:e,isDragging:t,isDragOverlay:n,isMenuOpen:R,onFileDragOver:()=>{d("card_opened",{extra_str1:h.id,extra_str2:"myday_file_drag_over"}),s==null||s(h.id)},onClick:()=>{d("card_opened",{extra_str1:h.id,extra_str2:"myday"}),s==null||s(h.id)},onMouseOver:I,onMouseLeave:()=>{I.cancel(),w(!1)},children:[o.jsx("div",{className:$.checkbox,children:o.jsx(cr,{theme:ea?void 0:"secondary",checked:f,onClick:a?()=>{const Ee=f?ge.UNCHECKED:ge.CHECKED,$n=Ee===ge.CHECKED&&!h.isChecked&&E&&((M==null?void 0:M.showCheckboxForCards)===Li.Inside||(M==null?void 0:M.showCheckboxForCards)===Li.Everywhere);a==null||a(e,Ee,$n),$n?Zt(!0):tt()}:void 0})}),o.jsxs("div",{className:B($.content,ze.content),children:[o.jsx("div",{className:$.breadcrumbs,children:o.jsx("span",{onClick:at,children:o.jsx(uf,{sectionId:h.sectionId})})}),o.jsxs("div",{className:B($.titleWrapper,ze.titleWrapper),children:[o.jsx("div",{className:$.title,"data-private":"lipsum",children:m}),h.unreadChatMentionCount?o.jsx("div",{className:ze.unread,role:"button",onClick:Wt,children:o.jsx(V1,{count:h.unreadChatMentionCount})}):null]})]}),o.jsxs(Fo.div,{className:$.indicators,animate:{height:C&&!ct?"100%":"0"},children:[o.jsx(v6,{card:h}),(Di=h.owners)!=null&&Di.length?o.jsx(K1,{className:$.indicatorRight,members:jr,tooltipOffset:12,hoverDisabled:!0,maxMembers:3,size:X1.TASK_INDICATOR}):null]}),o.jsxs("div",{className:ze.actions,children:[o.jsx("div",{className:B($.breadcrumbs,ze.cardNameBreadcrumbs),children:o.jsxs("span",{children:[o.jsx(df,{className:ze.markAsCompleteIcon}),o.jsx("span",{children:h.name})]})}),o.jsxs("div",{className:ze.markAsComplete,children:[o.jsx("div",{className:ze.markAsCompleteMessage,children:o.jsx(N,{id:"MyDayEntryCard.mark-as-completed",values:{boardName:o.jsxs("span",{children:[o.jsx("span",{className:ze.boardEmoji,children:(Ni=b==null?void 0:b.emoji)!=null?Ni:o.jsx(fd,{})})," ",b==null?void 0:b.name]})}})}),o.jsxs("div",{className:ze.markAsCompleteButtons,onClick:at,children:[o.jsx(Xa,{size:"small",theme:"secondary",onClick:tt,children:o.jsx(N,{id:"_.buttons.no"})}),o.jsx(Xa,{size:"small",onClick:()=>{p([h.id],!0),tt()},children:o.jsx(N,{id:"_.buttons.yes"})})]})]})]}),o.jsx("div",{className:B($.buttons,ze.buttons),onClick:at,children:o.jsxs("div",{children:[!f&&o.jsx(se,{className:B($.button,$.isPinButton),theme:"faint",onClick:i?xe:void 0,children:o.jsx(Ps,{})}),!f&&o.jsx(se,{theme:"faint",className:$.button,onClickNative:P,children:o.jsx($d,{})}),o.jsx(se,{className:$.button,theme:"faint",onClick:i?_e:void 0,children:o.jsx(Ti,{})})]})})]}),G,k(o.jsx(q1,{canUserAchiveCard:S,model:e.referencedObject,canUserEditCard:E,showMyDay:!1,hideMenu:A,getCardUrl:Te,openTags:le,openAssign:H,openCalendar:W,openActivity:te,openSection:Yt,isPinned:e.visibilityStatus===he.PINNED,pinItem:xe}))]}):null},y6="_showActions_1cdvu_1",b6="_isDragOverlay_1cdvu_1",_6="_buttons_1cdvu_7",x6="_actions_1cdvu_12",E6="_content_1cdvu_27",w6="_checkboxBackButton_1cdvu_31",S6="_checkboxRoundProgress_1cdvu_35",C6="_actionsText_1cdvu_42",M6="_updateOnButton_1cdvu_49",T6="_actionsButtons_1cdvu_54",lt={showActions:y6,isDragOverlay:b6,buttons:_6,actions:x6,content:E6,checkboxBackButton:w6,checkboxRoundProgress:S6,actionsText:C6,updateOnButton:M6,actionsButtons:T6},A6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M13.598 9H4.402M9 4.402 4.402 9 9 13.598"})),j6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"#F62B54",d:"M4.498 18.04a2.508 2.508 0 0 1-2.185-1.268 2.425 2.425 0 0 1 .068-2.496l4.501-7.068a2.51 2.51 0 0 1 2.222-1.207 2.505 2.505 0 0 1 2.15 1.326c.42.793.367 1.747-.135 2.492L6.62 16.887a2.509 2.509 0 0 1-2.123 1.154Z"}),u.createElement("path",{fill:"#FC0",d:"M12.218 18.04a2.5 2.5 0 0 1-2.181-1.265 2.418 2.418 0 0 1 .068-2.49l4.492-7.051A2.505 2.505 0 0 1 16.821 6c.915.02 1.745.532 2.165 1.333a2.417 2.417 0 0 1-.163 2.504l-4.49 7.051a2.505 2.505 0 0 1-2.115 1.151Z"}),u.createElement("path",{fill:"#00CA72",d:"M19.765 18.1c1.28 0 2.317-1.016 2.317-2.269 0-1.253-1.037-2.268-2.317-2.268-1.28 0-2.317 1.015-2.317 2.268s1.038 2.268 2.317 2.268Z"})),D6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"#E44332",fillRule:"evenodd",d:"M4.3 5.949C4.3 4.876 5.176 4 6.247 4v.01h11.702c1.072 0 1.947.877 1.947 1.949v11.692A1.953 1.953 0 0 1 17.95 19.6H6.247A1.953 1.953 0 0 1 4.3 17.651v-2.618c.652.39 2.23 1.31 2.617 1.534a.688.688 0 0 0 .69 0l6.263-3.65c.134-.082.144-.32-.01-.402-.09-.048-.221-.123-.338-.19-.084-.049-.16-.093-.208-.119a.479.479 0 0 0-.485.01l-.67.39c-1.386.808-4.447 2.59-4.583 2.662a.661.661 0 0 1-.65 0L4.3 13.723v-1.34c.652.39 2.23 1.31 2.617 1.535a.664.664 0 0 0 .69-.01l6.263-3.65c.134-.083.144-.32-.01-.403-.09-.048-.221-.123-.338-.19l-.208-.12a.479.479 0 0 0-.485.011l-.67.39c-1.386.808-4.447 2.59-4.583 2.662a.662.662 0 0 1-.65 0L4.3 11.063V9.888c.652.39 2.23 1.31 2.617 1.534a.664.664 0 0 0 .69-.01l6.263-3.65c.134-.082.144-.32-.01-.402-.09-.048-.221-.123-.338-.19-.084-.05-.16-.093-.208-.12a.479.479 0 0 0-.485.011l-.67.39c-1.386.808-4.447 2.59-4.583 2.662a.662.662 0 0 1-.65 0L4.3 8.568v-2.62Z",clipRule:"evenodd"})),N6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"#2684FF",d:"M19.331 4.43h-7.71c0 1.862 1.56 3.377 3.476 3.377h1.427v1.32c0 1.862 1.56 3.377 3.476 3.377V5.08c0-.368-.29-.65-.669-.65Z"}),u.createElement("path",{fill:"url(#paint0_linear_1270_2838)",d:"M15.52 8.154H7.81c0 1.86 1.56 3.376 3.477 3.376h1.426v1.342c0 1.861 1.56 3.376 3.476 3.376V8.803a.66.66 0 0 0-.668-.65Z"}),u.createElement("path",{fill:"url(#paint1_linear_1270_2838)",d:"M11.71 11.898H4c0 1.861 1.56 3.376 3.476 3.376h1.427v1.32c0 1.862 1.56 3.377 3.476 3.377v-7.424a.661.661 0 0 0-.669-.65Z"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"paint0_linear_1270_2838",x1:16.025,x2:12.845,y1:8.172,y2:11.548,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.176,stopColor:"#0052CC"}),u.createElement("stop",{offset:1,stopColor:"#2684FF"})),u.createElement("linearGradient",{id:"paint1_linear_1270_2838",x1:12.429,x2:8.746,y1:11.923,y2:15.612,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.176,stopColor:"#0052CC"}),u.createElement("stop",{offset:1,stopColor:"#2684FF"})))),R6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"url(#paint0_linear_925_578)",fillRule:"evenodd",d:"M18.05 4.39H6.34a1.95 1.95 0 0 0-1.95 1.95v11.71A1.95 1.95 0 0 0 6.34 20h11.71A1.95 1.95 0 0 0 20 18.05V6.34a1.95 1.95 0 0 0-1.95-1.95Zm-1.015 2.03h-2.889a.936.936 0 0 0-.936.935v4.957c0 .517.42.936.936.936h2.889a.936.936 0 0 0 .936-.936V7.355a.936.936 0 0 0-.936-.936Zm-9.68 0h2.888c.517 0 .937.418.937.935v8.86c0 .517-.42.936-.937.936H7.355a.936.936 0 0 1-.936-.936v-8.86c0-.517.42-.936.936-.936Z",clipRule:"evenodd"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"paint0_linear_925_578",x1:12.301,x2:12.301,y1:4.301,y2:19.959,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#0079BF"}),u.createElement("stop",{offset:1,stopColor:"#0079BF"})))),I6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"url(#paint0_radial_925_581)",d:"M17.301 12.472c-.731 0-1.446.22-2.054.635a3.75 3.75 0 0 0-1.362 1.689 3.826 3.826 0 0 0-.21 2.175c.143.73.495 1.4 1.012 1.927a3.677 3.677 0 0 0 1.894 1.03c.717.145 1.46.07 2.136-.215a3.713 3.713 0 0 0 1.66-1.386A3.812 3.812 0 0 0 21 16.236a3.815 3.815 0 0 0-.28-1.442 3.76 3.76 0 0 0-.801-1.222 3.685 3.685 0 0 0-1.201-.816 3.635 3.635 0 0 0-1.417-.284Zm-9.603 0c-.731 0-1.446.22-2.054.634a3.75 3.75 0 0 0-1.362 1.69 3.827 3.827 0 0 0-.21 2.174c.142.73.494 1.401 1.011 1.928a3.679 3.679 0 0 0 1.894 1.03c.717.145 1.46.07 2.136-.215a3.713 3.713 0 0 0 1.66-1.386 3.812 3.812 0 0 0 .623-2.091 3.814 3.814 0 0 0-.28-1.442 3.761 3.761 0 0 0-.8-1.222 3.685 3.685 0 0 0-1.202-.816 3.635 3.635 0 0 0-1.416-.284Zm8.507-4.708c0 .745-.217 1.473-.623 2.092a3.714 3.714 0 0 1-1.66 1.387c-.676.285-1.42.36-2.137.215a3.68 3.68 0 0 1-1.895-1.03A3.786 3.786 0 0 1 8.878 8.5a3.827 3.827 0 0 1 .21-2.176 3.752 3.752 0 0 1 1.363-1.69 3.653 3.653 0 0 1 4.672.466c.344.35.617.765.802 1.222.186.457.28.947.28 1.442Z"}),u.createElement("defs",null,u.createElement("radialGradient",{id:"paint0_radial_925_581",cx:0,cy:0,r:1,gradientTransform:"matrix(11.2689 0 0 10.6029 12.514 12.542)",gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFB900"}),u.createElement("stop",{offset:.6,stopColor:"#F95D8F"}),u.createElement("stop",{offset:1,stopColor:"#F95353"})))),k6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"url(#paint0_linear_935_2522)",d:"m5.31 16.1 2.587-1.982c1.375 1.794 2.836 2.621 4.462 2.621 1.617 0 3.036-.817 4.35-2.597l2.624 1.934C17.44 18.644 15.085 20 12.36 20c-2.718 0-5.095-1.348-7.05-3.9Z"}),u.createElement("path",{fill:"url(#paint1_linear_935_2522)",d:"m12.35 7.484-4.606 3.969-2.13-2.47 6.746-5.812 6.692 5.817-2.14 2.46-4.562-3.965Z"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"paint0_linear_935_2522",x1:5.309,x2:19.333,y1:18.118,y2:18.118,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#8930FD"}),u.createElement("stop",{offset:1,stopColor:"#49CCF9"})),u.createElement("linearGradient",{id:"paint1_linear_935_2522",x1:5.614,x2:19.052,y1:8.803,y2:8.803,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF02F0"}),u.createElement("stop",{offset:1,stopColor:"#FFC800"})))),hf={trello:o.jsx(R6,{}),asana:o.jsx(I6,{}),clickup:o.jsx(k6,{}),monday:o.jsx(j6,{}),todoist:o.jsx(D6,{}),jira:o.jsx(N6,{})},O6="_icon_17wis_1",P6="_link_17wis_10",$6="_text_17wis_14",Oa={icon:O6,link:P6,text:$6};function L6({model:e}){const{provider:t,objectUrl:n,board:r,section:s}=e;return o.jsxs("a",{href:n,className:Oa.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx("div",{className:Oa.icon,children:hf[t]}),o.jsx("span",{className:Oa.text,children:r&&s?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:r.name}),o.jsx("span",{children:">"}),o.jsx("span",{children:s.name})]}):t?o.jsx("span",{children:o.jsx(N,{id:`_.external.${t}`})}):null})]})}const mf=x.memo(L6),B6=6,pf=({model:e,isDragging:t,isDragOverlay:n,onStatusChange:r,onVisibilityStatusChange:s,onSelect:a,onHideActions:i,className:c})=>{var I,R,L;const{formatMessage:l}=we(),{track:d}=it(),f=e.status===ge.CHECKED,h=u.useMemo(()=>{var P,A;return qo((A=(P=e.objectInfo)==null?void 0:P.name)!=null?A:"",Jo)},[(I=e.objectInfo)==null?void 0:I.name]),[m,p]=u.useState(!1),[v,g]=u.useState("idle"),y=u.useCallback(()=>{p(!1),i==null||i(e)},[e,i]),_=u.useCallback(()=>{y()},[y]),b=u.useCallback(()=>{y()},[y]),E=u.useCallback(()=>{d("my_day_entry_dismissed",{extra_str1:e.referencedObjectId,extra_str3:"external_card"}),s==null||s(e,he.DISMISSED)},[e,s,d]),S=u.useCallback(()=>{const P=e.visibilityStatus===he.PINNED;d(P?"my_day_entry_unpinned":"my_day_entry_pinned",{extra_str1:e.referencedObjectId,extra_str3:"external_card"});const A=P?he.DEFAULT:he.PINNED;s==null||s(e,A)},[e,s,d]),T=u.useCallback(P=>{P.stopPropagation()},[]),j=u.useCallback(()=>{var P;g("idle"),(P=e.objectInfo)!=null&&P.objectUrl&&Ge(e.objectInfo.objectUrl)},[(R=e.objectInfo)==null?void 0:R.objectUrl]),M=u.useCallback(()=>{g(P=>P==="running"?"paused":P)},[]),C=u.useCallback(()=>{g(P=>P==="paused"?"running":P)},[]);u.useEffect(()=>{t&&(y(),g("idle"))},[y,t]),u.useEffect(()=>{m&&d("my_day_entry_whats_next_shown",{extra_str1:e.referencedObjectId,extra_str3:"external_card"})},[m,d,e]);const w=qs();return o.jsxs(Mi,{model:e,isDragging:t,isDragOverlay:n,className:B(c,{[lt.showActions]:m,[lt.isDragOverlay]:n}),onClick:m?void 0:()=>{a==null||a(e.id)},children:[o.jsxs("div",{className:$.checkbox,children:[!m&&o.jsx(cr,{theme:w?void 0:"secondary",checked:f,onClick:r?()=>{const P=f?ge.UNCHECKED:ge.CHECKED;r==null||r(e,P,!0),P===ge.CHECKED?(p(!0),g("running")):i==null||i(e)}:void 0}),m&&o.jsx(bv,{className:lt.checkboxRoundProgress,paused:v==="paused",duration:B6,onAnimationEnd:_,isVisible:v!=="idle",size:18,children:o.jsx("div",{className:lt.checkboxBackButton,onClick:b,children:o.jsx(A6,{})})})]}),o.jsxs("div",{className:B($.content,lt.content),children:[o.jsx("div",{className:$.breadcrumbs,children:o.jsx("span",{onClick:at,children:e.objectInfo&&o.jsx(mf,{model:e.objectInfo})})}),o.jsx("div",{className:$.titleWrapper,children:o.jsx("div",{className:$.title,"data-private":"lipsum",children:h})})]}),o.jsxs("div",{className:lt.actions,children:[o.jsx("div",{className:lt.actionsText,children:o.jsx(J1,{children:l("MyDayEntry.cardCompleteTitle")})}),o.jsx("div",{className:lt.actionsButtons,onClick:T,onMouseEnter:M,onMouseLeave:C,children:o.jsx(Q1,{className:lt.updateOnButton,onClick:j,children:o.jsx(N,{id:"_.external.update-on-provider",values:{provider:l(`_.external.${(L=e.objectInfo)==null?void 0:L.provider}`)}})})})]}),o.jsx("div",{className:B($.buttons,lt.buttons),onClick:at,children:o.jsxs("div",{children:[!f&&o.jsx(se,{className:B($.button,$.isPinButton),theme:"faint",onClick:s?S:void 0,children:o.jsx(Ps,{})}),o.jsx(se,{className:$.button,theme:"faint",onClick:s?E:void 0,children:o.jsx(Ti,{})})]})})]})},gf=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.5 6.003a.8.8 0 0 0-1.6-.006l-.02 4.878-4.835-.018a.8.8 0 1 0-.006 1.6l4.836.018-.019 4.879a.8.8 0 0 0 1.6.006l.019-4.879 4.92.019a.8.8 0 0 0 .007-1.6l-4.921-.019.018-4.878Z",clipRule:"evenodd"})),U6="_shortcut_mfunu_1",F6="_isDragOverlay_mfunu_22",H6="_isPlaceholder_mfunu_31",z6="_title_mfunu_40",Y6="_addIcon_mfunu_49",W6="_content_mfunu_58",Z6="_counter_mfunu_62",Gt={shortcut:U6,isDragOverlay:F6,isPlaceholder:H6,title:z6,addIcon:Y6,content:W6,counter:Z6};function vr({name:e,count:t,className:n,isDragOverlay:r,isDragging:s,onClick:a}){return o.jsxs("div",{className:B(Gt.shortcut,n,{[Gt.isPlaceholder]:s,[Gt.isDragOverlay]:r}),onClick:()=>a==null?void 0:a(),children:[o.jsx("div",{className:Gt.addIcon,children:o.jsx(gf,{})}),o.jsx("div",{className:Gt.content,children:o.jsxs("div",{className:B(Gt.title),"data-private":"lipsum",children:[e==="from_yesterday"?o.jsx(N,{id:"MyDayShortcut.fromYesterday"}):null,e==="due_today"?o.jsx(N,{id:"MyDayShortcut.dueToday"}):null]})}),o.jsx(em,{className:Gt.counter,count:t})]})}const No={from_yesterday:"@shortcuts/from_yesterday",due_today:"@shortcuts/due_today"};vr.Sortable=function({name:t,models:n,onClick:r}){const s={type:"shortcut",name:t,models:n},{listeners:a,setNodeRef:i,isDragging:c,transform:l,transition:d}=Is({id:No[t],data:s,animateLayoutChanges:ks}),f={transform:Os.Transform.toString(l),transition:d!=null?d:void 0};return o.jsx("div",{ref:i,...a,style:f,children:o.jsx(vr,{name:t,count:n.length,isDragging:c,onClick:()=>r(t,n)})})};function G6(){return o.jsx(o.Fragment,{})}const V6=({children:e,message:t})=>{const n=Nn(),r=x.useCallback(()=>{n.set({id:$t(),theme:Qt.ERROR,message:t||o.jsx(N,{id:"_.errors.unknown.error-occoured"}),actionsId:["DISMISS"],renderButton:()=>o.jsx(N,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})},[t,n]);return o.jsx(ti,{FallbackComponent:G6,onError:r,children:e})},vf=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.91 10.102c.687 0 1.243.533 1.243 1.191s-.556 1.191-1.243 1.191c-.686 0-1.243-.533-1.243-1.19 0-.659.557-1.192 1.243-1.192Zm0-3.711c.687 0 1.243.533 1.243 1.191S8.597 8.773 7.91 8.773c-.686 0-1.243-.533-1.243-1.19 0-.659.557-1.192 1.243-1.192Zm1.248-2.533c0-.658-.557-1.192-1.243-1.192-.687 0-1.243.534-1.243 1.192 0 .657.556 1.19 1.243 1.19.686 0 1.243-.533 1.243-1.19Z",clipRule:"evenodd"})),K6=u.createContext({}),Qs=()=>{const e=u.useContext(K6);if(e===void 0)throw new Error("useMyDaySuggestionsFilter hook must be used within a MyDaySuggestionsFilterProvider component");return e},X6="_tooltip_1wyse_1",q6="_tabContent_1wyse_9",Pa={tooltip:X6,tabContent:q6},J6="MAIN_MENU",Q6=["Back","Save"],e_=({from:e,possibleTags:t,isMenuVisible:n,objectType:r,onExcludeTag:s,onExcludeCard:a,onExcludeBoard:i,onExcludeSection:c,onExcludeTask:l,onExcludeCategory:d,onCloseMenu:f},h)=>{const[m,p]=x.useState(J6),{updateFilter:v,filteredTags:g}=Qs(),y=x.useRef(null),[_,b]=x.useState([]);_n(x.useMemo(()=>[y,e],[e]),f);const E=at;function S(M){switch(M){case"Back":p("TASK_MENU");break;case"Save":f(),v("tag",yh([...g,..._]));break}}const T=M=>{switch(M){case"Back":return o.jsx(N,{id:"_.buttons.back"});case"Save":return o.jsx(N,{id:"_.buttons.save"});default:return null}},j=x.useCallback(M=>{_.includes(M)?b(_.filter(C=>C!==M)):b([M,..._])},[_]);return x.useEffect(()=>{g&&t&&b(t.filter(M=>!g.includes(M.id)).map(M=>M.id))},[g]),x.useLayoutEffect(()=>{p("MAIN_MENU")},[n]),o.jsx(_r,{from:e,isVisible:n,position:"bottom-start",children:o.jsx("div",{ref:M=>{M&&(y.current=M,h&&(h.current=M))},onPointerDown:E,onClick:M=>M.stopPropagation(),className:B(Pa.tooltip,tm),children:o.jsxs(yd,{active:m,children:[o.jsx(qn,{label:"MAIN_MENU",render:()=>o.jsxs(fe.Content,{children:[o.jsx(fe.Item,{onClick:r==="card"?a:l,children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestTask"})}),r==="card"&&o.jsx(fe.Item,{withArrow:!0,onClick:()=>p("TASK_MENU"),children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestTasks"})}),r==="task"&&o.jsx(fe.Item,{onClick:d,children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestList"})})]})}),o.jsxs(qn,{label:"TASK_MENU",children:[o.jsx(u2,{label:o.jsx(N,{id:"_.buttons.back"}),onBack:()=>p("MAIN_MENU")}),o.jsxs(fe.Content,{children:[o.jsx(fe.Item,{onClick:i,children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestBoard"})}),o.jsx(fe.Item,{onClick:c,children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestSection"})}),t.length===1&&o.jsx(fe.Item,{onClick:()=>s(t[0].id),children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestTag"})}),t.length>1&&o.jsx(fe.Item,{withArrow:!0,onClick:()=>p("TAGS_MENU"),children:o.jsx(N,{id:"MyDaySuggestionActionModal.doNotSuggestTags"})})]})]}),o.jsx(qn,{label:"TAGS_MENU",render:()=>o.jsx(Ho,{active:"",children:o.jsxs(zo,{label:"",children:[o.jsx(Yo,{render:()=>o.jsx(fe.Content,{className:Pa.tabContent,children:t.map(M=>o.jsx(fe.Item,{accessory:_.includes(M.id)?o.jsx("div",{className:Pa.checkIcon,children:o.jsx(nm,{})}):void 0,onClickNative:C=>{C.stopPropagation(),j(M.id)},children:o.jsx(Xo,{tag:M})}))})}),o.jsx(vh,{options:Q6,disabledOptions:[],renderButton:T,onClick:S})]})})})]})})})},yf=x.forwardRef(e_),t_="_checkIcon_mvttt_1",n_="_dotsButton_mvttt_5",bf={checkIcon:t_,dotsButton:n_},r_=({cardId:e,isMenuVisible:t,setIsMenuVisible:n})=>{const r=z("card",e);Rt(r);const s=z("section",r==null?void 0:r.sectionId);Rt(s);const a=z("board",s.boardId);Rt(a);const{sortedTagsList:i}=rm((a==null?void 0:a.id)||null),{updateFilter:c}=Qs(),l=x.useMemo(()=>i.filter(_=>(r.tags||[]).includes(_.id)),[r,i]),d=x.useRef(null),f=x.useRef(null),h=x.useCallback(()=>{c("board",[s.boardId]),n(!1)},[s,c,n]),m=x.useCallback(()=>{c("section",[r.sectionId]),n(!1)},[r,c,n]),p=x.useCallback(()=>{c("card",[r.id]),n(!1)},[r,c,n]),v=x.useCallback(_=>{c("tag",[_]),n(!1)},[c,n]),g=x.useCallback(_=>{_.stopPropagation(),n(b=>!b)},[n]),y=x.useCallback(()=>n(!1),[n]);return ko(["pointerdown","wheel"],[d,f],t?y:void 0),o.jsxs(o.Fragment,{children:[o.jsx(se,{className:bf.dotsButton,ref:d,onClickNative:g,children:o.jsx(vf,{})}),o.jsx(yf,{ref:f,from:d,objectType:"card",possibleTags:l,isMenuVisible:t,onCloseMenu:y,onExcludeBoard:h,onExcludeSection:m,onExcludeCard:p,onExcludeTag:v,onExcludeCategory:Pt.noop,onExcludeTask:Pt.noop})]})},s_=({taskId:e,isMenuVisible:t,setIsMenuVisible:n})=>{const r=z("task",e);Rt(r);const s=z("category",r.categoryId);Rt(s);const{updateFilter:a}=Qs(),i=x.useRef(null),c=x.useRef(null),l=x.useCallback(()=>{a("task",[e]),n(!1)},[e,a,n]),d=x.useCallback(()=>{a("category",[s.id]),n(!1)},[s,a,n]),f=x.useCallback(m=>{m.stopPropagation(),n(p=>!p)},[n]),h=x.useCallback(()=>n(!1),[n]);return ko(["pointerdown","wheel"],[i,c],t?h:void 0),o.jsxs(o.Fragment,{children:[o.jsx(se,{className:bf.dotsButton,ref:i,onClickNative:f,children:o.jsx(vf,{})}),o.jsx(yf,{ref:c,from:i,possibleTags:[],objectType:"task",isMenuVisible:t,onCloseMenu:h,onExcludeBoard:ht,onExcludeSection:ht,onExcludeCard:ht,onExcludeTag:ht,onExcludeCategory:d,onExcludeTask:l})]})},a_="_suggestion_dag52_1",o_="_isDragOverlay_dag52_22",i_="_isMenuVisible_dag52_23",c_="_isPlaceholder_dag52_32",l_="_title_dag52_41",d_="_breadcrumbs_dag52_50",u_="_addIcon_dag52_78",f_="_content_dag52_87",h_="_action_dag52_94",m_="_actionButton_dag52_102",p_="_cause_dag52_112",nt={suggestion:a_,isDragOverlay:o_,isMenuVisible:i_,isPlaceholder:c_,title:l_,breadcrumbs:d_,addIcon:u_,content:f_,action:h_,actionButton:m_,cause:p_};function g_({model:e,isDragging:t,isDragOverlay:n,className:r,onClick:s}){const{referencedObjectType:a,cause:i,referencedObject:c}=e,[l,d]=x.useState(!1),[f,h]=x.useMemo(()=>{if(a===ye.ANYDO_TASK){const m=c;return[m.title,o.jsx(af,{categoryId:m.categoryId})]}if(a===ye.ANYDO_CARD){const m=c;return[m.name,o.jsx(uf,{sectionId:m.sectionId})]}if(a===ye.EXTERNAL_CARD){const m=c;return[m.name,o.jsx(mf,{model:m})]}return[]},[a,c]);return f?o.jsxs("div",{className:B(nt.suggestion,r,{[nt.isPlaceholder]:t,[nt.isDragOverlay]:n,[nt.isMenuVisible]:l}),onClick:s?()=>s(e):void 0,children:[o.jsx("div",{className:nt.addIcon,children:o.jsx(gf,{})}),o.jsxs("div",{className:nt.content,children:[o.jsx("div",{className:B(nt.breadcrumbs),"data-private":"lipsum",onClick:at,children:h}),o.jsx("div",{className:B(nt.title),"data-private":"lipsum",children:f}),i&&o.jsx("div",{className:nt.cause,children:i})]}),o.jsx("div",{className:nt.action,children:o.jsx("div",{className:nt.actionButton,children:o.jsxs(V6,{children:[a===ye.ANYDO_CARD&&o.jsx(r_,{cardId:c.id,isMenuVisible:l,setIsMenuVisible:d}),a===ye.ANYDO_TASK&&o.jsx(s_,{taskId:c.id,isMenuVisible:l,setIsMenuVisible:d})]})})})]}):null}const _f=x.memo(g_),v_=({active:e,collisionRect:t,droppableContainers:n,...r})=>{const s=e.data.current;let a=[];return s.type==="suggestion"||s.type==="shortcut"?(a=n.filter(i=>{const c=i.data.current.accepts;return Array.isArray(c)&&c.includes(s.type)}),am({...r,active:e,collisionRect:t,droppableContainers:a})):(a=n.filter(i=>{const c=i.data.current;return!(c.type==="myDayEntry"&&(c.model.visibilityStatus===he.PINNED||c.model.status===ge.CHECKED))}),Ad({...r,active:e,collisionRect:t,droppableContainers:a}))};function y_({onEntryReposition:e,children:t}){const{createMyDayEntry:n}=zt(),{track:r}=it(),[s,a]=x.useState(null),i=x.useCallback(f=>{a(f.active)},[]),c=x.useCallback(f=>{a(null);const{active:h,over:m}=f;if(!m)return;const p=h.data.current;if(!p)return;p.type==="myDayEntry"&&(r("my_day_entry_drag_dropped"),e(h.id,m.id));const v=m==null?void 0:m.data.current;if(p.type==="suggestion"&&(v!=null&&v.accepts.includes("suggestion"))){const{model:g,suggestionPosition:y,areSuggestionsFiltered:_}=p;n({referencedObjectId:g.referencedObjectId,referencedObjectType:g.referencedObjectType,objectInfo:g.objectInfo,source:"suggestion",suggestionPosition:y,areSuggestionsFiltered:_})}if(p.type==="shortcut"&&(v!=null&&v.accepts.includes("shortcut")))for(const g of p.models)n({referencedObjectId:g.referencedObjectId,referencedObjectType:g.referencedObjectType,objectInfo:g.objectInfo,source:"suggestion_shortcut"})},[n,e,r]),l=x.useMemo(()=>{const f=s==null?void 0:s.data.current;if(!f)return null;const h={"--dragLayer__anim-duration":`${ra.duration}ms`,"--dragLayer__anim-easing":ra.easing};if(f.type==="myDayEntry")switch(f.model.referencedObjectType){case ye.ANYDO_TASK:return o.jsx("div",{style:h,children:o.jsx(lf,{model:f.model,isDragOverlay:!0,className:"MyDayRoute__myDayEntry__dragOverlayItem"})});case ye.ANYDO_CARD:return o.jsx("div",{style:h,children:o.jsx(ff,{model:f.model,isDragOverlay:!0,className:"MyDayRoute__myDayEntry__dragOverlayItem"})});default:return o.jsx("div",{style:h,children:o.jsx(pf,{model:f.model,isDragOverlay:!0,className:"MyDayRoute__myDayEntry__dragOverlayItem"})})}return f.type==="suggestion"?o.jsx("div",{style:h,children:o.jsx(_f,{model:f.model,isDragOverlay:!0,className:"MyDayRoute__myDayEntry__dragOverlayItem"})}):f.type==="shortcut"?o.jsx("div",{style:h,children:o.jsx(vr,{name:f.name,count:f.models.length,isDragOverlay:!0,className:"MyDayRoute__myDayEntry__dragOverlayItem"})}):null},[s==null?void 0:s.data]),d=x.useMemo(()=>{const f=s==null?void 0:s.data.current;return f==null?void 0:f.type},[s==null?void 0:s.data]);return o.jsxs(Cd,{sensors:Md(Td()),collisionDetection:v_,onDragStart:i,onDragEnd:c,measuring:jd,children:[t(d),o.jsx(bh,{type:_h.DRAG_LAYER,children:o.jsx("div",{className:B("MyDayRoute--theme",l?"MyDayRoute__item--isDragged":void 0),children:o.jsx(sm,{dropAnimation:ra,children:l})})})]})}const b_=x.memo(y_),__=10,x_=({now:e})=>{var c;const{userEmail:t,userDetails:n}=xr(),{myDayEntries:r}=zt(),s=x.useMemo(()=>{const l=new Date(e).getHours(),d=om((n==null?void 0:n.name)||"")||im(t)[0];return l<6?o.jsx(N,{id:d?"MyDayRouteTitle.night.userName":"MyDayRouteTitle.night",values:{userName:d}}):l<12?o.jsx(N,{id:d?"MyDayRouteTitle.morning.userName":"MyDayRouteTitle.morning",values:{userName:d}}):l<17?o.jsx(N,{id:d?"MyDayRouteTitle.afternoon.userName":"MyDayRouteTitle.afternoon",values:{userName:d}}):l<20?o.jsx(N,{id:d?"MyDayRouteTitle.evening.userName":"MyDayRouteTitle.evening",values:{userName:d}}):o.jsx(N,{id:d?"MyDayRouteTitle.night.userName":"MyDayRouteTitle.night",values:{userName:d}})},[e,n==null?void 0:n.name,t]),a=x.useMemo(()=>Math.floor(Math.random()*__),[]),i=x.useMemo(()=>{var l;return(l=n==null?void 0:n.webConfig)!=null&&l.addedFirstMyDayEntry||r.length>0?`MyDayRouteTitle.rotatingSubtitle.${a}`:"MyDayRouteTitle.subTitle"},[r.length,(c=n==null?void 0:n.webConfig)==null?void 0:c.addedFirstMyDayEntry,a]);return o.jsxs("div",{className:"MyDayRouteTitle",children:[o.jsxs("div",{className:"MyDayRouteTitle__title","data-private":"lipsum",children:[s,o.jsx("span",{className:"MyDayRouteTitle__title--end",children:"."})]}),o.jsx("div",{className:"MyDayRouteTitle__subtitle",children:o.jsx(N,{id:i})})]})},E_=x.memo(x_),w_="MyDayDroppableContent";function S_({isActive:e,className:t,children:n}){const r={accepts:["suggestion","shortcut"]},{setNodeRef:s,isOver:a}=cm({id:w_,data:r});return o.jsxs("div",{ref:s,className:B("MyDayDroppableContent",t,{"MyDayDroppableContent--isActive":e,"MyDayDroppableContent--isOver":a}),children:[o.jsx("div",{className:"MyDayDroppableContent__dropZone",children:o.jsx("span",{children:o.jsx(N,{id:"MyDayDroppableContent.title"})})}),n]})}const C_=x.memo(S_),M_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:19,height:14,fill:"none",viewBox:"0 0 19 14",...e},u.createElement("path",{fill:"currentColor",d:"M4.241 1.108a.61.61 0 0 1 .192.441.61.61 0 0 1-.192.442 7.071 7.071 0 0 0-1.612 2.298 6.792 6.792 0 0 0-.566 2.71c0 .93.192 1.852.566 2.711a7.07 7.07 0 0 0 1.612 2.298.61.61 0 0 1 .184.44.61.61 0 0 1-.192.437.673.673 0 0 1-.459.182.674.674 0 0 1-.461-.175c-3.417-3.254-3.417-8.53 0-11.784a.673.673 0 0 1 .463-.183c.174 0 .342.066.465.183Zm11.446 0c3.417 3.254 3.417 8.53 0 11.785a.675.675 0 0 1-.912-.016.61.61 0 0 1-.192-.43.609.609 0 0 1 .176-.438 7.07 7.07 0 0 0 1.613-2.298c.374-.86.566-1.78.566-2.71 0-.931-.192-1.852-.566-2.712a7.07 7.07 0 0 0-1.613-2.298.627.627 0 0 1-.208-.446.6.6 0 0 1 .192-.453.66.66 0 0 1 .475-.183.684.684 0 0 1 .469.199ZM6.716 3.464a.61.61 0 0 1 .191.442.61.61 0 0 1-.191.442 3.743 3.743 0 0 0-.854 1.216 3.596 3.596 0 0 0 0 2.871c.198.455.488.869.854 1.217a.609.609 0 0 1 .176.437.61.61 0 0 1-.193.43.675.675 0 0 1-.911.015A4.882 4.882 0 0 1 4.25 7.001c0-1.326.554-2.598 1.538-3.536a.673.673 0 0 1 .464-.183c.174 0 .34.066.464.183Zm6.496 0A4.882 4.882 0 0 1 14.75 7a4.882 4.882 0 0 1-1.538 3.535.659.659 0 0 1-.466.191.684.684 0 0 1-.47-.183.624.624 0 0 1-.192-.447.6.6 0 0 1 .2-.444c.366-.348.656-.762.854-1.217a3.595 3.595 0 0 0 0-2.87 3.743 3.743 0 0 0-.854-1.217.609.609 0 0 1-.176-.437.61.61 0 0 1 .192-.43.673.673 0 0 1 .453-.184.675.675 0 0 1 .458.168h.001ZM9.5 5.75c.348 0 .682.132.928.366.246.235.384.553.384.884 0 .332-.138.65-.384.884-.246.234-.58.366-.928.366-.348 0-.682-.132-.928-.366A1.22 1.22 0 0 1 8.187 7c0-.331.139-.65.385-.884.246-.234.58-.366.928-.366Z"})),T_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"#B2B2B2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.2 14.4 12 9.6l4.8 4.8"})),A_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12",...e},u.createElement("g",{clipPath:"url(#clip0_12072_19873)"},u.createElement("path",{fill:"#fff",d:"m9.158 2.842-2.842-.316-3.474.316L2.526 6l.316 3.158L6 9.553l3.158-.395.316-3.237-.316-3.079Z"}),u.createElement("path",{fill:"#1A73E8",d:"M4.138 7.742a1.22 1.22 0 0 1-.489-.7l.548-.227c.05.19.137.337.26.441a.671.671 0 0 0 .45.156c.179 0 .332-.055.461-.164a.522.522 0 0 0 .194-.416.516.516 0 0 0-.204-.422.79.79 0 0 0-.51-.163H4.53v-.542h.284a.693.693 0 0 0 .443-.142.469.469 0 0 0 .18-.39.43.43 0 0 0-.16-.35.624.624 0 0 0-.409-.133.549.549 0 0 0-.384.129.755.755 0 0 0-.206.317l-.543-.226c.072-.204.204-.384.397-.54.194-.155.44-.233.74-.233.223 0 .422.043.6.129.176.086.315.205.415.356.1.153.15.323.15.513a.84.84 0 0 1-.14.49.964.964 0 0 1-.343.31v.032c.18.075.325.19.44.343a.9.9 0 0 1 .173.553c0 .215-.055.406-.164.575-.109.168-.26.3-.45.397a1.421 1.421 0 0 1-.647.145c-.277 0-.533-.079-.769-.238ZM7.5 5.023l-.599.435-.3-.457 1.079-.778h.414v3.672H7.5V5.023Z"}),u.createElement("path",{fill:"#EA4335",d:"M9.158 12 12 9.158l-1.421-.632-1.421.632-.632 1.421L9.158 12Z"}),u.createElement("path",{fill:"#34A853",d:"M2.21 10.579 2.843 12h6.316V9.158H2.842l-.631 1.421Z"}),u.createElement("path",{fill:"#4285F4",d:"M.947 0A.947.947 0 0 0 0 .947v8.21l1.421.632 1.421-.631V2.842h6.316l.631-1.421L9.158 0H.948Z"}),u.createElement("path",{fill:"#188038",d:"M0 9.158v1.895c0 .523.424.947.947.947h1.895V9.158H0Z"}),u.createElement("path",{fill:"#FBBC04",d:"M9.158 2.842v6.316H12V2.842l-1.42-.631-1.422.631Z"}),u.createElement("path",{fill:"#1967D2",d:"M12 2.842V.947A.947.947 0 0 0 11.053 0H9.158v2.842H12Z"})),u.createElement("defs",null,u.createElement("clipPath",{id:"clip0_12072_19873"},u.createElement("path",{fill:"#fff",d:"M0 0h12v12H0z"})))),j_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:13,height:12,fill:"none",viewBox:"0 0 13 12",...e},u.createElement("g",{clipPath:"url(#clip0_2202_40735)"},u.createElement("path",{fill:"#0A2767",d:"M12.9 6.3c0-.101-.052-.195-.138-.248h-.002l-.005-.003-4.47-2.646a.6.6 0 0 0-.67 0L3.145 6.05l-.006.003a.291.291 0 0 0 .007.5l4.47 2.645.06.036a.6.6 0 0 0 .61-.036l4.47-2.646A.288.288 0 0 0 12.9 6.3Z"}),u.createElement("path",{fill:"#0364B8",d:"M3.666 4.533H6.6v2.69H3.666v-2.69ZM12.3 1.8V.57a.557.557 0 0 0-.544-.57H4.144A.557.557 0 0 0 3.6.57V1.8L8.1 3l4.2-1.2Z"}),u.createElement("path",{fill:"#0078D4",d:"M3.6 1.8h3v2.7h-3V1.8Z"}),u.createElement("path",{fill:"#28A8EA",d:"M9.6 1.8h-3v2.7l3 2.7h2.7V4.5L9.6 1.8Z"}),u.createElement("path",{fill:"#0078D4",d:"M6.6 4.5h3v2.7h-3V4.5Z"}),u.createElement("path",{fill:"#0364B8",d:"M6.6 7.2h3v2.7h-3V7.2Z"}),u.createElement("path",{fill:"#14447D",d:"M3.666 7.223h2.933v2.444H3.666V7.223Z"}),u.createElement("path",{fill:"#0078D4",d:"M9.6 7.2h2.7v2.7H9.6V7.2Z"}),u.createElement("path",{fill:"url(#paint0_linear_2202_40735)",d:"m12.763 6.536-.006.003-4.47 2.514a.623.623 0 0 1-.302.094l-.245-.144a.609.609 0 0 1-.06-.034L3.15 6.384h-.002L3 6.3v5.089c.002.34.28.613.619.61h8.672l.015-.002a.762.762 0 0 0 .21-.043.607.607 0 0 0 .084-.044c.02-.012.055-.037.055-.037a.605.605 0 0 0 .245-.484V6.3a.27.27 0 0 1-.137.236Z"}),u.createElement("path",{fill:"#0A2767",d:"M12.66 6.28v.312L7.984 9.81 3.146 6.385a.003.003 0 0 0-.003-.003L2.7 6.115V5.89l.183-.003.387.222.01.003.032.02 4.56 2.602.174.102.048-.018 4.515-2.541.051.003Z",opacity:.5}),u.createElement("path",{fill:"#1490DF",d:"m12.763 6.536-.006.003-4.47 2.514a.627.627 0 0 1-.67 0l-4.47-2.514-.006-.003A.27.27 0 0 1 3 6.3v5.089c.002.34.28.613.619.61h8.662a.615.615 0 0 0 .619-.61V6.3a.27.27 0 0 1-.137.236Z"}),u.createElement("path",{fill:"currentColor",d:"m8.352 9.016-.067.037a.621.621 0 0 1-.296.096l1.701 2.012 2.967.715a.611.611 0 0 0 .188-.235L8.352 9.016Z",opacity:.1}),u.createElement("path",{fill:"currentColor",d:"m8.655 8.844-.37.208a.621.621 0 0 1-.296.096l.797 2.197 3.872.528a.607.607 0 0 0 .242-.485v-.065l-4.245-2.48Z",opacity:.05}),u.createElement("path",{fill:"#28A8EA",d:"M3.627 12h8.654a.622.622 0 0 0 .37-.12L7.74 9.005a.613.613 0 0 1-.06-.034L3.15 6.384h-.002L3 6.301v5.072c0 .346.28.628.627.628Z"}),u.createElement("path",{fill:"currentColor",d:"M7.2 2.95v6.4a.551.551 0 0 1-.549.551H3v-7.2h.6v-.3h3.051a.551.551 0 0 1 .549.55Z",opacity:.1}),u.createElement("path",{fill:"currentColor",d:"M6.9 3.25v6.398a.489.489 0 0 1-.045.21.547.547 0 0 1-.504.341H3V2.7h3.351c.087 0 .173.021.249.063.184.093.3.281.3.487Z",opacity:.2}),u.createElement("path",{fill:"currentColor",d:"M6.9 3.25v5.798a.554.554 0 0 1-.549.551H3V2.7h3.351c.087 0 .173.021.249.063.184.093.3.281.3.487Z",opacity:.2}),u.createElement("path",{fill:"currentColor",d:"M6.6 3.25v5.798c0 .304-.246.55-.549.551H3V2.7h3.051a.55.55 0 0 1 .549.55Z",opacity:.2}),u.createElement("path",{fill:"url(#paint1_linear_2202_40735)",d:"M.55 2.7h5.5a.55.55 0 0 1 .55.55v5.5a.55.55 0 0 1-.55.55H.55A.55.55 0 0 1 0 8.75v-5.5a.55.55 0 0 1 .55-.55Z"}),u.createElement("path",{fill:"#fff",d:"M1.719 5.007a1.6 1.6 0 0 1 .628-.694 1.9 1.9 0 0 1 .998-.25c.324-.007.643.075.924.238.263.157.475.387.61.663.148.303.221.637.215.975.007.352-.069.701-.22 1.02a1.623 1.623 0 0 1-.63.686 1.838 1.838 0 0 1-.959.243 1.806 1.806 0 0 1-.944-.24 1.61 1.61 0 0 1-.62-.664c-.147-.3-.222-.63-.216-.963a2.32 2.32 0 0 1 .214-1.014Zm.67 1.63c.071.182.194.34.353.456a.923.923 0 0 0 .552.166.967.967 0 0 0 .589-.171.994.994 0 0 0 .343-.457c.075-.204.112-.42.11-.637a1.939 1.939 0 0 0-.104-.645 1.02 1.02 0 0 0-.332-.476.913.913 0 0 0-.584-.18.953.953 0 0 0-.565.168 1.047 1.047 0 0 0-.36.46 1.83 1.83 0 0 0-.003 1.316Z"}),u.createElement("path",{fill:"#50D9FF",d:"M9.6 1.8h2.7v2.7H9.6V1.8Z"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"paint0_linear_2202_40735",x1:7.95,x2:7.95,y1:6.301,y2:12.001,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#35B8F1"}),u.createElement("stop",{offset:1,stopColor:"#28A8EA"})),u.createElement("linearGradient",{id:"paint1_linear_2202_40735",x1:1.147,x2:5.453,y1:2.27,y2:9.729,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#1784D9"}),u.createElement("stop",{offset:.5,stopColor:"#107AD5"}),u.createElement("stop",{offset:1,stopColor:"#0A63C9"})),u.createElement("clipPath",{id:"clip0_2202_40735"},u.createElement("path",{fill:"#fff",d:"M0 0h12.9v12H0z"})))),Ul=4,D_=()=>{const{events:e,isReady:t,isFetching:n,shouldShowConnectPrompts:r,isConnecting:s,calendarsColorsMap:a}=Ao.useProviders(),{momentParams:i}=we(),{selectEvent:c}=Hu(),l=Rn(),d=x.useMemo(()=>{const p=new Date(l),v={year:p.getFullYear(),month:p.getMonth(),date:p.getDate()};return e&&Pt.sortBy(e.filter(g=>g.isAllDay?g.start.year===v.year&&g.start.month===v.month&&g.start.date===v.date:je(l).isBefore(g.endDateTime)),g=>je(g.startDateTime).toJSON()).map(g=>{var y,_;return{...g,isAboutNow:g.isAllDay?!1:je(l).isBetween(je(g.startDateTime).add(-10,"minutes"),g.end),videoLink:(_=(y=g.conference)==null?void 0:y.entries.find(b=>b.type==="video"))==null?void 0:_.uri}})},[e,l]),f=x.useMemo(()=>d&&d.length>Ul,[d]),[h,m]=od("MY_DAY_CALENDAR_COLLAPSED",!1);return o.jsxs("div",{className:"MyDayRouteCalendar",children:[o.jsxs("div",{className:"MyDayRouteCalendar__calendar",children:[o.jsx("div",{className:"MyDayRouteCalendar__calendarWeekDay",children:je().format(i.weekdayShort)}),o.jsx("div",{className:"MyDayRouteCalendar__calendarDay",children:je().format(i.dayShort)}),o.jsx("div",{className:"MyDayRouteCalendar__calendarMonth",children:je().format(i.month)})]}),o.jsxs("div",{className:"MyDayRouteCalendar__events","data-private":"lipsum",children:[t&&!s?d.length?o.jsx(kd,{children:o.jsx("ul",{className:"MyDayRouteCalendar__list",children:d.slice(0,h?Ul:d.length).map((p,v)=>o.jsxs(x.Fragment,{children:[o.jsx("span",{style:{color:a.get(p.calendarId)},className:"MyDayRouteCalendar__list__indicator",children:p.isAboutNow?o.jsx(M_,{}):""}),o.jsx(se,{className:"MyDayRouteCalendar__summary",theme:"plain",onClick:()=>c(p.calendarId,p.id),children:p.isAllDay?o.jsx(N,{id:"_.calendar.all-day"}):`${je(p.startDateTime).format(i.time)}
                - ${je(p.end).format(i.time)}`}),o.jsxs("span",{className:"MyDayRouteCalendar__list__summaryWrapper",children:[o.jsx(se,{className:"MyDayRouteCalendar__summary",theme:"plain",onClick:()=>c(p.calendarId,p.id),children:p.summary||o.jsxs(o.Fragment,{children:["(",o.jsx(N,{id:"_.noTitle"}),")"]})}),p.isAboutNow&&p.videoLink&&o.jsx(lm,{className:"MyDayRouteCalendar__list__joinButton",onClick:()=>window.open(p.videoLink,"_blank"),children:o.jsx(N,{id:"_.calendar.join"})}),v===0&&f&&o.jsx("div",{className:B("MyDayRouteCalendar__collapser",{"MyDayRouteCalendar__collapser--collapsed":h}),role:"button",onClick:()=>m(!h),children:o.jsx(T_,{})})]})]},`${p.calendarId}-${p.id}`))})}):!r&&o.jsx("div",{className:"MyDayRouteCalendar__empty",children:o.jsx(N,{id:"MyDayRouteCalendar.empty"})}):n||!t||s?o.jsx("div",{children:o.jsx("ul",{className:"MyDayRouteCalendar__list MyDayRouteCalendar__skeleton",children:[1,2].map((p,v)=>o.jsxs(x.Fragment,{children:[o.jsx("span",{children:""}),o.jsx("div",{children:o.jsx(Bi,{lineClassName:"MyDayRouteCalendar__skeletonLine"})}),o.jsx("div",{children:o.jsx(Bi,{lineClassName:"MyDayRouteCalendar__skeletonLine"})})]},v))})}):o.jsx(o.Fragment,{}),r&&!s&&o.jsxs("div",{className:"MyDayRouteCalendar__connect",children:[o.jsx(N,{id:"MyDayRouteCalendar.joinMeetings"}),o.jsxs("div",{className:"MyDayRouteCalendar__connectButtons",children:[o.jsx(se,{accessory:o.jsx(A_,{}),className:"MyDayRouteCalendar__connectButton",disabled:n,onClick:()=>{Ge(new URL("/myday",Ze))},children:o.jsx(N,{id:"MyDayRouteCalendar.connectButton.google"})}),o.jsx(se,{accessory:o.jsx(j_,{}),className:"MyDayRouteCalendar__connectButton",disabled:n,onClick:()=>{Ge(new URL("/myday",Ze))},children:o.jsx(N,{id:"MyDayRouteCalendar.connectButton.microsoft"})})]})]})]})]})},N_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M20.6 5.5v4.8h-4.8M3 18.3v-4.8h4.8"}),u.createElement("path",{fill:"currentColor",d:"M4.254 9.233a.8.8 0 0 0 1.508.534l-1.508-.534Zm12.634-2.421-.566.565a.78.78 0 0 0 .018.018l.548-.583Zm3.164 4.07a.8.8 0 1 0 1.096-1.165l-1.096 1.166ZM3.548 12.918a.8.8 0 1 0-1.096 1.166l1.096-1.166Zm3.164 4.07.566-.565a.617.617 0 0 0-.018-.017l-.548.583Zm12.634-2.42a.8.8 0 0 0-1.508-.534l1.508.534Zm-13.584-4.8a6.4 6.4 0 0 1 4.621-4.107l-.353-1.561a8 8 0 0 0-5.776 5.134l1.508.534Zm4.621-4.107a6.4 6.4 0 0 1 5.94 1.717l1.13-1.13a8 8 0 0 0-7.423-2.148l.353 1.56Zm5.957 1.735 3.712 3.488 1.096-1.166-3.712-3.488-1.096 1.166ZM2.452 14.083l3.712 3.488 1.096-1.166-3.712-3.488-1.096 1.166Zm3.694 3.47a8 8 0 0 0 7.424 2.148l-.353-1.56a6.4 6.4 0 0 1-5.94-1.719l-1.13 1.131Zm7.424 2.148a8 8 0 0 0 5.776-5.134l-1.508-.534a6.4 6.4 0 0 1-4.621 4.107l.353 1.56Z"})),R_=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M6.75 12h10.5M3.75 6.75h16.5M9.75 17.25h4.5"}));function I_({model:e,suggestionPosition:t,areSuggestionsFiltered:n,children:r}){const s={type:"suggestion",model:e,suggestionPosition:t,areSuggestionsFiltered:n},{listeners:a,setNodeRef:i,isDragging:c,transform:l,transition:d}=Is({id:e.referencedObjectId,data:s,animateLayoutChanges:ks}),f={transform:Os.Transform.toString(l),transition:d!=null?d:void 0};return o.jsx("div",{ref:i,...a,style:f,children:r(c)})}const k_=x.memo(I_),O_="_suggestions_1fa9m_1",P_="_inner_1fa9m_7",$_="_refreshButton_1fa9m_18",L_="_savedToastWrapper_1fa9m_19",B_="_savedToast_1fa9m_19",U_="_refreshButtonText_1fa9m_42",F_="_content_1fa9m_47",H_="_noSuggestions_1fa9m_51",z_="_list_1fa9m_83",Y_="_listInner_1fa9m_89",W_="_header_1fa9m_95",Z_="_headerShowShadow_1fa9m_101",G_="_isSearching_1fa9m_112",V_="_isRefetching_1fa9m_113",K_="_spinner_1fa9m_118",Ae={suggestions:O_,inner:P_,refreshButton:$_,savedToastWrapper:L_,savedToast:B_,refreshButtonText:U_,content:F_,noSuggestions:H_,list:z_,listInner:Y_,header:W_,headerShowShadow:Z_,isSearching:G_,isRefetching:V_,spinner:K_},X_="/bulb.png",q_=um,J_=5e3,Fl={fetchedLocal:!1,fetchedExternal:!1,isTimeout:!1};function Hl(e){return t=>t.shortcuts.includes(e)}const Q_=({hasSuggestionsDeeplink:e,isOnboardingVisible:t})=>{const{formatMessage:n,locale:r}=we(),[s,a]=x.useState(!1),[i,c]=x.useState(!1),[l,d]=x.useState(!1),[f,h]=x.useState(Fl),[m,p]=x.useState("loader"),{refreshNeeded:v,refreshSuggestion:g}=Qs(),{track:y}=it(),[_,b]=x.useState(!1),[E,S]=x.useState(!1),{fetchDefaultSuggestions:T,defaultSuggestions:j,searchResults:M,searchSuggestions:C}=xh(),{fetchDefaultExternalSuggestions:w,defaultExternalSuggestions:I,searchResults:R,searchSuggestions:L}=Lv(),{mergeSuggestions:P}=nd(),{createMyDayEntry:A}=zt(),[k,O]=x.useState(""),H=x.useCallback(te=>{O(te),a(!0),C(te),L(te),_||(y("my_day_suggestions_searched"),b(!0))},[C,L,y,_]);x.useEffect(()=>a(!1),[M]);const[le,X]=x.useState(null),{scrolledToTop:G}=Eh(le),W=x.useCallback((te,_e,xe)=>{A({referencedObjectId:_e.referencedObjectId,referencedObjectType:_e.referencedObjectType,objectInfo:_e.objectInfo,source:"suggestion",suggestionPosition:te,areSuggestionsFiltered:xe})},[A]),Ne=x.useCallback((te,_e)=>{for(const xe of _e)A({referencedObjectId:xe.referencedObjectId,referencedObjectType:xe.referencedObjectType,objectInfo:xe.objectInfo,source:"suggestion_shortcut"})},[A]),Yt=x.useCallback(()=>{p("merged"),d(!1)},[]);x.useEffect(()=>{const te=Wa(new Date,"ddMMyy");p("loader"),h(Fl),d(!1),T(te,r).finally(()=>{h(xe=>({...xe,fetchedLocal:!0}))}),w(te,r).finally(()=>{h(xe=>({...xe,fetchedExternal:!0}))});const _e=setTimeout(()=>{h(xe=>({...xe,isTimeout:!0}))},J_);return()=>clearTimeout(_e)},[T,w,r]),x.useEffect(()=>{if(v){const te=Wa(new Date,"ddMMyy");c(!0),T(te,r).finally(()=>{h(_e=>({..._e,fetchedLocal:!0}))}),g()}},[T,r,v,g]),x.useEffect(()=>{c(!1)},[j]),x.useEffect(()=>{if(m==="loader"&&f.fetchedLocal&&f.fetchedExternal&&!f.isTimeout){p("merged"),d(!1);return}if(m==="loader"&&f.fetchedLocal&&!f.fetchedExternal&&f.isTimeout){p("local"),d(!1);return}if(m!=="merged"&&f.fetchedLocal&&f.fetchedExternal&&f.isTimeout){p("local"),d(I.length!==0);return}},[f]),x.useEffect(()=>{t||f.fetchedLocal&&f.fetchedExternal&&!f.isTimeout&&!E&&(S(!0),y("my_day_suggestion_shown",{extra_str1:e?"deeplink":"default",extra_double2:j.length+I.length,extra_double3:I.length}))},[j,I,y,f,E,e,t]);const Te=()=>{if(m==="loader")return o.jsx("div",{className:Ae.noSuggestions,children:o.jsx(cd,{className:Ae.spinner})});const te=m==="local"?j:P(j,I),_e=m==="local"?M:P(M,R);if(!_e&&!te.length)return o.jsxs("div",{className:Ae.noSuggestions,children:[o.jsx("img",{src:X_,alt:"",width:233,height:400}),o.jsx("p",{children:o.jsx(N,{id:"MyDaySuggestions.ai-suggestion",values:{newLine:o.jsx("br",{})}})})]});if((_e==null?void 0:_e.length)===0&&!s)return o.jsx("div",{className:Ae.noSuggestions,children:o.jsx(N,{id:"MyDaySuggestions.noSearchResults"})});const xe=_e||te,Wt=xe.filter(Hl("from_yesterday")),ct=xe.filter(Hl("due_today")),Zt=[];return Wt.length&&Zt.push(No.from_yesterday),ct.length&&Zt.push(No.due_today),Zt.push(...xe.map(tt=>tt.referencedObjectId)),o.jsx("div",{className:Ae.listInner,children:o.jsxs(Vo,{items:Zt,strategy:q_,children:[Wt!=null&&Wt.length?o.jsx(vr.Sortable,{name:"from_yesterday",models:Wt,onClick:Ne}):null,ct!=null&&ct.length?o.jsx(vr.Sortable,{name:"due_today",models:ct,onClick:Ne}):null,xe.map((tt,jr)=>o.jsx(k_,{model:tt,suggestionPosition:jr,areSuggestionsFiltered:!!_e,children:ea=>o.jsx(_f,{model:tt,isDragging:ea,onClick:Dr=>W(jr,Dr,!!_e)})},tt.referencedObjectId))]})})};return o.jsx("div",{className:B(Ae.suggestions,{[Ae.isSearching]:s,[Ae.isRefetching]:i}),children:o.jsxs("div",{className:Ae.inner,children:[o.jsx("div",{className:B(Ae.header,{[Ae.headerShowShadow]:!G}),children:o.jsx(dm,{loading:s,onChange:H,placeholder:n("MyDaySuggestions.filter"),value:k,searchIcon:o.jsx(R_,{})})}),l&&o.jsx("div",{className:Ae.refreshButton,onClick:Yt,children:o.jsxs(Xa,{theme:"float",children:[o.jsx(N_,{}),o.jsx("span",{className:Ae.refreshButtonText,children:o.jsx(N,{id:"MyDaySuggestions.refresh"})})]})}),i&&o.jsx("div",{className:Ae.savedToastWrapper,children:o.jsx("div",{className:Ae.savedToast,children:o.jsx(N,{id:"MyDaySuggestions.saved"})})}),o.jsx(wh,{className:Ae.content,children:o.jsx("div",{className:Ae.list,ref:X,children:Te()})})]})})},ex=x.memo(Q_);var tx=Sh,nx=Ch,rx=id,sx=Mh,$a=Th,ax=fm,ox=sx(function(e,t){var n=ax(t);return $a(n)&&(n=void 0),$a(e)?tx(e,nx(t,1,$a,!0),rx(n)):[]}),ix=ox;const cx=Dn(ix),lx="_header_1wp49_1",dx="_breadcrumbs_1wp49_9",ux="_breadcrumbsIcon_1wp49_21",fx="_breadcrumbsText_1wp49_31",hx="_headerButtons_1wp49_52",mx="_headerButton_1wp49_52",Fn={header:lx,breadcrumbs:dx,breadcrumbsIcon:ux,breadcrumbsText:fx,headerButtons:hx,headerButton:mx};function px({task:e,onTaskStatusChange:t,onClose:n}){const{formatMessage:r}=we(),s=z("category",e.categoryId),{myDayEntries:a}=zt(),i=x.useMemo(()=>a.find(y=>y.referencedObjectId===e.id),[e,a]),[c,l]=x.useState(!1),d=x.useCallback(()=>l(!0),[]),f=x.useCallback(()=>l(!1),[]),h=x.useCallback(()=>t(e.id,Le.DONE),[t,e]),[m,p]=x.useState(e.status);x.useEffect(()=>{p(e.status)},[e.status]);const v=x.useRef(null),g=x.useCallback(()=>{const y=e.status===Le.CHECKED?Le.UNCHECKED:Le.CHECKED;p(y),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{t(e.id,y)},y===Le.CHECKED?900:0)},[t,e]);return o.jsxs("header",{className:Fn.header,children:[s&&o.jsxs(hm,{to:us(window.location.search,e.categoryId),draggable:!1,className:Fn.breadcrumbs,children:[o.jsx("div",{className:Fn.breadcrumbsIcon,children:o.jsx(bd,{})}),o.jsxs("div",{className:B(Fn.breadcrumbsText),"data-private":"lipsum",children:[o.jsx("span",{children:o.jsx(N,{id:"_.sidebar.title.my-lists"})}),o.jsx("span",{children:">"}),o.jsx("span",{children:s.name})]})]}),o.jsx("div",{className:Fn.headerButtons,children:o.jsxs(wt.Group,{children:[o.jsx("div",{children:o.jsx(mm,{onClick:g,isChecked:m===Le.CHECKED})}),o.jsx(wt.GroupItem,{text:r(i?"TaskEditPaneHeader.remove-from-my-day":"TaskEditPaneHeader.add-to-my-day"),children:o.jsx(Ld,{id:e.id,type:ye.ANYDO_TASK,source:"task_view",renderButton:({isAlreadyAddedToMyDay:y,onAddToMyDay:_,onRemoveFromMyDay:b})=>o.jsx(se,{onClick:()=>y?b():_(),theme:y?"action":"plain",children:o.jsx(pm,{})})})}),o.jsx(wt.GroupItem,{text:r("_.buttons.archive"),children:o.jsx(se,{onClick:d,theme:"plain",children:o.jsx(gm,{})})}),n&&o.jsx(wt.GroupItem,{text:r("_.buttons.close"),children:o.jsx(se,{theme:"plain",onClick:n,"aria-label":r("_.buttons.dismiss"),children:o.jsx(vm,{})})})]})}),o.jsx(ym,{isVisible:c,headerElement:o.jsx(N,{id:"TaskEditPaneHeader.archive-modal-title"}),mainElement:o.jsx(N,{id:"TaskEditPaneHeader.archive-modal-content"}),declineElement:o.jsx(N,{id:"_.buttons.cancel"}),acceptElement:o.jsx(N,{id:"_.buttons.yes"}),onAccept:h,onDecline:f})]})}const gx=x.memo(px);function vx({animationEnterIndex:e,isPremium:t,task:n,onEnterAnimationEnd:r,onTaskStatusChange:s,onClose:a,showSuggestions:i}){const c=u.useCallback(()=>s(n.id,Le.DONE),[s,n.id]),{selectedSearch:l,removeSelectedSearch:d}=Ah(),f=u.useRef(null),{active:h,dismiss:m}=bm({taskId:n.id}),p=i!=null?i:h;return u.useEffect(()=>{l!=null&&l.searchCategory===F.TASK&&l.id===n.id&&f.current&&(f.current.blip(),d())},[d,l,n.id]),o.jsxs(f2,{ref:f,animationEnterIndex:e,onEnterAnimationEnd:r,children:[o.jsx("div",{className:B("TaskEditPane",{"TaskEditPane--rightPaneOpen":p}),children:o.jsx(Wo,{containerClassName:_m,children:o.jsxs("div",{className:"TaskEditPane__root",children:[o.jsx(gx,{task:n,onTaskStatusChange:s,onClose:a}),o.jsx("div",{className:"TaskEditPane__paneContent",children:o.jsx(xm,{task:n,isPremium:t,onDoneTask:c})})]})})}),o.jsx("div",{className:B("TaskEditPane__rightPane",{"TaskEditPane__rightPane--visible":p}),children:o.jsx(Em,{isVisible:p,taskId:n.id,close:m,isAboveBackdrop:!0,asPortal:!1},n.id)})]})}function yx(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}var bx=yx,_x=bx,xx=_d,Ex=4294967295;function wx(e){return e?_x(xx(e),0,Ex):0}var Sx=wx,zl=_d,Cx=Sx;function Mx(e,t,n,r){var s=e.length;for(n=zl(n),n<0&&(n=-n>s?0:s+n),r=r===void 0||r>s?s:zl(r),r<0&&(r+=s),r=n>r?0:Cx(r);n<r;)e[n++]=t;return e}var Tx=Mx,Ax=Tx,jx=wm;function Dx(e,t,n,r){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&jx(e,t,n)&&(n=0,r=s),Ax(e,t,n,r)):[]}var Nx=Dx;const Rx=Dn(Nx),Ix=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e},u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19 15.267v1.866A1.867 1.867 0 0 1 17.133 19H6.867A1.867 1.867 0 0 1 5 17.133V6.867A1.867 1.867 0 0 1 6.867 5h1.866"}),u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 4h6v6M12 12l8-8"})),kx=({myDayEntry:e,fetchAndUpdateExtendedObjectInfo:t,onRemoveFromMyDay:n,children:r})=>{const{referencedObjectId:s,objectInfo:a}=e;Rt(a,"Invariant: card's objectInfo does not exists");const{formatMessage:i}=we(),{userDetails:c}=xr(),l=Nn(),[d,f]=x.useState(!1),h=x.useCallback(()=>Ge(a.objectUrl),[a.objectUrl]),m=x.useMemo(()=>{const k=i(`_.external.${a.provider}`);return i("_.buttons.open-in",{name:k})},[i,a.provider]),p=x.useCallback(()=>{f(!0),t(e.id,a).catch(()=>{l.set({id:$t(),theme:Qt.ERROR,message:o.jsx(N,{id:"_.cards.content-fetch-error"}),actionsId:["RETRY","DISMISS"],renderButton:k=>o.jsx(N,{id:k==="DISMISS"?"_.buttons.dismiss":"_.buttons.retry"}),onActionClick:k=>{k==="RETRY"&&p()}})}).finally(()=>{f(!1)})},[t,l,e.id,a]);x.useEffect(()=>(p(),()=>l.deleteAll()),[]);const v=Sm(),g=Za(v);x.useEffect(()=>{v&&v!==g&&p()},[p,v,g]);const[y,_]=x.useState(),b=x.useCallback(({isAlreadyAddedToMyDay:k,onAddToMyDay:O,onRemoveFromMyDay:H})=>o.jsx(se,{theme:k?"action":"plain",onClick:k?H:O,children:o.jsx(Cm,{})}),[]),E=x.useMemo(()=>{var k,O;return(O=(k=a.tags)==null?void 0:k.map(H=>H instanceof Object?H.id:H))!=null?O:[]},[a.tags]),S=x.useMemo(()=>{var k;return(k=a==null?void 0:a.tags)==null?void 0:k.map(O=>O instanceof Object?{id:O.id,boardId:O.boardId,name:O.name,status:Ui.ACTIVE,position:"8000",color:O.color}:{id:O,boardId:"",name:O,status:Ui.ACTIVE,position:"8000",color:""})},[a==null?void 0:a.tags]),T=x.useMemo(()=>{const{board:k,section:O,provider:H}=a;return k&&O?[k.name,O.name]:[i(`_.external.${H}`)]},[i,a]),j=x.useMemo(()=>{var k;return(k=a.cardAttachment)==null?void 0:k.map(O=>jh.create({...O,globalTaskId:O.cardId}))},[a==null?void 0:a.cardAttachment]),M=x.useMemo(()=>o.jsx(Mm,{fileAttachments:j||[],fileAttachmentUploadStates:[],removeAttachment:()=>{},abortAttachmentUpload:()=>{},readonly:!0,displayThumbnail:!1}),[j]),[C,w]=x.useState({}),I=x.useMemo(()=>{var O;if(!((O=a.cardChecklist)!=null&&O.length))return;const k=Dh.create({id:"",position:"",name:"",status:0,sectionId:"",pendingInitialSync:null,dirty:0});return o.jsx(o.Fragment,{children:a.cardChecklist.map(H=>{var X,G;const le=((X=a.checklistItem)==null?void 0:X.filter(W=>W.checklistId===H.id))||[];return o.jsx(Tm,{readonly:!0,items:le,checklistId:H.id,card:k,title:H.name,hideCheckedItems:(G=C[H.id])!=null?G:!1,onHideCheckedItemsChange:W=>w(Ne=>({...Ne,[H.id]:W})),onDelete:()=>{},onTitleChange:()=>{},onItemAdd:()=>{},onItemChange:()=>{}},H.id)})})},[C,a.cardChecklist,a.checklistItem]),R=x.useMemo(()=>{var H;if(!(((H=a.owners)==null?void 0:H[0])===aa))return[];const O=Array(a.ownerCount);return O[0]=aa,Rx(O,"fake_user_id",1,a.ownerCount)},[a.ownerCount,a.owners]),L=x.useMemo(()=>{const k=new Map;return R==null||R.forEach(O=>{const H=O===aa&&c,le={publicUserId:O,name:H?c.name:O,email:"",profilePicture:H?c.profilePicture:null,permissionLevel:Nh.MEMBER};k.set(O,le)}),k},[R,c]),P=x.useMemo(()=>Array.from(L.values()),[L]),A={isEditable:!1,breadcrumbs:o.jsx(qa.Breadcrumbs,{text:T,icon:hf[a.provider],link:a.objectUrl,isExternal:!0}),titleData:{title:a.name,onBlur:ht,onClick:ht,onFocus:ht},dueDateData:{dueDate:a.dueDate,cardId:"",recurrence:null,onChange:ht},assigneeData:{current:R||[],boardMembers:L,sortedBoardMembers:P,displayName:!0,hoverDisabled:!0,maxMembers:1,sortAlphabetically:!1},noteData:{note:a.note||"",onBlur:ht,onFocus:ht},tagsData:{selectedTags:E,possibleTags:S},headerButtons:o.jsxs(wt.Group,{children:[o.jsx(wt.GroupItem,{text:i(y?"_.buttons.remove-from-my-day":"_.buttons.add-to-my-day"),children:o.jsx(Ld,{id:s,type:ye.ANYDO_CARD,renderButton:b,onRemoveFromMyDay:n,onIsAddedToMydayChange:_,source:"card_view"})}),o.jsx(wt.GroupItem,{text:m,children:o.jsx(se,{onClick:h,theme:"plain",children:o.jsx(Ix,{})})})]}),extraContent:o.jsx(Am,{attachments:M,checklists:I,addButton:o.jsx(jm,{isDisabled:!0,isLoading:d}),isDisabled:!0})};return o.jsx(o.Fragment,{children:r(A)})},Ox="_modal_9qvpg_1",Px="_editPaneContainer_9qvpg_11",$x="_editPaneSplitContainer_9qvpg_18",Yl={modal:Ox,editPaneContainer:Px,editPaneSplitContainer:$x},Ai="/ball.png",Lx="_wrapper_1mr4i_1",Bx="_planet_1mr4i_12",Ux="_isEntering_1mr4i_31",Fx="_isLeaving_1mr4i_46",Hx="_isClickable_1mr4i_63",Hn={wrapper:Lx,planet:Bx,"ani-rise-up":"_ani-rise-up_1mr4i_1",isEntering:Ux,isLeaving:Fx,"ani-set-down":"_ani-set-down_1mr4i_1",isClickable:Hx},zx=({className:e,isEntering:t,isLeaving:n,onClick:r})=>o.jsx("div",{className:B(Hn.wrapper,e),children:o.jsx("button",{className:B(Hn.planet,{[Hn.isClickable]:!!r,[Hn.isEntering]:t,[Hn.isLeaving]:n}),onClick:r,style:{backgroundImage:`url(${Ai})`}})}),Yx=x.memo(zx);function Wx({model:e,children:t,isDragDisabled:n}){const r={type:"myDayEntry",model:e},{listeners:s,transform:a,transition:i,isDragging:c,setNodeRef:l}=Is({id:e.id,data:r,animateLayoutChanges:ks}),d={transform:Os.Transform.toString(a),transition:i},f=x.useMemo(()=>{let h=s==null?void 0:s.onPointerDown;return n&&(h=()=>!1),{...s,onPointerDown:h}},[s,n]);return o.jsx("div",{ref:l,style:d,...f,children:t(c)})}const Zx=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 14 14",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.388 1.003a.8.8 0 1 0-1.6-.006l-.019 4.878-4.835-.018a.8.8 0 0 0-.006 1.6l4.835.018-.018 4.878a.8.8 0 0 0 1.6.006l.018-4.878 4.921.019a.8.8 0 0 0 .006-1.6L7.37 5.88l.018-4.878Z",clipRule:"evenodd"}));var La={multilinePanel:"_3b2x3v0",multilinePanelButtons:"_3b2x3v1",multilinePanelCloseButton:"_3b2x3v2 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9"};const Gx=Math.min(Ph,$h);function Vx({onAdd:e}){const t=we(),[n,r]=x.useState(""),[s,a]=x.useState(!1),i=x.useRef(null),[c,l]=x.useState(!1),[d,f]=x.useState(),h=x.useRef(null),m=x.useCallback(()=>{a(!0)},[]),p=x.useCallback(C=>{C.relatedTarget!==null&&C.relatedTarget!==h.current&&a(!1)},[]),v=xd(()=>{a(!1),f(void 0)}),g=!s&&!n.trim(),y=x.useCallback(()=>{var w;const C=n.trim();C&&(e(C,d),r(""),f(void 0),l(!1),(w=i.current)==null||w.focus())},[e,d,n]),_=x.useCallback(C=>{var w;C.nativeEvent.isComposing||(C.code==="Enter"?(C.preventDefault(),y()):C.code==="Escape"&&((w=i.current)==null||w.blur()))},[y]),b=x.useMemo(()=>t.formatMessage("_.buttons.enter-task-title"),[t]),E=[or(Ns),()=>{var C;l(!1),(C=i.current)==null||C.focus()}],S=x.useRef(null),[T,j,M]=Dm(n);return o.jsxs("div",{ref:S,...v,className:B("MyDayAddTask",{"MyDayAddTask--showText":!g}),children:[o.jsx(Rh,{children:T.length>1?o.jsxs(Fo.div,{className:La.multilinePanel,variants:{enter:{opacity:1},exit:{opacity:0}},initial:"exit",animate:"enter",exit:"exit",children:[o.jsx("span",{children:o.jsx(N,{id:"_.paste-multiline.text"})}),o.jsxs("div",{className:La.multilinePanelButtons,children:[o.jsx(se,{onClick:()=>{var C;T.forEach(w=>{e(w,d)}),r(""),f(void 0),l(!1),(C=i.current)==null||C.focus()},children:o.jsx(N,{id:"_.paste-multiline.add",values:{count:T.length}})}),o.jsx("button",{className:La.multilinePanelCloseButton,type:"button",onClick:()=>{var C;M(),(C=i.current)==null||C.focus()},children:o.jsx(Ga,{label:t.formatMessage("_.buttons.close"),children:o.jsx(Bd,{})})})]})]}):null}),o.jsx(Ih,{ref:i,icon:o.jsx(wt,{className:"MyDayAddTask__iconButtonWrapper",text:t.formatMessage("TaskEditPaneDetails.category.title"),position:"top",children:o.jsx("button",{ref:h,type:"button",className:B("MyDayAddTask__iconButton",{"MyDayAddTask__iconButton--active":d!==void 0}),onClick:()=>{l(!0)},children:o.jsx(Ga,{label:t.formatMessage("TaskEditPaneDetails.category.title"),children:o.jsx(kh,{})})})}),className:"MyDayAddTask__title",inputClassName:"MyDayAddTask__title__textField",onFocus:m,onBlur:p,onPaste:j,onKeyDown:_,value:g?"":n,onChange:r,placeholder:g?void 0:b,maxLength:Gx}),o.jsxs("div",{className:"MyDayAddTask__label",children:[o.jsx(Zx,{})," ",t.formatMessage("_.buttons.add-task")]}),o.jsx("div",{className:"MyDayAddTask__endAdornment",children:o.jsx(se,{onClick:y,theme:n.trim().length>0?"action":"faint",disabled:n.trim().length===0,children:o.jsx(Nm,{})})}),o.jsx(_r,{from:S,isVisible:c,position:"bottom-start",animationDelay:0,children:o.jsx(Uo,{shortcuts:[E],children:o.jsx(Xx,{initialValue:d,onSelect:C=>{var w;f(C),l(!1),(w=i.current)==null||w.focus()},onClose:()=>{var C;l(!1),(C=i.current)==null||C.focus()}})})})]})}const Kx=x.memo(Vx),Xx=({initialValue:e,onSelect:t,onClose:n})=>{const{categories:r}=hd(),{sections:s}=Rs(),a=xd(n);return o.jsx("div",{className:"CategoryPickerMenu",...a,children:o.jsx(Ho,{active:"",children:o.jsx(zo,{label:"",children:o.jsx(Yo,{render:()=>o.jsx(Wo,{children:o.jsxs("div",{className:"CategoryPickerMenu__content",style:{"--max-items":8},children:[o.jsx(Fi,{children:o.jsxs("div",{className:"CategoryPickerMenu__item--header",children:[o.jsx("div",{className:"CategoryPickerMenu__item__title","data-private":"lipsum",children:o.jsx(N,{id:"_.sidebar.title.my-lists"})}),o.jsx(bd,{})]})},"lists"),r.map(i=>{const c=(e==null?void 0:e.type)==="category"&&e.id===i.id||e===void 0&&i.isDefault;return o.jsx(Fi,{onClick:()=>t({type:"category",id:i.id}),children:o.jsxs("div",{className:"CategoryPickerMenu__item",children:[o.jsx("div",{className:"CategoryPickerMenu__item__title","data-private":"lipsum",children:i.name}),c?o.jsx("div",{className:"CategoryPickerMenu__item__icon",children:o.jsx(Hi,{})}):null]})},i.id)}),o.jsx(Oh,{onSelect:i=>{var l;const c=(l=s.get(i))==null?void 0:l[0];Rt(c),t({type:"workspace",sectionId:c.id})},icon:i=>{var l;return(e==null?void 0:e.type)==="workspace"&&((l=s.get(i))==null?void 0:l.find(d=>d.id===e.sectionId))!==void 0&&o.jsx("div",{className:"CategoryPickerMenu__item__icon",children:o.jsx(Hi,{})})}})]})})})})})})},qx=({entries:e,selectTaskOrCard:t,selectExternalProviderMyDayEntry:n,onStatusChange:r,onVisibilityStatusChange:s,isSideBarOpen:a,isOnboardingVisible:i,openSideBar:c,activeDragEntityType:l,onHideActions:d,onUnreadClick:f})=>{const{track:h}=it(),m=Uh(),{createCard:p}=ld(),{createMyDayEntry:v}=zt(),g=qs(),y=u.useRef(null),{isScrolledToTop:_,isScrolledToBottom:b,props:E}=Fh(),S=l==="suggestion"||l==="shortcut",T=u.useRef(e);u.useEffect(()=>{const M=cx(e,T.current,"id");if(T.current=e,M.length&&!M[0].isGhost){const C=sf(M[0]);Im(C).then(w=>{setImmediate(()=>w.scrollIntoView({behavior:"smooth",block:"end"}))})}},[e]),u.useEffect(()=>{if(!i){const M=e.reduce((P,A)=>P+(A.referencedObjectType===ye.ANYDO_CARD?1:0),0),C=e.reduce((P,A)=>P+(A.referencedObjectType===ye.ANYDO_TASK?1:0),0),w=e.reduce((P,A)=>P+(A.referencedObjectType===ye.EXTERNAL_CARD?1:0),0),I=e.length,R=e.reduce((P,A)=>P+(A.status===ge.CHECKED?1:0),0),L=e.reduce((P,A)=>P+(A.visibilityStatus===he.PINNED?1:0),0);h("entered_my_day",{extra_str2:JSON.stringify({anydo_card:M,anydo_task:C,external_card:w}),extra_str3:JSON.stringify({active:I,checked:R,pinned:L})})}},[i]);const j=u.useCallback((M,C)=>{if((C==null?void 0:C.type)==="workspace"){const w=p({name:M,sectionId:C.sectionId});v({referencedObjectId:w.id,referencedObjectType:ye.ANYDO_CARD,source:"my_day_quick_add"})}else{const{task:w}=m({categoryId:C==null?void 0:C.id,title:M,dueDate:Hh(zn.TODAY),position:null,now:Date.now()});h("task_added",{extra_str1:w.id,extra_str2:{type:"user",component:"myday",input_method:"text"}}),v({referencedObjectId:w.id,referencedObjectType:ye.ANYDO_TASK,source:"my_day_quick_add"})}},[p,v,m,h]);return o.jsx(o.Fragment,{children:o.jsxs("div",{className:B("MyDayEntries",{"MyDayEntries--showTopShadow":!_}),children:[o.jsx("div",{className:"MyDayEntries__contentWrapper",children:o.jsxs(Wo,{ref:y,containerClassName:"MyDayEntries__content",...E,children:[e.length?o.jsx("div",{className:"MyDayEntries__items",children:o.jsx(Vo,{items:e,strategy:Dd,children:o.jsx(wv,{children:e.map(M=>o.jsx(Wx,{model:M,isDragDisabled:S||M.visibilityStatus===he.PINNED||M.status===ge.CHECKED,children:C=>{switch(M.referencedObjectType){case ye.ANYDO_TASK:return o.jsx(lf,{model:M,onSelect:t,onStatusChange:r,onVisibilityStatusChange:s,isDragging:C});case ye.ANYDO_CARD:return o.jsx(ff,{model:M,onHideActions:d,onSelect:t,onStatusChange:r,onVisibilityStatusChange:s,onUnreadClick:f,isDragging:C});case ye.EXTERNAL_CARD:return o.jsx(pf,{model:M,onHideActions:d,onSelect:n,onStatusChange:r,onVisibilityStatusChange:s,isDragging:C});default:return o.jsx(u.Fragment,{})}}},M.id))})})}):null,o.jsx(Rd,{ms:100,children:o.jsx(ud,{isVisible:e.length===0&&!S&&!g,render:({isEntering:M,isLeaving:C})=>o.jsx(Yx,{onClick:a?void 0:c,isEntering:M,isLeaving:C})})})]})}),o.jsx("div",{className:B("MyDayEntries__addTask",{"MyDayEntries__addTask--showShadow":!b}),children:o.jsx(Kx,{onAdd:j})})]})})},Jx=e=>{const t=Qo(),{entries:n}=e,[r,s]=u.useState({});u.useEffect(()=>{e.activeDragEntityType&&s({})},[e.activeDragEntityType]);const a=u.useMemo(()=>{const A=Object.values(r);return[...n.filter(k=>!r[k.id]),...A].sort((k,O)=>Lh.comparePositions(k.position,O.position))},[r,n]),i=u.useCallback(A=>{s(k=>{const O={...k};return delete O[A.id],O})},[]),{deselectTask:c,selectTask:l,selectedTaskId:d,selectedTaskActivityId:f,deselectMydayTaskActivity:h,selectMydayTaskActivity:m}=Id(),[p,v]=Wv(d),{updateMyDayEntries:g,syncEntries:y}=zt(),_=md(),{fetchAndUpdateExtendedObjectInfo:b}=Bh(),E=u.useCallback(()=>{p&&(f?h(p.id):m(p.id))},[h,m,p,f]),S=u.useCallback((A,k)=>{if(!v)return;_([{id:v.id,key:"status",value:k}]);const O=n.find(H=>H.referencedObjectId===v.id&&H.referencedObjectType===ye.ANYDO_TASK);if(O){const H=v.status;(k===Le.CHECKED||k===Le.UNCHECKED)&&(g([{id:O.id,key:"position",value:Nr.getStatusChangeNewPosition(n,O)}]),k===Le.CHECKED&&H===Le.UNCHECKED&&c())}},[n,c,v,_,g]),T=u.useCallback((A,k,O)=>{const H=[{id:A.id,key:"status",value:k}];k===ge.CHECKED&&(k===ge.CHECKED&&O&&s(le=>({...le,[A.id]:{...A,isGhost:!0,id:A.id,status:ge.CHECKED}})),H.push({id:A.id,key:"position",value:Nr.getStatusChangeNewPosition(n,A)})),g(H)},[n,g]),j=u.useCallback((A,k)=>{const O=[{id:A.id,key:"visibilityStatus",value:k}];k===he.PINNED&&(O.push({id:A.id,key:"status",value:ge.UNCHECKED}),A.visibilityStatus!==he.PINNED&&O.push({id:A.id,key:"position",value:Nr.getVisibilityChangeNewPosition(n,A)})),A.visibilityStatus===he.PINNED&&k===he.DEFAULT&&O.push({id:A.id,key:"position",value:Nr.getVisibilityChangeNewPosition(n,A)}),g(O)},[n,g]),M=u.useCallback(A=>{m(A.id)},[m]),[C,w]=u.useState(null),I=u.useCallback(A=>w(A),[]),R=u.useCallback(()=>w(null),[]),L=y.get(C||""),P=u.useCallback(A=>{l(A,!0)},[l]);return o.jsxs(o.Fragment,{children:[o.jsx(qx,{selectTaskOrCard:P,selectExternalProviderMyDayEntry:I,onStatusChange:T,onVisibilityStatusChange:j,onHideActions:i,onUnreadClick:M,...e,entries:a}),o.jsx(Jn,{position:"top",isVisible:!!p,onClose:c,children:()=>o.jsx(Rm,{analyticsSource:"my_day",card:p,onRemoveFromMyDay:c,toggleCardActivityDrawer:E,selectedTaskActivityId:!!f,deselectCard:c,children:A=>o.jsx(qa,{closeModal:c,...A},p.id)})}),o.jsx(Jn,{isVisible:!!v,onClose:c,children:()=>o.jsx("div",{className:Yl.modal,children:o.jsx("div",{className:Yl.editPaneContainer,children:v==null?null:o.jsx(vx,{isPremium:t,task:v,onTaskStatusChange:S,onClose:c},v.id)})})}),o.jsx(Jn,{position:"top",isVisible:!!(L!=null&&L.objectInfo),onClose:R,children:()=>o.jsx(kx,{fetchAndUpdateExtendedObjectInfo:b,myDayEntry:L,onRemoveFromMyDay:R,children:A=>o.jsx(qa,{closeModal:R,...A},L.referencedObjectId)})})]})},Qx=u.memo(Jx),eE=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:16,fill:"none",viewBox:"0 0 18 16",...e},u.createElement("path",{stroke:"#B2B2B2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 1v14m-9-2 5-5-5-5m3.8 5H1"})),tE=({isOpen:e,open:t,close:n,calendarRender:r,suggestionsRender:s,activeTabId:a,setActiveTabId:i})=>{const[c,l]=x.useState(e),d=a2(),f=x.useCallback(m=>()=>{i(m),t()},[t,i]);x.useEffect(()=>{e&&l(!0)},[e]);const h=x.useCallback(()=>{e||l(!1)},[e]);return o.jsxs("div",{className:B("MyDaySideBar",{"MyDaySideBar--isClosed":!e,"MyDaySideBar--isOpen":e,"MyDaySideBar--isNotificationBarVisible":d}),children:[o.jsx("div",{className:"MyDaySideBar__full",onTransitionEnd:h,children:c&&o.jsx("div",{className:"MyDaySideBar__tabContent",children:o.jsxs(yd,{active:a,isFullHeight:!0,children:[o.jsx(qn,{label:Nt.SUGGESTIONS,render:()=>s}),o.jsx(qn,{label:Nt.CALENDAR,render:()=>r})]})})}),o.jsx("div",{className:"MyDaySideBar__mini",role:"button",onClick:e?()=>n():f(Nt.SUGGESTIONS),children:o.jsx("div",{className:"MyDaySideBar__mini__item rtl-mirror-icon",style:{fontSize:24},children:e?o.jsx(eE,{}):o.jsx(jo,{})})})]})},nE=x.memo(tE),xf="Dialog",[Ef,C8]=Lo(xf),[rE,rn]=Ef(xf),sE=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,c=u.useRef(null),l=u.useRef(null),[d=!1,f]=Gd({prop:r,defaultProp:s,onChange:a});return u.createElement(rE,{scope:t,triggerRef:c,contentRef:l,contentId:Qr(),titleId:Qr(),descriptionId:Qr(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i},n)},wf="DialogPortal",[aE,oE]=Ef(wf,{forceMount:void 0}),iE=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=rn(wf,t);return u.createElement(aE,{scope:t,forceMount:n},u.Children.map(r,i=>u.createElement(Ht,{present:n||a.open},u.createElement(Zd,{asChild:!0,container:s},i))))},yr="DialogContent",cE=u.forwardRef((e,t)=>{const n=oE(yr,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=rn(yr,e.__scopeDialog);return u.createElement(Ht,{present:r||a.open},a.modal?u.createElement(lE,K({},s,{ref:t})):u.createElement(dE,K({},s,{ref:t})))}),lE=u.forwardRef((e,t)=>{const n=rn(yr,e.__scopeDialog),r=u.useRef(null),s=et(t,n.contentRef,r);return u.useEffect(()=>{const a=r.current;if(a)return Kd(a)},[]),u.createElement(Sf,K({},e,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:Me(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault())}))}),dE=u.forwardRef((e,t)=>{const n=rn(yr,e.__scopeDialog),r=u.useRef(!1),s=u.useRef(!1);return u.createElement(Sf,K({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,a),!a.defaultPrevented){var c;r.current||(c=n.triggerRef.current)===null||c===void 0||c.focus(),a.preventDefault()}r.current=!1,s.current=!1},onInteractOutside:a=>{var i,c;(i=e.onInteractOutside)===null||i===void 0||i.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=a.target;((c=n.triggerRef.current)===null||c===void 0?void 0:c.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}}))}),Sf=u.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,c=rn(yr,n),l=u.useRef(null),d=et(t,l);return zd(),u.createElement(u.Fragment,null,u.createElement(Yd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a},u.createElement(Fd,K({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":pE(c.open)},i,{ref:d,onDismiss:()=>c.onOpenChange(!1)}))),!1)}),uE="DialogTitle",fE=u.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=rn(uE,n);return u.createElement(vt.h2,K({id:s.titleId},r,{ref:t}))});const hE="DialogClose",mE=u.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=rn(hE,n);return u.createElement(vt.button,K({type:"button"},r,{ref:t,onClick:Me(e.onClick,()=>s.onOpenChange(!1))}))});function pE(e){return e?"open":"closed"}const gE=sE,vE=iE,yE=cE,bE=fE,_E=mE;var xE=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Kn=e=>{let t=0;for(let n=0;n<e.length;n++){let r=e[n],s=xE.indexOf(r);t=t*83+s}return t},Ba=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ua=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},EE=e=>e<0?-1:1,Fa=(e,t)=>EE(e)*Math.pow(Math.abs(e),t),Wl=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},wE=e=>{if(!e||e.length<6)throw new Wl("The blurhash string must be at least 6 characters");let t=Kn(e[0]),n=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*n)throw new Wl(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*n}`)},SE=e=>{let t=e>>16,n=e>>8&255,r=e&255;return[Ba(t),Ba(n),Ba(r)]},CE=(e,t)=>{let n=Math.floor(e/361),r=Math.floor(e/19)%19,s=e%19;return[Fa((n-9)/9,2)*t,Fa((r-9)/9,2)*t,Fa((s-9)/9,2)*t]},ME=(e,t,n,r)=>{wE(e),r=r|1;let s=Kn(e[0]),a=Math.floor(s/9)+1,i=s%9+1,c=(Kn(e[1])+1)/166,l=new Array(i*a);for(let h=0;h<l.length;h++)if(h===0){let m=Kn(e.substring(2,6));l[h]=SE(m)}else{let m=Kn(e.substring(4+h*2,6+h*2));l[h]=CE(m,c*r)}let d=t*4,f=new Uint8ClampedArray(d*n);for(let h=0;h<n;h++)for(let m=0;m<t;m++){let p=0,v=0,g=0;for(let E=0;E<a;E++)for(let S=0;S<i;S++){let T=Math.cos(Math.PI*m*S/t)*Math.cos(Math.PI*h*E/n),j=l[S+E*i];p+=j[0]*T,v+=j[1]*T,g+=j[2]*T}let y=Ua(p),_=Ua(v),b=Ua(g);f[4*m+0+h*d]=y,f[4*m+1+h*d]=_,f[4*m+2+h*d]=b,f[4*m+3+h*d]=255}return f},TE=ME,AE=Object.defineProperty,jE=Object.defineProperties,DE=Object.getOwnPropertyDescriptors,As=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,Mf=Object.prototype.propertyIsEnumerable,Zl=(e,t,n)=>t in e?AE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ro=(e,t)=>{for(var n in t||(t={}))Cf.call(t,n)&&Zl(e,n,t[n]);if(As)for(var n of As(t))Mf.call(t,n)&&Zl(e,n,t[n]);return e},Io=(e,t)=>jE(e,DE(t)),Tf=(e,t)=>{var n={};for(var r in e)Cf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&As)for(var r of As(e))t.indexOf(r)<0&&Mf.call(e,r)&&(n[r]=e[r]);return n},Af=class extends u.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:t,punch:n,width:r}=this.props;if(this.canvas){let s=TE(e,r,t,n),a=this.canvas.getContext("2d"),i=a.createImageData(r,t);i.data.set(s),a.putImageData(i,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:t,height:n,width:r}=e,s=Tf(e,["hash","height","width"]);return u.createElement("canvas",Io(Ro({},s),{height:n,width:r,ref:this.handleRef}))}};Af.defaultProps={height:128,width:128};var NE={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},jf=class extends u.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:t,height:n,width:r,punch:s,resolutionX:a,resolutionY:i,style:c}=e,l=Tf(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return u.createElement("div",Io(Ro({},l),{style:Io(Ro({display:"inline-block",height:n,width:r},c),{position:"relative"})}),u.createElement(Af,{hash:t,height:i,width:a,punch:s,style:NE}))}};jf.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};var oe={overlay:"_1bpifw75",closeButton:"_1bpifw76 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",content:"_1bpifw77",dialogTitle:"_1bpifw78",grid:"_1bpifw7c",thumbnailSkeleton:"_1bpifw7d",thumbnail:"_1bpifw7e",thumbnailPicture:"_1bpifw7f",thumbnailImg:"_1bpifw7g",errorMessage:"_1bpifw7h",search:"_1bpifw79",searchField:"_1bpifw7a",loading:"_1bpifw7b",emptyStateThumbnail:"_1bpifw7i",emptyStateImageWrapper:"_1bpifw7j",emptyStateImage:"_1bpifw7k",attribution:"_1bpifw7l",goPremium:"_1bpifw7m",viewport:"_1bpifw7n",fadeHead:"_1bpifw7o"};const Df={isVisible:zh({key:"@/BackgroundImageModal/isVisible",default:!1})},RE=new URLSearchParams({utm_source:"any.do",utm_medium:"referral"}),Nf={collection:Yh({key:"@/unsplash/collection",get:async({get:e})=>await kv({pageSize:64},e(Ja.authToken))}),search:Wh({key:"@/unsplash/search",get:({query:e,pageSize:t})=>async({get:n})=>await Ov({query:e,orientation:"landscape",pageSize:t},n(Ja.authToken))})},IE=()=>{const e=Ds(),[t,n]=Zh(Df.isVisible),{selectedImage:r,selectedImageDark:s,updateSelectedImage:a}=Si();return o.jsx(o.Fragment,{children:o.jsx(gE,{open:t,onOpenChange:n,children:o.jsxs(vE,{children:[o.jsx("div",{className:oe.overlay}),o.jsxs(yE,{className:oe.content,children:[o.jsx(_E,{className:oe.closeButton,children:o.jsx(Bd,{})}),o.jsxs(bE,{className:oe.dialogTitle,children:[o.jsx(N,{id:"MyDayRoute.background.choose"}),o.jsx("em",{children:"."})]}),o.jsx(OE,{isDarkMode:e,selectedImage:e?s:r,onSelect:i=>a(e?"selectedImageDark":"selectedImage",i),onClose:()=>n(!1)})]})]})})})};function kE(){const e=Kh();return u.useCallback(t=>Pv({photoId:t},e()),[e])}const OE=({isDarkMode:e,selectedImage:t,onSelect:n,onClose:r})=>{const[s,a]=u.useTransition(),[i,c]=u.useState(""),l=ei(p=>a(()=>{c(p)}),500),{formatMessage:d}=we(),f=Nn(),h=kE(),m=p=>o.jsx(LE,{photo:p,isSelected:(t==null?void 0:t.source)==="unsplash"&&p.id===t.id,onClick:async()=>{try{await h(p.id),n(Kt.unsplash(p)),r()}catch(v){pe.captureException(v),f.set({id:$t(),theme:Qt.ERROR,message:o.jsx(N,{id:"_.errors.unknown.please-try-again"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}}},p.id);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:oe.search,children:o.jsx("input",{autoFocus:!0,className:oe.searchField,placeholder:d("MyDayRoute.background.search"),onChange:p=>{l(p.currentTarget.value)}})}),o.jsx("div",{className:oe.fadeHead}),o.jsxs(i5,{className:Rr.root,children:[o.jsx(c5,{className:B(Rr.viewport,oe.viewport),children:o.jsx(u.Suspense,{fallback:o.jsx("div",{className:oe.grid,"data-pending":"true",children:Array(15).fill(null).map((p,v)=>o.jsx("div",{className:oe.thumbnailSkeleton},v))}),children:o.jsx(ti,{fallback:o.jsx("p",{className:oe.errorMessage,children:o.jsx(N,{id:"_.auth.errors.unknown",values:{newLine:o.jsx("br",{})}})}),children:o.jsx("div",{className:oe.grid,"data-pending":s,children:i.length?o.jsx(PE,{query:i,children:m}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:B(oe.thumbnail,oe.emptyStateThumbnail),"data-selected":t===void 0||t.source==="bundled"&&(t.value===Je.BLANK||t.value===Je.NONE),onClick:()=>{n(Kt.bundled(Je.NONE)),r()},children:o.jsx("div",{className:oe.emptyStateImageWrapper,children:o.jsx("img",{className:oe.emptyStateImage,src:Ai,alt:""})})}),(t==null?void 0:t.source)==="unsplash"&&o.jsx("button",{type:"button",className:oe.thumbnail,"data-selected":!0,onClick:()=>{r()},children:o.jsx("img",{src:`${t.url}&h=120`,loading:"lazy",style:{pointerEvents:"none"},alt:""})}),Gh.map(p=>{const v=ni(Kt.bundled(p),{isDarkMode:e});return o.jsxs("button",{type:"button",className:oe.thumbnail,"data-selected":p===(t==null?void 0:t.uid),onClick:()=>{n(Kt.bundled(p)),r()},children:[o.jsxs("picture",{className:oe.thumbnailPicture,children:[o.jsx("source",{src:v.thumbnail_webp,type:"image/webp"}),o.jsx("source",{src:v.thumbnail,type:"image/png"}),o.jsx("img",{className:oe.thumbnailImg,src:v.thumbnail_webp,alt:d("SettingsMenuBackgroundTab.image.alt",{image:String(p)}),loading:"lazy",crossOrigin:"anonymous",style:{pointerEvents:"none"}})]}),o.jsx("div",{className:oe.attribution,children:"Any.do"})]},p)}),o.jsx($E,{selectedId:(t==null?void 0:t.source)==="unsplash"?t.id:void 0,children:m})]})})})})}),o.jsx(l5,{className:Rr.scrollBar,orientation:"vertical",children:o.jsx(d5,{className:Rr.scrollBar})})]})]})},PE=({query:e,children:t})=>{const r=Vh("(min-height: 900px)")?25:20,s=Xt(Nf.search({query:e,pageSize:r}));return o.jsx(o.Fragment,{children:s.results.map(t)})},$E=({selectedId:e,children:t})=>{const n=Xt(Nf.collection).filter(r=>r.id!==e);return o.jsx(o.Fragment,{children:n.map(t)})},LE=({photo:{blur_hash:e,alt_description:t,user:n,urls:r},isSelected:s,onClick:a})=>o.jsxs("button",{type:"button",className:oe.thumbnail,"data-selected":s,onClick:a,children:[e!=null&&o.jsx(jf,{hash:e,width:180,height:120}),o.jsx("img",{className:oe.thumbnailImg,src:r.thumb,alt:t,loading:"lazy",crossOrigin:"anonymous",style:{pointerEvents:"none"}}),o.jsx("div",{className:oe.attribution,children:o.jsx("a",{href:`${n.links.html}?${RE}`,target:"_blank",rel:"noreferrer",onClick:at,children:n.name})})]}),BE=()=>{const{formatMessage:e}=we(),t=Xt(Ja.hasAuthToken),n=Js(),r=u.useRef(null),s=u.useRef(null);_n(s,()=>{var i;(i=r.current)==null||i.hide()});const a=Xh(Df.isVisible);return o.jsx(o.Fragment,{children:o.jsx("button",{onClick:()=>{a(!0)},type:"button","data-sidebar-open":n.isSideBarOpen,className:"MyDayRoute__bgSelection","aria-label":e("MyDayRoute.background.choose"),title:e("MyDayRoute.background.choose"),children:o.jsx(u.Suspense,{fallback:null,children:o.jsx(ti,{fallbackRender:()=>null,children:t&&o.jsx(UE,{})})})})})},UE=()=>{const e=Ds(),{selectedImage:t,selectedImageDark:n}=Si(),r=e?n:t,s=r.source!=="bundled"||r.value!==Je.NONE&&r.value!==Je.BLANK;return o.jsx("div",{className:"MyDayRoute__bgSelectionItem","data-has-image":s,style:{backgroundImage:`url(${s?ni(r,{isDarkMode:e}).settingsThumbnail_webp:Ai})`}})},Rf="Popover",[If,M8]=Lo(Rf,[Ed]),ji=Ed(),[FE,Pn]=If(Rf),HE=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,c=ji(t),l=u.useRef(null),[d,f]=u.useState(!1),[h=!1,m]=Gd({prop:r,defaultProp:s,onChange:a});return u.createElement(qh,c,u.createElement(FE,{scope:t,contentId:Qr(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i},n))},zE="PopoverTrigger",YE=u.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Pn(zE,n),a=ji(n),i=et(t,s.triggerRef),c=u.createElement(vt.button,K({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Pf(s.open)},r,{ref:i,onClick:Me(e.onClick,s.onOpenToggle)}));return s.hasCustomAnchor?c:u.createElement(Jh,K({asChild:!0},a),c)}),kf="PopoverPortal",[WE,ZE]=If(kf,{forceMount:void 0}),GE=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Pn(kf,t);return u.createElement(WE,{scope:t,forceMount:n},u.createElement(Ht,{present:n||a.open},u.createElement(Zd,{asChild:!0,container:s},r)))},br="PopoverContent",VE=u.forwardRef((e,t)=>{const n=ZE(br,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Pn(br,e.__scopePopover);return u.createElement(Ht,{present:r||a.open},a.modal?u.createElement(KE,K({},s,{ref:t})):u.createElement(XE,K({},s,{ref:t})))}),KE=u.forwardRef((e,t)=>{const n=Pn(br,e.__scopePopover),r=u.useRef(null),s=et(t,r),a=u.useRef(!1);return u.useEffect(()=>{const i=r.current;if(i)return Kd(i)},[]),u.createElement(nu,{as:Qh,allowPinchZoom:!0},u.createElement(Of,K({},e,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),a.current||(c=n.triggerRef.current)===null||c===void 0||c.focus()}),onPointerDownOutside:Me(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,d=c.button===2||l;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Me(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})))}),XE=u.forwardRef((e,t)=>{const n=Pn(br,e.__scopePopover),r=u.useRef(!1),s=u.useRef(!1);return u.createElement(Of,K({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,a),!a.defaultPrevented){var c;r.current||(c=n.triggerRef.current)===null||c===void 0||c.focus(),a.preventDefault()}r.current=!1,s.current=!1},onInteractOutside:a=>{var i,c;(i=e.onInteractOutside)===null||i===void 0||i.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=a.target;((c=n.triggerRef.current)===null||c===void 0?void 0:c.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}}))}),Of=u.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:f,...h}=e,m=Pn(br,n),p=ji(n);return zd(),u.createElement(Yd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a},u.createElement(Fd,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1)},u.createElement(e1,K({"data-state":Pf(m.open),role:"dialog",id:m.contentId},p,h,{ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function Pf(e){return e?"open":"closed"}const qE=HE,JE=YE,QE=GE,e8=VE;var Ha={fab:"_157z9sv0",profileImage:"_157z9sv1",goPremium:"_157z9sv2"};const t8=()=>{const{userDetails:e,logout:t}=xr(),n=Qo();if(e==null)return null;const r=km(e);return o.jsxs(qE,{children:[o.jsx(JE,{asChild:!0,children:o.jsx("button",{type:"button",className:Ha.fab,children:o.jsx("img",{className:Ha.profileImage,src:r,alt:"Profile picture"})})}),o.jsx(QE,{children:o.jsxs(e8,{align:"start",side:"bottom",sideOffset:6,className:Bv.dropdownMenu.content({}),children:[o.jsx(fe.Item,{onClick:()=>{Ge(new URL("/myday",Ze))},children:"Open Any.do"}),!n&&o.jsx(fe.Item,{className:Ha.goPremium,onClick:()=>{Ge(new URL("/?d=anydo%3A%2F%2Fanydo%3Faction%3Dopenupsell",Ze))},children:o.jsx(N,{id:"_.premium.goPremium"})}),o.jsx(n8,{}),o.jsx(fe.Item,{onClick:()=>{t()},children:o.jsx(N,{id:"SettingsMenuProfileTab.nav.signOut"})})]})})]})},n8=()=>{const[e,t]=u.useState(!1);return u.useEffect(()=>{Ud().then(n=>t(!n))},[]),o.jsx(fe.Item,{accessory:o.jsx("div",{style:{paddingLeft:"4px",paddingRight:"4px"},children:o.jsx(Om,{size:"small",theme:"new",stopClickPropagation:!0,checked:e,onChange:()=>{Yi(e),t(!e)}})}),onClick:()=>{Yi(e),t(!e)},children:"New tab"})},r8=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 100 100",...e,children:[o.jsx("path",{fill:"#fdbc01",d:"M77.13 24.59c-1.69-1.76-17.92-2.18-17.92-2.18L16.24 65.38c-.57.57 17.81 18.95 18.38 18.38l42.97-42.97s.71-14.98-.46-16.21Z"}),o.jsx("path",{fill:"#fd86ae",d:"M85.99 22.76a49.3 49.3 0 0 0-8.75-8.75c-3.11-2.41-7.54-2.09-10.33.69l-7.71 7.71 18.38 18.38 7.71-7.71c2.78-2.78 3.1-7.22.69-10.33Z"}),o.jsx("path",{fill:"#c9dcf4",d:"m19.74 87.26 12.79-2.4c.76-.14 1.46-.51 2.02-1.04-5.03-7.68-10.69-13.34-18.38-18.37-.53.56-.9 1.26-1.04 2.02l-2.4 12.79 7 7Z"}),o.jsx("path",{fill:"#4a254b",d:"M17.27 82.73a9.114 9.114 0 0 0-4.53-2.47l-.26 1.37c-.65 3.49 2.4 6.54 5.89 5.89l1.37-.26a9.114 9.114 0 0 0-2.47-4.53ZM77.87 41.57a.47.47 0 0 1-.35-.15l-6.97-6.97c-.2-.2-.2-.51 0-.71s.51-.2.71 0l6.97 6.97c.2.2.2.51 0 .71-.1.1-.23.15-.35.15ZM30.49 78.72c-.15 0-.29-.06-.39-.19-3.98-4.91-8.49-8.94-14.19-12.67a.498.498 0 0 1 .55-.83c5.79 3.79 10.37 7.89 14.42 12.88.17.21.14.53-.07.7a.51.51 0 0 1-.31.11ZM54.26 55.65a4.007 4.007 0 0 0 .31-5.31.413.413 0 0 0-.61-.05l-5.06 5.06c-.17.17-.15.45.05.61a3.996 3.996 0 0 0 5.31-.31Z"}),o.jsx("circle",{cx:41.17,cy:55.29,r:4.5,fill:"#fff"}),o.jsx("circle",{cx:41.17,cy:55.29,r:1.93,fill:"#4a254b"}),o.jsx("circle",{cx:53.9,cy:42.56,r:4.5,fill:"#fff"}),o.jsx("circle",{cx:53.9,cy:42.56,r:1.93,fill:"#4a254b"})]}),s8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",...e},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},u.createElement("path",{d:"M13.8 17.4v-1.6a3.2 3.2 0 0 0-3.2-3.2H4.2A3.2 3.2 0 0 0 1 15.8v1.6"}),u.createElement("circle",{cx:7.4,cy:6.2,r:3.2}),u.createElement("path",{d:"M18.6 17.4v-1.6a3.2 3.2 0 0 0-2.4-3.096m-3.2-9.6a3.2 3.2 0 0 1 0 6.2"}))),a8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",...e},u.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M10.29 16.58h7.29M13.935 3.215a1.718 1.718 0 0 1 2.43 2.43L6.24 15.77 3 16.58l.81-3.24L13.935 3.215z"})),o8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",...e},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},u.createElement("circle",{cx:10,cy:10,r:8}),u.createElement("path",{d:"M10 5.2V10l3.2 1.6"}))),i8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",...e},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,transform:"translate(3 1)"},u.createElement("path",{d:"M14.58 7.29c0 5.67-7.29 10.53-7.29 10.53S0 12.96 0 7.29a7.29 7.29 0 0 1 14.58 0z"}),u.createElement("circle",{cx:7.29,cy:7.29,r:2.43}))),c8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M18 12v4.8a1.6 1.6 0 0 1-1.6 1.6H7.6A1.6 1.6 0 0 1 6 16.8V8a1.6 1.6 0 0 1 1.6-1.6h4.8M15.6 4h4.8v4.8m-8.8 4L20.4 4"})),l8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M20 15.936v2.4a1.6 1.6 0 0 1-1.744 1.6 15.83 15.83 0 0 1-6.904-2.456 15.593 15.593 0 0 1-4.8-4.8 15.836 15.836 0 0 1-2.456-6.936A1.602 1.602 0 0 1 5.688 4h2.4a1.599 1.599 0 0 1 1.6 1.376c.101.768.29 1.522.56 2.248.22.585.08 1.244-.36 1.688l-1.016 1.016a12.8 12.8 0 0 0 4.8 4.8l1.016-1.016a1.598 1.598 0 0 1 1.688-.36c.726.27 1.48.459 2.248.56A1.6 1.6 0 0 1 20 15.936z"})),d8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},u.createElement("path",{d:"m22.6 7.6-5.6 4 5.6 4z"}),u.createElement("rect",{width:12,height:11.2,x:5,y:6,rx:1.6})));function u8({attendees:e,userEmail:t,membersByEmail:n=new Map}){const r=we(),s=e.filter(l=>l.email!==t),a=s.length,i=s.reduce((l,d)=>l+(d.status===Ue.ACCEPTED?1:0),0),c=s.reduce((l,d)=>{const f=d.status===Ue.NEEDS_ACTION||d.status===Ue.TENTATIVE;return l+(f?1:0)},0);return o.jsx("div",{children:a===0?null:o.jsxs(u.Fragment,{children:[o.jsx("div",{children:o.jsx(N,{id:a===1?"CalendarEventMenuAttendees.guests-size":"CalendarEventMenuAttendees.guests-size.plural",values:{size:a}})}),o.jsx("div",{className:"CalendarEventMenuAttendees__smallText",children:o.jsx(Pm,{value:[i===0?"":r.formatMessage("CalendarEventMenuAttendees.guests-status-yes",{yesSize:i}),c===0?"":r.formatMessage("CalendarEventMenuAttendees.guests-status-waiting",{waitingSize:c})].filter(Boolean),type:"unit",style:"long"})}),o.jsx("ul",{className:"CalendarEventMenuAttendees__attendeesList",children:s.map(l=>{var d;return o.jsxs("li",{className:"CalendarEventMenuAttendees__attendeesItem",children:[o.jsx($m,{name:l.name||l.email,imageUrl:((d=n.get(l.email.toLowerCase()))==null?void 0:d.profilePicture)||null}),o.jsx("div",{children:l.name?o.jsxs(u.Fragment,{children:[o.jsx("div",{children:l.name}),o.jsx("div",{className:"CalendarEventMenuAttendees__smallText",children:l.email})]}):o.jsx("div",{children:l.email})})]},l.email)})})]})})}function f8({event:e}){const t=we(),n=t.formatMessage("_.charater.time-separator"),r=t.formatMessage("_.charater.range-time"),s=Gl(e.start),a=Gl(e.end),i=je(s),c=je(a);if(e.isAllDay){const f=`${e.start.year}-${e.start.month}-${e.start.date}`,h=`${e.end.year}-${e.end.month}-${e.end.date}`;return e.start.year===e.end.year&&e.start.month===e.end.month?e.start.date===e.end.date?o.jsxs("time",{dateTime:f,children:[i.format(t.momentParams.weekday),n," ",i.format(t.momentParams.date)]}):i.week()===c.week()?o.jsxs(u.Fragment,{children:[o.jsx("time",{dateTime:f,children:i.format(t.momentParams.weekday)}),r,o.jsx("time",{dateTime:h,children:c.format(t.momentParams.weekday)}),n," ",i.format(t.momentParams.dayShort),r,c.format(t.momentParams.date)]}):o.jsxs(u.Fragment,{children:[o.jsx("time",{dateTime:f,children:i.format(t.momentParams.dayShort)}),r,o.jsx("time",{dateTime:h,children:c.format(t.momentParams.date)})]}):o.jsxs(u.Fragment,{children:[o.jsx("time",{dateTime:f,children:i.format(t.momentParams.date)}),r,o.jsx("time",{dateTime:h,children:c.format(t.momentParams.date)})]})}const l=s.toISOString(),d=a.toISOString();return e.start.year===e.end.year&&e.start.month===e.end.month&&e.start.date===e.end.date?o.jsxs(u.Fragment,{children:[o.jsxs("time",{dateTime:l,children:[i.format(t.momentParams.weekday),n," ",i.format(t.momentParams.date),n," ",i.format(t.momentParams.time)]}),r,o.jsx("time",{dateTime:d,children:c.format(t.momentParams.time)})]}):o.jsxs(u.Fragment,{children:[o.jsxs("time",{dateTime:l,children:[i.format(t.momentParams.date),n," ",i.format(t.momentParams.time)]}),r,o.jsxs("time",{dateTime:d,children:[c.format(t.momentParams.date),n," ",c.format(t.momentParams.time)]})]})}function Gl(e){const t=new Date(0,0,1,0,0,0,0);return t.setMinutes(e.minute),t.setHours(e.hour),t.setDate(e.date),t.setMonth(e.month),t.setFullYear(e.year),t}function h8({event:e,calendarsColors:t,userEmail:n,onClose:r,onEdit:s,membersByEmail:a=new Map}){const i=e.attendees.reduce((c,l)=>c+(l.email===n?0:1),0);return o.jsx("div",{className:"CalendarEventMenu",children:o.jsx(Ho,{active:"",children:o.jsx(zo,{label:"",children:o.jsx(Yo,{render:()=>o.jsx("div",{className:"CalendarEventMenu__content",children:o.jsx(lp,{className:"CalendarEventMenu__scrollView",children:o.jsxs("article",{className:"CalendarEventMenu__layout",children:[o.jsx("div",{className:"CalendarEventMenu__calendarColor",style:{backgroundColor:t.get(e.calendarId)}}),o.jsx("h2",{className:"CalendarEventMenu__title",children:e.summary}),o.jsxs("div",{className:"CalendarEventMenu__actionsContainer",children:[s&&o.jsx(se,{onClickNative:s,children:o.jsx(r8,{style:{fontSize:32}})}),o.jsx(Lm,{onClick:r})]}),o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(o8,{})}),o.jsx("div",{children:o.jsx(f8,{event:e})}),e.location!=null&&e.location.trim()?o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(i8,{})}),o.jsx("div",{children:e.location})]}):null,e.conference==null?null:e.conference.entries.map((c,l)=>{switch(c.type){case"instructions":return o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(c8,{})}),o.jsx("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"CalendarEventMenu__linkItem",children:o.jsx("div",{className:"CalendarEventMenu__linkItem__title",children:o.jsx(N,{id:"CalendarEventMenu.conference.intructions"})})})]},l);case"phone":return o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(l8,{})}),o.jsxs("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"CalendarEventMenu__linkItem",children:[o.jsx("div",{className:"CalendarEventMenu__linkItem__title",children:o.jsx(N,{id:"CalendarEventMenu.conference.phone"})}),o.jsx("div",{className:"CalendarEventMenu__smallText",children:c.label}),c.pin?o.jsx("div",{className:"CalendarEventMenu__smallText",children:o.jsx(N,{id:"CalendarEventMenu.conference.phone.pin",values:c})}):null]})]},l);case"video":return o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(d8,{})}),o.jsxs("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"CalendarEventMenu__linkItem",children:[o.jsx("div",{className:"CalendarEventMenu__linkItem__title",children:o.jsx(N,{id:"CalendarEventMenu.conference.video"})}),o.jsx("div",{className:"CalendarEventMenu__smallText",children:c.label})]})]},l);default:return null}}),i===0?null:o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(s8,{})}),o.jsx(u8,{attendees:e.attendees,userEmail:n,membersByEmail:a})]}),e.description.trim()?o.jsxs(u.Fragment,{children:[o.jsx("div",{className:"CalendarEventMenu__iconContainer",children:o.jsx(a8,{})}),o.jsx("p",{className:"CalendarEventMenu__description",children:e.description})]}):null]})})})})})})})}const m8=()=>{const e=Js(),t=Rn(),{deselectEvent:n,selectedEventId:r}=Hu(),{refetchEventsMaybe:s,...a}=Ao.useProviders(),{myDayEntries:i,updateMyDayEntries:c}=zt(),l=Ao.useSingleEvent(r),{userEmail:d}=xr(),{membersByEmail:f}=$v(),h=u.useMemo(()=>i.filter(y=>{var _,b;return!(y.referencedObjectType===ye.ANYDO_TASK&&(((_=y.referencedObject)==null?void 0:_.status)===Le.DELETED||((b=y.referencedObject)==null?void 0:b.status)===Le.DONE))}),[i]),[m,p]=u.useState(h);u.useEffect(()=>{p(h)},[h]);const[v]=u.useMemo(()=>{const y=new Date(t);return[y.getFullYear(),y.getMonth(),y.getDate()]},[t]);u.useEffect(()=>{s(v)},[v,s]);const g=u.useCallback((y,_)=>{const b=m.findIndex(({id:C})=>C===y);if(b===-1)return;const E=m.findIndex(({id:C})=>C===_);if(E===-1)return;const S=[...m];S.splice(b,1);const T=m[b],j=Bm(S,E),M=Um(m,b,E);M[E]={...M[E],position:j},p(M),c([{id:T.id,key:"position",value:j}])},[m,c]);return o.jsxs("div",{className:B("MyDayRoute","MyDayRoute--theme",{"MyDayRoute--isAppSideBarOpen":!1,"MyDayRoute--isMyDaySideBarOpen":e.isSideBarOpen}),children:[o.jsx(b_,{onEntryReposition:g,children:y=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"MyDayRoute__content",children:[o.jsx("div",{className:"MyDayRoute__title",children:o.jsx(E_,{now:t})}),o.jsxs(C_,{isActive:y==="suggestion"||y==="shortcut",className:"MyDayRoute__droppable",children:[o.jsx(D_,{}),o.jsx(Qx,{entries:m,isSideBarOpen:e.isSideBarOpen,isOnboardingVisible:!1,openSideBar:e.openSideBar,activeDragEntityType:y})]})]}),o.jsx(nE,{isOpen:e.isSideBarOpen,close:e.closeSideBar,open:e.openSideBar,activeTabId:e.activeTabId,setActiveTabId:e.setActiveTabId,calendarRender:null,suggestionsRender:o.jsx(ex,{hasSuggestionsDeeplink:e.hasSuggestionsDeeplink,isOnboardingVisible:!1})})]})}),o.jsx(Jn,{isVisible:l!=null,onClose:n,children:o.jsx(t1,{shouldUpdate:l!=null,render:()=>l==null?null:o.jsx(h8,{event:l,onClose:n,calendarsColors:a.calendarsColorsMap,userEmail:d,membersByEmail:f})})}),o.jsx(BE,{}),o.jsx(IE,{}),o.jsx(t8,{})]})};function p8(){var r,s;const e=n1(),t=z("section",((r=e==null?void 0:e.card)==null?void 0:r.sectionId)||null),n=z("board",(t==null?void 0:t.boardId)||((s=e==null?void 0:e.tag)==null?void 0:s.boardId)||null);return x.useEffect(()=>{var d;if(e==null)return;const{id:a,searchCategory:i,task:c,card:l}=e;switch(i){case F.TASK:case F.TASK_NOTE:case F.TASK_ATTACHMENT:case F.SUB_TASK:c!=null&&Ge(new URL(us(window.location.search,c.categoryId,{taskId:c.id}),Ze));return;case F.CATEGORY:Ge(new URL(us(window.location.search,a),Ze));return;case F.LABEL:Ge(new URL(Fv(window.location.search,a),Ze));return;case F.BOARD:Ge(new URL(Va(window.location.search,a,{}),Ze));return;case F.TAG:n&&Ge(new URL(Va(window.location.search,n.id,{}),Ze));return;case F.CARD:case F.CARD_NOTE:case F.CARD_ATTACHMENT:case F.CARD_CHECKLIST:case F.CARD_CHECKLIST_ITEM:n&&Ge(new URL(vd(window.location.search,n.id,(d=l==null?void 0:l.id)!=null?d:a),Ze));return}},[e]),null}const g8=x.memo(p8),v8=()=>o.jsxs(o.Fragment,{children:[o.jsx(l3,{isMyDay:!0}),o.jsx(i4,{}),o.jsx(m8,{}),o.jsx(g8,{})]});async function y8({storage:e,auth:t,i18n:n,renderLoading:r}){const[s,a]=await Fm(t),i=new Xm({auth:t,isApplicationActive:qm.isWindowActive(),getClientId:r1(()=>s1(e)),store:s});i.on("sync",()=>void Hm(i)),t.isLoggedIn()&&!a&&!i.isAfterFirstSync()&&(r(),await new Promise(m=>{const p=i.on("first-sync",()=>{p(),m()})}));const c=new Jm({auth:t,batch:Ql.unstable_batchedUpdates}),l=new a1({provider:new jv}),d=new Cv({i18n:n,manager:l,onNotificationClick({calendarId:m,eventId:p,joinUri:v}){const g=Zo("",{eventId:p,calendarId:m});Ge(new URL(g,Ze)),v&&window.open(v,"_blank")}});function f(){return i.read()}return{Root:()=>{const m=xr(),p=Qm(m,i);return o.jsx(ep,{sync:i,s3UploadManager:c,children:!t.isLoggedIn()||!p?o.jsx("div",{style:{display:"flex",margin:"auto",width:360,minHeight:"100vh",alignItems:"center"},children:o.jsx(zm,{auth:t,isPendingSync:!p})}):o.jsx(o1,{children:o.jsx(tp,{children:o.jsx(np,{children:o.jsx(i1,{isAuthLoggedIn:t.isLoggedIn(),storage:e,getStoreState:f,children:o.jsxs(a3,{notificationManager:d,children:[o.jsx(Ym,{}),o.jsx(v8,{})]})})})})},m.userEmail)})}}}async function b8(){if(await Ud()){Wm();return}await Zm(async function({storage:t,auth:n,renderApp:r,i18n:s}){const{Root:a}=await y8({storage:t,auth:n,renderLoading:()=>{r(o.jsx(Vm,{}))},i18n:s});function i(){const l=js();return o.jsx(o.Fragment,{children:l.pathname})}const c=c1([{path:"/",element:o.jsx(l1,{to:"/myday"})},{path:"/myday",element:o.jsx(a,{}),children:[{path:"tasks/:taskId",element:null,children:[{path:"activity",element:null}]},{path:"events/:calendarId/:eventId",element:null}]},{path:"*",element:o.jsx(i,{})}]);r(o.jsx(Gm,{router:c}))})}b8().catch(e=>{console.error(e),pe.captureException(e)});
