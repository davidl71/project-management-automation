var Bs=Object.defineProperty;var ps=r=>{throw TypeError(r)};var Os=(r,s,a)=>s in r?Bs(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a;var $e=(r,s,a)=>Os(r,typeof s!="symbol"?s+"":s,a),fs=(r,s,a)=>s.has(r)||ps("Cannot "+a);var yr=(r,s,a)=>(fs(r,s,"read from private field"),a?a.call(r):s.get(r)),yn=(r,s,a)=>s.has(r)?ps("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(r):s.set(r,a),vn=(r,s,a,i)=>(fs(r,s,"write to private field"),i?i.call(r,a):s.set(r,a),a);import{a1 as fn,d7 as sn,d8 as C,r as requiredArgs,d9 as toInteger$1,t as toDate,da as getDefaultOptions,cb as addDays,db as memoize,an as getDefaultExportFromCjs,dc as toString_1,ay as hooks,az as TaskRepeatingMethod,dd as getDayIndexOfTaskAlertRepeatDaysByIsoWeekday,a as reactExports,P as React$6,ar as reactDomExports,j as jsxRuntimeExports,b4 as stopPropagation$2,bt as once$1,bK as useOutSideEvent,a0 as useNow2,de as addMonths,s as startOfDay,Q as cardDueDateFromString,v as TaskStatus,c as cx$6,df as I18nContext,dg as getDisplayName$1,dh as useIntl,di as __rest$1,bB as isCssScrollBarSupported,aI as Tooltip2,L as LoadingSpinnerIcon,cE as SimpleScrollView,aa as Portal,d3 as ShouldUpdate_memo,B as BareButton_,cu as AnimatedInOut,dj as commonjsGlobal,dk as objectAssign,b5 as DynamicTextArea_forwarded,b6 as DynamicTextAreaTheme,dl as AnimationContext,dm as rafBatch,at as ButtonInlineText,dn as EMPTY$3,dp as memoizeOnce,aJ as ScrollView_forwarded,dq as on,cX as useMatchMedia,dr as getISODay,ds as getDaysInMonth,a7 as useI18n,ae as FormattedMessage,dt as isSameDay,a8 as useKeyboardShortcutCombination,a9 as KEYBOARD_SHORTCUT_CLOSE_MODAL,du as AnimationContextProviderWrapper,ad as KeyboardShortcutsGlobalOverride,aP as assertNonNullable,cB as noop$4,dv as eq_1$1,dw as isArrayLike_1,dx as _isIndex,dy as isObject_1,dz as toFinite_1,dA as Recoil_index_29,dB as Recoil_index_2,b7 as Recoil_index_12,ck as useIsAppThemeDark,$ as useAnalytics,dC as AuthCheckEmailStatus,dD as debounce_1,bL as useAuthService,O as useAuth,w as ReminderUtils2,u as isTaskRecurring,dE as TaskAlertRepeatMonthType,dF as getValidTaskAlertRepeatInterval,A as AnydoSentry,cT as useScrollViewObserver,aY as TooltipSmallInfo,al as useNavigate,af as $08b6689415b2f49a$export$5aec92af04ace2d2,ag as BackIcon,cC as Skeleton_memo,dG as SETTINGS_GOOGLE_CLIENT_ID,J as Recoil_index_8,dH as z,dI as RecoilSync_index_2,dJ as ZodError,dK as AbServiceExperiments,dL as AuthBase,dM as getPlatformForApi,dN as getReferral,dO as ABSERVICE_EXPERIMENTS,dP as AUTH_GOOGLE_REDIRECT_SCOPE,dQ as SETTINGS_FACEBOOK_APP_ID,dR as SETTINGS_FACEBOOK_PERMISSIONS,dS as SETTINGS_AUTH_APPLE_LOGIN_WEB_REDIRECT_URL,dT as createRoot,d5 as NotificationManager,dU as WebNotificationProvider,dV as I18nLocaleLoader,dW as AbService,dX as AUTH_TOKEN_LS_KEY,dY as Analytics,dZ as AnydoI18n,d_ as UserSettingsRecordDateFormat,d$ as UserSettingsRecordTimeFormat,e0 as DEFAULT_WEEK_START_DAY,e1 as UserSessionStorage,e2 as AnydoAuthError,bl as AuthStatusCode,e3 as DndProvider,e4 as HTML5Backend,e5 as AnalyticsProvider,e6 as I18nLocaleProvider_memo,e7 as AuthProviderMemo,e8 as UserSessionStorageProvider,e9 as NotificationProvider_memo,ea as DarkModeProvider_memo,eb as MotionConfig,ec as $a093c7e1ec25a057$export$f78649fb9ca566b8,ed as MiniToastNotificationsProvider,ci as useUserSettings,ee as useI18nLocale,ef as I18nProvider_memo,V as useSyncReactSubscription,cM as FileAttachmentRecord,eg as SyncCounterFields,eh as AttachmentSyncLogic,ei as SpaceSyncLogic,ej as AUTH_HEADER,ek as createMetaHeaders,bA as SETTINGS_API_ORIGIN_URL,el as createHttpError,bS as makePostRequest,bR as makeGetRequest,bb as cardRecordDueDateToString,em as StripePlan,en as BoardSyncLogic,eo as BoardRecord,ep as isBoardNameValid,cR as CARD_NOTE_MAX_LENGTH,eq as TAG_NAME_MAX_LENGTH,aM as Positioning2,er as TeamsTagRecord,H as createGlobalModelId,cL as TeamsTagStatus,es as TeamsTagSyncLogic,et as UserDetailsSyncRecord,eu as LabelSyncLogic,G as LabelRecord,ev as isTaskFieldValid,ew as isSubTask,ex as TaskRecord,ey as isSubTaskVisible,y as updateTask,ez as insertItemToListByPosition,eA as CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH,eB as CardCheckListItemStatus,eC as CardChecklistItemSyncLogic,eD as CardCheckListStatus,eE as CardChecklistSyncLogic,eF as CardAttachmentStatus,eG as CardAttachmentSyncLogic,U as useSyncContext,cU as Recoil_index_11,Z as cacheTaxonomy,eH as cardSelectors,eI as sectionSelectors,M as lodashExports,K as Recoil_index_9,eJ as Recoil_index_10,eK as Recoil_index_31,eL as _baseEach,eM as isSymbol_1,eN as _arrayMap,eO as identity_1,eP as _baseGet,eQ as _baseUnary,eR as isArray_1,cp as _baseIteratee,cH as _baseRest,cG as _baseFlatten,bT as useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO,a2 as SyncContext,Y as Recoil_index_20,eS as getCountryCode,aN as usePreviousValue,eT as TeamsPlanPeriod,eU as MacAppStorePlan,eV as TABLE_VIEW_CONFIG,ba as useSyncUpdateCards,cw as MyDayEntryStatus,eW as updateMyDayEntry,b1 as StatusPositioning,eX as isHttpError,N as useSyncCards,cN as CardRecord,cY as useAuthTokenGetter_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO,W as sortLabelsModelViews,X as useSyncUpdateTasks,eY as AuthForgotPasswordStatus,ac as motion,ab as AnimatePresence,eZ as DataRouterContext,e_ as DataRouterStateContext,e$ as Router,f0 as useRoutesImpl,bJ as React$7,f1 as ReactDOM,f2 as useResolvedPath,am as useLocation,f3 as NavigationContext,f4 as stripBasename,f5 as invariant$v,f6 as matchPath$1,f7 as useHref,f8 as createPath,c0 as appendSearchToUrl,c1 as RouteName,p as TaskGroupsType,f9 as TASK_ROUTES_PATHS_ORDER,fa as ROUTES_PATHS,fb as INVERTED_ROUTES_PATHS,aR as useSyncMyDayEntries,aS as MyDayEntryVisibilityStatus,aQ as APP_BASE_URL,fc as _baseGetTag,fd as isObjectLike_1,fe as _nodeUtilExports,ff as _baseProperty,fg as _baseToString,cK as toInteger_1,cg as useMiniToastNotifications,ch as MiniToastNotificationTheme,cx as getCardUrl,aU as MyDayReferencedObjectType,fh as isUserDetailsPremiumUser,bi as useAuthUpdateUserDetails,cc as logError,D as LABEL_COLORS,fi as LABEL_NAME_MAX_LENGTH,fj as isBlankString,aH as CardMenuButtonsBarFooterTab,aD as PlatformConfig,aE as PlatformType,aC as CardMenuHeaderTab,aF as CardMenuHeaderTabItemType,au as PlusIcon,aA as CardMenu$1,aB as CardMenuTab,aG as CardMenuBodyTab,I as DEFAULT_LABEL_COLOR,cO as BoardPermissionLevel,fk as OUTSIDE_EVENT_ALWAYS_IGNORE_CLASSNAMES,fl as SubscriptionPaymentStatusT,bh as useSyncSpaces,fm as TEAMS_PLAN_TRIAL_EXTENSION_PERIOD,bp as getContactFormUrl,bk as WorkspaceTypeT,fn as PlatformInstaller,fo as sprinkles,fp as TeamsPlanPaymentProvider,fq as SubscriptionPlanTypeT,fr as WorkspacePermissionLevel,fs as isSpaceActive,ft as TEAMS_PLAN_TRIAL_PERIOD,fu as difference,aj as useScrollObserver,fv as BOARD_NAME_MAX_LENGTH,bV as compact,ai as useSyncBoards,fw as WorkspaceType,fx as WORKSPACE_NAME_MAX_LENGTH,fy as FAMILY_GROCERY_BOARD_TEMPLATE_ID,fz as ONBOARDING_DEFAULT_PLAN_PERIOD,fA as ON_PAYMENT_CONFIRMED_CLOSE_DELAY,cy as TabsReplacerContainer,cz as TabsTab,fB as PremiumPlanPeriod,cd as UnreachableCaseError,fC as getAppVersion,fD as PremiumPlanDevice,fE as PremiumSubscriptionPaymentProvider,fF as BackButtonIcon,fG as PremiumEventType,ct as KeyboardShortcutsGlobal,fH as NULL_KEYBOARD_SHORTCUT,cV as Recoil_index_22,fI as Recoil_index_21,cJ as useUserSearchCurrentSelectionForSelected,cr as UserSearchCategory,fJ as debounce$1,fK as isSubTaskVisibleInGroup,fL as withoutIndex,aZ as TASK_DROP_ANIMATION,b2 as PortalTypes,fM as K,fN as isFileTooBig,fO as ButtonsBar,ax as CategoryPickerMenu,av as useSyncCategories,aq as useUserSettingsIsoWeekStartDay,a5 as TaskAlertRepeatEndType,c9 as NOT_INITIALIZED_ID,fP as CardStatus,fQ as _SetCache,fR as _cacheHas,fS as _arrayIncludes,fT as _arrayIncludesWith,cI as isArrayLikeObject_1,fU as TooltipTheme,fV as getReminderValue,fW as userReminderHelpers,fX as USER_REMINDERS_BY_CONSTRAINT,fY as USER_REMINDER_UNITS,a6 as calculateTaskAlertRepeatEndsOn,ao as getSystemTimeZone,fZ as WeekdayShort,b8 as format,bc as ShowCardCheckboxMode,ah as useSyncSections,f_ as HttpError,f$ as CARD_REMINDER_MAX_COUNT,g0 as isBefore,cQ as SpaceBoards,aO as CardMenuSectionItem_,g1 as boardSelectors,b3 as useUserSessionStorageBooleanKey,g2 as DEFAULT_IS_EXPANDED_CARD_TAGS,g3 as CARD_TAGS_MAX_MODE_ENABLED_USS,bf as isCardNameValid,g4 as SETTINGS_THUMBNAIL_SERVER_URL,g5 as BoardViewType,g6 as isFileTooBigTeams,g7 as formatFileSize,bQ as createSingleEventEmitter,g8 as ENTER_KEY$1,aL as TASK_TITLE_MAX_LENGTH,be as TASK_NOTE_MAX_LENGTH,g9 as PREMIUM_ACCOUNT_FILE_SIZE_LIMIT,ga as FREE_ACCOUNT_FILE_SIZE_LIMIT,as as usePresence,gb as BoardIcon,gc as TEAMS_FILE_SIZE_LIMIT,gd as useScrollToElement,b9 as CARD_TITLE_MAX_LENGTH,bd as SvgTeamsicon}from"./CategoryPickerMenu.js";import{h as SpaceRecord,i as SYNC_AI_SUGGESTION_TIMEOUT,C as CardChecklistItemRecord,j as CardChecklistRecord,k as CardAttachmentRecord,A as AttachmentsContext,a as authSelectors,l as isKeyOf,m as useS3UploadManager,F as FileAttachmentUploadErrorRecord,n as FileAttachmentUploadErrorType,o as SyncStore}from"./SyncRecoilWithAuth.js";window._INITIALIZE_NOW_=Date.now();window.global||(window.global=window);const LAST_WEEKDAY_OF_THE_MONTH=-1;var WorkspaceTemplateType=(r=>(r.WorkflowOnly="workflow_only",r.Content="content",r.ContentAndUsers="content_and_users",r))(WorkspaceTemplateType||{});const WORKSPACE_TEMPLATES_TAG_ID="WORKSPACE_TEMPLATES",initialFieldsToDuplicate={owners:!0,tags:!0,note:!0,cardAttachment:!0,cardChecklist:!0};var ActivityUpdateStatus=(r=>(r[r.Active=0]="Active",r[r.Interacted=1]="Interacted",r[r.Deleted=2]="Deleted",r))(ActivityUpdateStatus||{});const USER_GROUP_MENTIONS=["everyone","assignees"],FILTER_PRESETS=["overdue","noDate","today","lastWeek","thisWeek","nextWeek","thisMonth","nextMonth"],ANYDO_TERMS_OF_SERVICE_LINK="https://www.any.do/legal/app-license-agreement",ANYDO_PRIVACY_LINK="https://www.any.do/legal/privacy-policy";sn(!1);C();function startOfWeek(r,s){var a,i,o,x,y,_,E,R;requiredArgs(1,arguments);var S=getDefaultOptions(),j=toInteger$1((a=(i=(o=(x=s==null?void 0:s.weekStartsOn)!==null&&x!==void 0?x:s==null||(y=s.locale)===null||y===void 0||(_=y.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&o!==void 0?o:S.weekStartsOn)!==null&&i!==void 0?i:(E=S.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&a!==void 0?a:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=toDate(r),A=T.getDay(),M=(A<j?7:0)+A-j;return T.setDate(T.getDate()-M),T.setHours(0,0,0,0),T}function addWeeks(r,s){requiredArgs(2,arguments);var a=toInteger$1(s),i=a*7;return addDays(r,i)}function endOfDay(r){requiredArgs(1,arguments);var s=toDate(r);return s.setHours(23,59,59,999),s}function endOfMonth(r){requiredArgs(1,arguments);var s=toDate(r),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function startOfMonth(r){requiredArgs(1,arguments);var s=toDate(r);return s.setDate(1),s.setHours(0,0,0,0),s}function endOfWeek(r,s){var a,i,o,x,y,_,E,R;requiredArgs(1,arguments);var S=getDefaultOptions(),j=toInteger$1((a=(i=(o=(x=s==null?void 0:s.weekStartsOn)!==null&&x!==void 0?x:s==null||(y=s.locale)===null||y===void 0||(_=y.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&o!==void 0?o:S.weekStartsOn)!==null&&i!==void 0?i:(E=S.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&a!==void 0?a:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=toDate(r),A=T.getDay(),M=(A<j?-7:0)+6-(A-j);return T.setDate(T.getDate()+M),T.setHours(23,59,59,999),T}function getDate(r){requiredArgs(1,arguments);var s=toDate(r),a=s.getDate();return a}function getDay(r){requiredArgs(1,arguments);var s=toDate(r),a=s.getDay();return a}function getWeekOfMonth(r,s){var a,i,o,x,y,_,E,R;requiredArgs(1,arguments);var S=getDefaultOptions(),j=toInteger$1((a=(i=(o=(x=s==null?void 0:s.weekStartsOn)!==null&&x!==void 0?x:s==null||(y=s.locale)===null||y===void 0||(_=y.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&o!==void 0?o:S.weekStartsOn)!==null&&i!==void 0?i:(E=S.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&a!==void 0?a:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=getDate(r);if(isNaN(T))return NaN;var A=getDay(startOfMonth(r)),M=j-A;M<=0&&(M+=7);var P=T-M;return Math.ceil(P/7)+1}function nonNullableGuard(r){return r!=null}function getAvatarInitialsColor(r){if(r.length===0)return[toRgbString(155,155,155),"dark"];const s=r[0].charCodeAt(0)%255,a=r[r.length-1].charCodeAt(0)%255,i=s*109%255,o=r.length===1?144:a*31%255,x=i+o*79%255,y=brightnessByColor(i,o,x);return[toRgbString(i,o,x),y]}function toRgbString(r,s,a){return`rgb(${r}, ${s}, ${a})`}function brightnessByColor(r,s,a){return(r*299+s*587+a*114)/1e3>210?"light":"dark"}function debounceRaf(r){let s,a=null,i=null;function o(){const _=a,E=s;s=void 0,a=null,i=null,r.apply(E,_)}function x(){i==null&&(i=requestAnimationFrame(o)),s=this,a=arguments}function y(){i!=null&&cancelAnimationFrame(i),s=void 0,a=null,i=null}return x.cancel=y,x}const br=class br{constructor(){$e(this,"_loadedSrcs",new Set);$e(this,"reload",memoize((s,a=br.DEFAULT_TIMEOUT)=>new Promise((i,o)=>{const x=new Image,y=()=>{clearTimeout(E),this._loadedSrcs.add(s),this.reload.cache.delete(s),i()},_=R=>{clearTimeout(E),this.reload.cache.delete(s),o(R)};var E=setTimeout(_,a);x.src=s,x.decode==null?(x.onload=y,x.onerror=_):x.decode().then(y,_)})))}static getShared(){return this._shared==null&&(this._shared=new br),this._shared}isLoaded(s){return this._loadedSrcs.has(s)}load(s,a=br.DEFAULT_TIMEOUT){return this.isLoaded(s)?Promise.resolve():this.reload(s,a)}};$e(br,"_shared"),$e(br,"DEFAULT_TIMEOUT",1e3*60*1);let ImagesLoader=br;const DEFAULT_RETRY_COUNT=10,RETRY_INTERVAL=100;function onHTMLElementExists(r,s=DEFAULT_RETRY_COUNT){let a=1;return new Promise((i,o)=>{const x=()=>{const y=typeof r=="string"?document.getElementById(r):document.querySelector(r.selector);y?i(y):a===s?o():(a++,setTimeout(x,RETRY_INTERVAL))};x()})}function isAbortError(r){return r instanceof DOMException&&r.name==="AbortError"}function unsubscribeAll(...r){return()=>{for(const s of r)try{s()}catch{}}}function areArraysShallowEqual(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}function areTaskAlertRecordsEqual(r,s){return r!=null&&s!=null?r.repeatDays===s.repeatDays&&r.repeatEndsAfterOccurrences===s.repeatEndsAfterOccurrences&&r.repeatEndsOn===s.repeatEndsOn&&r.repeatEndType===s.repeatEndType&&r.repeatInterval===s.repeatInterval&&r.repeatMonthType===s.repeatMonthType&&r.repeatNextOccurrence===s.repeatNextOccurrence&&r.repeatStartsOn===s.repeatStartsOn&&r.type===s.type:r==null&&s==null}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords$1(r){return r.match(reAsciiWord)||[]}var _asciiWords=asciiWords$1,reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord$1(r){return reHasUnicodeWord.test(r)}var _hasUnicodeWord=hasUnicodeWord$1,rsAstralRange$3="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange$3="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="['’]",rsBreak="["+rsBreakRange+"]",rsCombo$2="["+rsComboRange$3+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange$3+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz$2="\\ud83c[\\udffb-\\udfff]",rsModifier$2="(?:"+rsCombo$2+"|"+rsFitz$2+")",rsNonAstral$2="[^"+rsAstralRange$3+"]",rsRegional$2="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$2="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ$3="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod$2=rsModifier$2+"?",rsOptVar$2="["+rsVarRange$3+"]?",rsOptJoin$2="(?:"+rsZWJ$3+"(?:"+[rsNonAstral$2,rsRegional$2,rsSurrPair$2].join("|")+")"+rsOptVar$2+reOptMod$2+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq$2=rsOptVar$2+reOptMod$2+rsOptJoin$2,rsEmoji="(?:"+[rsDingbat,rsRegional$2,rsSurrPair$2].join("|")+")"+rsSeq$2,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords$1(r){return r.match(reUnicodeWord)||[]}var _unicodeWords=unicodeWords$1,asciiWords=_asciiWords,hasUnicodeWord=_hasUnicodeWord,toString$1=toString_1,unicodeWords=_unicodeWords;function words(r,s,a){return r=toString$1(r),s=a?void 0:s,s===void 0?hasUnicodeWord(r)?unicodeWords(r):asciiWords(r):r.match(s)||[]}var words_1=words;const words$1=getDefaultExportFromCjs(words_1);function getNameInitials(r){const s=words$1(r);return s.length===1?[getFirstCharacter(s[0])]:s.length>1?[getFirstCharacter(s[0]),getFirstCharacter(s[s.length-1])]:[]}function getFirstCharacter(r){for(let s of r)return s;return""}function getFirstName(r){return r.split(" ")[0]}const re$4=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function isValidEmail(r){return re$4.test(r)}const EMOJI_RE="(©|®|[ -㌀]|\uD83C[퀀-\uDFFF]|\uD83D[퀀-\uDFFF]|\uD83E[퀀-\uDFFF])";function isSingleEmoji$1(r){return new RegExp(`^${EMOJI_RE}$`).test(r)}function capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)}var ReminderCategoryEnum=(r=>(r.NO_REMINDER="NO_REMINDER",r.OVERDUE="OVERDUE",r.LATER_TODAY="LATER_TODAY",r.THIS_EVENING="THIS_EVENING",r.TOMORROW="TOMORROW",r.THIS_WEEK="THIS_WEEK",r.NEXT_WEEK="NEXT_WEEK",r.FUTURE="FUTURE",r))(ReminderCategoryEnum||{});function getTaskReminderCategory(r,s,a){if(r==null)return"NO_REMINDER";if(hooks(a).isSameOrAfter(r,"minute"))return"OVERDUE";const i=hooks(a).startOf("day").hour(18);if(i.isAfter(r))return"LATER_TODAY";const o=hooks(a).add(1,"day");if(o.isAfter(r,"day"))return"THIS_EVENING";if(o.clone().add(1,"day").isAfter(r,"day"))return"TOMORROW";const y=getNextWeek(i,s);return y.isAfter(r,"day")?"THIS_WEEK":y.clone().add(7,"day").isAfter(r,"day")?"NEXT_WEEK":"FUTURE"}function getNextWeek(r,s){const a=r.clone();do a.add(1,"day");while(a.isoWeekday()!==s);return a}class OneTimeReminderPickerTimes{constructor({now:s,isoWeekStartDay:a}){$e(this,"laterTodayTimestamp");$e(this,"thisEveningTimestamp");$e(this,"nextWeekTimestamp");$e(this,"tomorrowTimestamp");$e(this,"somedayTimestamp",null);$e(this,"isLaterTodayVisible");$e(this,"isThisEveningVisible");const i=hooks(s),o=i.clone().add(3,"hours").startOf("hour"),x=i.clone().startOf("day").hour(18),y=i.clone().add(1,"day").startOf("day").hour(9),_=y.clone();for(;_.isoWeekday()!==a;)_.add(1,"day");this.laterTodayTimestamp=o.valueOf(),this.thisEveningTimestamp=x.valueOf(),this.nextWeekTimestamp=_.valueOf(),this.tomorrowTimestamp=y.valueOf(),this.isLaterTodayVisible=i.hour()<15,this.isThisEveningVisible=i.hour()<18,Object.freeze(this)}}function canTaskReminderAlarm(r,s,a,i){const o=s!=null&&s!==TaskRepeatingMethod.TASK_REPEAT_OFF;return r!=null&&r>i&&(!o||a==null||a>r)}function getNextIsoWeekday(r){let s=r+1;return s>7?1:s}function getIsoWeekdayListByTaskAlertRepeatDays(r,s){const a=[];let i=0,o=s;for(;i<7;i++,o=getNextIsoWeekday(o)){const x=getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(o);r.charAt(x)==="1"&&a.push(o)}return a}function getPrevIsoWeekday(r){const s=r-1;return s<1?7:s}function getWeekNumberInMonth(r,s){const a=hooks(r),i=a.date(),o=a.startOf("month").isoWeekday(),x=countRestWeekdays(o,s);return Math.floor((i+(7-x)-1)/7)+1}function countRestWeekdays(r,s){let a=0;do r=getNextIsoWeekday(r),a++;while(r!==s);return a}const EMPTY$2=[];function getDayByIsoWeekday(r){return r===7?0:r}function useCombinedRefs(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return reactExports.useMemo(()=>i=>{s.forEach(o=>o(i))},s)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(r){const s=Object.prototype.toString.call(r);return s==="[object Window]"||s==="[object global]"}function isNode$3(r){return"nodeType"in r}function getWindow(r){var s,a;return r?isWindow(r)?r:isNode$3(r)&&(s=(a=r.ownerDocument)==null?void 0:a.defaultView)!=null?s:window:window}function isDocument(r){const{Document:s}=getWindow(r);return r instanceof s}function isHTMLElement$7(r){return isWindow(r)?!1:r instanceof getWindow(r).HTMLElement}function isSVGElement(r){return r instanceof getWindow(r).SVGElement}function getOwnerDocument(r){return r?isWindow(r)?r.document:isNode$3(r)?isDocument(r)?r:isHTMLElement$7(r)||isSVGElement(r)?r.ownerDocument:document:document:document}const useIsomorphicLayoutEffect$1=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(r){const s=reactExports.useRef(r);return useIsomorphicLayoutEffect$1(()=>{s.current=r}),reactExports.useCallback(function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s.current==null?void 0:s.current(...i)},[])}function useInterval(){const r=reactExports.useRef(null),s=reactExports.useCallback((i,o)=>{r.current=setInterval(i,o)},[]),a=reactExports.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[s,a]}function useLatestValue(r,s){s===void 0&&(s=[r]);const a=reactExports.useRef(r);return useIsomorphicLayoutEffect$1(()=>{a.current!==r&&(a.current=r)},s),a}function useLazyMemo(r,s){const a=reactExports.useRef();return reactExports.useMemo(()=>{const i=r(a.current);return a.current=i,i},[...s])}function useNodeRef(r){const s=useEvent(r),a=reactExports.useRef(null),i=reactExports.useCallback(o=>{o!==a.current&&(s==null||s(o,a.current)),a.current=o},[]);return[a,i]}function usePrevious$1(r){const s=reactExports.useRef();return reactExports.useEffect(()=>{s.current=r},[r]),s.current}let ids={};function useUniqueId$1(r,s){return reactExports.useMemo(()=>{if(s)return s;const a=ids[r]==null?0:ids[r]+1;return ids[r]=a,r+"-"+a},[r,s])}function createAdjustmentFn(r){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return i.reduce((x,y)=>{const _=Object.entries(y);for(const[E,R]of _){const S=x[E];S!=null&&(x[E]=S+r*R)}return x},{...s})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(r){return"clientX"in r&&"clientY"in r}function isKeyboardEvent(r){if(!r)return!1;const{KeyboardEvent:s}=getWindow(r.target);return s&&r instanceof s}function isTouchEvent(r){if(!r)return!1;const{TouchEvent:s}=getWindow(r.target);return s&&r instanceof s}function getEventCoordinates(r){if(isTouchEvent(r)){if(r.touches&&r.touches.length){const{clientX:s,clientY:a}=r.touches[0];return{x:s,y:a}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:s,clientY:a}=r.changedTouches[0];return{x:s,y:a}}}return hasViewportRelativeCoordinates(r)?{x:r.clientX,y:r.clientY}:null}const CSS=Object.freeze({Translate:{toString(r){if(!r)return;const{x:s,y:a}=r;return"translate3d("+(s?Math.round(s):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:s,scaleY:a}=r;return"scaleX("+s+") scaleY("+a+")"}},Transform:{toString(r){if(r)return[CSS.Translate.toString(r),CSS.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:s,duration:a,easing:i}=r;return s+" "+a+"ms "+i}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(r){return r.matches(SELECTOR)?r:r.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(r){let{id:s,value:a}=r;return React$6.createElement("div",{id:s,style:hiddenStyles},a)}function LiveRegion(r){let{id:s,announcement:a,ariaLiveType:i="assertive"}=r;const o={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React$6.createElement("div",{id:s,style:o,role:"status","aria-live":i,"aria-atomic":!0},a)}function useAnnouncement(){const[r,s]=reactExports.useState("");return{announce:reactExports.useCallback(i=>{i!=null&&s(i)},[]),announcement:r}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(r){const s=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(r)},[r,s])}function useDndMonitorProvider(){const[r]=reactExports.useState(()=>new Set),s=reactExports.useCallback(i=>(r.add(i),()=>r.delete(i)),[r]);return[reactExports.useCallback(i=>{let{type:o,event:x}=i;r.forEach(y=>{var _;return(_=y[o])==null?void 0:_.call(y,x)})},[r]),s]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(r){let{active:s}=r;return"Picked up draggable item "+s.id+"."},onDragOver(r){let{active:s,over:a}=r;return a?"Draggable item "+s.id+" was moved over droppable area "+a.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(r){let{active:s,over:a}=r;return a?"Draggable item "+s.id+" was dropped over droppable area "+a.id:"Draggable item "+s.id+" was dropped."},onDragCancel(r){let{active:s}=r;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Accessibility(r){let{announcements:s=defaultAnnouncements,container:a,hiddenTextDescribedById:i,screenReaderInstructions:o=defaultScreenReaderInstructions}=r;const{announce:x,announcement:y}=useAnnouncement(),_=useUniqueId$1("DndLiveRegion"),[E,R]=reactExports.useState(!1);if(reactExports.useEffect(()=>{R(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(j){let{active:T}=j;x(s.onDragStart({active:T}))},onDragMove(j){let{active:T,over:A}=j;s.onDragMove&&x(s.onDragMove({active:T,over:A}))},onDragOver(j){let{active:T,over:A}=j;x(s.onDragOver({active:T,over:A}))},onDragEnd(j){let{active:T,over:A}=j;x(s.onDragEnd({active:T,over:A}))},onDragCancel(j){let{active:T,over:A}=j;x(s.onDragCancel({active:T,over:A}))}}),[x,s])),!E)return null;const S=React$6.createElement(React$6.Fragment,null,React$6.createElement(HiddenText,{id:i,value:o.draggable}),React$6.createElement(LiveRegion,{id:_,announcement:y}));return a?reactDomExports.createPortal(S,a):S}var Action;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop$3(){}function useSensor(r,s){return reactExports.useMemo(()=>({sensor:r,options:s!=null?s:{}}),[r,s])}function useSensors(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return reactExports.useMemo(()=>[...s].filter(i=>i!=null),[...s])}const defaultCoordinates$1=Object.freeze({x:0,y:0});function distanceBetween(r,s){return Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))}function getRelativeTransformOrigin(r,s){const a=getEventCoordinates(r);if(!a)return"0 0";const i={x:(a.x-s.left)/s.width*100,y:(a.y-s.top)/s.height*100};return i.x+"% "+i.y+"%"}function sortCollisionsAsc(r,s){let{data:{value:a}}=r,{data:{value:i}}=s;return a-i}function sortCollisionsDesc(r,s){let{data:{value:a}}=r,{data:{value:i}}=s;return i-a}function cornersOfRectangle(r){let{left:s,top:a,height:i,width:o}=r;return[{x:s,y:a},{x:s+o,y:a},{x:s,y:a+i},{x:s+o,y:a+i}]}function getFirstCollision(r,s){if(!r||r.length===0)return null;const[a]=r;return a[s]}function centerOfRectangle(r,s,a){return s===void 0&&(s=r.left),a===void 0&&(a=r.top),{x:s+r.width*.5,y:a+r.height*.5}}const closestCenter=r=>{let{collisionRect:s,droppableRects:a,droppableContainers:i}=r;const o=centerOfRectangle(s,s.left,s.top),x=[];for(const y of i){const{id:_}=y,E=a.get(_);if(E){const R=distanceBetween(centerOfRectangle(E),o);x.push({id:_,data:{droppableContainer:y,value:R}})}}return x.sort(sortCollisionsAsc)},closestCorners=r=>{let{collisionRect:s,droppableRects:a,droppableContainers:i}=r;const o=cornersOfRectangle(s),x=[];for(const y of i){const{id:_}=y,E=a.get(_);if(E){const R=cornersOfRectangle(E),S=o.reduce((T,A,M)=>T+distanceBetween(R[M],A),0),j=Number((S/4).toFixed(4));x.push({id:_,data:{droppableContainer:y,value:j}})}}return x.sort(sortCollisionsAsc)};function getIntersectionRatio(r,s){const a=Math.max(s.top,r.top),i=Math.max(s.left,r.left),o=Math.min(s.left+s.width,r.left+r.width),x=Math.min(s.top+s.height,r.top+r.height),y=o-i,_=x-a;if(i<o&&a<x){const E=s.width*s.height,R=r.width*r.height,S=y*_,j=S/(E+R-S);return Number(j.toFixed(4))}return 0}const rectIntersection=r=>{let{collisionRect:s,droppableRects:a,droppableContainers:i}=r;const o=[];for(const x of i){const{id:y}=x,_=a.get(y);if(_){const E=getIntersectionRatio(_,s);E>0&&o.push({id:y,data:{droppableContainer:x,value:E}})}}return o.sort(sortCollisionsDesc)};function adjustScale(r,s,a){return{...r,scaleX:s&&a?s.width/a.width:1,scaleY:s&&a?s.height/a.height:1}}function getRectDelta(r,s){return r&&s?{x:r.left-s.left,y:r.top-s.top}:defaultCoordinates$1}function createRectAdjustmentFn(r){return function(a){for(var i=arguments.length,o=new Array(i>1?i-1:0),x=1;x<i;x++)o[x-1]=arguments[x];return o.reduce((y,_)=>({...y,top:y.top+r*_.y,bottom:y.bottom+r*_.y,left:y.left+r*_.x,right:y.right+r*_.x}),{...a})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(r){if(r.startsWith("matrix3d(")){const s=r.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(r.startsWith("matrix(")){const s=r.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function inverseTransform(r,s,a){const i=parseTransform(s);if(!i)return r;const{scaleX:o,scaleY:x,x:y,y:_}=i,E=r.left-y-(1-o)*parseFloat(a),R=r.top-_-(1-x)*parseFloat(a.slice(a.indexOf(" ")+1)),S=o?r.width/o:r.width,j=x?r.height/x:r.height;return{width:S,height:j,top:R,right:E+S,bottom:R+j,left:E}}const defaultOptions$1={ignoreTransform:!1};function getClientRect(r,s){s===void 0&&(s=defaultOptions$1);let a=r.getBoundingClientRect();if(s.ignoreTransform){const{transform:R,transformOrigin:S}=getWindow(r).getComputedStyle(r);R&&(a=inverseTransform(a,R,S))}const{top:i,left:o,width:x,height:y,bottom:_,right:E}=a;return{top:i,left:o,width:x,height:y,bottom:_,right:E}}function getTransformAgnosticClientRect(r){return getClientRect(r,{ignoreTransform:!0})}function getWindowClientRect(r){const s=r.innerWidth,a=r.innerHeight;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}function isFixed(r,s){return s===void 0&&(s=getWindow(r).getComputedStyle(r)),s.position==="fixed"}function isScrollable(r,s){s===void 0&&(s=getWindow(r).getComputedStyle(r));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const x=s[o];return typeof x=="string"?a.test(x):!1})}function getScrollableAncestors(r,s){const a=[];function i(o){if(s!=null&&a.length>=s||!o)return a;if(isDocument(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!isHTMLElement$7(o)||isSVGElement(o)||a.includes(o))return a;const x=getWindow(r).getComputedStyle(o);return o!==r&&isScrollable(o,x)&&a.push(o),isFixed(o,x)?a:i(o.parentNode)}return r?i(r):a}function getFirstScrollableAncestor(r){const[s]=getScrollableAncestors(r,1);return s!=null?s:null}function getScrollableElement(r){return!canUseDOM||!r?null:isWindow(r)?r:isNode$3(r)?isDocument(r)||r===getOwnerDocument(r).scrollingElement?window:isHTMLElement$7(r)?r:null:null}function getScrollXCoordinate(r){return isWindow(r)?r.scrollX:r.scrollLeft}function getScrollYCoordinate(r){return isWindow(r)?r.scrollY:r.scrollTop}function getScrollCoordinates(r){return{x:getScrollXCoordinate(r),y:getScrollYCoordinate(r)}}var Direction;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(r){return!canUseDOM||!r?!1:r===document.scrollingElement}function getScrollPosition$4(r){const s={x:0,y:0},a=isDocumentScrollingElement(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},i={x:r.scrollWidth-a.width,y:r.scrollHeight-a.height},o=r.scrollTop<=s.y,x=r.scrollLeft<=s.x,y=r.scrollTop>=i.y,_=r.scrollLeft>=i.x;return{isTop:o,isLeft:x,isBottom:y,isRight:_,maxScroll:i,minScroll:s}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(r,s,a,i,o){let{top:x,left:y,right:_,bottom:E}=a;i===void 0&&(i=10),o===void 0&&(o=defaultThreshold);const{isTop:R,isBottom:S,isLeft:j,isRight:T}=getScrollPosition$4(r),A={x:0,y:0},M={x:0,y:0},P={height:s.height*o.y,width:s.width*o.x};return!R&&x<=s.top+P.height?(A.y=Direction.Backward,M.y=i*Math.abs((s.top+P.height-x)/P.height)):!S&&E>=s.bottom-P.height&&(A.y=Direction.Forward,M.y=i*Math.abs((s.bottom-P.height-E)/P.height)),!T&&_>=s.right-P.width?(A.x=Direction.Forward,M.x=i*Math.abs((s.right-P.width-_)/P.width)):!j&&y<=s.left+P.width&&(A.x=Direction.Backward,M.x=i*Math.abs((s.left+P.width-y)/P.width)),{direction:A,speed:M}}function getScrollElementRect(r){if(r===document.scrollingElement){const{innerWidth:x,innerHeight:y}=window;return{top:0,left:0,right:x,bottom:y,width:x,height:y}}const{top:s,left:a,right:i,bottom:o}=r.getBoundingClientRect();return{top:s,left:a,right:i,bottom:o,width:r.clientWidth,height:r.clientHeight}}function getScrollOffsets(r){return r.reduce((s,a)=>add(s,getScrollCoordinates(a)),defaultCoordinates$1)}function getScrollXOffset(r){return r.reduce((s,a)=>s+getScrollXCoordinate(a),0)}function getScrollYOffset(r){return r.reduce((s,a)=>s+getScrollYCoordinate(a),0)}function scrollIntoViewIfNeeded(r,s){if(s===void 0&&(s=getClientRect),!r)return;const{top:a,left:i,bottom:o,right:x}=s(r);getFirstScrollableAncestor(r)&&(o<=0||x<=0||a>=window.innerHeight||i>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(s,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=getScrollableAncestors(a),o=getScrollOffsets(i);this.rect={...s},this.width=s.width,this.height=s.height;for(const[x,y,_]of properties)for(const E of y)Object.defineProperty(this,E,{get:()=>{const R=_(i),S=o[x]-R;return this.rect[E]+S},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}let Listeners$1=class{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...a)})},this.target=s}add(s,a,i){var o;(o=this.target)==null||o.addEventListener(s,a,i),this.listeners.push([s,a,i])}};function getEventListenerTarget(r){const{EventTarget:s}=getWindow(r);return r instanceof s?r:getOwnerDocument(r)}function hasExceededDistance$1(r,s){const a=Math.abs(r.x),i=Math.abs(r.y);return typeof s=="number"?Math.sqrt(a**2+i**2)>s:"x"in s&&"y"in s?a>s.x&&i>s.y:"x"in s?a>s.x:"y"in s?i>s.y:!1}var EventName;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault$1(r){r.preventDefault()}function stopPropagation$1(r){r.stopPropagation()}var KeyboardCode;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter]},defaultKeyboardCoordinateGetter=(r,s)=>{let{currentCoordinates:a}=s;switch(r.code){case KeyboardCode.Right:return{...a,x:a.x+25};case KeyboardCode.Left:return{...a,x:a.x-25};case KeyboardCode.Down:return{...a,y:a.y+25};case KeyboardCode.Up:return{...a,y:a.y-25}}};class KeyboardSensor{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:a}}=s;this.props=s,this.listeners=new Listeners$1(getOwnerDocument(a)),this.windowListeners=new Listeners$1(getWindow(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:a}=this.props,i=s.node.current;i&&scrollIntoViewIfNeeded(i),a(defaultCoordinates$1)}handleKeyDown(s){if(isKeyboardEvent(s)){const{active:a,context:i,options:o}=this.props,{keyboardCodes:x=defaultKeyboardCodes,coordinateGetter:y=defaultKeyboardCoordinateGetter,scrollBehavior:_="smooth"}=o,{code:E}=s;if(x.end.includes(E)){this.handleEnd(s);return}if(x.cancel.includes(E)){this.handleCancel(s);return}const{collisionRect:R}=i.current,S=R?{x:R.left,y:R.top}:defaultCoordinates$1;this.referenceCoordinates||(this.referenceCoordinates=S);const j=y(s,{active:a,context:i.current,currentCoordinates:S});if(j){const T=subtract(j,S),A={x:0,y:0},{scrollableAncestors:M}=i.current;for(const P of M){const L=s.code,{isTop:D,isRight:O,isLeft:B,isBottom:N,maxScroll:F,minScroll:W}=getScrollPosition$4(P),V=getScrollElementRect(P),U={x:Math.min(L===KeyboardCode.Right?V.right-V.width/2:V.right,Math.max(L===KeyboardCode.Right?V.left:V.left+V.width/2,j.x)),y:Math.min(L===KeyboardCode.Down?V.bottom-V.height/2:V.bottom,Math.max(L===KeyboardCode.Down?V.top:V.top+V.height/2,j.y))},G=L===KeyboardCode.Right&&!O||L===KeyboardCode.Left&&!B,oe=L===KeyboardCode.Down&&!N||L===KeyboardCode.Up&&!D;if(G&&U.x!==j.x){const X=P.scrollLeft+T.x,ee=L===KeyboardCode.Right&&X<=F.x||L===KeyboardCode.Left&&X>=W.x;if(ee&&!T.y){P.scrollTo({left:X,behavior:_});return}ee?A.x=P.scrollLeft-X:A.x=L===KeyboardCode.Right?P.scrollLeft-F.x:P.scrollLeft-W.x,A.x&&P.scrollBy({left:-A.x,behavior:_});break}else if(oe&&U.y!==j.y){const X=P.scrollTop+T.y,ee=L===KeyboardCode.Down&&X<=F.y||L===KeyboardCode.Up&&X>=W.y;if(ee&&!T.x){P.scrollTo({top:X,behavior:_});return}ee?A.y=P.scrollTop-X:A.y=L===KeyboardCode.Down?P.scrollTop-F.y:P.scrollTop-W.y,A.y&&P.scrollBy({top:-A.y,behavior:_});break}}this.handleMove(s,add(subtract(j,this.referenceCoordinates),A))}}}handleMove(s,a){const{onMove:i}=this.props;s.preventDefault(),i(a)}handleEnd(s){const{onEnd:a}=this.props;s.preventDefault(),this.detach(),a()}handleCancel(s){const{onCancel:a}=this.props;s.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(r,s,a)=>{let{keyboardCodes:i=defaultKeyboardCodes,onActivation:o}=s,{active:x}=a;const{code:y}=r.nativeEvent;if(i.start.includes(y)){const _=x.activatorNode.current;return _&&r.target!==_?!1:(r.preventDefault(),o==null||o({event:r.nativeEvent}),!0)}return!1}}];function isDistanceConstraint$1(r){return!!(r&&"distance"in r)}function isDelayConstraint$1(r){return!!(r&&"delay"in r)}class AbstractPointerSensor{constructor(s,a,i){var o;i===void 0&&(i=getEventListenerTarget(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=a;const{event:x}=s,{target:y}=x;this.props=s,this.events=a,this.document=getOwnerDocument(y),this.documentListeners=new Listeners$1(this.document),this.listeners=new Listeners$1(i),this.windowListeners=new Listeners$1(getWindow(y)),this.initialCoordinates=(o=getEventCoordinates(x))!=null?o:defaultCoordinates$1,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:a,bypassActivationConstraint:i}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault$1),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault$1),this.documentListeners.add(EventName.Keydown,this.handleKeydown),a){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint$1(a)){this.timeoutId=setTimeout(this.handleStart,a.delay);return}if(isDistanceConstraint$1(a))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:s}=this,{onStart:a}=this.props;s&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation$1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),a(s))}handleMove(s){var a;const{activated:i,initialCoordinates:o,props:x}=this,{onMove:y,options:{activationConstraint:_}}=x;if(!o)return;const E=(a=getEventCoordinates(s))!=null?a:defaultCoordinates$1,R=subtract(o,E);if(!i&&_){if(isDistanceConstraint$1(_)){if(_.tolerance!=null&&hasExceededDistance$1(R,_.tolerance))return this.handleCancel();if(hasExceededDistance$1(R,_.distance))return this.handleStart()}return isDelayConstraint$1(_)&&hasExceededDistance$1(R,_.tolerance)?this.handleCancel():void 0}s.cancelable&&s.preventDefault(),y(E)}handleEnd(){const{onEnd:s}=this.props;this.detach(),s()}handleCancel(){const{onCancel:s}=this.props;this.detach(),s()}handleKeydown(s){s.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const events$1={move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(s){const{event:a}=s,i=getOwnerDocument(a.target);super(s,events$1,i)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(r,s)=>{let{nativeEvent:a}=r,{onActivation:i}=s;return!a.isPrimary||a.button!==0?!1:(i==null||i({event:a}),!0)}}];const events$1$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(r){r[r.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(s){super(s,events$1$1,getOwnerDocument(s.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(r,s)=>{let{nativeEvent:a}=r,{onActivation:i}=s;return a.button===MouseButton.RightClick?!1:(i==null||i({event:a}),!0)}}];const events$2={move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(s){super(s,events$2)}static setup(){return window.addEventListener(events$2.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,s)};function s(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(r,s)=>{let{nativeEvent:a}=r,{onActivation:i}=s;const{touches:o}=a;return o.length>1?!1:(i==null||i({event:a}),!0)}}];var AutoScrollActivator;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(r){let{acceleration:s,activator:a=AutoScrollActivator.Pointer,canScroll:i,draggingRect:o,enabled:x,interval:y=5,order:_=TraversalOrder.TreeOrder,pointerCoordinates:E,scrollableAncestors:R,scrollableAncestorRects:S,delta:j,threshold:T}=r;const A=useScrollIntent({delta:j,disabled:!x}),[M,P]=useInterval(),L=reactExports.useRef({x:0,y:0}),D=reactExports.useRef({x:0,y:0}),O=reactExports.useMemo(()=>{switch(a){case AutoScrollActivator.Pointer:return E?{top:E.y,bottom:E.y,left:E.x,right:E.x}:null;case AutoScrollActivator.DraggableRect:return o}},[a,o,E]),B=reactExports.useRef(null),N=reactExports.useCallback(()=>{const W=B.current;if(!W)return;const V=L.current.x*D.current.x,U=L.current.y*D.current.y;W.scrollBy(V,U)},[]),F=reactExports.useMemo(()=>_===TraversalOrder.TreeOrder?[...R].reverse():R,[_,R]);reactExports.useEffect(()=>{if(!x||!R.length||!O){P();return}for(const W of F){if((i==null?void 0:i(W))===!1)continue;const V=R.indexOf(W),U=S[V];if(!U)continue;const{direction:G,speed:oe}=getScrollDirectionAndSpeed(W,U,O,s,T);for(const X of["x","y"])A[X][G[X]]||(oe[X]=0,G[X]=0);if(oe.x>0||oe.y>0){P(),B.current=W,M(N,y),L.current=oe,D.current=G;return}}L.current={x:0,y:0},D.current={x:0,y:0},P()},[s,N,i,P,x,y,JSON.stringify(O),JSON.stringify(A),M,R,F,S,JSON.stringify(T)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(r){let{delta:s,disabled:a}=r;const i=usePrevious$1(s);return useLazyMemo(o=>{if(a||!i||!o)return defaultScrollIntent;const x={x:Math.sign(s.x-i.x),y:Math.sign(s.y-i.y)};return{x:{[Direction.Backward]:o.x[Direction.Backward]||x.x===-1,[Direction.Forward]:o.x[Direction.Forward]||x.x===1},y:{[Direction.Backward]:o.y[Direction.Backward]||x.y===-1,[Direction.Forward]:o.y[Direction.Forward]||x.y===1}}},[a,s,i])}function useCachedNode(r,s){const a=s!==null?r.get(s):void 0,i=a?a.node.current:null;return useLazyMemo(o=>{var x;return s===null?null:(x=i!=null?i:o)!=null?x:null},[i,s])}function useCombineActivators(r,s){return reactExports.useMemo(()=>r.reduce((a,i)=>{const{sensor:o}=i,x=o.activators.map(y=>({eventName:y.eventName,handler:s(y.handler,i)}));return[...a,...x]},[]),[r,s])}var MeasuringStrategy;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(r){r.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(r,s){let{dragging:a,dependencies:i,config:o}=s;const[x,y]=reactExports.useState(null),{frequency:_,measure:E,strategy:R}=o,S=reactExports.useRef(r),j=L(),T=useLatestValue(j),A=reactExports.useCallback(function(D){D===void 0&&(D=[]),!T.current&&y(O=>O===null?D:O.concat(D.filter(B=>!O.includes(B))))},[T]),M=reactExports.useRef(null),P=useLazyMemo(D=>{if(j&&!a)return defaultValue;if(!D||D===defaultValue||S.current!==r||x!=null){const O=new Map;for(let B of r){if(!B)continue;if(x&&x.length>0&&!x.includes(B.id)&&B.rect.current){O.set(B.id,B.rect.current);continue}const N=B.node.current,F=N?new Rect(E(N),N):null;B.rect.current=F,F&&O.set(B.id,F)}return O}return D},[r,x,a,j,E]);return reactExports.useEffect(()=>{S.current=r},[r]),reactExports.useEffect(()=>{j||A()},[a,j]),reactExports.useEffect(()=>{x&&x.length>0&&y(null)},[JSON.stringify(x)]),reactExports.useEffect(()=>{j||typeof _!="number"||M.current!==null||(M.current=setTimeout(()=>{A(),M.current=null},_))},[_,j,A,...i]),{droppableRects:P,measureDroppableContainers:A,measuringScheduled:x!=null};function L(){switch(R){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return a;default:return!a}}}function useInitialValue(r,s){return useLazyMemo(a=>r?a||(typeof s=="function"?s(r):r):null,[s,r])}function useInitialRect(r,s){return useInitialValue(r,s)}function useMutationObserver(r){let{callback:s,disabled:a}=r;const i=useEvent(s),o=reactExports.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:x}=window;return new x(i)},[i,a]);return reactExports.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function useResizeObserver(r){let{callback:s,disabled:a}=r;const i=useEvent(s),o=reactExports.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:x}=window;return new x(i)},[a]);return reactExports.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function defaultMeasure(r){return new Rect(getClientRect(r),r)}function useRect(r,s,a){s===void 0&&(s=defaultMeasure);const[i,o]=reactExports.useReducer(_,null),x=useMutationObserver({callback(E){if(r)for(const R of E){const{type:S,target:j}=R;if(S==="childList"&&j instanceof HTMLElement&&j.contains(r)){o();break}}}}),y=useResizeObserver({callback:o});return useIsomorphicLayoutEffect$1(()=>{o(),r?(y==null||y.observe(r),x==null||x.observe(document.body,{childList:!0,subtree:!0})):(y==null||y.disconnect(),x==null||x.disconnect())},[r]),i;function _(E){if(!r)return null;if(r.isConnected===!1){var R;return(R=E!=null?E:a)!=null?R:null}const S=s(r);return JSON.stringify(E)===JSON.stringify(S)?E:S}}function useRectDelta(r){const s=useInitialValue(r);return getRectDelta(r,s)}const defaultValue$1=[];function useScrollableAncestors(r){const s=reactExports.useRef(r),a=useLazyMemo(i=>r?i&&i!==defaultValue$1&&r&&s.current&&r.parentNode===s.current.parentNode?i:getScrollableAncestors(r):defaultValue$1,[r]);return reactExports.useEffect(()=>{s.current=r},[r]),a}function useScrollOffsets(r){const[s,a]=reactExports.useState(null),i=reactExports.useRef(r),o=reactExports.useCallback(x=>{const y=getScrollableElement(x.target);y&&a(_=>_?(_.set(y,getScrollCoordinates(y)),new Map(_)):null)},[]);return reactExports.useEffect(()=>{const x=i.current;if(r!==x){y(x);const _=r.map(E=>{const R=getScrollableElement(E);return R?(R.addEventListener("scroll",o,{passive:!0}),[R,getScrollCoordinates(R)]):null}).filter(E=>E!=null);a(_.length?new Map(_):null),i.current=r}return()=>{y(r),y(x)};function y(_){_.forEach(E=>{const R=getScrollableElement(E);R==null||R.removeEventListener("scroll",o)})}},[o,r]),reactExports.useMemo(()=>r.length?s?Array.from(s.values()).reduce((x,y)=>add(x,y),defaultCoordinates$1):getScrollOffsets(r):defaultCoordinates$1,[r,s])}function useScrollOffsetsDelta(r,s){s===void 0&&(s=[]);const a=reactExports.useRef(null);return reactExports.useEffect(()=>{a.current=null},s),reactExports.useEffect(()=>{const i=r!==defaultCoordinates$1;i&&!a.current&&(a.current=r),!i&&a.current&&(a.current=null)},[r]),a.current?subtract(r,a.current):defaultCoordinates$1}function useSensorSetup(r){reactExports.useEffect(()=>{if(!canUseDOM)return;const s=r.map(a=>{let{sensor:i}=a;return i.setup==null?void 0:i.setup()});return()=>{for(const a of s)a==null||a()}},r.map(s=>{let{sensor:a}=s;return a}))}function useSyntheticListeners(r,s){return reactExports.useMemo(()=>r.reduce((a,i)=>{let{eventName:o,handler:x}=i;return a[o]=y=>{x(y,s)},a},{}),[r,s])}function useWindowRect(r){return reactExports.useMemo(()=>r?getWindowClientRect(r):null,[r])}const defaultValue$2=[];function useRects(r,s){s===void 0&&(s=getClientRect);const[a]=r,i=useWindowRect(a?getWindow(a):null),[o,x]=reactExports.useReducer(_,defaultValue$2),y=useResizeObserver({callback:x});return r.length>0&&o===defaultValue$2&&x(),useIsomorphicLayoutEffect$1(()=>{r.length?r.forEach(E=>y==null?void 0:y.observe(E)):(y==null||y.disconnect(),x())},[r]),o;function _(){return r.length?r.map(E=>isDocumentScrollingElement(E)?i:new Rect(s(E),E)):defaultValue$2}}function getMeasurableNode(r){if(!r)return null;if(r.children.length>1)return r;const s=r.children[0];return isHTMLElement$7(s)?s:r}function useDragOverlayMeasuring(r){let{measure:s}=r;const[a,i]=reactExports.useState(null),o=reactExports.useCallback(R=>{for(const{target:S}of R)if(isHTMLElement$7(S)){i(j=>{const T=s(S);return j?{...j,width:T.width,height:T.height}:T});break}},[s]),x=useResizeObserver({callback:o}),y=reactExports.useCallback(R=>{const S=getMeasurableNode(R);x==null||x.disconnect(),S&&(x==null||x.observe(S)),i(S?s(S):null)},[s,x]),[_,E]=useNodeRef(y);return reactExports.useMemo(()=>({nodeRef:_,rect:a,setRef:E}),[a,_,E])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(s){var a;return s!=null&&(a=super.get(s))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:a}=s;return!a})}getNodeFor(s){var a,i;return(a=(i=this.get(s))==null?void 0:i.node.current)!=null?a:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$3},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$3,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop$3,draggableNodes:new Map,over:null,measureDroppableContainers:noop$3},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer$4(r,s){switch(s.type){case Action.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Action.DragMove:return r.draggable.active?{...r,draggable:{...r.draggable,translate:{x:s.coordinates.x-r.draggable.initialCoordinates.x,y:s.coordinates.y-r.draggable.initialCoordinates.y}}}:r;case Action.DragEnd:case Action.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:a}=s,{id:i}=a,o=new DroppableContainersMap(r.droppable.containers);return o.set(i,a),{...r,droppable:{...r.droppable,containers:o}}}case Action.SetDroppableDisabled:{const{id:a,key:i,disabled:o}=s,x=r.droppable.containers.get(a);if(!x||i!==x.key)return r;const y=new DroppableContainersMap(r.droppable.containers);return y.set(a,{...x,disabled:o}),{...r,droppable:{...r.droppable,containers:y}}}case Action.UnregisterDroppable:{const{id:a,key:i}=s,o=r.droppable.containers.get(a);if(!o||i!==o.key)return r;const x=new DroppableContainersMap(r.droppable.containers);return x.delete(a),{...r,droppable:{...r.droppable,containers:x}}}default:return r}}function RestoreFocus(r){let{disabled:s}=r;const{active:a,activatorEvent:i,draggableNodes:o}=reactExports.useContext(InternalContext),x=usePrevious$1(i),y=usePrevious$1(a==null?void 0:a.id);return reactExports.useEffect(()=>{if(!s&&!i&&x&&y!=null){if(!isKeyboardEvent(x)||document.activeElement===x.target)return;const _=o.get(y);if(!_)return;const{activatorNode:E,node:R}=_;if(!E.current&&!R.current)return;requestAnimationFrame(()=>{for(const S of[E.current,R.current]){if(!S)continue;const j=findFirstFocusableNode(S);if(j){j.focus();break}}})}},[i,s,o,y,x]),null}function applyModifiers(r,s){let{transform:a,...i}=s;return r!=null&&r.length?r.reduce((o,x)=>x({transform:o,...i}),a):a}function useMeasuringConfiguration(r){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...r==null?void 0:r.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...r==null?void 0:r.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...r==null?void 0:r.dragOverlay}}),[r==null?void 0:r.draggable,r==null?void 0:r.droppable,r==null?void 0:r.dragOverlay])}function useLayoutShiftScrollCompensation(r){let{activeNode:s,measure:a,initialRect:i,config:o=!0}=r;const x=reactExports.useRef(!1),{x:y,y:_}=typeof o=="boolean"?{x:o,y:o}:o;useIsomorphicLayoutEffect$1(()=>{if(!y&&!_||!s){x.current=!1;return}if(x.current||!i)return;const R=s==null?void 0:s.node.current;if(!R||R.isConnected===!1)return;const S=a(R),j=getRectDelta(S,i);if(y||(j.x=0),_||(j.y=0),x.current=!0,Math.abs(j.x)>0||Math.abs(j.y)>0){const T=getFirstScrollableAncestor(R);T&&T.scrollBy({top:j.y,left:j.x})}},[s,y,_,i,a])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates$1,scaleX:1,scaleY:1});var Status;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function(s){var a,i,o,x;let{id:y,accessibility:_,autoScroll:E=!0,children:R,sensors:S=defaultSensors,collisionDetection:j=rectIntersection,measuring:T,modifiers:A,...M}=s;const P=reactExports.useReducer(reducer$4,void 0,getInitialState),[L,D]=P,[O,B]=useDndMonitorProvider(),[N,F]=reactExports.useState(Status.Uninitialized),W=N===Status.Initialized,{draggable:{active:V,nodes:U,translate:G},droppable:{containers:oe}}=L,X=V?U.get(V):null,ee=reactExports.useRef({initial:null,translated:null}),ae=reactExports.useMemo(()=>{var Ze;return V!=null?{id:V,data:(Ze=X==null?void 0:X.data)!=null?Ze:defaultData,rect:ee}:null},[V,X]),ie=reactExports.useRef(null),[se,Q]=reactExports.useState(null),[Z,J]=reactExports.useState(null),te=useLatestValue(M,Object.values(M)),de=useUniqueId$1("DndDescribedBy",y),ce=reactExports.useMemo(()=>oe.getEnabled(),[oe]),me=useMeasuringConfiguration(T),{droppableRects:ve,measureDroppableContainers:xe,measuringScheduled:ge}=useDroppableMeasuring(ce,{dragging:W,dependencies:[G.x,G.y],config:me.droppable}),be=useCachedNode(U,V),ye=reactExports.useMemo(()=>Z?getEventCoordinates(Z):null,[Z]),Ie=Ge(),Pe=useInitialRect(be,me.draggable.measure);useLayoutShiftScrollCompensation({activeNode:V?U.get(V):null,config:Ie.layoutShiftCompensation,initialRect:Pe,measure:me.draggable.measure});const we=useRect(be,me.draggable.measure,Pe),Re=useRect(be?be.parentElement:null),Se=reactExports.useRef({activatorEvent:null,active:null,activeNode:be,collisionRect:null,collisions:null,droppableRects:ve,draggableNodes:U,draggingNode:null,draggingNodeRect:null,droppableContainers:oe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ee=oe.getNodeFor((a=Se.current.over)==null?void 0:a.id),Ce=useDragOverlayMeasuring({measure:me.dragOverlay.measure}),he=(i=Ce.nodeRef.current)!=null?i:be,Ae=W?(o=Ce.rect)!=null?o:we:null,Ne=!!(Ce.nodeRef.current&&Ce.rect),Be=useRectDelta(Ne?null:we),Oe=useWindowRect(he?getWindow(he):null),Ue=useScrollableAncestors(W?Ee!=null?Ee:be:null),Ve=useRects(Ue),We=applyModifiers(A,{transform:{x:G.x-Be.x,y:G.y-Be.y,scaleX:1,scaleY:1},activatorEvent:Z,active:ae,activeNodeRect:we,containerNodeRect:Re,draggingNodeRect:Ae,over:Se.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:Ue,scrollableAncestorRects:Ve,windowRect:Oe}),Te=ye?add(ye,G):null,De=useScrollOffsets(Ue),Le=useScrollOffsetsDelta(De),Fe=useScrollOffsetsDelta(De,[we]),Ke=add(We,Le),nt=Ae?getAdjustedRect(Ae,We):null,qe=ae&&nt?j({active:ae,collisionRect:nt,droppableRects:ve,droppableContainers:ce,pointerCoordinates:Te}):null,Je=getFirstCollision(qe,"id"),[Qe,Wt]=reactExports.useState(null),ct=Ne?We:add(We,Fe),qt=adjustScale(ct,(x=Qe==null?void 0:Qe.rect)!=null?x:null,we),it=reactExports.useCallback((Ze,et)=>{let{sensor:dt,options:Ct}=et;if(ie.current==null)return;const mt=U.get(ie.current);if(!mt)return;const yt=Ze.nativeEvent,Ft=new dt({active:ie.current,activeNode:mt,event:yt,options:Ct,context:Se,onStart(Kt){const tr=ie.current;if(tr==null)return;const ar=U.get(tr);if(!ar)return;const{onDragStart:ir}=te.current,lr={active:{id:tr,data:ar.data,rect:ee}};reactDomExports.unstable_batchedUpdates(()=>{ir==null||ir(lr),F(Status.Initializing),D({type:Action.DragStart,initialCoordinates:Kt,active:tr}),O({type:"onDragStart",event:lr})})},onMove(Kt){D({type:Action.DragMove,coordinates:Kt})},onEnd:Rt(Action.DragEnd),onCancel:Rt(Action.DragCancel)});reactDomExports.unstable_batchedUpdates(()=>{Q(Ft),J(Ze.nativeEvent)});function Rt(Kt){return async function(){const{active:ar,collisions:ir,over:lr,scrollAdjustedTranslate:Xe}=Se.current;let $t=null;if(ar&&Xe){const{cancelDrop:Ut}=te.current;$t={activatorEvent:yt,active:ar,collisions:ir,delta:Xe,over:lr},Kt===Action.DragEnd&&typeof Ut=="function"&&await Promise.resolve(Ut($t))&&(Kt=Action.DragCancel)}ie.current=null,reactDomExports.unstable_batchedUpdates(()=>{D({type:Kt}),F(Status.Uninitialized),Wt(null),Q(null),J(null);const Ut=Kt===Action.DragEnd?"onDragEnd":"onDragCancel";if($t){const Yt=te.current[Ut];Yt==null||Yt($t),O({type:Ut,event:$t})}})}}},[U]),sr=reactExports.useCallback((Ze,et)=>(dt,Ct)=>{const mt=dt.nativeEvent,yt=U.get(Ct);if(ie.current!==null||!yt||mt.dndKit||mt.defaultPrevented)return;const Ft={active:yt};Ze(dt,et.options,Ft)===!0&&(mt.dndKit={capturedBy:et.sensor},ie.current=Ct,it(dt,et))},[U,it]),st=useCombineActivators(S,sr);useSensorSetup(S),useIsomorphicLayoutEffect$1(()=>{we&&N===Status.Initializing&&F(Status.Initialized)},[we,N]),reactExports.useEffect(()=>{const{onDragMove:Ze}=te.current,{active:et,activatorEvent:dt,collisions:Ct,over:mt}=Se.current;if(!et||!dt)return;const yt={active:et,activatorEvent:dt,collisions:Ct,delta:{x:Ke.x,y:Ke.y},over:mt};reactDomExports.unstable_batchedUpdates(()=>{Ze==null||Ze(yt),O({type:"onDragMove",event:yt})})},[Ke.x,Ke.y]),reactExports.useEffect(()=>{const{active:Ze,activatorEvent:et,collisions:dt,droppableContainers:Ct,scrollAdjustedTranslate:mt}=Se.current;if(!Ze||ie.current==null||!et||!mt)return;const{onDragOver:yt}=te.current,Ft=Ct.get(Je),Rt=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Kt={active:Ze,activatorEvent:et,collisions:dt,delta:{x:mt.x,y:mt.y},over:Rt};reactDomExports.unstable_batchedUpdates(()=>{Wt(Rt),yt==null||yt(Kt),O({type:"onDragOver",event:Kt})})},[Je]),useIsomorphicLayoutEffect$1(()=>{Se.current={activatorEvent:Z,active:ae,activeNode:be,collisionRect:nt,collisions:qe,droppableRects:ve,draggableNodes:U,draggingNode:he,draggingNodeRect:Ae,droppableContainers:oe,over:Qe,scrollableAncestors:Ue,scrollAdjustedTranslate:Ke},ee.current={initial:Ae,translated:nt}},[ae,be,qe,nt,U,he,Ae,ve,oe,Qe,Ue,Ke]),useAutoScroller({...Ie,delta:G,draggingRect:nt,pointerCoordinates:Te,scrollableAncestors:Ue,scrollableAncestorRects:Ve});const It=reactExports.useMemo(()=>({active:ae,activeNode:be,activeNodeRect:we,activatorEvent:Z,collisions:qe,containerNodeRect:Re,dragOverlay:Ce,draggableNodes:U,droppableContainers:oe,droppableRects:ve,over:Qe,measureDroppableContainers:xe,scrollableAncestors:Ue,scrollableAncestorRects:Ve,measuringConfiguration:me,measuringScheduled:ge,windowRect:Oe}),[ae,be,we,Z,qe,Re,Ce,U,oe,ve,Qe,xe,Ue,Ve,me,ge,Oe]),er=reactExports.useMemo(()=>({activatorEvent:Z,activators:st,active:ae,activeNodeRect:we,ariaDescribedById:{draggable:de},dispatch:D,draggableNodes:U,over:Qe,measureDroppableContainers:xe}),[Z,st,ae,we,D,de,U,Qe,xe]);return React$6.createElement(DndMonitorContext.Provider,{value:B},React$6.createElement(InternalContext.Provider,{value:er},React$6.createElement(PublicContext.Provider,{value:It},React$6.createElement(ActiveDraggableContext.Provider,{value:qt},R)),React$6.createElement(RestoreFocus,{disabled:(_==null?void 0:_.restoreFocus)===!1})),React$6.createElement(Accessibility,{..._,hiddenTextDescribedById:de}));function Ge(){const Ze=(se==null?void 0:se.autoScrollEnabled)===!1,et=typeof E=="object"?E.enabled===!1:E===!1,dt=W&&!Ze&&!et;return typeof E=="object"?{...E,enabled:dt}:{enabled:dt}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Droppable";function useDraggable(r){let{id:s,data:a,disabled:i=!1,attributes:o}=r;const x=useUniqueId$1(ID_PREFIX$1),{activators:y,activatorEvent:_,active:E,activeNodeRect:R,ariaDescribedById:S,draggableNodes:j,over:T}=reactExports.useContext(InternalContext),{role:A=defaultRole,roleDescription:M="draggable",tabIndex:P=0}=o!=null?o:{},L=(E==null?void 0:E.id)===s,D=reactExports.useContext(L?ActiveDraggableContext:NullContext),[O,B]=useNodeRef(),[N,F]=useNodeRef(),W=useSyntheticListeners(y,s),V=useLatestValue(a);useIsomorphicLayoutEffect$1(()=>(j.set(s,{id:s,key:x,node:O,activatorNode:N,data:V}),()=>{const G=j.get(s);G&&G.key===x&&j.delete(s)}),[j,s]);const U=reactExports.useMemo(()=>({role:A,tabIndex:P,"aria-disabled":i,"aria-pressed":L&&A===defaultRole?!0:void 0,"aria-roledescription":M,"aria-describedby":S.draggable}),[i,A,P,L,M,S.draggable]);return{active:E,activatorEvent:_,activeNodeRect:R,attributes:U,isDragging:L,listeners:i?void 0:W,node:O,over:T,setNodeRef:B,setActivatorNodeRef:F,transform:D}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(r){let{data:s,disabled:a=!1,id:i,resizeObserverConfig:o}=r;const x=useUniqueId$1(ID_PREFIX$1$1),{active:y,dispatch:_,over:E,measureDroppableContainers:R}=reactExports.useContext(InternalContext),S=reactExports.useRef({disabled:a}),j=reactExports.useRef(!1),T=reactExports.useRef(null),A=reactExports.useRef(null),{disabled:M,updateMeasurementsFor:P,timeout:L}={...defaultResizeObserverConfig,...o},D=useLatestValue(P!=null?P:i),O=reactExports.useCallback(()=>{if(!j.current){j.current=!0;return}A.current!=null&&clearTimeout(A.current),A.current=setTimeout(()=>{R(Array.isArray(D.current)?D.current:[D.current]),A.current=null},L)},[L]),B=useResizeObserver({callback:O,disabled:M||!y}),N=reactExports.useCallback((U,G)=>{B&&(G&&(B.unobserve(G),j.current=!1),U&&B.observe(U))},[B]),[F,W]=useNodeRef(N),V=useLatestValue(s);return reactExports.useEffect(()=>{!B||!F.current||(B.disconnect(),j.current=!1,B.observe(F.current))},[F,B]),useIsomorphicLayoutEffect$1(()=>(_({type:Action.RegisterDroppable,element:{id:i,key:x,disabled:a,node:F,rect:T,data:V}}),()=>_({type:Action.UnregisterDroppable,key:x,id:i})),[i]),reactExports.useEffect(()=>{a!==S.current.disabled&&(_({type:Action.SetDroppableDisabled,id:i,key:x,disabled:a}),S.current.disabled=a)},[i,x,a,_]),{active:y,rect:T,isOver:(E==null?void 0:E.id)===i,node:F,over:E,setNodeRef:W}}function AnimationManager(r){let{animation:s,children:a}=r;const[i,o]=reactExports.useState(null),[x,y]=reactExports.useState(null),_=usePrevious$1(a);return!a&&!i&&_&&o(_),useIsomorphicLayoutEffect$1(()=>{if(!x)return;const E=i==null?void 0:i.key,R=i==null?void 0:i.props.id;if(E==null||R==null){o(null);return}Promise.resolve(s(R,x)).then(()=>{o(null)})},[s,i,x]),React$6.createElement(React$6.Fragment,null,a,i?reactExports.cloneElement(i,{ref:y}):null)}const defaultTransform={x:0,y:0,scaleX:1,scaleY:1};function NullifiedContextProvider(r){let{children:s}=r;return React$6.createElement(InternalContext.Provider,{value:defaultInternalContext},React$6.createElement(ActiveDraggableContext.Provider,{value:defaultTransform},s))}const baseStyles={position:"fixed",touchAction:"none"},defaultTransition$1=r=>isKeyboardEvent(r)?"transform 250ms ease":void 0,PositionedOverlay=reactExports.forwardRef((r,s)=>{let{as:a,activatorEvent:i,adjustScale:o,children:x,className:y,rect:_,style:E,transform:R,transition:S=defaultTransition$1}=r;if(!_)return null;const j=o?R:{...R,scaleX:1,scaleY:1},T={...baseStyles,width:_.width,height:_.height,top:_.top,left:_.left,transform:CSS.Transform.toString(j),transformOrigin:o&&i?getRelativeTransformOrigin(i,_):void 0,transition:typeof S=="function"?S(i):S,...E};return React$6.createElement(a,{className:y,style:T,ref:s},x)}),defaultDropAnimationSideEffects=r=>s=>{let{active:a,dragOverlay:i}=s;const o={},{styles:x,className:y}=r;if(x!=null&&x.active)for(const[_,E]of Object.entries(x.active))E!==void 0&&(o[_]=a.node.style.getPropertyValue(_),a.node.style.setProperty(_,E));if(x!=null&&x.dragOverlay)for(const[_,E]of Object.entries(x.dragOverlay))E!==void 0&&i.node.style.setProperty(_,E);return y!=null&&y.active&&a.node.classList.add(y.active),y!=null&&y.dragOverlay&&i.node.classList.add(y.dragOverlay),function(){for(const[E,R]of Object.entries(o))a.node.style.setProperty(E,R);y!=null&&y.active&&a.node.classList.remove(y.active)}},defaultKeyframeResolver=r=>{let{transform:{initial:s,final:a}}=r;return[{transform:CSS.Transform.toString(s)},{transform:CSS.Transform.toString(a)}]},defaultDropAnimationConfiguration={duration:250,easing:"ease",keyframes:defaultKeyframeResolver,sideEffects:defaultDropAnimationSideEffects({styles:{active:{opacity:"0"}}})};function useDropAnimation(r){let{config:s,draggableNodes:a,droppableContainers:i,measuringConfiguration:o}=r;return useEvent((x,y)=>{if(s===null)return;const _=a.get(x);if(!_)return;const E=_.node.current;if(!E)return;const R=getMeasurableNode(y);if(!R)return;const{transform:S}=getWindow(y).getComputedStyle(y),j=parseTransform(S);if(!j)return;const T=typeof s=="function"?s:createDefaultDropAnimation(s);return scrollIntoViewIfNeeded(E,o.draggable.measure),T({active:{id:x,data:_.data,node:E,rect:o.draggable.measure(E)},draggableNodes:a,dragOverlay:{node:y,rect:o.dragOverlay.measure(R)},droppableContainers:i,measuringConfiguration:o,transform:j})})}function createDefaultDropAnimation(r){const{duration:s,easing:a,sideEffects:i,keyframes:o}={...defaultDropAnimationConfiguration,...r};return x=>{let{active:y,dragOverlay:_,transform:E,...R}=x;if(!s)return;const S={x:_.rect.left-y.rect.left,y:_.rect.top-y.rect.top},j={scaleX:E.scaleX!==1?y.rect.width*E.scaleX/_.rect.width:1,scaleY:E.scaleY!==1?y.rect.height*E.scaleY/_.rect.height:1},T={x:E.x-S.x,y:E.y-S.y,...j},A=o({...R,active:y,dragOverlay:_,transform:{initial:E,final:T}}),[M]=A,P=A[A.length-1];if(JSON.stringify(M)===JSON.stringify(P))return;const L=i==null?void 0:i({active:y,dragOverlay:_,...R}),D=_.node.animate(A,{duration:s,easing:a,fill:"forwards"});return new Promise(O=>{D.onfinish=()=>{L==null||L(),O()}})}}let key$1=0;function useKey(r){return reactExports.useMemo(()=>{if(r!=null)return key$1++,key$1},[r])}const DragOverlay=React$6.memo(r=>{let{adjustScale:s=!1,children:a,dropAnimation:i,style:o,transition:x,modifiers:y,wrapperElement:_="div",className:E,zIndex:R=999}=r;const{activatorEvent:S,active:j,activeNodeRect:T,containerNodeRect:A,draggableNodes:M,droppableContainers:P,dragOverlay:L,over:D,measuringConfiguration:O,scrollableAncestors:B,scrollableAncestorRects:N,windowRect:F}=useDndContext(),W=reactExports.useContext(ActiveDraggableContext),V=useKey(j==null?void 0:j.id),U=applyModifiers(y,{activatorEvent:S,active:j,activeNodeRect:T,containerNodeRect:A,draggingNodeRect:L.rect,over:D,overlayNodeRect:L.rect,scrollableAncestors:B,scrollableAncestorRects:N,transform:W,windowRect:F}),G=useInitialValue(T),oe=useDropAnimation({config:i,draggableNodes:M,droppableContainers:P,measuringConfiguration:O}),X=G?L.setRef:void 0;return React$6.createElement(NullifiedContextProvider,null,React$6.createElement(AnimationManager,{animation:oe},j&&V?React$6.createElement(PositionedOverlay,{key:V,id:j.id,ref:X,as:_,activatorEvent:S,adjustScale:s,className:E,transition:x,rect:G,style:{zIndex:R,...o},transform:U},a):null))});function arrayMove(r,s,a){const i=r.slice();return i.splice(a<0?i.length+a:a,0,i.splice(s,1)[0]),i}function getSortedRects(r,s){return r.reduce((a,i,o)=>{const x=s.get(i);return x&&(a[o]=x),a},Array(r.length))}function isValidIndex(r){return r!==null&&r>=0}function itemsEqual(r,s){if(r===s)return!0;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}function normalizeDisabled(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const defaultScale={scaleX:1,scaleY:1},horizontalListSortingStrategy=r=>{var s;let{rects:a,activeNodeRect:i,activeIndex:o,overIndex:x,index:y}=r;const _=(s=a[o])!=null?s:i;if(!_)return null;const E=getItemGap(a,y,o);if(y===o){const R=a[x];return R?{x:o<x?R.left+R.width-(_.left+_.width):R.left-_.left,y:0,...defaultScale}:null}return y>o&&y<=x?{x:-_.width-E,y:0,...defaultScale}:y<o&&y>=x?{x:_.width+E,y:0,...defaultScale}:{x:0,y:0,...defaultScale}};function getItemGap(r,s,a){const i=r[s],o=r[s-1],x=r[s+1];return!i||!o&&!x?0:a<s?o?i.left-(o.left+o.width):x.left-(i.left+i.width):x?x.left-(i.left+i.width):i.left-(o.left+o.width)}const rectSortingStrategy=r=>{let{rects:s,activeIndex:a,overIndex:i,index:o}=r;const x=arrayMove(s,i,a),y=s[o],_=x[o];return!_||!y?null:{x:_.left-y.left,y:_.top-y.top,scaleX:_.width/y.width,scaleY:_.height/y.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=r=>{var s;let{activeIndex:a,activeNodeRect:i,index:o,rects:x,overIndex:y}=r;const _=(s=x[a])!=null?s:i;if(!_)return null;if(o===a){const R=x[y];return R?{x:0,y:a<y?R.top+R.height-(_.top+_.height):R.top-_.top,...defaultScale$1}:null}const E=getItemGap$1(x,o,a);return o>a&&o<=y?{x:0,y:-_.height-E,...defaultScale$1}:o<a&&o>=y?{x:0,y:_.height+E,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(r,s,a){const i=r[s],o=r[s-1],x=r[s+1];return i?a<s?o?i.top-(o.top+o.height):x?x.top-(i.top+i.height):0:x?x.top-(i.top+i.height):o?i.top-(o.top+o.height):0:0}const ID_PREFIX="Sortable",Context=React$6.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(r){let{children:s,id:a,items:i,strategy:o=rectSortingStrategy,disabled:x=!1}=r;const{active:y,dragOverlay:_,droppableRects:E,over:R,measureDroppableContainers:S}=useDndContext(),j=useUniqueId$1(ID_PREFIX,a),T=_.rect!==null,A=reactExports.useMemo(()=>i.map(W=>typeof W=="object"&&"id"in W?W.id:W),[i]),M=y!=null,P=y?A.indexOf(y.id):-1,L=R?A.indexOf(R.id):-1,D=reactExports.useRef(A),O=!itemsEqual(A,D.current),B=L!==-1&&P===-1||O,N=normalizeDisabled(x);useIsomorphicLayoutEffect$1(()=>{O&&M&&S(A)},[O,A,M,S]),reactExports.useEffect(()=>{D.current=A},[A]);const F=reactExports.useMemo(()=>({activeIndex:P,containerId:j,disabled:N,disableTransforms:B,items:A,overIndex:L,useDragOverlay:T,sortedRects:getSortedRects(A,E),strategy:o}),[P,j,N.draggable,N.droppable,B,A,L,E,T,o]);return React$6.createElement(Context.Provider,{value:F},s)}const defaultNewIndexGetter=r=>{let{id:s,items:a,activeIndex:i,overIndex:o}=r;return arrayMove(a,i,o).indexOf(s)},defaultAnimateLayoutChanges=r=>{let{containerId:s,isSorting:a,wasDragging:i,index:o,items:x,newIndex:y,previousItems:_,previousContainerId:E,transition:R}=r;return!R||!i||_!==x&&o===y?!1:a?!0:y!==o&&s===E},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(r){let{disabled:s,index:a,node:i,rect:o}=r;const[x,y]=reactExports.useState(null),_=reactExports.useRef(a);return useIsomorphicLayoutEffect$1(()=>{if(!s&&a!==_.current&&i.current){const E=o.current;if(E){const R=getClientRect(i.current,{ignoreTransform:!0}),S={x:E.left-R.left,y:E.top-R.top,scaleX:E.width/R.width,scaleY:E.height/R.height};(S.x||S.y)&&y(S)}}a!==_.current&&(_.current=a)},[s,a,i,o]),reactExports.useEffect(()=>{x&&y(null)},[x]),x}function useSortable(r){let{animateLayoutChanges:s=defaultAnimateLayoutChanges,attributes:a,disabled:i,data:o,getNewIndex:x=defaultNewIndexGetter,id:y,strategy:_,resizeObserverConfig:E,transition:R=defaultTransition}=r;const{items:S,containerId:j,activeIndex:T,disabled:A,disableTransforms:M,sortedRects:P,overIndex:L,useDragOverlay:D,strategy:O}=reactExports.useContext(Context),B=normalizeLocalDisabled(i,A),N=S.indexOf(y),F=reactExports.useMemo(()=>({sortable:{containerId:j,index:N,items:S},...o}),[j,o,N,S]),W=reactExports.useMemo(()=>S.slice(S.indexOf(y)),[S,y]),{rect:V,node:U,isOver:G,setNodeRef:oe}=useDroppable({id:y,data:F,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...E}}),{active:X,activatorEvent:ee,activeNodeRect:ae,attributes:ie,setNodeRef:se,listeners:Q,isDragging:Z,over:J,setActivatorNodeRef:te,transform:de}=useDraggable({id:y,data:F,attributes:{...defaultAttributes,...a},disabled:B.draggable}),ce=useCombinedRefs(oe,se),me=!!X,ve=me&&!M&&isValidIndex(T)&&isValidIndex(L),xe=!D&&Z,ge=xe&&ve?de:null,be=_!=null?_:O,ye=ve?ge!=null?ge:be({rects:P,activeNodeRect:ae,activeIndex:T,overIndex:L,index:N}):null,Ie=isValidIndex(T)&&isValidIndex(L)?x({id:y,items:S,activeIndex:T,overIndex:L}):N,Pe=X==null?void 0:X.id,we=reactExports.useRef({activeId:Pe,items:S,newIndex:Ie,containerId:j}),Re=S!==we.current.items,Se=s({active:X,containerId:j,isDragging:Z,isSorting:me,id:y,index:N,items:S,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:R,wasDragging:we.current.activeId!=null}),Ee=useDerivedTransform({disabled:!Se,index:N,node:U,rect:V});return reactExports.useEffect(()=>{me&&we.current.newIndex!==Ie&&(we.current.newIndex=Ie),j!==we.current.containerId&&(we.current.containerId=j),S!==we.current.items&&(we.current.items=S)},[me,Ie,j,S]),reactExports.useEffect(()=>{if(Pe===we.current.activeId)return;if(Pe&&!we.current.activeId){we.current.activeId=Pe;return}const he=setTimeout(()=>{we.current.activeId=Pe},50);return()=>clearTimeout(he)},[Pe]),{active:X,activeIndex:T,attributes:ie,data:F,rect:V,index:N,newIndex:Ie,items:S,isOver:G,isSorting:me,isDragging:Z,listeners:Q,node:U,overIndex:L,over:J,setNodeRef:ce,setActivatorNodeRef:te,setDroppableNodeRef:oe,setDraggableNodeRef:se,transform:Ee!=null?Ee:ye,transition:Ce()};function Ce(){if(Ee||Re&&we.current.newIndex===N)return disabledTransition;if(!(xe&&!isKeyboardEvent(ee)||!R)&&(me||Se))return CSS.Transition.toString({...R,property:transitionProperty})}}function normalizeLocalDisabled(r,s){var a,i;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(a=r==null?void 0:r.draggable)!=null?a:s.draggable,droppable:(i=r==null?void 0:r.droppable)!=null?i:s.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;const preventDefault=r=>void r.preventDefault(),stopPropagation=r=>void r.stopPropagation();function hasExceededDistance(r,s){const a=Math.abs(r.x),i=Math.abs(r.y);return typeof s=="number"?Math.sqrt(a**2+i**2)>s:"x"in s&&"y"in s?a>s.x&&i>s.y:"x"in s?a>s.x:"y"in s?i>s.y:!1}const defaultCoordinates=Object.freeze({x:0,y:0});function isDistanceConstraint(r){return!!(r&&"distance"in r)}function isDelayConstraint(r){return!!(r&&"delay"in r)}class Listeners{constructor(s){$e(this,"listeners",[]);$e(this,"removeAll",()=>{this.listeners.forEach(s=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...s)})});this.target=s}add(s,a,i){var o;(o=this.target)==null||o.addEventListener(s,a,i),this.listeners.push([s,a,i])}}const events={move:{name:"pointermove"},end:{name:"pointerup"}};class WebExtensionPointerSensor{constructor(s){$e(this,"autoScrollEnabled",!0);$e(this,"document");$e(this,"activated",!1);$e(this,"initialCoordinates");$e(this,"timeoutId",null);$e(this,"listeners");$e(this,"documentListeners");$e(this,"windowListeners");$e(this,"props");$e(this,"events");var x;const{event:a}=s,{target:i}=a,o=getOwnerDocument(i);this.props=s,this.events=events,this.document=getOwnerDocument(i),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(o),this.windowListeners=new Listeners(getWindow(i)),this.initialCoordinates=(x=getEventCoordinates(a))!=null?x:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:a}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),this.windowListeners.add("dragstart",preventDefault),this.windowListeners.add("visibilitychange",this.handleCancel),this.windowListeners.add("contextmenu",preventDefault),this.documentListeners.add("keydown",this.handleKeydown),a){if(isDistanceConstraint(a))return;if(isDelayConstraint(a)){this.timeoutId=setTimeout(this.handleStart,a.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:s}=this,{onStart:a}=this.props;s&&(this.activated=!0,this.documentListeners.add("click",stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add("selectionchange",this.removeTextSelection),a(s))}handleMove(s){var R;const{activated:a,initialCoordinates:i,props:o}=this,{onMove:x,options:{activationConstraint:y}}=o;if(!i)return;const _=(R=getEventCoordinates(s))!=null?R:defaultCoordinates,E=subtract(i,_);if(!a&&y){if(isDelayConstraint(y))return hasExceededDistance(E,y.tolerance)?this.handleCancel():void 0;if(isDistanceConstraint(y))return y.tolerance!=null&&hasExceededDistance(E,y.tolerance)?this.handleCancel():hasExceededDistance(E,y.distance)?this.handleStart():void 0}s.cancelable&&s.preventDefault(),x(_)}handleEnd(){const{onEnd:s}=this.props;this.detach(),s()}handleCancel(){const{onCancel:s}=this.props;this.detach(),s()}handleKeydown(s){s.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}$e(WebExtensionPointerSensor,"activators",[{eventName:"onPointerDown",handler:({nativeEvent:s},{onActivation:a})=>!s.isPrimary||s.button!==0?!1:(a==null||a({event:s}),!0)}]);const animateLayoutChanges=r=>r.isSorting||r.wasDragging?defaultAnimateLayoutChanges(r):!0,measuringConfig={droppable:{strategy:MeasuringStrategy.Always}};function usePointerSensor(){return useSensor(WebExtensionPointerSensor,{activationConstraint:{distance:1}})}function getCssExpressionPixelSize(r){const s=document.createElement("div");s.style.setProperty("top","0"),s.style.setProperty("left","0"),s.style.setProperty("width","1px"),s.style.setProperty("height","1px"),s.style.setProperty("opacity","0"),s.style.setProperty("position","fixed"),s.style.setProperty("overflow","hidden");const a=document.createElement("div");a.style.setProperty("height",r),s.appendChild(a),document.body.appendChild(s);const i=a.offsetHeight;return s.remove(),a.remove(),i}const getUrlRegex=()=>/((www\.|(http|https|ftp|news|file)+:\/\/)[_.a-z0-9-]+\.[a-z0-9/_:@=.+?,##%&()~-]*[^.|'|# |!|(|?|,| |>|<|;|)])/gim,DEFAULT_LINK_PROTOCOL="https://";function buildWrapLinkProps(r,s){return{key:r,href:s.startsWith("http")?s:DEFAULT_LINK_PROTOCOL+s}}function defaultWrapLink(r,s){return jsxRuntimeExports.jsx("a",{...buildWrapLinkProps(r,s),children:s})}function nonPropagatingWrapLink(r,s){return jsxRuntimeExports.jsx("a",{...buildWrapLinkProps(r,s),target:"_blank",onClick:stopPropagation$2,children:s})}function linkifyText(r,s=defaultWrapLink){const a=[...(r!=null?r:"").matchAll(getUrlRegex())];if(!a.length)return r;const i=[];let o=0;a.forEach((y,_)=>{const E=y.index,R=r.substring(o,E);i.push(R);const S=y[0],j=s(`match${_}`,S);i.push(j),o=E+S.length});const x=r.substring(o);return i.push(x),i}function getLinksFromText(r){const s=[...r.matchAll(getUrlRegex())],a=[];return s.forEach(i=>{const{index:o}=i;o!==void 0&&a.push({index:o,lastIndex:o+i[0].length})}),a}const POLL_INTERVAL=1e3;function isPopupBlocked(r){return!r||r.closed||typeof r.closed>"u"}function openNewWindowUrl(r,s){const a=window.open(r);if(isPopupBlocked(a))return[a,!0];if(a&&s){let i=setInterval(function(){a.closed!==!1&&(clearInterval(i),s())},POLL_INTERVAL)}return[a,!1]}const isEllipsisActive=r=>r?r.offsetWidth<r.scrollWidth:!1,isPassiveEventListenersSupperted=once$1(function(){return typeof window>"u"?!1:testInDom()});function testInDom(){var r=!1;try{var s=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,s)}catch{}return r}const callbacksSets=new Map,elements=new Map;function attachScrollEvent(r,s){const a=r===window?document:r;elements.set(s,a);let i=callbacksSets.get(a);if(i===void 0){i=new Set,callbacksSets.set(a,i);const o=isPassiveEventListenersSupperted()?{capture:!0,passive:!0}:!0;a.addEventListener("scroll",handleScroll,o)}return i.add(s),()=>deattachScrollEvent(s)}function handleScroll(r){const s=callbacksSets.get(r.currentTarget);s!==void 0&&reactDomExports.unstable_batchedUpdates(()=>{for(let a of s)a()})}function deattachScrollEvent(r){const s=elements.get(r);if(s===void 0)return;elements.delete(r);const a=callbacksSets.get(s);a!==void 0&&(a.delete(r),a.size===0&&(callbacksSets.delete(s),s.removeEventListener("scroll",handleScroll)))}function useOutSideClick(r,s,a=document.documentElement){return useOutSideEvent(["click"],r,s,a)}const isFocusPreventScrollSupported=once$1(function(){return typeof navigator>"u"?!1:!isSafariBrowser()});function isSafariBrowser(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const useLatest=r=>{const s=React$6.useRef(r);return s.current=r,s};let counter=0;function useUniqueId(){const r=reactExports.useRef();return r.current===void 0&&(r.current=++counter),r.current}function createCombinedRef(r,s){return s==null?r:function(a){attachElement(r,a),attachElement(s,a)}}function attachElement(r,s){typeof r=="function"?r(s):r!=null&&"current"in r&&(r.current=s)}const useUnmountSignal=()=>{const r=reactExports.useRef();return reactExports.useEffect(()=>{var s;return(s=r.current)!=null&&s.signal.aborted&&(r.current=void 0),()=>{var a;return(a=r.current)==null?void 0:a.abort()}},[]),reactExports.useCallback(()=>((r.current===void 0||r.current.signal.aborted)&&(r.current=new AbortController),r.current.signal),[])};function useUnmountEffect(r){const s=reactExports.useRef(r);reactExports.useEffect(()=>{s.current=r}),reactExports.useEffect(()=>()=>{s.current()},[])}function useEffectEvent(r){const s=reactExports.useRef(r);return reactExports.useEffect(()=>{s.current=r}),reactExports.useCallback((...a)=>s.current.apply(null,a),[])}const USE_NOW_DEFAULT_INTERVAL=6e4;function useNow(r){const s=reactExports.useRef(0);if(s.current===0&&r!=null&&r.initialNow!=null){const x=r.initialNow;if(Number.isInteger(x)&&x>0){const y=Date.now();s.current=y-x}else throw new Error(`useNow(): \`initialNow\` should be an unsigned interger above \`0\`, but received: \`${x}\``)}const[a,i]=reactExports.useState(()=>Date.now()-s.current),o=r==null||r.interval==null?USE_NOW_DEFAULT_INTERVAL:r.interval;return reactExports.useEffect(function(){const x=setInterval(()=>{i(Date.now()-s.current)},o);return()=>clearInterval(x)},[]),a}const ONE_HOUR=1e3*60*60;function useDaysToDate(r=Date.now(),s=ONE_HOUR){const a=useNow2(s);return React$6.useMemo(()=>{const o=hooks(a),x=hooks(r);return Math.ceil(x.diff(o,"days",!0))},[r,a])}function useDebounce(r,s=300){const[a,i]=React$6.useState(r);return React$6.useEffect(()=>{const o=setTimeout(()=>{i(r)},s);return function(){clearTimeout(o)}},[s,r]),a}function useDebounceCallback(r,s){const a=reactExports.useRef(),i=reactExports.useCallback((...o)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>r(...o),s)},[r,s]);return i.cancel=reactExports.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=void 0)},[]),i}function validateNumber(r,s,a){return r}function validateString(r,s,a){return r}function isFilterPreset(r){return FILTER_PRESETS.includes(r)}function calculateDaysRangeByPreset(r,s){switch(r){case"overdue":return[0,s];case"lastWeek":const a=addWeeks(s,-1).getTime();return[startOfWeek(a).getTime(),endOfWeek(a).getTime()];case"today":return[startOfDay(s).getTime(),endOfDay(s).getTime()];case"thisWeek":return[startOfWeek(s).getTime(),endOfWeek(s).getTime()];case"nextWeek":const i=addWeeks(s,1).getTime();return[startOfWeek(i).getTime(),endOfWeek(i).getTime()];case"thisMonth":return[startOfMonth(s).getTime(),endOfMonth(s).getTime()];case"nextMonth":const o=addMonths(s,1).getTime();return[startOfMonth(o).getTime(),endOfMonth(o).getTime()]}}function createDoneFilter(r){return s=>r.payload.done.includes("y")&&r.payload.done.includes("n")?!0:!(r.payload.done.includes("y")&&!s.isChecked||r.payload.done.includes("n")&&s.isChecked)}function createChatFilter(r){return s=>!(r.payload.chat.includes("unread")&&!s.hasUnreadActivity||r.payload.chat.includes("mentions")&&!s.unreadChatMentionCount)}function createAssigneeFilter(r){return s=>{if(r.payload.assignees.size===0)return!0;const a=s.owners||[];return!!(a.some(i=>r.payload.assignees.get(i))||a.length===0&&r.payload.assignees.get(r.meta.unassignedParamValueName))}}function createSectionFilter(r){return s=>!!(r.payload.sections.size===0||r.payload.sections.has(s.sectionId))}function createTagsFilter(r){return(s,a)=>{if(r.payload.tags.size===0)return!0;const i=s.tags||[];return!!(i.some(o=>r.payload.tags.has(o))||i.length===0&&(r.payload.tags.get(r.meta.untaggedParamValueName)||a!=null&&a.boardId&&r.payload.tags.get(`${r.meta.untaggedParamValueName}_${a.boardId}`)))}}function createDueDateFilter(r,s){const a=(i,o)=>x=>{if(!x.dueDate)return!1;const y=cardDueDateFromString(x.dueDate).date;return i<=y&&y<=o};if(r.payload.dueDate)switch(r.payload.dueDate.type){case"range":return a(cardDueDateFromString(r.payload.dueDate.start).date,cardDueDateFromString(r.payload.dueDate.end).date);case"preset":return r.payload.dueDate.value==="noDate"?i=>i.dueDate===null:a(...filterHelpers.calculateDaysRangeByPreset(r.payload.dueDate.value,s))}else return()=>!0}const createCardFilter=(r,s)=>(a,i)=>createDoneFilter(r)(a)&&createChatFilter(r)(a)&&createAssigneeFilter(r)(a)&&createSectionFilter(r)(a)&&createDueDateFilter(r,s)(a)&&createTagsFilter(r)(a,i);function createTaskDueDateFilter(r,s){if(s<=0)return()=>!0;const a=(i,o)=>x=>x.dueDate?i<=x.dueDate&&x.dueDate<=o:!1;if(r.payload.dueDate)switch(r.payload.dueDate.type){case"range":return a(cardDueDateFromString(r.payload.dueDate.start).date,cardDueDateFromString(r.payload.dueDate.end).date);case"preset":return r.payload.dueDate.value==="noDate"?i=>i.dueDate===0||i.dueDate==null:a(...filterHelpers.calculateDaysRangeByPreset(r.payload.dueDate.value,s))}else return()=>!0}function createCategoryFilter(r){return s=>r.payload.categories.size===0?!0:r.payload.categories.has(s.categoryId)}function createLabelFilter(r){return s=>{if(r.payload.labels.size===0)return!0;const a=s.labels||[];return!!(a.some(i=>r.payload.labels.has(i))||a.length===0&&r.payload.labels.get(r.meta.unlabeledParamValueName))}}function createTaskCompletedFilter(r){return s=>r.payload.done.includes("y")&&r.payload.done.includes("n")?!0:!(r.payload.done.includes("y")&&s.status!==TaskStatus.CHECKED||r.payload.done.includes("n")&&s.status===TaskStatus.CHECKED)}const NO_DUE_DATE=0,createTaskFilter=(r,s)=>a=>createTaskCompletedFilter(r)(a)&&createCategoryFilter(r)(a)&&createTaskDueDateFilter(r,s)(a)&&createLabelFilter(r)(a),filterHelpers={presets:FILTER_PRESETS,isFilterPreset,calculateDaysRangeByPreset,storageFormat:"yyyy-MM-dd",createCardFilter,createTaskFilter,NO_DUE_DATE};function delay(r){return new Promise(s=>setTimeout(s,r))}const root$E="_root_u4s3v_1",boardBadge="_boardBadge_u4s3v_16",boardBadgeMini="_boardBadgeMini_u4s3v_21",avatar$2="_avatar_u4s3v_27",text$1="_text_u4s3v_34",isActive="_isActive_u4s3v_59",styles$1u={root:root$E,default:"_default_u4s3v_12",boardBadge,boardBadgeMini,avatar:avatar$2,text:text$1,isActive},Badge=({children:r,count:s,hidden:a,isActive:i,className:o,showZero:x,theme:y="default"})=>jsxRuntimeExports.jsx("div",{hidden:a||s===0&&!x,className:cx$6(styles$1u.root,styles$1u[y],o,{[styles$1u.isActive]:i}),children:jsxRuntimeExports.jsx("div",{className:styles$1u.text,children:r||(s!==void 0&&s<100?s:"99+")})});function useBindingsFlowController(r){const[s,a]=reactExports.useReducer(reducer$3,{isLocked:!1,value:r}),i=reactExports.useRef(r);i.current=r;const o=reactExports.useCallback(()=>{a({type:"LOCK",payload:{value:i.current}})},[]),x=reactExports.useCallback(()=>a({type:"RELEASE"}),[]),y=reactExports.useCallback(_=>{a({type:"UPDATE",payload:{value:_}})},[]);return{value:s.isLocked?s.value:r,lock:o,release:x,update:y}}function reducer$3(r,s){switch(s.type){case"LOCK":return getNewStateIfChanged$2(r,{isLocked:!0,value:s.payload.value});case"RELEASE":return getNewStateIfChanged$2(r,{isLocked:!1,value:r.value});case"UPDATE":return getNewStateIfChanged$2(r,{isLocked:r.isLocked,value:s.payload.value})}return r}function getNewStateIfChanged$2(r,s){return r.isLocked===s.isLocked&&r.value===s.value?r:s}const ENTER_KEY=13,SPACE_KEY=32;class BareSelect extends reactExports.Component{constructor(){super(...arguments);$e(this,"wasClickTriggeredByKeyboard",!1);$e(this,"_handleChange",a=>{this.props.onChange(a.currentTarget.value),this.wasClickTriggeredByKeyboard||a.currentTarget.blur()});$e(this,"_handleKeyDown",a=>{(a.keyCode===ENTER_KEY||a.keyCode===SPACE_KEY)&&(this.wasClickTriggeredByKeyboard=!0)});$e(this,"_handleClick",()=>{this.wasClickTriggeredByKeyboard=!1})}render(){const{placeholder:a,options:i,value:o,disabled:x,renderLabel:y,className:_,...E}=this.props,R=o==null?void 0:i.find(S=>S.value===o);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("select",{...E,disabled:x,onClick:this._handleClick,onKeyDown:this._handleKeyDown,onChange:this._handleChange,value:o,className:_,children:[o==null?jsxRuntimeExports.jsx("option",{disabled:!0,children:a}):null,i.map(S=>jsxRuntimeExports.jsx("option",{value:S.value,children:S.label},S.value))]}),y({isPlaceholder:R===void 0,label:R!==void 0?R.label:a})]})}}const I18nConsumer=I18nContext.Consumer;function connectI18n(r){function s(a){return jsxRuntimeExports.jsx(I18nConsumer,{children:i=>{const o=r;return jsxRuntimeExports.jsx(o,{...a,i18n:i})}})}return s.displayName=`ConnectedI18n(${getDisplayName$1(r)})`,s}var DisplayName;(function(r){r.formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName"})(DisplayName||(DisplayName={}));var DisplayNameParts;(function(r){r.formatDate="FormattedDateParts",r.formatTime="FormattedTimeParts",r.formatNumber="FormattedNumberParts",r.formatList="FormattedListParts"})(DisplayNameParts||(DisplayNameParts={}));function createFormattedDateTimePartsComponent(r){var s=function(a){var i=useIntl(),o=a.value,x=a.children,y=__rest$1(a,["value","children"]),_=typeof o=="string"?new Date(o||0):o,E=r==="formatDate"?i.formatDateToParts(_,y):i.formatTimeToParts(_,y);return x(E)};return s.displayName=DisplayNameParts[r],s}function createFormattedComponent(r){var s=function(a){var i=useIntl(),o=a.value,x=a.children,y=__rest$1(a,["value","children"]),_=i[r](o,y);if(typeof x=="function")return x(_);var E=i.textComponent||reactExports.Fragment;return reactExports.createElement(E,null,_)};return s.displayName=DisplayName[r],s}createFormattedComponent("formatDate");createFormattedComponent("formatTime");createFormattedComponent("formatNumber");var FormattedList=createFormattedComponent("formatList");createFormattedComponent("formatDisplayName");createFormattedDateTimePartsComponent("formatDate");createFormattedDateTimePartsComponent("formatTime");const SvgArrowicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:7,height:12,fill:"none",viewBox:"0 0 7 12",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.2 10.4 6 5.6 1.2.8"})),SUPPORT_WEBKIT_STYLE_SCROLLBARS=isCssScrollBarSupported(),DEFAULT_OFFSET=2,DEFAULT_POSITION="bottom",getClassName=(r="default",s,a=!1)=>cx$6("DropdownMenu",s,{"DropdownMenu--themeModern":r.startsWith("modern"),"DropdownMenu--themePlain":r==="plain","DropdownMenu--themeCondensed":r.startsWith("modern-condensed"),"DropdownMenu--themeCondensedReverse":r==="modern-condensed-reverse","DropdownMenu--themeFatLight":r==="fat-light","DropdownMenu--nonSpecCompliantScrollbars":SUPPORT_WEBKIT_STYLE_SCROLLBARS&&a,"DropdownMenu--specCompliantScrollbars":!SUPPORT_WEBKIT_STYLE_SCROLLBARS&&a}),DropdownContext=React$6.createContext({selectedId:null,setSelectedId:()=>{}}),DropdownMenu=({children:r,offset:s=DEFAULT_OFFSET,position:a=DEFAULT_POSITION,className:i,width:o,onLeave:x,closeOnScroll:y,theme:_,scrollbars:E,isVisible:R,...S})=>{const[j,T]=React$6.useState(null);return!R&&j!==null&&T(null),jsxRuntimeExports.jsx(DropdownContext.Provider,{value:React$6.useMemo(()=>({selectedId:j,setSelectedId:T}),[j]),children:jsxRuntimeExports.jsx(Tooltip2,{isVisible:R,onLeave:x,className:getClassName(_,i,E),offset:s,position:a,style:{width:o},...S,keepHeightInViewportBounds:E,children:r})})},DropdownMenuContent=({theme:r,className:s,children:a})=>jsxRuntimeExports.jsx("div",{className:getClassName(r,s),children:a});DropdownMenu.Content=DropdownMenuContent;const DropdownMenuItem$1=React$6.forwardRef(({id:r,onClick:s,onMouseEnter:a,onMouseLeave:i,onClickNative:o,disabled:x,className:y,itemClassName:_,selected:E=!1,loading:R=!1,higlighted:S=!1,withDivider:j=!1,withArrow:T=!1,isClickable:A=!1,icon:M,accessory:P,scrollToItemOnSelect:L=!1,sibling:D,children:O},B)=>{const{setSelectedId:N}=React$6.useContext(DropdownContext),F=useDebounceCallback(N,150),W=x?void 0:o||s,V=React$6.useRef(null);return React$6.useImperativeHandle(B,()=>V.current),React$6.useEffect(()=>{var U;(E&&L||S)&&((U=V.current)==null||U.scrollIntoView({behavior:"auto",block:"nearest"}))},[S,L,E]),React$6.useEffect(()=>{const U=G=>(G.code==="Enter"&&(s==null||s()),!0);return S&&s&&window.addEventListener("keyup",U),()=>window.removeEventListener("keyup",U)},[S,s]),jsxRuntimeExports.jsxs("div",{ref:V,className:cx$6("DropdownMenu__Item",_,{"DropdownMenu__Item--disabled":x||R,"DropdownMenu__Item--clickable":!!W||A,"DropdownMenu__Item--selected":E,"DropdownMenu__Item--higlighted":S,"DropdownMenu__Item--withDivider":j}),onClick:W,onMouseEnter:()=>{x||(F(r!=null?r:null),a==null||a())},onMouseLeave:()=>{F.cancel(),x||i==null||i()},children:[D,jsxRuntimeExports.jsxs("span",{className:cx$6("DropdownMenu__Item__content",y),children:[M&&jsxRuntimeExports.jsx("div",{className:"DropdownMenu__Item__Icon",children:M}),O,R?jsxRuntimeExports.jsx("div",{className:"DropdownMenu__Item__Accessory",children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:"DropdownMenu__Item__Loading"})}):P||T?jsxRuntimeExports.jsx("div",{className:"DropdownMenu__Item__Accessory",children:P||jsxRuntimeExports.jsx("span",{className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgArrowicon,{})})}):null]})]})});DropdownMenu.Item=DropdownMenuItem$1;const SubMenu=({theme:r,id:s,label:a,disabled:i,children:o})=>{const{selectedId:x,setSelectedId:y}=React$6.useContext(DropdownContext),_=x===s,E=useDebounceCallback(y,150),R=React$6.useRef(null);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{withArrow:!0,disabled:i,ref:R,onMouseEnter:()=>E(s),onMouseLeave:E.cancel,onClick:()=>y(s),children:jsxRuntimeExports.jsx("div",{children:a})}),jsxRuntimeExports.jsx(Tooltip2,{from:R,isVisible:_,position:"right-start",offset:4,animationDelay:0,children:jsxRuntimeExports.jsx("div",{onClick:stopPropagation$2,className:"DropdownMenu__itemTooltipInner",children:jsxRuntimeExports.jsx(DropdownContext.Provider,{value:React$6.useMemo(()=>({selectedId:null,setSelectedId(){}}),[]),children:jsxRuntimeExports.jsx(DropdownMenu.Content,{theme:r,children:jsxRuntimeExports.jsx(SimpleScrollView,{className:"DropdownMenu__submenuContent",children:o})})})})})]})};DropdownMenu.SubMenu=SubMenu;function OutSideClickContextual({render:r,onOutSideClick:s,ignoreOutSideClick:a}){const i=[];useOutSideClick(i,a?void 0:s);function o(x){x!=null&&i.push({current:x})}return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r(x=>y=>o(y))})}var TooltipCardDirection=(r=>(r.BOTTOM="BOTTOM",r.TOP="TOP",r.BOTTOM_LEFT="BOTTOM_LEFT",r.TOP_LEFT="TOP_LEFT",r))(TooltipCardDirection||{});class TooltipCard extends reactExports.Component{constructor(){super(...arguments);$e(this,"_element",null);$e(this,"_tooltipElement",null);$e(this,"state",{animationState:"NONE",shouldTooltipUpdate:!0,isVisible:this.props.isVisible,prevPropsIsVisible:this.props.isVisible});$e(this,"handleEnterAnimationEnd",a=>{a.currentTarget===a.target&&this.setState(i=>i.animationState==="ENTER"?{animationState:"NONE",shouldTooltipUpdate:!0}:null)});$e(this,"handleLeaveAnimationEnd",a=>{a.currentTarget===a.target&&this.setState(i=>i.animationState==="LEAVE"?{animationState:"NONE",isVisible:!1,shouldTooltipUpdate:!0,tooltipStyle:void 0}:null)});$e(this,"handleOutSideClick",a=>{const{onOutSideClick:i}=this.props;i!=null&&i()})}_isTop(){return["TOP","TOP_LEFT"].includes(this.props.direction)}_isBottom(){return["BOTTOM","BOTTOM_LEFT"].includes(this.props.direction)}_isLeft(){return["TOP_LEFT","BOTTOM_LEFT"].includes(this.props.direction)}_getTooltipStyle(){const a=this._element,i=this._tooltipElement;if(a==null||i==null)return;const{offset:o}=this.props,{bottom:x,left:y,right:_,top:E}=a.getBoundingClientRect(),{width:R,height:S}=i.getBoundingClientRect(),j=window.innerWidth,T=window.innerHeight;let A=this._isTop()?Math.floor(E-o):Math.floor(x+o);A<=0?A=0:A+S>=T&&(A=Math.floor(T-S));const M=Math.floor(y+(_-y)/2-R/2);let P=this._isLeft()?y:M;return P<=0?P=o:P+R>=j&&(P=Math.floor(j-o-R)),this._isTop()?{bottom:`calc(100% - ${A}px)`,left:P}:{top:A,left:P}}static getDerivedStateFromProps(a,i){return i.prevPropsIsVisible!==a.isVisible?{prevPropsIsVisible:a.isVisible,shouldTooltipUpdate:!1}:null}componentDidUpdate(a,i){!a.isVisible&&this.props.isVisible?this.setState({animationState:"PREENTER",tooltipStyle:void 0,isVisible:!0}):a.isVisible&&!this.props.isVisible?this.setState({animationState:"LEAVE"}):i.animationState!=="PREENTER"&&this.state.animationState==="PREENTER"?this.setState({animationState:"ENTER",tooltipStyle:this._getTooltipStyle()}):this.props.direction!==a.direction&&this.setState({tooltipStyle:this._getTooltipStyle()})}render(){const{isVisible:a,className:i}=this.props,{animationState:o}=this.state;return jsxRuntimeExports.jsx(OutSideClickContextual,{onOutSideClick:this.handleOutSideClick,ignoreOutSideClick:!a||o!=="NONE",render:x=>{const{render:y,renderTooltip:_,isTooltipFrameless:E,isTooltipStyleless:R}=this.props,{isVisible:S,animationState:j,tooltipStyle:T,shouldTooltipUpdate:A}=this.state,M=j==="LEAVE"?this.handleLeaveAnimationEnd:j==="ENTER"?this.handleEnterAnimationEnd:void 0;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[S?jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx("div",{ref:P=>{this._tooltipElement=P,x("tooltip")(P)},onAnimationEnd:M,className:cx$6("TooltipCard",i,{"TooltipCard--preEnter":j==="PREENTER","TooltipCard--animation-topIn":j==="ENTER"&&this._isTop(),"TooltipCard--animation-topOut":j==="LEAVE"&&this._isTop(),"TooltipCard--animation-bottomIn":j==="ENTER"&&this._isBottom(),"TooltipCard--animation-bottomOut":j==="LEAVE"&&this._isBottom(),"TooltipCard--isFrameless":E,"TooltipCard--isStyleless":R}),style:T,children:jsxRuntimeExports.jsx(ShouldUpdate_memo,{shouldUpdate:A,render:_})})}):null,y(P=>{this._element=P,x("children")(P)})]})}})}}$e(TooltipCard,"DIRECTION",TooltipCardDirection),$e(TooltipCard,"defaultProps",{direction:"BOTTOM",offset:10});const SvgBackicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M13 8.4H3.8M8.4 13 3.8 8.4l4.6-4.6"})),Breadcrumbs$1=({children:r,className:s,theme:a="default"})=>jsxRuntimeExports.jsx("div",{className:cx$6("Breadcrumbs",s,{"Breadcrumbs--themeLight":a==="light"}),children:r}),BreadcrumbItem=({options:r,onChange:s,children:a})=>{const[i,o]=React$6.useState(!1),x=r&&r.size>1,y=React$6.useMemo(()=>r?Array.from(r.values()):[],[r]),_=React$6.useCallback(()=>o(!1),[]),E=React$6.useCallback(()=>o(S=>!S),[]),R=React$6.useCallback(S=>()=>{s==null||s(S),_()},[_,s]);return jsxRuntimeExports.jsx(TooltipCard,{isTooltipStyleless:!0,direction:TooltipCardDirection.BOTTOM_LEFT,isVisible:i,onOutSideClick:_,renderTooltip:()=>jsxRuntimeExports.jsx(DropdownMenu.Content,{children:y.map(([S,j])=>jsxRuntimeExports.jsx(DropdownMenu.Item,{selected:j===a,onClick:R(S),children:j},S))}),render:S=>jsxRuntimeExports.jsx("span",{ref:S,onClick:x?E:void 0,className:cx$6("Breadcrumbs__Item",{"Breadcrumbs__Item--isClickable":x,"Breadcrumbs__Item--isDropdown":x,"Breadcrumbs__Item--isActive":i}),children:a})})};Breadcrumbs$1.Item=BreadcrumbItem;const BreadcrumbBack=({onClick:r,children:s})=>jsxRuntimeExports.jsxs("span",{onClick:r,className:"Breadcrumbs__Item Breadcrumbs__Item--isClickable",children:[jsxRuntimeExports.jsx("div",{className:"Breadcrumbs__BackButton rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgBackicon,{})}),s]});Breadcrumbs$1.Back=BreadcrumbBack;function ButtonRounded({children:r,className:s,onClick:a,onTransitionEnd:i,disabled:o,isLoading:x=!1,isActive:y=!1,submit:_=!1,theme:E="premium",size:R="default",spinnerSize:S="default",...j},T){return jsxRuntimeExports.jsx(BareButton_,{ref:T,type:_?"submit":"button",disabled:o,onClickNative:x?void 0:a,onTransitionEnd:i,className:cx$6("ButtonRounded",`ButtonRounded--${E}Theme`,`ButtonRounded--${R}Size`,`ButtonRounded--${S}Spinner`,{[`ButtonRounded--${E}ThemeIsActive`]:y,"ButtonRounded--isLoading":x},s),...j,children:x?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:"ButtonRounded__Spinner"}):r})}const ButtonRounded_=React$6.forwardRef(ButtonRounded),icon$8=jsxRuntimeExports.jsx("svg",{width:"14",height:"14",viewBox:"0 0 18 18",children:jsxRuntimeExports.jsxs("g",{fill:"currentColor",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("path",{d:"M17.475.298c.62.448.703 1.242.186 1.772L2.583 17.553c-.517.53-1.433.6-2.058.149-.62-.448-.703-1.242-.186-1.772L15.417.447c.517-.53 1.433-.6 2.058-.149z"}),jsxRuntimeExports.jsx("path",{d:"M.525.298C-.095.746-.178 1.54.34 2.07l15.078 15.483c.517.53 1.433.6 2.058.149.62-.448.703-1.242.186-1.772L2.583.447C2.066-.083 1.15-.153.525.298z"})]})});function CloseButton(r){const{className:s,size:a="default",...i}=r;return jsxRuntimeExports.jsx("button",{...i,type:"button",className:cx$6("CloseButton",s,{[`CloseButton--${a}`]:a}),children:icon$8})}const SvgChevronDownicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1.2 1.102 4.8 4.8 4.8-4.8"})),SvgCheckicon$3=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m16 5-7.5 8L4 8.5"}));function ConfirmDialogButton({type:r="button",autoFocus:s=!1,theme:a="default",size:i="default",fullWidth:o,className:x,loading:y,children:_,chevronRef:E,onChevronClick:R,...S},j){const T=reactExports.useRef(null),A=!!E,M=y||a==="success";return reactExports.useLayoutEffect(()=>{s&&T.current!=null&&(T.current.autofocus=s)},[]),jsxRuntimeExports.jsx("button",{...S,ref:createCombinedRef(T,j),type:r,autoFocus:s,className:cx$6("ConfirmDialogButton",x,`ConfirmDialogButton--${a}Theme`,`ConfirmDialogButton--${i}Size`,{"ConfirmDialogButton--isLoading":y,"ConfirmDialogButton--silentDisable":a==="success","ConfirmDialogButton--fullWidth":o}),children:jsxRuntimeExports.jsxs("span",{className:cx$6("ConfirmDialogButton__content",{"ConfirmDialogButton__content--withChevron":A,"ConfirmDialogButton__content--withIcon":M}),children:[renderIcon(!!y,()=>jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:"ConfirmDialogButton--loadingIcon",size:i==="medium"?i:void 0})),renderIcon(a==="success"&&!y,()=>jsxRuntimeExports.jsx(SvgCheckicon$3,{})),_,A&&jsxRuntimeExports.jsx("div",{className:"ConfirmDialogButton--chevron",onClick:R,ref:E,children:jsxRuntimeExports.jsx(SvgChevronDownicon,{})})]})})}function renderIcon(r,s){return jsxRuntimeExports.jsx(AnimatedInOut,{hasPreEntering:!0,isVisible:r,render:({isPreEntering:a,isEntering:i,isLeaving:o,props:x})=>jsxRuntimeExports.jsx("div",{...x,className:cx$6("ConfirmDialogButton__icon",{"ConfirmDialogButton__icon--isPreEntering":a,"ConfirmDialogButton__icon--isEntering":i,"ConfirmDialogButton__icon--isLeaving":o}),children:s()})})}const ConfirmDialogButton_forwarded=reactExports.forwardRef(ConfirmDialogButton),CtaButton=React$6.forwardRef(function({children:s,onClick:a,disabled:i,type:o="button",className:x},y){return jsxRuntimeExports.jsx("button",{ref:y,type:o,disabled:i,onClick:a,className:cx$6("CtaButton",x),children:s})}),CardButton$1="_CardButton_1t35u_1",active$1="_active_1t35u_19",disabled$6="_disabled_1t35u_31",icon$7="_icon_1t35u_36",isEmptyState="_isEmptyState_1t35u_40",styles$1t={CardButton:CardButton$1,active:active$1,disabled:disabled$6,icon:icon$7,isEmptyState};function CardButton({onClick:r,onClickNative:s,disabled:a=!1,className:i,children:o,isEmptyState:x=!1,icon:y},_){const E=!a&&!!(r||s);return jsxRuntimeExports.jsxs(BareButton_,{ref:_,className:cx$6(styles$1t.CardButton,i,{[styles$1t.active]:E,[styles$1t.disabled]:!E,[styles$1t.isEmptyState]:x}),onClick:a?void 0:r,onClickNative:a?void 0:s,children:[y&&jsxRuntimeExports.jsx("span",{className:styles$1t.icon,children:y}),o]})}const CardButton_forwarded=React$6.forwardRef(CardButton);function PaneButton({children:r,disabled:s,icon:a,theme:i="default",onClick:o},x){return jsxRuntimeExports.jsxs("button",{ref:x,type:"button",disabled:s,onClick:o,className:cx$6("PaneButton",{"PaneButton--disabled":s}),children:[a==null?null:jsxRuntimeExports.jsx("div",{className:"PaneButton__icon",children:a}),jsxRuntimeExports.jsx("div",{className:"PaneButton__children",children:r}),i==="select"?jsxRuntimeExports.jsx("div",{className:"PaneButton__selectIcon",children:jsxRuntimeExports.jsx("svg",{width:"13",height:"7",viewBox:"0 0 13 7",children:jsxRuntimeExports.jsx("polyline",{points:"1,1 6.5,6 12,1",fill:"none",strokeWidth:"1.7",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"round"})})}):null]})}const PaneButton_forwarded=reactExports.forwardRef(PaneButton);class RadioToggleButton extends reactExports.Component{constructor(){super(...arguments);$e(this,"handleClick",()=>{const{onChange:a}=this.props;if(a){const i=!this.props.checked;a(i)}})}render(){const{checked:a,disabled:i,onChange:o,title:x,theme:y="default"}=this.props;return jsxRuntimeExports.jsxs("button",{type:"button",role:"checkbox","aria-checked":a,disabled:i,title:x,onClick:o==null?void 0:this.handleClick,className:cx$6("RadioToggleButton",{"RadioToggleButton--disabled":i,"RadioToggleButton--themeModern":y==="modern","RadioToggleButton--themeCheck":y==="check"}),children:[jsxRuntimeExports.jsx("div",{className:cx$6("RadioToggleButton__marker",{"RadioToggleButton__marker--checked":a,"RadioToggleButton__marker--disabled":i})}),jsxRuntimeExports.jsx("span",{className:"RadioToggleButton__ring"})]})}}function TaskCategoryPickerButton({disabled:r,taskCategoryName:s,onClick:a},i){return jsxRuntimeExports.jsx(PaneButton_forwarded,{ref:i,disabled:r,theme:"select",onClick:()=>a(),children:jsxRuntimeExports.jsx("span",{className:"TaskCategoryPickerButton__text","data-private":"lipsum",children:s})})}const TaskCategoryPickerButton_forwarded=reactExports.forwardRef(TaskCategoryPickerButton);function ToggleRectButton({checked:r,disabled:s,onChange:a,icon:i,title:o}){function x(){a&&a(!r)}return jsxRuntimeExports.jsx("button",{type:"button",role:"checkbox","aria-checked":r,disabled:s,onClick:x,className:cx$6("ToggleRectButton",{"ToggleRectButton--checked":r,"ToggleRectButton--disabled":s}),children:jsxRuntimeExports.jsxs("div",{className:"ToggleRectButton__content",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:24},children:i}),jsxRuntimeExports.jsx("div",{className:"ToggleRectButton__title",children:o})]})})}const ChevronRightIcon=r=>jsxRuntimeExports.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:jsxRuntimeExports.jsx("path",{d:"M9.59961 16.8031L14.3996 12.0031L9.59961 7.20312",stroke:"currentcolor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})});var immutable={exports:{}};(function(r,s){(function(a,i){r.exports=i()})(commonjsGlobal,function(){var a=Array.prototype.slice;function i(I,H){H&&(I.prototype=Object.create(H.prototype)),I.prototype.constructor=I}function o(I){return E(I)?I:Ee(I)}i(x,o);function x(I){return R(I)?I:Ce(I)}i(y,o);function y(I){return S(I)?I:he(I)}i(_,o);function _(I){return E(I)&&!j(I)?I:Ae(I)}function E(I){return!!(I&&I[A])}function R(I){return!!(I&&I[M])}function S(I){return!!(I&&I[P])}function j(I){return R(I)||S(I)}function T(I){return!!(I&&I[L])}o.isIterable=E,o.isKeyed=R,o.isIndexed=S,o.isAssociative=j,o.isOrdered=T,o.Keyed=x,o.Indexed=y,o.Set=_;var A="@@__IMMUTABLE_ITERABLE__@@",M="@@__IMMUTABLE_KEYED__@@",P="@@__IMMUTABLE_INDEXED__@@",L="@@__IMMUTABLE_ORDERED__@@",D="delete",O=5,B=1<<O,N=B-1,F={},W={value:!1},V={value:!1};function U(I){return I.value=!1,I}function G(I){I&&(I.value=!0)}function oe(){}function X(I,H){H=H||0;for(var ne=Math.max(0,I.length-H),le=new Array(ne),ue=0;ue<ne;ue++)le[ue]=I[ue+H];return le}function ee(I){return I.size===void 0&&(I.size=I.__iterate(ie)),I.size}function ae(I,H){if(typeof H!="number"){var ne=H>>>0;if(""+ne!==H||ne===4294967295)return NaN;H=ne}return H<0?ee(I)+H:H}function ie(){return!0}function se(I,H,ne){return(I===0||ne!==void 0&&I<=-ne)&&(H===void 0||ne!==void 0&&H>=ne)}function Q(I,H){return J(I,H,0)}function Z(I,H){return J(I,H,H)}function J(I,H,ne){return I===void 0?ne:I<0?Math.max(0,H+I):H===void 0?I:Math.min(H,I)}var te=0,de=1,ce=2,me=typeof Symbol=="function"&&Symbol.iterator,ve="@@iterator",xe=me||ve;function ge(I){this.next=I}ge.prototype.toString=function(){return"[Iterator]"},ge.KEYS=te,ge.VALUES=de,ge.ENTRIES=ce,ge.prototype.inspect=ge.prototype.toSource=function(){return this.toString()},ge.prototype[xe]=function(){return this};function be(I,H,ne,le){var ue=I===0?H:I===1?ne:[H,ne];return le?le.value=ue:le={value:ue,done:!1},le}function ye(){return{value:void 0,done:!0}}function Ie(I){return!!Re(I)}function Pe(I){return I&&typeof I.next=="function"}function we(I){var H=Re(I);return H&&H.call(I)}function Re(I){var H=I&&(me&&I[me]||I[ve]);if(typeof H=="function")return H}function Se(I){return I&&typeof I.length=="number"}i(Ee,o);function Ee(I){return I==null?De():E(I)?I.toSeq():Ke(I)}Ee.of=function(){return Ee(arguments)},Ee.prototype.toSeq=function(){return this},Ee.prototype.toString=function(){return this.__toString("Seq {","}")},Ee.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Ee.prototype.__iterate=function(I,H){return qe(this,I,H,!0)},Ee.prototype.__iterator=function(I,H){return Je(this,I,H,!0)},i(Ce,Ee);function Ce(I){return I==null?De().toKeyedSeq():E(I)?R(I)?I.toSeq():I.fromEntrySeq():Le(I)}Ce.prototype.toKeyedSeq=function(){return this},i(he,Ee);function he(I){return I==null?De():E(I)?R(I)?I.entrySeq():I.toIndexedSeq():Fe(I)}he.of=function(){return he(arguments)},he.prototype.toIndexedSeq=function(){return this},he.prototype.toString=function(){return this.__toString("Seq [","]")},he.prototype.__iterate=function(I,H){return qe(this,I,H,!1)},he.prototype.__iterator=function(I,H){return Je(this,I,H,!1)},i(Ae,Ee);function Ae(I){return(I==null?De():E(I)?R(I)?I.entrySeq():I:Fe(I)).toSetSeq()}Ae.of=function(){return Ae(arguments)},Ae.prototype.toSetSeq=function(){return this},Ee.isSeq=We,Ee.Keyed=Ce,Ee.Set=Ae,Ee.Indexed=he;var Ne="@@__IMMUTABLE_SEQ__@@";Ee.prototype[Ne]=!0,i(Be,he);function Be(I){this._array=I,this.size=I.length}Be.prototype.get=function(I,H){return this.has(I)?this._array[ae(this,I)]:H},Be.prototype.__iterate=function(I,H){for(var ne=this._array,le=ne.length-1,ue=0;ue<=le;ue++)if(I(ne[H?le-ue:ue],ue,this)===!1)return ue+1;return ue},Be.prototype.__iterator=function(I,H){var ne=this._array,le=ne.length-1,ue=0;return new ge(function(){return ue>le?ye():be(I,ue,ne[H?le-ue++:ue++])})},i(Oe,Ce);function Oe(I){var H=Object.keys(I);this._object=I,this._keys=H,this.size=H.length}Oe.prototype.get=function(I,H){return H!==void 0&&!this.has(I)?H:this._object[I]},Oe.prototype.has=function(I){return this._object.hasOwnProperty(I)},Oe.prototype.__iterate=function(I,H){for(var ne=this._object,le=this._keys,ue=le.length-1,pe=0;pe<=ue;pe++){var fe=le[H?ue-pe:pe];if(I(ne[fe],fe,this)===!1)return pe+1}return pe},Oe.prototype.__iterator=function(I,H){var ne=this._object,le=this._keys,ue=le.length-1,pe=0;return new ge(function(){var fe=le[H?ue-pe:pe];return pe++>ue?ye():be(I,fe,ne[fe])})},Oe.prototype[L]=!0,i(Ue,he);function Ue(I){this._iterable=I,this.size=I.length||I.size}Ue.prototype.__iterateUncached=function(I,H){if(H)return this.cacheResult().__iterate(I,H);var ne=this._iterable,le=we(ne),ue=0;if(Pe(le))for(var pe;!(pe=le.next()).done&&I(pe.value,ue++,this)!==!1;);return ue},Ue.prototype.__iteratorUncached=function(I,H){if(H)return this.cacheResult().__iterator(I,H);var ne=this._iterable,le=we(ne);if(!Pe(le))return new ge(ye);var ue=0;return new ge(function(){var pe=le.next();return pe.done?pe:be(I,ue++,pe.value)})},i(Ve,he);function Ve(I){this._iterator=I,this._iteratorCache=[]}Ve.prototype.__iterateUncached=function(I,H){if(H)return this.cacheResult().__iterate(I,H);for(var ne=this._iterator,le=this._iteratorCache,ue=0;ue<le.length;)if(I(le[ue],ue++,this)===!1)return ue;for(var pe;!(pe=ne.next()).done;){var fe=pe.value;if(le[ue]=fe,I(fe,ue++,this)===!1)break}return ue},Ve.prototype.__iteratorUncached=function(I,H){if(H)return this.cacheResult().__iterator(I,H);var ne=this._iterator,le=this._iteratorCache,ue=0;return new ge(function(){if(ue>=le.length){var pe=ne.next();if(pe.done)return pe;le[ue]=pe.value}return be(I,ue,le[ue++])})};function We(I){return!!(I&&I[Ne])}var Te;function De(){return Te||(Te=new Be([]))}function Le(I){var H=Array.isArray(I)?new Be(I).fromEntrySeq():Pe(I)?new Ve(I).fromEntrySeq():Ie(I)?new Ue(I).fromEntrySeq():typeof I=="object"?new Oe(I):void 0;if(!H)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+I);return H}function Fe(I){var H=nt(I);if(!H)throw new TypeError("Expected Array or iterable object of values: "+I);return H}function Ke(I){var H=nt(I)||typeof I=="object"&&new Oe(I);if(!H)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+I);return H}function nt(I){return Se(I)?new Be(I):Pe(I)?new Ve(I):Ie(I)?new Ue(I):void 0}function qe(I,H,ne,le){var ue=I._cache;if(ue){for(var pe=ue.length-1,fe=0;fe<=pe;fe++){var _e=ue[ne?pe-fe:fe];if(H(_e[1],le?_e[0]:fe,I)===!1)return fe+1}return fe}return I.__iterateUncached(H,ne)}function Je(I,H,ne,le){var ue=I._cache;if(ue){var pe=ue.length-1,fe=0;return new ge(function(){var _e=ue[ne?pe-fe:fe];return fe++>pe?ye():be(H,le?_e[0]:fe-1,_e[1])})}return I.__iteratorUncached(H,ne)}function Qe(I,H){return H?Wt(H,I,"",{"":I}):ct(I)}function Wt(I,H,ne,le){return Array.isArray(H)?I.call(le,ne,he(H).map(function(ue,pe){return Wt(I,ue,pe,H)})):qt(H)?I.call(le,ne,Ce(H).map(function(ue,pe){return Wt(I,ue,pe,H)})):H}function ct(I){return Array.isArray(I)?he(I).map(ct).toList():qt(I)?Ce(I).map(ct).toMap():I}function qt(I){return I&&(I.constructor===Object||I.constructor===void 0)}function it(I,H){if(I===H||I!==I&&H!==H)return!0;if(!I||!H)return!1;if(typeof I.valueOf=="function"&&typeof H.valueOf=="function"){if(I=I.valueOf(),H=H.valueOf(),I===H||I!==I&&H!==H)return!0;if(!I||!H)return!1}return!!(typeof I.equals=="function"&&typeof H.equals=="function"&&I.equals(H))}function sr(I,H){if(I===H)return!0;if(!E(H)||I.size!==void 0&&H.size!==void 0&&I.size!==H.size||I.__hash!==void 0&&H.__hash!==void 0&&I.__hash!==H.__hash||R(I)!==R(H)||S(I)!==S(H)||T(I)!==T(H))return!1;if(I.size===0&&H.size===0)return!0;var ne=!j(I);if(T(I)){var le=I.entries();return H.every(function(ke,je){var Me=le.next().value;return Me&&it(Me[1],ke)&&(ne||it(Me[0],je))})&&le.next().done}var ue=!1;if(I.size===void 0)if(H.size===void 0)typeof I.cacheResult=="function"&&I.cacheResult();else{ue=!0;var pe=I;I=H,H=pe}var fe=!0,_e=H.__iterate(function(ke,je){if(ne?!I.has(ke):ue?!it(ke,I.get(je,F)):!it(I.get(je,F),ke))return fe=!1,!1});return fe&&I.size===_e}i(st,he);function st(I,H){if(!(this instanceof st))return new st(I,H);if(this._value=I,this.size=H===void 0?1/0:Math.max(0,H),this.size===0){if(It)return It;It=this}}st.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},st.prototype.get=function(I,H){return this.has(I)?this._value:H},st.prototype.includes=function(I){return it(this._value,I)},st.prototype.slice=function(I,H){var ne=this.size;return se(I,H,ne)?this:new st(this._value,Z(H,ne)-Q(I,ne))},st.prototype.reverse=function(){return this},st.prototype.indexOf=function(I){return it(this._value,I)?0:-1},st.prototype.lastIndexOf=function(I){return it(this._value,I)?this.size:-1},st.prototype.__iterate=function(I,H){for(var ne=0;ne<this.size;ne++)if(I(this._value,ne,this)===!1)return ne+1;return ne},st.prototype.__iterator=function(I,H){var ne=this,le=0;return new ge(function(){return le<ne.size?be(I,le++,ne._value):ye()})},st.prototype.equals=function(I){return I instanceof st?it(this._value,I._value):sr(I)};var It;function er(I,H){if(!I)throw new Error(H)}i(Ge,he);function Ge(I,H,ne){if(!(this instanceof Ge))return new Ge(I,H,ne);if(er(ne!==0,"Cannot step a Range by 0"),I=I||0,H===void 0&&(H=1/0),ne=ne===void 0?1:Math.abs(ne),H<I&&(ne=-ne),this._start=I,this._end=H,this._step=ne,this.size=Math.max(0,Math.ceil((H-I)/ne-1)+1),this.size===0){if(Ze)return Ze;Ze=this}}Ge.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Ge.prototype.get=function(I,H){return this.has(I)?this._start+ae(this,I)*this._step:H},Ge.prototype.includes=function(I){var H=(I-this._start)/this._step;return H>=0&&H<this.size&&H===Math.floor(H)},Ge.prototype.slice=function(I,H){return se(I,H,this.size)?this:(I=Q(I,this.size),H=Z(H,this.size),H<=I?new Ge(0,0):new Ge(this.get(I,this._end),this.get(H,this._end),this._step))},Ge.prototype.indexOf=function(I){var H=I-this._start;if(H%this._step===0){var ne=H/this._step;if(ne>=0&&ne<this.size)return ne}return-1},Ge.prototype.lastIndexOf=function(I){return this.indexOf(I)},Ge.prototype.__iterate=function(I,H){for(var ne=this.size-1,le=this._step,ue=H?this._start+ne*le:this._start,pe=0;pe<=ne;pe++){if(I(ue,pe,this)===!1)return pe+1;ue+=H?-le:le}return pe},Ge.prototype.__iterator=function(I,H){var ne=this.size-1,le=this._step,ue=H?this._start+ne*le:this._start,pe=0;return new ge(function(){var fe=ue;return ue+=H?-le:le,pe>ne?ye():be(I,pe++,fe)})},Ge.prototype.equals=function(I){return I instanceof Ge?this._start===I._start&&this._end===I._end&&this._step===I._step:sr(this,I)};var Ze;i(et,o);function et(){throw TypeError("Abstract")}i(dt,et);function dt(){}i(Ct,et);function Ct(){}i(mt,et);function mt(){}et.Keyed=dt,et.Indexed=Ct,et.Set=mt;var yt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(H,ne){H=H|0,ne=ne|0;var le=H&65535,ue=ne&65535;return le*ue+((H>>>16)*ue+le*(ne>>>16)<<16>>>0)|0};function Ft(I){return I>>>1&1073741824|I&3221225471}function Rt(I){if(I===!1||I===null||I===void 0||typeof I.valueOf=="function"&&(I=I.valueOf(),I===!1||I===null||I===void 0))return 0;if(I===!0)return 1;var H=typeof I;if(H==="number"){var ne=I|0;for(ne!==I&&(ne^=I*4294967295);I>4294967295;)I/=4294967295,ne^=I;return Ft(ne)}if(H==="string")return I.length>vr?Kt(I):tr(I);if(typeof I.hashCode=="function")return I.hashCode();if(H==="object")return ar(I);if(typeof I.toString=="function")return tr(I.toString());throw new Error("Value type "+H+" cannot be hashed.")}function Kt(I){var H=Yr[I];return H===void 0&&(H=tr(I),qr===Mr&&(qr=0,Yr={}),qr++,Yr[I]=H),H}function tr(I){for(var H=0,ne=0;ne<I.length;ne++)H=31*H+I.charCodeAt(ne)|0;return Ft(H)}function ar(I){var H;if($t&&(H=Ut.get(I),H!==void 0)||(H=I[Xt],H!==void 0)||!lr&&(H=I.propertyIsEnumerable&&I.propertyIsEnumerable[Xt],H!==void 0||(H=Xe(I),H!==void 0)))return H;if(H=++Yt,Yt&1073741824&&(Yt=0),$t)Ut.set(I,H);else{if(ir!==void 0&&ir(I)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(lr)Object.defineProperty(I,Xt,{enumerable:!1,configurable:!1,writable:!1,value:H});else if(I.propertyIsEnumerable!==void 0&&I.propertyIsEnumerable===I.constructor.prototype.propertyIsEnumerable)I.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},I.propertyIsEnumerable[Xt]=H;else if(I.nodeType!==void 0)I[Xt]=H;else throw new Error("Unable to set a non-enumerable property on object.")}return H}var ir=Object.isExtensible,lr=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Xe(I){if(I&&I.nodeType>0)switch(I.nodeType){case 1:return I.uniqueID;case 9:return I.documentElement&&I.documentElement.uniqueID}}var $t=typeof WeakMap=="function",Ut;$t&&(Ut=new WeakMap);var Yt=0,Xt="__immutablehash__";typeof Symbol=="function"&&(Xt=Symbol(Xt));var vr=16,Mr=255,qr=0,Yr={};function Zt(I){er(I!==1/0,"Cannot perform this action with an infinite size.")}i(at,dt);function at(I){return I==null?cr():Xr(I)&&!T(I)?I:cr().withMutations(function(H){var ne=x(I);Zt(ne.size),ne.forEach(function(le,ue){return H.set(ue,le)})})}at.prototype.toString=function(){return this.__toString("Map {","}")},at.prototype.get=function(I,H){return this._root?this._root.get(0,void 0,I,H):H},at.prototype.set=function(I,H){return Sn(this,I,H)},at.prototype.setIn=function(I,H){return this.updateIn(I,F,function(){return H})},at.prototype.remove=function(I){return Sn(this,I,F)},at.prototype.deleteIn=function(I){return this.updateIn(I,function(){return F})},at.prototype.update=function(I,H,ne){return arguments.length===1?I(this):this.updateIn([I],H,ne)},at.prototype.updateIn=function(I,H,ne){ne||(ne=H,H=void 0);var le=wn(this,Xn(I),H,ne);return le===F?void 0:le},at.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):cr()},at.prototype.merge=function(){return Or(this,void 0,arguments)},at.prototype.mergeWith=function(I){var H=a.call(arguments,1);return Or(this,I,H)},at.prototype.mergeIn=function(I){var H=a.call(arguments,1);return this.updateIn(I,cr(),function(ne){return typeof ne.merge=="function"?ne.merge.apply(ne,H):H[H.length-1]})},at.prototype.mergeDeep=function(){return Or(this,Cn,arguments)},at.prototype.mergeDeepWith=function(I){var H=a.call(arguments,1);return Or(this,Tn(I),H)},at.prototype.mergeDeepIn=function(I){var H=a.call(arguments,1);return this.updateIn(I,cr(),function(ne){return typeof ne.mergeDeep=="function"?ne.mergeDeep.apply(ne,H):H[H.length-1]})},at.prototype.sort=function(I){return Mt(wr(this,I))},at.prototype.sortBy=function(I,H){return Mt(wr(this,H,I))},at.prototype.withMutations=function(I){var H=this.asMutable();return I(H),H.wasAltered()?H.__ensureOwner(this.__ownerID):this},at.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new oe)},at.prototype.asImmutable=function(){return this.__ensureOwner()},at.prototype.wasAltered=function(){return this.__altered},at.prototype.__iterator=function(I,H){return new Zr(this,I,H)},at.prototype.__iterate=function(I,H){var ne=this,le=0;return this._root&&this._root.iterate(function(ue){return le++,I(ue[1],ue[0],ne)},H),le},at.prototype.__ensureOwner=function(I){return I===this.__ownerID?this:I?Qr(this.size,this._root,I,this.__hash):(this.__ownerID=I,this.__altered=!1,this)};function Xr(I){return!!(I&&I[En])}at.isMap=Xr;var En="@@__IMMUTABLE_MAP__@@",rt=at.prototype;rt[En]=!0,rt[D]=rt.remove,rt.removeIn=rt.deleteIn;function Ir(I,H){this.ownerID=I,this.entries=H}Ir.prototype.get=function(I,H,ne,le){for(var ue=this.entries,pe=0,fe=ue.length;pe<fe;pe++)if(it(ne,ue[pe][0]))return ue[pe][1];return le},Ir.prototype.update=function(I,H,ne,le,ue,pe,fe){for(var _e=ue===F,ke=this.entries,je=0,Me=ke.length;je<Me&&!it(le,ke[je][0]);je++);var ze=je<Me;if(ze?ke[je][1]===ue:_e)return this;if(G(fe),(_e||!ze)&&G(pe),!(_e&&ke.length===1)){if(!ze&&!_e&&ke.length>=_s)return hs(I,ke,le,ue);var He=I&&I===this.ownerID,Ye=He?ke:X(ke);return ze?_e?je===Me-1?Ye.pop():Ye[je]=Ye.pop():Ye[je]=[le,ue]:Ye.push([le,ue]),He?(this.entries=Ye,this):new Ir(I,Ye)}};function Rr(I,H,ne){this.ownerID=I,this.bitmap=H,this.nodes=ne}Rr.prototype.get=function(I,H,ne,le){H===void 0&&(H=Rt(ne));var ue=1<<((I===0?H:H>>>I)&N),pe=this.bitmap;return pe&ue?this.nodes[An(pe&ue-1)].get(I+O,H,ne,le):le},Rr.prototype.update=function(I,H,ne,le,ue,pe,fe){ne===void 0&&(ne=Rt(le));var _e=(H===0?ne:ne>>>H)&N,ke=1<<_e,je=this.bitmap,Me=(je&ke)!==0;if(!Me&&ue===F)return this;var ze=An(je&ke-1),He=this.nodes,Ye=Me?He[ze]:void 0,tt=en(Ye,I,H+O,ne,le,ue,pe,fe);if(tt===Ye)return this;if(!Me&&tt&&He.length>=Es)return gs(I,He,je,_e,tt);if(Me&&!tt&&He.length===2&&kn(He[ze^1]))return He[ze^1];if(Me&&tt&&He.length===1&&kn(tt))return tt;var ft=I&&I===this.ownerID,nr=Me?tt?je:je^ke:je|ke,pr=Me?tt?$n(He,ze,tt,ft):vs(He,ze,ft):ys(He,ze,tt,ft);return ft?(this.bitmap=nr,this.nodes=pr,this):new Rr(I,nr,pr)};function Pr(I,H,ne){this.ownerID=I,this.count=H,this.nodes=ne}Pr.prototype.get=function(I,H,ne,le){H===void 0&&(H=Rt(ne));var ue=(I===0?H:H>>>I)&N,pe=this.nodes[ue];return pe?pe.get(I+O,H,ne,le):le},Pr.prototype.update=function(I,H,ne,le,ue,pe,fe){ne===void 0&&(ne=Rt(le));var _e=(H===0?ne:ne>>>H)&N,ke=ue===F,je=this.nodes,Me=je[_e];if(ke&&!Me)return this;var ze=en(Me,I,H+O,ne,le,ue,pe,fe);if(ze===Me)return this;var He=this.count;if(!Me)He++;else if(!ze&&(He--,He<bs))return xs(I,je,He,_e);var Ye=I&&I===this.ownerID,tt=$n(je,_e,ze,Ye);return Ye?(this.count=He,this.nodes=tt,this):new Pr(I,He,tt)};function Sr(I,H,ne){this.ownerID=I,this.keyHash=H,this.entries=ne}Sr.prototype.get=function(I,H,ne,le){for(var ue=this.entries,pe=0,fe=ue.length;pe<fe;pe++)if(it(ne,ue[pe][0]))return ue[pe][1];return le},Sr.prototype.update=function(I,H,ne,le,ue,pe,fe){ne===void 0&&(ne=Rt(le));var _e=ue===F;if(ne!==this.keyHash)return _e?this:(G(fe),G(pe),tn(this,I,H,ne,[le,ue]));for(var ke=this.entries,je=0,Me=ke.length;je<Me&&!it(le,ke[je][0]);je++);var ze=je<Me;if(ze?ke[je][1]===ue:_e)return this;if(G(fe),(_e||!ze)&&G(pe),_e&&Me===2)return new gr(I,this.keyHash,ke[je^1]);var He=I&&I===this.ownerID,Ye=He?ke:X(ke);return ze?_e?je===Me-1?Ye.pop():Ye[je]=Ye.pop():Ye[je]=[le,ue]:Ye.push([le,ue]),He?(this.entries=Ye,this):new Sr(I,this.keyHash,Ye)};function gr(I,H,ne){this.ownerID=I,this.keyHash=H,this.entry=ne}gr.prototype.get=function(I,H,ne,le){return it(ne,this.entry[0])?this.entry[1]:le},gr.prototype.update=function(I,H,ne,le,ue,pe,fe){var _e=ue===F,ke=it(le,this.entry[0]);if(ke?ue===this.entry[1]:_e)return this;if(G(fe),_e){G(pe);return}return ke?I&&I===this.ownerID?(this.entry[1]=ue,this):new gr(I,this.keyHash,[le,ue]):(G(pe),tn(this,I,H,Rt(le),[le,ue]))},Ir.prototype.iterate=Sr.prototype.iterate=function(I,H){for(var ne=this.entries,le=0,ue=ne.length-1;le<=ue;le++)if(I(ne[H?ue-le:le])===!1)return!1},Rr.prototype.iterate=Pr.prototype.iterate=function(I,H){for(var ne=this.nodes,le=0,ue=ne.length-1;le<=ue;le++){var pe=ne[H?ue-le:le];if(pe&&pe.iterate(I,H)===!1)return!1}},gr.prototype.iterate=function(I,H){return I(this.entry)},i(Zr,ge);function Zr(I,H,ne){this._type=H,this._reverse=ne,this._stack=I._root&&bn(I._root)}Zr.prototype.next=function(){for(var I=this._type,H=this._stack;H;){var ne=H.node,le=H.index++,ue;if(ne.entry){if(le===0)return Jr(I,ne.entry)}else if(ne.entries){if(ue=ne.entries.length-1,le<=ue)return Jr(I,ne.entries[this._reverse?ue-le:le])}else if(ue=ne.nodes.length-1,le<=ue){var pe=ne.nodes[this._reverse?ue-le:le];if(pe){if(pe.entry)return Jr(I,pe.entry);H=this._stack=bn(pe,H)}continue}H=this._stack=this._stack.__prev}return ye()};function Jr(I,H){return be(I,H[0],H[1])}function bn(I,H){return{node:I,index:0,__prev:H}}function Qr(I,H,ne,le){var ue=Object.create(rt);return ue.size=I,ue._root=H,ue.__ownerID=ne,ue.__hash=le,ue.__altered=!1,ue}var Rn;function cr(){return Rn||(Rn=Qr(0))}function Sn(I,H,ne){var le,ue;if(I._root){var pe=U(W),fe=U(V);if(le=en(I._root,I.__ownerID,0,void 0,H,ne,pe,fe),!fe.value)return I;ue=I.size+(pe.value?ne===F?-1:1:0)}else{if(ne===F)return I;ue=1,le=new Ir(I.__ownerID,[[H,ne]])}return I.__ownerID?(I.size=ue,I._root=le,I.__hash=void 0,I.__altered=!0,I):le?Qr(ue,le):cr()}function en(I,H,ne,le,ue,pe,fe,_e){return I?I.update(H,ne,le,ue,pe,fe,_e):pe===F?I:(G(_e),G(fe),new gr(H,le,[ue,pe]))}function kn(I){return I.constructor===gr||I.constructor===Sr}function tn(I,H,ne,le,ue){if(I.keyHash===le)return new Sr(H,le,[I.entry,ue]);var pe=(ne===0?I.keyHash:I.keyHash>>>ne)&N,fe=(ne===0?le:le>>>ne)&N,_e,ke=pe===fe?[tn(I,H,ne+O,le,ue)]:(_e=new gr(H,le,ue),pe<fe?[I,_e]:[_e,I]);return new Rr(H,1<<pe|1<<fe,ke)}function hs(I,H,ne,le){I||(I=new oe);for(var ue=new gr(I,Rt(ne),[ne,le]),pe=0;pe<H.length;pe++){var fe=H[pe];ue=ue.update(I,0,void 0,fe[0],fe[1])}return ue}function xs(I,H,ne,le){for(var ue=0,pe=0,fe=new Array(ne),_e=0,ke=1,je=H.length;_e<je;_e++,ke<<=1){var Me=H[_e];Me!==void 0&&_e!==le&&(ue|=ke,fe[pe++]=Me)}return new Rr(I,ue,fe)}function gs(I,H,ne,le,ue){for(var pe=0,fe=new Array(B),_e=0;ne!==0;_e++,ne>>>=1)fe[_e]=ne&1?H[pe++]:void 0;return fe[le]=ue,new Pr(I,pe+1,fe)}function Or(I,H,ne){for(var le=[],ue=0;ue<ne.length;ue++){var pe=ne[ue],fe=x(pe);E(pe)||(fe=fe.map(function(_e){return Qe(_e)})),le.push(fe)}return jn(I,H,le)}function Cn(I,H,ne){return I&&I.mergeDeep&&E(H)?I.mergeDeep(H):it(I,H)?I:H}function Tn(I){return function(H,ne,le){if(H&&H.mergeDeepWith&&E(ne))return H.mergeDeepWith(I,ne);var ue=I(H,ne,le);return it(H,ue)?H:ue}}function jn(I,H,ne){return ne=ne.filter(function(le){return le.size!==0}),ne.length===0?I:I.size===0&&!I.__ownerID&&ne.length===1?I.constructor(ne[0]):I.withMutations(function(le){for(var ue=H?function(fe,_e){le.update(_e,F,function(ke){return ke===F?fe:H(ke,fe,_e)})}:function(fe,_e){le.set(_e,fe)},pe=0;pe<ne.length;pe++)ne[pe].forEach(ue)})}function wn(I,H,ne,le){var ue=I===F,pe=H.next();if(pe.done){var fe=ue?ne:I,_e=le(fe);return _e===fe?I:_e}er(ue||I&&I.set,"invalid keyPath");var ke=pe.value,je=ue?F:I.get(ke,F),Me=wn(je,H,ne,le);return Me===je?I:Me===F?I.remove(ke):(ue?cr():I).set(ke,Me)}function An(I){return I=I-(I>>1&1431655765),I=(I&858993459)+(I>>2&858993459),I=I+(I>>4)&252645135,I=I+(I>>8),I=I+(I>>16),I&127}function $n(I,H,ne,le){var ue=le?I:X(I);return ue[H]=ne,ue}function ys(I,H,ne,le){var ue=I.length+1;if(le&&H+1===ue)return I[H]=ne,I;for(var pe=new Array(ue),fe=0,_e=0;_e<ue;_e++)_e===H?(pe[_e]=ne,fe=-1):pe[_e]=I[_e+fe];return pe}function vs(I,H,ne){var le=I.length-1;if(ne&&H===le)return I.pop(),I;for(var ue=new Array(le),pe=0,fe=0;fe<le;fe++)fe===H&&(pe=1),ue[fe]=I[fe+pe];return ue}var _s=B/4,Es=B/2,bs=B/4;i(ut,Ct);function ut(I){var H=rn();if(I==null)return H;if(Mn(I))return I;var ne=y(I),le=ne.size;return le===0?H:(Zt(le),le>0&&le<B?Nr(0,le,O,null,new _r(ne.toArray())):H.withMutations(function(ue){ue.setSize(le),ne.forEach(function(pe,fe){return ue.set(fe,pe)})}))}ut.of=function(){return this(arguments)},ut.prototype.toString=function(){return this.__toString("List [","]")},ut.prototype.get=function(I,H){if(I=ae(this,I),I>=0&&I<this.size){I+=this._origin;var ne=Nn(this,I);return ne&&ne.array[I&N]}return H},ut.prototype.set=function(I,H){return Rs(this,I,H)},ut.prototype.remove=function(I){return this.has(I)?I===0?this.shift():I===this.size-1?this.pop():this.splice(I,1):this},ut.prototype.insert=function(I,H){return this.splice(I,0,H)},ut.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=O,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):rn()},ut.prototype.push=function(){var I=arguments,H=this.size;return this.withMutations(function(ne){Er(ne,0,H+I.length);for(var le=0;le<I.length;le++)ne.set(H+le,I[le])})},ut.prototype.pop=function(){return Er(this,0,-1)},ut.prototype.unshift=function(){var I=arguments;return this.withMutations(function(H){Er(H,-I.length);for(var ne=0;ne<I.length;ne++)H.set(ne,I[ne])})},ut.prototype.shift=function(){return Er(this,1)},ut.prototype.merge=function(){return Fr(this,void 0,arguments)},ut.prototype.mergeWith=function(I){var H=a.call(arguments,1);return Fr(this,I,H)},ut.prototype.mergeDeep=function(){return Fr(this,Cn,arguments)},ut.prototype.mergeDeepWith=function(I){var H=a.call(arguments,1);return Fr(this,Tn(I),H)},ut.prototype.setSize=function(I){return Er(this,0,I)},ut.prototype.slice=function(I,H){var ne=this.size;return se(I,H,ne)?this:Er(this,Q(I,ne),Z(H,ne))},ut.prototype.__iterator=function(I,H){var ne=0,le=Pn(this,H);return new ge(function(){var ue=le();return ue===Dr?ye():be(I,ne++,ue)})},ut.prototype.__iterate=function(I,H){for(var ne=0,le=Pn(this,H),ue;(ue=le())!==Dr&&I(ue,ne++,this)!==!1;);return ne},ut.prototype.__ensureOwner=function(I){return I===this.__ownerID?this:I?Nr(this._origin,this._capacity,this._level,this._root,this._tail,I,this.__hash):(this.__ownerID=I,this)};function Mn(I){return!!(I&&I[In])}ut.isList=Mn;var In="@@__IMMUTABLE_LIST__@@",Ht=ut.prototype;Ht[In]=!0,Ht[D]=Ht.remove,Ht.setIn=rt.setIn,Ht.deleteIn=Ht.removeIn=rt.removeIn,Ht.update=rt.update,Ht.updateIn=rt.updateIn,Ht.mergeIn=rt.mergeIn,Ht.mergeDeepIn=rt.mergeDeepIn,Ht.withMutations=rt.withMutations,Ht.asMutable=rt.asMutable,Ht.asImmutable=rt.asImmutable,Ht.wasAltered=rt.wasAltered;function _r(I,H){this.array=I,this.ownerID=H}_r.prototype.removeBefore=function(I,H,ne){if(ne===H?1<<H:this.array.length===0)return this;var le=ne>>>H&N;if(le>=this.array.length)return new _r([],I);var ue=le===0,pe;if(H>0){var fe=this.array[le];if(pe=fe&&fe.removeBefore(I,H-O,ne),pe===fe&&ue)return this}if(ue&&!pe)return this;var _e=kr(this,I);if(!ue)for(var ke=0;ke<le;ke++)_e.array[ke]=void 0;return pe&&(_e.array[le]=pe),_e},_r.prototype.removeAfter=function(I,H,ne){if(ne===(H?1<<H:0)||this.array.length===0)return this;var le=ne-1>>>H&N;if(le>=this.array.length)return this;var ue;if(H>0){var pe=this.array[le];if(ue=pe&&pe.removeAfter(I,H-O,ne),ue===pe&&le===this.array.length-1)return this}var fe=kr(this,I);return fe.array.splice(le+1),ue&&(fe.array[le]=ue),fe};var Dr={};function Pn(I,H){var ne=I._origin,le=I._capacity,ue=Lr(le),pe=I._tail;return fe(I._root,I._level,0);function fe(je,Me,ze){return Me===0?_e(je,ze):ke(je,Me,ze)}function _e(je,Me){var ze=Me===ue?pe&&pe.array:je&&je.array,He=Me>ne?0:ne-Me,Ye=le-Me;return Ye>B&&(Ye=B),function(){if(He===Ye)return Dr;var tt=H?--Ye:He++;return ze&&ze[tt]}}function ke(je,Me,ze){var He,Ye=je&&je.array,tt=ze>ne?0:ne-ze>>Me,ft=(le-ze>>Me)+1;return ft>B&&(ft=B),function(){do{if(He){var nr=He();if(nr!==Dr)return nr;He=null}if(tt===ft)return Dr;var pr=H?--ft:tt++;He=fe(Ye&&Ye[pr],Me-O,ze+(pr<<Me))}while(!0)}}}function Nr(I,H,ne,le,ue,pe,fe){var _e=Object.create(Ht);return _e.size=H-I,_e._origin=I,_e._capacity=H,_e._level=ne,_e._root=le,_e._tail=ue,_e.__ownerID=pe,_e.__hash=fe,_e.__altered=!1,_e}var Dn;function rn(){return Dn||(Dn=Nr(0,0,O))}function Rs(I,H,ne){if(H=ae(I,H),H!==H)return I;if(H>=I.size||H<0)return I.withMutations(function(fe){H<0?Er(fe,H).set(0,ne):Er(fe,0,H+1).set(H,ne)});H+=I._origin;var le=I._tail,ue=I._root,pe=U(V);return H>=Lr(I._capacity)?le=nn(le,I.__ownerID,0,H,ne,pe):ue=nn(ue,I.__ownerID,I._level,H,ne,pe),pe.value?I.__ownerID?(I._root=ue,I._tail=le,I.__hash=void 0,I.__altered=!0,I):Nr(I._origin,I._capacity,I._level,ue,le):I}function nn(I,H,ne,le,ue,pe){var fe=le>>>ne&N,_e=I&&fe<I.array.length;if(!_e&&ue===void 0)return I;var ke;if(ne>0){var je=I&&I.array[fe],Me=nn(je,H,ne-O,le,ue,pe);return Me===je?I:(ke=kr(I,H),ke.array[fe]=Me,ke)}return _e&&I.array[fe]===ue?I:(G(pe),ke=kr(I,H),ue===void 0&&fe===ke.array.length-1?ke.array.pop():ke.array[fe]=ue,ke)}function kr(I,H){return H&&I&&H===I.ownerID?I:new _r(I?I.array.slice():[],H)}function Nn(I,H){if(H>=Lr(I._capacity))return I._tail;if(H<1<<I._level+O){for(var ne=I._root,le=I._level;ne&&le>0;)ne=ne.array[H>>>le&N],le-=O;return ne}}function Er(I,H,ne){H!==void 0&&(H=H|0),ne!==void 0&&(ne=ne|0);var le=I.__ownerID||new oe,ue=I._origin,pe=I._capacity,fe=ue+H,_e=ne===void 0?pe:ne<0?pe+ne:ue+ne;if(fe===ue&&_e===pe)return I;if(fe>=_e)return I.clear();for(var ke=I._level,je=I._root,Me=0;fe+Me<0;)je=new _r(je&&je.array.length?[void 0,je]:[],le),ke+=O,Me+=1<<ke;Me&&(fe+=Me,ue+=Me,_e+=Me,pe+=Me);for(var ze=Lr(pe),He=Lr(_e);He>=1<<ke+O;)je=new _r(je&&je.array.length?[je]:[],le),ke+=O;var Ye=I._tail,tt=He<ze?Nn(I,_e-1):He>ze?new _r([],le):Ye;if(Ye&&He>ze&&fe<pe&&Ye.array.length){je=kr(je,le);for(var ft=je,nr=ke;nr>O;nr-=O){var pr=ze>>>nr&N;ft=ft.array[pr]=kr(ft.array[pr],le)}ft.array[ze>>>O&N]=Ye}if(_e<pe&&(tt=tt&&tt.removeAfter(le,0,_e)),fe>=He)fe-=He,_e-=He,ke=O,je=null,tt=tt&&tt.removeBefore(le,0,fe);else if(fe>ue||He<ze){for(Me=0;je;){var Gr=fe>>>ke&N;if(Gr!==He>>>ke&N)break;Gr&&(Me+=(1<<ke)*Gr),ke-=O,je=je.array[Gr]}je&&fe>ue&&(je=je.removeBefore(le,ke,fe-Me)),je&&He<ze&&(je=je.removeAfter(le,ke,He-Me)),Me&&(fe-=Me,_e-=Me)}return I.__ownerID?(I.size=_e-fe,I._origin=fe,I._capacity=_e,I._level=ke,I._root=je,I._tail=tt,I.__hash=void 0,I.__altered=!0,I):Nr(fe,_e,ke,je,tt)}function Fr(I,H,ne){for(var le=[],ue=0,pe=0;pe<ne.length;pe++){var fe=ne[pe],_e=y(fe);_e.size>ue&&(ue=_e.size),E(fe)||(_e=_e.map(function(ke){return Qe(ke)})),le.push(_e)}return ue>I.size&&(I=I.setSize(ue)),jn(I,H,le)}function Lr(I){return I<B?0:I-1>>>O<<O}i(Mt,at);function Mt(I){return I==null?Ur():Ln(I)?I:Ur().withMutations(function(H){var ne=x(I);Zt(ne.size),ne.forEach(function(le,ue){return H.set(ue,le)})})}Mt.of=function(){return this(arguments)},Mt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Mt.prototype.get=function(I,H){var ne=this._map.get(I);return ne!==void 0?this._list.get(ne)[1]:H},Mt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ur()},Mt.prototype.set=function(I,H){return On(this,I,H)},Mt.prototype.remove=function(I){return On(this,I,F)},Mt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Mt.prototype.__iterate=function(I,H){var ne=this;return this._list.__iterate(function(le){return le&&I(le[1],le[0],ne)},H)},Mt.prototype.__iterator=function(I,H){return this._list.fromEntrySeq().__iterator(I,H)},Mt.prototype.__ensureOwner=function(I){if(I===this.__ownerID)return this;var H=this._map.__ensureOwner(I),ne=this._list.__ensureOwner(I);return I?an(H,ne,I,this.__hash):(this.__ownerID=I,this._map=H,this._list=ne,this)};function Ln(I){return Xr(I)&&T(I)}Mt.isOrderedMap=Ln,Mt.prototype[L]=!0,Mt.prototype[D]=Mt.prototype.remove;function an(I,H,ne,le){var ue=Object.create(Mt.prototype);return ue.size=I?I.size:0,ue._map=I,ue._list=H,ue.__ownerID=ne,ue.__hash=le,ue}var Bn;function Ur(){return Bn||(Bn=an(cr(),rn()))}function On(I,H,ne){var le=I._map,ue=I._list,pe=le.get(H),fe=pe!==void 0,_e,ke;if(ne===F){if(!fe)return I;ue.size>=B&&ue.size>=le.size*2?(ke=ue.filter(function(je,Me){return je!==void 0&&pe!==Me}),_e=ke.toKeyedSeq().map(function(je){return je[0]}).flip().toMap(),I.__ownerID&&(_e.__ownerID=ke.__ownerID=I.__ownerID)):(_e=le.remove(H),ke=pe===ue.size-1?ue.pop():ue.set(pe,void 0))}else if(fe){if(ne===ue.get(pe)[1])return I;_e=le,ke=ue.set(pe,[H,ne])}else _e=le.set(H,ue.size),ke=ue.set(ue.size,[H,ne]);return I.__ownerID?(I.size=_e.size,I._map=_e,I._list=ke,I.__hash=void 0,I):an(_e,ke)}i(rr,Ce);function rr(I,H){this._iter=I,this._useKeys=H,this.size=I.size}rr.prototype.get=function(I,H){return this._iter.get(I,H)},rr.prototype.has=function(I){return this._iter.has(I)},rr.prototype.valueSeq=function(){return this._iter.valueSeq()},rr.prototype.reverse=function(){var I=this,H=ln(this,!0);return this._useKeys||(H.valueSeq=function(){return I._iter.toSeq().reverse()}),H},rr.prototype.map=function(I,H){var ne=this,le=Un(this,I,H);return this._useKeys||(le.valueSeq=function(){return ne._iter.toSeq().map(I,H)}),le},rr.prototype.__iterate=function(I,H){var ne=this,le;return this._iter.__iterate(this._useKeys?function(ue,pe){return I(ue,pe,ne)}:(le=H?Gn(this):0,function(ue){return I(ue,H?--le:le++,ne)}),H)},rr.prototype.__iterator=function(I,H){if(this._useKeys)return this._iter.__iterator(I,H);var ne=this._iter.__iterator(de,H),le=H?Gn(this):0;return new ge(function(){var ue=ne.next();return ue.done?ue:be(I,H?--le:le++,ue.value,ue)})},rr.prototype[L]=!0,i(Cr,he);function Cr(I){this._iter=I,this.size=I.size}Cr.prototype.includes=function(I){return this._iter.includes(I)},Cr.prototype.__iterate=function(I,H){var ne=this,le=0;return this._iter.__iterate(function(ue){return I(ue,le++,ne)},H)},Cr.prototype.__iterator=function(I,H){var ne=this._iter.__iterator(de,H),le=0;return new ge(function(){var ue=ne.next();return ue.done?ue:be(I,le++,ue.value,ue)})},i(Tr,Ae);function Tr(I){this._iter=I,this.size=I.size}Tr.prototype.has=function(I){return this._iter.includes(I)},Tr.prototype.__iterate=function(I,H){var ne=this;return this._iter.__iterate(function(le){return I(le,le,ne)},H)},Tr.prototype.__iterator=function(I,H){var ne=this._iter.__iterator(de,H);return new ge(function(){var le=ne.next();return le.done?le:be(I,le.value,le.value,le)})},i(jr,Ce);function jr(I){this._iter=I,this.size=I.size}jr.prototype.entrySeq=function(){return this._iter.toSeq()},jr.prototype.__iterate=function(I,H){var ne=this;return this._iter.__iterate(function(le){if(le){Hn(le);var ue=E(le);return I(ue?le.get(1):le[1],ue?le.get(0):le[0],ne)}},H)},jr.prototype.__iterator=function(I,H){var ne=this._iter.__iterator(de,H);return new ge(function(){for(;;){var le=ne.next();if(le.done)return le;var ue=le.value;if(ue){Hn(ue);var pe=E(ue);return be(I,pe?ue.get(0):ue[0],pe?ue.get(1):ue[1],le)}}})},Cr.prototype.cacheResult=rr.prototype.cacheResult=Tr.prototype.cacheResult=jr.prototype.cacheResult=dn;function Fn(I){var H=ur(I);return H._iter=I,H.size=I.size,H.flip=function(){return I},H.reverse=function(){var ne=I.reverse.apply(this);return ne.flip=function(){return I.reverse()},ne},H.has=function(ne){return I.includes(ne)},H.includes=function(ne){return I.has(ne)},H.cacheResult=dn,H.__iterateUncached=function(ne,le){var ue=this;return I.__iterate(function(pe,fe){return ne(fe,pe,ue)!==!1},le)},H.__iteratorUncached=function(ne,le){if(ne===ce){var ue=I.__iterator(ne,le);return new ge(function(){var pe=ue.next();if(!pe.done){var fe=pe.value[0];pe.value[0]=pe.value[1],pe.value[1]=fe}return pe})}return I.__iterator(ne===de?te:de,le)},H}function Un(I,H,ne){var le=ur(I);return le.size=I.size,le.has=function(ue){return I.has(ue)},le.get=function(ue,pe){var fe=I.get(ue,F);return fe===F?pe:H.call(ne,fe,ue,I)},le.__iterateUncached=function(ue,pe){var fe=this;return I.__iterate(function(_e,ke,je){return ue(H.call(ne,_e,ke,je),ke,fe)!==!1},pe)},le.__iteratorUncached=function(ue,pe){var fe=I.__iterator(ce,pe);return new ge(function(){var _e=fe.next();if(_e.done)return _e;var ke=_e.value,je=ke[0];return be(ue,je,H.call(ne,ke[1],je,I),_e)})},le}function ln(I,H){var ne=ur(I);return ne._iter=I,ne.size=I.size,ne.reverse=function(){return I},I.flip&&(ne.flip=function(){var le=Fn(I);return le.reverse=function(){return I.flip()},le}),ne.get=function(le,ue){return I.get(H?le:-1-le,ue)},ne.has=function(le){return I.has(H?le:-1-le)},ne.includes=function(le){return I.includes(le)},ne.cacheResult=dn,ne.__iterate=function(le,ue){var pe=this;return I.__iterate(function(fe,_e){return le(fe,_e,pe)},!ue)},ne.__iterator=function(le,ue){return I.__iterator(le,!ue)},ne}function Vn(I,H,ne,le){var ue=ur(I);return le&&(ue.has=function(pe){var fe=I.get(pe,F);return fe!==F&&!!H.call(ne,fe,pe,I)},ue.get=function(pe,fe){var _e=I.get(pe,F);return _e!==F&&H.call(ne,_e,pe,I)?_e:fe}),ue.__iterateUncached=function(pe,fe){var _e=this,ke=0;return I.__iterate(function(je,Me,ze){if(H.call(ne,je,Me,ze))return ke++,pe(je,le?Me:ke-1,_e)},fe),ke},ue.__iteratorUncached=function(pe,fe){var _e=I.__iterator(ce,fe),ke=0;return new ge(function(){for(;;){var je=_e.next();if(je.done)return je;var Me=je.value,ze=Me[0],He=Me[1];if(H.call(ne,He,ze,I))return be(pe,le?ze:ke++,He,je)}})},ue}function Ss(I,H,ne){var le=at().asMutable();return I.__iterate(function(ue,pe){le.update(H.call(ne,ue,pe,I),0,function(fe){return fe+1})}),le.asImmutable()}function ks(I,H,ne){var le=R(I),ue=(T(I)?Mt():at()).asMutable();I.__iterate(function(fe,_e){ue.update(H.call(ne,fe,_e,I),function(ke){return ke=ke||[],ke.push(le?[_e,fe]:fe),ke})});var pe=qn(I);return ue.map(function(fe){return ot(I,pe(fe))})}function cn(I,H,ne,le){var ue=I.size;if(H!==void 0&&(H=H|0),ne!==void 0&&(ne=ne|0),se(H,ne,ue))return I;var pe=Q(H,ue),fe=Z(ne,ue);if(pe!==pe||fe!==fe)return cn(I.toSeq().cacheResult(),H,ne,le);var _e=fe-pe,ke;_e===_e&&(ke=_e<0?0:_e);var je=ur(I);return je.size=ke===0?ke:I.size&&ke||void 0,!le&&We(I)&&ke>=0&&(je.get=function(Me,ze){return Me=ae(this,Me),Me>=0&&Me<ke?I.get(Me+pe,ze):ze}),je.__iterateUncached=function(Me,ze){var He=this;if(ke===0)return 0;if(ze)return this.cacheResult().__iterate(Me,ze);var Ye=0,tt=!0,ft=0;return I.__iterate(function(nr,pr){if(!(tt&&(tt=Ye++<pe)))return ft++,Me(nr,le?pr:ft-1,He)!==!1&&ft!==ke}),ft},je.__iteratorUncached=function(Me,ze){if(ke!==0&&ze)return this.cacheResult().__iterator(Me,ze);var He=ke!==0&&I.__iterator(Me,ze),Ye=0,tt=0;return new ge(function(){for(;Ye++<pe;)He.next();if(++tt>ke)return ye();var ft=He.next();return le||Me===de?ft:Me===te?be(Me,tt-1,void 0,ft):be(Me,tt-1,ft.value[1],ft)})},je}function Cs(I,H,ne){var le=ur(I);return le.__iterateUncached=function(ue,pe){var fe=this;if(pe)return this.cacheResult().__iterate(ue,pe);var _e=0;return I.__iterate(function(ke,je,Me){return H.call(ne,ke,je,Me)&&++_e&&ue(ke,je,fe)}),_e},le.__iteratorUncached=function(ue,pe){var fe=this;if(pe)return this.cacheResult().__iterator(ue,pe);var _e=I.__iterator(ce,pe),ke=!0;return new ge(function(){if(!ke)return ye();var je=_e.next();if(je.done)return je;var Me=je.value,ze=Me[0],He=Me[1];return H.call(ne,He,ze,fe)?ue===ce?je:be(ue,ze,He,je):(ke=!1,ye())})},le}function Wn(I,H,ne,le){var ue=ur(I);return ue.__iterateUncached=function(pe,fe){var _e=this;if(fe)return this.cacheResult().__iterate(pe,fe);var ke=!0,je=0;return I.__iterate(function(Me,ze,He){if(!(ke&&(ke=H.call(ne,Me,ze,He))))return je++,pe(Me,le?ze:je-1,_e)}),je},ue.__iteratorUncached=function(pe,fe){var _e=this;if(fe)return this.cacheResult().__iterator(pe,fe);var ke=I.__iterator(ce,fe),je=!0,Me=0;return new ge(function(){var ze,He,Ye;do{if(ze=ke.next(),ze.done)return le||pe===de?ze:pe===te?be(pe,Me++,void 0,ze):be(pe,Me++,ze.value[1],ze);var tt=ze.value;He=tt[0],Ye=tt[1],je&&(je=H.call(ne,Ye,He,_e))}while(je);return pe===ce?ze:be(pe,He,Ye,ze)})},ue}function Ts(I,H){var ne=R(I),le=[I].concat(H).map(function(fe){return E(fe)?ne&&(fe=x(fe)):fe=ne?Le(fe):Fe(Array.isArray(fe)?fe:[fe]),fe}).filter(function(fe){return fe.size!==0});if(le.length===0)return I;if(le.length===1){var ue=le[0];if(ue===I||ne&&R(ue)||S(I)&&S(ue))return ue}var pe=new Be(le);return ne?pe=pe.toKeyedSeq():S(I)||(pe=pe.toSetSeq()),pe=pe.flatten(!0),pe.size=le.reduce(function(fe,_e){if(fe!==void 0){var ke=_e.size;if(ke!==void 0)return fe+ke}},0),pe}function zn(I,H,ne){var le=ur(I);return le.__iterateUncached=function(ue,pe){var fe=0,_e=!1;function ke(je,Me){var ze=this;je.__iterate(function(He,Ye){return(!H||Me<H)&&E(He)?ke(He,Me+1):ue(He,ne?Ye:fe++,ze)===!1&&(_e=!0),!_e},pe)}return ke(I,0),fe},le.__iteratorUncached=function(ue,pe){var fe=I.__iterator(ue,pe),_e=[],ke=0;return new ge(function(){for(;fe;){var je=fe.next();if(je.done!==!1){fe=_e.pop();continue}var Me=je.value;if(ue===ce&&(Me=Me[1]),(!H||_e.length<H)&&E(Me))_e.push(fe),fe=Me.__iterator(ue,pe);else return ne?je:be(ue,ke++,Me,je)}return ye()})},le}function js(I,H,ne){var le=qn(I);return I.toSeq().map(function(ue,pe){return le(H.call(ne,ue,pe,I))}).flatten(!0)}function ws(I,H){var ne=ur(I);return ne.size=I.size&&I.size*2-1,ne.__iterateUncached=function(le,ue){var pe=this,fe=0;return I.__iterate(function(_e,ke){return(!fe||le(H,fe++,pe)!==!1)&&le(_e,fe++,pe)!==!1},ue),fe},ne.__iteratorUncached=function(le,ue){var pe=I.__iterator(de,ue),fe=0,_e;return new ge(function(){return(!_e||fe%2)&&(_e=pe.next(),_e.done)?_e:fe%2?be(le,fe++,H):be(le,fe++,_e.value,_e)})},ne}function wr(I,H,ne){H||(H=Yn);var le=R(I),ue=0,pe=I.toSeq().map(function(fe,_e){return[_e,fe,ue++,ne?ne(fe,_e,I):fe]}).toArray();return pe.sort(function(fe,_e){return H(fe[3],_e[3])||fe[2]-_e[2]}).forEach(le?function(fe,_e){pe[_e].length=2}:function(fe,_e){pe[_e]=fe[1]}),le?Ce(pe):S(I)?he(pe):Ae(pe)}function Vr(I,H,ne){if(H||(H=Yn),ne){var le=I.toSeq().map(function(ue,pe){return[ue,ne(ue,pe,I)]}).reduce(function(ue,pe){return Kn(H,ue[1],pe[1])?pe:ue});return le&&le[0]}else return I.reduce(function(ue,pe){return Kn(H,ue,pe)?pe:ue})}function Kn(I,H,ne){var le=I(ne,H);return le===0&&ne!==H&&(ne==null||ne!==ne)||le>0}function un(I,H,ne){var le=ur(I);return le.size=new Be(ne).map(function(ue){return ue.size}).min(),le.__iterate=function(ue,pe){for(var fe=this.__iterator(de,pe),_e,ke=0;!(_e=fe.next()).done&&ue(_e.value,ke++,this)!==!1;);return ke},le.__iteratorUncached=function(ue,pe){var fe=ne.map(function(je){return je=o(je),we(pe?je.reverse():je)}),_e=0,ke=!1;return new ge(function(){var je;return ke||(je=fe.map(function(Me){return Me.next()}),ke=je.some(function(Me){return Me.done})),ke?ye():be(ue,_e++,H.apply(null,je.map(function(Me){return Me.value})))})},le}function ot(I,H){return We(I)?H:I.constructor(H)}function Hn(I){if(I!==Object(I))throw new TypeError("Expected [K, V] tuple: "+I)}function Gn(I){return Zt(I.size),ee(I)}function qn(I){return R(I)?x:S(I)?y:_}function ur(I){return Object.create((R(I)?Ce:S(I)?he:Ae).prototype)}function dn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ee.prototype.cacheResult.call(this)}function Yn(I,H){return I>H?1:I<H?-1:0}function Xn(I){var H=we(I);if(!H){if(!Se(I))throw new TypeError("Expected iterable or array-like: "+I);H=we(o(I))}return H}i(Jt,dt);function Jt(I,H){var ne,le=function(fe){if(fe instanceof le)return fe;if(!(this instanceof le))return new le(fe);if(!ne){ne=!0;var _e=Object.keys(I);As(ue,_e),ue.size=_e.length,ue._name=H,ue._keys=_e,ue._defaultValues=I}this._map=at(fe)},ue=le.prototype=Object.create(Vt);return ue.constructor=le,le}Jt.prototype.toString=function(){return this.__toString(Zn(this)+" {","}")},Jt.prototype.has=function(I){return this._defaultValues.hasOwnProperty(I)},Jt.prototype.get=function(I,H){if(!this.has(I))return H;var ne=this._defaultValues[I];return this._map?this._map.get(I,ne):ne},Jt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var I=this.constructor;return I._empty||(I._empty=Wr(this,cr()))},Jt.prototype.set=function(I,H){if(!this.has(I))throw new Error('Cannot set unknown key "'+I+'" on '+Zn(this));var ne=this._map&&this._map.set(I,H);return this.__ownerID||ne===this._map?this:Wr(this,ne)},Jt.prototype.remove=function(I){if(!this.has(I))return this;var H=this._map&&this._map.remove(I);return this.__ownerID||H===this._map?this:Wr(this,H)},Jt.prototype.wasAltered=function(){return this._map.wasAltered()},Jt.prototype.__iterator=function(I,H){var ne=this;return x(this._defaultValues).map(function(le,ue){return ne.get(ue)}).__iterator(I,H)},Jt.prototype.__iterate=function(I,H){var ne=this;return x(this._defaultValues).map(function(le,ue){return ne.get(ue)}).__iterate(I,H)},Jt.prototype.__ensureOwner=function(I){if(I===this.__ownerID)return this;var H=this._map&&this._map.__ensureOwner(I);return I?Wr(this,H,I):(this.__ownerID=I,this._map=H,this)};var Vt=Jt.prototype;Vt[D]=Vt.remove,Vt.deleteIn=Vt.removeIn=rt.removeIn,Vt.merge=rt.merge,Vt.mergeWith=rt.mergeWith,Vt.mergeIn=rt.mergeIn,Vt.mergeDeep=rt.mergeDeep,Vt.mergeDeepWith=rt.mergeDeepWith,Vt.mergeDeepIn=rt.mergeDeepIn,Vt.setIn=rt.setIn,Vt.update=rt.update,Vt.updateIn=rt.updateIn,Vt.withMutations=rt.withMutations,Vt.asMutable=rt.asMutable,Vt.asImmutable=rt.asImmutable;function Wr(I,H,ne){var le=Object.create(Object.getPrototypeOf(I));return le._map=H,le.__ownerID=ne,le}function Zn(I){return I._name||I.constructor.name||"Record"}function As(I,H){try{H.forEach($s.bind(void 0,I))}catch{}}function $s(I,H){Object.defineProperty(I,H,{get:function(){return this.get(H)},set:function(ne){er(this.__ownerID,"Cannot set on an immutable record."),this.set(H,ne)}})}i(pt,mt);function pt(I){return I==null?hn():mn(I)&&!T(I)?I:hn().withMutations(function(H){var ne=_(I);Zt(ne.size),ne.forEach(function(le){return H.add(le)})})}pt.of=function(){return this(arguments)},pt.fromKeys=function(I){return this(x(I).keySeq())},pt.prototype.toString=function(){return this.__toString("Set {","}")},pt.prototype.has=function(I){return this._map.has(I)},pt.prototype.add=function(I){return pn(this,this._map.set(I,!0))},pt.prototype.remove=function(I){return pn(this,this._map.remove(I))},pt.prototype.clear=function(){return pn(this,this._map.clear())},pt.prototype.union=function(){var I=a.call(arguments,0);return I=I.filter(function(H){return H.size!==0}),I.length===0?this:this.size===0&&!this.__ownerID&&I.length===1?this.constructor(I[0]):this.withMutations(function(H){for(var ne=0;ne<I.length;ne++)_(I[ne]).forEach(function(le){return H.add(le)})})},pt.prototype.intersect=function(){var I=a.call(arguments,0);if(I.length===0)return this;I=I.map(function(ne){return _(ne)});var H=this;return this.withMutations(function(ne){H.forEach(function(le){I.every(function(ue){return ue.includes(le)})||ne.remove(le)})})},pt.prototype.subtract=function(){var I=a.call(arguments,0);if(I.length===0)return this;I=I.map(function(ne){return _(ne)});var H=this;return this.withMutations(function(ne){H.forEach(function(le){I.some(function(ue){return ue.includes(le)})&&ne.remove(le)})})},pt.prototype.merge=function(){return this.union.apply(this,arguments)},pt.prototype.mergeWith=function(I){var H=a.call(arguments,1);return this.union.apply(this,H)},pt.prototype.sort=function(I){return dr(wr(this,I))},pt.prototype.sortBy=function(I,H){return dr(wr(this,H,I))},pt.prototype.wasAltered=function(){return this._map.wasAltered()},pt.prototype.__iterate=function(I,H){var ne=this;return this._map.__iterate(function(le,ue){return I(ue,ue,ne)},H)},pt.prototype.__iterator=function(I,H){return this._map.map(function(ne,le){return le}).__iterator(I,H)},pt.prototype.__ensureOwner=function(I){if(I===this.__ownerID)return this;var H=this._map.__ensureOwner(I);return I?this.__make(H,I):(this.__ownerID=I,this._map=H,this)};function mn(I){return!!(I&&I[Jn])}pt.isSet=mn;var Jn="@@__IMMUTABLE_SET__@@",Qt=pt.prototype;Qt[Jn]=!0,Qt[D]=Qt.remove,Qt.mergeDeep=Qt.merge,Qt.mergeDeepWith=Qt.mergeWith,Qt.withMutations=rt.withMutations,Qt.asMutable=rt.asMutable,Qt.asImmutable=rt.asImmutable,Qt.__empty=hn,Qt.__make=Qn;function pn(I,H){return I.__ownerID?(I.size=H.size,I._map=H,I):H===I._map?I:H.size===0?I.__empty():I.__make(H)}function Qn(I,H){var ne=Object.create(Qt);return ne.size=I?I.size:0,ne._map=I,ne.__ownerID=H,ne}var es;function hn(){return es||(es=Qn(cr()))}i(dr,pt);function dr(I){return I==null?xn():rs(I)?I:xn().withMutations(function(H){var ne=_(I);Zt(ne.size),ne.forEach(function(le){return H.add(le)})})}dr.of=function(){return this(arguments)},dr.fromKeys=function(I){return this(x(I).keySeq())},dr.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function rs(I){return mn(I)&&T(I)}dr.isOrderedSet=rs;var zr=dr.prototype;zr[L]=!0,zr.__empty=xn,zr.__make=ns;function ns(I,H){var ne=Object.create(zr);return ne.size=I?I.size:0,ne._map=I,ne.__ownerID=H,ne}var ss;function xn(){return ss||(ss=ns(Ur()))}i(Dt,Ct);function Dt(I){return I==null?gn():as(I)?I:gn().unshiftAll(I)}Dt.of=function(){return this(arguments)},Dt.prototype.toString=function(){return this.__toString("Stack [","]")},Dt.prototype.get=function(I,H){var ne=this._head;for(I=ae(this,I);ne&&I--;)ne=ne.next;return ne?ne.value:H},Dt.prototype.peek=function(){return this._head&&this._head.value},Dt.prototype.push=function(){if(arguments.length===0)return this;for(var I=this.size+arguments.length,H=this._head,ne=arguments.length-1;ne>=0;ne--)H={value:arguments[ne],next:H};return this.__ownerID?(this.size=I,this._head=H,this.__hash=void 0,this.__altered=!0,this):Br(I,H)},Dt.prototype.pushAll=function(I){if(I=y(I),I.size===0)return this;Zt(I.size);var H=this.size,ne=this._head;return I.reverse().forEach(function(le){H++,ne={value:le,next:ne}}),this.__ownerID?(this.size=H,this._head=ne,this.__hash=void 0,this.__altered=!0,this):Br(H,ne)},Dt.prototype.pop=function(){return this.slice(1)},Dt.prototype.unshift=function(){return this.push.apply(this,arguments)},Dt.prototype.unshiftAll=function(I){return this.pushAll(I)},Dt.prototype.shift=function(){return this.pop.apply(this,arguments)},Dt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):gn()},Dt.prototype.slice=function(I,H){if(se(I,H,this.size))return this;var ne=Q(I,this.size),le=Z(H,this.size);if(le!==this.size)return Ct.prototype.slice.call(this,I,H);for(var ue=this.size-ne,pe=this._head;ne--;)pe=pe.next;return this.__ownerID?(this.size=ue,this._head=pe,this.__hash=void 0,this.__altered=!0,this):Br(ue,pe)},Dt.prototype.__ensureOwner=function(I){return I===this.__ownerID?this:I?Br(this.size,this._head,I,this.__hash):(this.__ownerID=I,this.__altered=!1,this)},Dt.prototype.__iterate=function(I,H){if(H)return this.reverse().__iterate(I);for(var ne=0,le=this._head;le&&I(le.value,ne++,this)!==!1;)le=le.next;return ne},Dt.prototype.__iterator=function(I,H){if(H)return this.reverse().__iterator(I);var ne=0,le=this._head;return new ge(function(){if(le){var ue=le.value;return le=le.next,be(I,ne++,ue)}return ye()})};function as(I){return!!(I&&I[os])}Dt.isStack=as;var os="@@__IMMUTABLE_STACK__@@",Ar=Dt.prototype;Ar[os]=!0,Ar.withMutations=rt.withMutations,Ar.asMutable=rt.asMutable,Ar.asImmutable=rt.asImmutable,Ar.wasAltered=rt.wasAltered;function Br(I,H,ne,le){var ue=Object.create(Ar);return ue.size=I,ue._head=H,ue.__ownerID=ne,ue.__hash=le,ue.__altered=!1,ue}var ls;function gn(){return ls||(ls=Br(0))}function mr(I,H){var ne=function(le){I.prototype[le]=H[le]};return Object.keys(H).forEach(ne),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(H).forEach(ne),I}o.Iterator=ge,mr(o,{toArray:function(){Zt(this.size);var I=new Array(this.size||0);return this.valueSeq().__iterate(function(H,ne){I[ne]=H}),I},toIndexedSeq:function(){return new Cr(this)},toJS:function(){return this.toSeq().map(function(I){return I&&typeof I.toJS=="function"?I.toJS():I}).__toJS()},toJSON:function(){return this.toSeq().map(function(I){return I&&typeof I.toJSON=="function"?I.toJSON():I}).__toJS()},toKeyedSeq:function(){return new rr(this,!0)},toMap:function(){return at(this.toKeyedSeq())},toObject:function(){Zt(this.size);var I={};return this.__iterate(function(H,ne){I[ne]=H}),I},toOrderedMap:function(){return Mt(this.toKeyedSeq())},toOrderedSet:function(){return dr(R(this)?this.valueSeq():this)},toSet:function(){return pt(R(this)?this.valueSeq():this)},toSetSeq:function(){return new Tr(this)},toSeq:function(){return S(this)?this.toIndexedSeq():R(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Dt(R(this)?this.valueSeq():this)},toList:function(){return ut(R(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(I,H){return this.size===0?I+H:I+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+H},concat:function(){var I=a.call(arguments,0);return ot(this,Ts(this,I))},includes:function(I){return this.some(function(H){return it(H,I)})},entries:function(){return this.__iterator(ce)},every:function(I,H){Zt(this.size);var ne=!0;return this.__iterate(function(le,ue,pe){if(!I.call(H,le,ue,pe))return ne=!1,!1}),ne},filter:function(I,H){return ot(this,Vn(this,I,H,!0))},find:function(I,H,ne){var le=this.findEntry(I,H);return le?le[1]:ne},findEntry:function(I,H){var ne;return this.__iterate(function(le,ue,pe){if(I.call(H,le,ue,pe))return ne=[ue,le],!1}),ne},findLastEntry:function(I,H){return this.toSeq().reverse().findEntry(I,H)},forEach:function(I,H){return Zt(this.size),this.__iterate(H?I.bind(H):I)},join:function(I){Zt(this.size),I=I!==void 0?""+I:",";var H="",ne=!0;return this.__iterate(function(le){ne?ne=!1:H+=I,H+=le!=null?le.toString():""}),H},keys:function(){return this.__iterator(te)},map:function(I,H){return ot(this,Un(this,I,H))},reduce:function(I,H,ne){Zt(this.size);var le,ue;return arguments.length<2?ue=!0:le=H,this.__iterate(function(pe,fe,_e){ue?(ue=!1,le=pe):le=I.call(ne,le,pe,fe,_e)}),le},reduceRight:function(I,H,ne){var le=this.toKeyedSeq().reverse();return le.reduce.apply(le,arguments)},reverse:function(){return ot(this,ln(this,!0))},slice:function(I,H){return ot(this,cn(this,I,H,!0))},some:function(I,H){return!this.every(Hr(I),H)},sort:function(I){return ot(this,wr(this,I))},values:function(){return this.__iterator(de)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(I,H){return ee(I?this.toSeq().filter(I,H):this)},countBy:function(I,H){return Ss(this,I,H)},equals:function(I){return sr(this,I)},entrySeq:function(){var I=this;if(I._cache)return new Be(I._cache);var H=I.toSeq().map(Is).toIndexedSeq();return H.fromEntrySeq=function(){return I.toSeq()},H},filterNot:function(I,H){return this.filter(Hr(I),H)},findLast:function(I,H,ne){return this.toKeyedSeq().reverse().find(I,H,ne)},first:function(){return this.find(ie)},flatMap:function(I,H){return ot(this,js(this,I,H))},flatten:function(I){return ot(this,zn(this,I,!0))},fromEntrySeq:function(){return new jr(this)},get:function(I,H){return this.find(function(ne,le){return it(le,I)},void 0,H)},getIn:function(I,H){for(var ne=this,le=Xn(I),ue;!(ue=le.next()).done;){var pe=ue.value;if(ne=ne&&ne.get?ne.get(pe,F):F,ne===F)return H}return ne},groupBy:function(I,H){return ks(this,I,H)},has:function(I){return this.get(I,F)!==F},hasIn:function(I){return this.getIn(I,F)!==F},isSubset:function(I){return I=typeof I.includes=="function"?I:o(I),this.every(function(H){return I.includes(H)})},isSuperset:function(I){return I=typeof I.isSubset=="function"?I:o(I),I.isSubset(this)},keySeq:function(){return this.toSeq().map(Ms).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(I){return Vr(this,I)},maxBy:function(I,H){return Vr(this,H,I)},min:function(I){return Vr(this,I?cs(I):ds)},minBy:function(I,H){return Vr(this,H?cs(H):ds,I)},rest:function(){return this.slice(1)},skip:function(I){return this.slice(Math.max(0,I))},skipLast:function(I){return ot(this,this.toSeq().reverse().skip(I).reverse())},skipWhile:function(I,H){return ot(this,Wn(this,I,H,!0))},skipUntil:function(I,H){return this.skipWhile(Hr(I),H)},sortBy:function(I,H){return ot(this,wr(this,H,I))},take:function(I){return this.slice(0,Math.max(0,I))},takeLast:function(I){return ot(this,this.toSeq().reverse().take(I).reverse())},takeWhile:function(I,H){return ot(this,Cs(this,I,H))},takeUntil:function(I,H){return this.takeWhile(Hr(I),H)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ds(this))}});var zt=o.prototype;zt[A]=!0,zt[xe]=zt.values,zt.__toJS=zt.toArray,zt.__toStringMapper=us,zt.inspect=zt.toSource=function(){return this.toString()},zt.chain=zt.flatMap,zt.contains=zt.includes,function(){try{Object.defineProperty(zt,"length",{get:function(){if(!o.noLengthWarning){var I;try{throw new Error}catch(H){I=H.stack}if(I.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+I),this.size}}})}catch{}}(),mr(x,{flip:function(){return ot(this,Fn(this))},findKey:function(I,H){var ne=this.findEntry(I,H);return ne&&ne[0]},findLastKey:function(I,H){return this.toSeq().reverse().findKey(I,H)},keyOf:function(I){return this.findKey(function(H){return it(H,I)})},lastKeyOf:function(I){return this.findLastKey(function(H){return it(H,I)})},mapEntries:function(I,H){var ne=this,le=0;return ot(this,this.toSeq().map(function(ue,pe){return I.call(H,[pe,ue],le++,ne)}).fromEntrySeq())},mapKeys:function(I,H){var ne=this;return ot(this,this.toSeq().flip().map(function(le,ue){return I.call(H,le,ue,ne)}).flip())}});var Kr=x.prototype;Kr[M]=!0,Kr[xe]=zt.entries,Kr.__toJS=zt.toObject,Kr.__toStringMapper=function(I,H){return JSON.stringify(H)+": "+us(I)},mr(y,{toKeyedSeq:function(){return new rr(this,!1)},filter:function(I,H){return ot(this,Vn(this,I,H,!1))},findIndex:function(I,H){var ne=this.findEntry(I,H);return ne?ne[0]:-1},indexOf:function(I){var H=this.toKeyedSeq().keyOf(I);return H===void 0?-1:H},lastIndexOf:function(I){var H=this.toKeyedSeq().reverse().keyOf(I);return H===void 0?-1:H},reverse:function(){return ot(this,ln(this,!1))},slice:function(I,H){return ot(this,cn(this,I,H,!1))},splice:function(I,H){var ne=arguments.length;if(H=Math.max(H|0,0),ne===0||ne===2&&!H)return this;I=Q(I,I<0?this.count():this.size);var le=this.slice(0,I);return ot(this,ne===1?le:le.concat(X(arguments,2),this.slice(I+H)))},findLastIndex:function(I,H){var ne=this.toKeyedSeq().findLastKey(I,H);return ne===void 0?-1:ne},first:function(){return this.get(0)},flatten:function(I){return ot(this,zn(this,I,!1))},get:function(I,H){return I=ae(this,I),I<0||this.size===1/0||this.size!==void 0&&I>this.size?H:this.find(function(ne,le){return le===I},void 0,H)},has:function(I){return I=ae(this,I),I>=0&&(this.size!==void 0?this.size===1/0||I<this.size:this.indexOf(I)!==-1)},interpose:function(I){return ot(this,ws(this,I))},interleave:function(){var I=[this].concat(X(arguments)),H=un(this.toSeq(),he.of,I),ne=H.flatten(!0);return H.size&&(ne.size=H.size*I.length),ot(this,ne)},last:function(){return this.get(-1)},skipWhile:function(I,H){return ot(this,Wn(this,I,H,!1))},zip:function(){var I=[this].concat(X(arguments));return ot(this,un(this,Ps,I))},zipWith:function(I){var H=X(arguments);return H[0]=this,ot(this,un(this,I,H))}}),y.prototype[P]=!0,y.prototype[L]=!0,mr(_,{get:function(I,H){return this.has(I)?I:H},includes:function(I){return this.has(I)},keySeq:function(){return this.valueSeq()}}),_.prototype.has=zt.includes,mr(Ce,x.prototype),mr(he,y.prototype),mr(Ae,_.prototype),mr(dt,x.prototype),mr(Ct,y.prototype),mr(mt,_.prototype);function Ms(I,H){return H}function Is(I,H){return[H,I]}function Hr(I){return function(){return!I.apply(this,arguments)}}function cs(I){return function(){return-I.apply(this,arguments)}}function us(I){return typeof I=="string"?JSON.stringify(I):I}function Ps(){return X(arguments)}function ds(I,H){return I<H?1:I>H?-1:0}function Ds(I){if(I.size===1/0)return 0;var H=T(I),ne=R(I),le=H?1:0,ue=I.__iterate(ne?H?function(pe,fe){le=31*le+ms(Rt(pe),Rt(fe))|0}:function(pe,fe){le=le+ms(Rt(pe),Rt(fe))|0}:H?function(pe){le=31*le+Rt(pe)|0}:function(pe){le=le+Rt(pe)|0});return Ns(ue,le)}function Ns(I,H){return H=yt(H,3432918353),H=yt(H<<15|H>>>-15,461845907),H=yt(H<<13|H>>>-13,5),H=(H+3864292196|0)^I,H=yt(H^H>>>16,2246822507),H=yt(H^H>>>13,3266489909),H=Ft(H^H>>>16),H}function ms(I,H){return I^H+2654435769+(I<<6)+(I>>2)|0}var Ls={Iterable:o,Seq:Ee,Collection:et,Map:at,OrderedMap:Mt,List:ut,Stack:Dt,Set:pt,OrderedSet:dr,Record:Jt,Range:Ge,Repeat:st,is:it,fromJS:Qe};return Ls})})(immutable);var immutableExports=immutable.exports,Immutable$o=immutableExports,OrderedMap$6=Immutable$o.OrderedMap,BlockMapBuilder$5={createFromArray:function(s){return OrderedMap$6(s.map(function(a){return[a.getKey(),a]}))}},BlockMapBuilder_1=BlockMapBuilder$5;function _inheritsLoose$b(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var _require$6=immutableExports,Map$c=_require$6.Map,OrderedSet$6=_require$6.OrderedSet,Record$7=_require$6.Record,EMPTY_SET$3=OrderedSet$6(),defaultRecord$5={style:EMPTY_SET$3,entity:null},CharacterMetadataRecord=Record$7(defaultRecord$5),CharacterMetadata$c=function(r){_inheritsLoose$b(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.getStyle=function(){return this.get("style")},a.getEntity=function(){return this.get("entity")},a.hasStyle=function(o){return this.getStyle().includes(o)},s.applyStyle=function(o,x){var y=o.set("style",o.getStyle().add(x));return s.create(y)},s.removeStyle=function(o,x){var y=o.set("style",o.getStyle().remove(x));return s.create(y)},s.applyEntity=function(o,x){var y=o.getEntity()===x?o:o.set("entity",x);return s.create(y)},s.create=function(o){if(!o)return EMPTY$1;var x={style:EMPTY_SET$3,entity:null},y=Map$c(x).merge(o),_=pool.get(y);if(_)return _;var E=new s(y);return pool=pool.set(y,E),E},s.fromJS=function(o){var x=o.style,y=o.entity;return new s({style:Array.isArray(x)?OrderedSet$6(x):x,entity:Array.isArray(y)?OrderedSet$6(y):y})},s}(CharacterMetadataRecord),EMPTY$1=new CharacterMetadata$c,pool=Map$c([[Map$c(defaultRecord$5),EMPTY$1]]);CharacterMetadata$c.EMPTY=EMPTY$1;var CharacterMetadata_1=CharacterMetadata$c;function findRangesImmutable$5(r,s,a,i){if(r.size){var o=0;r.reduce(function(x,y,_){return s(x,y)||(a(x)&&i(o,_),o=_),y}),a(r.last())&&i(o,r.count())}}var findRangesImmutable_1=findRangesImmutable$5;function _inheritsLoose$a(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var CharacterMetadata$b=CharacterMetadata_1,findRangesImmutable$4=findRangesImmutable_1,Immutable$n=immutableExports,List$d=Immutable$n.List,Map$b=Immutable$n.Map,OrderedSet$5=Immutable$n.OrderedSet,Record$6=Immutable$n.Record,Repeat$6=Immutable$n.Repeat,EMPTY_SET$2=OrderedSet$5(),defaultRecord$4={key:"",type:"unstyled",text:"",characterList:List$d(),depth:0,data:Map$b()},ContentBlockRecord$2=Record$6(defaultRecord$4),decorateCharacterList$1=function(s){if(!s)return s;var a=s.characterList,i=s.text;return i&&!a&&(s.characterList=List$d(Repeat$6(CharacterMetadata$b.EMPTY,i.length))),s},ContentBlock$7=function(r){_inheritsLoose$a(s,r);function s(i){return r.call(this,decorateCharacterList$1(i))||this}var a=s.prototype;return a.getKey=function(){return this.get("key")},a.getType=function(){return this.get("type")},a.getText=function(){return this.get("text")},a.getCharacterList=function(){return this.get("characterList")},a.getLength=function(){return this.getText().length},a.getDepth=function(){return this.get("depth")},a.getData=function(){return this.get("data")},a.getInlineStyleAt=function(o){var x=this.getCharacterList().get(o);return x?x.getStyle():EMPTY_SET$2},a.getEntityAt=function(o){var x=this.getCharacterList().get(o);return x?x.getEntity():null},a.findStyleRanges=function(o,x){findRangesImmutable$4(this.getCharacterList(),haveEqualStyle$1,o,x)},a.findEntityRanges=function(o,x){findRangesImmutable$4(this.getCharacterList(),haveEqualEntity$1,o,x)},s}(ContentBlockRecord$2);function haveEqualStyle$1(r,s){return r.getStyle()===s.getStyle()}function haveEqualEntity$1(r,s){return r.getEntity()===s.getEntity()}var ContentBlock_1=ContentBlock$7;function _inheritsLoose$9(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var CharacterMetadata$a=CharacterMetadata_1,findRangesImmutable$3=findRangesImmutable_1,Immutable$m=immutableExports,List$c=Immutable$m.List,Map$a=Immutable$m.Map,OrderedSet$4=Immutable$m.OrderedSet,Record$5=Immutable$m.Record,Repeat$5=Immutable$m.Repeat,EMPTY_SET$1=OrderedSet$4(),defaultRecord$3={parent:null,characterList:List$c(),data:Map$a(),depth:0,key:"",text:"",type:"unstyled",children:List$c(),prevSibling:null,nextSibling:null},haveEqualStyle=function(s,a){return s.getStyle()===a.getStyle()},haveEqualEntity=function(s,a){return s.getEntity()===a.getEntity()},decorateCharacterList=function(s){if(!s)return s;var a=s.characterList,i=s.text;return i&&!a&&(s.characterList=List$c(Repeat$5(CharacterMetadata$a.EMPTY,i.length))),s},ContentBlockNode$c=function(r){_inheritsLoose$9(s,r);function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultRecord$3;return r.call(this,decorateCharacterList(i))||this}var a=s.prototype;return a.getKey=function(){return this.get("key")},a.getType=function(){return this.get("type")},a.getText=function(){return this.get("text")},a.getCharacterList=function(){return this.get("characterList")},a.getLength=function(){return this.getText().length},a.getDepth=function(){return this.get("depth")},a.getData=function(){return this.get("data")},a.getInlineStyleAt=function(o){var x=this.getCharacterList().get(o);return x?x.getStyle():EMPTY_SET$1},a.getEntityAt=function(o){var x=this.getCharacterList().get(o);return x?x.getEntity():null},a.getChildKeys=function(){return this.get("children")},a.getParentKey=function(){return this.get("parent")},a.getPrevSiblingKey=function(){return this.get("prevSibling")},a.getNextSiblingKey=function(){return this.get("nextSibling")},a.findStyleRanges=function(o,x){findRangesImmutable$3(this.getCharacterList(),haveEqualStyle,o,x)},a.findEntityRanges=function(o,x){findRangesImmutable$3(this.getCharacterList(),haveEqualEntity,o,x)},s}(Record$5(defaultRecord$3)),ContentBlockNode_1=ContentBlockNode$c,CharacterMetadata$9=CharacterMetadata_1,_require$5=immutableExports,Map$9=_require$5.Map,ContentStateInlineStyle$1={add:function(s,a,i){return modifyInlineStyle(s,a,i,!0)},remove:function(s,a,i){return modifyInlineStyle(s,a,i,!1)}};function modifyInlineStyle(r,s,a,i){var o=r.getBlockMap(),x=s.getStartKey(),y=s.getStartOffset(),_=s.getEndKey(),E=s.getEndOffset(),R=o.skipUntil(function(S,j){return j===x}).takeUntil(function(S,j){return j===_}).concat(Map$9([[_,o.get(_)]])).map(function(S,j){var T,A;x===_?(T=y,A=E):(T=j===x?y:0,A=j===_?E:S.getLength());for(var M=S.getCharacterList(),P;T<A;)P=M.get(T),M=M.set(T,i?CharacterMetadata$9.applyStyle(P,a):CharacterMetadata$9.removeStyle(P,a)),T++;return S.set("characterList",M)});return r.merge({blockMap:o.merge(R),selectionBefore:s,selectionAfter:s})}var ContentStateInlineStyle_1=ContentStateInlineStyle$1,CharacterMetadata$8=CharacterMetadata_1;function applyEntityToContentBlock$1(r,s,a,i){for(var o=s,x=r.getCharacterList();o<a;)x=x.set(o,CharacterMetadata$8.applyEntity(x.get(o),i)),o++;return r.set("characterList",x)}var applyEntityToContentBlock_1=applyEntityToContentBlock$1,applyEntityToContentBlock=applyEntityToContentBlock_1,Immutable$l=immutableExports;function applyEntityToContentState$1(r,s,a){var i=r.getBlockMap(),o=s.getStartKey(),x=s.getStartOffset(),y=s.getEndKey(),_=s.getEndOffset(),E=i.skipUntil(function(R,S){return S===o}).takeUntil(function(R,S){return S===y}).toOrderedMap().merge(Immutable$l.OrderedMap([[y,i.get(y)]])).map(function(R,S){var j=S===o?x:0,T=S===y?_:R.getLength();return applyEntityToContentBlock(R,j,T,a)});return r.merge({blockMap:i.merge(E),selectionBefore:s,selectionAfter:s})}var applyEntityToContentState_1=applyEntityToContentState$1,DraftEntitySegments$1={getRemovalRange:function(s,a,i,o,x){var y=i.split(" ");y=y.map(function(L,D){if(x==="forward"){if(D>0)return" "+L}else if(D<y.length-1)return L+" ";return L});for(var _=o,E,R,S=null,j=null,T=0;T<y.length;T++){if(R=y[T],E=_+R.length,s<E&&_<a)S!==null||(S=_),j=E;else if(S!==null)break;_=E}var A=o+i.length,M=S===o,P=j===A;return(!M&&P||M&&!P)&&(x==="forward"?j!==A&&j++:S!==o&&S--),{start:S,end:j}}},DraftEntitySegments_1=DraftEntitySegments$1;function invariant$u(r,s){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];if(!r){var x;if(s===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=0;x=new Error(s.replace(/%s/g,function(){return String(i[y++])})),x.name="Invariant Violation"}throw x.framesToPop=1,x}}var invariant_1=invariant$u,invariant$t=invariant_1;function getRangesForDraftEntity$1(r,s){var a=[];return r.findEntityRanges(function(i){return i.getEntity()===s},function(i,o){a.push({start:i,end:o})}),a.length||invariant$t(!1),a}var getRangesForDraftEntity_1=getRangesForDraftEntity$1,DraftEntitySegments=DraftEntitySegments_1,getRangesForDraftEntity=getRangesForDraftEntity_1,invariant$s=invariant_1;function getCharacterRemovalRange$1(r,s,a,i,o){var x=i.getStartOffset(),y=i.getEndOffset(),_=s.getEntityAt(x),E=a.getEntityAt(y-1);if(!_&&!E)return i;var R=i;if(_&&_===E)R=getEntityRemovalRange(r,s,R,o,_,!0,!0);else if(_&&E){var S=getEntityRemovalRange(r,s,R,o,_,!1,!0),j=getEntityRemovalRange(r,a,R,o,E,!1,!1);R=R.merge({anchorOffset:S.getAnchorOffset(),focusOffset:j.getFocusOffset(),isBackward:!1})}else if(_){var T=getEntityRemovalRange(r,s,R,o,_,!1,!0);R=R.merge({anchorOffset:T.getStartOffset(),isBackward:!1})}else if(E){var A=getEntityRemovalRange(r,a,R,o,E,!1,!1);R=R.merge({focusOffset:A.getEndOffset(),isBackward:!1})}return R}function getEntityRemovalRange(r,s,a,i,o,x,y){var _=a.getStartOffset(),E=a.getEndOffset(),R=r.__get(o),S=R.getMutability(),j=y?_:E;if(S==="MUTABLE")return a;var T=getRangesForDraftEntity(s,o).filter(function(P){return j<=P.end&&j>=P.start});T.length!=1&&invariant$s(!1);var A=T[0];if(S==="IMMUTABLE")return a.merge({anchorOffset:A.start,focusOffset:A.end,isBackward:!1});x||(y?E=A.end:_=A.start);var M=DraftEntitySegments.getRemovalRange(_,E,s.getText().slice(A.start,A.end),A.start,i);return a.merge({anchorOffset:M.start,focusOffset:M.end,isBackward:!1})}var getCharacterRemovalRange_1=getCharacterRemovalRange$1,seenKeys={},MULTIPLIER=Math.pow(2,24);function generateRandomKey$a(){for(var r;r===void 0||seenKeys.hasOwnProperty(r)||!isNaN(+r);)r=Math.floor(Math.random()*MULTIPLIER).toString(32);return seenKeys[r]=!0,r}var generateRandomKey_1=generateRandomKey$a,ContentBlockNode$b=ContentBlockNode_1,generateRandomKey$9=generateRandomKey_1,Immutable$k=immutableExports,OrderedMap$5=Immutable$k.OrderedMap,randomizeContentBlockNodeKeys=function(s){var a={},i;return OrderedMap$5(s.withMutations(function(o){o.forEach(function(x,y){var _=x.getKey(),E=x.getNextSiblingKey(),R=x.getPrevSiblingKey(),S=x.getChildKeys(),j=x.getParentKey(),T=generateRandomKey$9();if(a[_]=T,E){var A=o.get(E);A?o.setIn([E,"prevSibling"],T):o.setIn([_,"nextSibling"],null)}if(R){var M=o.get(R);M?o.setIn([R,"nextSibling"],T):o.setIn([_,"prevSibling"],null)}if(j&&o.get(j)){var P=o.get(j),L=P.getChildKeys();o.setIn([j,"children"],L.set(L.indexOf(x.getKey()),T))}else o.setIn([_,"parent"],null),i&&(o.setIn([i.getKey(),"nextSibling"],T),o.setIn([_,"prevSibling"],a[i.getKey()])),i=o.get(_);S.forEach(function(D){var O=o.get(D);O?o.setIn([D,"parent"],T):o.setIn([_,"children"],x.getChildKeys().filter(function(B){return B!==D}))})})}).toArray().map(function(o){return[a[o.getKey()],o.set("key",a[o.getKey()])]}))},randomizeContentBlockKeys=function(s){return OrderedMap$5(s.toArray().map(function(a){var i=generateRandomKey$9();return[i,a.set("key",i)]}))},randomizeBlockMapKeys$2=function(s){var a=s.first()instanceof ContentBlockNode$b;return a?randomizeContentBlockNodeKeys(s):randomizeContentBlockKeys(s)},randomizeBlockMapKeys_1=randomizeBlockMapKeys$2,CharacterMetadata$7=CharacterMetadata_1,findRangesImmutable$2=findRangesImmutable_1,invariant$r=invariant_1;function removeEntitiesAtEdges$2(r,s){var a=r.getBlockMap(),i=r.getEntityMap(),o={},x=s.getStartKey(),y=s.getStartOffset(),_=a.get(x),E=removeForBlock(i,_,y);E!==_&&(o[x]=E);var R=s.getEndKey(),S=s.getEndOffset(),j=a.get(R);x===R&&(j=E);var T=removeForBlock(i,j,S);return T!==j&&(o[R]=T),Object.keys(o).length?r.merge({blockMap:a.merge(o),selectionAfter:s}):r.set("selectionAfter",s)}function getRemovalRange(r,s,a){var i;return findRangesImmutable$2(r,function(o,x){return o.getEntity()===x.getEntity()},function(o){return o.getEntity()===s},function(o,x){o<=a&&x>=a&&(i={start:o,end:x})}),typeof i!="object"&&invariant$r(!1),i}function removeForBlock(r,s,a){var i=s.getCharacterList(),o=a>0?i.get(a-1):void 0,x=a<i.count()?i.get(a):void 0,y=o?o.getEntity():void 0,_=x?x.getEntity():void 0;if(_&&_===y){var E=r.__get(_);if(E.getMutability()!=="MUTABLE"){for(var R=getRemovalRange(i,_,a),S=R.start,j=R.end,T;S<j;)T=i.get(S),i=i.set(S,CharacterMetadata$7.applyEntity(T,null)),S++;return s.set("characterList",i)}}return s}var removeEntitiesAtEdges_1=removeEntitiesAtEdges$2,randomizeBlockMapKeys$1=randomizeBlockMapKeys_1,removeEntitiesAtEdges$1=removeEntitiesAtEdges_1,getContentStateFragment$4=function(s,a){var i=a.getStartKey(),o=a.getStartOffset(),x=a.getEndKey(),y=a.getEndOffset(),_=removeEntitiesAtEdges$1(s,a),E=_.getBlockMap(),R=E.keySeq(),S=R.indexOf(i),j=R.indexOf(x)+1;return randomizeBlockMapKeys$1(E.slice(S,j).map(function(T,A){var M=T.getText(),P=T.getCharacterList();return i===x?T.merge({text:M.slice(o,y),characterList:P.slice(o,y)}):A===i?T.merge({text:M.slice(o),characterList:P.slice(o)}):A===x?T.merge({text:M.slice(0,y),characterList:P.slice(0,y)}):T}))},getContentStateFragment_1=getContentStateFragment$4;function insertIntoList$2(r,s,a){var i=r;if(a===i.count())s.forEach(function(y){i=i.push(y)});else if(a===0)s.reverse().forEach(function(y){i=i.unshift(y)});else{var o=i.slice(0,a),x=i.slice(a);i=o.concat(s,x).toList()}return i}var insertIntoList_1=insertIntoList$2,BlockMapBuilder$4=BlockMapBuilder_1,ContentBlockNode$a=ContentBlockNode_1,Immutable$j=immutableExports,insertIntoList$1=insertIntoList_1,invariant$q=invariant_1,randomizeBlockMapKeys=randomizeBlockMapKeys_1,List$b=Immutable$j.List,updateExistingBlock=function(s,a,i,o,x,y){var _=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"REPLACE_WITH_NEW_DATA",E=i.get(x),R=E.getText(),S=E.getCharacterList(),j=x,T=y+o.getText().length,A=null;switch(_){case"MERGE_OLD_DATA_TO_NEW_DATA":A=o.getData().merge(E.getData());break;case"REPLACE_WITH_NEW_DATA":A=o.getData();break}var M=E.getType();R&&M==="unstyled"&&(M=o.getType());var P=E.merge({text:R.slice(0,y)+o.getText()+R.slice(y),characterList:insertIntoList$1(S,o.getCharacterList(),y),type:M,data:A});return s.merge({blockMap:i.set(x,P),selectionBefore:a,selectionAfter:a.merge({anchorKey:j,anchorOffset:T,focusKey:j,focusOffset:T,isBackward:!1})})},updateHead=function(s,a,i){var o=s.getText(),x=s.getCharacterList(),y=o.slice(0,a),_=x.slice(0,a),E=i.first();return s.merge({text:y+E.getText(),characterList:_.concat(E.getCharacterList()),type:y?s.getType():E.getType(),data:E.getData()})},updateTail=function(s,a,i){var o=s.getText(),x=s.getCharacterList(),y=o.length,_=o.slice(a,y),E=x.slice(a,y),R=i.last();return R.merge({text:R.getText()+_,characterList:R.getCharacterList().concat(E),data:R.getData()})},getRootBlocks=function(s,a){var i=s.getKey(),o=s,x=[];for(a.get(i)&&x.push(i);o&&o.getNextSiblingKey();){var y=o.getNextSiblingKey();if(!y)break;x.push(y),o=a.get(y)}return x},updateBlockMapLinks$3=function(s,a,i,o){return s.withMutations(function(x){var y=i.getKey(),_=o.getKey(),E=i.getNextSiblingKey(),R=i.getParentKey(),S=getRootBlocks(o,s),j=S[S.length-1];if(x.get(_)?(x.setIn([y,"nextSibling"],_),x.setIn([_,"prevSibling"],y)):(x.setIn([y,"nextSibling"],o.getNextSiblingKey()),x.setIn([o.getNextSiblingKey(),"prevSibling"],y)),x.setIn([j,"nextSibling"],E),E&&x.setIn([E,"prevSibling"],j),S.forEach(function(D){return x.setIn([D,"parent"],R)}),R){var T=s.get(R),A=T.getChildKeys(),M=A.indexOf(y),P=M+1,L=A.toArray();L.splice.apply(L,[P,0].concat(S)),x.setIn([R,"children"],List$b(L))}})},insertFragment$1=function(s,a,i,o,x,y){var _=i.first()instanceof ContentBlockNode$a,E=[],R=o.size,S=i.get(x),j=o.first(),T=o.last(),A=T.getLength(),M=T.getKey(),P=_&&(!S.getChildKeys().isEmpty()||!j.getChildKeys().isEmpty());i.forEach(function(D,O){if(O!==x){E.push(D);return}P?E.push(D):E.push(updateHead(D,y,o)),o.slice(P?0:1,R-1).forEach(function(B){return E.push(B)}),E.push(updateTail(D,y,o))});var L=BlockMapBuilder$4.createFromArray(E);return _&&(L=updateBlockMapLinks$3(L,i,S,j)),s.merge({blockMap:L,selectionBefore:a,selectionAfter:a.merge({anchorKey:M,anchorOffset:A,focusKey:M,focusOffset:A,isBackward:!1})})},insertFragmentIntoContentState$1=function(s,a,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA";a.isCollapsed()||invariant$q(!1);var x=s.getBlockMap(),y=randomizeBlockMapKeys(i),_=a.getStartKey(),E=a.getStartOffset(),R=x.get(_);return R instanceof ContentBlockNode$a&&(R.getChildKeys().isEmpty()||invariant$q(!1)),y.size===1?updateExistingBlock(s,a,x,y.first(),_,E,o):insertFragment$1(s,a,x,y,_,E)},insertFragmentIntoContentState_1=insertFragmentIntoContentState$1,Immutable$i=immutableExports,insertIntoList=insertIntoList_1,invariant$p=invariant_1,Repeat$4=Immutable$i.Repeat;function insertTextIntoContentState$1(r,s,a,i){s.isCollapsed()||invariant$p(!1);var o=null;if(a!=null&&(o=a.length),o==null||o===0)return r;var x=r.getBlockMap(),y=s.getStartKey(),_=s.getStartOffset(),E=x.get(y),R=E.getText(),S=E.merge({text:R.slice(0,_)+a+R.slice(_,E.getLength()),characterList:insertIntoList(E.getCharacterList(),Repeat$4(i,o).toList(),_)}),j=_+o;return r.merge({blockMap:x.set(y,S),selectionAfter:s.merge({anchorOffset:j,focusOffset:j})})}var insertTextIntoContentState_1=insertTextIntoContentState$1,Immutable$h=immutableExports,Map$8=Immutable$h.Map;function modifyBlockForContentState$2(r,s,a){var i=s.getStartKey(),o=s.getEndKey(),x=r.getBlockMap(),y=x.toSeq().skipUntil(function(_,E){return E===i}).takeUntil(function(_,E){return E===o}).concat(Map$8([[o,x.get(o)]])).map(a);return r.merge({blockMap:x.merge(y),selectionBefore:s,selectionAfter:s})}var modifyBlockForContentState_1=modifyBlockForContentState$2,ContentBlockNode$9=ContentBlockNode_1,getNextDelimiterBlockKey$2=function(s,a){var i=s instanceof ContentBlockNode$9;if(!i)return null;var o=s.getNextSiblingKey();if(o)return o;var x=s.getParentKey();if(!x)return null;for(var y=a.get(x);y&&!y.getNextSiblingKey();){var _=y.getParentKey();y=_?a.get(_):null}return y?y.getNextSiblingKey():null},getNextDelimiterBlockKey_1=getNextDelimiterBlockKey$2,ContentBlockNode$8=ContentBlockNode_1,getNextDelimiterBlockKey$1=getNextDelimiterBlockKey_1,Immutable$g=immutableExports;Immutable$g.List;var Map$7=Immutable$g.Map,transformBlock$2=function(s,a,i){if(s){var o=a.get(s);o&&a.set(s,i(o))}},getAncestorsKeys=function(s,a){var i=[];if(!s)return i;for(var o=a.get(s);o&&o.getParentKey();){var x=o.getParentKey();x&&i.push(x),o=x?a.get(x):null}return i},getNextDelimitersBlockKeys=function(s,a){var i=[];if(!s)return i;for(var o=getNextDelimiterBlockKey$1(s,a);o&&a.get(o);){var x=a.get(o);i.push(o),o=x.getParentKey()?getNextDelimiterBlockKey$1(x,a):null}return i},getNextValidSibling=function(s,a,i){if(!s)return null;for(var o=i.get(s.getKey()).getNextSiblingKey();o&&!a.get(o);)o=i.get(o).getNextSiblingKey()||null;return o},getPrevValidSibling=function(s,a,i){if(!s)return null;for(var o=i.get(s.getKey()).getPrevSiblingKey();o&&!a.get(o);)o=i.get(o).getPrevSiblingKey()||null;return o},updateBlockMapLinks$2=function(s,a,i,o){return s.withMutations(function(x){if(transformBlock$2(a.getKey(),x,function(S){return S.merge({nextSibling:getNextValidSibling(S,x,o),prevSibling:getPrevValidSibling(S,x,o)})}),transformBlock$2(i.getKey(),x,function(S){return S.merge({nextSibling:getNextValidSibling(S,x,o),prevSibling:getPrevValidSibling(S,x,o)})}),getAncestorsKeys(a.getKey(),o).forEach(function(S){return transformBlock$2(S,x,function(j){return j.merge({children:j.getChildKeys().filter(function(T){return x.get(T)}),nextSibling:getNextValidSibling(j,x,o),prevSibling:getPrevValidSibling(j,x,o)})})}),transformBlock$2(a.getNextSiblingKey(),x,function(S){return S.merge({prevSibling:a.getPrevSiblingKey()})}),transformBlock$2(a.getPrevSiblingKey(),x,function(S){return S.merge({nextSibling:getNextValidSibling(S,x,o)})}),transformBlock$2(i.getNextSiblingKey(),x,function(S){return S.merge({prevSibling:getPrevValidSibling(S,x,o)})}),transformBlock$2(i.getPrevSiblingKey(),x,function(S){return S.merge({nextSibling:i.getNextSiblingKey()})}),getAncestorsKeys(i.getKey(),o).forEach(function(S){transformBlock$2(S,x,function(j){return j.merge({children:j.getChildKeys().filter(function(T){return x.get(T)}),nextSibling:getNextValidSibling(j,x,o),prevSibling:getPrevValidSibling(j,x,o)})})}),getNextDelimitersBlockKeys(i,o).forEach(function(S){return transformBlock$2(S,x,function(j){return j.merge({nextSibling:getNextValidSibling(j,x,o),prevSibling:getPrevValidSibling(j,x,o)})})}),s.get(a.getKey())==null&&s.get(i.getKey())!=null&&i.getParentKey()===a.getKey()&&i.getPrevSiblingKey()==null){var y=a.getPrevSiblingKey();transformBlock$2(i.getKey(),x,function(S){return S.merge({prevSibling:y})}),transformBlock$2(y,x,function(S){return S.merge({nextSibling:i.getKey()})});var _=y?s.get(y):null,E=_?_.getParentKey():null;if(a.getChildKeys().forEach(function(S){transformBlock$2(S,x,function(j){return j.merge({parent:E})})}),E!=null){var R=s.get(E);transformBlock$2(E,x,function(S){return S.merge({children:R.getChildKeys().concat(a.getChildKeys())})})}transformBlock$2(a.getChildKeys().find(function(S){var j=s.get(S);return j.getNextSiblingKey()===null}),x,function(S){return S.merge({nextSibling:a.getNextSiblingKey()})})}})},removeRangeFromContentState$1=function(s,a){if(a.isCollapsed())return s;var i=s.getBlockMap(),o=a.getStartKey(),x=a.getStartOffset(),y=a.getEndKey(),_=a.getEndOffset(),E=i.get(o),R=i.get(y),S=E instanceof ContentBlockNode$8,j=[];if(S){var T=R.getChildKeys(),A=getAncestorsKeys(y,i);R.getNextSiblingKey()&&(j=j.concat(A)),T.isEmpty()||(j=j.concat(A.concat([y]))),j=j.concat(getAncestorsKeys(getNextDelimiterBlockKey$1(R,i),i))}var M;E===R?M=removeFromList(E.getCharacterList(),x,_):M=E.getCharacterList().slice(0,x).concat(R.getCharacterList().slice(_));var P=E.merge({text:E.getText().slice(0,x)+R.getText().slice(_),characterList:M}),L=S&&x===0&&_===0&&R.getParentKey()===o&&R.getPrevSiblingKey()==null,D=L?Map$7([[o,null]]):i.toSeq().skipUntil(function(B,N){return N===o}).takeUntil(function(B,N){return N===y}).filter(function(B,N){return j.indexOf(N)===-1}).concat(Map$7([[y,null]])).map(function(B,N){return N===o?P:null}),O=i.merge(D).filter(function(B){return!!B});return S&&E!==R&&(O=updateBlockMapLinks$2(O,E,R,i)),s.merge({blockMap:O,selectionBefore:a,selectionAfter:a.merge({anchorKey:o,anchorOffset:x,focusKey:o,focusOffset:x,isBackward:!1})})},removeFromList=function(s,a,i){if(a===0)for(;a<i;)s=s.shift(),a++;else if(i===s.count())for(;i>a;)s=s.pop(),i--;else{var o=s.slice(0,a),x=s.slice(i);s=o.concat(x).toList()}return s},removeRangeFromContentState_1=removeRangeFromContentState$1,ContentBlockNode$7=ContentBlockNode_1,generateRandomKey$8=generateRandomKey_1,Immutable$f=immutableExports,invariant$o=invariant_1,modifyBlockForContentState$1=modifyBlockForContentState_1,List$a=Immutable$f.List,Map$6=Immutable$f.Map,transformBlock$1=function(s,a,i){if(s){var o=a.get(s);o&&a.set(s,i(o))}},updateBlockMapLinks$1=function(s,a,i){return s.withMutations(function(o){var x=a.getKey(),y=i.getKey();transformBlock$1(a.getParentKey(),o,function(_){var E=_.getChildKeys(),R=E.indexOf(x)+1,S=E.toArray();return S.splice(R,0,y),_.merge({children:List$a(S)})}),transformBlock$1(a.getNextSiblingKey(),o,function(_){return _.merge({prevSibling:y})}),transformBlock$1(x,o,function(_){return _.merge({nextSibling:y})}),transformBlock$1(y,o,function(_){return _.merge({prevSibling:x})})})},splitBlockInContentState$1=function(s,a){a.isCollapsed()||invariant$o(!1);var i=a.getAnchorKey(),o=s.getBlockMap(),x=o.get(i),y=x.getText();if(!y){var _=x.getType();if(_==="unordered-list-item"||_==="ordered-list-item")return modifyBlockForContentState$1(s,a,function(D){return D.merge({type:"unstyled",depth:0})})}var E=a.getAnchorOffset(),R=x.getCharacterList(),S=generateRandomKey$8(),j=x instanceof ContentBlockNode$7,T=x.merge({text:y.slice(0,E),characterList:R.slice(0,E)}),A=T.merge({key:S,text:y.slice(E),characterList:R.slice(E),data:Map$6()}),M=o.toSeq().takeUntil(function(D){return D===x}),P=o.toSeq().skipUntil(function(D){return D===x}).rest(),L=M.concat([[i,T],[S,A]],P).toOrderedMap();return j&&(x.getChildKeys().isEmpty()||invariant$o(!1),L=updateBlockMapLinks$1(L,T,A)),s.merge({blockMap:L,selectionBefore:a,selectionAfter:a.merge({anchorKey:S,anchorOffset:0,focusKey:S,focusOffset:0,isBackward:!1})})},splitBlockInContentState_1=splitBlockInContentState$1,CharacterMetadata$6=CharacterMetadata_1,ContentStateInlineStyle=ContentStateInlineStyle_1,applyEntityToContentState=applyEntityToContentState_1,getCharacterRemovalRange=getCharacterRemovalRange_1,getContentStateFragment$3=getContentStateFragment_1,Immutable$e=immutableExports,insertFragmentIntoContentState=insertFragmentIntoContentState_1,insertTextIntoContentState=insertTextIntoContentState_1,invariant$n=invariant_1,modifyBlockForContentState=modifyBlockForContentState_1,removeEntitiesAtEdges=removeEntitiesAtEdges_1,removeRangeFromContentState=removeRangeFromContentState_1,splitBlockInContentState=splitBlockInContentState_1,OrderedSet$3=Immutable$e.OrderedSet,DraftModifier$e={replaceText:function(s,a,i,o,x){var y=removeEntitiesAtEdges(s,a),_=removeRangeFromContentState(y,a),E=CharacterMetadata$6.create({style:o||OrderedSet$3(),entity:x||null});return insertTextIntoContentState(_,_.getSelectionAfter(),i,E)},insertText:function(s,a,i,o,x){return a.isCollapsed()||invariant$n(!1),DraftModifier$e.replaceText(s,a,i,o,x)},moveText:function(s,a,i){var o=getContentStateFragment$3(s,a),x=DraftModifier$e.removeRange(s,a,"backward");return DraftModifier$e.replaceWithFragment(x,i,o)},replaceWithFragment:function(s,a,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA",x=removeEntitiesAtEdges(s,a),y=removeRangeFromContentState(x,a);return insertFragmentIntoContentState(y,y.getSelectionAfter(),i,o)},removeRange:function(s,a,i){var o,x,y,_;a.getIsBackward()&&(a=a.merge({anchorKey:a.getFocusKey(),anchorOffset:a.getFocusOffset(),focusKey:a.getAnchorKey(),focusOffset:a.getAnchorOffset(),isBackward:!1})),o=a.getAnchorKey(),x=a.getFocusKey(),y=s.getBlockForKey(o),_=s.getBlockForKey(x);var E=a.getStartOffset(),R=a.getEndOffset(),S=y.getEntityAt(E),j=_.getEntityAt(R-1);if(o===x&&S&&S===j){var T=getCharacterRemovalRange(s.getEntityMap(),y,_,a,i);return removeRangeFromContentState(s,T)}var A=removeEntitiesAtEdges(s,a);return removeRangeFromContentState(A,a)},splitBlock:function(s,a){var i=removeEntitiesAtEdges(s,a),o=removeRangeFromContentState(i,a);return splitBlockInContentState(o,o.getSelectionAfter())},applyInlineStyle:function(s,a,i){return ContentStateInlineStyle.add(s,a,i)},removeInlineStyle:function(s,a,i){return ContentStateInlineStyle.remove(s,a,i)},setBlockType:function(s,a,i){return modifyBlockForContentState(s,a,function(o){return o.merge({type:i,depth:0})})},setBlockData:function(s,a,i){return modifyBlockForContentState(s,a,function(o){return o.merge({data:i})})},mergeBlockData:function(s,a,i){return modifyBlockForContentState(s,a,function(o){return o.merge({data:o.getData().merge(i)})})},applyEntity:function(s,a,i){var o=removeEntitiesAtEdges(s,a);return applyEntityToContentState(o,a,i)}},DraftModifier_1=DraftModifier$e;function getOwnObjectValues$2(r){return Object.keys(r).map(function(s){return r[s]})}var getOwnObjectValues_1=getOwnObjectValues$2;function _objectSpread$a(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$l(r,o,a[o])})}return r}function _defineProperty$l(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function _objectWithoutPropertiesLoose$5(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}var findRangesImmutable$1=findRangesImmutable_1,getOwnObjectValues$1=getOwnObjectValues_1,Immutable$d=immutableExports,List$9=Immutable$d.List,Repeat$3=Immutable$d.Repeat,Record$4=Immutable$d.Record,returnTrue=function(){return!0},defaultLeafRange={start:null,end:null},LeafRange=Record$4(defaultLeafRange),defaultDecoratorRange={start:null,end:null,decoratorKey:null,leaves:null},DecoratorRange=Record$4(defaultDecoratorRange),BlockTree$1={generate:function(s,a,i){var o=a.getLength();if(!o)return List$9.of(new DecoratorRange({start:0,end:0,decoratorKey:null,leaves:List$9.of(new LeafRange({start:0,end:0}))}));var x=[],y=i?i.getDecorations(a,s):List$9(Repeat$3(null,o)),_=a.getCharacterList();return findRangesImmutable$1(y,areEqual$1,returnTrue,function(E,R){x.push(new DecoratorRange({start:E,end:R,decoratorKey:y.get(E),leaves:generateLeaves(_.slice(E,R).toList(),E)}))}),List$9(x)},fromJS:function(s){var a=s.leaves,i=_objectWithoutPropertiesLoose$5(s,["leaves"]);return new DecoratorRange(_objectSpread$a({},i,{leaves:a!=null?List$9(Array.isArray(a)?a:getOwnObjectValues$1(a)).map(function(o){return LeafRange(o)}):null}))}};function generateLeaves(r,s){var a=[],i=r.map(function(o){return o.getStyle()}).toList();return findRangesImmutable$1(i,areEqual$1,returnTrue,function(o,x){a.push(new LeafRange({start:o+s,end:x+s}))}),List$9(a)}function areEqual$1(r,s){return r===s}var BlockTree_1=BlockTree$1;function _inheritsLoose$8(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var Immutable$c=immutableExports,Record$3=Immutable$c.Record,DraftEntityInstanceRecord=Record$3({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),DraftEntityInstance$2=function(r){_inheritsLoose$8(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.getType=function(){return this.get("type")},a.getMutability=function(){return this.get("mutability")},a.getData=function(){return this.get("data")},s}(DraftEntityInstanceRecord),DraftEntityInstance_1=DraftEntityInstance$2;function uuid$1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var s=Math.random()*16|0,a=r=="x"?s:s&3|8;return a.toString(16)})}var uuid_1=uuid$1;function _objectSpread$9(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$k(r,o,a[o])})}return r}function _defineProperty$k(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var DraftEntityInstance$1=DraftEntityInstance_1,Immutable$b=immutableExports,invariant$m=invariant_1,uuid=uuid_1,Map$5=Immutable$b.Map,instances=Map$5(),instanceKey=uuid();function logWarning(r,s){console.warn("WARNING: "+r+` will be deprecated soon!
Please use "`+s+'" instead.')}var DraftEntity$4={getLastCreatedEntityKey:function(){return logWarning("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),DraftEntity$4.__getLastCreatedEntityKey()},create:function(s,a,i){return logWarning("DraftEntity.create","contentState.createEntity"),DraftEntity$4.__create(s,a,i)},add:function(s){return logWarning("DraftEntity.add","contentState.addEntity"),DraftEntity$4.__add(s)},get:function(s){return logWarning("DraftEntity.get","contentState.getEntity"),DraftEntity$4.__get(s)},__getAll:function(){return instances},__loadWithEntities:function(s){instances=s,instanceKey=uuid()},mergeData:function(s,a){return logWarning("DraftEntity.mergeData","contentState.mergeEntityData"),DraftEntity$4.__mergeData(s,a)},replaceData:function(s,a){return logWarning("DraftEntity.replaceData","contentState.replaceEntityData"),DraftEntity$4.__replaceData(s,a)},__getLastCreatedEntityKey:function(){return instanceKey},__create:function(s,a,i){return DraftEntity$4.__add(new DraftEntityInstance$1({type:s,mutability:a,data:i||{}}))},__add:function(s){return instanceKey=uuid(),instances=instances.set(instanceKey,s),instanceKey},__get:function(s){var a=instances.get(s);return a||invariant$m(!1),a},__mergeData:function(s,a){var i=DraftEntity$4.__get(s),o=_objectSpread$9({},i.getData(),a),x=i.set("data",o);return instances=instances.set(s,x),x},__replaceData:function(s,a){var i=DraftEntity$4.__get(s),o=i.set("data",a);return instances=instances.set(s,o),o}},DraftEntity_1=DraftEntity$4;function _inheritsLoose$7(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var Immutable$a=immutableExports,Record$2=Immutable$a.Record,defaultRecord$2={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},SelectionStateRecord=Record$2(defaultRecord$2),SelectionState$4=function(r){_inheritsLoose$7(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},a.getAnchorKey=function(){return this.get("anchorKey")},a.getAnchorOffset=function(){return this.get("anchorOffset")},a.getFocusKey=function(){return this.get("focusKey")},a.getFocusOffset=function(){return this.get("focusOffset")},a.getIsBackward=function(){return this.get("isBackward")},a.getHasFocus=function(){return this.get("hasFocus")},a.hasEdgeWithin=function(o,x,y){var _=this.getAnchorKey(),E=this.getFocusKey();if(_===E&&_===o){var R=this.getStartOffset(),S=this.getEndOffset();return x<=R&&R<=y||x<=S&&S<=y}if(o!==_&&o!==E)return!1;var j=o===_?this.getAnchorOffset():this.getFocusOffset();return x<=j&&y>=j},a.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},a.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},a.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},a.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},a.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},s.createEmpty=function(o){return new s({anchorKey:o,anchorOffset:0,focusKey:o,focusOffset:0,isBackward:!1,hasFocus:!1})},s}(SelectionStateRecord),SelectionState_1=SelectionState$4,gkx$8=function(r){return typeof window<"u"&&window.__DRAFT_GKX?!!window.__DRAFT_GKX[r]:!1},REGEX_BLOCK_DELIMITER=new RegExp("\r","g");function sanitizeDraftText$2(r){return r.replace(REGEX_BLOCK_DELIMITER,"")}var sanitizeDraftText_1=sanitizeDraftText$2;function _objectSpread$8(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$j(r,o,a[o])})}return r}function _defineProperty$j(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function _inheritsLoose$6(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var BlockMapBuilder$3=BlockMapBuilder_1,CharacterMetadata$5=CharacterMetadata_1,ContentBlock$6=ContentBlock_1,ContentBlockNode$6=ContentBlockNode_1,DraftEntity$3=DraftEntity_1,SelectionState$3=SelectionState_1,generateRandomKey$7=generateRandomKey_1,getOwnObjectValues=getOwnObjectValues_1,gkx$7=gkx$8,Immutable$9=immutableExports,sanitizeDraftText$1=sanitizeDraftText_1,List$8=Immutable$9.List,Record$1=Immutable$9.Record,Repeat$2=Immutable$9.Repeat,ImmutableMap=Immutable$9.Map,OrderedMap$4=Immutable$9.OrderedMap,defaultRecord$1={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},ContentStateRecord=Record$1(defaultRecord$1),ContentBlockNodeRecord=gkx$7("draft_tree_data_support")?ContentBlockNode$6:ContentBlock$6,ContentState$3=function(r){_inheritsLoose$6(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.getEntityMap=function(){return DraftEntity$3},a.getBlockMap=function(){return this.get("blockMap")},a.getSelectionBefore=function(){return this.get("selectionBefore")},a.getSelectionAfter=function(){return this.get("selectionAfter")},a.getBlockForKey=function(o){var x=this.getBlockMap().get(o);return x},a.getKeyBefore=function(o){return this.getBlockMap().reverse().keySeq().skipUntil(function(x){return x===o}).skip(1).first()},a.getKeyAfter=function(o){return this.getBlockMap().keySeq().skipUntil(function(x){return x===o}).skip(1).first()},a.getBlockAfter=function(o){return this.getBlockMap().skipUntil(function(x,y){return y===o}).skip(1).first()},a.getBlockBefore=function(o){return this.getBlockMap().reverse().skipUntil(function(x,y){return y===o}).skip(1).first()},a.getBlocksAsArray=function(){return this.getBlockMap().toArray()},a.getFirstBlock=function(){return this.getBlockMap().first()},a.getLastBlock=function(){return this.getBlockMap().last()},a.getPlainText=function(o){return this.getBlockMap().map(function(x){return x?x.getText():""}).join(o||`
`)},a.getLastCreatedEntityKey=function(){return DraftEntity$3.__getLastCreatedEntityKey()},a.hasText=function(){var o=this.getBlockMap();return o.size>1||escape(o.first().getText()).replace(/%u200B/g,"").length>0},a.createEntity=function(o,x,y){return DraftEntity$3.__create(o,x,y),this},a.mergeEntityData=function(o,x){return DraftEntity$3.__mergeData(o,x),this},a.replaceEntityData=function(o,x){return DraftEntity$3.__replaceData(o,x),this},a.addEntity=function(o){return DraftEntity$3.__add(o),this},a.getEntity=function(o){return DraftEntity$3.__get(o)},a.getAllEntities=function(){return DraftEntity$3.__getAll()},a.loadWithEntities=function(o){return DraftEntity$3.__loadWithEntities(o)},s.createFromBlockArray=function(o,x){var y=Array.isArray(o)?o:o.contentBlocks,_=BlockMapBuilder$3.createFromArray(y),E=_.isEmpty()?new SelectionState$3:SelectionState$3.createEmpty(_.first().getKey());return new s({blockMap:_,entityMap:x||DraftEntity$3,selectionBefore:E,selectionAfter:E})},s.createFromText=function(o){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:/\r\n?|\n/g,y=o.split(x),_=y.map(function(E){return E=sanitizeDraftText$1(E),new ContentBlockNodeRecord({key:generateRandomKey$7(),text:E,type:"unstyled",characterList:List$8(Repeat$2(CharacterMetadata$5.EMPTY,E.length))})});return s.createFromBlockArray(_)},s.fromJS=function(o){return new s(_objectSpread$8({},o,{blockMap:OrderedMap$4(o.blockMap).map(s.createContentBlockFromJS),selectionBefore:new SelectionState$3(o.selectionBefore),selectionAfter:new SelectionState$3(o.selectionAfter)}))},s.createContentBlockFromJS=function(o){var x=o.characterList;return new ContentBlockNodeRecord(_objectSpread$8({},o,{data:ImmutableMap(o.data),characterList:x!=null?List$8((Array.isArray(x)?x:getOwnObjectValues(x)).map(function(y){return CharacterMetadata$5.fromJS(y)})):void 0}))},s}(ContentStateRecord),ContentState_1=ContentState$3,invariant$l=invariant_1,NEUTRAL="NEUTRAL",LTR="LTR",RTL="RTL",globalDir=null;function isStrong(r){return r===LTR||r===RTL}function getHTMLDir(r){return isStrong(r)||invariant$l(!1),r===LTR?"ltr":"rtl"}function getHTMLDirIfDifferent(r,s){return isStrong(r)||invariant$l(!1),isStrong(s)||invariant$l(!1),r===s?null:getHTMLDir(r)}function setGlobalDir(r){globalDir=r}function initGlobalDir(){setGlobalDir(LTR)}function getGlobalDir(){return globalDir||this.initGlobalDir(),globalDir||invariant$l(!1),globalDir}var UnicodeBidiDirection$3={NEUTRAL,LTR,RTL,isStrong,getHTMLDir,getHTMLDirIfDifferent,setGlobalDir,initGlobalDir,getGlobalDir},UnicodeBidiDirection_1=UnicodeBidiDirection$3,UnicodeBidiDirection$2=UnicodeBidiDirection_1,invariant$k=invariant_1,RANGE_BY_BIDI_TYPE={L:"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",R:"֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",AL:"؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾"},REGEX_STRONG=new RegExp("["+RANGE_BY_BIDI_TYPE.L+RANGE_BY_BIDI_TYPE.R+RANGE_BY_BIDI_TYPE.AL+"]"),REGEX_RTL=new RegExp("["+RANGE_BY_BIDI_TYPE.R+RANGE_BY_BIDI_TYPE.AL+"]");function firstStrongChar(r){var s=REGEX_STRONG.exec(r);return s==null?null:s[0]}function firstStrongCharDir(r){var s=firstStrongChar(r);return s==null?UnicodeBidiDirection$2.NEUTRAL:REGEX_RTL.exec(s)?UnicodeBidiDirection$2.RTL:UnicodeBidiDirection$2.LTR}function resolveBlockDir(r,s){if(s=s||UnicodeBidiDirection$2.NEUTRAL,!r.length)return s;var a=firstStrongCharDir(r);return a===UnicodeBidiDirection$2.NEUTRAL?s:a}function getDirection(r,s){return s||(s=UnicodeBidiDirection$2.getGlobalDir()),UnicodeBidiDirection$2.isStrong(s)||invariant$k(!1),resolveBlockDir(r,s)}function isDirectionLTR(r,s){return getDirection(r,s)===UnicodeBidiDirection$2.LTR}function isDirectionRTL(r,s){return getDirection(r,s)===UnicodeBidiDirection$2.RTL}var UnicodeBidi$2={firstStrongChar,firstStrongCharDir,resolveBlockDir,getDirection,isDirectionLTR,isDirectionRTL},UnicodeBidi_1=UnicodeBidi$2;function _defineProperty$i(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var UnicodeBidi$1=UnicodeBidi_1,UnicodeBidiDirection$1=UnicodeBidiDirection_1,invariant$j=invariant_1,UnicodeBidiService$1=function(){function r(a){_defineProperty$i(this,"_defaultDir",void 0),_defineProperty$i(this,"_lastDir",void 0),a?UnicodeBidiDirection$1.isStrong(a)||invariant$j(!1):a=UnicodeBidiDirection$1.getGlobalDir(),this._defaultDir=a,this.reset()}var s=r.prototype;return s.reset=function(){this._lastDir=this._defaultDir},s.getDirection=function(i){return this._lastDir=UnicodeBidi$1.getDirection(i,this._lastDir),this._lastDir},r}(),UnicodeBidiService_1=UnicodeBidiService$1,nullthrows$c=function(s){if(s!=null)return s;throw new Error("Got unexpected null or undefined")},nullthrows_1=nullthrows$c,UnicodeBidiService=UnicodeBidiService_1,Immutable$8=immutableExports,nullthrows$b=nullthrows_1,OrderedMap$3=Immutable$8.OrderedMap,bidiService,EditorBidiService$1={getDirectionMap:function(s,a){bidiService?bidiService.reset():bidiService=new UnicodeBidiService;var i=s.getBlockMap(),o=i.valueSeq().map(function(y){return nullthrows$b(bidiService).getDirection(y.getText())}),x=OrderedMap$3(i.keySeq().zip(o));return a!=null&&Immutable$8.is(a,x)?a:x}},EditorBidiService_1=EditorBidiService$1;function _objectSpread$7(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$h(r,o,a[o])})}return r}function _defineProperty$h(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var BlockTree=BlockTree_1,ContentState$2=ContentState_1,EditorBidiService=EditorBidiService_1,SelectionState$2=SelectionState_1,Immutable$7=immutableExports,OrderedSet$2=Immutable$7.OrderedSet,Record=Immutable$7.Record,Stack=Immutable$7.Stack,OrderedMap$2=Immutable$7.OrderedMap,List$7=Immutable$7.List,defaultRecord={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:Stack(),selection:null,treeMap:null,undoStack:Stack()},EditorStateRecord=Record(defaultRecord),EditorState$q=function(){s.createEmpty=function(i){return this.createWithText("",i)},s.createWithText=function(i,o){return s.createWithContent(ContentState$2.createFromText(i),o)},s.createWithContent=function(i,o){if(i.getBlockMap().count()===0)return s.createEmpty(o);var x=i.getBlockMap().first().getKey();return s.create({currentContent:i,undoStack:Stack(),redoStack:Stack(),decorator:o||null,selection:SelectionState$2.createEmpty(x)})},s.create=function(i){var o=i.currentContent,x=i.decorator,y=_objectSpread$7({},i,{treeMap:generateNewTreeMap(o,x),directionMap:EditorBidiService.getDirectionMap(o)});return new s(new EditorStateRecord(y))},s.fromJS=function(i){return new s(new EditorStateRecord(_objectSpread$7({},i,{directionMap:i.directionMap!=null?OrderedMap$2(i.directionMap):i.directionMap,inlineStyleOverride:i.inlineStyleOverride!=null?OrderedSet$2(i.inlineStyleOverride):i.inlineStyleOverride,nativelyRenderedContent:i.nativelyRenderedContent!=null?ContentState$2.fromJS(i.nativelyRenderedContent):i.nativelyRenderedContent,redoStack:i.redoStack!=null?Stack(i.redoStack.map(function(o){return ContentState$2.fromJS(o)})):i.redoStack,selection:i.selection!=null?new SelectionState$2(i.selection):i.selection,treeMap:i.treeMap!=null?OrderedMap$2(i.treeMap).map(function(o){return List$7(o).map(function(x){return BlockTree.fromJS(x)})}):i.treeMap,undoStack:i.undoStack!=null?Stack(i.undoStack.map(function(o){return ContentState$2.fromJS(o)})):i.undoStack,currentContent:ContentState$2.fromJS(i.currentContent)})))},s.set=function(i,o){var x=i.getImmutable().withMutations(function(y){var _=y.get("decorator"),E=_;o.decorator===null?E=null:o.decorator&&(E=o.decorator);var R=o.currentContent||i.getCurrentContent();if(E!==_){var S=y.get("treeMap"),j;E&&_?j=regenerateTreeForNewDecorator(R,R.getBlockMap(),S,E,_):j=generateNewTreeMap(R,E),y.merge({decorator:E,treeMap:j,nativelyRenderedContent:null});return}var T=i.getCurrentContent();R!==T&&y.set("treeMap",regenerateTreeForNewBlocks(i,R.getBlockMap(),R.getEntityMap(),E)),y.merge(o)});return new s(x)};var r=s.prototype;r.toJS=function(){return this.getImmutable().toJS()},r.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},r.getCurrentContent=function(){return this.getImmutable().get("currentContent")},r.getUndoStack=function(){return this.getImmutable().get("undoStack")},r.getRedoStack=function(){return this.getImmutable().get("redoStack")},r.getSelection=function(){return this.getImmutable().get("selection")},r.getDecorator=function(){return this.getImmutable().get("decorator")},r.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},r.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},r.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},r.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},r.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},s.setInlineStyleOverride=function(i,o){return s.set(i,{inlineStyleOverride:o})},r.getCurrentInlineStyle=function(){var i=this.getInlineStyleOverride();if(i!=null)return i;var o=this.getCurrentContent(),x=this.getSelection();return x.isCollapsed()?getInlineStyleForCollapsedSelection(o,x):getInlineStyleForNonCollapsedSelection(o,x)},r.getBlockTree=function(i){return this.getImmutable().getIn(["treeMap",i])},r.isSelectionAtStartOfContent=function(){var i=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(i,0,0)},r.isSelectionAtEndOfContent=function(){var i=this.getCurrentContent(),o=i.getBlockMap(),x=o.last(),y=x.getLength();return this.getSelection().hasEdgeWithin(x.getKey(),y,y)},r.getDirectionMap=function(){return this.getImmutable().get("directionMap")},s.acceptSelection=function(i,o){return updateSelection(i,o,!1)},s.forceSelection=function(i,o){return o.getHasFocus()||(o=o.set("hasFocus",!0)),updateSelection(i,o,!0)},s.moveSelectionToEnd=function(i){var o=i.getCurrentContent(),x=o.getLastBlock(),y=x.getKey(),_=x.getLength();return s.acceptSelection(i,new SelectionState$2({anchorKey:y,anchorOffset:_,focusKey:y,focusOffset:_,isBackward:!1}))},s.moveFocusToEnd=function(i){var o=s.moveSelectionToEnd(i);return s.forceSelection(o,o.getSelection())},s.push=function(i,o,x){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(i.getCurrentContent()===o)return i;var _=EditorBidiService.getDirectionMap(o,i.getDirectionMap());if(!i.getAllowUndo())return s.set(i,{currentContent:o,directionMap:_,lastChangeType:x,selection:o.getSelectionAfter(),forceSelection:y,inlineStyleOverride:null});var E=i.getSelection(),R=i.getCurrentContent(),S=i.getUndoStack(),j=o;E!==R.getSelectionAfter()||mustBecomeBoundary(i,x)?(S=S.push(R),j=j.set("selectionBefore",E)):(x==="insert-characters"||x==="backspace-character"||x==="delete-character")&&(j=j.set("selectionBefore",R.getSelectionBefore()));var T=i.getInlineStyleOverride(),A=["adjust-depth","change-block-type","split-block"];A.indexOf(x)===-1&&(T=null);var M={currentContent:j,directionMap:_,undoStack:S,redoStack:Stack(),lastChangeType:x,selection:o.getSelectionAfter(),forceSelection:y,inlineStyleOverride:T};return s.set(i,M)},s.undo=function(i){if(!i.getAllowUndo())return i;var o=i.getUndoStack(),x=o.peek();if(!x)return i;var y=i.getCurrentContent(),_=EditorBidiService.getDirectionMap(x,i.getDirectionMap());return s.set(i,{currentContent:x,directionMap:_,undoStack:o.shift(),redoStack:i.getRedoStack().push(y),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:y.getSelectionBefore()})},s.redo=function(i){if(!i.getAllowUndo())return i;var o=i.getRedoStack(),x=o.peek();if(!x)return i;var y=i.getCurrentContent(),_=EditorBidiService.getDirectionMap(x,i.getDirectionMap());return s.set(i,{currentContent:x,directionMap:_,undoStack:i.getUndoStack().push(y),redoStack:o.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:x.getSelectionAfter()})};function s(a){_defineProperty$h(this,"_immutable",void 0),this._immutable=a}return r.getImmutable=function(){return this._immutable},s}();function updateSelection(r,s,a){return EditorState$q.set(r,{selection:s,forceSelection:a,nativelyRenderedContent:null,inlineStyleOverride:null})}function generateNewTreeMap(r,s){return r.getBlockMap().map(function(a){return BlockTree.generate(r,a,s)}).toOrderedMap()}function regenerateTreeForNewBlocks(r,s,a,i){var o=r.getCurrentContent().set("entityMap",a),x=o.getBlockMap(),y=r.getImmutable().get("treeMap");return y.merge(s.toSeq().filter(function(_,E){return _!==x.get(E)}).map(function(_){return BlockTree.generate(o,_,i)}))}function regenerateTreeForNewDecorator(r,s,a,i,o){return a.merge(s.toSeq().filter(function(x){return i.getDecorations(x,r)!==o.getDecorations(x,r)}).map(function(x){return BlockTree.generate(r,x,i)}))}function mustBecomeBoundary(r,s){var a=r.getLastChangeType();return s!==a||s!=="insert-characters"&&s!=="backspace-character"&&s!=="delete-character"}function getInlineStyleForCollapsedSelection(r,s){var a=s.getStartKey(),i=s.getStartOffset(),o=r.getBlockForKey(a);return i>0?o.getInlineStyleAt(i-1):o.getLength()?o.getInlineStyleAt(0):lookUpwardForInlineStyle(r,a)}function getInlineStyleForNonCollapsedSelection(r,s){var a=s.getStartKey(),i=s.getStartOffset(),o=r.getBlockForKey(a);return i<o.getLength()?o.getInlineStyleAt(i):i>0?o.getInlineStyleAt(i-1):lookUpwardForInlineStyle(r,a)}function lookUpwardForInlineStyle(r,s){var a=r.getBlockMap().reverse().skipUntil(function(i,o){return o===s}).skip(1).skipUntil(function(i,o){return i.getLength()}).first();return a?a.getInlineStyleAt(a.getLength()-1):OrderedSet$2()}var EditorState_1=EditorState$q,ContentBlockNode$5=ContentBlockNode_1,getNextDelimiterBlockKey=getNextDelimiterBlockKey_1,Immutable$6=immutableExports,invariant$i=invariant_1,OrderedMap$1=Immutable$6.OrderedMap,List$6=Immutable$6.List,transformBlock=function(s,a,i){if(s){var o=a.get(s);o&&a.set(s,i(o))}},updateBlockMapLinks=function(s,a,i,o,x){if(!x)return s;var y=o==="after",_=a.getKey(),E=i.getKey(),R=a.getParentKey(),S=a.getNextSiblingKey(),j=a.getPrevSiblingKey(),T=i.getParentKey(),A=y?i.getNextSiblingKey():E,M=y?E:i.getPrevSiblingKey();return s.withMutations(function(P){transformBlock(R,P,function(L){var D=L.getChildKeys();return L.merge({children:D.delete(D.indexOf(_))})}),transformBlock(j,P,function(L){return L.merge({nextSibling:S})}),transformBlock(S,P,function(L){return L.merge({prevSibling:j})}),transformBlock(A,P,function(L){return L.merge({prevSibling:_})}),transformBlock(M,P,function(L){return L.merge({nextSibling:_})}),transformBlock(T,P,function(L){var D=L.getChildKeys(),O=D.indexOf(E),B=y?O+1:O!==0?O-1:0,N=D.toArray();return N.splice(B,0,_),L.merge({children:List$6(N)})}),transformBlock(_,P,function(L){return L.merge({nextSibling:A,prevSibling:M,parent:T})})})},moveBlockInContentState$1=function(s,a,i,o){o==="replace"&&invariant$i(!1);var x=i.getKey(),y=a.getKey();y===x&&invariant$i(!1);var _=s.getBlockMap(),E=a instanceof ContentBlockNode$5,R=[a],S=_.delete(y);E&&(R=[],S=_.withMutations(function(D){var O=a.getNextSiblingKey(),B=getNextDelimiterBlockKey(a,D);D.toSeq().skipUntil(function(N){return N.getKey()===y}).takeWhile(function(N){var F=N.getKey(),W=F===y,V=O&&F!==O,U=!O&&N.getParentKey()&&(!B||F!==B);return!!(W||V||U)}).forEach(function(N){R.push(N),D.delete(N.getKey())})}));var j=S.toSeq().takeUntil(function(D){return D===i}),T=S.toSeq().skipUntil(function(D){return D===i}).skip(1),A=R.map(function(D){return[D.getKey(),D]}),M=OrderedMap$1();if(o==="before"){var P=s.getBlockBefore(x);!P||P.getKey()!==a.getKey()||invariant$i(!1),M=j.concat([].concat(A,[[x,i]]),T).toOrderedMap()}else if(o==="after"){var L=s.getBlockAfter(x);!L||L.getKey()!==y||invariant$i(!1),M=j.concat([[x,i]].concat(A),T).toOrderedMap()}return s.merge({blockMap:updateBlockMapLinks(M,a,i,o,E),selectionBefore:s.getSelectionAfter(),selectionAfter:s.getSelectionAfter().merge({anchorKey:y,focusKey:y})})},moveBlockInContentState_1=moveBlockInContentState$1;function _objectSpread$6(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$g(r,o,a[o])})}return r}function _defineProperty$g(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var BlockMapBuilder$2=BlockMapBuilder_1,CharacterMetadata$4=CharacterMetadata_1,ContentBlock$5=ContentBlock_1,ContentBlockNode$4=ContentBlockNode_1,DraftModifier$d=DraftModifier_1,EditorState$p=EditorState_1,generateRandomKey$6=generateRandomKey_1,gkx$6=gkx$8,Immutable$5=immutableExports,moveBlockInContentState=moveBlockInContentState_1,experimentalTreeDataSupport$5=gkx$6("draft_tree_data_support"),ContentBlockRecord$1=experimentalTreeDataSupport$5?ContentBlockNode$4:ContentBlock$5,List$5=Immutable$5.List,Repeat$1=Immutable$5.Repeat,AtomicBlockUtils$1={insertAtomicBlock:function(s,a,i){var o=s.getCurrentContent(),x=s.getSelection(),y=DraftModifier$d.removeRange(o,x,"backward"),_=y.getSelectionAfter(),E=DraftModifier$d.splitBlock(y,_),R=E.getSelectionAfter(),S=DraftModifier$d.setBlockType(E,R,"atomic"),j=CharacterMetadata$4.create({entity:a}),T={key:generateRandomKey$6(),type:"atomic",text:i,characterList:List$5(Repeat$1(j,i.length))},A={key:generateRandomKey$6(),type:"unstyled"};experimentalTreeDataSupport$5&&(T=_objectSpread$6({},T,{nextSibling:A.key}),A=_objectSpread$6({},A,{prevSibling:T.key}));var M=[new ContentBlockRecord$1(T),new ContentBlockRecord$1(A)],P=BlockMapBuilder$2.createFromArray(M),L=DraftModifier$d.replaceWithFragment(S,R,P),D=L.merge({selectionBefore:x,selectionAfter:L.getSelectionAfter().set("hasFocus",!0)});return EditorState$p.push(s,D,"insert-fragment")},moveAtomicBlock:function(s,a,i,o){var x=s.getCurrentContent(),y=s.getSelection(),_;if(o==="before"||o==="after"){var E=x.getBlockForKey(o==="before"?i.getStartKey():i.getEndKey());_=moveBlockInContentState(x,a,E,o)}else{var R=DraftModifier$d.removeRange(x,i,"backward"),S=R.getSelectionAfter(),j=R.getBlockForKey(S.getFocusKey());if(S.getStartOffset()===0)_=moveBlockInContentState(R,a,j,"before");else if(S.getEndOffset()===j.getLength())_=moveBlockInContentState(R,a,j,"after");else{var T=DraftModifier$d.splitBlock(R,S),A=T.getSelectionAfter(),M=T.getBlockForKey(A.getFocusKey());_=moveBlockInContentState(T,a,M,"before")}}var P=_.merge({selectionBefore:y,selectionAfter:_.getSelectionAfter().set("hasFocus",!0)});return EditorState$p.push(s,P,"move-block")}},AtomicBlockUtils_1=AtomicBlockUtils$1;function _defineProperty$f(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var Immutable$4=immutableExports,List$4=Immutable$4.List,DELIMITER=".",CompositeDraftDecorator$1=function(){function r(a){_defineProperty$f(this,"_decorators",void 0),this._decorators=a.slice()}var s=r.prototype;return s.getDecorations=function(i,o){var x=Array(i.getText().length).fill(null);return this._decorators.forEach(function(y,_){var E=0,R=y.strategy,S=function(T,A){canOccupySlice(x,T,A)&&(occupySlice(x,T,A,_+DELIMITER+E),E++)};R(i,S,o)}),List$4(x)},s.getComponentForKey=function(i){var o=parseInt(i.split(DELIMITER)[0],10);return this._decorators[o].component},s.getPropsForKey=function(i){var o=parseInt(i.split(DELIMITER)[0],10);return this._decorators[o].props},r}();function canOccupySlice(r,s,a){for(var i=s;i<a;i++)if(r[i]!=null)return!1;return!0}function occupySlice(r,s,a,i){for(var o=s;o<a;o++)r[o]=i}var CompositeDraftDecorator_1=CompositeDraftDecorator$1;function cx$5(r){return typeof r=="object"?Object.keys(r).filter(function(s){return r[s]}).map(replace).join(" "):Array.prototype.map.call(arguments,replace).join(" ")}function replace(r){return r.replace(/\//g,"-")}var cx_1=cx$5,React$5=reactExports,cx$4=cx_1,_require$4=immutableExports,Map$4=_require$4.Map,UL_WRAP=React$5.createElement("ul",{className:cx$4("public/DraftStyleDefault/ul")}),OL_WRAP=React$5.createElement("ol",{className:cx$4("public/DraftStyleDefault/ol")}),PRE_WRAP=React$5.createElement("pre",{className:cx$4("public/DraftStyleDefault/pre")}),DefaultDraftBlockRenderMap$3=Map$4({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:UL_WRAP},"ordered-list-item":{element:"li",wrapper:OL_WRAP},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:PRE_WRAP},unstyled:{element:"div",aliasedElements:["p"]}}),DefaultDraftBlockRenderMap_1=DefaultDraftBlockRenderMap$3,DefaultDraftInlineStyle$2={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}},uaParser={exports:{}};(function(r,s){(function(a,i){var o="0.7.33",x="",y="?",_="function",E="undefined",R="object",S="string",j="major",T="model",A="name",M="type",P="vendor",L="version",D="architecture",O="console",B="mobile",N="tablet",F="smarttv",W="wearable",V="embedded",U=350,G="Amazon",oe="Apple",X="ASUS",ee="BlackBerry",ae="Browser",ie="Chrome",se="Edge",Q="Firefox",Z="Google",J="Huawei",te="LG",de="Microsoft",ce="Motorola",me="Opera",ve="Samsung",xe="Sharp",ge="Sony",be="Xiaomi",ye="Zebra",Ie="Facebook",Pe=function(Te,De){var Le={};for(var Fe in Te)De[Fe]&&De[Fe].length%2===0?Le[Fe]=De[Fe].concat(Te[Fe]):Le[Fe]=Te[Fe];return Le},we=function(Te){for(var De={},Le=0;Le<Te.length;Le++)De[Te[Le].toUpperCase()]=Te[Le];return De},Re=function(Te,De){return typeof Te===S?Se(De).indexOf(Se(Te))!==-1:!1},Se=function(Te){return Te.toLowerCase()},Ee=function(Te){return typeof Te===S?Te.replace(/[^\d\.]/g,x).split(".")[0]:i},Ce=function(Te,De){if(typeof Te===S)return Te=Te.replace(/^\s\s*/,x),typeof De===E?Te:Te.substring(0,U)},he=function(Te,De){for(var Le=0,Fe,Ke,nt,qe,Je,Qe;Le<De.length&&!Je;){var Wt=De[Le],ct=De[Le+1];for(Fe=Ke=0;Fe<Wt.length&&!Je;)if(Je=Wt[Fe++].exec(Te),Je)for(nt=0;nt<ct.length;nt++)Qe=Je[++Ke],qe=ct[nt],typeof qe===R&&qe.length>0?qe.length===2?typeof qe[1]==_?this[qe[0]]=qe[1].call(this,Qe):this[qe[0]]=qe[1]:qe.length===3?typeof qe[1]===_&&!(qe[1].exec&&qe[1].test)?this[qe[0]]=Qe?qe[1].call(this,Qe,qe[2]):i:this[qe[0]]=Qe?Qe.replace(qe[1],qe[2]):i:qe.length===4&&(this[qe[0]]=Qe?qe[3].call(this,Qe.replace(qe[1],qe[2])):i):this[qe]=Qe||i;Le+=2}},Ae=function(Te,De){for(var Le in De)if(typeof De[Le]===R&&De[Le].length>0){for(var Fe=0;Fe<De[Le].length;Fe++)if(Re(De[Le][Fe],Te))return Le===y?i:Le}else if(Re(De[Le],Te))return Le===y?i:Le;return Te},Ne={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Be={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Oe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[L,[A,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[L,[A,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[A,L],[/opios[\/ ]+([\w\.]+)/i],[L,[A,me+" Mini"]],[/\bopr\/([\w\.]+)/i],[L,[A,me]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[A,L],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[L,[A,"UC"+ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[L,[A,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[L,[A,"WeChat"]],[/konqueror\/([\w\.]+)/i],[L,[A,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[L,[A,"IE"]],[/yabrowser\/([\w\.]+)/i],[L,[A,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[A,/(.+)/,"$1 Secure "+ae],L],[/\bfocus\/([\w\.]+)/i],[L,[A,Q+" Focus"]],[/\bopt\/([\w\.]+)/i],[L,[A,me+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[L,[A,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[L,[A,"Dolphin"]],[/coast\/([\w\.]+)/i],[L,[A,me+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[L,[A,"MIUI "+ae]],[/fxios\/([-\w\.]+)/i],[L,[A,Q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[A,"360 "+ae]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[A,/(.+)/,"$1 "+ae],L],[/(comodo_dragon)\/([\w\.]+)/i],[[A,/_/g," "],L],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[A,L],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[A],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[A,Ie],L],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[A,L],[/\bgsa\/([\w\.]+) .*safari\//i],[L,[A,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[L,[A,ie+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[A,ie+" WebView"],L],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[L,[A,"Android "+ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[A,L],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[L,[A,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[L,A],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[A,[L,Ae,Ne]],[/(webkit|khtml)\/([\w\.]+)/i],[A,L],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[A,"Netscape"],L],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[L,[A,Q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[A,L],[/(cobalt)\/([\w\.]+)/i],[A,[L,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[D,"amd64"]],[/(ia32(?=;))/i],[[D,Se]],[/((?:i[346]|x)86)[;\)]/i],[[D,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[D,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[D,"armhf"]],[/windows (ce|mobile); ppc;/i],[[D,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[D,/ower/,x,Se]],[/(sun4\w)[;\)]/i],[[D,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[D,Se]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[P,ve],[M,N]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[P,ve],[M,B]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[P,oe],[M,B]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[P,oe],[M,N]],[/(macintosh);/i],[T,[P,oe]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[P,J],[M,N]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[P,J],[M,B]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[P,be],[M,B]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[P,be],[M,N]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[P,"OPPO"],[M,B]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[P,"Vivo"],[M,B]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[P,"Realme"],[M,B]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[P,ce],[M,B]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[P,ce],[M,N]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[P,te],[M,N]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[P,te],[M,B]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[P,"Lenovo"],[M,N]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[P,"Nokia"],[M,B]],[/(pixel c)\b/i],[T,[P,Z],[M,N]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[P,Z],[M,B]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[P,ge],[M,B]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[P,ge],[M,N]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[P,"OnePlus"],[M,B]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[P,G],[M,N]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[P,G],[M,B]],[/(playbook);[-\w\),; ]+(rim)/i],[T,P,[M,N]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[P,ee],[M,B]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[P,X],[M,N]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[P,X],[M,B]],[/(nexus 9)/i],[T,[P,"HTC"],[M,N]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[T,/_/g," "],[M,B]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[P,"Acer"],[M,N]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[P,"Meizu"],[M,B]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[P,xe],[M,B]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,T,[M,B]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[P,T,[M,N]],[/(surface duo)/i],[T,[P,de],[M,N]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[P,"Fairphone"],[M,B]],[/(u304aa)/i],[T,[P,"AT&T"],[M,B]],[/\bsie-(\w*)/i],[T,[P,"Siemens"],[M,B]],[/\b(rct\w+) b/i],[T,[P,"RCA"],[M,N]],[/\b(venue[\d ]{2,7}) b/i],[T,[P,"Dell"],[M,N]],[/\b(q(?:mv|ta)\w+) b/i],[T,[P,"Verizon"],[M,N]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[P,"Barnes & Noble"],[M,N]],[/\b(tm\d{3}\w+) b/i],[T,[P,"NuVision"],[M,N]],[/\b(k88) b/i],[T,[P,"ZTE"],[M,N]],[/\b(nx\d{3}j) b/i],[T,[P,"ZTE"],[M,B]],[/\b(gen\d{3}) b.+49h/i],[T,[P,"Swiss"],[M,B]],[/\b(zur\d{3}) b/i],[T,[P,"Swiss"],[M,N]],[/\b((zeki)?tb.*\b) b/i],[T,[P,"Zeki"],[M,N]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[P,"Dragon Touch"],T,[M,N]],[/\b(ns-?\w{0,9}) b/i],[T,[P,"Insignia"],[M,N]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[P,"NextBook"],[M,N]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[P,"Voice"],T,[M,B]],[/\b(lvtel\-)?(v1[12]) b/i],[[P,"LvTel"],T,[M,B]],[/\b(ph-1) /i],[T,[P,"Essential"],[M,B]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[P,"Envizen"],[M,N]],[/\b(trio[-\w\. ]+) b/i],[T,[P,"MachSpeed"],[M,N]],[/\btu_(1491) b/i],[T,[P,"Rotor"],[M,N]],[/(shield[\w ]+) b/i],[T,[P,"Nvidia"],[M,N]],[/(sprint) (\w+)/i],[P,T,[M,B]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[P,de],[M,B]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[P,ye],[M,N]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[P,ye],[M,B]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[P,T,[M,O]],[/droid.+; (shield) bui/i],[T,[P,"Nvidia"],[M,O]],[/(playstation [345portablevi]+)/i],[T,[P,ge],[M,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[P,de],[M,O]],[/smart-tv.+(samsung)/i],[P,[M,F]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[P,ve],[M,F]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[P,te],[M,F]],[/(apple) ?tv/i],[P,[T,oe+" TV"],[M,F]],[/crkey/i],[[T,ie+"cast"],[P,Z],[M,F]],[/droid.+aft(\w)( bui|\))/i],[T,[P,G],[M,F]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[P,xe],[M,F]],[/(bravia[\w ]+)( bui|\))/i],[T,[P,ge],[M,F]],[/(mitv-\w{5}) bui/i],[T,[P,be],[M,F]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[P,Ce],[T,Ce],[M,F]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[M,F]],[/((pebble))app/i],[P,T,[M,W]],[/droid.+; (glass) \d/i],[T,[P,Z],[M,W]],[/droid.+; (wt63?0{2,3})\)/i],[T,[P,ye],[M,W]],[/(quest( 2)?)/i],[T,[P,Ie],[M,W]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[P,[M,V]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[M,B]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[M,N]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[M,N]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[M,B]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[P,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[L,[A,se+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[L,[A,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[A,L],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[L,A]],os:[[/microsoft (windows) (vista|xp)/i],[A,L],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[A,[L,Ae,Be]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[A,"Windows"],[L,Ae,Be]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[L,/_/g,"."],[A,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[A,"Mac OS"],[L,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[L,A],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[A,L],[/\(bb(10);/i],[L,[A,ee]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[L,[A,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[L,[A,Q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[L,[A,"webOS"]],[/crkey\/([\d\.]+)/i],[L,[A,ie+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[A,"Chromium OS"],L],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[A,L],[/(sunos) ?([\w\.\d]*)/i],[[A,"Solaris"],L],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[A,L]]},Ue=function(Te,De){if(typeof Te===R&&(De=Te,Te=i),!(this instanceof Ue))return new Ue(Te,De).getResult();var Le=Te||(typeof a!==E&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:x),Fe=De?Pe(Oe,De):Oe;return this.getBrowser=function(){var Ke={};return Ke[A]=i,Ke[L]=i,he.call(Ke,Le,Fe.browser),Ke.major=Ee(Ke.version),Ke},this.getCPU=function(){var Ke={};return Ke[D]=i,he.call(Ke,Le,Fe.cpu),Ke},this.getDevice=function(){var Ke={};return Ke[P]=i,Ke[T]=i,Ke[M]=i,he.call(Ke,Le,Fe.device),Ke},this.getEngine=function(){var Ke={};return Ke[A]=i,Ke[L]=i,he.call(Ke,Le,Fe.engine),Ke},this.getOS=function(){var Ke={};return Ke[A]=i,Ke[L]=i,he.call(Ke,Le,Fe.os),Ke},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Le},this.setUA=function(Ke){return Le=typeof Ke===S&&Ke.length>U?Ce(Ke,U):Ke,this},this.setUA(Le),this};Ue.VERSION=o,Ue.BROWSER=we([A,L,j]),Ue.CPU=we([D]),Ue.DEVICE=we([T,P,M,O,B,F,N,W,V]),Ue.ENGINE=Ue.OS=we([A,L]),r.exports&&(s=r.exports=Ue),s.UAParser=Ue;var Ve=typeof a!==E&&(a.jQuery||a.Zepto);if(Ve&&!Ve.ua){var We=new Ue;Ve.ua=We.getResult(),Ve.ua.get=function(){return We.getUA()},Ve.ua.set=function(Te){We.setUA(Te);var De=We.getResult();for(var Le in De)Ve.ua[Le]=De[Le]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports,UAParser=uaParserExports,UNKNOWN="Unknown",PLATFORM_MAP={"Mac OS":"Mac OS X"};function convertPlatformName(r){return PLATFORM_MAP[r]||r}function getBrowserVersion(r){if(!r)return{major:"",minor:""};var s=r.split(".");return{major:s[0],minor:s[1]}}var parser=new UAParser,results=parser.getResult(),browserVersionData=getBrowserVersion(results.browser.version),uaData={browserArchitecture:results.cpu.architecture||UNKNOWN,browserFullVersion:results.browser.version||UNKNOWN,browserMinorVersion:browserVersionData.minor||UNKNOWN,browserName:results.browser.name||UNKNOWN,browserVersion:results.browser.major||UNKNOWN,deviceName:results.device.model||UNKNOWN,engineName:results.engine.name||UNKNOWN,engineVersion:results.engine.version||UNKNOWN,platformArchitecture:results.cpu.architecture||UNKNOWN,platformName:convertPlatformName(results.os.name)||UNKNOWN,platformVersion:results.os.version||UNKNOWN,platformFullVersion:results.os.version||UNKNOWN},UserAgentData$1=uaData,invariant$h=invariant_1,componentRegex=/\./,orRegex=/\|\|/,rangeRegex=/\s+\-\s+/,modifierRegex=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,numericRegex=/^(\d*)(.*)/;function checkOrExpression(r,s){var a=r.split(orRegex);return a.length>1?a.some(function(i){return VersionRange$1.contains(i,s)}):(r=a[0].trim(),checkRangeExpression(r,s))}function checkRangeExpression(r,s){var a=r.split(rangeRegex);if(a.length>0&&a.length<=2||invariant$h(!1),a.length===1)return checkSimpleExpression(a[0],s);var i=a[0],o=a[1];return isSimpleVersion(i)&&isSimpleVersion(o)||invariant$h(!1),checkSimpleExpression(">="+i,s)&&checkSimpleExpression("<="+o,s)}function checkSimpleExpression(r,s){if(r=r.trim(),r==="")return!0;var a=s.split(componentRegex),i=getModifierAndComponents(r),o=i.modifier,x=i.rangeComponents;switch(o){case"<":return checkLessThan(a,x);case"<=":return checkLessThanOrEqual(a,x);case">=":return checkGreaterThanOrEqual(a,x);case">":return checkGreaterThan(a,x);case"~":case"~>":return checkApproximateVersion(a,x);default:return checkEqual(a,x)}}function checkLessThan(r,s){return compareComponents(r,s)===-1}function checkLessThanOrEqual(r,s){var a=compareComponents(r,s);return a===-1||a===0}function checkEqual(r,s){return compareComponents(r,s)===0}function checkGreaterThanOrEqual(r,s){var a=compareComponents(r,s);return a===1||a===0}function checkGreaterThan(r,s){return compareComponents(r,s)===1}function checkApproximateVersion(r,s){var a=s.slice(),i=s.slice();i.length>1&&i.pop();var o=i.length-1,x=parseInt(i[o],10);return isNumber(x)&&(i[o]=x+1+""),checkGreaterThanOrEqual(r,a)&&checkLessThan(r,i)}function getModifierAndComponents(r){var s=r.split(componentRegex),a=s[0].match(modifierRegex);return a||invariant$h(!1),{modifier:a[1],rangeComponents:[a[2]].concat(s.slice(1))}}function isNumber(r){return!isNaN(r)&&isFinite(r)}function isSimpleVersion(r){return!getModifierAndComponents(r).modifier}function zeroPad(r,s){for(var a=r.length;a<s;a++)r[a]="0"}function normalizeVersions(r,s){r=r.slice(),s=s.slice(),zeroPad(r,s.length);for(var a=0;a<s.length;a++){var i=s[a].match(/^[x*]$/i);if(i&&(s[a]=r[a]="0",i[0]==="*"&&a===s.length-1))for(var o=a;o<r.length;o++)r[o]="0"}return zeroPad(s,r.length),[r,s]}function compareNumeric(r,s){var a=r.match(numericRegex)[1],i=s.match(numericRegex)[1],o=parseInt(a,10),x=parseInt(i,10);return isNumber(o)&&isNumber(x)&&o!==x?compare$d(o,x):compare$d(r,s)}function compare$d(r,s){return typeof r!=typeof s&&invariant$h(!1),r>s?1:r<s?-1:0}function compareComponents(r,s){for(var a=normalizeVersions(r,s),i=a[0],o=a[1],x=0;x<o.length;x++){var y=compareNumeric(i[x],o[x]);if(y)return y}return 0}var VersionRange$1={contains:function(s,a){return checkOrExpression(s.trim(),a.trim())}},VersionRange_1=VersionRange$1,hasOwnProperty=Object.prototype.hasOwnProperty;function mapObject$1(r,s,a){if(!r)return null;var i={};for(var o in r)hasOwnProperty.call(r,o)&&(i[o]=s.call(a,r[o],o,r));return i}var mapObject_1=mapObject$1;function memoizeStringOnly$1(r){var s={};return function(a){return s.hasOwnProperty(a)||(s[a]=r.call(this,a)),s[a]}}var memoizeStringOnly_1=memoizeStringOnly$1,UserAgentData=UserAgentData$1,VersionRange=VersionRange_1,mapObject=mapObject_1,memoizeStringOnly=memoizeStringOnly_1;function compare$c(r,s,a,i){if(r===a)return!0;if(!a.startsWith(r))return!1;var o=a.slice(r.length);return s?(o=i?i(o):o,VersionRange.contains(o,s)):!1}function normalizePlatformVersion(r){return UserAgentData.platformName==="Windows"?r.replace(/^\s*NT/,""):r}var UserAgent$e={isBrowser:function(s){return compare$c(UserAgentData.browserName,UserAgentData.browserFullVersion,s)},isBrowserArchitecture:function(s){return compare$c(UserAgentData.browserArchitecture,null,s)},isDevice:function(s){return compare$c(UserAgentData.deviceName,null,s)},isEngine:function(s){return compare$c(UserAgentData.engineName,UserAgentData.engineVersion,s)},isPlatform:function(s){return compare$c(UserAgentData.platformName,UserAgentData.platformFullVersion,s,normalizePlatformVersion)},isPlatformArchitecture:function(s){return compare$c(UserAgentData.platformArchitecture,null,s)}},UserAgent_1=mapObject(UserAgent$e,memoizeStringOnly);function getCorrectDocumentFromNode$4(r){return!r||!r.ownerDocument?document:r.ownerDocument}var getCorrectDocumentFromNode_1=getCorrectDocumentFromNode$4;function isElement$7(r){return!r||!r.ownerDocument?!1:r.nodeType===Node.ELEMENT_NODE}var isElement_1=isElement$7,isElement$6=isElement_1;function getSelectionOffsetKeyForNode$2(r){if(isElement$6(r)){var s=r,a=s.getAttribute("data-offset-key");if(a)return a;for(var i=0;i<s.childNodes.length;i++){var o=getSelectionOffsetKeyForNode$2(s.childNodes[i]);if(o)return o}}return null}var getSelectionOffsetKeyForNode_1=getSelectionOffsetKeyForNode$2,getCorrectDocumentFromNode$3=getCorrectDocumentFromNode_1,getSelectionOffsetKeyForNode$1=getSelectionOffsetKeyForNode_1;function findAncestorOffsetKey$4(r){for(var s=r;s&&s!==getCorrectDocumentFromNode$3(r).documentElement;){var a=getSelectionOffsetKeyForNode$1(s);if(a!=null)return a;s=s.parentNode}return null}var findAncestorOffsetKey_1=findAncestorOffsetKey$4;function getWindowForNode$2(r){return!r||!r.ownerDocument||!r.ownerDocument.defaultView?window:r.ownerDocument.defaultView}var getWindowForNode_1=getWindowForNode$2;function _defineProperty$e(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var UserAgent$d=UserAgent_1,findAncestorOffsetKey$3=findAncestorOffsetKey_1,getWindowForNode$1=getWindowForNode_1,Immutable$3=immutableExports,invariant$g=invariant_1,nullthrows$a=nullthrows_1,Map$3=Immutable$3.Map,DOM_OBSERVER_OPTIONS={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},USE_CHAR_DATA=UserAgent$d.isBrowser("IE <= 11"),DOMObserver$1=function(){function r(a){var i=this;_defineProperty$e(this,"observer",void 0),_defineProperty$e(this,"container",void 0),_defineProperty$e(this,"mutations",void 0),_defineProperty$e(this,"onCharData",void 0),this.container=a,this.mutations=Map$3();var o=getWindowForNode$1(a);o.MutationObserver&&!USE_CHAR_DATA?this.observer=new o.MutationObserver(function(x){return i.registerMutations(x)}):this.onCharData=function(x){x.target instanceof Node||invariant$g(!1),i.registerMutation({type:"characterData",target:x.target})}}var s=r.prototype;return s.start=function(){this.observer?this.observer.observe(this.container,DOM_OBSERVER_OPTIONS):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},s.stopAndFlushMutations=function(){var i=this.observer;i?(this.registerMutations(i.takeRecords()),i.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var o=this.mutations;return this.mutations=Map$3(),o},s.registerMutations=function(i){for(var o=0;o<i.length;o++)this.registerMutation(i[o])},s.getMutationTextContent=function(i){var o=i.type,x=i.target,y=i.removedNodes;if(o==="characterData"){if(x.textContent!=="")return USE_CHAR_DATA?x.textContent.replace(`
`,""):x.textContent}else if(o==="childList"){if(y&&y.length)return"";if(x.textContent!=="")return x.textContent}return null},s.registerMutation=function(i){var o=this.getMutationTextContent(i);if(o!=null){var x=nullthrows$a(findAncestorOffsetKey$3(i.target));this.mutations=this.mutations.set(x,o)}},r}(),DOMObserver_1=DOMObserver$1,KEY_DELIMITER="-",DraftOffsetKey$4={encode:function(s,a,i){return s+KEY_DELIMITER+a+KEY_DELIMITER+i},decode:function(s){var a=s.split(KEY_DELIMITER).reverse(),i=a[0],o=a[1],x=a.slice(2);return{blockKey:x.reverse().join(KEY_DELIMITER),decoratorKey:parseInt(o,10),leafKey:parseInt(i,10)}}},DraftOffsetKey_1=DraftOffsetKey$4,Keys$4={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},DraftJsDebugLogging$2={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};function isHTMLElement$6(r){return!r||!r.ownerDocument?!1:r.ownerDocument.defaultView?r instanceof r.ownerDocument.defaultView.HTMLElement:r instanceof HTMLElement}var isHTMLElement_1=isHTMLElement$6,invariant$f=invariant_1,isHTMLElement$5=isHTMLElement_1;function getContentEditableContainer$2(r){var s=r.editorContainer;s||invariant$f(!1),isHTMLElement$5(s.firstChild)||invariant$f(!1);var a=s.firstChild;return a}var getContentEditableContainer_1=getContentEditableContainer$2,DraftOffsetKey$3=DraftOffsetKey_1,nullthrows$9=nullthrows_1;function getUpdatedSelectionState$2(r,s,a,i,o){var x=nullthrows$9(r.getSelection());if(!s||!i)return x;var y=DraftOffsetKey$3.decode(s),_=y.blockKey,E=r.getBlockTree(_),R=E&&E.getIn([y.decoratorKey,"leaves",y.leafKey]),S=DraftOffsetKey$3.decode(i),j=S.blockKey,T=r.getBlockTree(j),A=T&&T.getIn([S.decoratorKey,"leaves",S.leafKey]);if(!R||!A)return x;var M=R.get("start"),P=A.get("start"),L=R?M+a:null,D=A?P+o:null,O=x.getAnchorKey()===_&&x.getAnchorOffset()===L&&x.getFocusKey()===j&&x.getFocusOffset()===D;if(O)return x;var B=!1;if(_===j){var N=R.get("end"),F=A.get("end");P===M&&F===N?B=o<a:B=P<M}else{var W=r.getCurrentContent().getBlockMap().keySeq().skipUntil(function(V){return V===_||V===j}).first();B=W===j}return x.merge({anchorKey:_,anchorOffset:L,focusKey:j,focusOffset:D,isBackward:B})}var getUpdatedSelectionState_1=getUpdatedSelectionState$2,findAncestorOffsetKey$2=findAncestorOffsetKey_1,getSelectionOffsetKeyForNode=getSelectionOffsetKeyForNode_1,getUpdatedSelectionState$1=getUpdatedSelectionState_1,invariant$e=invariant_1,isElement$5=isElement_1,nullthrows$8=nullthrows_1;function getDraftEditorSelectionWithNodes$2(r,s,a,i,o,x){var y=a.nodeType===Node.TEXT_NODE,_=o.nodeType===Node.TEXT_NODE;if(y&&_)return{selectionState:getUpdatedSelectionState$1(r,nullthrows$8(findAncestorOffsetKey$2(a)),i,nullthrows$8(findAncestorOffsetKey$2(o)),x),needsRecovery:!1};var E=null,R=null,S=!0;return y?(E={key:nullthrows$8(findAncestorOffsetKey$2(a)),offset:i},R=getPointForNonTextNode(s,o,x)):_?(R={key:nullthrows$8(findAncestorOffsetKey$2(o)),offset:x},E=getPointForNonTextNode(s,a,i)):(E=getPointForNonTextNode(s,a,i),R=getPointForNonTextNode(s,o,x),a===o&&i===x&&(S=!!a.firstChild&&a.firstChild.nodeName!=="BR")),{selectionState:getUpdatedSelectionState$1(r,E.key,E.offset,R.key,R.offset),needsRecovery:S}}function getFirstLeaf(r){for(;r.firstChild&&(isElement$5(r.firstChild)&&r.firstChild.getAttribute("data-blocks")==="true"||getSelectionOffsetKeyForNode(r.firstChild));)r=r.firstChild;return r}function getLastLeaf(r){for(;r.lastChild&&(isElement$5(r.lastChild)&&r.lastChild.getAttribute("data-blocks")==="true"||getSelectionOffsetKeyForNode(r.lastChild));)r=r.lastChild;return r}function getPointForNonTextNode(r,s,a){var i=s,o=findAncestorOffsetKey$2(i);if(o!=null||r&&(r===i||r.firstChild===i)||invariant$e(!1),r===i){i=i.firstChild,isElement$5(i)||invariant$e(!1);var x=i;i=x,i.getAttribute("data-contents")!=="true"&&invariant$e(!1),a>0&&(a=i.childNodes.length)}if(a===0){var y=null;if(o!=null)y=o;else{var _=getFirstLeaf(i);y=nullthrows$8(getSelectionOffsetKeyForNode(_))}return{key:y,offset:0}}var E=i.childNodes[a-1],R=null,S=null;if(!getSelectionOffsetKeyForNode(E))R=nullthrows$8(o),S=getTextContentLength(E);else{var j=getLastLeaf(E);R=nullthrows$8(getSelectionOffsetKeyForNode(j)),S=getTextContentLength(j)}return{key:R,offset:S}}function getTextContentLength(r){var s=r.textContent;return s===`
`?0:s.length}var getDraftEditorSelectionWithNodes_1=getDraftEditorSelectionWithNodes$2,getDraftEditorSelectionWithNodes$1=getDraftEditorSelectionWithNodes_1;function getDraftEditorSelection$2(r,s){var a=s.ownerDocument.defaultView.getSelection(),i=a.anchorNode,o=a.anchorOffset,x=a.focusNode,y=a.focusOffset,_=a.rangeCount;return _===0||i==null||x==null?{selectionState:r.getSelection().set("hasFocus",!1),needsRecovery:!1}:getDraftEditorSelectionWithNodes$1(r,s,i,o,x,y)}var getDraftEditorSelection_1=getDraftEditorSelection$2,DraftJsDebugLogging$1=DraftJsDebugLogging$2,EditorState$o=EditorState_1,getContentEditableContainer$1=getContentEditableContainer_1,getDraftEditorSelection$1=getDraftEditorSelection_1;function editOnSelect$1(r){if(r._blockSelectEvents||r._latestEditorState!==r.props.editorState){if(r._blockSelectEvents){var s=r.props.editorState,a=s.getSelection();DraftJsDebugLogging$1.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(a.toJS())})}return}var i=r.props.editorState,o=getDraftEditorSelection$1(i,getContentEditableContainer$1(r)),x=o.selectionState;x!==i.getSelection()&&(o.needsRecovery?i=EditorState$o.forceSelection(i,x):i=EditorState$o.acceptSelection(i,x),r.update(i))}var editOnSelect_1=editOnSelect$1;function notEmptyKey$2(r){return r!=null&&r!=""}var draftKeyUtils={notEmptyKey:notEmptyKey$2},_require$3=draftKeyUtils,notEmptyKey$1=_require$3.notEmptyKey;function getEntityKeyForSelection$3(r,s){var a;if(s.isCollapsed()){var i=s.getAnchorKey(),o=s.getAnchorOffset();return o>0?(a=r.getBlockForKey(i).getEntityAt(o-1),a!==r.getBlockForKey(i).getEntityAt(o)?null:filterKey(r.getEntityMap(),a)):null}var x=s.getStartKey(),y=s.getStartOffset(),_=r.getBlockForKey(x);return a=y===_.getLength()?null:_.getEntityAt(y),filterKey(r.getEntityMap(),a)}function filterKey(r,s){if(notEmptyKey$1(s)){var a=r.__get(s);return a.getMutability()==="MUTABLE"?s:null}return null}var getEntityKeyForSelection_1=getEntityKeyForSelection$3,DOMObserver=DOMObserver_1,DraftModifier$c=DraftModifier_1,DraftOffsetKey$2=DraftOffsetKey_1,EditorState$n=EditorState_1,Keys$3=Keys$4,UserAgent$c=UserAgent_1,editOnSelect=editOnSelect_1,getContentEditableContainer=getContentEditableContainer_1,getDraftEditorSelection=getDraftEditorSelection_1,getEntityKeyForSelection$2=getEntityKeyForSelection_1,nullthrows$7=nullthrows_1,isIE$2=UserAgent$c.isBrowser("IE"),RESOLVE_DELAY=20,resolved=!1,stillComposing=!1,domObserver=null;function startDOMObserver(r){domObserver||(domObserver=new DOMObserver(getContentEditableContainer(r)),domObserver.start())}var DraftEditorCompositionHandler$1={onCompositionStart:function(s){stillComposing=!0,startDOMObserver(s)},onCompositionEnd:function(s){resolved=!1,stillComposing=!1,setTimeout(function(){resolved||DraftEditorCompositionHandler$1.resolveComposition(s)},RESOLVE_DELAY)},onSelect:editOnSelect,onKeyDown:function(s,a){if(!stillComposing){DraftEditorCompositionHandler$1.resolveComposition(s),s._onKeyDown(a);return}(a.which===Keys$3.RIGHT||a.which===Keys$3.LEFT)&&a.preventDefault()},onKeyPress:function(s,a){a.which===Keys$3.RETURN&&a.preventDefault()},resolveComposition:function(s){if(!stillComposing){var a=nullthrows$7(domObserver).stopAndFlushMutations();domObserver=null,resolved=!0;var i=EditorState$n.set(s._latestEditorState,{inCompositionMode:!1});if(s.exitCurrentMode(),!a.size){s.update(i);return}var o=i.getCurrentContent();a.forEach(function(E,R){var S=DraftOffsetKey$2.decode(R),j=S.blockKey,T=S.decoratorKey,A=S.leafKey,M=i.getBlockTree(j).getIn([T,"leaves",A]),P=M.start,L=M.end,D=i.getSelection().merge({anchorKey:j,focusKey:j,anchorOffset:P,focusOffset:L,isBackward:!1}),O=getEntityKeyForSelection$2(o,D),B=o.getBlockForKey(j).getInlineStyleAt(P);o=DraftModifier$c.replaceText(o,D,E,B,O),i=EditorState$n.set(i,{currentContent:o})});var x=getDraftEditorSelection(i,getContentEditableContainer(s)),y=x.selectionState;s.restoreEditorDOM();var _=isIE$2?EditorState$n.forceSelection(i,y):EditorState$n.acceptSelection(i,y);s.update(EditorState$n.push(_,o,"insert-characters"))}}},DraftEditorCompositionHandler_1=DraftEditorCompositionHandler$1,DraftEditorDecoratedLeaves_react,hasRequiredDraftEditorDecoratedLeaves_react;function requireDraftEditorDecoratedLeaves_react(){if(hasRequiredDraftEditorDecoratedLeaves_react)return DraftEditorDecoratedLeaves_react;hasRequiredDraftEditorDecoratedLeaves_react=1;var r=objectAssign;function s(){return s=r||function(E){for(var R=1;R<arguments.length;R++){var S=arguments[R];for(var j in S)Object.prototype.hasOwnProperty.call(S,j)&&(E[j]=S[j])}return E},s.apply(this,arguments)}function a(E,R){E.prototype=Object.create(R.prototype),E.prototype.constructor=E,E.__proto__=R}var i=DraftOffsetKey_1,o=reactExports,x=UnicodeBidi_1,y=UnicodeBidiDirection_1,_=function(E){a(R,E);function R(){return E.apply(this,arguments)||this}var S=R.prototype;return S.render=function(){var T=this.props,A=T.block,M=T.children,P=T.contentState,L=T.decorator,D=T.decoratorKey,O=T.direction,B=T.leafSet,N=T.text,F=A.getKey(),W=B.get("leaves"),V=L.getComponentForKey(D),U=L.getPropsForKey(D),G=i.encode(F,parseInt(D,10),0),oe=N.slice(W.first().get("start"),W.last().get("end")),X=y.getHTMLDirIfDifferent(x.getDirection(oe),O);return o.createElement(V,s({},U,{contentState:P,decoratedText:oe,dir:X,key:G,entityKey:A.getEntityAt(B.get("start")),offsetKey:G}),M)},R}(o.Component);return DraftEditorDecoratedLeaves_react=_,DraftEditorDecoratedLeaves_react}function _assertThisInitialized$3(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _inheritsLoose$5(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}function _defineProperty$d(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var React$4=reactExports,UserAgent$b=UserAgent_1,invariant$d=invariant_1,isElement$4=isElement_1,useNewlineChar=UserAgent$b.isBrowser("IE <= 11");function isNewline(r){return useNewlineChar?r.textContent===`
`:r.tagName==="BR"}var NEWLINE_A=function(s){return useNewlineChar?React$4.createElement("span",{key:"A","data-text":"true",ref:s},`
`):React$4.createElement("br",{key:"A","data-text":"true",ref:s})},NEWLINE_B=function(s){return useNewlineChar?React$4.createElement("span",{key:"B","data-text":"true",ref:s},`
`):React$4.createElement("br",{key:"B","data-text":"true",ref:s})},DraftEditorTextNode$1=function(r){_inheritsLoose$5(s,r);function s(i){var o;return o=r.call(this,i)||this,_defineProperty$d(_assertThisInitialized$3(o),"_forceFlag",void 0),_defineProperty$d(_assertThisInitialized$3(o),"_node",void 0),o._forceFlag=!1,o}var a=s.prototype;return a.shouldComponentUpdate=function(o){var x=this._node,y=o.children==="";isElement$4(x)||invariant$d(!1);var _=x;return y?!isNewline(_):_.textContent!==o.children},a.componentDidMount=function(){this._forceFlag=!this._forceFlag},a.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},a.render=function(){var o=this;return this.props.children===""?this._forceFlag?NEWLINE_A(function(x){return o._node=x}):NEWLINE_B(function(x){return o._node=x}):React$4.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(y){return o._node=y}},this.props.children)},s}(React$4.Component),DraftEditorTextNode_react=DraftEditorTextNode$1,isElement$3=isElement_1;function isHTMLBRElement$2(r){return!r||!r.ownerDocument?!1:isElement$3(r)&&r.nodeName==="BR"}var isHTMLBRElement_1=isHTMLBRElement$2,DraftEffects$2={initODS:function(){},handleExtensionCausedError:function(){}};function isNode$2(r){var s=r?r.ownerDocument||r:document,a=s.defaultView||window;return!!(r&&(typeof a.Node=="function"?r instanceof a.Node:typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"))}var isNode_1=isNode$2,isNode$1=isNode_1;function isTextNode$1(r){return isNode$1(r)&&r.nodeType==3}var isTextNode_1=isTextNode$1,isTextNode=isTextNode_1;function containsNode$3(r,s){return!r||!s?!1:r===s?!0:isTextNode(r)?!1:isTextNode(s)?containsNode$3(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1}var containsNode_1=containsNode$3;function getActiveElement$3(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var getActiveElement_1=getActiveElement$3,DraftEffects$1=DraftEffects$2,DraftJsDebugLogging=DraftJsDebugLogging$2,UserAgent$a=UserAgent_1,containsNode$2=containsNode_1,getActiveElement$2=getActiveElement_1,getCorrectDocumentFromNode$2=getCorrectDocumentFromNode_1,invariant$c=invariant_1,isElement$2=isElement_1,isIE$1=UserAgent$a.isBrowser("IE");function getAnonymizedDOM(r,s){if(!r)return"[empty]";var a=anonymizeTextWithin(r,s);if(a.nodeType===Node.TEXT_NODE)return a.textContent;isElement$2(a)||invariant$c(!1);var i=a;return i.outerHTML}function anonymizeTextWithin(r,s){var a=s!==void 0?s(r):[];if(r.nodeType===Node.TEXT_NODE){var i=r.textContent.length;return getCorrectDocumentFromNode$2(r).createTextNode("[text "+i+(a.length?" | "+a.join(", "):"")+"]")}var o=r.cloneNode();o.nodeType===1&&a.length&&o.setAttribute("data-labels",a.join(", "));for(var x=r.childNodes,y=0;y<x.length;y++)o.appendChild(anonymizeTextWithin(x[y],s));return o}function getAnonymizedEditorDOM(r,s){for(var a=r,i=a;a;){if(isElement$2(a)&&i.hasAttribute("contenteditable"))return getAnonymizedDOM(a,s);a=a.parentNode,i=a}return"Could not find contentEditable parent of node"}function getNodeLength$1(r){return r.nodeValue===null?r.childNodes.length:r.nodeValue.length}function setDraftEditorSelection$1(r,s,a,i,o){var x=getCorrectDocumentFromNode$2(s);if(containsNode$2(x.documentElement,s)){var y=x.defaultView.getSelection(),_=r.getAnchorKey(),E=r.getAnchorOffset(),R=r.getFocusKey(),S=r.getFocusOffset(),j=r.getIsBackward();if(!y.extend&&j){var T=_,A=E;_=R,E=S,R=T,S=A,j=!1}var M=_===a&&i<=E&&o>=E,P=R===a&&i<=S&&o>=S;if(M&&P){y.removeAllRanges(),addPointToSelection(y,s,E-i,r),addFocusToSelection(y,s,S-i,r);return}if(!j)M&&(y.removeAllRanges(),addPointToSelection(y,s,E-i,r)),P&&addFocusToSelection(y,s,S-i,r);else if(P&&(y.removeAllRanges(),addPointToSelection(y,s,S-i,r)),M){var L=y.focusNode,D=y.focusOffset;y.removeAllRanges(),addPointToSelection(y,s,E-i,r),addFocusToSelection(y,L,D,r)}}}function addFocusToSelection(r,s,a,i){var o=getActiveElement$2(),x=r.extend;if(x&&s!=null&&containsNode$2(o,s)){a>getNodeLength$1(s)&&DraftJsDebugLogging.logSelectionStateFailure({anonymizedDom:getAnonymizedEditorDOM(s),extraParams:JSON.stringify({offset:a}),selectionState:JSON.stringify(i.toJS())});var y=s===r.focusNode;try{r.rangeCount>0&&r.extend&&r.extend(s,a)}catch(E){throw DraftJsDebugLogging.logSelectionStateFailure({anonymizedDom:getAnonymizedEditorDOM(s,function(R){var S=[];return R===o&&S.push("active element"),R===r.anchorNode&&S.push("selection anchor node"),R===r.focusNode&&S.push("selection focus node"),S}),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:s===r.focusNode,nodeWasFocus:y,selectionRangeCount:r.rangeCount,selectionAnchorNodeName:r.anchorNode?r.anchorNode.nodeName:null,selectionAnchorOffset:r.anchorOffset,selectionFocusNodeName:r.focusNode?r.focusNode.nodeName:null,selectionFocusOffset:r.focusOffset,message:E?""+E:null,offset:a},null,2),selectionState:JSON.stringify(i.toJS(),null,2)}),E}}else if(s&&r.rangeCount>0){var _=r.getRangeAt(0);_.setEnd(s,a),r.addRange(_.cloneRange())}}function addPointToSelection(r,s,a,i){var o=getCorrectDocumentFromNode$2(s).createRange();if(a>getNodeLength$1(s)&&(DraftJsDebugLogging.logSelectionStateFailure({anonymizedDom:getAnonymizedEditorDOM(s),extraParams:JSON.stringify({offset:a}),selectionState:JSON.stringify(i.toJS())}),DraftEffects$1.handleExtensionCausedError()),o.setStart(s,a),isIE$1)try{r.addRange(o)}catch{}else r.addRange(o)}var setDraftEditorSelection_1={setDraftEditorSelection:setDraftEditorSelection$1,addFocusToSelection},_assign$2=objectAssign;function _assertThisInitialized$2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _inheritsLoose$4(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}function _defineProperty$c(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var DraftEditorTextNode=DraftEditorTextNode_react,React$3=reactExports,invariant$b=invariant_1,isHTMLBRElement$1=isHTMLBRElement_1,setDraftEditorSelection=setDraftEditorSelection_1.setDraftEditorSelection,DraftEditorLeaf$1=function(r){_inheritsLoose$4(s,r);function s(){for(var i,o=arguments.length,x=new Array(o),y=0;y<o;y++)x[y]=arguments[y];return i=r.call.apply(r,[this].concat(x))||this,_defineProperty$c(_assertThisInitialized$2(i),"leaf",void 0),i}var a=s.prototype;return a._setSelection=function(){var o=this.props.selection;if(!(o==null||!o.getHasFocus())){var x=this.props,y=x.block,_=x.start,E=x.text,R=y.getKey(),S=_+E.length;if(o.hasEdgeWithin(R,_,S)){var j=this.leaf;j||invariant$b(!1);var T=j.firstChild;T||invariant$b(!1);var A;T.nodeType===Node.TEXT_NODE?A=T:isHTMLBRElement$1(T)?A=j:(A=T.firstChild,A||invariant$b(!1)),setDraftEditorSelection(o,A,R,_,S)}}},a.shouldComponentUpdate=function(o){var x=this.leaf;x||invariant$b(!1);var y=x.textContent!==o.text||o.styleSet!==this.props.styleSet||o.forceSelection;return y},a.componentDidUpdate=function(){this._setSelection()},a.componentDidMount=function(){this._setSelection()},a.render=function(){var o=this,x=this.props.block,y=this.props.text;y.endsWith(`
`)&&this.props.isLast&&(y+=`
`);var _=this.props,E=_.customStyleMap,R=_.customStyleFn,S=_.offsetKey,j=_.styleSet,T=j.reduce(function(M,P){var L={},D=E[P];return D!==void 0&&M.textDecoration!==D.textDecoration&&(L.textDecoration=[M.textDecoration,D.textDecoration].join(" ").trim()),_assign$2(M,D,L)},{});if(R){var A=R(j,x);T=_assign$2(T,A)}return React$3.createElement("span",{"data-offset-key":S,ref:function(P){return o.leaf=P},style:T},React$3.createElement(DraftEditorTextNode,null,y))},s}(React$3.Component),DraftEditorLeaf_react=DraftEditorLeaf$1,DraftEditorNode_react,hasRequiredDraftEditorNode_react;function requireDraftEditorNode_react(){if(hasRequiredDraftEditorNode_react)return DraftEditorNode_react;hasRequiredDraftEditorNode_react=1;function r(E,R){E.prototype=Object.create(R.prototype),E.prototype.constructor=E,E.__proto__=R}var s=requireDraftEditorDecoratedLeaves_react(),a=DraftEditorLeaf_react,i=DraftOffsetKey_1,o=immutableExports,x=reactExports,y=cx_1;o.List;var _=function(E){r(R,E);function R(){return E.apply(this,arguments)||this}var S=R.prototype;return S.render=function(){var T=this.props,A=T.block,M=T.contentState,P=T.customStyleFn,L=T.customStyleMap,D=T.decorator,O=T.direction,B=T.forceSelection,N=T.hasSelection,F=T.selection,W=T.tree,V=A.getKey(),U=A.getText(),G=W.size-1,oe=this.props.children||W.map(function(X,ee){var ae=X.get("decoratorKey"),ie=X.get("leaves"),se=ie.size-1,Q=ie.map(function(Z,J){var te=i.encode(V,ee,J),de=Z.get("start"),ce=Z.get("end");return x.createElement(a,{key:te,offsetKey:te,block:A,start:de,selection:N?F:null,forceSelection:B,text:U.slice(de,ce),styleSet:A.getInlineStyleAt(de),customStyleMap:L,customStyleFn:P,isLast:ae===G&&J===se})}).toArray();return!ae||!D?Q:x.createElement(s,{block:A,children:Q,contentState:M,decorator:D,decoratorKey:ae,direction:O,leafSet:X,text:U,key:ee})}).toArray();return x.createElement("div",{"data-offset-key":i.encode(V,0,0),className:y({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":O==="LTR","public/DraftStyleDefault/rtl":O==="RTL"})},oe)},R}(x.Component);return DraftEditorNode_react=_,DraftEditorNode_react}function _isViewportScrollElement(r,s){return!!s&&(r===s.documentElement||r===s.body)}var Scroll$2={getTop:function(s){var a=s.ownerDocument;return _isViewportScrollElement(s,a)?a.body.scrollTop||a.documentElement.scrollTop:s.scrollTop},setTop:function(s,a){var i=s.ownerDocument;_isViewportScrollElement(s,i)?i.body.scrollTop=i.documentElement.scrollTop=a:s.scrollTop=a},getLeft:function(s){var a=s.ownerDocument;return _isViewportScrollElement(s,a)?a.body.scrollLeft||a.documentElement.scrollLeft:s.scrollLeft},setLeft:function(s,a){var i=s.ownerDocument;_isViewportScrollElement(s,i)?i.body.scrollLeft=i.documentElement.scrollLeft=a:s.scrollLeft=a}},Scroll_1=Scroll$2,_hyphenPattern=/-(.)/g;function camelize$1(r){return r.replace(_hyphenPattern,function(s,a){return a.toUpperCase()})}var camelize_1=camelize$1,_uppercasePattern=/([A-Z])/g;function hyphenate$1(r){return r.replace(_uppercasePattern,"-$1").toLowerCase()}var hyphenate_1=hyphenate$1,camelize=camelize_1,hyphenate=hyphenate_1;function asString(r){return r==null?r:String(r)}function getStyleProperty$1(r,s){var a;if(window.getComputedStyle&&(a=window.getComputedStyle(r,null),a))return asString(a.getPropertyValue(hyphenate(s)));if(document.defaultView&&document.defaultView.getComputedStyle){if(a=document.defaultView.getComputedStyle(r,null),a)return asString(a.getPropertyValue(hyphenate(s)));if(s==="display")return"none"}return r.currentStyle?asString(s==="float"?r.currentStyle.cssFloat||r.currentStyle.styleFloat:r.currentStyle[camelize(s)]):asString(r.style&&r.style[camelize(s)])}var getStyleProperty_1=getStyleProperty$1,getStyleProperty=getStyleProperty_1;function _isNodeScrollable(r,s){var a=Style$3.get(r,s);return a==="auto"||a==="scroll"}var Style$3={get:getStyleProperty,getScrollParent:function(s){if(!s)return null;for(var a=s.ownerDocument;s&&s!==a.body;){if(_isNodeScrollable(s,"overflow")||_isNodeScrollable(s,"overflowY")||_isNodeScrollable(s,"overflowX"))return s;s=s.parentNode}return a.defaultView||a.parentWindow}},Style_1=Style$3,containsNode$1=containsNode_1;function getElementRect$1(r){var s=r.ownerDocument.documentElement;if(!("getBoundingClientRect"in r)||!containsNode$1(s,r))return{left:0,right:0,top:0,bottom:0};var a=r.getBoundingClientRect();return{left:Math.round(a.left)-s.clientLeft,right:Math.round(a.right)-s.clientLeft,top:Math.round(a.top)-s.clientTop,bottom:Math.round(a.bottom)-s.clientTop}}var getElementRect_1=getElementRect$1,getElementRect=getElementRect_1;function getElementPosition$1(r){var s=getElementRect(r);return{x:s.left,y:s.top,width:s.right-s.left,height:s.bottom-s.top}}var getElementPosition_1=getElementPosition$1,isWebkit=typeof navigator<"u"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function getDocumentScrollElement$1(r){return r=r||document,r.scrollingElement?r.scrollingElement:!isWebkit&&r.compatMode==="CSS1Compat"?r.documentElement:r.body}var getDocumentScrollElement_1=getDocumentScrollElement$1;function getUnboundedScrollPosition$1(r){return r.Window&&r instanceof r.Window?{x:r.pageXOffset||r.document.documentElement.scrollLeft,y:r.pageYOffset||r.document.documentElement.scrollTop}:{x:r.scrollLeft,y:r.scrollTop}}var getUnboundedScrollPosition_1=getUnboundedScrollPosition$1,getDocumentScrollElement=getDocumentScrollElement_1,getUnboundedScrollPosition=getUnboundedScrollPosition_1;function getScrollPosition$3(r){var s=getDocumentScrollElement(r.ownerDocument||r.document);r.Window&&r instanceof r.Window&&(r=s);var a=getUnboundedScrollPosition(r),i=r===s?r.ownerDocument.documentElement:r,o=r.scrollWidth-i.clientWidth,x=r.scrollHeight-i.clientHeight;return a.x=Math.max(0,Math.min(a.x,o)),a.y=Math.max(0,Math.min(a.y,x)),a}var getScrollPosition_1=getScrollPosition$3;function getViewportWidth(){var r;return document.documentElement&&(r=document.documentElement.clientWidth),!r&&document.body&&(r=document.body.clientWidth),r||0}function getViewportHeight(){var r;return document.documentElement&&(r=document.documentElement.clientHeight),!r&&document.body&&(r=document.body.clientHeight),r||0}function getViewportDimensions$1(){return{width:window.innerWidth||getViewportWidth(),height:window.innerHeight||getViewportHeight()}}getViewportDimensions$1.withoutScrollbars=function(){return{width:getViewportWidth(),height:getViewportHeight()}};var getViewportDimensions_1=getViewportDimensions$1,DraftEditorBlockNode_react,hasRequiredDraftEditorBlockNode_react;function requireDraftEditorBlockNode_react(){if(hasRequiredDraftEditorBlockNode_react)return DraftEditorBlockNode_react;hasRequiredDraftEditorBlockNode_react=1;var r=objectAssign;function s(){return s=r||function(G){for(var oe=1;oe<arguments.length;oe++){var X=arguments[oe];for(var ee in X)Object.prototype.hasOwnProperty.call(X,ee)&&(G[ee]=X[ee])}return G},s.apply(this,arguments)}function a(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function i(G,oe){G.prototype=Object.create(oe.prototype),G.prototype.constructor=G,G.__proto__=oe}function o(G){for(var oe=1;oe<arguments.length;oe++){var X=arguments[oe]!=null?arguments[oe]:{},ee=Object.keys(X);typeof Object.getOwnPropertySymbols=="function"&&(ee=ee.concat(Object.getOwnPropertySymbols(X).filter(function(ae){return Object.getOwnPropertyDescriptor(X,ae).enumerable}))),ee.forEach(function(ae){x(G,ae,X[ae])})}return G}function x(G,oe,X){return oe in G?Object.defineProperty(G,oe,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[oe]=X,G}var y=requireDraftEditorNode_react(),_=DraftOffsetKey_1,E=reactExports,R=Scroll_1,S=Style_1,j=getElementPosition_1,T=getScrollPosition_1,A=getViewportDimensions_1,M=immutableExports,P=invariant_1,L=isHTMLElement_1,D=10;M.List;var O=function(oe,X){return oe.getAnchorKey()===X||oe.getFocusKey()===X},B=function(oe,X){var ee=oe.getNextSiblingKey();return ee?X.getBlockForKey(ee).getType()===oe.getType():!1},N=function(oe,X,ee){var ae=[],ie=!0,se=!1,Q=void 0;try{for(var Z=ee.reverse()[Symbol.iterator](),J;!(ie=(J=Z.next()).done);ie=!0){var te=J.value;if(te.type!==X)break;ae.push(te)}}catch(me){se=!0,Q=me}finally{try{!ie&&Z.return!=null&&Z.return()}finally{if(se)throw Q}}ee.splice(ee.indexOf(ae[0]),ae.length+1);var de=ae.reverse(),ce=de[0].key;return ee.push(E.cloneElement(oe,{key:"".concat(ce,"-wrap"),"data-offset-key":_.encode(ce,0,0)},de)),ee},F=function(oe,X){var ee=X.get(oe.getType())||X.get("unstyled"),ae=ee.wrapper,ie=ee.element||X.get("unstyled").element;return{Element:ie,wrapperTemplate:ae}},W=function(oe,X){var ee=X(oe);if(!ee)return{};var ae=ee.component,ie=ee.props,se=ee.editable;return{CustomComponent:ae,customProps:ie,customEditable:se}},V=function(oe,X,ee,ae,ie,se){var Q={"data-block":!0,"data-editor":X,"data-offset-key":ee,key:oe.getKey(),ref:se},Z=ae(oe);return Z&&(Q.className=Z),ie.customEditable!==void 0&&(Q=o({},Q,{contentEditable:ie.customEditable,suppressContentEditableWarning:!0})),Q},U=function(G){i(oe,G);function oe(){for(var ee,ae=arguments.length,ie=new Array(ae),se=0;se<ae;se++)ie[se]=arguments[se];return ee=G.call.apply(G,[this].concat(ie))||this,x(a(ee),"wrapperRef",E.createRef()),ee}var X=oe.prototype;return X.shouldComponentUpdate=function(ae){var ie=this.props,se=ie.block,Q=ie.direction,Z=ie.tree,J=!se.getChildKeys().isEmpty(),te=se!==ae.block||Z!==ae.tree||Q!==ae.direction||O(ae.selection,ae.block.getKey())&&ae.forceSelection;return J||te},X.componentDidMount=function(){var ae=this.props.selection,ie=ae.getEndKey();if(!(!ae.getHasFocus()||ie!==this.props.block.getKey())){var se=this.wrapperRef.current;if(se){var Q=S.getScrollParent(se),Z=T(Q),J;if(Q===window){var te=j(se),de=te.y+te.height,ce=A().height;J=de-ce,J>0&&window.scrollTo(Z.x,Z.y+J+D)}else{L(se)||P(!1);var me=se,ve=me.offsetHeight+me.offsetTop,xe=Q.offsetHeight+Z.y;J=ve-xe,J>0&&R.setTop(Q,R.getTop(Q)+J+D)}}}},X.render=function(){var ae=this,ie=this.props,se=ie.block,Q=ie.blockRenderMap,Z=ie.blockRendererFn,J=ie.blockStyleFn,te=ie.contentState,de=ie.decorator,ce=ie.editorKey,me=ie.editorState,ve=ie.customStyleFn,xe=ie.customStyleMap,ge=ie.direction,be=ie.forceSelection,ye=ie.selection,Ie=ie.tree,Pe=null;se.children.size&&(Pe=se.children.reduce(function(Be,Oe){var Ue=_.encode(Oe,0,0),Ve=te.getBlockForKey(Oe),We=W(Ve,Z),Te=We.CustomComponent||oe,De=F(Ve,Q),Le=De.Element,Fe=De.wrapperTemplate,Ke=V(Ve,ce,Ue,J,We,null),nt=o({},ae.props,{tree:me.getBlockTree(Oe),blockProps:We.customProps,offsetKey:Ue,block:Ve});return Be.push(E.createElement(Le,Ke,E.createElement(Te,nt))),!Fe||B(Ve,te)||N(Fe,Le,Be),Be},[]));var we=se.getKey(),Re=_.encode(we,0,0),Se=W(se,Z),Ee=Se.CustomComponent,Ce=Ee!=null?E.createElement(Ee,s({},this.props,{tree:me.getBlockTree(we),blockProps:Se.customProps,offsetKey:Re,block:se})):E.createElement(y,{block:se,children:Pe,contentState:te,customStyleFn:ve,customStyleMap:xe,decorator:de,direction:ge,forceSelection:be,hasSelection:O(ye,we),selection:ye,tree:Ie});if(se.getParentKey())return Ce;var he=F(se,Q),Ae=he.Element,Ne=V(se,ce,Re,J,Se,this.wrapperRef);return E.createElement(Ae,Ne,Ce)},oe}(E.Component);return DraftEditorBlockNode_react=U,DraftEditorBlockNode_react}var DraftEditorContentsExperimental_react,hasRequiredDraftEditorContentsExperimental_react;function requireDraftEditorContentsExperimental_react(){if(hasRequiredDraftEditorContentsExperimental_react)return DraftEditorContentsExperimental_react;hasRequiredDraftEditorContentsExperimental_react=1;var r=objectAssign;function s(){return s=r||function(E){for(var R=1;R<arguments.length;R++){var S=arguments[R];for(var j in S)Object.prototype.hasOwnProperty.call(S,j)&&(E[j]=S[j])}return E},s.apply(this,arguments)}function a(E,R){E.prototype=Object.create(R.prototype),E.prototype.constructor=E,E.__proto__=R}var i=requireDraftEditorBlockNode_react(),o=DraftOffsetKey_1,x=reactExports,y=nullthrows_1,_=function(E){a(R,E);function R(){return E.apply(this,arguments)||this}var S=R.prototype;return S.shouldComponentUpdate=function(T){var A=this.props.editorState,M=T.editorState,P=A.getDirectionMap(),L=M.getDirectionMap();if(P!==L)return!0;var D=A.getSelection().getHasFocus(),O=M.getSelection().getHasFocus();if(D!==O)return!0;var B=M.getNativelyRenderedContent(),N=A.isInCompositionMode(),F=M.isInCompositionMode();if(A===M||B!==null&&M.getCurrentContent()===B||N&&F)return!1;var W=A.getCurrentContent(),V=M.getCurrentContent(),U=A.getDecorator(),G=M.getDecorator();return N!==F||W!==V||U!==G||M.mustForceSelection()},S.render=function(){for(var T=this.props,A=T.blockRenderMap,M=T.blockRendererFn,P=T.blockStyleFn,L=T.customStyleMap,D=T.customStyleFn,O=T.editorState,B=T.editorKey,N=T.textDirectionality,F=O.getCurrentContent(),W=O.getSelection(),V=O.mustForceSelection(),U=O.getDecorator(),G=y(O.getDirectionMap()),oe=F.getBlocksAsArray(),X=oe[0],ee=[],ae=X;ae;){var ie=ae.getKey(),se={blockRenderMap:A,blockRendererFn:M,blockStyleFn:P,contentState:F,customStyleFn:D,customStyleMap:L,decorator:U,editorKey:B,editorState:O,forceSelection:V,selection:W,block:ae,direction:N||G.get(ie),tree:O.getBlockTree(ie)},Q=A.get(ae.getType())||A.get("unstyled"),Z=Q.wrapper;ee.push({block:x.createElement(i,s({key:ie},se)),wrapperTemplate:Z,key:ie,offsetKey:o.encode(ie,0,0)});var J=ae.getNextSiblingKey();ae=J?F.getBlockForKey(J):null}for(var te=[],de=0;de<ee.length;){var ce=ee[de];if(ce.wrapperTemplate){var me=[];do me.push(ee[de].block),de++;while(de<ee.length&&ee[de].wrapperTemplate===ce.wrapperTemplate);var ve=x.cloneElement(ce.wrapperTemplate,{key:ce.key+"-wrap","data-offset-key":ce.offsetKey},me);te.push(ve)}else te.push(ce.block),de++}return x.createElement("div",{"data-contents":"true"},te)},R}(x.Component);return DraftEditorContentsExperimental_react=_,DraftEditorContentsExperimental_react}var _assign$1=objectAssign;function _extends$6(){return _extends$6=_assign$1||function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$6.apply(this,arguments)}function _assertThisInitialized$1(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _inheritsLoose$3(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}function _defineProperty$b(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var DraftEditorLeaf=DraftEditorLeaf_react,DraftOffsetKey$1=DraftOffsetKey_1,React$2=reactExports,Scroll$1=Scroll_1,Style$2=Style_1,UnicodeBidi=UnicodeBidi_1,UnicodeBidiDirection=UnicodeBidiDirection_1,cx$3=cx_1,getElementPosition=getElementPosition_1,getScrollPosition$2=getScrollPosition_1,getViewportDimensions=getViewportDimensions_1,invariant$a=invariant_1,isHTMLElement$4=isHTMLElement_1,nullthrows$6=nullthrows_1,SCROLL_BUFFER=10,isBlockOnSelectionEdge=function(s,a){return s.getAnchorKey()===a||s.getFocusKey()===a},DraftEditorBlock$1=function(r){_inheritsLoose$3(s,r);function s(){for(var i,o=arguments.length,x=new Array(o),y=0;y<o;y++)x[y]=arguments[y];return i=r.call.apply(r,[this].concat(x))||this,_defineProperty$b(_assertThisInitialized$1(i),"_node",void 0),i}var a=s.prototype;return a.shouldComponentUpdate=function(o){return this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||isBlockOnSelectionEdge(o.selection,o.block.getKey())&&o.forceSelection},a.componentDidMount=function(){if(!this.props.preventScroll){var o=this.props.selection,x=o.getEndKey();if(!(!o.getHasFocus()||x!==this.props.block.getKey())){var y=this._node;if(y!=null){var _=Style$2.getScrollParent(y),E=getScrollPosition$2(_),R;if(_===window){var S=getElementPosition(y),j=S.y+S.height,T=getViewportDimensions().height;R=j-T,R>0&&window.scrollTo(E.x,E.y+R+SCROLL_BUFFER)}else{isHTMLElement$4(y)||invariant$a(!1);var A=y.offsetHeight+y.offsetTop,M=_.offsetTop+_.offsetHeight,P=M+E.y;R=A-P,R>0&&Scroll$1.setTop(_,Scroll$1.getTop(_)+R+SCROLL_BUFFER)}}}}},a._renderChildren=function(){var o=this,x=this.props.block,y=x.getKey(),_=x.getText(),E=this.props.tree.size-1,R=isBlockOnSelectionEdge(this.props.selection,y);return this.props.tree.map(function(S,j){var T=S.get("leaves");if(T.size===0)return null;var A=T.size-1,M=T.map(function(oe,X){var ee=DraftOffsetKey$1.encode(y,j,X),ae=oe.get("start"),ie=oe.get("end");return React$2.createElement(DraftEditorLeaf,{key:ee,offsetKey:ee,block:x,start:ae,selection:R?o.props.selection:null,forceSelection:o.props.forceSelection,text:_.slice(ae,ie),styleSet:x.getInlineStyleAt(ae),customStyleMap:o.props.customStyleMap,customStyleFn:o.props.customStyleFn,isLast:j===E&&X===A})}).toArray(),P=S.get("decoratorKey");if(P==null||!o.props.decorator)return M;var L=nullthrows$6(o.props.decorator),D=L.getComponentForKey(P);if(!D)return M;var O=L.getPropsForKey(P),B=DraftOffsetKey$1.encode(y,j,0),N=T.first().get("start"),F=T.last().get("end"),W=_.slice(N,F),V=x.getEntityAt(S.get("start")),U=UnicodeBidiDirection.getHTMLDirIfDifferent(UnicodeBidi.getDirection(W),o.props.direction),G={contentState:o.props.contentState,decoratedText:W,dir:U,start:N,end:F,blockKey:y,entityKey:V,offsetKey:B};return React$2.createElement(D,_extends$6({},O,G,{key:B}),M)}).toArray()},a.render=function(){var o=this,x=this.props,y=x.direction,_=x.offsetKey,E=cx$3({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":y==="LTR","public/DraftStyleDefault/rtl":y==="RTL"});return React$2.createElement("div",{"data-offset-key":_,className:E,ref:function(S){return o._node=S}},this._renderChildren())},s}(React$2.Component),DraftEditorBlock_react=DraftEditorBlock$1,joinClasses_1,hasRequiredJoinClasses;function requireJoinClasses(){if(hasRequiredJoinClasses)return joinClasses_1;hasRequiredJoinClasses=1;function r(s){var a=s||"",i=arguments.length;if(i>1)for(var o=1;o<i;o++){var x=arguments[o];x&&(a=(a?a+" ":"")+x)}return a}return joinClasses_1=r,joinClasses_1}var DraftEditorContentsCore_react,hasRequiredDraftEditorContentsCore_react;function requireDraftEditorContentsCore_react(){if(hasRequiredDraftEditorContentsCore_react)return DraftEditorContentsCore_react;hasRequiredDraftEditorContentsCore_react=1;var r=objectAssign;function s(){return s=r||function(A){for(var M=1;M<arguments.length;M++){var P=arguments[M];for(var L in P)Object.prototype.hasOwnProperty.call(P,L)&&(A[L]=P[L])}return A},s.apply(this,arguments)}function a(A){for(var M=1;M<arguments.length;M++){var P=arguments[M]!=null?arguments[M]:{},L=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(L=L.concat(Object.getOwnPropertySymbols(P).filter(function(D){return Object.getOwnPropertyDescriptor(P,D).enumerable}))),L.forEach(function(D){i(A,D,P[D])})}return A}function i(A,M,P){return M in A?Object.defineProperty(A,M,{value:P,enumerable:!0,configurable:!0,writable:!0}):A[M]=P,A}function o(A,M){A.prototype=Object.create(M.prototype),A.prototype.constructor=A,A.__proto__=M}var x=DraftEditorBlock_react,y=DraftOffsetKey_1,_=reactExports,E=cx_1,R=requireJoinClasses(),S=nullthrows_1,j=function(M,P,L,D){return E({"public/DraftStyleDefault/unorderedListItem":M==="unordered-list-item","public/DraftStyleDefault/orderedListItem":M==="ordered-list-item","public/DraftStyleDefault/reset":L,"public/DraftStyleDefault/depth0":P===0,"public/DraftStyleDefault/depth1":P===1,"public/DraftStyleDefault/depth2":P===2,"public/DraftStyleDefault/depth3":P===3,"public/DraftStyleDefault/depth4":P>=4,"public/DraftStyleDefault/listLTR":D==="LTR","public/DraftStyleDefault/listRTL":D==="RTL"})},T=function(A){o(M,A);function M(){return A.apply(this,arguments)||this}var P=M.prototype;return P.shouldComponentUpdate=function(D){var O=this.props.editorState,B=D.editorState,N=O.getDirectionMap(),F=B.getDirectionMap();if(N!==F)return!0;var W=O.getSelection().getHasFocus(),V=B.getSelection().getHasFocus();if(W!==V)return!0;var U=B.getNativelyRenderedContent(),G=O.isInCompositionMode(),oe=B.isInCompositionMode();if(O===B||U!==null&&B.getCurrentContent()===U||G&&oe)return!1;var X=O.getCurrentContent(),ee=B.getCurrentContent(),ae=O.getDecorator(),ie=B.getDecorator();return G!==oe||X!==ee||ae!==ie||B.mustForceSelection()},P.render=function(){for(var D=this.props,O=D.blockRenderMap,B=D.blockRendererFn,N=D.blockStyleFn,F=D.customStyleMap,W=D.customStyleFn,V=D.editorState,U=D.editorKey,G=D.preventScroll,oe=D.textDirectionality,X=V.getCurrentContent(),ee=V.getSelection(),ae=V.mustForceSelection(),ie=V.getDecorator(),se=S(V.getDirectionMap()),Q=X.getBlocksAsArray(),Z=[],J=null,te=null,de=0;de<Q.length;de++){var ce=Q[de],me=ce.getKey(),ve=ce.getType(),xe=B(ce),ge=void 0,be=void 0,ye=void 0;xe&&(ge=xe.component,be=xe.props,ye=xe.editable);var Ie=oe||se.get(me),Pe=y.encode(me,0,0),we={contentState:X,block:ce,blockProps:be,blockStyleFn:N,customStyleMap:F,customStyleFn:W,decorator:ie,direction:Ie,forceSelection:ae,offsetKey:Pe,preventScroll:G,selection:ee,tree:V.getBlockTree(me)},Re=O.get(ve)||O.get("unstyled"),Se=Re.wrapper,Ee=Re.element||O.get("unstyled").element,Ce=ce.getDepth(),he="";if(N&&(he=N(ce)),Ee==="li"){var Ae=te!==Se||J===null||Ce>J;he=R(he,j(ve,Ce,Ae,Ie))}var Ne=ge||x,Be={className:he,"data-block":!0,"data-editor":U,"data-offset-key":Pe,key:me};ye!==void 0&&(Be=a({},Be,{contentEditable:ye,suppressContentEditableWarning:!0}));var Oe=_.createElement(Ee,Be,_.createElement(Ne,s({},we,{key:me})));Z.push({block:Oe,wrapperTemplate:Se,key:me,offsetKey:Pe}),Se?J=ce.getDepth():J=null,te=Se}for(var Ue=[],Ve=0;Ve<Z.length;){var We=Z[Ve];if(We.wrapperTemplate){var Te=[];do Te.push(Z[Ve].block),Ve++;while(Ve<Z.length&&Z[Ve].wrapperTemplate===We.wrapperTemplate);var De=_.cloneElement(We.wrapperTemplate,{key:We.key+"-wrap","data-offset-key":We.offsetKey},Te);Ue.push(De)}else Ue.push(We.block),Ve++}return _.createElement("div",{"data-contents":"true"},Ue)},M}(_.Component);return DraftEditorContentsCore_react=T,DraftEditorContentsCore_react}var gkx$5=gkx$8,experimentalTreeDataSupport$4=gkx$5("draft_tree_data_support"),DraftEditorContents_react=experimentalTreeDataSupport$4?requireDraftEditorContentsExperimental_react():requireDraftEditorContentsCore_react(),PhotosMimeType$1={isImage:function(s){return getParts(s)[0]==="image"},isJpeg:function(s){var a=getParts(s);return PhotosMimeType$1.isImage(s)&&(a[1]==="jpeg"||a[1]==="pjpeg")}};function getParts(r){return r.split("/")}var PhotosMimeType_1=PhotosMimeType$1,invariant$9=invariant_1;function toArray$2(r){var s=r.length;if(!Array.isArray(r)&&(typeof r=="object"||typeof r=="function")||invariant$9(!1),typeof s!="number"&&invariant$9(!1),s===0||s-1 in r||invariant$9(!1),typeof r.callee=="function"&&invariant$9(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch{}for(var a=Array(s),i=0;i<s;i++)a[i]=r[i];return a}function hasArrayNature(r){return!!r&&(typeof r=="object"||typeof r=="function")&&"length"in r&&!("setInterval"in r)&&typeof r.nodeType!="number"&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed$1(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray$2(r):[r]}var createArrayFromMixed_1=createArrayFromMixed$1;function makeEmptyFunction(r){return function(){return r}}var emptyFunction$2=function(){};emptyFunction$2.thatReturns=makeEmptyFunction;emptyFunction$2.thatReturnsFalse=makeEmptyFunction(!1);emptyFunction$2.thatReturnsTrue=makeEmptyFunction(!0);emptyFunction$2.thatReturnsNull=makeEmptyFunction(null);emptyFunction$2.thatReturnsThis=function(){return this};emptyFunction$2.thatReturnsArgument=function(r){return r};var emptyFunction_1=emptyFunction$2,PhotosMimeType=PhotosMimeType_1,createArrayFromMixed=createArrayFromMixed_1,emptyFunction$1=emptyFunction_1,CR_LF_REGEX=new RegExp(`\r
`,"g"),LF_ONLY=`
`,RICH_TEXT_TYPES={"text/rtf":1,"text/html":1};function getFileFromDataTransfer(r){if(r.kind=="file")return r.getAsFile()}var DataTransfer$3=function(){function r(a){this.data=a,this.types=a.types?createArrayFromMixed(a.types):[]}var s=r.prototype;return s.isRichText=function(){return this.getHTML()&&this.getText()?!0:this.isImage()?!1:this.types.some(function(i){return RICH_TEXT_TYPES[i]})},s.getText=function(){var i;return this.data.getData&&(this.types.length?this.types.indexOf("text/plain")!=-1&&(i=this.data.getData("text/plain")):i=this.data.getData("Text")),i?i.replace(CR_LF_REGEX,LF_ONLY):null},s.getHTML=function(){if(this.data.getData)if(this.types.length){if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")}else return this.data.getData("Text")},s.isLink=function(){return this.types.some(function(i){return i.indexOf("Url")!=-1||i.indexOf("text/uri-list")!=-1||i.indexOf("text/x-moz-url")})},s.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var i=this.data.getData("text/x-moz-url").split(`
`);return i[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null},s.isImage=function(){var i=this.types.some(function(_){return _.indexOf("application/x-moz-file")!=-1});if(i)return!0;for(var o=this.getFiles(),x=0;x<o.length;x++){var y=o[x].type;if(!PhotosMimeType.isImage(y))return!1}return!0},s.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},s.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(getFileFromDataTransfer).filter(emptyFunction$1.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},s.hasFiles=function(){return this.getFiles().length>0},r}(),DataTransfer_1=DataTransfer$3,invariant$8=invariant_1,TEXT_CLIPPING_REGEX=/\.textClipping$/,TEXT_TYPES={"text/plain":!0,"text/html":!0,"text/rtf":!0},TEXT_SIZE_UPPER_BOUND=5e3;function getTextContentFromFiles$2(r,s){var a=0,i=[];r.forEach(function(o){readFile(o,function(x){a++,x&&i.push(x.slice(0,TEXT_SIZE_UPPER_BOUND)),a==r.length&&s(i.join("\r"))})})}function readFile(r,s){if(!commonjsGlobal.FileReader||r.type&&!(r.type in TEXT_TYPES)){s("");return}if(r.type===""){var a="";TEXT_CLIPPING_REGEX.test(r.name)&&(a=r.name.replace(TEXT_CLIPPING_REGEX,"")),s(a);return}var i=new FileReader;i.onload=function(){var o=i.result;typeof o!="string"&&invariant$8(!1),s(o)},i.onerror=function(){s("")},i.readAsText(r)}var getTextContentFromFiles_1=getTextContentFromFiles$2;function isEventHandled$4(r){return r==="handled"||r===!0}var isEventHandled_1=isEventHandled$4,DataTransfer$2=DataTransfer_1,DraftModifier$b=DraftModifier_1,EditorState$m=EditorState_1,findAncestorOffsetKey$1=findAncestorOffsetKey_1,getCorrectDocumentFromNode$1=getCorrectDocumentFromNode_1,getTextContentFromFiles$1=getTextContentFromFiles_1,getUpdatedSelectionState=getUpdatedSelectionState_1,getWindowForNode=getWindowForNode_1,isEventHandled$3=isEventHandled_1,nullthrows$5=nullthrows_1;function getSelectionForEvent(r,s){var a=null,i=null,o=getCorrectDocumentFromNode$1(r.currentTarget);if(typeof o.caretRangeFromPoint=="function"){var x=o.caretRangeFromPoint(r.x,r.y);a=x.startContainer,i=x.startOffset}else if(r.rangeParent)a=r.rangeParent,i=r.rangeOffset;else return null;a=nullthrows$5(a),i=nullthrows$5(i);var y=nullthrows$5(findAncestorOffsetKey$1(a));return getUpdatedSelectionState(s,y,i,y,i)}var DraftEditorDragHandler$1={onDragEnd:function(s){s.exitCurrentMode(),endDrag(s)},onDrop:function(s,a){var i=new DataTransfer$2(a.nativeEvent.dataTransfer),o=s._latestEditorState,x=getSelectionForEvent(a.nativeEvent,o);if(a.preventDefault(),s._dragCount=0,s.exitCurrentMode(),x!=null){var y=i.getFiles();if(y.length>0){if(s.props.handleDroppedFiles&&isEventHandled$3(s.props.handleDroppedFiles(x,y)))return;getTextContentFromFiles$1(y,function(E){E&&s.update(insertTextAtSelection(o,x,E))});return}var _=s._internalDrag?"internal":"external";s.props.handleDrop&&isEventHandled$3(s.props.handleDrop(x,i,_))||(s._internalDrag?s.update(moveText(o,x)):s.update(insertTextAtSelection(o,x,i.getText()))),endDrag(s)}}};function endDrag(r){r._internalDrag=!1;var s=r.editorContainer;if(s){var a=new MouseEvent("mouseup",{view:getWindowForNode(s),bubbles:!0,cancelable:!0});s.dispatchEvent(a)}}function moveText(r,s){var a=DraftModifier$b.moveText(r.getCurrentContent(),r.getSelection(),s);return EditorState$m.push(r,a,"insert-fragment")}function insertTextAtSelection(r,s,a){var i=DraftModifier$b.insertText(r.getCurrentContent(),s,a,r.getCurrentInlineStyle());return EditorState$m.push(r,i,"insert-fragment")}var DraftEditorDragHandler_1=DraftEditorDragHandler$1;function isSelectionAtLeafStart$1(r){var s=r.getSelection(),a=s.getAnchorKey(),i=r.getBlockTree(a),o=s.getStartOffset(),x=!1;return i.some(function(y){return o===y.get("start")?(x=!0,!0):o<y.get("end")?y.get("leaves").some(function(_){var E=_.get("start");return o===E?(x=!0,!0):!1}):!1}),x}var isSelectionAtLeafStart_1=isSelectionAtLeafStart$1;(function(r,s){if(r.setImmediate)return;var a=1,i={},o=!1,x=r.document,y;function _(O){typeof O!="function"&&(O=new Function(""+O));for(var B=new Array(arguments.length-1),N=0;N<B.length;N++)B[N]=arguments[N+1];var F={callback:O,args:B};return i[a]=F,y(a),a++}function E(O){delete i[O]}function R(O){var B=O.callback,N=O.args;switch(N.length){case 0:B();break;case 1:B(N[0]);break;case 2:B(N[0],N[1]);break;case 3:B(N[0],N[1],N[2]);break;default:B.apply(s,N);break}}function S(O){if(o)setTimeout(S,0,O);else{var B=i[O];if(B){o=!0;try{R(B)}finally{E(O),o=!1}}}}function j(){y=function(O){process.nextTick(function(){S(O)})}}function T(){if(r.postMessage&&!r.importScripts){var O=!0,B=r.onmessage;return r.onmessage=function(){O=!1},r.postMessage("","*"),r.onmessage=B,O}}function A(){var O="setImmediate$"+Math.random()+"$",B=function(N){N.source===r&&typeof N.data=="string"&&N.data.indexOf(O)===0&&S(+N.data.slice(O.length))};r.addEventListener?r.addEventListener("message",B,!1):r.attachEvent("onmessage",B),y=function(N){r.postMessage(O+N,"*")}}function M(){var O=new MessageChannel;O.port1.onmessage=function(B){var N=B.data;S(N)},y=function(B){O.port2.postMessage(B)}}function P(){var O=x.documentElement;y=function(B){var N=x.createElement("script");N.onreadystatechange=function(){S(B),N.onreadystatechange=null,O.removeChild(N),N=null},O.appendChild(N)}}function L(){y=function(O){setTimeout(S,0,O)}}var D=Object.getPrototypeOf&&Object.getPrototypeOf(r);D=D&&D.setTimeout?D:r,{}.toString.call(r.process)==="[object process]"?j():T()?A():r.MessageChannel?M():x&&"onreadystatechange"in x.createElement("script")?P():L(),D.setImmediate=_,D.clearImmediate=E})(typeof self>"u"?typeof commonjsGlobal>"u"?commonjsGlobal:commonjsGlobal:self);var setImmediate$2=commonjsGlobal.setImmediate,DraftModifier$a=DraftModifier_1,EditorState$l=EditorState_1,UserAgent$9=UserAgent_1,getEntityKeyForSelection$1=getEntityKeyForSelection_1,isEventHandled$2=isEventHandled_1,isSelectionAtLeafStart=isSelectionAtLeafStart_1,nullthrows$4=nullthrows_1,setImmediate$1=setImmediate$2,FF_QUICKFIND_CHAR="'",FF_QUICKFIND_LINK_CHAR="/",isFirefox$1=UserAgent$9.isBrowser("Firefox");function mustPreventDefaultForCharacter(r){return isFirefox$1&&(r==FF_QUICKFIND_CHAR||r==FF_QUICKFIND_LINK_CHAR)}function replaceText(r,s,a,i,o){var x=DraftModifier$a.replaceText(r.getCurrentContent(),r.getSelection(),s,a,i);return EditorState$l.push(r,x,"insert-characters",o)}function editOnBeforeInput(r,s){r._pendingStateFromBeforeInput!==void 0&&(r.update(r._pendingStateFromBeforeInput),r._pendingStateFromBeforeInput=void 0);var a=r._latestEditorState,i=s.data;if(i){if(r.props.handleBeforeInput&&isEventHandled$2(r.props.handleBeforeInput(i,a,s.timeStamp))){s.preventDefault();return}var o=a.getSelection(),x=o.getStartOffset(),y=o.getAnchorKey();if(!o.isCollapsed()){s.preventDefault(),r.update(replaceText(a,i,a.getCurrentInlineStyle(),getEntityKeyForSelection$1(a.getCurrentContent(),a.getSelection()),!0));return}var _=replaceText(a,i,a.getCurrentInlineStyle(),getEntityKeyForSelection$1(a.getCurrentContent(),a.getSelection()),!1),E=!1;if(E||(E=isSelectionAtLeafStart(r._latestCommittedEditorState)),!E){var R=a.getBlockTree(y),S=_.getBlockTree(y);E=R.size!==S.size||R.zip(S).some(function(j){var T=j[0],A=j[1],M=T.get("start"),P=M+(M>=x?i.length:0),L=T.get("end"),D=L+(L>=x?i.length:0),O=A.get("start"),B=A.get("end"),N=A.get("decoratorKey");return T.get("decoratorKey")!==N||T.get("leaves").size!==A.get("leaves").size||P!==O||D!==B||N!=null&&B-O!==L-M})}if(E||(E=mustPreventDefaultForCharacter(i)),E||(E=nullthrows$4(_.getDirectionMap()).get(y)!==nullthrows$4(a.getDirectionMap()).get(y)),E){s.preventDefault(),_=EditorState$l.set(_,{forceSelection:!0}),r.update(_);return}_=EditorState$l.set(_,{nativelyRenderedContent:_.getCurrentContent()}),r._pendingStateFromBeforeInput=_,setImmediate$1(function(){r._pendingStateFromBeforeInput!==void 0&&(r.update(r._pendingStateFromBeforeInput),r._pendingStateFromBeforeInput=void 0)})}}var editOnBeforeInput_1=editOnBeforeInput,EditorState$k=EditorState_1,containsNode=containsNode_1,getActiveElement$1=getActiveElement_1;function editOnBlur(r,s){var a=s.currentTarget.ownerDocument;if(!r.props.preserveSelectionOnBlur&&getActiveElement$1(a)===a.body){var i=a.defaultView.getSelection(),o=r.editor;i.rangeCount===1&&containsNode(o,i.anchorNode)&&containsNode(o,i.focusNode)&&i.removeAllRanges()}var x=r._latestEditorState,y=x.getSelection();if(y.getHasFocus()){var _=y.set("hasFocus",!1);r.props.onBlur&&r.props.onBlur(s),r.update(EditorState$k.acceptSelection(x,_))}}var editOnBlur_1=editOnBlur,EditorState$j=EditorState_1;function editOnCompositionStart(r,s){r.setMode("composite"),r.update(EditorState$j.set(r._latestEditorState,{inCompositionMode:!0})),r._onCompositionStart(s)}var editOnCompositionStart_1=editOnCompositionStart,getContentStateFragment$2=getContentStateFragment_1;function getFragmentFromSelection$2(r){var s=r.getSelection();return s.isCollapsed()?null:getContentStateFragment$2(r.getCurrentContent(),s)}var getFragmentFromSelection_1=getFragmentFromSelection$2,getFragmentFromSelection$1=getFragmentFromSelection_1;function editOnCopy(r,s){var a=r._latestEditorState,i=a.getSelection();if(i.isCollapsed()){s.preventDefault();return}r.setClipboard(getFragmentFromSelection$1(r._latestEditorState))}var editOnCopy_1=editOnCopy;function isInstanceOfNode(r){if(!r||!("ownerDocument"in r))return!1;if("ownerDocument"in r){var s=r;if(!s.ownerDocument.defaultView)return s instanceof Node;if(s instanceof s.ownerDocument.defaultView.Node)return!0}return!1}var isInstanceOfNode_1=isInstanceOfNode,DraftModifier$9=DraftModifier_1,EditorState$i=EditorState_1,Style$1=Style_1,getFragmentFromSelection=getFragmentFromSelection_1,getScrollPosition$1=getScrollPosition_1,isNode=isInstanceOfNode_1;function editOnCut(r,s){var a=r._latestEditorState,i=a.getSelection(),o=s.target,x;if(i.isCollapsed()){s.preventDefault();return}if(isNode(o)){var y=o;x=getScrollPosition$1(Style$1.getScrollParent(y))}var _=getFragmentFromSelection(a);r.setClipboard(_),r.setMode("cut"),setTimeout(function(){r.restoreEditorDOM(x),r.exitCurrentMode(),r.update(removeFragment(a))},0)}function removeFragment(r){var s=DraftModifier$9.removeRange(r.getCurrentContent(),r.getSelection(),"forward");return EditorState$i.push(r,s,"remove-range")}var editOnCut_1=editOnCut;function editOnDragOver(r,s){r.setMode("drag"),s.preventDefault()}var editOnDragOver_1=editOnDragOver;function editOnDragStart(r){r._internalDrag=!0,r.setMode("drag")}var editOnDragStart_1=editOnDragStart,EditorState$h=EditorState_1,UserAgent$8=UserAgent_1;function editOnFocus(r,s){var a=r._latestEditorState,i=a.getSelection();if(!i.getHasFocus()){var o=i.set("hasFocus",!0);r.props.onFocus&&r.props.onFocus(s),UserAgent$8.isBrowser("Chrome < 60.0.3081.0")?r.update(EditorState$h.forceSelection(a,o)):r.update(EditorState$h.acceptSelection(a,o))}}var editOnFocus_1=editOnFocus,invariant$7=invariant_1,SURROGATE_HIGH_START=55296,SURROGATE_HIGH_END=56319,SURROGATE_LOW_START=56320,SURROGATE_LOW_END=57343,SURROGATE_UNITS_REGEX=/[\uD800-\uDFFF]/;function isCodeUnitInSurrogateRange(r){return SURROGATE_HIGH_START<=r&&r<=SURROGATE_LOW_END}function isSurrogatePair(r,s){if(0<=s&&s<r.length||invariant$7(!1),s+1===r.length)return!1;var a=r.charCodeAt(s),i=r.charCodeAt(s+1);return SURROGATE_HIGH_START<=a&&a<=SURROGATE_HIGH_END&&SURROGATE_LOW_START<=i&&i<=SURROGATE_LOW_END}function hasSurrogateUnit(r){return SURROGATE_UNITS_REGEX.test(r)}function getUTF16Length(r,s){return 1+isCodeUnitInSurrogateRange(r.charCodeAt(s))}function strlen$1(r){if(!hasSurrogateUnit(r))return r.length;for(var s=0,a=0;a<r.length;a+=getUTF16Length(r,a))s++;return s}function substr$2(r,s,a){if(s=s||0,a=a===void 0?1/0:a||0,!hasSurrogateUnit(r))return r.substr(s,a);var i=r.length;if(i<=0||s>i||a<=0)return"";var o=0;if(s>0){for(;s>0&&o<i;s--)o+=getUTF16Length(r,o);if(o>=i)return""}else if(s<0){for(o=i;s<0&&0<o;s++)o-=getUTF16Length(r,o-1);o<0&&(o=0)}var x=i;if(a<i)for(x=o;a>0&&x<i;a--)x+=getUTF16Length(r,x);return r.substring(o,x)}function substring(r,s,a){s=s||0,a=a===void 0?1/0:a||0,s<0&&(s=0),a<0&&(a=0);var i=Math.abs(a-s);return s=s<a?s:a,substr$2(r,s,i)}function getCodePoints(r){for(var s=[],a=0;a<r.length;a+=getUTF16Length(r,a))s.push(r.codePointAt(a));return s}var UnicodeUtils$7={getCodePoints,getUTF16Length,hasSurrogateUnit,isCodeUnitInSurrogateRange,isSurrogatePair,strlen:strlen$1,substring,substr:substr$2},UnicodeUtils_1=UnicodeUtils$7;function moveSelectionBackward$3(r,s){var a=r.getSelection(),i=r.getCurrentContent(),o=a.getStartKey(),x=a.getStartOffset(),y=o,_=0;if(s>x){var E=i.getKeyBefore(o);if(E==null)y=o;else{y=E;var R=i.getBlockForKey(E);_=R.getText().length}}else _=x-s;return a.merge({focusKey:y,focusOffset:_,isBackward:!0})}var moveSelectionBackward_1=moveSelectionBackward$3,DraftModifier$8=DraftModifier_1,gkx$4=gkx$8,experimentalTreeDataSupport$3=gkx$4("draft_tree_data_support");function removeTextWithStrategy$5(r,s,a){var i=r.getSelection(),o=r.getCurrentContent(),x=i,y=i.getAnchorKey(),_=i.getFocusKey(),E=o.getBlockForKey(y);if(experimentalTreeDataSupport$3&&a==="forward"&&y!==_)return o;if(i.isCollapsed()){if(a==="forward"){if(r.isSelectionAtEndOfContent())return o;if(experimentalTreeDataSupport$3){var R=i.getAnchorOffset()===o.getBlockForKey(y).getLength();if(R){var S=o.getBlockForKey(E.nextSibling);if(!S||S.getLength()===0)return o}}}else if(r.isSelectionAtStartOfContent())return o;if(x=s(r),x===i)return o}return DraftModifier$8.removeRange(o,x,a)}var removeTextWithStrategy_1=removeTextWithStrategy$5,EditorState$g=EditorState_1,UnicodeUtils$6=UnicodeUtils_1,moveSelectionBackward$2=moveSelectionBackward_1,removeTextWithStrategy$4=removeTextWithStrategy_1;function keyCommandPlainBackspace$2(r){var s=removeTextWithStrategy$4(r,function(i){var o=i.getSelection(),x=i.getCurrentContent(),y=o.getAnchorKey(),_=o.getAnchorOffset(),E=x.getBlockForKey(y).getText()[_-1];return moveSelectionBackward$2(i,E?UnicodeUtils$6.getUTF16Length(E,0):1)},"backward");if(s===r.getCurrentContent())return r;var a=r.getSelection();return EditorState$g.push(r,s.set("selectionBefore",a),a.isCollapsed()?"backspace-character":"remove-range")}var keyCommandPlainBackspace_1=keyCommandPlainBackspace$2,DraftModifier$7=DraftModifier_1,DraftOffsetKey=DraftOffsetKey_1,EditorState$f=EditorState_1,UserAgent$7=UserAgent_1,_require$2=draftKeyUtils,notEmptyKey=_require$2.notEmptyKey,findAncestorOffsetKey=findAncestorOffsetKey_1,keyCommandPlainBackspace$1=keyCommandPlainBackspace_1,nullthrows$3=nullthrows_1,isGecko=UserAgent$7.isEngine("Gecko"),DOUBLE_NEWLINE=`

`;function onInputType(r,s){switch(r){case"deleteContentBackward":return keyCommandPlainBackspace$1(s)}return s}function editOnInput(r,s){r._pendingStateFromBeforeInput!==void 0&&(r.update(r._pendingStateFromBeforeInput),r._pendingStateFromBeforeInput=void 0);var a=r.editor,i=a.ownerDocument.defaultView.getSelection(),o=i.anchorNode,x=i.isCollapsed,y=(o==null?void 0:o.nodeType)!==Node.TEXT_NODE&&(o==null?void 0:o.nodeType)!==Node.ELEMENT_NODE;if(!(o==null||y)){if(o.nodeType===Node.TEXT_NODE&&(o.previousSibling!==null||o.nextSibling!==null)){var _=o.parentNode;if(_==null)return;o.nodeValue=_.textContent;for(var E=_.firstChild;E!=null;E=E.nextSibling)E!==o&&_.removeChild(E)}var R=o.textContent,S=r._latestEditorState,j=nullthrows$3(findAncestorOffsetKey(o)),T=DraftOffsetKey.decode(j),A=T.blockKey,M=T.decoratorKey,P=T.leafKey,L=S.getBlockTree(A).getIn([M,"leaves",P]),D=L.start,O=L.end,B=S.getCurrentContent(),N=B.getBlockForKey(A),F=N.getText().slice(D,O);if(R.endsWith(DOUBLE_NEWLINE)&&(R=R.slice(0,-1)),R===F){var W=s.nativeEvent.inputType;if(W){var V=onInputType(W,S);if(V!==S){r.restoreEditorDOM(),r.update(V);return}}return}var U=S.getSelection(),G=U.merge({anchorOffset:D,focusOffset:O,isBackward:!1}),oe=N.getEntityAt(D),X=notEmptyKey(oe)?B.getEntity(oe):null,ee=X!=null?X.getMutability():null,ae=ee==="MUTABLE",ie=ae?"spellcheck-change":"apply-entity",se=DraftModifier$7.replaceText(B,G,R,N.getInlineStyleAt(D),ae?N.getEntityAt(D):null),Q,Z,J,te;if(isGecko)Q=i.anchorOffset,Z=i.focusOffset,J=D+Math.min(Q,Z),te=J+Math.abs(Q-Z),Q=J,Z=te;else{var de=R.length-F.length;J=U.getStartOffset(),te=U.getEndOffset(),Q=x?te+de:J,Z=te+de}var ce=se.merge({selectionBefore:B.getSelectionAfter(),selectionAfter:U.merge({anchorOffset:Q,focusOffset:Z})});r.update(EditorState$f.push(S,ce,ie))}}var editOnInput_1=editOnInput,Keys$2=Keys$4;function isSoftNewlineEvent$1(r){return r.which===Keys$2.RETURN&&(r.getModifierState("Shift")||r.getModifierState("Alt")||r.getModifierState("Control"))}var isSoftNewlineEvent_1=isSoftNewlineEvent$1,UserAgent$6=UserAgent_1,isSoftNewlineEvent=isSoftNewlineEvent_1,isOSX$1=UserAgent$6.isPlatform("Mac OS X"),KeyBindingUtil$3={isCtrlKeyCommand:function(s){return!!s.ctrlKey&&!s.altKey},isOptionKeyCommand:function(s){return isOSX$1&&s.altKey},usesMacOSHeuristics:function(){return isOSX$1},hasCommandModifier:function(s){return isOSX$1?!!s.metaKey&&!s.altKey:KeyBindingUtil$3.isCtrlKeyCommand(s)},isSoftNewlineEvent},KeyBindingUtil_1=KeyBindingUtil$3,DraftModifier$6=DraftModifier_1,EditorState$e=EditorState_1,getContentStateFragment$1=getContentStateFragment_1,nullthrows$2=nullthrows_1,clipboard$1=null,SecondaryClipboard$1={cut:function(s){var a=s.getCurrentContent(),i=s.getSelection(),o=null;if(i.isCollapsed()){var x=i.getAnchorKey(),y=a.getBlockForKey(x).getLength();if(y===i.getAnchorOffset()){var _=a.getKeyAfter(x);if(_==null)return s;o=i.set("focusKey",_).set("focusOffset",0)}else o=i.set("focusOffset",y)}else o=i;o=nullthrows$2(o),clipboard$1=getContentStateFragment$1(a,o);var E=DraftModifier$6.removeRange(a,o,"forward");return E===a?s:EditorState$e.push(s,E,"remove-range")},paste:function(s){if(!clipboard$1)return s;var a=DraftModifier$6.replaceWithFragment(s.getCurrentContent(),s.getSelection(),clipboard$1);return EditorState$e.push(s,a,"insert-fragment")}},SecondaryClipboard_1=SecondaryClipboard$1,UserAgent$5=UserAgent_1,invariant$6=invariant_1,isChrome$2=UserAgent$5.isBrowser("Chrome");function getRangeClientRectsChrome(r){for(var s=r.cloneRange(),a=[],i=r.endContainer;i!=null;i=i.parentNode){var o=i===r.commonAncestorContainer;o?s.setStart(r.startContainer,r.startOffset):s.setStart(s.endContainer,0);var x=Array.from(s.getClientRects());if(a.push(x),o){var y;return a.reverse(),(y=[]).concat.apply(y,a)}s.setEndBefore(i)}invariant$6(!1)}var getRangeClientRects$2=isChrome$2?getRangeClientRectsChrome:function(r){return Array.from(r.getClientRects())},getRangeClientRects_1=getRangeClientRects$2,UnicodeUtils$5=UnicodeUtils_1,getCorrectDocumentFromNode=getCorrectDocumentFromNode_1,getRangeClientRects$1=getRangeClientRects_1,invariant$5=invariant_1;function getLineHeightPx(r){var s=getComputedStyle(r),a=getCorrectDocumentFromNode(r),i=a.createElement("div");i.style.fontFamily=s.fontFamily,i.style.fontSize=s.fontSize,i.style.fontStyle=s.fontStyle,i.style.fontWeight=s.fontWeight,i.style.lineHeight=s.lineHeight,i.style.position="absolute",i.textContent="M";var o=a.body;o||invariant$5(!1),o.appendChild(i);var x=i.getBoundingClientRect();return o.removeChild(i),x.height}function areRectsOnOneLine(r,s){for(var a=1/0,i=1/0,o=-1/0,x=-1/0,y=0;y<r.length;y++){var _=r[y];_.width===0||_.width===1||(a=Math.min(a,_.top),i=Math.min(i,_.bottom),o=Math.max(o,_.top),x=Math.max(x,_.bottom))}return o<=i&&o-a<s&&x-i<s}function getNodeLength(r){switch(r.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return r.length;default:return r.childNodes.length}}function expandRangeToStartOfLine$1(r){r.collapsed||invariant$5(!1),r=r.cloneRange();var s=r.startContainer;s.nodeType!==1&&(s=s.parentNode);var a=getLineHeightPx(s),i=r.endContainer,o=r.endOffset;for(r.setStart(r.startContainer,0);areRectsOnOneLine(getRangeClientRects$1(r),a)&&(i=r.startContainer,o=r.startOffset,i.parentNode||invariant$5(!1),r.setStartBefore(i),!(i.nodeType===1&&getComputedStyle(i).display!=="inline")););var x=i,y=o-1;do{for(var _=x.nodeValue,E=y;E>=0;E--)if(!(_!=null&&E>0&&UnicodeUtils$5.isSurrogatePair(_,E-1)))if(r.setStart(x,E),areRectsOnOneLine(getRangeClientRects$1(r),a))i=x,o=E;else break;if(E===-1||x.childNodes.length===0)break;x=x.childNodes[E],y=getNodeLength(x)}while(!0);return r.setStart(i,o),r}var expandRangeToStartOfLine_1=expandRangeToStartOfLine$1,EditorState$d=EditorState_1,expandRangeToStartOfLine=expandRangeToStartOfLine_1,getDraftEditorSelectionWithNodes=getDraftEditorSelectionWithNodes_1,moveSelectionBackward$1=moveSelectionBackward_1,removeTextWithStrategy$3=removeTextWithStrategy_1;function keyCommandBackspaceToStartOfLine$1(r,s){var a=removeTextWithStrategy$3(r,function(i){var o=i.getSelection();if(o.isCollapsed()&&o.getAnchorOffset()===0)return moveSelectionBackward$1(i,1);var x=s.currentTarget.ownerDocument,y=x.defaultView.getSelection(),_=y.getRangeAt(0);return _=expandRangeToStartOfLine(_),getDraftEditorSelectionWithNodes(i,null,_.endContainer,_.endOffset,_.startContainer,_.startOffset).selectionState},"backward");return a===r.getCurrentContent()?r:EditorState$d.push(r,a,"remove-range")}var keyCommandBackspaceToStartOfLine_1=keyCommandBackspaceToStartOfLine$1,PUNCTUATION=`[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]`,TokenizeUtil$1={getPunctuation:function(){return PUNCTUATION}},TokenizeUtil=TokenizeUtil$1,punctuation=TokenizeUtil.getPunctuation(),CHAMELEON_CHARS="['‘’]",WHITESPACE_AND_PUNCTUATION="\\s|(?![_])"+punctuation,DELETE_STRING="^(?:"+WHITESPACE_AND_PUNCTUATION+")*(?:"+CHAMELEON_CHARS+"|(?!"+WHITESPACE_AND_PUNCTUATION+").)*(?:(?!"+WHITESPACE_AND_PUNCTUATION+").)",DELETE_REGEX=new RegExp(DELETE_STRING),BACKSPACE_STRING="(?:(?!"+WHITESPACE_AND_PUNCTUATION+").)(?:"+CHAMELEON_CHARS+"|(?!"+WHITESPACE_AND_PUNCTUATION+").)*(?:"+WHITESPACE_AND_PUNCTUATION+")*$",BACKSPACE_REGEX=new RegExp(BACKSPACE_STRING);function getRemovableWord(r,s){var a=s?BACKSPACE_REGEX.exec(r):DELETE_REGEX.exec(r);return a?a[0]:r}var DraftRemovableWord$2={getBackward:function(s){return getRemovableWord(s,!0)},getForward:function(s){return getRemovableWord(s,!1)}},DraftRemovableWord_1=DraftRemovableWord$2,DraftRemovableWord$1=DraftRemovableWord_1,EditorState$c=EditorState_1,moveSelectionBackward=moveSelectionBackward_1,removeTextWithStrategy$2=removeTextWithStrategy_1;function keyCommandBackspaceWord$1(r){var s=removeTextWithStrategy$2(r,function(a){var i=a.getSelection(),o=i.getStartOffset();if(o===0)return moveSelectionBackward(a,1);var x=i.getStartKey(),y=a.getCurrentContent(),_=y.getBlockForKey(x).getText().slice(0,o),E=DraftRemovableWord$1.getBackward(_);return moveSelectionBackward(a,E.length||1)},"backward");return s===r.getCurrentContent()?r:EditorState$c.push(r,s,"remove-range")}var keyCommandBackspaceWord_1=keyCommandBackspaceWord$1;function moveSelectionForward$2(r,s){var a=r.getSelection(),i=a.getStartKey(),o=a.getStartOffset(),x=r.getCurrentContent(),y=i,_,E=x.getBlockForKey(i);return s>E.getText().length-o?(y=x.getKeyAfter(i),_=0):_=o+s,a.merge({focusKey:y,focusOffset:_})}var moveSelectionForward_1=moveSelectionForward$2,DraftRemovableWord=DraftRemovableWord_1,EditorState$b=EditorState_1,moveSelectionForward$1=moveSelectionForward_1,removeTextWithStrategy$1=removeTextWithStrategy_1;function keyCommandDeleteWord$1(r){var s=removeTextWithStrategy$1(r,function(a){var i=a.getSelection(),o=i.getStartOffset(),x=i.getStartKey(),y=a.getCurrentContent(),_=y.getBlockForKey(x).getText().slice(o),E=DraftRemovableWord.getForward(_);return moveSelectionForward$1(a,E.length||1)},"forward");return s===r.getCurrentContent()?r:EditorState$b.push(r,s,"remove-range")}var keyCommandDeleteWord_1=keyCommandDeleteWord$1,DraftModifier$5=DraftModifier_1,EditorState$a=EditorState_1;function keyCommandInsertNewline$1(r){var s=DraftModifier$5.splitBlock(r.getCurrentContent(),r.getSelection());return EditorState$a.push(r,s,"split-block")}var keyCommandInsertNewline_1=keyCommandInsertNewline$1,EditorState$9=EditorState_1;function keyCommandMoveSelectionToEndOfBlock$1(r){var s=r.getSelection(),a=s.getEndKey(),i=r.getCurrentContent(),o=i.getBlockForKey(a).getLength();return EditorState$9.set(r,{selection:s.merge({anchorKey:a,anchorOffset:o,focusKey:a,focusOffset:o,isBackward:!1}),forceSelection:!0})}var keyCommandMoveSelectionToEndOfBlock_1=keyCommandMoveSelectionToEndOfBlock$1,EditorState$8=EditorState_1;function keyCommandMoveSelectionToStartOfBlock$1(r){var s=r.getSelection(),a=s.getStartKey();return EditorState$8.set(r,{selection:s.merge({anchorKey:a,anchorOffset:0,focusKey:a,focusOffset:0,isBackward:!1}),forceSelection:!0})}var keyCommandMoveSelectionToStartOfBlock_1=keyCommandMoveSelectionToStartOfBlock$1,EditorState$7=EditorState_1,UnicodeUtils$4=UnicodeUtils_1,moveSelectionForward=moveSelectionForward_1,removeTextWithStrategy=removeTextWithStrategy_1;function keyCommandPlainDelete$1(r){var s=removeTextWithStrategy(r,function(i){var o=i.getSelection(),x=i.getCurrentContent(),y=o.getAnchorKey(),_=o.getAnchorOffset(),E=x.getBlockForKey(y).getText()[_];return moveSelectionForward(i,E?UnicodeUtils$4.getUTF16Length(E,0):1)},"forward");if(s===r.getCurrentContent())return r;var a=r.getSelection();return EditorState$7.push(r,s.set("selectionBefore",a),a.isCollapsed()?"delete-character":"remove-range")}var keyCommandPlainDelete_1=keyCommandPlainDelete$1,DraftModifier$4=DraftModifier_1,EditorState$6=EditorState_1,getContentStateFragment=getContentStateFragment_1;function keyCommandTransposeCharacters$1(r){var s=r.getSelection();if(!s.isCollapsed())return r;var a=s.getAnchorOffset();if(a===0)return r;var i=s.getAnchorKey(),o=r.getCurrentContent(),x=o.getBlockForKey(i),y=x.getLength();if(y<=1)return r;var _,E;a===y?(_=s.set("anchorOffset",a-1),E=s):(_=s.set("focusOffset",a+1),E=_.set("anchorOffset",a+1));var R=getContentStateFragment(o,_),S=DraftModifier$4.removeRange(o,_,"backward"),j=S.getSelectionAfter(),T=j.getAnchorOffset()-1,A=j.merge({anchorOffset:T,focusOffset:T}),M=DraftModifier$4.replaceWithFragment(S,A,R),P=EditorState$6.push(r,M,"insert-fragment");return EditorState$6.acceptSelection(P,E)}var keyCommandTransposeCharacters_1=keyCommandTransposeCharacters$1,EditorState$5=EditorState_1;function keyCommandUndo$1(r,s,a){var i=EditorState$5.undo(s);if(s.getLastChangeType()==="spellcheck-change"){var o=i.getCurrentContent();a(EditorState$5.set(i,{nativelyRenderedContent:o}));return}if(r.preventDefault(),!s.getNativelyRenderedContent()){a(i);return}a(EditorState$5.set(s,{nativelyRenderedContent:null})),setTimeout(function(){a(i)},0)}var keyCommandUndo_1=keyCommandUndo$1,DraftModifier$3=DraftModifier_1,EditorState$4=EditorState_1,KeyBindingUtil$2=KeyBindingUtil_1,Keys$1=Keys$4,SecondaryClipboard=SecondaryClipboard_1,UserAgent$4=UserAgent_1,isEventHandled$1=isEventHandled_1,keyCommandBackspaceToStartOfLine=keyCommandBackspaceToStartOfLine_1,keyCommandBackspaceWord=keyCommandBackspaceWord_1,keyCommandDeleteWord=keyCommandDeleteWord_1,keyCommandInsertNewline=keyCommandInsertNewline_1,keyCommandMoveSelectionToEndOfBlock=keyCommandMoveSelectionToEndOfBlock_1,keyCommandMoveSelectionToStartOfBlock=keyCommandMoveSelectionToStartOfBlock_1,keyCommandPlainBackspace=keyCommandPlainBackspace_1,keyCommandPlainDelete=keyCommandPlainDelete_1,keyCommandTransposeCharacters=keyCommandTransposeCharacters_1,keyCommandUndo=keyCommandUndo_1,isOptionKeyCommand=KeyBindingUtil$2.isOptionKeyCommand,isChrome$1=UserAgent$4.isBrowser("Chrome");function onKeyCommand(r,s,a){switch(r){case"redo":return EditorState$4.redo(s);case"delete":return keyCommandPlainDelete(s);case"delete-word":return keyCommandDeleteWord(s);case"backspace":return keyCommandPlainBackspace(s);case"backspace-word":return keyCommandBackspaceWord(s);case"backspace-to-start-of-line":return keyCommandBackspaceToStartOfLine(s,a);case"split-block":return keyCommandInsertNewline(s);case"transpose-characters":return keyCommandTransposeCharacters(s);case"move-selection-to-start-of-block":return keyCommandMoveSelectionToStartOfBlock(s);case"move-selection-to-end-of-block":return keyCommandMoveSelectionToEndOfBlock(s);case"secondary-cut":return SecondaryClipboard.cut(s);case"secondary-paste":return SecondaryClipboard.paste(s);default:return s}}function editOnKeyDown(r,s){var a=s.which,i=r._latestEditorState;function o(E){var R=r.props[E];return R?(R(s),!0):!1}switch(a){case Keys$1.RETURN:if(s.preventDefault(),r.props.handleReturn&&isEventHandled$1(r.props.handleReturn(s,i)))return;break;case Keys$1.ESC:if(s.preventDefault(),o("onEscape"))return;break;case Keys$1.TAB:if(o("onTab"))return;break;case Keys$1.UP:if(o("onUpArrow"))return;break;case Keys$1.RIGHT:if(o("onRightArrow"))return;break;case Keys$1.DOWN:if(o("onDownArrow"))return;break;case Keys$1.LEFT:if(o("onLeftArrow"))return;break;case Keys$1.SPACE:isChrome$1&&isOptionKeyCommand(s)&&s.preventDefault()}var x=r.props.keyBindingFn(s);if(x==null||x===""){if(a===Keys$1.SPACE&&isChrome$1&&isOptionKeyCommand(s)){var y=DraftModifier$3.replaceText(i.getCurrentContent(),i.getSelection()," ");r.update(EditorState$4.push(i,y,"insert-characters"))}return}if(x==="undo"){keyCommandUndo(s,i,r.update);return}if(s.preventDefault(),!(r.props.handleKeyCommand&&isEventHandled$1(r.props.handleKeyCommand(x,i,s.timeStamp)))){var _=onKeyCommand(x,i,s);_!==i&&r.update(_)}}var editOnKeyDown_1=editOnKeyDown;function _defineProperty$a(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var URI$1=function(){function r(a){_defineProperty$a(this,"_uri",void 0),this._uri=a}var s=r.prototype;return s.toString=function(){return this._uri},r}(),URI_1=URI$1,UserAgent$3=UserAgent_1,invariant$4=invariant_1,isOldIE=UserAgent$3.isBrowser("IE <= 9");function getSafeBodyFromHTML$2(r){var s,a=null;return!isOldIE&&document.implementation&&document.implementation.createHTMLDocument&&(s=document.implementation.createHTMLDocument("foo"),s.documentElement||invariant$4(!1),s.documentElement.innerHTML=r,a=s.getElementsByTagName("body")[0]),a}var getSafeBodyFromHTML_1=getSafeBodyFromHTML$2,isElement$1=isElement_1;function isHTMLAnchorElement$1(r){return!r||!r.ownerDocument?!1:isElement$1(r)&&r.nodeName==="A"}var isHTMLAnchorElement_1=isHTMLAnchorElement$1,isElement=isElement_1;function isHTMLImageElement$1(r){return!r||!r.ownerDocument?!1:isElement(r)&&r.nodeName==="IMG"}var isHTMLImageElement_1=isHTMLImageElement$1,_knownListItemDepthCl;function _objectSpread$5(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$9(r,o,a[o])})}return r}function _defineProperty$9(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var CharacterMetadata$3=CharacterMetadata_1,ContentBlock$4=ContentBlock_1,ContentBlockNode$3=ContentBlockNode_1,DefaultDraftBlockRenderMap$2=DefaultDraftBlockRenderMap_1,DraftEntity$2=DraftEntity_1,URI=URI_1,cx$2=cx_1,generateRandomKey$5=generateRandomKey_1,getSafeBodyFromHTML$1=getSafeBodyFromHTML_1,gkx$3=gkx$8,_require$1=immutableExports,List$3=_require$1.List,Map$2=_require$1.Map,OrderedSet$1=_require$1.OrderedSet,isHTMLAnchorElement=isHTMLAnchorElement_1,isHTMLBRElement=isHTMLBRElement_1,isHTMLElement$3=isHTMLElement_1,isHTMLImageElement=isHTMLImageElement_1,experimentalTreeDataSupport$2=gkx$3("draft_tree_data_support"),NBSP$1="&nbsp;",SPACE=" ",REGEX_CR=new RegExp("\r","g"),REGEX_LF=new RegExp(`
`,"g"),REGEX_LEADING_LF=new RegExp(`^
`,"g"),REGEX_NBSP=new RegExp(NBSP$1,"g"),REGEX_CARRIAGE=new RegExp("&#13;?","g"),REGEX_ZWS=new RegExp("&#8203;?","g"),boldValues=["bold","bolder","500","600","700","800","900"],notBoldValues=["light","lighter","normal","100","200","300","400"],anchorAttr=["className","href","rel","target","title"],imgAttr=["alt","className","height","src","width"],knownListItemDepthClasses=(_knownListItemDepthCl={},_defineProperty$9(_knownListItemDepthCl,cx$2("public/DraftStyleDefault/depth0"),0),_defineProperty$9(_knownListItemDepthCl,cx$2("public/DraftStyleDefault/depth1"),1),_defineProperty$9(_knownListItemDepthCl,cx$2("public/DraftStyleDefault/depth2"),2),_defineProperty$9(_knownListItemDepthCl,cx$2("public/DraftStyleDefault/depth3"),3),_defineProperty$9(_knownListItemDepthCl,cx$2("public/DraftStyleDefault/depth4"),4),_knownListItemDepthCl),HTMLTagToRawInlineStyleMap=Map$2({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),buildBlockTypeMap=function(s){var a={};return s.mapKeys(function(i,o){var x=[o.element];o.aliasedElements!==void 0&&x.push.apply(x,o.aliasedElements),x.forEach(function(y){a[y]===void 0?a[y]=i:typeof a[y]=="string"?a[y]=[a[y],i]:a[y].push(i)})}),Map$2(a)},detectInlineStyle=function(s){if(isHTMLElement$3(s)){var a=s;if(a.style.fontFamily.includes("monospace"))return"CODE"}return null},getListItemDepth=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object.keys(knownListItemDepthClasses).some(function(i){s.classList.contains(i)&&(a=knownListItemDepthClasses[i])}),a},isValidAnchor=function(s){if(!isHTMLAnchorElement(s))return!1;var a=s;if(!a.href||a.protocol!=="http:"&&a.protocol!=="https:"&&a.protocol!=="mailto:"&&a.protocol!=="tel:")return!1;try{var i=new URI(a.href);return!0}catch{return!1}},isValidImage=function(s){if(!isHTMLImageElement(s))return!1;var a=s;return!!(a.attributes.getNamedItem("src")&&a.attributes.getNamedItem("src").value)},styleFromNodeAttributes=function(s,a){if(!isHTMLElement$3(s))return a;var i=s,o=i.style.fontWeight,x=i.style.fontStyle,y=i.style.textDecoration;return a.withMutations(function(_){boldValues.indexOf(o)>=0?_.add("BOLD"):notBoldValues.indexOf(o)>=0&&_.remove("BOLD"),x==="italic"?_.add("ITALIC"):x==="normal"&&_.remove("ITALIC"),y==="underline"&&_.add("UNDERLINE"),y==="line-through"&&_.add("STRIKETHROUGH"),y==="none"&&(_.remove("UNDERLINE"),_.remove("STRIKETHROUGH"))})},isListNode=function(s){return s==="ul"||s==="ol"},ContentBlocksBuilder=function(){function r(a,i){_defineProperty$9(this,"characterList",List$3()),_defineProperty$9(this,"currentBlockType","unstyled"),_defineProperty$9(this,"currentDepth",0),_defineProperty$9(this,"currentEntity",null),_defineProperty$9(this,"currentText",""),_defineProperty$9(this,"wrapper",null),_defineProperty$9(this,"blockConfigs",[]),_defineProperty$9(this,"contentBlocks",[]),_defineProperty$9(this,"entityMap",DraftEntity$2),_defineProperty$9(this,"blockTypeMap",void 0),_defineProperty$9(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=a,this.disambiguate=i}var s=r.prototype;return s.clear=function(){this.characterList=List$3(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=DraftEntity$2,this.wrapper=null,this.contentBlocks=[]},s.addDOMNode=function(i){var o;return this.contentBlocks=[],this.currentDepth=0,(o=this.blockConfigs).push.apply(o,this._toBlockConfigs([i],OrderedSet$1())),this._trimCurrentText(),this.currentText!==""&&this.blockConfigs.push(this._makeBlockConfig()),this},s.getContentBlocks=function(){return this.contentBlocks.length===0&&(experimentalTreeDataSupport$2?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},s._makeBlockConfig=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.key||generateRandomKey$5(),x=_objectSpread$5({key:o,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:List$3(),prevSibling:null,nextSibling:null,childConfigs:[]},i);return this.characterList=List$3(),this.currentBlockType="unstyled",this.currentText="",x},s._toBlockConfigs=function(i,o){for(var x=[],y=0;y<i.length;y++){var _=i[y],E=_.nodeName.toLowerCase();if(E==="body"||isListNode(E)){this._trimCurrentText(),this.currentText!==""&&x.push(this._makeBlockConfig());var R=this.currentDepth,S=this.wrapper;isListNode(E)&&(this.wrapper=E,isListNode(S)&&this.currentDepth++),x.push.apply(x,this._toBlockConfigs(Array.from(_.childNodes),o)),this.currentDepth=R,this.wrapper=S;continue}var j=this.blockTypeMap.get(E);if(j!==void 0){this._trimCurrentText(),this.currentText!==""&&x.push(this._makeBlockConfig());var T=this.currentDepth,A=this.wrapper;if(this.wrapper=E==="pre"?"pre":this.wrapper,typeof j!="string"&&(j=this.disambiguate(E,this.wrapper)||j[0]||"unstyled"),!experimentalTreeDataSupport$2&&isHTMLElement$3(_)&&(j==="unordered-list-item"||j==="ordered-list-item")){var M=_;this.currentDepth=getListItemDepth(M,this.currentDepth)}var P=generateRandomKey$5(),L=this._toBlockConfigs(Array.from(_.childNodes),o);this._trimCurrentText(),x.push(this._makeBlockConfig({key:P,childConfigs:L,type:j})),this.currentDepth=T,this.wrapper=A;continue}if(E==="#text"){this._addTextNode(_,o);continue}if(E==="br"){this._addBreakNode(_,o);continue}if(isValidImage(_)){this._addImgNode(_,o);continue}if(isValidAnchor(_)){this._addAnchorNode(_,x,o);continue}var D=o;HTMLTagToRawInlineStyleMap.has(E)&&(D=D.add(HTMLTagToRawInlineStyleMap.get(E))),D=styleFromNodeAttributes(_,D);var O=detectInlineStyle(_);O!=null&&(D=D.add(O)),x.push.apply(x,this._toBlockConfigs(Array.from(_.childNodes),D))}return x},s._appendText=function(i,o){var x;this.currentText+=i;var y=CharacterMetadata$3.create({style:o,entity:this.currentEntity});this.characterList=(x=this.characterList).push.apply(x,Array(i.length).fill(y))},s._trimCurrentText=function(){var i=this.currentText.length,o=i-this.currentText.trimLeft().length,x=this.currentText.trimRight().length,y=this.characterList.findEntry(function(_){return _.getEntity()!==null});o=y!==void 0?Math.min(o,y[0]):o,y=this.characterList.reverse().findEntry(function(_){return _.getEntity()!==null}),x=y!==void 0?Math.max(x,i-y[0]):x,o>x?(this.currentText="",this.characterList=List$3()):(this.currentText=this.currentText.slice(o,x),this.characterList=this.characterList.slice(o,x))},s._addTextNode=function(i,o){var x=i.textContent,y=x.trim();y===""&&this.wrapper!=="pre"&&(x=" "),this.wrapper!=="pre"&&(x=x.replace(REGEX_LEADING_LF,""),x=x.replace(REGEX_LF,SPACE)),this._appendText(x,o)},s._addBreakNode=function(i,o){isHTMLBRElement(i)&&this._appendText(`
`,o)},s._addImgNode=function(i,o){if(isHTMLImageElement(i)){var x=i,y={};imgAttr.forEach(function(_){var E=x.getAttribute(_);E&&(y[_]=E)}),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",y),gkx$3("draftjs_fix_paste_for_img")?x.getAttribute("role")!=="presentation"&&this._appendText("📷",o):this._appendText("📷",o),this.currentEntity=null}},s._addAnchorNode=function(i,o,x){if(isHTMLAnchorElement(i)){var y=i,_={};anchorAttr.forEach(function(E){var R=y.getAttribute(E);R&&(_[E]=R)}),_.url=new URI(y.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",_||{}),o.push.apply(o,this._toBlockConfigs(Array.from(i.childNodes),x)),this.currentEntity=null}},s._toContentBlocks=function(i){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,x=i.length-1,y=0;y<=x;y++){var _=i[y];_.parent=o,_.prevSibling=y>0?i[y-1].key:null,_.nextSibling=y<x?i[y+1].key:null,_.children=List$3(_.childConfigs.map(function(E){return E.key})),this.contentBlocks.push(new ContentBlockNode$3(_objectSpread$5({},_))),this._toContentBlocks(_.childConfigs,_.key)}},s._hoistContainersInBlockConfigs=function(i){var o=this,x=List$3(i).flatMap(function(y){return y.type!=="unstyled"||y.text!==""?[y]:o._hoistContainersInBlockConfigs(y.childConfigs)});return x},s._toFlatContentBlocks=function(i){var o=this,x=this._hoistContainersInBlockConfigs(i);x.forEach(function(y){var _=o._extractTextFromBlockConfigs(y.childConfigs),E=_.text,R=_.characterList;o.contentBlocks.push(new ContentBlock$4(_objectSpread$5({},y,{text:y.text+E,characterList:y.characterList.concat(R)})))})},s._extractTextFromBlockConfigs=function(i){for(var o=i.length-1,x="",y=List$3(),_=0;_<=o;_++){var E=i[_];x+=E.text,y=y.concat(E.characterList),x!==""&&E.type!=="unstyled"&&(x+=`
`,y=y.push(y.last()));var R=this._extractTextFromBlockConfigs(E.childConfigs);x+=R.text,y=y.concat(R.characterList)}return{text:x,characterList:y}},r}(),convertFromHTMLToContentBlocks$1=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getSafeBodyFromHTML$1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DefaultDraftBlockRenderMap$2;s=s.trim().replace(REGEX_CR,"").replace(REGEX_NBSP,SPACE).replace(REGEX_CARRIAGE,"").replace(REGEX_ZWS,"");var o=a(s);if(!o)return null;var x=buildBlockTypeMap(i),y=function(E,R){return E==="li"?R==="ol"?"ordered-list-item":"unordered-list-item":null};return new ContentBlocksBuilder(x,y).addDOMNode(o).getContentBlocks()},convertFromHTMLToContentBlocks_1=convertFromHTMLToContentBlocks$1;function _objectSpread$4(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$8(r,o,a[o])})}return r}function _defineProperty$8(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var ContentBlock$3=ContentBlock_1,ContentBlockNode$2=ContentBlockNode_1,convertFromHTMLToContentBlocks=convertFromHTMLToContentBlocks_1,generateRandomKey$4=generateRandomKey_1,getSafeBodyFromHTML=getSafeBodyFromHTML_1,gkx$2=gkx$8,Immutable$2=immutableExports,sanitizeDraftText=sanitizeDraftText_1,List$2=Immutable$2.List,Repeat=Immutable$2.Repeat,experimentalTreeDataSupport$1=gkx$2("draft_tree_data_support"),ContentBlockRecord=experimentalTreeDataSupport$1?ContentBlockNode$2:ContentBlock$3,DraftPasteProcessor$1={processHTML:function(s,a){return convertFromHTMLToContentBlocks(s,getSafeBodyFromHTML,a)},processText:function(s,a,i){return s.reduce(function(o,x,y){x=sanitizeDraftText(x);var _=generateRandomKey$4(),E={key:_,type:i,text:x,characterList:List$2(Repeat(a,x.length))};if(experimentalTreeDataSupport$1&&y!==0){var R=y-1,S=o[R]=o[R].merge({nextSibling:_});E=_objectSpread$4({},E,{prevSibling:S.getKey()})}return o.push(new ContentBlockRecord(E)),o},[])}},DraftPasteProcessor_1=DraftPasteProcessor$1;function adjustBlockDepthForContentState$1(r,s,a,i){var o=s.getStartKey(),x=s.getEndKey(),y=r.getBlockMap(),_=y.toSeq().skipUntil(function(E,R){return R===o}).takeUntil(function(E,R){return R===x}).concat([[x,y.get(x)]]).map(function(E){var R=E.getDepth()+a;return R=Math.max(0,Math.min(R,i)),E.set("depth",R)});return y=y.merge(_),r.merge({blockMap:y,selectionBefore:s,selectionAfter:s})}var adjustBlockDepthForContentState_1=adjustBlockDepthForContentState$1,DraftModifier$2=DraftModifier_1,EditorState$3=EditorState_1,adjustBlockDepthForContentState=adjustBlockDepthForContentState_1,nullthrows$1=nullthrows_1,RichTextEditorUtil$2={currentBlockContainsLink:function(s){var a=s.getSelection(),i=s.getCurrentContent(),o=i.getEntityMap();return i.getBlockForKey(a.getAnchorKey()).getCharacterList().slice(a.getStartOffset(),a.getEndOffset()).some(function(x){var y=x.getEntity();return!!y&&o.__get(y).getType()==="LINK"})},getCurrentBlockType:function(s){var a=s.getSelection();return s.getCurrentContent().getBlockForKey(a.getStartKey()).getType()},getDataObjectForLinkURL:function(s){return{url:s.toString()}},handleKeyCommand:function(s,a,i){switch(a){case"bold":return RichTextEditorUtil$2.toggleInlineStyle(s,"BOLD");case"italic":return RichTextEditorUtil$2.toggleInlineStyle(s,"ITALIC");case"underline":return RichTextEditorUtil$2.toggleInlineStyle(s,"UNDERLINE");case"code":return RichTextEditorUtil$2.toggleCode(s);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return RichTextEditorUtil$2.onBackspace(s);case"delete":case"delete-word":case"delete-to-end-of-block":return RichTextEditorUtil$2.onDelete(s);default:return null}},insertSoftNewline:function(s){var a=DraftModifier$2.insertText(s.getCurrentContent(),s.getSelection(),`
`,s.getCurrentInlineStyle(),null),i=EditorState$3.push(s,a,"insert-characters");return EditorState$3.forceSelection(i,a.getSelectionAfter())},onBackspace:function(s){var a=s.getSelection();if(!a.isCollapsed()||a.getAnchorOffset()||a.getFocusOffset())return null;var i=s.getCurrentContent(),o=a.getStartKey(),x=i.getBlockBefore(o);if(x&&x.getType()==="atomic"){var y=i.getBlockMap().delete(x.getKey()),_=i.merge({blockMap:y,selectionAfter:a});if(_!==i)return EditorState$3.push(s,_,"remove-range")}var E=RichTextEditorUtil$2.tryToRemoveBlockStyle(s);return E?EditorState$3.push(s,E,"change-block-type"):null},onDelete:function(s){var a=s.getSelection();if(!a.isCollapsed())return null;var i=s.getCurrentContent(),o=a.getStartKey(),x=i.getBlockForKey(o),y=x.getLength();if(a.getStartOffset()<y)return null;var _=i.getBlockAfter(o);if(!_||_.getType()!=="atomic")return null;var E=a.merge({focusKey:_.getKey(),focusOffset:_.getLength()}),R=DraftModifier$2.removeRange(i,E,"forward");return R!==i?EditorState$3.push(s,R,"remove-range"):null},onTab:function(s,a,i){var o=a.getSelection(),x=o.getAnchorKey();if(x!==o.getFocusKey())return a;var y=a.getCurrentContent(),_=y.getBlockForKey(x),E=_.getType();if(E!=="unordered-list-item"&&E!=="ordered-list-item")return a;s.preventDefault();var R=_.getDepth();if(!s.shiftKey&&R===i)return a;var S=adjustBlockDepthForContentState(y,o,s.shiftKey?-1:1,i);return EditorState$3.push(a,S,"adjust-depth")},toggleBlockType:function(s,a){var i=s.getSelection(),o=i.getStartKey(),x=i.getEndKey(),y=s.getCurrentContent(),_=i;if(o!==x&&i.getEndOffset()===0){var E=nullthrows$1(y.getBlockBefore(x));x=E.getKey(),_=_.merge({anchorKey:o,anchorOffset:i.getStartOffset(),focusKey:x,focusOffset:E.getLength(),isBackward:!1})}var R=y.getBlockMap().skipWhile(function(j,T){return T!==o}).reverse().skipWhile(function(j,T){return T!==x}).some(function(j){return j.getType()==="atomic"});if(R)return s;var S=y.getBlockForKey(o).getType()===a?"unstyled":a;return EditorState$3.push(s,DraftModifier$2.setBlockType(y,_,S),"change-block-type")},toggleCode:function(s){var a=s.getSelection(),i=a.getAnchorKey(),o=a.getFocusKey();return a.isCollapsed()||i!==o?RichTextEditorUtil$2.toggleBlockType(s,"code-block"):RichTextEditorUtil$2.toggleInlineStyle(s,"CODE")},toggleInlineStyle:function(s,a){var i=s.getSelection(),o=s.getCurrentInlineStyle();if(i.isCollapsed())return EditorState$3.setInlineStyleOverride(s,o.has(a)?o.remove(a):o.add(a));var x=s.getCurrentContent(),y;return o.has(a)?y=DraftModifier$2.removeInlineStyle(x,i,a):y=DraftModifier$2.applyInlineStyle(x,i,a),EditorState$3.push(s,y,"change-inline-style")},toggleLink:function(s,a,i){var o=DraftModifier$2.applyEntity(s.getCurrentContent(),a,i);return EditorState$3.push(s,o,"apply-entity")},tryToRemoveBlockStyle:function(s){var a=s.getSelection(),i=a.getAnchorOffset();if(a.isCollapsed()&&i===0){var o=a.getAnchorKey(),x=s.getCurrentContent(),y=x.getBlockForKey(o),_=y.getType(),E=x.getBlockBefore(o);if(_==="code-block"&&E&&E.getType()==="code-block"&&E.getLength()!==0)return null;if(_!=="unstyled")return DraftModifier$2.setBlockType(x,a,"unstyled")}return null}},RichTextEditorUtil_1=RichTextEditorUtil$2,NEWLINE_REGEX$1=/\r\n?|\n/g;function splitTextIntoTextBlocks$1(r){return r.split(NEWLINE_REGEX$1)}var splitTextIntoTextBlocks_1=splitTextIntoTextBlocks$1,BlockMapBuilder$1=BlockMapBuilder_1,CharacterMetadata$2=CharacterMetadata_1,DataTransfer$1=DataTransfer_1,DraftModifier$1=DraftModifier_1,DraftPasteProcessor=DraftPasteProcessor_1,EditorState$2=EditorState_1,RichTextEditorUtil$1=RichTextEditorUtil_1,getEntityKeyForSelection=getEntityKeyForSelection_1,getTextContentFromFiles=getTextContentFromFiles_1,isEventHandled=isEventHandled_1,splitTextIntoTextBlocks=splitTextIntoTextBlocks_1;function editOnPaste(r,s){s.preventDefault();var a=new DataTransfer$1(s.clipboardData);if(!a.isRichText()){var i=a.getFiles(),o=a.getText();if(i.length>0){if(r.props.handlePastedFiles&&isEventHandled(r.props.handlePastedFiles(i)))return;getTextContentFromFiles(i,function(W){if(W=W||o,!!W){var V=r._latestEditorState,U=splitTextIntoTextBlocks(W),G=CharacterMetadata$2.create({style:V.getCurrentInlineStyle(),entity:getEntityKeyForSelection(V.getCurrentContent(),V.getSelection())}),oe=RichTextEditorUtil$1.getCurrentBlockType(V),X=DraftPasteProcessor.processText(U,G,oe),ee=BlockMapBuilder$1.createFromArray(X),ae=DraftModifier$1.replaceWithFragment(V.getCurrentContent(),V.getSelection(),ee);r.update(EditorState$2.push(V,ae,"insert-fragment"))}});return}}var x=[],y=a.getText(),_=a.getHTML(),E=r._latestEditorState;if(r.props.formatPastedText){var R=r.props.formatPastedText(y,_),S=R.text,j=R.html;y=S,_=j}if(!(r.props.handlePastedText&&isEventHandled(r.props.handlePastedText(y,_,E)))){if(y&&(x=splitTextIntoTextBlocks(y)),!r.props.stripPastedStyles){var T=r.getClipboard();if(!r.props.formatPastedText&&a.isRichText()&&T){var A;if(((A=_)===null||A===void 0?void 0:A.indexOf(r.getEditorKey()))!==-1||x.length===1&&T.size===1&&T.first().getText()===y){r.update(insertFragment(r._latestEditorState,T));return}}else if(T&&a.types.includes("com.apple.webarchive")&&!a.types.includes("text/html")&&areTextBlocksAndClipboardEqual(x,T)){r.update(insertFragment(r._latestEditorState,T));return}if(_){var M=DraftPasteProcessor.processHTML(_,r.props.blockRenderMap);if(M){var P=M.contentBlocks,L=M.entityMap;if(P){var D=BlockMapBuilder$1.createFromArray(P);r.update(insertFragment(r._latestEditorState,D,L));return}}}r.setClipboard(null)}if(x.length){var O=CharacterMetadata$2.create({style:E.getCurrentInlineStyle(),entity:getEntityKeyForSelection(E.getCurrentContent(),E.getSelection())}),B=RichTextEditorUtil$1.getCurrentBlockType(E),N=DraftPasteProcessor.processText(x,O,B),F=BlockMapBuilder$1.createFromArray(N);r.update(insertFragment(r._latestEditorState,F))}}}function insertFragment(r,s,a){var i=DraftModifier$1.replaceWithFragment(r.getCurrentContent(),r.getSelection(),s);return EditorState$2.push(r,i.set("entityMap",a),"insert-fragment")}function areTextBlocksAndClipboardEqual(r,s){return r.length===s.size&&s.valueSeq().every(function(a,i){return a.getText()===r[i]})}var editOnPaste_1=editOnPaste,UserAgent$2=UserAgent_1,onBeforeInput=editOnBeforeInput_1,onBlur$1=editOnBlur_1,onCompositionStart=editOnCompositionStart_1,onCopy=editOnCopy_1,onCut=editOnCut_1,onDragOver=editOnDragOver_1,onDragStart=editOnDragStart_1,onFocus$1=editOnFocus_1,onInput=editOnInput_1,onKeyDown=editOnKeyDown_1,onPaste=editOnPaste_1,onSelect=editOnSelect_1,isChrome=UserAgent$2.isBrowser("Chrome"),isFirefox=UserAgent$2.isBrowser("Firefox"),selectionHandler=isChrome||isFirefox?onSelect:function(r){},DraftEditorEditHandler$1={onBeforeInput,onBlur:onBlur$1,onCompositionStart,onCopy,onCut,onDragOver,onDragStart,onFocus:onFocus$1,onInput,onKeyDown,onPaste,onSelect,onMouseUp:selectionHandler,onKeyUp:selectionHandler},DraftEditorEditHandler_1=DraftEditorEditHandler$1,ReactDOMComet=reactDomExports,flushControlled$1=ReactDOMComet.unstable_flushControlled,DraftEditorFlushControlled=flushControlled$1;function _inheritsLoose$2(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var React$1=reactExports,cx$1=cx_1,DraftEditorPlaceholder$1=function(r){_inheritsLoose$2(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.shouldComponentUpdate=function(o){return this.props.text!==o.text||this.props.editorState.getSelection().getHasFocus()!==o.editorState.getSelection().getHasFocus()},a.render=function(){var o=this.props.editorState.getSelection().getHasFocus(),x=cx$1({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":o}),y={whiteSpace:"pre-wrap"};return React$1.createElement("div",{className:x},React$1.createElement("div",{className:cx$1("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:y},this.props.text))},s}(React$1.Component),DraftEditorPlaceholder_react=DraftEditorPlaceholder$1,KeyBindingUtil$1=KeyBindingUtil_1,Keys=Keys$4,UserAgent$1=UserAgent_1,isOSX=UserAgent$1.isPlatform("Mac OS X"),shouldFixFirefoxMovement=isOSX&&UserAgent$1.isBrowser("Firefox < 29"),hasCommandModifier=KeyBindingUtil$1.hasCommandModifier,isCtrlKeyCommand=KeyBindingUtil$1.isCtrlKeyCommand;function shouldRemoveWord(r){return isOSX&&r.altKey||isCtrlKeyCommand(r)}function getZCommand(r){return hasCommandModifier(r)?r.shiftKey?"redo":"undo":null}function getDeleteCommand(r){return!isOSX&&r.shiftKey?null:shouldRemoveWord(r)?"delete-word":"delete"}function getBackspaceCommand(r){return hasCommandModifier(r)&&isOSX?"backspace-to-start-of-line":shouldRemoveWord(r)?"backspace-word":"backspace"}function getDefaultKeyBinding$2(r){switch(r.keyCode){case 66:return hasCommandModifier(r)?"bold":null;case 68:return isCtrlKeyCommand(r)?"delete":null;case 72:return isCtrlKeyCommand(r)?"backspace":null;case 73:return hasCommandModifier(r)?"italic":null;case 74:return hasCommandModifier(r)?"code":null;case 75:return isOSX&&isCtrlKeyCommand(r)?"secondary-cut":null;case 77:return isCtrlKeyCommand(r)?"split-block":null;case 79:return isCtrlKeyCommand(r)?"split-block":null;case 84:return isOSX&&isCtrlKeyCommand(r)?"transpose-characters":null;case 85:return hasCommandModifier(r)?"underline":null;case 87:return isOSX&&isCtrlKeyCommand(r)?"backspace-word":null;case 89:return isCtrlKeyCommand(r)?isOSX?"secondary-paste":"redo":null;case 90:return getZCommand(r)||null;case Keys.RETURN:return"split-block";case Keys.DELETE:return getDeleteCommand(r);case Keys.BACKSPACE:return getBackspaceCommand(r);case Keys.LEFT:return shouldFixFirefoxMovement&&hasCommandModifier(r)?"move-selection-to-start-of-block":null;case Keys.RIGHT:return shouldFixFirefoxMovement&&hasCommandModifier(r)?"move-selection-to-end-of-block":null;default:return null}}var getDefaultKeyBinding_1=getDefaultKeyBinding$2,_assign=objectAssign;function _extends$5(){return _extends$5=_assign||function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$5.apply(this,arguments)}function _objectSpread$3(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$7(r,o,a[o])})}return r}function _assertThisInitialized(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _defineProperty$7(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function _inheritsLoose$1(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s}var DefaultDraftBlockRenderMap$1=DefaultDraftBlockRenderMap_1,DefaultDraftInlineStyle$1=DefaultDraftInlineStyle$2,DraftEditorCompositionHandler=DraftEditorCompositionHandler_1,DraftEditorContents=DraftEditorContents_react,DraftEditorDragHandler=DraftEditorDragHandler_1,DraftEditorEditHandler=DraftEditorEditHandler_1,flushControlled=DraftEditorFlushControlled,DraftEditorPlaceholder=DraftEditorPlaceholder_react,DraftEffects=DraftEffects$2,EditorState$1=EditorState_1,React=reactExports,Scroll=Scroll_1,Style=Style_1,UserAgent=UserAgent_1,cx=cx_1,generateRandomKey$3=generateRandomKey_1,getDefaultKeyBinding$1=getDefaultKeyBinding_1,getScrollPosition=getScrollPosition_1,gkx$1=gkx$8,invariant$3=invariant_1,isHTMLElement$2=isHTMLElement_1,nullthrows=nullthrows_1,isIE=UserAgent.isBrowser("IE"),allowSpellCheck=!isIE,handlerMap={edit:DraftEditorEditHandler,composite:DraftEditorCompositionHandler,drag:DraftEditorDragHandler,cut:null,render:null},didInitODS=!1,UpdateDraftEditorFlags=function(r){_inheritsLoose$1(s,r);function s(){return r.apply(this,arguments)||this}var a=s.prototype;return a.render=function(){return null},a.componentDidMount=function(){this._update()},a.componentDidUpdate=function(){this._update()},a._update=function(){var o=this.props.editor;o._latestEditorState=this.props.editorState,o._blockSelectEvents=!0},s}(React.Component),DraftEditor$1=function(r){_inheritsLoose$1(s,r);function s(i){var o;return o=r.call(this,i)||this,_defineProperty$7(_assertThisInitialized(o),"_blockSelectEvents",void 0),_defineProperty$7(_assertThisInitialized(o),"_clipboard",void 0),_defineProperty$7(_assertThisInitialized(o),"_handler",void 0),_defineProperty$7(_assertThisInitialized(o),"_dragCount",void 0),_defineProperty$7(_assertThisInitialized(o),"_internalDrag",void 0),_defineProperty$7(_assertThisInitialized(o),"_editorKey",void 0),_defineProperty$7(_assertThisInitialized(o),"_placeholderAccessibilityID",void 0),_defineProperty$7(_assertThisInitialized(o),"_latestEditorState",void 0),_defineProperty$7(_assertThisInitialized(o),"_latestCommittedEditorState",void 0),_defineProperty$7(_assertThisInitialized(o),"_pendingStateFromBeforeInput",void 0),_defineProperty$7(_assertThisInitialized(o),"_onBeforeInput",void 0),_defineProperty$7(_assertThisInitialized(o),"_onBlur",void 0),_defineProperty$7(_assertThisInitialized(o),"_onCharacterData",void 0),_defineProperty$7(_assertThisInitialized(o),"_onCompositionEnd",void 0),_defineProperty$7(_assertThisInitialized(o),"_onCompositionStart",void 0),_defineProperty$7(_assertThisInitialized(o),"_onCopy",void 0),_defineProperty$7(_assertThisInitialized(o),"_onCut",void 0),_defineProperty$7(_assertThisInitialized(o),"_onDragEnd",void 0),_defineProperty$7(_assertThisInitialized(o),"_onDragOver",void 0),_defineProperty$7(_assertThisInitialized(o),"_onDragStart",void 0),_defineProperty$7(_assertThisInitialized(o),"_onDrop",void 0),_defineProperty$7(_assertThisInitialized(o),"_onInput",void 0),_defineProperty$7(_assertThisInitialized(o),"_onFocus",void 0),_defineProperty$7(_assertThisInitialized(o),"_onKeyDown",void 0),_defineProperty$7(_assertThisInitialized(o),"_onKeyPress",void 0),_defineProperty$7(_assertThisInitialized(o),"_onKeyUp",void 0),_defineProperty$7(_assertThisInitialized(o),"_onMouseDown",void 0),_defineProperty$7(_assertThisInitialized(o),"_onMouseUp",void 0),_defineProperty$7(_assertThisInitialized(o),"_onPaste",void 0),_defineProperty$7(_assertThisInitialized(o),"_onSelect",void 0),_defineProperty$7(_assertThisInitialized(o),"editor",void 0),_defineProperty$7(_assertThisInitialized(o),"editorContainer",void 0),_defineProperty$7(_assertThisInitialized(o),"focus",void 0),_defineProperty$7(_assertThisInitialized(o),"blur",void 0),_defineProperty$7(_assertThisInitialized(o),"setMode",void 0),_defineProperty$7(_assertThisInitialized(o),"exitCurrentMode",void 0),_defineProperty$7(_assertThisInitialized(o),"restoreEditorDOM",void 0),_defineProperty$7(_assertThisInitialized(o),"setClipboard",void 0),_defineProperty$7(_assertThisInitialized(o),"getClipboard",void 0),_defineProperty$7(_assertThisInitialized(o),"getEditorKey",void 0),_defineProperty$7(_assertThisInitialized(o),"update",void 0),_defineProperty$7(_assertThisInitialized(o),"onDragEnter",void 0),_defineProperty$7(_assertThisInitialized(o),"onDragLeave",void 0),_defineProperty$7(_assertThisInitialized(o),"_handleEditorContainerRef",function(x){o.editorContainer=x,o.editor=x!==null?x.firstChild:null}),_defineProperty$7(_assertThisInitialized(o),"focus",function(x){var y=o.props.editorState,_=y.getSelection().getHasFocus(),E=o.editor;if(E){var R=Style.getScrollParent(E),S=x||getScrollPosition(R),j=S.x,T=S.y;isHTMLElement$2(E)||invariant$3(!1),E.focus(),R===window?window.scrollTo(j,T):Scroll.setTop(R,T),_||o.update(EditorState$1.forceSelection(y,y.getSelection()))}}),_defineProperty$7(_assertThisInitialized(o),"blur",function(){var x=o.editor;x&&(isHTMLElement$2(x)||invariant$3(!1),x.blur())}),_defineProperty$7(_assertThisInitialized(o),"setMode",function(x){var y=o.props,_=y.onPaste,E=y.onCut,R=y.onCopy,S=_objectSpread$3({},handlerMap.edit);_&&(S.onPaste=_),E&&(S.onCut=E),R&&(S.onCopy=R);var j=_objectSpread$3({},handlerMap,{edit:S});o._handler=j[x]}),_defineProperty$7(_assertThisInitialized(o),"exitCurrentMode",function(){o.setMode("edit")}),_defineProperty$7(_assertThisInitialized(o),"restoreEditorDOM",function(x){o.setState({contentsKey:o.state.contentsKey+1},function(){o.focus(x)})}),_defineProperty$7(_assertThisInitialized(o),"setClipboard",function(x){o._clipboard=x}),_defineProperty$7(_assertThisInitialized(o),"getClipboard",function(){return o._clipboard}),_defineProperty$7(_assertThisInitialized(o),"update",function(x){o._latestEditorState=x,o.props.onChange(x)}),_defineProperty$7(_assertThisInitialized(o),"onDragEnter",function(){o._dragCount++}),_defineProperty$7(_assertThisInitialized(o),"onDragLeave",function(){o._dragCount--,o._dragCount===0&&o.exitCurrentMode()}),o._blockSelectEvents=!1,o._clipboard=null,o._handler=null,o._dragCount=0,o._editorKey=i.editorKey||generateRandomKey$3(),o._placeholderAccessibilityID="placeholder-"+o._editorKey,o._latestEditorState=i.editorState,o._latestCommittedEditorState=i.editorState,o._onBeforeInput=o._buildHandler("onBeforeInput"),o._onBlur=o._buildHandler("onBlur"),o._onCharacterData=o._buildHandler("onCharacterData"),o._onCompositionEnd=o._buildHandler("onCompositionEnd"),o._onCompositionStart=o._buildHandler("onCompositionStart"),o._onCopy=o._buildHandler("onCopy"),o._onCut=o._buildHandler("onCut"),o._onDragEnd=o._buildHandler("onDragEnd"),o._onDragOver=o._buildHandler("onDragOver"),o._onDragStart=o._buildHandler("onDragStart"),o._onDrop=o._buildHandler("onDrop"),o._onInput=o._buildHandler("onInput"),o._onFocus=o._buildHandler("onFocus"),o._onKeyDown=o._buildHandler("onKeyDown"),o._onKeyPress=o._buildHandler("onKeyPress"),o._onKeyUp=o._buildHandler("onKeyUp"),o._onMouseDown=o._buildHandler("onMouseDown"),o._onMouseUp=o._buildHandler("onMouseUp"),o._onPaste=o._buildHandler("onPaste"),o._onSelect=o._buildHandler("onSelect"),o.getEditorKey=function(){return o._editorKey},o.state={contentsKey:0},o}var a=s.prototype;return a._buildHandler=function(o){var x=this;return function(y){if(!x.props.readOnly){var _=x._handler&&x._handler[o];_&&(flushControlled?flushControlled(function(){return _(x,y)}):_(x,y))}}},a._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},a._renderPlaceholder=function(){if(this._showPlaceholder()){var o={text:nullthrows(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return React.createElement(DraftEditorPlaceholder,o)}return null},a._renderARIADescribedBy=function(){var o=this.props.ariaDescribedBy||"",x=this._showPlaceholder()?this._placeholderAccessibilityID:"";return o.replace("{{editor_id_placeholder}}",x)||void 0},a.render=function(){var o=this.props,x=o.blockRenderMap,y=o.blockRendererFn,_=o.blockStyleFn,E=o.customStyleFn,R=o.customStyleMap,S=o.editorState,j=o.preventScroll,T=o.readOnly,A=o.textAlignment,M=o.textDirectionality,P=cx({"DraftEditor/root":!0,"DraftEditor/alignLeft":A==="left","DraftEditor/alignRight":A==="right","DraftEditor/alignCenter":A==="center"}),L={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},D=this.props.role||"textbox",O=D==="combobox"?!!this.props.ariaExpanded:null,B={blockRenderMap:x,blockRendererFn:y,blockStyleFn:_,customStyleMap:_objectSpread$3({},DefaultDraftInlineStyle$1,R),customStyleFn:E,editorKey:this._editorKey,editorState:S,preventScroll:j,textDirectionality:M};return React.createElement("div",{className:P},this._renderPlaceholder(),React.createElement("div",{className:cx("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef},React.createElement("div",{"aria-activedescendant":T?null:this.props.ariaActiveDescendantID,"aria-autocomplete":T?null:this.props.ariaAutoComplete,"aria-controls":T?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":T?null:O,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":T?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:cx({notranslate:!T,"public/DraftEditor/content":!0}),contentEditable:!T,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:T?null:D,spellCheck:allowSpellCheck&&this.props.spellCheck,style:L,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},React.createElement(UpdateDraftEditorFlags,{editor:this,editorState:S}),React.createElement(DraftEditorContents,_extends$5({},B,{key:"contents"+this.state.contentsKey})))))},a.componentDidMount=function(){this._blockSelectEvents=!1,!didInitODS&&gkx$1("draft_ods_enabled")&&(didInitODS=!0,DraftEffects.initODS()),this.setMode("edit"),isIE&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):commonjsGlobal.execCommand("AutoUrlDetect",!1,!1))},a.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},s}(React.Component);_defineProperty$7(DraftEditor$1,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:DefaultDraftBlockRenderMap$1,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:getDefaultKeyBinding$1,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var DraftEditor_react=DraftEditor$1,RawDraftContentState$1={},DraftStringKey$2={stringify:function(s){return"_"+String(s)},unstringify:function(s){return s.slice(1)}},DraftStringKey_1=DraftStringKey$2,DraftStringKey$1=DraftStringKey_1,UnicodeUtils$3=UnicodeUtils_1,strlen=UnicodeUtils$3.strlen;function encodeEntityRanges$1(r,s){var a=[];return r.findEntityRanges(function(i){return!!i.getEntity()},function(i,o){var x=r.getText(),y=r.getEntityAt(i);a.push({offset:strlen(x.slice(0,i)),length:strlen(x.slice(i,o)),key:Number(s[DraftStringKey$1.stringify(y)])})}),a}var encodeEntityRanges_1=encodeEntityRanges$1,UnicodeUtils$2=UnicodeUtils_1,findRangesImmutable=findRangesImmutable_1,areEqual=function(s,a){return s===a},isTruthy=function(s){return!!s},EMPTY_ARRAY$1=[];function getEncodedInlinesForType(r,s,a){var i=[],o=s.map(function(x){return x.has(a)}).toList();return findRangesImmutable(o,areEqual,isTruthy,function(x,y){var _=r.getText();i.push({offset:UnicodeUtils$2.strlen(_.slice(0,x)),length:UnicodeUtils$2.strlen(_.slice(x,y)),style:a})}),i}function encodeInlineStyleRanges$1(r){var s=r.getCharacterList().map(function(i){return i.getStyle()}).toList(),a=s.flatten().toSet().map(function(i){return getEncodedInlinesForType(r,s,i)});return Array.prototype.concat.apply(EMPTY_ARRAY$1,a.toJS())}var encodeInlineStyleRanges_1=encodeInlineStyleRanges$1;function _objectSpread$2(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$6(r,o,a[o])})}return r}function _defineProperty$6(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var ContentBlock$2=ContentBlock_1,ContentBlockNode$1=ContentBlockNode_1,DraftStringKey=DraftStringKey_1,encodeEntityRanges=encodeEntityRanges_1,encodeInlineStyleRanges=encodeInlineStyleRanges_1,invariant$2=invariant_1,createRawBlock=function(s,a){return{key:s.getKey(),text:s.getText(),type:s.getType(),depth:s.getDepth(),inlineStyleRanges:encodeInlineStyleRanges(s),entityRanges:encodeEntityRanges(s,a),data:s.getData().toObject()}},insertRawBlock=function(s,a,i,o){if(s instanceof ContentBlock$2){i.push(createRawBlock(s,a));return}s instanceof ContentBlockNode$1||invariant$2(!1);var x=s.getParentKey(),y=o[s.getKey()]=_objectSpread$2({},createRawBlock(s,a),{children:[]});if(x){o[x].children.push(y);return}i.push(y)},encodeRawBlocks=function(s,a){var i=a.entityMap,o=[],x={},y={},_=0;return s.getBlockMap().forEach(function(E){E.findEntityRanges(function(R){return R.getEntity()!==null},function(R){var S=E.getEntityAt(R),j=DraftStringKey.stringify(S);y[j]||(y[j]=S,i[j]="".concat(_),_++)}),insertRawBlock(E,i,o,x)}),{blocks:o,entityMap:i}},encodeRawEntityMap=function(s,a){var i=a.blocks,o=a.entityMap,x={};return Object.keys(o).forEach(function(y,_){var E=s.getEntity(DraftStringKey.unstringify(y));x[_]={type:E.getType(),mutability:E.getMutability(),data:E.getData()}}),{blocks:i,entityMap:x}},convertFromDraftStateToRaw$1=function(s){var a={entityMap:{},blocks:[]};return a=encodeRawBlocks(s,a),a=encodeRawEntityMap(s,a),a},convertFromDraftStateToRaw_1=convertFromDraftStateToRaw$1;function _objectSpread$1(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$5(r,o,a[o])})}return r}function _defineProperty$5(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var generateRandomKey$2=generateRandomKey_1,invariant$1=invariant_1,traverseInDepthOrder=function(s,a){for(var i=[].concat(s).reverse();i.length;){var o=i.pop();a(o);var x=o.children;Array.isArray(x)||invariant$1(!1),i=i.concat([].concat(x.reverse()))}},isListBlock=function(s){if(!(s&&s.type))return!1;var a=s.type;return a==="unordered-list-item"||a==="ordered-list-item"},addDepthToChildren=function(s){Array.isArray(s.children)&&(s.children=s.children.map(function(a){return a.type===s.type?_objectSpread$1({},a,{depth:(s.depth||0)+1}):a}))},DraftTreeAdapter$1={fromRawTreeStateToRawState:function(s){var a=s.blocks,i=[];return Array.isArray(a)||invariant$1(!1),!Array.isArray(a)||!a.length?s:(traverseInDepthOrder(a,function(o){var x=_objectSpread$1({},o);isListBlock(o)&&(x.depth=x.depth||0,addDepthToChildren(o),o.children!=null&&o.children.length>0)||(delete x.children,i.push(x))}),s.blocks=i,_objectSpread$1({},s,{blocks:i}))},fromRawStateToRawTreeState:function(s){var a=[],i=[];return s.blocks.forEach(function(o){var x=isListBlock(o),y=o.depth||0,_=_objectSpread$1({},o,{children:[]});if(!x){a.push(_);return}var E=i[0];if(E==null&&y===0)a.push(_);else if(E==null||E.depth<y-1){var R={key:generateRandomKey$2(),text:"",depth:y-1,type:o.type,children:[],entityRanges:[],inlineStyleRanges:[]};i.unshift(R),y===1?a.push(R):E!=null&&E.children.push(R),R.children.push(_)}else if(E.depth===y-1)E.children.push(_);else{for(;E!=null&&E.depth>=y;)i.shift(),E=i[0];y>0?E.children.push(_):a.push(_)}}),_objectSpread$1({},s,{blocks:a})}},DraftTreeAdapter_1=DraftTreeAdapter$1,CharacterMetadata$1=CharacterMetadata_1,Immutable$1=immutableExports,List$1=Immutable$1.List;function createCharacterList$1(r,s){var a=r.map(function(i,o){var x=s[o];return CharacterMetadata$1.create({style:i,entity:x})});return List$1(a)}var createCharacterList_1=createCharacterList$1,UnicodeUtils$1=UnicodeUtils_1,substr$1=UnicodeUtils$1.substr;function decodeEntityRanges$1(r,s){var a=Array(r.length).fill(null);return s&&s.forEach(function(i){for(var o=substr$1(r,0,i.offset).length,x=o+substr$1(r,i.offset,i.length).length,y=o;y<x;y++)a[y]=i.key}),a}var decodeEntityRanges_1=decodeEntityRanges$1,UnicodeUtils=UnicodeUtils_1,_require=immutableExports,OrderedSet=_require.OrderedSet,substr=UnicodeUtils.substr,EMPTY_SET=OrderedSet();function decodeInlineStyleRanges$1(r,s){var a=Array(r.length).fill(EMPTY_SET);return s&&s.forEach(function(i){for(var o=substr(r,0,i.offset).length,x=o+substr(r,i.offset,i.length).length;o<x;)a[o]=a[o].add(i.style),o++}),a}var decodeInlineStyleRanges_1=decodeInlineStyleRanges$1;function _objectSpread(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),i.forEach(function(o){_defineProperty$4(r,o,a[o])})}return r}function _defineProperty$4(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}var ContentBlock$1=ContentBlock_1,ContentBlockNode=ContentBlockNode_1,ContentState$1=ContentState_1,DraftEntity$1=DraftEntity_1,DraftTreeAdapter=DraftTreeAdapter_1,SelectionState$1=SelectionState_1,createCharacterList=createCharacterList_1,decodeEntityRanges=decodeEntityRanges_1,decodeInlineStyleRanges=decodeInlineStyleRanges_1,generateRandomKey$1=generateRandomKey_1,gkx=gkx$8,Immutable=immutableExports,invariant=invariant_1,experimentalTreeDataSupport=gkx("draft_tree_data_support"),List=Immutable.List,Map$1=Immutable.Map,OrderedMap=Immutable.OrderedMap,decodeBlockNodeConfig=function(s,a){var i=s.key,o=s.type,x=s.data,y=s.text,_=s.depth,E={text:y,depth:_||0,type:o||"unstyled",key:i||generateRandomKey$1(),data:Map$1(x),characterList:decodeCharacterList(s,a)};return E},decodeCharacterList=function(s,a){var i=s.text,o=s.entityRanges,x=s.inlineStyleRanges,y=o||[],_=x||[];return createCharacterList(decodeInlineStyleRanges(i,_),decodeEntityRanges(i,y.filter(function(E){return a.hasOwnProperty(E.key)}).map(function(E){return _objectSpread({},E,{key:a[E.key]})})))},addKeyIfMissing=function(s){return _objectSpread({},s,{key:s.key||generateRandomKey$1()})},updateNodeStack=function(s,a,i){var o=a.map(function(x){return _objectSpread({},x,{parentRef:i})});return s.concat(o.reverse())},decodeContentBlockNodes=function(s,a){return s.map(addKeyIfMissing).reduce(function(i,o,x){Array.isArray(o.children)||invariant(!1);var y=o.children.map(addKeyIfMissing),_=new ContentBlockNode(_objectSpread({},decodeBlockNodeConfig(o,a),{prevSibling:x===0?null:s[x-1].key,nextSibling:x===s.length-1?null:s[x+1].key,children:List(y.map(function(L){return L.key}))}));i=i.set(_.getKey(),_);for(var E=updateNodeStack([],y,_);E.length>0;){var R=E.pop(),S=R.parentRef,j=S.getChildKeys(),T=j.indexOf(R.key),A=Array.isArray(R.children);if(!A){A||invariant(!1);break}var M=R.children.map(addKeyIfMissing),P=new ContentBlockNode(_objectSpread({},decodeBlockNodeConfig(R,a),{parent:S.getKey(),children:List(M.map(function(L){return L.key})),prevSibling:T===0?null:j.get(T-1),nextSibling:T===j.size-1?null:j.get(T+1)}));i=i.set(P.getKey(),P),E=updateNodeStack(E,M,P)}return i},OrderedMap())},decodeContentBlocks=function(s,a){return OrderedMap(s.map(function(i){var o=new ContentBlock$1(decodeBlockNodeConfig(i,a));return[o.getKey(),o]}))},decodeRawBlocks=function(s,a){var i=s.blocks.find(function(y){return Array.isArray(y.children)&&y.children.length>0}),o=experimentalTreeDataSupport&&!i?DraftTreeAdapter.fromRawStateToRawTreeState(s).blocks:s.blocks;if(!experimentalTreeDataSupport)return decodeContentBlocks(i?DraftTreeAdapter.fromRawTreeStateToRawState(s).blocks:o,a);var x=decodeContentBlockNodes(o,a);return x},decodeRawEntityMap=function(s){var a=s.entityMap,i={};return Object.keys(a).forEach(function(o){var x=a[o],y=x.type,_=x.mutability,E=x.data;i[o]=DraftEntity$1.__create(y,_,E||{})}),i},convertFromRawToDraftState$1=function(s){Array.isArray(s.blocks)||invariant(!1);var a=decodeRawEntityMap(s),i=decodeRawBlocks(s,a),o=i.isEmpty()?new SelectionState$1:SelectionState$1.createEmpty(i.first().getKey());return new ContentState$1({blockMap:i,entityMap:a,selectionBefore:o,selectionAfter:o})},convertFromRawToDraftState_1=convertFromRawToDraftState$1,getRangeClientRects=getRangeClientRects_1;function getRangeBoundingClientRect$1(r){var s=getRangeClientRects(r),a=0,i=0,o=0,x=0;if(s.length){if(s.length>1&&s[0].width===0){var y=s[1];a=y.top,i=y.right,o=y.bottom,x=y.left}else{var _=s[0];a=_.top,i=_.right,o=_.bottom,x=_.left}for(var E=1;E<s.length;E++){var R=s[E];R.height!==0&&R.width!==0&&(a=Math.min(a,R.top),i=Math.max(i,R.right),o=Math.max(o,R.bottom),x=Math.min(x,R.left))}}return{top:a,right:i,bottom:o,left:x,width:i-x,height:o-a}}var getRangeBoundingClientRect_1=getRangeBoundingClientRect$1,getRangeBoundingClientRect=getRangeBoundingClientRect_1;function getVisibleSelectionRect$1(r){var s=r.getSelection();if(!s.rangeCount)return null;var a=s.getRangeAt(0),i=getRangeBoundingClientRect(a),o=i.top,x=i.right,y=i.bottom,_=i.left;return o===0&&x===0&&y===0&&_===0?null:i}var getVisibleSelectionRect_1=getVisibleSelectionRect$1,AtomicBlockUtils=AtomicBlockUtils_1,BlockMapBuilder=BlockMapBuilder_1,CharacterMetadata=CharacterMetadata_1,CompositeDraftDecorator=CompositeDraftDecorator_1,ContentBlock=ContentBlock_1,ContentState=ContentState_1,DefaultDraftBlockRenderMap=DefaultDraftBlockRenderMap_1,DefaultDraftInlineStyle=DefaultDraftInlineStyle$2,DraftEditor=DraftEditor_react,DraftEditorBlock=DraftEditorBlock_react,DraftEntity=DraftEntity_1,DraftModifier=DraftModifier_1,DraftEntityInstance=DraftEntityInstance_1,EditorState=EditorState_1,KeyBindingUtil=KeyBindingUtil_1,RawDraftContentState=RawDraftContentState$1,RichTextEditorUtil=RichTextEditorUtil_1,SelectionState=SelectionState_1,convertFromDraftStateToRaw=convertFromDraftStateToRaw_1,convertFromRawToDraftState=convertFromRawToDraftState_1,generateRandomKey=generateRandomKey_1,getDefaultKeyBinding=getDefaultKeyBinding_1,getVisibleSelectionRect=getVisibleSelectionRect_1,convertFromHTML=convertFromHTMLToContentBlocks_1,DraftPublic={Editor:DraftEditor,EditorBlock:DraftEditorBlock,EditorState,CompositeDecorator:CompositeDraftDecorator,Entity:DraftEntity,EntityInstance:DraftEntityInstance,BlockMapBuilder,CharacterMetadata,ContentBlock,ContentState,RawDraftContentState,SelectionState,AtomicBlockUtils,KeyBindingUtil,Modifier:DraftModifier,RichUtils:RichTextEditorUtil,DefaultDraftBlockRenderMap,DefaultDraftInlineStyle,convertFromHTML,convertFromRaw:convertFromRawToDraftState,convertToRaw:convertFromDraftStateToRaw,genKey:generateRandomKey,getDefaultKeyBinding,getVisibleSelectionRect},Draft=DraftPublic;function useStateWithCallback(r){const[s,a]=React$6.useState(r),i=React$6.useRef([]);function o(x,y){y&&(i.current=[...i.current,y]),a(x)}return React$6.useEffect(()=>{i.current.forEach(x=>{x(s),i.current.shift()})},[s]),[s,o]}function replaceDraftJsText(r,s){const a=r.getCurrentContent(),i=Draft.Modifier.replaceText(a,r.getSelection(),s),o=Draft.EditorState.push(r,i,"insert-fragment");return Draft.EditorState.forceSelection(o,i.getSelectionAfter())}const NEWLINE_REGEX=/\n/g;function replaceNewlines(r,s=" "){return r.replace(NEWLINE_REGEX,s)}function condenseBlocks(r,s){s=s||r.getCurrentContent().getBlocksAsArray();let a=immutableExports.List(),i=immutableExports.List();s.forEach(y=>{y.getType()!=="atomic"&&(a=a.push(replaceNewlines(y.getText())),i=i.concat(y.getCharacterList()))});const o=new Draft.ContentBlock({key:Draft.genKey(),text:a.join(""),type:"unstyled",characterList:i,depth:0}),x=Draft.ContentState.createFromBlockArray([o]);return r=Draft.EditorState.push(r,x,"remove-range"),Draft.EditorState.moveFocusToEnd(r)}function onChange(r){const s=r.getCurrentContent().getBlocksAsArray();if(s.length>1)return condenseBlocks(r,s);{let a=s[0],i=a.getText(),o=a.getCharacterList();if(NEWLINE_REGEX.test(i)){i=replaceNewlines(i),a=new Draft.ContentBlock({key:Draft.genKey(),text:i,type:"unstyled",characterList:o,depth:0});const x=Draft.ContentState.createFromBlockArray([a]);return Draft.EditorState.push(r,x,"insert-characters")}}return r}const Decorator$1="_Decorator_3g0fu_3",styles$1s={"DraftEditor-editorContainer":"_DraftEditor-editorContainer_3g0fu_1","DraftEditor-root":"_DraftEditor-root_3g0fu_1","public-DraftEditor-content":"_public-DraftEditor-content_3g0fu_1","public-DraftEditor-block":"_public-DraftEditor-block_3g0fu_1","DraftEditor-alignLeft":"_DraftEditor-alignLeft_3g0fu_1","public-DraftStyleDefault-block":"_public-DraftStyleDefault-block_3g0fu_1","public-DraftEditorPlaceholder-root":"_public-DraftEditorPlaceholder-root_3g0fu_1","DraftEditor-alignCenter":"_DraftEditor-alignCenter_3g0fu_1","DraftEditor-alignRight":"_DraftEditor-alignRight_3g0fu_1","public-DraftEditorPlaceholder-hasFocus":"_public-DraftEditorPlaceholder-hasFocus_3g0fu_1","DraftEditorPlaceholder-hidden":"_DraftEditorPlaceholder-hidden_3g0fu_1","public-DraftStyleDefault-ltr":"_public-DraftStyleDefault-ltr_3g0fu_1","public-DraftStyleDefault-rtl":"_public-DraftStyleDefault-rtl_3g0fu_1","public-DraftStyleDefault-listLTR":"_public-DraftStyleDefault-listLTR_3g0fu_1","public-DraftStyleDefault-listRTL":"_public-DraftStyleDefault-listRTL_3g0fu_1","public-DraftStyleDefault-ol":"_public-DraftStyleDefault-ol_3g0fu_1","public-DraftStyleDefault-ul":"_public-DraftStyleDefault-ul_3g0fu_1","public-DraftStyleDefault-depth0":"_public-DraftStyleDefault-depth0_3g0fu_1","public-DraftStyleDefault-depth1":"_public-DraftStyleDefault-depth1_3g0fu_1","public-DraftStyleDefault-depth2":"_public-DraftStyleDefault-depth2_3g0fu_1","public-DraftStyleDefault-depth3":"_public-DraftStyleDefault-depth3_3g0fu_1","public-DraftStyleDefault-depth4":"_public-DraftStyleDefault-depth4_3g0fu_1","public-DraftStyleDefault-unorderedListItem":"_public-DraftStyleDefault-unorderedListItem_3g0fu_1","public-DraftStyleDefault-orderedListItem":"_public-DraftStyleDefault-orderedListItem_3g0fu_1","public-DraftStyleDefault-reset":"_public-DraftStyleDefault-reset_3g0fu_1",Decorator:Decorator$1},LinkComponent=React$6.memo(({children:r})=>jsxRuntimeExports.jsx("span",{className:styles$1s.Decorator,children:r})),LiveLinkComponent=React$6.memo(({children:r,decoratedText:s})=>jsxRuntimeExports.jsx("a",{href:s,rel:"noreferrer",target:"_blank",className:styles$1s.Decorator,children:r})),strategy$1=(r,s)=>{const a=r.getText();getLinksFromText(a).forEach(o=>s(o.index,o.lastIndex))},LinkDecorator={strategy:strategy$1,component:LinkComponent},LiveLinkDecorator={strategy:strategy$1,component:LiveLinkComponent},findDraftJsEntitiesByType=r=>(a,i,o)=>{a.findEntityRanges(x=>{const y=x.getEntity();return y!==null&&o.getEntity(y).getType()===r},i)},Decorator="_Decorator_aa7eh_3",styles$1r={"DraftEditor-editorContainer":"_DraftEditor-editorContainer_aa7eh_1","DraftEditor-root":"_DraftEditor-root_aa7eh_1","public-DraftEditor-content":"_public-DraftEditor-content_aa7eh_1","public-DraftEditor-block":"_public-DraftEditor-block_aa7eh_1","DraftEditor-alignLeft":"_DraftEditor-alignLeft_aa7eh_1","public-DraftStyleDefault-block":"_public-DraftStyleDefault-block_aa7eh_1","public-DraftEditorPlaceholder-root":"_public-DraftEditorPlaceholder-root_aa7eh_1","DraftEditor-alignCenter":"_DraftEditor-alignCenter_aa7eh_1","DraftEditor-alignRight":"_DraftEditor-alignRight_aa7eh_1","public-DraftEditorPlaceholder-hasFocus":"_public-DraftEditorPlaceholder-hasFocus_aa7eh_1","DraftEditorPlaceholder-hidden":"_DraftEditorPlaceholder-hidden_aa7eh_1","public-DraftStyleDefault-ltr":"_public-DraftStyleDefault-ltr_aa7eh_1","public-DraftStyleDefault-rtl":"_public-DraftStyleDefault-rtl_aa7eh_1","public-DraftStyleDefault-listLTR":"_public-DraftStyleDefault-listLTR_aa7eh_1","public-DraftStyleDefault-listRTL":"_public-DraftStyleDefault-listRTL_aa7eh_1","public-DraftStyleDefault-ol":"_public-DraftStyleDefault-ol_aa7eh_1","public-DraftStyleDefault-ul":"_public-DraftStyleDefault-ul_aa7eh_1","public-DraftStyleDefault-depth0":"_public-DraftStyleDefault-depth0_aa7eh_1","public-DraftStyleDefault-depth1":"_public-DraftStyleDefault-depth1_aa7eh_1","public-DraftStyleDefault-depth2":"_public-DraftStyleDefault-depth2_aa7eh_1","public-DraftStyleDefault-depth3":"_public-DraftStyleDefault-depth3_aa7eh_1","public-DraftStyleDefault-depth4":"_public-DraftStyleDefault-depth4_aa7eh_1","public-DraftStyleDefault-unorderedListItem":"_public-DraftStyleDefault-unorderedListItem_aa7eh_1","public-DraftStyleDefault-orderedListItem":"_public-DraftStyleDefault-orderedListItem_aa7eh_1","public-DraftStyleDefault-reset":"_public-DraftStyleDefault-reset_aa7eh_1",Decorator},ResolveMentionEntityName="RESOLVED_MENTION",component=React$6.memo(({children:r})=>jsxRuntimeExports.jsx("span",{className:styles$1r.Decorator,children:r})),strategy=findDraftJsEntitiesByType(ResolveMentionEntityName),ResolveMentionDecorator={strategy,component},getDraftJsCaretPosition=r=>r.getSelection().getAnchorOffset(),getDraftJsCurrentBlock=r=>{if(r.getSelection){const s=r.getSelection();return r.getCurrentContent().getBlockForKey(s.getStartKey())}},getDraftJsPreviousCharacter=r=>{const s=getDraftJsCaretPosition(r);if(s!==0){const a=getDraftJsCurrentBlock(r);if(a)return a.getText().substring(s-1,s)}};function insertDraftJsText(r,s){const a=r.getCurrentContent(),i=Draft.Modifier.insertText(a,r.getSelection(),s);return Draft.EditorState.push(r,i,"insert-fragment")}const getDraftJsText=(r,s,a)=>{const i=getDraftJsCurrentBlock(r);return i?i.getText().substring(s,a):""},mentionsKeyCommand="@",keyBindingsFn=({mentionsIsActive:r,currentMentionUser:s})=>(a,i)=>{if(i.key===mentionsKeyCommand){const o=getDraftJsPreviousCharacter(a);if(!o||o===" ")return"mentions:trigger"}if(r&&s){if(i.key==="Escape")return"mentions:escape";if(i.key==="ArrowDown")return"mentions:down";if(i.key==="ArrowUp")return"mentions:up";if(i.key==="Tab"||i.key==="Enter")return"mentions:resolve"}return null};function handleKeyCommand({onArrowUpDown:r,selectUser:s,triggerMention:a,currentUser:i,setIsActive:o}){return function(x){if(x==="mentions:trigger")return a(!1),!1;if(x==="mentions:escape")return o(!1),!1;if(r){if(x==="mentions:down")return r("down"),!1;if(x==="mentions:up")return r("up"),!1}return x==="mentions:resolve"&&i&&s(i),!1}}const useFeatureMentions=(r=!1,s,a)=>{const[i,o]=React$6.useState(),[x,y]=React$6.useState(-1),[_,E]=React$6.useState(),[R,S]=React$6.useState(!1),[,j]=useStateWithCallback(),T=React$6.useMemo(()=>r?_?s.filter(({name:V})=>V.toLowerCase().startsWith(_.toLowerCase())):s:[],[r,_,s]),A=T[x];React$6.useEffect(()=>{R||(o(void 0),E(void 0),y(0))},[R]);const M=React$6.useCallback(()=>new Promise(V=>{j(void 0),S(!1),setImmediate(V)}),[j]),P=React$6.useCallback(()=>new Promise(V=>{S(!1),j(U=>{U&&a(U,()=>V())})}),[a,j]),L=React$6.useCallback((V=!0)=>new Promise(U=>{let G;S(!0),a(oe=>{G=oe;let X="";if(V){const ee=getDraftJsPreviousCharacter(oe);X=!ee||ee===" "?"":" "}return replaceDraftJsText(oe,X+mentionsKeyCommand)},oe=>{o(getDraftJsCaretPosition(oe)-1),E(void 0),j(G,()=>U())})}),[a,E,o,j]),D=React$6.useCallback(()=>r?R?P():L():Promise.resolve(),[R,r,P,L]),O=React$6.useCallback(({id:V,name:U})=>new Promise(G=>{a(oe=>{const X=getDraftJsCurrentBlock(oe);if(!X||i===void 0)return G(),oe;const ae=oe.getCurrentContent().createEntity(ResolveMentionEntityName,"IMMUTABLE",{id:V,name:U}),ie=ae.getLastCreatedEntityKey(),se=X.getKey(),Q=mentionsKeyCommand+U,Z=Draft.Modifier.replaceText(ae,new Draft.SelectionState({anchorKey:se,anchorOffset:i,focusKey:se,focusOffset:getDraftJsCaretPosition(oe),isBackward:!1,hasFocus:!0}),Q,null,ie),J=Draft.EditorState.set(oe,{currentContent:Z,selection:new Draft.SelectionState({anchorKey:se,anchorOffset:i+Q.length,focusKey:se,focusOffset:i+Q.length,isBackward:!1,hasFocus:!0})});return insertDraftJsText(J," ")},()=>{S(!1),G()})}),[i,a]),B=React$6.useCallback(V=>{if(R&&i!==void 0){const U=getDraftJsCaretPosition(V);if(U>i){const G=getDraftJsText(V,i+1,U).toLowerCase();E(G)}else S(!1)}},[R,i]);React$6.useEffect(()=>{y(T.length?0:-1)},[T,y]);const N=React$6.useCallback(V=>{y(U=>{if(U!==-1){if(V==="up"&&U!==0)return--U;if(V==="down"&&U!==T.length-1)return++U}return U})},[T.length,y]);return{mentionsPublicMethods:{abortMention:M,toggleMention:D},onEditorStateChange:B,mentionsChildrenProps:{currentMentionUser:A,selectMentionUser:O,filteredMentionUsers:T,mentionsIsActive:R},mentionsKeyBindingsFn:keyBindingsFn({mentionsIsActive:R,currentMentionUser:A}),mentionsHandleKeyCommand:handleKeyCommand({onArrowUpDown:N,selectUser:O,triggerMention:L,currentUser:A,setIsActive:S})}},getDecorators=(r,s)=>{if(!(s!=null&&s.length))return;const a=[];return!r&&s.includes("mentions")&&a.push(ResolveMentionDecorator),s.includes("links")&&a.push(r?LiveLinkDecorator:LinkDecorator),new Draft.CompositeDecorator(a)},RichTextEditor=React$6.forwardRef(function({readonly:s,placeholder:a,features:i,singleLine:o,initialValue:x,mentionUsers:y=[],onEnter:_,onEscape:E,onMentionsMenuVisibilityChange:R,children:S},j){const[T,A]=useStateWithCallback(()=>x?Draft.EditorState.createWithContent(Draft.ContentState.createFromText(x),getDecorators(s,i)):Draft.EditorState.createEmpty(getDecorators(s,i))),M=React$6.useRef(null),P=!s&&(i==null?void 0:i.includes("mentions")),{mentionsPublicMethods:L,onEditorStateChange:D,mentionsChildrenProps:O,mentionsKeyBindingsFn:B,mentionsHandleKeyCommand:N}=useFeatureMentions(P,y,A);React$6.useEffect(()=>{R==null||R(O.mentionsIsActive)},[O.mentionsIsActive,R]);const F=React$6.useCallback(G=>new Promise(oe=>A(X=>replaceDraftJsText(X,G),()=>oe())),[A]);React$6.useImperativeHandle(j,()=>({addContent:F,getContent:()=>{const G=T.getCurrentContent();return G.getPlainText().trim()?Draft.convertToRaw(G):null},focus:()=>{var G;return(G=M.current)==null?void 0:G.focus()},blur:()=>{var G;return(G=M.current)==null?void 0:G.blur()},...L}),[F,T,L]);const W=React$6.useCallback(G=>{P&&D(G),A(o?onChange(G):G)},[P,D,A,o]),V=G=>{const oe=P&&B(T,G);return oe||(G.key==="Enter"&&!G.shiftKey&&_?"editor:enter":G.key==="Escape"?"editor:escape":Draft.getDefaultKeyBinding(G))},U=G=>P&&N(G)?"handled":G==="editor:enter"&&_?(_(),"handled"):G==="editor:escape"&&E?(E(),"handled"):G==="split-block"&&o?"handled":"not-handled";return React$6.useEffect(()=>{const G=window.getSelection();o&&G&&G.focusNode instanceof Text&&G.anchorOffset===G.focusNode.length&&M.current&&(M.current.editor.scrollLeft=M.current.editor.scrollWidth)},[T,o]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6({"RichTextEditor--singleLine":o}),children:jsxRuntimeExports.jsx(Draft.Editor,{ref:M,webDriverTestID:"RichTextEditor",spellCheck:!0,stripPastedStyles:!0,readOnly:s,placeholder:a,editorState:T,onChange:W,handleKeyCommand:U,keyBindingFn:V})}),S==null?void 0:S({...O})]})}),RichTextEditor_memo=React$6.memo(RichTextEditor),BACKSPACE_KEYCODE$2=8,SPACE_KEYCODE$1=32;class ChipItem extends reactExports.Component{constructor(){super(...arguments);$e(this,"_buttonRef",reactExports.createRef());$e(this,"handleClick",()=>{this._delete()});$e(this,"handleKeyDown",a=>{a.keyCode===BACKSPACE_KEYCODE$2&&this._delete(),a.keyCode===SPACE_KEYCODE$1&&a.preventDefault()});$e(this,"renderClose",()=>jsxRuntimeExports.jsx("svg",{width:8,height:8,viewBox:"0 0 8 8",className:"ChipItem__icon",children:jsxRuntimeExports.jsxs("g",{strokeWidth:1,stroke:"currentColor",children:[jsxRuntimeExports.jsx("line",{x1:0,y1:0,x2:8,y2:8}),jsxRuntimeExports.jsx("line",{x1:8,y1:0,x2:0,y2:8})]})}))}focus(){this._buttonRef.current!=null&&this._buttonRef.current.focus()}_delete(){this.props.onDelete(this.props.value)}render(){const{value:a,label:i,title:o,beforeElement:x}=this.props;return jsxRuntimeExports.jsxs("button",{ref:this._buttonRef,type:"button",title:o,onClick:this.handleClick,onKeyDown:this.handleKeyDown,className:"ChipItem",children:[x,jsxRuntimeExports.jsx("span",{className:"ChipItem__text",children:i==null?a:i}),jsxRuntimeExports.jsx(ShouldUpdate_memo,{shouldUpdate:!1,render:this.renderClose})]})}}const BACKSPACE_KEYCODE$1=8,SPACE_KEYCODE=32;class ChipItemV2 extends reactExports.Component{constructor(){super(...arguments);$e(this,"_buttonRef",reactExports.createRef());$e(this,"handleCloseClick",()=>{this._delete()});$e(this,"handleKeyDown",a=>{a.keyCode===BACKSPACE_KEYCODE$1&&this._delete(),a.keyCode===SPACE_KEYCODE&&a.preventDefault()})}focus(){this._buttonRef.current!=null&&this._buttonRef.current.focus()}_delete(){this.props.onDelete(this.props.value)}render(){const{value:a,label:i,title:o,beforeElement:x}=this.props;return jsxRuntimeExports.jsxs("button",{ref:this._buttonRef,type:"button",title:o,onKeyDown:this.handleKeyDown,className:"ChipItemV2",children:[x,jsxRuntimeExports.jsx("span",{className:"ChipItemV2__text",children:i==null?a:i}),jsxRuntimeExports.jsx(CloseIcon$1,{onClick:this.handleCloseClick})]})}}const CloseIcon$1=reactExports.memo(function({onClick:s}){return jsxRuntimeExports.jsx("div",{onClick:s,className:"ChipItemV2__icon",children:jsxRuntimeExports.jsx("svg",{width:8,height:8,viewBox:"0 0 8 8",children:jsxRuntimeExports.jsxs("g",{strokeWidth:1,stroke:"currentColor",children:[jsxRuntimeExports.jsx("line",{x1:0,y1:0,x2:8,y2:8}),jsxRuntimeExports.jsx("line",{x1:8,y1:0,x2:0,y2:8})]})})})}),BACKSPACE_KEYCODE=8;var ChipsListAddKeyCodes=(r=>(r[r.ENTER_KEYCODE=13]="ENTER_KEYCODE",r[r.SPACE_KEYCODE=32]="SPACE_KEYCODE",r[r.COMMA=188]="COMMA",r))(ChipsListAddKeyCodes||{});const keyCodeToChar={13:`
`,32:" ",188:","};function escapeRegExp(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const DEFAULT_ADD_KEYS=[13];function isAddChipKey(r,s){return(s||DEFAULT_ADD_KEYS).includes(r)}class ChipsList extends reactExports.Component{constructor(){super(...arguments);$e(this,"state",{isShaking:!1,shouldFocusTextFieldAfterUpdate:!1,value:""});$e(this,"_chipsRefs",new Map);$e(this,"_textFieldRef",reactExports.createRef());$e(this,"_textFieldParentRef",reactExports.createRef());$e(this,"handleContainerAnimationEnd",a=>{a.target===a.currentTarget&&this.setState({isShaking:!1})});$e(this,"handleContainerClick",a=>{a.currentTarget!==a.target&&a.target!==this._textFieldParentRef.current||this._focusTextField()});$e(this,"handlePaste",a=>{const i=a.currentTarget;setTimeout(()=>{this.processAfterPaste(i.value)},0)});$e(this,"processAfterPaste",a=>{const{validateValue:i}=this.props,o=[...DEFAULT_ADD_KEYS,...this.props.addActionKeys||[]].map(_=>escapeRegExp(keyCodeToChar[_])),x=a.split(new RegExp(o.join("|"),"g")).filter(_=>_.trim().length>0),y=[];x.forEach(_=>{(i==null||i(_))&&(this.props.onAdd(_),y.push(_))}),y.length>0?this._updateTextField(""):this._updateTextField(a)});$e(this,"handleTextFieldKeyDown",a=>{if(!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)){if(a.keyCode===BACKSPACE_KEYCODE){const{value:i}=this.state;i.length===0&&this._goToLastChip()}else if(isAddChipKey(a.keyCode,this.props.addActionKeys)){a.preventDefault();const i=this.state.value.trim();i.length!==0&&(a.stopPropagation(),this._addChip(i))}}});$e(this,"handleTextFieldChange",a=>{this._updateTextField(a.currentTarget.value)});$e(this,"handleTextFieldBlur",()=>{if(this.props.addOnBlur){const a=this.state.value.trim();a.length!==0&&this._addChip(a)}});$e(this,"handleChipDelete",a=>{this._deleteChip(a)});$e(this,"renderChip",memoize(a=>{const i={ref:o=>{o==null?this._chipsRefs.delete(a):this._chipsRefs.set(a,o)},onDelete:this.handleChipDelete,value:a};if(this.props.renderChip==null)return jsxRuntimeExports.jsx(ChipItem,{...i});{const{renderChip:o}=this.props;return o(i)}}))}clearTextField(){this.setState({value:""})}_addChip(a){const{validateValue:i}=this.props;i==null||i(a)?(this._updateTextField(""),this.props.onAdd(a)):this.setState(o=>o.isShaking?null:{isShaking:!0})}_deleteChip(a){this.renderChip.cache.delete(a),this.setState({shouldFocusTextFieldAfterUpdate:!0}),this.props.onDelete(a)}_goToLastChip(){const{values:a}=this.props;if(a.length>0){const i=a[a.length-1],o=this._chipsRefs.get(i);o!=null&&o.focus()}}_focusTextField(){const a=this._textFieldRef.current;a!=null&&a.focus({preventScroll:!0})}_updateTextField(a){var i,o;this.setState({value:a}),(o=(i=this.props).onTextFieldUpdate)==null||o.call(i,a)}componentDidMount(){this.props.autoFocus&&this._focusTextField()}componentDidUpdate(){this.state.shouldFocusTextFieldAfterUpdate&&this.setState({shouldFocusTextFieldAfterUpdate:!1},()=>{this._focusTextField()})}render(){const{values:a,placeholder:i,inputId:o,className:x,showPlaceholderEvenWithValues:y,showPlaceholderOnFocus:_,size:E="lg"}=this.props,{value:R,isShaking:S}=this.state;return jsxRuntimeExports.jsxs("ul",{onClick:this.handleContainerClick,onAnimationEnd:S?this.handleContainerAnimationEnd:void 0,className:cx$6("ChipsList",{"ChipsList--isShaking":S,"ChipsList--size-md":E==="md","ChipsList--size-lg":E==="lg"},x),children:[a.map((j,T)=>jsxRuntimeExports.jsx("li",{className:"ChipsList__item",children:this.renderChip(j)},T)),jsxRuntimeExports.jsx("li",{ref:this._textFieldParentRef,className:"ChipsList__item ChipsList__item--textField",children:jsxRuntimeExports.jsx("input",{id:o,ref:this._textFieldRef,type:"text",autoCorrect:"off",autoComplete:"off",value:R,placeholder:a.length===0||y?i:void 0,onChange:this.handleTextFieldChange,onKeyDown:this.handleTextFieldKeyDown,onPaste:this.handlePaste,onBlur:this.handleTextFieldBlur,className:cx$6("ChipsList__input",{"ChipsList__input--keepPlaceholderOnFocus":!!_})})})]})}}function Label({children:r,accessory:s,for:a}){return a?jsxRuntimeExports.jsxs("label",{htmlFor:a,className:"Label",children:[jsxRuntimeExports.jsx("div",{className:"Label__text",children:r}),s]}):jsxRuntimeExports.jsxs("div",{className:"Label",children:[jsxRuntimeExports.jsx("div",{className:"Label__text",children:r}),s]})}function getSelectionCaretPosition(r){if(!window.getSelection)return null;const s=window.getSelection();if(s!=null&&s.rangeCount){if(s.rangeCount!==1)return null;const a=s.getRangeAt(0);if(r.contains(a.commonAncestorContainer)){const[i,o]=getRangeIndexes(r.childNodes,a),x=getTextSizeUntilIndex(r.childNodes,i)+a.startOffset,y=getTextSizeUntilIndex(r.childNodes,o)+a.endOffset;return[x,y]}}return null}function getTextSizeUntilIndex(r,s){let a=0;for(let i=0;i<s;i++){let o=r[i];a+=o.textContent==null?0:o.textContent.length}return a}function getRangeIndexes(r,s){let a=-1,i=-1;for(let o=0;o<r.length;o++){const x=r[o];if(s.intersectsNode(x))a===-1&&(a=o),i=o;else if(i!==-1)break}return[a,i]}const INITIAL_STATE$1={cursorPosition:null,isFocus:!1,shouldAutoFocus:!1},STATE_KEYS=Object.keys(INITIAL_STATE$1);function NotesTextArea(r){const{onFocus:s,onBlur:a,onChange:i}=r,[o,x]=reactExports.useReducer(reducer$2,INITIAL_STATE$1),{lock:y,release:_,value:E,update:R}=useBindingsFlowController(r.value),S=useIsEditing(E,o),j=usePreview(S,E),T=reactExports.useRef(null),A=reactExports.useRef(!0),M=reactExports.useRef();reactExports.useLayoutEffect(()=>{if(S&&T.current!=null&&o.cursorPosition!=null){const[F,W]=o.cursorPosition;T.current.focus(),T.current.setSelectionRange(F,W)}},[S]),reactExports.useLayoutEffect(()=>{o.shouldAutoFocus&&o.isFocus&&x({shouldAutoFocus:!1})},[o.shouldAutoFocus,o.isFocus]);const P=reactExports.useCallback(F=>{if(!A.current){A.current=!0;return}F.target.tagName!=="A"&&x(W=>W.isFocus?W:{isFocus:!0,shouldAutoFocus:!0,cursorPosition:null})},[]),L=reactExports.useCallback(F=>{F.target.tagName==="A"&&(M.current=F.target),A.current=!1},[]),D=reactExports.useCallback(F=>{const W=M.current;if(M.current=void 0,W===F.target)return;const V=getSelectionCaretPosition(F.currentTarget);x(U=>U.isFocus?U:{isFocus:!0,shouldAutoFocus:!0,cursorPosition:V})},[]),O=reactExports.useCallback(()=>{_(),x(F=>F.isFocus?{isFocus:!1,shouldAutoFocus:!1}:F),a!=null&&a()},[a,_]),B=reactExports.useCallback(()=>{y(),x(F=>F.isFocus?F:{isFocus:!0}),s&&s()},[y,s]),N=reactExports.useCallback(F=>{i(F),R(F)},[i,R]);return S?jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{ref:F=>{T.current=F?F.visibleInput:null},className:r.className,autoFocus:o.shouldAutoFocus,disabled:r.disabled,maxLength:r.maxLength,value:E,placeholder:r.placeholder,theme:DynamicTextAreaTheme.MINIMAL,onBlur:O,onFocus:B,onChange:N}):jsxRuntimeExports.jsx("div",{role:r.disabled?void 0:"button",tabIndex:r.disabled?void 0:0,onFocus:r.disabled?void 0:P,onMouseDown:r.disabled?void 0:L,onMouseUp:r.disabled?void 0:D,className:cx$6("NotesTextArea__preview",r.className,{"NotesTextArea__preview--disabled":r.disabled}),children:j})}function useIsEditing(r,s){return reactExports.useMemo(()=>{if(s.isFocus)return!0;const a=r.trim();return a===""?!0:!getUrlRegex().test(a)},[s.isFocus,r])}function usePreview(r,s){return reactExports.useMemo(()=>r?s:linkifyText(s,nonPropagatingWrapLink),[r,s])}function reducer$2(r,s){const a=typeof s=="function"?s(r):s;return a===r?r:getNewStateIfChanged$1(r,{...r,...a})}function getNewStateIfChanged$1(r,s){return STATE_KEYS.every(a=>r[a]===s[a])?r:s}class TextField extends reactExports.Component{constructor(){super(...arguments);$e(this,"element",null);$e(this,"_elementRef",a=>{this.element=a});$e(this,"inputRef",reactExports.createRef());$e(this,"_offMakeAutoFocusRaf",null);$e(this,"state",{isFocused:!1});$e(this,"_makeAutoFocusOnce",once$1(()=>{const a=this.inputRef.current;a!=null&&(this.props.autoFocus===!0&&!this.props.disabled&&(a.autofocus=!0),document.activeElement===a?this.setState({isFocused:!0}):document.querySelector("[autofocus]")===a&&this.setState({isFocused:!0},()=>this.focus()))}));$e(this,"_handleChange",a=>{const{onChange:i,name:o}=this.props;i&&i(a.currentTarget.value,o)});$e(this,"_handleFocus",a=>{a.currentTarget===a.target&&(this.state.isFocused||this.setState(i=>i.isFocused?null:{isFocused:!0},()=>{this.props.onFocus&&this.props.onFocus()}))});$e(this,"_handleBlur",a=>{a.currentTarget===a.target&&this.state.isFocused&&this.setState(i=>i.isFocused?{isFocused:!1}:null,()=>{this.props.onBlur&&this.props.onBlur()})})}focus(){this.inputRef.current!=null&&this.inputRef.current.focus()}select(){this.inputRef.current!=null&&this.inputRef.current.select()}static getDerivedStateFromProps(a,i){return a.disabled&&i.isFocused?{isFocused:!1}:null}componentDidMount(){this.props.autoFocus&&!this.context.isAnimating&&this._makeAutoFocusOnce()}componentDidUpdate(){this.props.autoFocus&&this._offMakeAutoFocusRaf==null&&!this.context.isAnimating&&(this._offMakeAutoFocusRaf=rafBatch(()=>{this._offMakeAutoFocusRaf=null,this._makeAutoFocusOnce()}))}componentWillUnmount(){this._offMakeAutoFocusRaf!=null&&(this._offMakeAutoFocusRaf(),this._offMakeAutoFocusRaf=null)}render(){const{autoComplete:a,inputMode:i,children:o,defaultValue:x,disabled:y=!1,endElement:_,hidden:E,privateInSessionReplay:R=!1,id:S,maxLength:j,minLength:T,name:A,onChange:M,placeholder:P,readOnly:L,startElement:D,tabIndex:O,mode:B="default",textAlign:N="start",theme:F="default",type:W="text",value:V,className:U,errorText:G}=this.props,oe=this.context.isAnimating?!1:this.props.autoFocus,{isFocused:X}=this.state;return jsxRuntimeExports.jsxs("div",{ref:this._elementRef,className:cx$6("TextField",U,`TextField--${F}`,{"TextField--hidden":E,"TextField--focus":X,"TextField--disabled":y,"TextField--isModeError":B==="error"}),children:[D,o,jsxRuntimeExports.jsx("input",{ref:this.inputRef,autoComplete:a,inputMode:i,id:S,tabIndex:O,type:W,name:A,maxLength:j,minLength:T,disabled:y,readOnly:L,autoFocus:oe,defaultValue:x,placeholder:P,value:V,onBlur:this._handleBlur,onFocus:this._handleFocus,onChange:M?this._handleChange:void 0,...R?{"data-private":"lipsum"}:null,className:cx$6(`TextField__input TextField__input--${F}`,{"TextField__input--hasChildren":reactExports.Children.count(o)>0,"TextField__input--textCenter":N==="center","TextField__input--textEnd":N==="end"})}),_,G&&B==="error"?jsxRuntimeExports.jsx("div",{className:"TextField__error",children:jsxRuntimeExports.jsx("div",{className:"TextField__errorText",children:G})}):null]})}}$e(TextField,"contextType",AnimationContext);const PasswordFieldShowIcon=reactExports.memo(function(){return jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M12 5.24927C4.5 5.24927 1.5 12 1.5 12C1.5 12 4.5 18.7493 12 18.7493C19.5 18.7493 22.5 12 22.5 12C22.5 12 19.5 5.24927 12 5.24927Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 15.7501C14.0711 15.7501 15.75 14.0711 15.75 12.0001C15.75 9.92899 14.0711 8.25006 12 8.25006C9.92893 8.25006 8.25 9.92899 8.25 12.0001C8.25 14.0711 9.92893 15.7501 12 15.7501Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}),PasswordFieldHideIcon=reactExports.memo(function(){return jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M4.5 3.75L19.5 20.25",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M14.5223 14.7748C13.7864 15.4437 12.8149 15.7929 11.8215 15.7456C10.8281 15.6982 9.89422 15.2582 9.22524 14.5223C8.55626 13.7865 8.20698 12.815 8.25424 11.8216C8.3015 10.8282 8.74142 9.89427 9.47724 9.22522",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M6.93698 6.43066C3.11486 8.36618 1.5 12 1.5 12C1.5 12 4.5 18.7493 12 18.7493C13.7572 18.7633 15.4926 18.3585 17.0623 17.5685",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M19.5571 15.8531C21.6011 14.0224 22.5 12 22.5 12C22.5 12 19.5 5.24928 12 5.24928C11.3504 5.24822 10.7019 5.30103 10.061 5.40717",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12.7056 8.31635C13.5026 8.46939 14.2285 8.87674 14.7745 9.47728C15.3204 10.0778 15.6569 10.8392 15.7335 11.6472",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})});class PasswordField extends React$6.Component{constructor(){super(...arguments);$e(this,"state",{isPasswordVisible:!1});$e(this,"toggleShowPassword",()=>{this.setState({isPasswordVisible:!this.state.isPasswordVisible})})}render(){const{autoFocus:a,autoComplete:i,disabled:o,isPasswordVisible:x=this.state.isPasswordVisible,maxLength:y,minLength:_,name:E,onBlur:R,onChange:S,onFocus:j,placeholder:T,theme:A,mode:M,value:P}=this.props;return jsxRuntimeExports.jsx(TextField,{type:x?"text":"password",privateInSessionReplay:!0,maxLength:y,minLength:_,theme:A,mode:M,autoFocus:a,autoComplete:i,disabled:o,name:E,value:P,onBlur:R,onFocus:j,onChange:S,placeholder:T,endElement:jsxRuntimeExports.jsx(BareButton_,{className:"PasswordField__iconButton",onClick:this.toggleShowPassword,children:x?jsxRuntimeExports.jsx(PasswordFieldShowIcon,{}):jsxRuntimeExports.jsx(PasswordFieldHideIcon,{})})})}}function RadioButton({selectedValue:r,value:s,disabled:a,onChange:i,className:o,theme:x="default"}){const y=r===s;return jsxRuntimeExports.jsxs("span",{className:cx$6("RadioButton",{"RadioButton--disabled":a,"RadioButton--themeModern":x==="modern"},o),children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"recurrentMove",value:s,checked:y,disabled:a,onChange:()=>i(s),className:"RadioButton__input"}),jsxRuntimeExports.jsx("span",{className:"RadioButton__marker"}),jsxRuntimeExports.jsx("span",{className:"RadioButton__ring"})]})}function Select({placeholder:r,options:s,value:a,disabled:i,onChange:o,id:x,theme:y="default"}){return jsxRuntimeExports.jsx("div",{className:cx$6("Select",{"Select--modernTheme":y==="modern","Select--disabled":i}),children:jsxRuntimeExports.jsx(BareSelect,{id:x,placeholder:r,options:s,value:a,disabled:i,onChange:o,renderLabel:renderLabel$1,className:"Select__select"})})}function renderLabel$1({label:r}){return jsxRuntimeExports.jsx("div",{className:"Select__labelContainer",children:r})}function SelectButton({value:r,children:s=r,disabled:a,onClick:i,theme:o="default",size:x="default",active:y=!1,withTitle:_=!0,readonly:E=!1,className:R,forwardedRef:S,...j}){const T=cx$6("SelectButton",R,{"SelectButton--modernTheme":o==="modern","SelectButton--inputLikeTheme":o==="inputLike","SelectButton--mediumSize":x==="medium"});return E?jsxRuntimeExports.jsx("div",{title:_?r:void 0,className:cx$6(T,"SelectButton--isReadonly"),children:r}):jsxRuntimeExports.jsx("button",{...j,ref:S,type:"button",title:_?r:void 0,onClick:i,disabled:a,className:cx$6(T,{"SelectButton--isActive":y}),children:s})}function SelectButtonForwardedRef(r,s){return jsxRuntimeExports.jsx(SelectButton,{...r,forwardedRef:s})}const SelectButton_=reactExports.forwardRef(SelectButtonForwardedRef),SelectButtonWithUnderline=reactExports.forwardRef(function({value:s,disabled:a,onClick:i},o){return jsxRuntimeExports.jsx("button",{ref:o,type:"button",title:s,onClick:i,disabled:a,className:"SelectButtonWithUnderline",children:s})});function SelectWithUnderline({placeholder:r,options:s,value:a,disabled:i,onChange:o}){return jsxRuntimeExports.jsx("div",{className:cx$6("SelectWithUnderline",{"SelectWithUnderline--disabled":i}),children:jsxRuntimeExports.jsx(BareSelect,{placeholder:r,options:s,value:a,disabled:i,onChange:o,renderLabel,className:"SelectWithUnderline__select"})})}function renderLabel({label:r}){return jsxRuntimeExports.jsx("div",{className:"SelectWithUnderline__labelContainer",children:r})}function assignRef(r,s){return typeof r=="function"?r(s):r&&(r.current=s),r}function useCallbackRef(r,s){var a=reactExports.useState(function(){return{value:r,callback:s,facade:{get current(){return a.value},set current(i){var o=a.value;o!==i&&(a.value=i,a.callback(i,o))}}}})[0];return a.callback=s,a.facade}function useMergeRefs(r,s){return useCallbackRef(null,function(a){return r.forEach(function(i){return assignRef(i,a)})})}var __assign=function(){return __assign=Object.assign||function(s){for(var a,i=1,o=arguments.length;i<o;i++){a=arguments[i];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(s[x]=a[x])}return s},__assign.apply(this,arguments)};function __rest(r,s){var a={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&s.indexOf(i)<0&&(a[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(a[i[o]]=r[i[o]]);return a}function ItoI(r){return r}function innerCreateMedium(r,s){s===void 0&&(s=ItoI);var a=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:r},useMedium:function(x){var y=s(x,i);return a.push(y),function(){a=a.filter(function(_){return _!==y})}},assignSyncMedium:function(x){for(i=!0;a.length;){var y=a;a=[],y.forEach(x)}a={push:function(_){return x(_)},filter:function(){return a}}},assignMedium:function(x){i=!0;var y=[];if(a.length){var _=a;a=[],_.forEach(x),y=a}var E=function(){var S=y;y=[],S.forEach(x)},R=function(){return Promise.resolve().then(E)};R(),a={push:function(S){y.push(S),R()},filter:function(S){return y=y.filter(S),a}}}};return o}function createMedium(r,s){return s===void 0&&(s=ItoI),innerCreateMedium(r,s)}function createSidecarMedium(r){r===void 0&&(r={});var s=innerCreateMedium(null);return s.options=__assign({async:!0,ssr:!1},r),s}function Switch({size:r="default",theme:s="default",checked:a,children:i,disabled:o,label:x,onChange:y,hasMargin:_=!1,color:E,stopClickPropagation:R}){return jsxRuntimeExports.jsxs("label",{title:x,"aria-label":x,onClick:S=>{R&&S.stopPropagation()},className:cx$6("Switch",{"Switch--disabled":o,"Switch--hasMargin":_,"Switch--themeNew":s==="new","Switch--colorNotification":E==="notification","Switch--sizeSmall":r==="small"}),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:a,disabled:o,onChange:y==null?void 0:S=>y(S.currentTarget.checked),className:"Switch__input"}),jsxRuntimeExports.jsx("span",{className:"Switch__bg Switch--currentColor"}),jsxRuntimeExports.jsx("span",{className:"Switch__button Switch--currentColor",children:i})]})}const wrapper$8="_wrapper_o0ufl_6",textfield$1="_textfield_o0ufl_12",disabled$5="_disabled_o0ufl_29",styles$1q={wrapper:wrapper$8,textfield:textfield$1,disabled:disabled$5},DynamicTextField=React$6.forwardRef(function({className:s,value:a,disabled:i,...o},x){const y=a||o.placeholder;return jsxRuntimeExports.jsx("span",{className:styles$1q.wrapper,"data-content":y,children:jsxRuntimeExports.jsx("input",{ref:x,value:a,className:cx$6(styles$1q.textfield,s,{[styles$1q.disabled]:i}),size:1,...o})})}),SideSpinner=({isVisible:r,children:s,theme:a})=>jsxRuntimeExports.jsxs("span",{className:cx$6("SideSpinner",{"SideSpinner--isVisible":r}),children:[jsxRuntimeExports.jsx("span",{className:"SideSpinner__iconWrapper",children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:cx$6("SideSpinner__icon",{"SideSpinner__icon--negative":a==="negative"})})}),s]}),SvgSearchicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...r},reactExports.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},reactExports.createElement("circle",{cx:11.4,cy:11.4,r:6.4}),reactExports.createElement("path",{d:"m19.4 19.4-3.48-3.48"}))),SvgClearicon=r=>reactExports.createElement("svg",{width:14,height:14,viewBox:"0 0 22 22",...r},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M17.475.298c.62.448.703 1.242.186 1.772L2.583 17.553c-.517.53-1.433.6-2.058.149-.62-.448-.703-1.242-.186-1.772L15.417.447c.517-.53 1.433-.6 2.058-.149z"}),reactExports.createElement("path",{d:"M.525.298C-.095.746-.178 1.54.34 2.07l15.078 15.483c.517.53 1.433.6 2.058.149.62-.448.703-1.242.186-1.772L2.583.447C2.066-.083 1.15-.153.525.298z"})));function SearchField({value:r,onChange:s,placeholder:a,autoFocus:i,inlineActionButtonText:o,inlineActionButtonLoading:x,inlineActionButtonDisabled:y,onInlineActionButtonTextClick:_,clearIcon:E=!0,loading:R=!1,disabled:S=!1,searchIcon:j=jsxRuntimeExports.jsx(SvgSearchicon,{}),theme:T="default",className:A,tabIndex:M,onFocus:P}){const L=React$6.useRef(null),D=T==="fat"||T==="fat-light";React$6.useEffect(()=>{const N=L.current;return P&&N?(N.addEventListener("focus",P),()=>N.removeEventListener("focus",P)):()=>{}},[P]),React$6.useLayoutEffect(()=>{var N;i&&((N=L.current)==null||N.focus({preventScroll:!0}))},[i]);const O=React$6.useCallback(N=>{s(N.target.value)},[s]),B=React$6.useCallback(N=>{var F;N.stopPropagation(),(F=L.current)==null||F.focus(),s("")},[s]);return jsxRuntimeExports.jsxs("div",{className:cx$6("SearchField",A,{"SearchField--themeFat":D,"SearchField--themeFatLight":T==="fat-light"}),children:[jsxRuntimeExports.jsx("input",{"data-private":"lipsum",type:"text",ref:L,value:r,onChange:O,placeholder:a,disabled:S,tabIndex:M}),D?jsxRuntimeExports.jsx("div",{className:"SearchField__caret"}):null,o?jsxRuntimeExports.jsx(ButtonInlineText,{disabled:x||y,onClick:_,children:jsxRuntimeExports.jsxs(SideSpinner,{isVisible:!!x,children:[o," "]})}):R?jsxRuntimeExports.jsx("span",{className:"SearchField__sideIcon",children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:"SearchField__loadingIcon"})}):r&&E?jsxRuntimeExports.jsx("span",{className:"SearchField__sideIcon SearchField__clearIcon",onClick:B,children:E===!0?jsxRuntimeExports.jsx(SvgClearicon,{}):E}):jsxRuntimeExports.jsx("span",{className:"SearchField__sideIcon SearchField__searchIcon",children:j})]})}function isDocumentHidden(){return document.visibilityState==="hidden"}function useDocumentVisibility(){const[r,s]=React$6.useState(isDocumentHidden()),a=React$6.useCallback(()=>{s(isDocumentHidden())},[s]);return React$6.useEffect(()=>(document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)),[a]),!r}function usePasteMultiline(r){const[s,a]=reactExports.useState(!1),i=reactExports.useCallback(()=>a(!0),[]),o=reactExports.useCallback(()=>a(!1),[]),x=reactExports.useMemo(()=>s?r.split(/(\r\n|\r|\n)+/).map(y=>y.trim()).filter(y=>y.length):[],[s,r]);return reactExports.useEffect(()=>{x.length||a(!1)},[x.length]),[x,i,o]}const NegativeIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("g",{transform:"translate(8 8)",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M7.766.132c.276.2.313.552.083.788L1.148 7.801c-.23.236-.637.267-.914.067-.276-.2-.313-.552-.083-.788L6.852.199c.23-.236.637-.267.914-.067z"})}),jsxRuntimeExports.jsx("g",{transform:"translate(8 8)",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M.234.132C-.042.332-.08.684.15.92l6.701 6.881c.23.236.637.267.914.067.276-.2.313-.552.083-.788L1.148.199C.918-.037.511-.068.234.132z"})})]})})}),PositiveIconLarge=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("g",{fill:"none",fillRule:"evenodd",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M9.629 15.437l6.226-7.213a.658.658 0 0 1 .912-.075c.275.224.312.62.083.886l-6.683 7.741a.654.654 0 0 1-.648.206.651.651 0 0 1-.444-.223l-2.923-3.386a.617.617 0 0 1 .08-.888.661.661 0 0 1 .915.076l2.482 2.876z"})})})}),v$2="5.8.1",fr$1=60,ip$1=0,op$1=161,w$1=400,h$2=400,nm$1="Anydo_Preloader_v2",ddd$1=0,assets$1=[],layers$1=[{ddd:0,ind:1,ty:3,nm:"Null 4",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:110,s:[0]},{t:160,s:[180]}],ix:10},p:{a:0,k:[200,200,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[60,60,100],ix:6,l:2}},ao:0,ip:110,op:161,st:110,bm:0},{ddd:0,ind:2,ty:3,nm:"Null 1",parent:1,sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:90,s:[180]}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:60,s:[0,-.01,0],to:[0,7.668,0],ti:[0,-7.668,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:90,s:[0,46,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.01,y:1},o:{x:.167,y:.167},t:110,s:[0,46,0],to:[0,-7.668,0],ti:[0,7.668,0]},{t:160,s:[0,-.01,0]}],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:161,st:70,bm:0},{ddd:0,ind:3,ty:4,nm:"Dot 100%",parent:2,sr:1,ks:{o:{a:0,k:90,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:20,s:[-.793,89.01,0],to:[-8.333,0,0],ti:[8.333,0,0]},{i:{x:0,y:0},o:{x:.167,y:.167},t:40,s:[-50.793,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:60,s:[-50.793,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.333,y:0},t:110,s:[-50.793,89.01,0],to:[8.333,0,0],ti:[-8.333,0,0]},{t:160,s:[-.793,89.01,0]}],ix:2,l:2},a:{a:0,k:[323.5,115,0],ix:1,l:2},s:{a:0,k:[414,414,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.874,0],[0,11.874],[11.874,0],[0,-11.874]],o:[[11.874,0],[0,-11.874],[-11.874,0],[0,11.874]],v:[[0,21.5],[21.5,0],[0,-21.5],[-21.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.513725490196,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[323.5,93.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Dot",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:161,st:-50,bm:0},{ddd:0,ind:4,ty:4,nm:"Dot 100% 2",parent:2,sr:1,ks:{o:{a:0,k:30,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:20,s:[-.793,89.01,0],to:[-8.333,0,0],ti:[8.333,0,0]},{i:{x:0,y:0},o:{x:.167,y:.167},t:40,s:[-50.793,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:60,s:[-50.793,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.333,y:0},t:110,s:[-50.793,89.01,0],to:[8.333,0,0],ti:[-8.333,0,0]},{t:160,s:[-.793,89.01,0]}],ix:2,l:2},a:{a:0,k:[323.5,115,0],ix:1,l:2},s:{a:0,k:[414,414,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.874,0],[0,11.874],[11.874,0],[0,-11.874]],o:[[11.874,0],[0,-11.874],[-11.874,0],[0,11.874]],v:[[0,21.5],[21.5,0],[0,-21.5],[-21.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.513725490196,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[323.5,93.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Dot",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:60,st:-50,bm:0},{ddd:0,ind:5,ty:4,nm:"Dot 60%",parent:2,sr:1,ks:{o:{a:0,k:30,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:60,s:[-50.793,89.01,0],to:[8.465,15.833,0],ti:[-8.465,-15.833,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:90,s:[0,184.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.333,y:0},t:110,s:[0,184.01,0],to:[0,-15.833,0],ti:[0,15.833,0]},{t:160,s:[0,89.01,0]}],ix:2,l:2},a:{a:0,k:[323.5,115,0],ix:1,l:2},s:{a:0,k:[414,414,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.874,0],[0,11.874],[11.874,0],[0,-11.874]],o:[[11.874,0],[0,-11.874],[-11.874,0],[0,11.874]],v:[[0,21.5],[21.5,0],[0,-21.5],[-21.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.51372551918,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[323.5,93.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Dot",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:161,st:-40,bm:0},{ddd:0,ind:6,ty:4,nm:"Dot 30%",parent:2,sr:1,ks:{o:{a:0,k:60,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:20,s:[-.793,89.01,0],to:[8.333,0,0],ti:[-8.333,0,0]},{i:{x:0,y:0},o:{x:.167,y:.167},t:40,s:[49.207,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:60,s:[49.207,89.01,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.333,y:0},t:110,s:[49.207,89.01,0],to:[-8.333,0,0],ti:[8.333,0,0]},{t:160,s:[-.793,89.01,0]}],ix:2,l:2},a:{a:0,k:[323.5,115,0],ix:1,l:2},s:{a:0,k:[414,414,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.874,0],[0,11.874],[11.874,0],[0,-11.874]],o:[[11.874,0],[0,-11.874],[-11.874,0],[0,11.874]],v:[[0,21.5],[21.5,0],[0,-21.5],[-21.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.513725490196,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[323.5,93.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Dot",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:161,st:-50,bm:0}],markers$1=[],animationData={v:v$2,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$2,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1,markers:markers$1},ANIMATION_NAME="AppLoader",AppLoader=({startingFrame:r=0})=>{const s=React$6.useRef(null);return React$6.useEffect(()=>{const a=s.current;return a?(EMPTY$3.loadAnimation({container:a,name:ANIMATION_NAME,renderer:"svg",loop:!0,autoplay:!1,animationData}).goToAndPlay(r,!0),()=>{EMPTY$3.destroy(ANIMATION_NAME)}):void 0},[r]),jsxRuntimeExports.jsx("div",{ref:s})},AppLoader_memo=React$6.memo(AppLoader);var SharingAvatarSize=(r=>(r.ACTIVITY_UPDATE="ACTIVITY_UPDATE",r.NOTIFICATION_CENTER="NOTIFICATION_CENTER",r.ADD_MEMBER_MENU="ADD_MEMBER_MENU",r.ADD_TASK_MODAL="ADD_TASK_MODAL",r.LIST_MEMBERS_BUTTON="LIST_MEMBERS_BUTTON",r.PANE_BUTTON="PANE_BUTTON",r.TASK_INDICATOR="TASK_INDICATOR",r.TASK_INDICATOR_COMPACT="TASK_INDICATOR_COMPACT",r.TASK_TOOLBAR_BUTTON_SIZE="TASK_TOOLBAR_BUTTON_SIZE",r.BOARD_TOOLBAR_BUTTON_SIZE="BOARD_TOOLBAR_BUTTON_SIZE",r.TEAM_MEMBER_TOOLTIP="TEAM_MEMBER_TOOLTIP",r.TEAM_MEMBER_MANAGER="TEAM_MEMBER_MANAGER",r.APP_SIDEBAR_SIZE="APP_SIDEBAR_SIZE",r))(SharingAvatarSize||{});function SharingAvatarContent({className:r,name:s,initials:a,imageUrl:i=null,size:o="PANE_BUTTON",includeTitle:x=!0}){const[y,_]=React$6.useState(i===null),[E,R]=React$6.useMemo(()=>getAvatarInitialsColor(y?[...a]:[]),[a,y]);let[S,j]=React$6.useState(i);return S!=null&&S!==i&&(S=null,j(S)),jsxRuntimeExports.jsx("span",{title:x?s:void 0,"aria-label":s,className:cx$6("SharingAvatarContent","fs-exclude",r,{"SharingAvatarContent--taskIndicatorSize":o==="TASK_INDICATOR","SharingAvatarContent--taskIndicatorCompactSize":o==="TASK_INDICATOR_COMPACT","SharingAvatarContent--listMembersButtonSize":o==="LIST_MEMBERS_BUTTON","SharingAvatarContent--paneButtonSize":o==="PANE_BUTTON","SharingAvatarContent--addMemberMenuSize":o==="ADD_MEMBER_MENU","SharingAvatarContent--taskToolbarButtonSize":o==="TASK_TOOLBAR_BUTTON_SIZE","SharingAvatarContent--addTaskModalSize":o==="ADD_TASK_MODAL","SharingAvatarContent--boardToolbarButtonSize":o==="BOARD_TOOLBAR_BUTTON_SIZE","SharingAvatarContent--teamMemberTooltipSize":o==="TEAM_MEMBER_TOOLTIP","SharingAvatarContent--teamMemberManagerSize":o==="TEAM_MEMBER_MANAGER","SharingAvatarContent--activityUpdateSize":o==="ACTIVITY_UPDATE","SharingAvatarContent--activityUpdateNotificationCenterSize":o==="NOTIFICATION_CENTER","SharingAvatarContent--appSidebarSize":o==="APP_SIDEBAR_SIZE","SharingAvatarContent--lightBackground":R==="light"}),style:{"--SharingAvatarContent-color":E},children:y||i===null?a:jsxRuntimeExports.jsx("img",{alt:"",src:i,onLoad:()=>j(i),onError:()=>_(!0)})})}React$6.memo(SharingAvatarContent);function SharingAvatar({name:r,imageUrl:s=null,...a}){const i=getNameInitials(r);let[o,x]=React$6.useState(s);return o!=null&&o!==s&&(o=null,x(o)),jsxRuntimeExports.jsx(SharingAvatarContent,{name:r,initials:i.join(""),imageUrl:s,...a})}const SharingAvatar_memo=React$6.memo(SharingAvatar);function SharingAvatarImageContainer({size:r="PANE_BUTTON",bgColor:s,children:a}){return jsxRuntimeExports.jsx("span",{className:cx$6("SharingAvatarContent","fs-exclude",{"SharingAvatarContent--taskIndicatorSize":r==="TASK_INDICATOR","SharingAvatarContent--taskIndicatorCompactSize":r==="TASK_INDICATOR_COMPACT","SharingAvatarContent--listMembersButtonSize":r==="LIST_MEMBERS_BUTTON","SharingAvatarContent--paneButtonSize":r==="PANE_BUTTON","SharingAvatarContent--addMemberMenuSize":r==="ADD_MEMBER_MENU","SharingAvatarContent--taskToolbarButtonSize":r==="TASK_TOOLBAR_BUTTON_SIZE","SharingAvatarContent--addTaskModalSize":r==="ADD_TASK_MODAL","SharingAvatarContent--boardToolbarButtonSize":r==="BOARD_TOOLBAR_BUTTON_SIZE","SharingAvatarContent--teamMemberTooltipSize":r==="TEAM_MEMBER_TOOLTIP","SharingAvatarContent--teamMemberManagerSize":r==="TEAM_MEMBER_MANAGER","SharingAvatarContent--activityUpdateSize":r==="ACTIVITY_UPDATE","SharingAvatarContent--activityUpdateNotificationCenterSize":r==="NOTIFICATION_CENTER"}),style:{"--SharingAvatarContent-color":s},children:a})}const tooltip$3="_tooltip_1998j_1",list$3="_list_1998j_6",item$4="_item_1998j_7",item__button="_item__button_1998j_20",alignRight="_alignRight_1998j_37",styles$1p={tooltip:tooltip$3,list:list$3,item:item$4,item__button,alignRight},TIME_FORMATTERS=["h:mm A","HH:mm","H:mm"],MINUTES_INTERVAL=15,OPTIONS_SIZE_LIMIT=5;class BareTimePicker extends reactExports.Component{constructor(){super(...arguments);$e(this,"_shouldBlurBeIgnored",!1);$e(this,"_windowMouseUpOff",null);$e(this,"_tfElement",null);$e(this,"state",{...getResetState(this.props),isTooltipVisible:!1,width:null});$e(this,"_slowFunction__getCssExpressionPixelSize",memoizeOnce(getCssExpressionPixelSize));$e(this,"_getPickerOptions",memoizeOnce((a,i,o)=>{const x=[],y=this.props.i18n.momentParams.timePicker,_=hooks(a).startOf("day"),E=_.date();do{const R=_.valueOf();if(o!=null&&o<R)break;(i==null||R>=i)&&x.push([R,_.format(y)]),_.add(MINUTES_INTERVAL,"minutes")}while(_.date()===E);return x}));$e(this,"_getStateTimestamp",memoizeOnce((a,i)=>{const o=hooks(a.trim(),TIME_FORMATTERS,!1);return o.isValid()?hooks(i).startOf("hour").set("hour",o.get("hour")).set("minute",o.get("minute")).valueOf():null}));$e(this,"handleChange",a=>{this.setState({value:a})});$e(this,"handleFocus",()=>{if(this._shouldBlurBeIgnored=!1,this.state.isTooltipVisible)return;const a=this._tfElement==null?null:Math.floor(this._tfElement.getBoundingClientRect().width);this.setState({isTooltipVisible:!0,width:a&&a>100?a:null})});$e(this,"handleBlur",()=>{this._shouldBlurBeIgnored||this._blur()});$e(this,"handleOutsideClick",()=>{this._blur()});$e(this,"handleScrollViewDidMount",a=>{const{timestamp:i,minTimestamp:o,maxTimestamp:x}=this.props;if(this._getPickerOptions(i,o,x).length<=OPTIONS_SIZE_LIMIT)return;let _;if(this.props.isInitialValue&&this.props.initialItemScrollIndex)_=this.props.initialItemScrollIndex;else if(_=this._getOptionsClosestToTimestampIndex(),_===-1)return;const E=this._slowFunction__getCssExpressionPixelSize("var(--BareTimePicker-time-height)");a.scrollTo({top:Math.max(0,E*_-Math.floor(OPTIONS_SIZE_LIMIT/2)*E),behavior:"auto"})})}_destroyWindowMouseUpOff(){this._windowMouseUpOff!=null&&(this._windowMouseUpOff(),this._windowMouseUpOff=null)}_reset(){this.setState((a,i)=>getResetState(i))}_applyChanges(){const{timestamp:a}=this.props;let i=this._getStateTimestamp(this.state.value,a);if(i!=null){const{minTimestamp:o,maxTimestamp:x,onChange:y}=this.props;if(o!=null&&o>i&&(i=o),x!=null&&x<i&&(i=x),i===a)return this._reset();y({timestamp:i})}else this._reset()}_blur(){this.setState(a=>a.isTooltipVisible?(this._applyChanges(),{isTooltipVisible:!1}):null)}_setTimestampByTooltip(a){this.setState({value:formatTimestamp(a,this.props.i18n.momentParams.timePicker),isTooltipVisible:!1}),this.props.timestamp===a&&!this.props.isInitialValue?this._reset():this.props.onChange({timestamp:a})}_getOptionsClosestToTimestampIndex(){const{timestamp:i,minTimestamp:o,maxTimestamp:x}=this.props,y=this._getPickerOptions(i,o,x),_=hooks(i);for(let E=0;E<y.length;E++){const R=y[E][0];if(_.diff(R,"minutes")<MINUTES_INTERVAL)return E}return-1}static getDerivedStateFromProps(a,i){return a.minTimestamp!==i.prevMinTimestamp||a.maxTimestamp!==i.prevMaxTimestamp||!i.isTooltipVisible&&a.timestamp!==i.prevTimestamp?getResetState(a):null}componentWillUnmount(){this._destroyWindowMouseUpOff()}render(){const{disabled:a=!1,renderPicker:i,timestamp:o,minTimestamp:x,maxTimestamp:y,align:_="center"}=this.props,{width:E,isTooltipVisible:R,value:S}=this.state;return jsxRuntimeExports.jsx(TooltipCard,{isVisible:R&&a===!1,isTooltipFrameless:!0,offset:0,className:this.props.className,onOutSideClick:this.handleOutsideClick,renderTooltip:()=>{const j=this._getPickerOptions(o,x,y);return jsxRuntimeExports.jsx("div",{className:styles$1p.tooltip,style:{width:E==null?void 0:`calc(${E}px - var(--gutter))`,"--BareTimePicker-items-size":Math.min(OPTIONS_SIZE_LIMIT,j.length)},children:jsxRuntimeExports.jsx(ScrollView_forwarded,{onDidMount:this.handleScrollViewDidMount,children:jsxRuntimeExports.jsx("ul",{className:styles$1p.list,children:j.map(([T,A])=>jsxRuntimeExports.jsx("li",{className:styles$1p.item,children:jsxRuntimeExports.jsx(BareButton_,{tabIndex:-1,onMouseDown:M=>{if(typeof window<"u"){this._shouldBlurBeIgnored=!0;const P=M.currentTarget;this._destroyWindowMouseUpOff(),this._windowMouseUpOff=on(window,"mouseup",L=>{this._destroyWindowMouseUpOff(),P!==L.target&&!P.contains(L.target)&&(this._shouldBlurBeIgnored=!1)})}},onClick:()=>this._setTimestampByTooltip(T),className:cx$6(styles$1p.item__button,{[styles$1p.alignRight]:_==="right"}),children:A})},T))})})})},render:j=>i(S,T=>{j(T),this._tfElement=T},this.handleChange,R?void 0:this.handleFocus,R?this.handleBlur:void 0)})}}const BareTimePicker_=connectI18n(BareTimePicker);function formatTimestamp(r,s){return hooks(r).format(s)}function getResetState(r){return{value:formatTimestamp(r.timestamp,r.i18n.momentParams.timePicker),prevTimestamp:r.timestamp,prevMaxTimestamp:r.maxTimestamp,prevMinTimestamp:r.minTimestamp}}const TextFieldTimePicker=reactExports.memo(function({disabled:s=!1,theme:a,...i}){return jsxRuntimeExports.jsx(BareTimePicker_,{...i,disabled:s,renderPicker:(o,x,y,_,E)=>jsxRuntimeExports.jsx(TextField,{ref:R=>{var S;return x((S=R==null?void 0:R.element)!=null?S:null)},theme:a,disabled:s,value:o,onChange:y,onFocus:_,onBlur:E})})});function useAnimationContext(){return reactExports.useContext(AnimationContext)}const NBSP=" ";function MessageReplacer({children:r}){const{isAnimating:s}=useAnimationContext(),a=!useMatchMedia("(prefers-reduced-motion: reduce)",!0),i=reactExports.useRef(null),[o,x]=reactExports.useState({height:void 0,heightString:void 0,isAnimating:!1,texts:[r]});function y(){const S=i.current;if(S!=null){const j=S.clientHeight;x(T=>T.height===j?T:{...T,height:j,heightString:`${j}px`})}}const _=!s&&o.height===void 0;reactExports.useLayoutEffect(function(){_&&y()},[_]),reactExports.useLayoutEffect(function(){x(j=>j.texts[j.texts.length-1]===r?j:{...j,texts:[...j.texts,r]})},[r]);const E=o.texts.length>1&&!o.isAnimating;reactExports.useLayoutEffect(function(){E&&(x(j=>({...j,isAnimating:!0})),a||x(j=>({...j,isAnimating:!1,texts:j.texts.slice(-1)})))},[a,E,o]);function R(S){S.target===S.currentTarget&&x({...o,isAnimating:!1,texts:o.texts.slice(-1)})}return jsxRuntimeExports.jsx("span",{ref:i,className:cx$6("MessageReplacer",{"MessageReplacer--isAnimating":o.isAnimating}),style:{height:o.isAnimating?o.heightString:void 0},children:jsxRuntimeExports.jsx("span",{onTransitionEnd:R,className:cx$6("MessageReplacer__messages",{"MessageReplacer__messages--isAnimating":o.isAnimating}),style:{transform:o.isAnimating?`translateY(${(1-1/o.texts.length)*-100}%)`:void 0},children:o.texts.map((S,j)=>jsxRuntimeExports.jsx("span",{className:"MessageReplacer__message",children:S.length===0?NBSP:S},j))})})}const MessageReplacer_memo=reactExports.memo(MessageReplacer);function createDate$1(r,s,a){const i=new Date;return i.setFullYear(r,s,a),i.setHours(0,0,0,0),i}function getStartDayInFirstWeekOfTheMonth({year:r,month:s,isoWeekStartDay:a}){const i=createDate$1(r,s,1);for(;getISODay(i)!==a;){const o=i.getDate()-1;i.setDate(o)}return i}function getEndDayOfLastWeekOfTheMonth({year:r,month:s,isoWeekStartDay:a}){const i=createDate$1(r,s,1);i.setDate(getDaysInMonth(i));const o=getPrevIsoWeekday(a);for(;getISODay(i)!==o;){const x=i.getDate()+1;i.setDate(x)}return i}function isBeforeByDayUnit$1(r,s){return r<s&&(r.getFullYear()<s.getFullYear()||r.getMonth()<s.getMonth()||r.getDate()<s.getDate())}function isSameByDayUnit$1(r,s){return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()&&r.getDate()===s.getDate()}function isSameOrBeforeByDayUnit(r,s){return isSameByDayUnit$1(r,s)||isBeforeByDayUnit$1(r,s)}function CalendarMonthGrid({month:r,year:s,isoWeekStartDay:a,renderDay:i,rowDensity:o="none",theme:x="default"}){const y=reactExports.useMemo(()=>{const _=getStartDayInFirstWeekOfTheMonth({year:s,month:r,isoWeekStartDay:a}),E=getEndDayOfLastWeekOfTheMonth({year:s,month:r,isoWeekStartDay:a}),R=[],S=new Date(_.getTime());let j=0;for(;isSameOrBeforeByDayUnit(S,E);){const T=S.getFullYear(),A=S.getMonth(),M=S.getDate(),P=M+A*100+T*1e4;R.push({index:j,key:P,year:T,month:A,date:M,isoWeekday:getISODay(S),isCurrentMonth:r===A}),S.setDate(S.getDate()+1),j++}return R},[s,r,a]);return jsxRuntimeExports.jsx("div",{className:cx$6("CalendarMonthGrid",{"CalendarMonthGrid--rowDensityComfortable":o==="comfortable","CalendarMonthGrid--themeFilter":x==="filter"}),children:y.map(i)})}const DAYS_IN_WEEK_COUNT=7;function DatePickerWeekdayHeader({isoWeekStartDay:r,theme:s="default"}){const{locale:a,momentParams:i}=useI18n(),o=reactExports.useMemo(()=>{const x=[],y=hooks().locale(a).isoWeekday(r);for(let _=0;_<DAYS_IN_WEEK_COUNT;_++)x.push(y.format(i.weekdayShort)),y.add(1,"day");return x},[r,a,i.weekdayShort]);return jsxRuntimeExports.jsx("div",{className:cx$6("DatePickerWeekdayHeader",{"DatePickerWeekdayHeader--themeFilter":s==="filter"}),children:o.map((x,y)=>jsxRuntimeExports.jsx("div",{className:cx$6("DatePickerWeekdayHeader__day",{"DatePickerWeekdayHeader__day--themeFilter":s==="filter"}),children:x},y))})}const DatePickerWeekdayHeader_=reactExports.memo(DatePickerWeekdayHeader);class UnsafeHeightTransition extends reactExports.Component{constructor(){super(...arguments);$e(this,"_elementContainer",reactExports.createRef());$e(this,"_elementObserver",null);$e(this,"_ro",new ResizeObserver(a=>{const i=this._elementContainer.current;if(i!=null)for(let o of a){const x=o.contentRect;i.style.setProperty("height",`${x.height}px`);break}}));$e(this,"_attachObserverRef",a=>{const i=this._elementObserver;i!=null&&this._ro.unobserve(i),a!=null&&this._ro.observe(a),this._elementObserver=a})}componentWillUnmount(){this._ro.disconnect()}render(){return jsxRuntimeExports.jsx("div",{ref:this._elementContainer,className:"UnsafeHeightTransition",children:jsxRuntimeExports.jsx("div",{ref:this._attachObserverRef,children:this.props.children})})}}function createDate(r,s,a){const i=new Date;return i.setFullYear(r,s,a),i.setHours(0,0,0,0),i}function CalendarWeekGrid({year:r,month:s,date:a,renderDay:i,rowDensity:o="none"}){const x=reactExports.useMemo(()=>{const _=[],E=createDate(r,s,a);for(let R=0;R<7;R++){const S=E.getFullYear(),j=E.getMonth(),T=E.getDate(),A=T+j*100+S*1e4;_.push({index:R,key:A,year:S,month:j,date:T,isoWeekday:getISODay(E),isCurrentMonth:!0}),E.setDate(E.getDate()+1)}return _},[r,s,a]),y=reactExports.useMemo(()=>cx$6("CalendarWeekGrid",{"CalendarWeekGrid--rowDensityComfortable":o==="comfortable"}),[o]);return jsxRuntimeExports.jsx("div",{className:y,children:x.map(i)})}function DateTimePicker2Day({year:r,month:s,date:a,children:i,isSelected:o,isCurrentMonth:x,isToday:y,isInRange:_,isRangeEdgeStart:E,isRangeEdgeEnd:R,isPotentialEdgeEnd:S,disabled:j,timestamp:T,domDataKey:A,tabIndex:M,onKeyDown:P,onBlur:L,onFocus:D,onClick:O,onMouseEnter:B,onMouseLeave:N,theme:F,betterVisibleSelected:W}){return jsxRuntimeExports.jsx("div",{"data-key":A,className:cx$6("DateTimePicker2Day",{"DateTimePicker2Day--themeFilter":F==="filter","DateTimePicker2Day--themeDefault":F==="default","DateTimePicker2Day--inRange":_,"DateTimePicker2Day--rangeEdgeStart":E,"DateTimePicker2Day--rangeEdgeEnd":R,"DateTimePicker2Day--currentMonth":x}),children:jsxRuntimeExports.jsx("button",{type:"button",tabIndex:M,onMouseEnter:B,onMouseLeave:N,onKeyDown:P&&!j?V=>{P({event:V,element:V.currentTarget.parentElement,date:a,month:s,year:r})}:void 0,onBlur:L,onFocus:D,onClick:()=>O(T),className:cx$6("DateTimePicker2Day__button",{"DateTimePicker2Day__button--betterVisibleSelected":o&&W}),disabled:F==="default"?j:!1,children:jsxRuntimeExports.jsx("span",{className:cx$6("DateTimePicker2Day__buttonInner",{"DateTimePicker2Day__buttonInner--selected":o,"DateTimePicker2Day__buttonInner--inRange":_,"DateTimePicker2Day__button--today":y,"DateTimePicker2Day__buttonInner--rangeEdgeStart":E,"DateTimePicker2Day__buttonInner--rangeEdgeEnd":R,"DateTimePicker2Day__buttonInner--rangePotentialEdgeEnd":S,"DateTimePicker2Day__buttonInner--disabled":j}),children:i})})})}const DECEMBER=11,JANUARY=0,releaseNavigation=fn(function(r){r.isNavigationLock=!1}),navigateToDateAndChangeDateTextFieldValue=fn(function(r,s){let a,i=0,o=0;if(r.isWeeklyView){const _={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)};a=startOfWeek(s.timestamp,_),i=a.getDate(),o=getWeekOfMonth(a,_)}else a=new Date(s.timestamp);const x=a.getFullYear(),y=a.getMonth();r.dateTextFieldValue=s.dateTextFieldValue,r.visibleYear=x,r.visibleMonth=y,r.visibleDate=i,r.visibleMonthWeek=o}),changeDateTextFieldValue=fn(function(r,s){r.dateTextFieldValue!==s.value&&(r.dateTextFieldValue=s.value)}),navigateToNow=fn(function(r,s){if(r.isNavigationLock)return;let a,i=0,o=0;if(r.isWeeklyView){const _={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)};a=startOfWeek(s.timestamp,_),i=a.getDate(),o=getWeekOfMonth(a,_)}else a=new Date(s.timestamp);const x=a.getFullYear(),y=a.getMonth();r.visibleMonth=y,r.visibleYear=x,r.visibleDate=i,r.visibleMonthWeek=o}),navigateToPrev=fn(function(r){if(!r.isNavigationLock)if(r.isWeeklyView){const s={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)},a=new Date;a.setFullYear(r.visibleYear,r.visibleMonth,r.visibleDate),a.setDate(a.getDate()-7),r.visibleYear=a.getFullYear(),r.visibleMonth=a.getMonth(),r.visibleDate=a.getDate(),r.visibleMonthWeek=getWeekOfMonth(a,s)}else r.visibleMonth===JANUARY?(r.visibleMonth=DECEMBER,r.visibleYear=r.visibleYear-1):r.visibleMonth=r.visibleMonth-1,r.visibleDate=0,r.visibleMonthWeek=0}),navigateToNext=fn(function(r){if(!r.isNavigationLock)if(r.isWeeklyView){const s={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)},a=new Date;a.setFullYear(r.visibleYear,r.visibleMonth,r.visibleDate),a.setDate(a.getDate()+7),r.visibleYear=a.getFullYear(),r.visibleMonth=a.getMonth(),r.visibleDate=a.getDate(),r.visibleMonthWeek=getWeekOfMonth(a,s)}else r.visibleMonth===DECEMBER?(r.visibleMonth=JANUARY,r.visibleYear=r.visibleYear+1):r.visibleMonth=r.visibleMonth+1,r.visibleDate=0,r.visibleMonthWeek=0}),changeView=fn(function(r,{isWeeklyView:s,timestamp:a}){if(r.isWeeklyView!==s&&!r.isNavigationLock)if(r.isWeeklyView=s,s){const i={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)},o=new Date(a);(o.getFullYear()!==r.visibleYear||o.getMonth()!==r.visibleMonth)&&o.setFullYear(r.visibleYear,r.visibleMonth,1);const x=startOfWeek(o,i);r.visibleYear=x.getFullYear(),r.visibleMonth=x.getMonth(),r.visibleDate=x.getDate(),r.visibleMonthWeek=getWeekOfMonth(o,i)}else{const i=new Date(a);if(i.getFullYear()!==r.visibleYear||i.getMonth()!==r.visibleMonth){const o={weekStartsOn:getDayByIsoWeekday(r.isoWeekStartDay)},x=new Date;x.setFullYear(r.visibleYear,r.visibleMonth,r.visibleDate),x.setHours(0,0,0,0),a>=x.getTime()&&a<=endOfWeek(x,o).getTime()&&(r.visibleYear=i.getFullYear(),r.visibleMonth=i.getMonth())}r.visibleDate=0,r.visibleMonthWeek=0}}),userSettingsChange=fn(function(r,s){if(r.isoWeekStartDay=s.isoWeekStartDay,r.isWeeklyView){const a={weekStartsOn:getDayByIsoWeekday(s.isoWeekStartDay)};let i=startOfWeek(new Date().setFullYear(r.visibleYear,r.visibleMonth,r.visibleMonthWeek*7+1),a);i.getFullYear()===r.visibleYear&&i.getMonth()===r.visibleMonth?r.visibleDate=i.getDate():(i=startOfWeek(new Date().setFullYear(r.visibleYear,r.visibleMonth,r.visibleDate),a),r.visibleYear=i.getFullYear(),r.visibleMonth=i.getMonth(),r.visibleDate=i.getDate(),r.visibleMonthWeek=getWeekOfMonth(i,a))}});function reducer$1(r,s){switch(s.type){case"NAVIGATE_TO_NEXT":return navigateToNext(r);case"NAVIGATE_TO_PREV":return navigateToPrev(r);case"NAVIGATE_TO_DATE_AND_CHANGE_DATE_TEXT_FIELD_VALUE":return navigateToDateAndChangeDateTextFieldValue(r,s.payload);case"NAVIGATE_TO_NOW":return navigateToNow(r,s.payload);case"RELEASE_NAVIGATION":return releaseNavigation(r);case"CHANGE_DATE_TEXT_FIELD_VALUE":return changeDateTextFieldValue(r,s.payload);case"CHANGE_VIEW":return changeView(r,s.payload);case"USER_SETTINGS_CHANGE":return userSettingsChange(r,s.payload)}}function createDateTimePickerNavigateToDateAndChangeDateTextFieldValueAction({timestamp:r,formatDate:s}){const a=s(r);return{type:"NAVIGATE_TO_DATE_AND_CHANGE_DATE_TEXT_FIELD_VALUE",payload:{timestamp:r,dateTextFieldValue:a}}}function useDateTimePickerReducer({timestamp:r,isWeeklyView:s,isoWeekStartDay:a,formatDate:i}){function o(){let _=new Date(r);const E=i(r),R={weekStartsOn:getDayByIsoWeekday(a)};s&&(_=startOfWeek(_,R));const S=_.getFullYear(),j=_.getMonth();let T=0,A=0;return s&&(T=_.getDate(),A=getWeekOfMonth(_,R)),{dateTextFieldValue:E,isNavigationLock:!1,visibleYear:S,visibleMonth:j,visibleDate:T,visibleMonthWeek:A,isWeeklyView:s,isoWeekStartDay:a}}let[x,y]=reactExports.useReducer(reducer$1,void 0,o);return x.isoWeekStartDay!==a&&(x=userSettingsChange(x,{isoWeekStartDay:a}),y({type:"USER_SETTINGS_CHANGE",payload:{isoWeekStartDay:a}})),[x,y]}const SvgCollapseicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m7 14 5.4-5.4 5.4 5.4"})),SvgArrowLefticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:14,viewBox:"0 0 8 14",...r},reactExports.createElement("path",{fill:"currentColor",d:"M6.333 0 1.667 5.158 0 7l1.667 1.842L6.333 14 8 12.158 3.333 7 8 1.842z"})),SvgArrowRighticon$2=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:14,viewBox:"0 0 8 14",...r},reactExports.createElement("path",{fill:"currentColor",d:"m1.667 14 4.666-5.158L8 7 6.333 5.158 1.667 0 0 1.842 4.667 7 0 12.158z"}));function isBeforeByDayUnit(r,s){return r.getFullYear()<s.getFullYear()?!0:r.getFullYear()>s.getFullYear()?!1:r.getMonth()<s.getMonth()?!0:r.getMonth()>s.getMonth()?!1:r.getDate()<s.getDate()}function isSameByDayUnit(r,s){return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()&&r.getDate()===s.getDate()}function getDayDataKey(r,s,a){return`${r}-${s}-${a}`}function DateTimePicker2({blockPastDays:r=!1,canSetTime:s=!1,endPanelElement:a,hasTextFields:i=!1,supportWeeklyView:o=!1,isoWeekStartDay:x,now:y,readonly:_=!1,onChange:E,onChangeByToday:R,onMonthViewChanged:S,renderDayContent:j,rowDensity:T,timestamp:A=y,className:M,rangeTimestamps:P,onRangeTimestampsChange:L,theme:D="default",subheader:O,betterVisibleSelected:B=!1}){const N=new Date(A),F=new Date(y),W=useI18n(),V=reactExports.useCallback(Re=>hooks(Re).format(W.momentParams.dateTextField),[W.momentParams.dateTextField]),[U,G]=useDateTimePickerReducer({timestamp:A,isWeeklyView:o,isoWeekStartDay:x,formatDate:V});function oe(){const Re={timestamp:A,isWeeklyView:!U.isWeeklyView,isoWeekStartDay:x};if(G({type:"CHANGE_VIEW",payload:Re}),S!=null){const{visibleYear:Se,visibleMonth:Ee}=changeView(U,Re);(Se!==U.visibleYear||Ee!==U.visibleMonth)&&S(Se,Ee)}}function X(){if(G({type:"NAVIGATE_TO_PREV"}),S!=null){const{visibleYear:Re,visibleMonth:Se}=navigateToPrev(U);(Re!==U.visibleYear||Se!==U.visibleMonth)&&S(Re,Se)}}function ee(){if(G({type:"NAVIGATE_TO_NEXT"}),S!=null){const{visibleYear:Re,visibleMonth:Se}=navigateToNext(U);(Re!==U.visibleYear||Se!==U.visibleMonth)&&S(Re,Se)}}function ae(){_||(G({type:"NAVIGATE_TO_NOW",payload:{timestamp:y}}),A!==y&&R!=null&&R(y))}function ie(Re){A!==Re.timestamp&&E(Re.timestamp)}function se(Re){G({type:"CHANGE_DATE_TEXT_FIELD_VALUE",payload:{value:Re}})}function Q(){const Re=hooks(U.dateTextFieldValue.trim(),W.momentParams.dateTextFieldFormatters,!1);if(Re.isValid()){let Se=new Date(A);if(Se.setFullYear(Re.get("year"),Re.get("month"),Re.get("date")),!r){const Ee=Se.getTime();Ee!==A&&Z(Ee);return}if(isSameDay(Se,y)||Se.getTime()>y){s&&Se.getTime()<y&&(Se.setTime(y),Se.setFullYear(Re.get("year"),Re.get("month"),Re.get("date")));const Ee=Se.getTime();Ee!==A&&Z(Ee);return}}G({type:"CHANGE_DATE_TEXT_FIELD_VALUE",payload:{value:V(A)}})}function Z(Re){_||(P&&L?P[0]===null?L([Re,null]):P[1]===null?L([P[0],Re]):L([Re,null]):(G(createDateTimePickerNavigateToDateAndChangeDateTextFieldValueAction({timestamp:Re,formatDate:V})),E(Re)))}const J=reactExports.useRef(""),te=reactExports.useRef(null),[de,ce]=reactExports.useState(!1);reactExports.useLayoutEffect(()=>{var Ee;if(J.current==="")return;const Re=J.current;J.current="";const Se=(Ee=te.current)==null?void 0:Ee.querySelector(`[data-key="${Re}"] > button`);Se!=null&&!Se.disabled&&Se.focus()},[U.visibleYear,U.visibleMonth,U.visibleDate]);function me({year:Re,month:Se,date:Ee,element:Ce,event:he}){const Ae=he.key===(W.direction==="ltr"?"ArrowLeft":"ArrowRight"),Ne=he.key===(W.direction==="ltr"?"ArrowRight":"ArrowLeft"),Be=!U.isWeeklyView&&he.key==="ArrowUp",Oe=!U.isWeeklyView&&he.key==="ArrowDown";if(he.altKey||he.ctrlKey||he.shiftKey||he.metaKey||!(Ae||Ne||Be||Oe)||Ce.parentElement==null)return;const Ve=[...Ce.parentElement.children],We=Ve.indexOf(Ce);if(We===-1)return;let Te=0;Ae&&(Te=-1),Ne&&(Te=1),Be&&(Te=-7),Oe&&(Te=7);let De=We+Te;if(De<-1||De>Ve.length)return;if(!U.isWeeklyView&&Te===7){const Fe=new Date;if(Fe.setFullYear(Re,Se,Ee+Te),Se!==Fe.getMonth())return}if(De===-1||!U.isWeeklyView&&Ee===1&&Te===-1){const Fe=new Date;return Fe.setFullYear(Re,Se,Ee-1),J.current=getDayDataKey(Fe.getFullYear(),Fe.getMonth(),Fe.getDate()),X()}if(De===Ve.length||!U.isWeeklyView&&Se!==new Date(new Date().setFullYear(Re,Se,Ee+Te)).getMonth()){const Fe=new Date;return Fe.setFullYear(Re,Se,Ee+Te),U.isWeeklyView||Fe.setDate(1),J.current=getDayDataKey(Fe.getFullYear(),Fe.getMonth(),Fe.getDate()),ee()}const Le=Ve[De].querySelector("button");Le!=null&&!Le.disabled&&Le.focus()}const ve=reactExports.useRef({handleTimeTextFieldChange:ie,handleDateTextFieldChange:se,handleDateTextFieldBlur:Q});reactExports.useEffect(function(){ve.current={handleTimeTextFieldChange:ie,handleDateTextFieldChange:se,handleDateTextFieldBlur:Q}});const xe=reactExports.useMemo(()=>{const Re=ve;return i?jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__forms",children:[jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__form",children:[jsxRuntimeExports.jsx(Label,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"DateTimePicker2.form.date"})}),jsxRuntimeExports.jsx(TextField,{theme:"crowded",value:U.dateTextFieldValue,onChange:Se=>Re.current.handleDateTextFieldChange(Se),onBlur:()=>Re.current.handleDateTextFieldBlur()})]}),s===!0?jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__form",children:[jsxRuntimeExports.jsx(Label,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"DateTimePicker2.form.time"})}),jsxRuntimeExports.jsx(TextFieldTimePicker,{theme:"crowded",timestamp:A,minTimestamp:r&&y!=null?y:void 0,onChange:Se=>Re.current.handleTimeTextFieldChange(Se)})]}):null]}):null},[r,s,i,y,U.dateTextFieldValue,A]),ge=reactExports.useMemo(()=>{const Re=new Date;return Re.setFullYear(U.visibleYear,U.visibleMonth,1),hooks.locale(W.locale),hooks(Re).format(W.momentParams.monthYear)},[U.visibleMonth,U.visibleYear,W.locale,W.momentParams.monthYear]),[be,ye]=reactExports.useState(null);function Ie({index:Re,key:Se,year:Ee,month:Ce,date:he,isCurrentMonth:Ae}){const Ne=new Date(N);Ne.setFullYear(Ee,Ce,he);const Be=Ne.getTime(),Oe=isSameByDayUnit(Ne,N),Ue=isSameByDayUnit(Ne,new Date);let Ve=!1,We=!1,Te=!1,De=!1;if(P){const Le=[...P];if(Le[0]===Be&&(We=!0),Le[1]===Be&&(Te=!0),Le[0]!==null&&Le[1]===null&&(Le[1]=be,De=startOfDay(Le[1]).getTime()===startOfDay(Be).getTime(),Le.sort()),Le[0]!==null&&Le[1]!==null){Ve=Le[0]<=Be&&Be<=Le[1];const Fe=[startOfDay(Le[0]).getTime(),startOfDay(Le[1]).getTime()];We=Fe[0]===startOfDay(Be).getTime(),Te=Fe[1]===startOfDay(Be).getTime()}}return jsxRuntimeExports.jsx(DateTimePicker2Day,{domDataKey:getDayDataKey(Ee,Ce,he),theme:D,date:he,month:Ce,year:Ee,tabIndex:(U.isWeeklyView&&Re===0||!U.isWeeklyView&&he===1)&&!de?void 0:-1,timestamp:Be,disabled:r&&isBeforeByDayUnit(Ne,F),isSelected:Oe,betterVisibleSelected:B,isCurrentMonth:Ae,isToday:Ue,isInRange:!!Ve,isRangeEdgeStart:We,isRangeEdgeEnd:Te,isPotentialEdgeEnd:De,onMouseEnter:()=>ye(Be),onBlur:()=>ce(!1),onFocus:()=>ce(!0),onKeyDown:me,onClick:Z,children:j==null?he.toString():j(Ee,Ce,he,Oe)},Se)}const Pe=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__header",children:[jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__toolbar__visibleMonth",children:[jsxRuntimeExports.jsx("h3",{"data-testid":"DateTimePicker2 header text",className:"DateTimePicker2__header__text",children:jsxRuntimeExports.jsx(MessageReplacer_memo,{children:ge})}),o?jsxRuntimeExports.jsx("button",{type:"button","aria-label":U.isWeeklyView?W.formatMessage("DateTimePicker2.header.buttons.weekly.set-monthly"):W.formatMessage("DateTimePicker2.header.buttons.weekly.set-weekly"),onClick:oe,className:cx$6("DateTimePicker2__weeklyButton",{"DateTimePicker2__weeklyButton--isWeekly":U.isWeeklyView}),children:jsxRuntimeExports.jsx(SvgCollapseicon,{})}):null]}),jsxRuntimeExports.jsx("div",{className:"DateTimePicker2__toolbar",children:jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__toolbar__navigation",children:[jsxRuntimeExports.jsx("button",{type:"button","data-testid":"DateTimePicker2 previous button",onClick:X,className:"DateTimePicker2__toolbar__navigationButton rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgArrowLefticon,{})}),R==null?null:jsxRuntimeExports.jsx("button",{type:"button","data-testid":"DateTimePicker2 today button",onClick:ae,className:"DateTimePicker2__toolbar__navigationButton",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"DateTimePicker2.header.buttons.today"})}),jsxRuntimeExports.jsx("button",{type:"button","data-testid":"DateTimePicker2 next button",onClick:ee,className:"DateTimePicker2__toolbar__navigationButton rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgArrowRighticon$2,{})})]})})]}),jsxRuntimeExports.jsx(DatePickerWeekdayHeader_,{isoWeekStartDay:x,theme:D}),O,jsxRuntimeExports.jsx("div",{ref:te,className:"DateTimePicker2__calendarViewContainer",children:U.isWeeklyView?jsxRuntimeExports.jsx(CalendarWeekGrid,{month:U.visibleMonth,year:U.visibleYear,date:U.visibleDate,rowDensity:T,renderDay:Ie}):jsxRuntimeExports.jsx(CalendarMonthGrid,{isoWeekStartDay:x,month:U.visibleMonth,year:U.visibleYear,rowDensity:T,renderDay:Ie,theme:D})})]}),we=a==null?Pe:jsxRuntimeExports.jsxs("div",{className:"DateTimePicker2__panels",children:[jsxRuntimeExports.jsx("div",{children:Pe}),jsxRuntimeExports.jsx("div",{className:"DateTimePicker2__endPanelWrapper",children:a})]});return jsxRuntimeExports.jsxs("div",{className:cx$6("DateTimePicker2",M,{hasEndPanelElement:!!a,"DateTimePicker2--themeFilter":D==="filter","DateTimePicker2--readonly":_}),children:[xe,jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(UnsafeHeightTransition,{children:we})})]})}function _objectWithoutPropertiesLoose$4(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$4.apply(this,arguments)}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function r(i,o,x,y,_,E){if(E!==ReactPropTypesSecret){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var FOCUS_GROUP="data-focus-lock",FOCUS_DISABLED="data-focus-lock-disabled",FOCUS_ALLOW="data-no-focus-lock",FOCUS_AUTO="data-autofocus-inside",FOCUS_NO_AUTOFOCUS="data-no-autofocus",hiddenGuard={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},mediumFocus=createMedium({},function(r){var s=r.target,a=r.currentTarget;return{target:s,currentTarget:a}}),mediumBlur=createMedium(),mediumEffect=createMedium(),mediumSidecar=createSidecarMedium({async:!0}),emptyArray$1=[],FocusLock=reactExports.forwardRef(function(s,a){var i,o=reactExports.useState(),x=o[0],y=o[1],_=reactExports.useRef(),E=reactExports.useRef(!1),R=reactExports.useRef(null),S=s.children,j=s.disabled,T=s.noFocusGuards,A=s.persistentFocus,M=s.crossFrame,P=s.autoFocus;s.allowTextSelection;var L=s.group,D=s.className,O=s.whiteList,B=s.hasPositiveIndices,N=s.shards,F=N===void 0?emptyArray$1:N,W=s.as,V=W===void 0?"div":W,U=s.lockProps,G=U===void 0?{}:U,oe=s.sideCar,X=s.returnFocus,ee=s.focusOptions,ae=s.onActivation,ie=s.onDeactivation,se=reactExports.useState({}),Q=se[0],Z=reactExports.useCallback(function(){R.current=R.current||document&&document.activeElement,_.current&&ae&&ae(_.current),E.current=!0},[ae]),J=reactExports.useCallback(function(){E.current=!1,ie&&ie(_.current)},[ie]);reactExports.useEffect(function(){j||(R.current=null)},[]);var te=reactExports.useCallback(function(ye){var Ie=R.current;if(Ie&&Ie.focus){var Pe=typeof X=="function"?X(Ie):X;if(Pe){var we=typeof Pe=="object"?Pe:void 0;R.current=null,ye?Promise.resolve().then(function(){return Ie.focus(we)}):Ie.focus(we)}}},[X]),de=reactExports.useCallback(function(ye){E.current&&mediumFocus.useMedium(ye)},[]),ce=mediumBlur.useMedium,me=reactExports.useCallback(function(ye){_.current!==ye&&(_.current=ye,y(ye))},[]),ve=_extends$4((i={},i[FOCUS_DISABLED]=j&&"disabled",i[FOCUS_GROUP]=L,i),G),xe=T!==!0,ge=xe&&T!=="tail",be=useMergeRefs([a,me]);return reactExports.createElement(reactExports.Fragment,null,xe&&[reactExports.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:j?-1:0,style:hiddenGuard}),B?reactExports.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:j?-1:1,style:hiddenGuard}):null],!j&&reactExports.createElement(oe,{id:Q,sideCar:mediumSidecar,observed:x,disabled:j,persistentFocus:A,crossFrame:M,autoFocus:P,whiteList:O,shards:F,onActivation:Z,onDeactivation:J,returnFocus:te,focusOptions:ee}),reactExports.createElement(V,_extends$4({ref:be},ve,{className:D,onBlur:ce,onFocus:de}),S),ge&&reactExports.createElement("div",{"data-focus-guard":!0,tabIndex:j?-1:0,style:hiddenGuard}))});FocusLock.propTypes={};FocusLock.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};function _setPrototypeOf(r,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf(r,s)}function _inheritsLoose(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,_setPrototypeOf(r,s)}function _typeof$1(r){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$1(r)}function _toPrimitive$1(r,s){if(_typeof$1(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,s||"default");if(_typeof$1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function _toPropertyKey$1(r){var s=_toPrimitive$1(r,"string");return _typeof$1(s)==="symbol"?s:String(s)}function _defineProperty$3(r,s,a){return s=_toPropertyKey$1(s),s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function withSideEffect(r,s){function a(i){return i.displayName||i.name||"Component"}return function(o){var x=[],y;function _(){y=r(x.map(function(R){return R.props})),s(y)}var E=function(R){_inheritsLoose(S,R);function S(){return R.apply(this,arguments)||this}S.peek=function(){return y};var j=S.prototype;return j.componentDidMount=function(){x.push(this),_()},j.componentDidUpdate=function(){_()},j.componentWillUnmount=function(){var A=x.indexOf(this);x.splice(A,1),_()},j.render=function(){return React$6.createElement(o,this.props)},S}(reactExports.PureComponent);return _defineProperty$3(E,"displayName","SideEffect("+a(o)+")"),E}}var toArray$1=function(r){for(var s=Array(r.length),a=0;a<r.length;++a)s[a]=r[a];return s},asArray=function(r){return Array.isArray(r)?r:[r]},isElementHidden=function(r){if(r.nodeType!==Node.ELEMENT_NODE)return!1;var s=window.getComputedStyle(r,null);return!s||!s.getPropertyValue?!1:s.getPropertyValue("display")==="none"||s.getPropertyValue("visibility")==="hidden"},getParentNode=function(r){return r.parentNode&&r.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.parentNode.host:r.parentNode},isTopNode=function(r){return r===document||r&&r.nodeType===Node.DOCUMENT_NODE},isVisibleUncached=function(r,s){return!r||isTopNode(r)||!isElementHidden(r)&&s(getParentNode(r))},isVisibleCached=function(r,s){var a=r.get(s);if(a!==void 0)return a;var i=isVisibleUncached(s,isVisibleCached.bind(void 0,r));return r.set(s,i),i},isAutoFocusAllowedUncached=function(r,s){return r&&!isTopNode(r)?isAutoFocusAllowed(r)?s(getParentNode(r)):!1:!0},isAutoFocusAllowedCached=function(r,s){var a=r.get(s);if(a!==void 0)return a;var i=isAutoFocusAllowedUncached(s,isAutoFocusAllowedCached.bind(void 0,r));return r.set(s,i),i},getDataset=function(r){return r.dataset},isHTMLButtonElement=function(r){return r.tagName==="BUTTON"},isHTMLInputElement=function(r){return r.tagName==="INPUT"},isRadioElement=function(r){return isHTMLInputElement(r)&&r.type==="radio"},notHiddenInput=function(r){return!((isHTMLInputElement(r)||isHTMLButtonElement(r))&&(r.type==="hidden"||r.disabled))},isAutoFocusAllowed=function(r){var s=r.getAttribute(FOCUS_NO_AUTOFOCUS);return![!0,"true",""].includes(s)},isGuard=function(r){var s;return!!(r&&(!((s=getDataset(r))===null||s===void 0)&&s.focusGuard))},isNotAGuard=function(r){return!isGuard(r)},isDefined=function(r){return!!r},tabSort=function(r,s){var a=r.tabIndex-s.tabIndex,i=r.index-s.index;if(a){if(!r.tabIndex)return 1;if(!s.tabIndex)return-1}return a||i},orderByTabIndex=function(r,s,a){return toArray$1(r).map(function(i,o){return{node:i,index:o,tabIndex:a&&i.tabIndex===-1?(i.dataset||{}).focusGuard?0:-1:i.tabIndex}}).filter(function(i){return!s||i.tabIndex>=0}).sort(tabSort)},tabbables=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],queryTabbables=tabbables.join(","),queryGuardTabbables="".concat(queryTabbables,", [data-focus-guard]"),getFocusablesWithShadowDom=function(r,s){var a;return toArray$1(((a=r.shadowRoot)===null||a===void 0?void 0:a.children)||r.children).reduce(function(i,o){return i.concat(o.matches(s?queryGuardTabbables:queryTabbables)?[o]:[],getFocusablesWithShadowDom(o))},[])},getFocusables=function(r,s){return r.reduce(function(a,i){return a.concat(getFocusablesWithShadowDom(i,s),i.parentNode?toArray$1(i.parentNode.querySelectorAll(queryTabbables)).filter(function(o){return o===i}):[])},[])},getParentAutofocusables=function(r){var s=r.querySelectorAll("[".concat(FOCUS_AUTO,"]"));return toArray$1(s).map(function(a){return getFocusables([a])}).reduce(function(a,i){return a.concat(i)},[])},filterFocusable=function(r,s){return toArray$1(r).filter(function(a){return isVisibleCached(s,a)}).filter(function(a){return notHiddenInput(a)})},filterAutoFocusable=function(r,s){return s===void 0&&(s=new Map),toArray$1(r).filter(function(a){return isAutoFocusAllowedCached(s,a)})},getTabbableNodes=function(r,s,a){return orderByTabIndex(filterFocusable(getFocusables(r,a),s),!0,a)},getAllTabbableNodes=function(r,s){return orderByTabIndex(filterFocusable(getFocusables(r),s),!1)},parentAutofocusables=function(r,s){return filterFocusable(getParentAutofocusables(r),s)},contains=function(r,s){return r.shadowRoot?contains(r.shadowRoot,s):Object.getPrototypeOf(r).contains!==void 0&&Object.getPrototypeOf(r).contains.call(r,s)?!0:toArray$1(r.children).some(function(a){return contains(a,s)})},filterNested=function(r){for(var s=new Set,a=r.length,i=0;i<a;i+=1)for(var o=i+1;o<a;o+=1){var x=r[i].compareDocumentPosition(r[o]);(x&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&s.add(o),(x&Node.DOCUMENT_POSITION_CONTAINS)>0&&s.add(i)}return r.filter(function(y,_){return!s.has(_)})},getTopParent=function(r){return r.parentNode?getTopParent(r.parentNode):r},getAllAffectedNodes=function(r){var s=asArray(r);return s.filter(Boolean).reduce(function(a,i){var o=i.getAttribute(FOCUS_GROUP);return a.push.apply(a,o?filterNested(toArray$1(getTopParent(i).querySelectorAll("[".concat(FOCUS_GROUP,'="').concat(o,'"]:not([').concat(FOCUS_DISABLED,'="disabled"])')))):[i]),a},[])},getNestedShadowActiveElement=function(r){return r.activeElement?r.activeElement.shadowRoot?getNestedShadowActiveElement(r.activeElement.shadowRoot):r.activeElement:void 0},getActiveElement=function(){return document.activeElement?document.activeElement.shadowRoot?getNestedShadowActiveElement(document.activeElement.shadowRoot):document.activeElement:void 0},focusInFrame=function(r){return r===document.activeElement},focusInsideIframe=function(r){return!!toArray$1(r.querySelectorAll("iframe")).some(function(s){return focusInFrame(s)})},focusInside=function(r){var s=document&&getActiveElement();return!s||s.dataset&&s.dataset.focusGuard?!1:getAllAffectedNodes(r).some(function(a){return contains(a,s)||focusInsideIframe(a)})},focusIsHidden=function(){var r=document&&getActiveElement();return r?toArray$1(document.querySelectorAll("[".concat(FOCUS_ALLOW,"]"))).some(function(s){return contains(s,r)}):!1},findSelectedRadio=function(r,s){return s.filter(isRadioElement).filter(function(a){return a.name===r.name}).filter(function(a){return a.checked})[0]||r},correctNode=function(r,s){return isRadioElement(r)&&r.name?findSelectedRadio(r,s):r},correctNodes=function(r){var s=new Set;return r.forEach(function(a){return s.add(correctNode(a,r))}),r.filter(function(a){return s.has(a)})},pickFirstFocus=function(r){return r[0]&&r.length>1?correctNode(r[0],r):r[0]},pickFocusable=function(r,s){return r.length>1?r.indexOf(correctNode(r[s],r)):s},NEW_FOCUS="NEW_FOCUS",newFocus=function(r,s,a,i){var o=r.length,x=r[0],y=r[o-1],_=isGuard(a);if(!(a&&r.indexOf(a)>=0)){var E=a!==void 0?s.indexOf(a):-1,R=i?s.indexOf(i):E,S=i?r.indexOf(i):-1,j=E-R,T=s.indexOf(x),A=s.indexOf(y),M=correctNodes(s),P=a!==void 0?M.indexOf(a):-1,L=P-(i?M.indexOf(i):E),D=pickFocusable(r,0),O=pickFocusable(r,o-1);if(E===-1||S===-1)return NEW_FOCUS;if(!j&&S>=0)return S;if(E<=T&&_&&Math.abs(j)>1)return O;if(E>=A&&_&&Math.abs(j)>1)return D;if(j&&Math.abs(L)>1)return S;if(E<=T)return O;if(E>A)return D;if(j)return Math.abs(j)>1?S:(o+S+j)%o}},findAutoFocused=function(r){return function(s){var a,i=(a=getDataset(s))===null||a===void 0?void 0:a.autofocus;return s.autofocus||i!==void 0&&i!=="false"||r.indexOf(s)>=0}},pickAutofocus=function(r,s,a){var i=r.map(function(x){var y=x.node;return y}),o=filterAutoFocusable(i.filter(findAutoFocused(a)));return o&&o.length?pickFirstFocus(o):pickFirstFocus(filterAutoFocusable(s))},getParents=function(r,s){return s===void 0&&(s=[]),s.push(r),r.parentNode&&getParents(r.parentNode.host||r.parentNode,s),s},getCommonParent=function(r,s){for(var a=getParents(r),i=getParents(s),o=0;o<a.length;o+=1){var x=a[o];if(i.indexOf(x)>=0)return x}return!1},getTopCommonParent=function(r,s,a){var i=asArray(r),o=asArray(s),x=i[0],y=!1;return o.filter(Boolean).forEach(function(_){y=getCommonParent(y||_,_)||y,a.filter(Boolean).forEach(function(E){var R=getCommonParent(x,E);R&&(!y||contains(R,y)?y=R:y=getCommonParent(R,y))})}),y},allParentAutofocusables=function(r,s){return r.reduce(function(a,i){return a.concat(parentAutofocusables(i,s))},[])},reorderNodes=function(r,s){var a=new Map;return s.forEach(function(i){return a.set(i.node,i)}),r.map(function(i){return a.get(i)}).filter(isDefined)},getFocusMerge=function(r,s){var a=document&&getActiveElement(),i=getAllAffectedNodes(r).filter(isNotAGuard),o=getTopCommonParent(a||r,r,i),x=new Map,y=getAllTabbableNodes(i,x),_=getTabbableNodes(i,x).filter(function(A){var M=A.node;return isNotAGuard(M)});if(!(!_[0]&&(_=y,!_[0]))){var E=getAllTabbableNodes([o],x).map(function(A){var M=A.node;return M}),R=reorderNodes(E,_),S=R.map(function(A){var M=A.node;return M}),j=newFocus(S,E,a,s);if(j===NEW_FOCUS){var T=pickAutofocus(y,S,allParentAutofocusables(i,x));if(T)return{node:T};console.warn("focus-lock: cannot find any node to move focus into");return}return j===void 0?j:R[j]}},getFocusabledIn=function(r){var s=getAllAffectedNodes(r).filter(isNotAGuard),a=getTopCommonParent(r,r,s),i=new Map,o=getTabbableNodes([a],i,!0),x=getTabbableNodes(s,i).filter(function(y){var _=y.node;return isNotAGuard(_)}).map(function(y){var _=y.node;return _});return o.map(function(y){var _=y.node,E=y.index;return{node:_,index:E,lockItem:x.indexOf(_)>=0,guard:isGuard(_)}})},focusOn=function(r,s){"focus"in r&&r.focus(s),"contentWindow"in r&&r.contentWindow&&r.contentWindow.focus()},guardCount=0,lockDisabled=!1,setFocus=function(r,s,a){a===void 0&&(a={});var i=getFocusMerge(r,s);if(!lockDisabled&&i){if(guardCount>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),lockDisabled=!0,setTimeout(function(){lockDisabled=!1},1);return}guardCount++,focusOn(i.node,a.focusOptions),guardCount--}};function deferAction(r){var s=window,a=s.setImmediate;typeof a<"u"?a(r):setTimeout(r,1)}var focusOnBody=function(){return document&&document.activeElement===document.body},isFreeFocus=function(){return focusOnBody()||focusIsHidden()},lastActiveTrap=null,lastActiveFocus=null,lastPortaledElement=null,focusWasOutsideWindow=!1,defaultWhitelist=function(){return!0},focusWhitelisted=function(s){return(lastActiveTrap.whiteList||defaultWhitelist)(s)},recordPortal=function(s,a){lastPortaledElement={observerNode:s,portaledElement:a}},focusIsPortaledPair=function(s){return lastPortaledElement&&lastPortaledElement.portaledElement===s};function autoGuard(r,s,a,i){var o=null,x=r;do{var y=i[x];if(y.guard)y.node.dataset.focusAutoGuard&&(o=y);else if(y.lockItem){if(x!==r)return;o=null}else break}while((x+=a)!==s);o&&(o.node.tabIndex=0)}var extractRef=function(s){return s&&"current"in s?s.current:s},focusWasOutside=function(s){return s?!!focusWasOutsideWindow:focusWasOutsideWindow==="meanwhile"},checkInHost=function r(s,a,i){return a&&(a.host===s&&(!a.activeElement||i.contains(a.activeElement))||a.parentNode&&r(s,a.parentNode,i))},withinHost=function(s,a){return a.some(function(i){return checkInHost(s,i,i)})},activateTrap=function(){var s=!1;if(lastActiveTrap){var a=lastActiveTrap,i=a.observed,o=a.persistentFocus,x=a.autoFocus,y=a.shards,_=a.crossFrame,E=a.focusOptions,R=i||lastPortaledElement&&lastPortaledElement.portaledElement,S=document&&document.activeElement;if(R){var j=[R].concat(y.map(extractRef).filter(Boolean));if((!S||focusWhitelisted(S))&&(o||focusWasOutside(_)||!isFreeFocus()||!lastActiveFocus&&x)&&(R&&!(focusInside(j)||S&&withinHost(S,j)||focusIsPortaledPair(S))&&(document&&!lastActiveFocus&&S&&!x?(S.blur&&S.blur(),document.body.focus()):(s=setFocus(j,lastActiveFocus,{focusOptions:E}),lastPortaledElement={})),focusWasOutsideWindow=!1,lastActiveFocus=document&&document.activeElement),document){var T=document&&document.activeElement,A=getFocusabledIn(j),M=A.map(function(P){var L=P.node;return L}).indexOf(T);M>-1&&(A.filter(function(P){var L=P.guard,D=P.node;return L&&D.dataset.focusAutoGuard}).forEach(function(P){var L=P.node;return L.removeAttribute("tabIndex")}),autoGuard(M,A.length,1,A),autoGuard(M,-1,-1,A))}}}return s},onTrap=function(s){activateTrap()&&s&&(s.stopPropagation(),s.preventDefault())},onBlur=function(){return deferAction(activateTrap)},onFocus=function(s){var a=s.target,i=s.currentTarget;i.contains(a)||recordPortal(i,a)},FocusWatcher=function(){return null},onWindowBlur=function(){focusWasOutsideWindow="just",setTimeout(function(){focusWasOutsideWindow="meanwhile"},0)},attachHandler=function(){document.addEventListener("focusin",onTrap),document.addEventListener("focusout",onBlur),window.addEventListener("blur",onWindowBlur)},detachHandler=function(){document.removeEventListener("focusin",onTrap),document.removeEventListener("focusout",onBlur),window.removeEventListener("blur",onWindowBlur)};function reducePropsToState(r){return r.filter(function(s){var a=s.disabled;return!a})}function handleStateChangeOnClient(r){var s=r.slice(-1)[0];s&&!lastActiveTrap&&attachHandler();var a=lastActiveTrap,i=a&&s&&s.id===a.id;lastActiveTrap=s,a&&!i&&(a.onDeactivation(),r.filter(function(o){var x=o.id;return x===a.id}).length||a.returnFocus(!s)),s?(lastActiveFocus=null,(!i||a.observed!==s.observed)&&s.onActivation(),activateTrap(),deferAction(activateTrap)):(detachHandler(),lastActiveFocus=null)}mediumFocus.assignSyncMedium(onFocus);mediumBlur.assignMedium(onBlur);mediumEffect.assignMedium(function(r){return r({moveFocusInside:setFocus,focusInside})});const FocusTrap=withSideEffect(reducePropsToState,handleStateChangeOnClient)(FocusWatcher);var FocusLockCombination=reactExports.forwardRef(function(s,a){return reactExports.createElement(FocusLock,_extends$4({sideCar:FocusTrap,ref:a},s))}),_ref=FocusLock.propTypes||{};_ref.sideCar;_objectWithoutPropertiesLoose$4(_ref,["sideCar"]);FocusLockCombination.propTypes={};var State=(r=>(r[r.NONE=0]="NONE",r[r.PRE_ENTER=1]="PRE_ENTER",r[r.ENTER=2]="ENTER",r[r.LEAVE=3]="LEAVE",r))(State||{});const ROOT_ELEMENT_CLASS="BackdropModal",FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME="js-FocusLock-always-ignore";function isHTMLElement$1(r){return r!=null&&r.classList!=null&&typeof r.classList.contains=="function"}function hasIgnoreAncestor(r){return isHTMLElement$1(r)?r.classList.contains(FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME)?!0:hasIgnoreAncestor(r.parentElement):!1}function whiteList(r){return!(r.tagName==="IFRAME"||hasIgnoreAncestor(r))}function getModalPosition(r){if(r==null||r===document.body||r===document.documentElement||r===window)return null;let s;if(r instanceof Element)s=r.getBoundingClientRect();else if(r instanceof Text){const T=document.createRange();T.selectNodeContents(r),s=T.getBoundingClientRect()}if(s==null)return null;const{top:a,left:i,height:o,width:x}=s,y=window.innerWidth,_=window.innerHeight,E=x/2+i,R=o/2+a,S=Math.floor((y/2-E)*-1),j=Math.floor((_/2-R)*-1);return{x:S,y:j}}function useGetModalStyle(){return React$6.useMemo(()=>memoizeOnce(s=>{if(s!=null)return{"--BackdropModal__modal-x":`${s.x}px`,"--BackdropModal__modal-y":`${s.y}px`}}),[])}function useContextValue(r,s,a,i){const o=React$6.useRef(a);React$6.useLayoutEffect(()=>{o.current=a});const x=React$6.useRef(!1);return React$6.useLayoutEffect(()=>{const y=i.current;r&&y&&(y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby",s),y.setAttribute("aria-modal","true"))},[i,s,r]),React$6.useMemo(()=>({getHeaderId:()=>(x.current=!0,s),close:()=>{var y;return(y=o.current)==null?void 0:y.call(o)}}),[s])}const BackdropModalContext=React$6.createContext(null);function BackdropModal({fromRef:r,isVisible:s,blurred:a,className:i,backdropClassName:o,contentClassName:x,onClose:y,onAnimationEnd:_,preventPointerDown:E,preventBackdropClickPropagation:R,position:S="center",isTransparent:j=!1,children:T}){const A=React$6.useRef(null),M=useGetModalStyle(),P=`backdrop-modal-${useUniqueId()}`,L=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),()=>y==null?void 0:y()];let[{animationState:D,isVisible:O,modalEnterPosition:B,prevPropsIsVisible:N},F]=React$6.useState({animationState:0,isVisible:s,modalEnterPosition:null,prevPropsIsVisible:s});!N&&s?(N=s,D=1,O=!0,B=null,F({animationState:D,isVisible:O,modalEnterPosition:B,prevPropsIsVisible:N})):N&&!s&&(N=s,D=3,F({animationState:D,isVisible:O,modalEnterPosition:B,prevPropsIsVisible:N}));const W=React$6.useRef(),V=React$6.useCallback(()=>{requestAnimationFrame(()=>{document.querySelector(`.${ROOT_ELEMENT_CLASS}`)?document.body.classList.add("BackdropModal__body--withBackdrop"):document.body.classList.remove("BackdropModal__body--withBackdrop")})},[]);React$6.useLayoutEffect(()=>{!s&&W.current!=null&&(cancelAnimationFrame(W.current),W.current=null)},[s]),React$6.useLayoutEffect(()=>(V(),V),[O,V]);const U=D===1;React$6.useLayoutEffect(()=>(U&&(W.current=requestAnimationFrame(()=>{W.current=requestAnimationFrame(()=>{const ie=getModalPosition(r==null?void 0:r.current);F(se=>({...se,animationState:2,modalEnterPosition:ie}))})})),()=>{W.current!=null&&(cancelAnimationFrame(W.current),W.current=null)}),[U]);function G(ie){R&&ie.stopPropagation(),!(!y||!s||ie.target!==ie.currentTarget)&&y()}function oe(ie){ie.currentTarget===ie.target&&(_==null||_(D),D===3?F(se=>({...se,animationState:0,isVisible:!1})):D===2&&F(se=>({...se,animationState:0})))}const X=useContextValue(O,P,y,A),ee=O&&!(D===2||D===3)||O&&D===2,ae=B==null;return O?jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs("div",{className:cx$6(ROOT_ELEMENT_CLASS,i,{"BackdropModal--preAnimationIn":D===1,"BackdropModal--animationIn":D===2,"BackdropModal--animationOut":D===3,"BackdropModal--positionTop":S==="top","BackdropModal--isTransparent":j,"BackdropModal--isBlurred":a,"BackdropModal--isUnderAppSidebar":a}),onAnimationEnd:D===3||D===2?oe:void 0,children:[jsxRuntimeExports.jsx("div",{onClick:G,onPointerDown:E?stopPropagation$2:void 0,className:cx$6("BackdropModal__backdrop",o)}),jsxRuntimeExports.jsx("div",{ref:A,className:cx$6("BackdropModal__modal",x,{"BackdropModal__modal--animationIn":!ae&&D===2,"BackdropModal__modal--animationOut":!ae&&D===3,"BackdropModal__modal--noRefAnimationIn":ae&&D===2,"BackdropModal__modal--noRefAnimationOut":ae&&D===3}),style:M(B),children:jsxRuntimeExports.jsx(AnimationContextProviderWrapper,{isAnimating:D!==0,children:jsxRuntimeExports.jsx(BackdropModalContext.Provider,{value:X,children:O?jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[L],children:jsxRuntimeExports.jsx(FocusLockCombination,{whiteList,disabled:D===2||D===3,autoFocus:!0,children:jsxRuntimeExports.jsx(ShouldUpdate_memo,{shouldUpdate:ee,render:()=>typeof T=="function"?T():T})})}):null})})})]})}):null}function BackdropCardModal({fromRef:r,isVisible:s,frameLess:a,blurred:i,onClose:o,onAnimationEnd:x,preventPointerDown:y,preventBackdropClickPropagation:_,position:E,isTransparent:R=!1,children:S}){return jsxRuntimeExports.jsx(BackdropModal,{fromRef:r,isVisible:s,blurred:i,onClose:o,onAnimationEnd:x,preventPointerDown:y,preventBackdropClickPropagation:_,isTransparent:R,position:E,children:jsxRuntimeExports.jsx("div",{className:cx$6("BackdropCardModal",{"BackdropCardModal--frameLess":a}),children:typeof S=="function"?S():S})})}function Backdrop({children:r,isVisible:s,onClick:a,className:i,transparent:o=!1,asPortal:x=!0}){const y=x?Portal:React$6.Fragment;return jsxRuntimeExports.jsx(I18nConsumer,{children:_=>{const E=_.formatMessage("_.buttons.close");return jsxRuntimeExports.jsx(AnimatedInOut,{hasPreEntering:!0,isVisible:s,render:({isPreEntering:R,isEntering:S,isLeaving:j,props:T})=>jsxRuntimeExports.jsx(y,{children:jsxRuntimeExports.jsx("div",{...T,role:a?"button":void 0,"aria-label":a?E:void 0,onClick:a||void 0,className:cx$6("Backdrop",i,{"Backdrop--preAnimationIn":R,"Backdrop--animationIn":S,"Backdrop--animationOut":j,"Backdrop--transparent ":o}),children:r==null?null:r({isPreEntering:R,isEntering:S,isLeaving:j})})})})}})}const preventParentDrag=stopPropagation$2;function ConfirmModalContent({headerElement:r,mainElement:s,declineElement:a=jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.decline"}),acceptElement:i=jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.accept"}),disabled:o,onDecline:x,onAccept:y,isLoading:_}){return jsxRuntimeExports.jsxs("section",{className:"ConfirmModal",onClick:stopPropagation$2,children:[jsxRuntimeExports.jsx("h4",{className:"ConfirmModal__heading",children:r}),jsxRuntimeExports.jsx("p",{className:"ConfirmModal__text",children:s}),jsxRuntimeExports.jsxs("div",{className:"ConfirmModal__buttonsBar",children:[jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{disabled:o,onClick:()=>x(),children:a}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{disabled:o,autoFocus:!0,theme:"primary",onClick:()=>y(),loading:_,children:i})]})]})}function ConfirmModal({isVisible:r,fromRef:s,onDecline:a,onLeave:i,...o}){const x=React$6.useCallback(y=>{y===State.LEAVE&&(i==null||i())},[i]);return jsxRuntimeExports.jsx(BackdropCardModal,{preventPointerDown:!0,isVisible:r,fromRef:s,onClose:a,onAnimationEnd:x,children:jsxRuntimeExports.jsx("div",{onPointerDown:preventParentDrag,children:jsxRuntimeExports.jsx(ConfirmModalContent,{...o,onDecline:a})})})}let updateQueue=makeQueue();const raf=r=>schedule(r,updateQueue);let writeQueue=makeQueue();raf.write=r=>schedule(r,writeQueue);let onStartQueue=makeQueue();raf.onStart=r=>schedule(r,onStartQueue);let onFrameQueue=makeQueue();raf.onFrame=r=>schedule(r,onFrameQueue);let onFinishQueue=makeQueue();raf.onFinish=r=>schedule(r,onFinishQueue);let timeouts=[];raf.setTimeout=(r,s)=>{let a=raf.now()+s,i=()=>{let x=timeouts.findIndex(y=>y.cancel==i);~x&&timeouts.splice(x,1),pendingCount-=~x?1:0},o={time:a,handler:r,cancel:i};return timeouts.splice(findTimeout(a),0,o),pendingCount+=1,start(),o};let findTimeout=r=>~(~timeouts.findIndex(s=>s.time>r)||~timeouts.length);raf.cancel=r=>{onStartQueue.delete(r),onFrameQueue.delete(r),onFinishQueue.delete(r),updateQueue.delete(r),writeQueue.delete(r)};raf.sync=r=>{sync=!0,raf.batchedUpdates(r),sync=!1};raf.throttle=r=>{let s;function a(){try{r(...s)}finally{s=null}}function i(...o){s=o,raf.onStart(a)}return i.handler=r,i.cancel=()=>{onStartQueue.delete(a),s=null},i};let nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=r=>nativeRaf=r;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=r=>r();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};let ts=-1,pendingCount=0,sync=!1;function schedule(r,s){sync?(s.delete(r),r(0)):(s.add(r),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){let r=ts;ts=raf.now();let s=findTimeout(ts);if(s&&(eachSafely(timeouts.splice(0,s),a=>a.handler()),pendingCount-=s),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(r?Math.min(64,ts-r):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let r=new Set,s=r;return{add(a){pendingCount+=s==r&&!r.has(a)?1:0,r.add(a)},delete(a){return pendingCount-=s==r&&r.has(a)?1:0,r.delete(a)},flush(a){s.size&&(r=new Set,pendingCount-=s.size,eachSafely(s,i=>i(a)&&r.add(i)),pendingCount+=r.size,s=r)}}}function eachSafely(r,s){r.forEach(a=>{try{s(a)}catch(i){raf.catch(i)}})}function noop$2(){}const defineHidden=(r,s,a)=>Object.defineProperty(r,s,{value:a,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:r=>!!r&&r.constructor.name==="Object",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",und:r=>r===void 0};function isEqual$1(r,s){if(is.arr(r)){if(!is.arr(s)||r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}return r===s}const each=(r,s)=>r.forEach(s);function eachProp(r,s,a){if(is.arr(r)){for(let i=0;i<r.length;i++)s.call(a,r[i],`${i}`);return}for(const i in r)r.hasOwnProperty(i)&&s.call(a,r[i],i)}const toArray=r=>is.und(r)?[]:is.arr(r)?r:[r];function flush(r,s){if(r.size){const a=Array.from(r);r.clear(),each(a,s)}}const flushCalls=(r,...s)=>flush(r,a=>a(...s)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let createStringInterpolator$1,to,colors$1=null,skipAnimation=!1,willAdvance=noop$2;const assign=r=>{r.to&&(to=r.to),r.now&&(raf.now=r.now),r.colors!==void 0&&(colors$1=r.colors),r.skipAnimation!=null&&(skipAnimation=r.skipAnimation),r.createStringInterpolator&&(createStringInterpolator$1=r.createStringInterpolator),r.requestAnimationFrame&&raf.use(r.requestAnimationFrame),r.batchedUpdates&&(raf.batchedUpdates=r.batchedUpdates),r.willAdvance&&(willAdvance=r.willAdvance),r.frameLoop&&(raf.frameLoop=r.frameLoop)};var globals=Object.freeze({__proto__:null,get createStringInterpolator(){return createStringInterpolator$1},get to(){return to},get colors(){return colors$1},get skipAnimation(){return skipAnimation},get willAdvance(){return willAdvance},assign});const startQueue=new Set;let currentFrame=[],prevFrame=[],priority=0;const frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(r){priority>r.priority?(startQueue.add(r),raf.onStart(flushStartQueue)):(startSafely(r),raf(advance))},advance,sort(r){if(priority)raf.onFrame(()=>frameLoop.sort(r));else{const s=currentFrame.indexOf(r);~s&&(currentFrame.splice(s,1),startUnsafely(r))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(r){currentFrame.includes(r)||startUnsafely(r)}function startUnsafely(r){currentFrame.splice(findIndex(currentFrame,s=>s.priority>r.priority),0,r)}function advance(r){const s=prevFrame;for(let a=0;a<currentFrame.length;a++){const i=currentFrame[a];priority=i.priority,i.idle||(willAdvance(i),i.advance(r),i.idle||s.push(i))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=s,currentFrame.length>0}function findIndex(r,s){const a=r.findIndex(s);return a<0?r.length:a}const clamp$1=(r,s,a)=>Math.min(Math.max(a,r),s),colors={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...r){return"\\(\\s*("+r.join(")\\s*,\\s*(")+")\\s*\\)"}const rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(r){let s;return typeof r=="number"?r>>>0===r&&r>=0&&r<=4294967295?r:null:(s=hex6.exec(r))?parseInt(s[1]+"ff",16)>>>0:colors$1&&colors$1[r]!==void 0?colors$1[r]:(s=rgb.exec(r))?(parse255(s[1])<<24|parse255(s[2])<<16|parse255(s[3])<<8|255)>>>0:(s=rgba.exec(r))?(parse255(s[1])<<24|parse255(s[2])<<16|parse255(s[3])<<8|parse1(s[4]))>>>0:(s=hex3.exec(r))?parseInt(s[1]+s[1]+s[2]+s[2]+s[3]+s[3]+"ff",16)>>>0:(s=hex8.exec(r))?parseInt(s[1],16)>>>0:(s=hex4.exec(r))?parseInt(s[1]+s[1]+s[2]+s[2]+s[3]+s[3]+s[4]+s[4],16)>>>0:(s=hsl.exec(r))?(hslToRgb(parse360(s[1]),parsePercentage(s[2]),parsePercentage(s[3]))|255)>>>0:(s=hsla.exec(r))?(hslToRgb(parse360(s[1]),parsePercentage(s[2]),parsePercentage(s[3]))|parse1(s[4]))>>>0:null}function hue2rgb(r,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(s-r)*6*a:a<1/2?s:a<2/3?r+(s-r)*(2/3-a)*6:r}function hslToRgb(r,s,a){const i=a<.5?a*(1+s):a+s-a*s,o=2*a-i,x=hue2rgb(o,i,r+1/3),y=hue2rgb(o,i,r),_=hue2rgb(o,i,r-1/3);return Math.round(x*255)<<24|Math.round(y*255)<<16|Math.round(_*255)<<8}function parse255(r){const s=parseInt(r,10);return s<0?0:s>255?255:s}function parse360(r){return(parseFloat(r)%360+360)%360/360}function parse1(r){const s=parseFloat(r);return s<0?0:s>1?255:Math.round(s*255)}function parsePercentage(r){const s=parseFloat(r);return s<0?0:s>100?1:s/100}function colorToRgba(r){let s=normalizeColor(r);if(s===null)return r;s=s||0;let a=(s&4278190080)>>>24,i=(s&16711680)>>>16,o=(s&65280)>>>8,x=(s&255)/255;return`rgba(${a}, ${i}, ${o}, ${x})`}const createInterpolator=(r,s,a)=>{if(is.fun(r))return r;if(is.arr(r))return createInterpolator({range:r,output:s,extrapolate:a});if(is.str(r.output[0]))return createStringInterpolator$1(r);const i=r,o=i.output,x=i.range||[0,1],y=i.extrapolateLeft||i.extrapolate||"extend",_=i.extrapolateRight||i.extrapolate||"extend",E=i.easing||(R=>R);return R=>{const S=findRange(R,x);return interpolate(R,x[S],x[S+1],o[S],o[S+1],E,y,_,i.map)}};function interpolate(r,s,a,i,o,x,y,_,E){let R=E?E(r):r;if(R<s){if(y==="identity")return R;y==="clamp"&&(R=s)}if(R>a){if(_==="identity")return R;_==="clamp"&&(R=a)}return i===o?i:s===a?r<=s?i:o:(s===-1/0?R=-R:a===1/0?R=R-s:R=(R-s)/(a-s),R=x(R),i===-1/0?R=-R:o===1/0?R=R+i:R=R*(o-i)+i,R)}function findRange(r,s){for(var a=1;a<s.length-1&&!(s[a]>=r);++a);return a-1}const steps=(r,s="end")=>a=>{a=s==="end"?Math.min(a,.999):Math.max(a,.001);const i=a*r,o=s==="end"?Math.floor(i):Math.ceil(i);return clamp$1(0,1,o/r)},c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=r=>r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,easings={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>1-(1-r)*(1-r),easeInOutQuad:r=>r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2,easeInCubic:r=>r*r*r,easeOutCubic:r=>1-Math.pow(1-r,3),easeInOutCubic:r=>r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2,easeInQuart:r=>r*r*r*r,easeOutQuart:r=>1-Math.pow(1-r,4),easeInOutQuart:r=>r<.5?8*r*r*r*r:1-Math.pow(-2*r+2,4)/2,easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>1-Math.pow(1-r,5),easeInOutQuint:r=>r<.5?16*r*r*r*r*r:1-Math.pow(-2*r+2,5)/2,easeInSine:r=>1-Math.cos(r*Math.PI/2),easeOutSine:r=>Math.sin(r*Math.PI/2),easeInOutSine:r=>-(Math.cos(Math.PI*r)-1)/2,easeInExpo:r=>r===0?0:Math.pow(2,10*r-10),easeOutExpo:r=>r===1?1:1-Math.pow(2,-10*r),easeInOutExpo:r=>r===0?0:r===1?1:r<.5?Math.pow(2,20*r-10)/2:(2-Math.pow(2,-20*r+10))/2,easeInCirc:r=>1-Math.sqrt(1-Math.pow(r,2)),easeOutCirc:r=>Math.sqrt(1-Math.pow(r-1,2)),easeInOutCirc:r=>r<.5?(1-Math.sqrt(1-Math.pow(2*r,2)))/2:(Math.sqrt(1-Math.pow(-2*r+2,2))+1)/2,easeInBack:r=>c3*r*r*r-c1*r*r,easeOutBack:r=>1+c3*Math.pow(r-1,3)+c1*Math.pow(r-1,2),easeInOutBack:r=>r<.5?Math.pow(2*r,2)*((c2+1)*2*r-c2)/2:(Math.pow(2*r-2,2)*((c2+1)*(r*2-2)+c2)+2)/2,easeInElastic:r=>r===0?0:r===1?1:-Math.pow(2,10*r-10)*Math.sin((r*10-10.75)*c4),easeOutElastic:r=>r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r*10-.75)*c4)+1,easeInOutElastic:r=>r===0?0:r===1?1:r<.5?-(Math.pow(2,20*r-10)*Math.sin((20*r-11.125)*c5))/2:Math.pow(2,-20*r+10)*Math.sin((20*r-11.125)*c5)/2+1,easeInBounce:r=>1-bounceOut(1-r),easeOutBounce:bounceOut,easeInOutBounce:r=>r<.5?(1-bounceOut(1-2*r))/2:(1+bounceOut(2*r-1))/2,steps};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$3.apply(this,arguments)}const $get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=r=>!!(r&&r[$get]),getFluidValue=r=>r&&r[$get]?r[$get]():r,getFluidObservers=r=>r[$observers]||null;function callFluidObserver(r,s){r.eventObserved?r.eventObserved(s):r(s)}function callFluidObservers(r,s){let a=r[$observers];a&&a.forEach(i=>{callFluidObserver(i,s)})}class FluidValue{constructor(s){if(this[$get]=void 0,this[$observers]=void 0,!s&&!(s=this.get))throw Error("Unknown getter");setFluidGetter(this,s)}}const setFluidGetter=(r,s)=>setHidden(r,$get,s);function addFluidObserver(r,s){if(r[$get]){let a=r[$observers];a||setHidden(r,$observers,a=new Set),a.has(s)||(a.add(s),r.observerAdded&&r.observerAdded(a.size,s))}return s}function removeFluidObserver(r,s){let a=r[$observers];if(a&&a.has(s)){const i=a.size-1;i?a.delete(s):r[$observers]=null,r.observerRemoved&&r.observerRemoved(i,s)}}const setHidden=(r,s,a)=>Object.defineProperty(r,s,{value:a,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=r=>{const[s,a]=parseCSSVariable(r);if(!s||isSSR())return r;const i=window.getComputedStyle(document.documentElement).getPropertyValue(s);if(i)return i.trim();if(a&&a.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(a);return o||r}else{if(a&&cssVariableRegex.test(a))return variableToRgba(a);if(a)return a}return r},parseCSSVariable=r=>{const s=cssVariableRegex.exec(r);if(!s)return[,];const[,a,i]=s;return[a,i]};let namedColorRegex;const rgbaRound=(r,s,a,i,o)=>`rgba(${Math.round(s)}, ${Math.round(a)}, ${Math.round(i)}, ${o})`,createStringInterpolator=r=>{namedColorRegex||(namedColorRegex=colors$1?new RegExp(`(${Object.keys(colors$1).join("|")})(?!\\w)`,"g"):/^\b$/);const s=r.output.map(x=>getFluidValue(x).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),a=s.map(x=>x.match(numberRegex).map(Number)),o=a[0].map((x,y)=>a.map(_=>{if(!(y in _))throw Error('The arity of each "output" value must be equal');return _[y]})).map(x=>createInterpolator(_extends$3({},r,{output:x})));return x=>{var y;const _=!unitRegex.test(s[0])&&((y=s.find(R=>unitRegex.test(R)))==null?void 0:y.replace(numberRegex,""));let E=0;return s[0].replace(numberRegex,()=>`${o[E++](x)}${_||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=r=>{const s=r;let a=!1;if(typeof s!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...i)=>{a||(s(...i),a=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(r){return is.str(r)&&(r[0]=="#"||/\d/.test(r)||!isSSR()&&cssVariableRegex.test(r)||r in(colors$1||{}))}const useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),r};function useForceUpdate(){const r=reactExports.useState()[1],s=useIsMounted();return()=>{s.current&&r(Math.random())}}function useMemoOne(r,s){const[a]=reactExports.useState(()=>({inputs:s,result:r()})),i=reactExports.useRef(),o=i.current;let x=o;return x?s&&x.inputs&&areInputsEqual(s,x.inputs)||(x={inputs:s,result:r()}):x=a,reactExports.useEffect(()=>{i.current=x,o==a&&(a.inputs=a.result=void 0)},[x]),x.result}function areInputsEqual(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}const useOnce=r=>reactExports.useEffect(r,emptyDeps),emptyDeps=[];function usePrev(r){const s=reactExports.useRef();return reactExports.useEffect(()=>{s.current=r}),s.current}const $node=Symbol.for("Animated:node"),isAnimated=r=>!!r&&r[$node]===r,getAnimated=r=>r&&r[$node],setAnimated=(r,s)=>defineHidden(r,$node,s),getPayload=r=>r&&r[$node]&&r[$node].getPayload();class Animated{constructor(){this.payload=void 0,setAnimated(this,this)}getPayload(){return this.payload||[]}}class AnimatedValue extends Animated{constructor(s){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=s,is.num(this._value)&&(this.lastPosition=this._value)}static create(s){return new AnimatedValue(s)}getPayload(){return[this]}getValue(){return this._value}setValue(s,a){return is.num(s)&&(this.lastPosition=s,a&&(s=Math.round(s/a)*a,this.done&&(this.lastPosition=s))),this._value===s?!1:(this._value=s,!0)}reset(){const{done:s}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,s&&(this.lastVelocity=null),this.v0=null)}}class AnimatedString extends AnimatedValue{constructor(s){super(0),this._string=null,this._toString=void 0,this._toString=createInterpolator({output:[s,s]})}static create(s){return new AnimatedString(s)}getValue(){let s=this._string;return s==null?this._string=this._toString(this._value):s}setValue(s){if(is.str(s)){if(s==this._string)return!1;this._string=s,this._value=1}else if(super.setValue(s))this._string=null;else return!1;return!0}reset(s){s&&(this._toString=createInterpolator({output:[this.getValue(),s]})),this._value=0,super.reset()}}const TreeContext={dependencies:null};class AnimatedObject extends Animated{constructor(s){super(),this.source=s,this.setValue(s)}getValue(s){const a={};return eachProp(this.source,(i,o)=>{isAnimated(i)?a[o]=i.getValue(s):hasFluidValue(i)?a[o]=getFluidValue(i):s||(a[o]=i)}),a}setValue(s){this.source=s,this.payload=this._makePayload(s)}reset(){this.payload&&each(this.payload,s=>s.reset())}_makePayload(s){if(s){const a=new Set;return eachProp(s,this._addToPayload,a),Array.from(a)}}_addToPayload(s){TreeContext.dependencies&&hasFluidValue(s)&&TreeContext.dependencies.add(s);const a=getPayload(s);a&&each(a,i=>this.add(i))}}class AnimatedArray extends AnimatedObject{constructor(s){super(s)}static create(s){return new AnimatedArray(s)}getValue(){return this.source.map(s=>s.getValue())}setValue(s){const a=this.getPayload();return s.length==a.length?a.map((i,o)=>i.setValue(s[o])).some(Boolean):(super.setValue(s.map(makeAnimated)),!0)}}function makeAnimated(r){return(isAnimatedString(r)?AnimatedString:AnimatedValue).create(r)}function getAnimatedType(r){const s=getAnimated(r);return s?s.constructor:is.arr(r)?AnimatedArray:isAnimatedString(r)?AnimatedString:AnimatedValue}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$2.apply(this,arguments)}const withAnimated=(r,s)=>{const a=!is.fun(r)||r.prototype&&r.prototype.isReactComponent;return reactExports.forwardRef((i,o)=>{const x=reactExports.useRef(null),y=a&&reactExports.useCallback(M=>{x.current=updateRef(o,M)},[o]),[_,E]=getAnimatedState(i,s),R=useForceUpdate(),S=()=>{const M=x.current;if(a&&!M)return;(M?s.applyAnimatedValues(M,_.getValue(!0)):!1)===!1&&R()},j=new PropsObserver(S,E),T=reactExports.useRef();useIsomorphicLayoutEffect(()=>(T.current=j,each(E,M=>addFluidObserver(M,j)),()=>{T.current&&(each(T.current.deps,M=>removeFluidObserver(M,T.current)),raf.cancel(T.current.update))})),reactExports.useEffect(S,[]),useOnce(()=>()=>{const M=T.current;each(M.deps,P=>removeFluidObserver(P,M))});const A=s.getComponentProps(_.getValue());return reactExports.createElement(r,_extends$2({},A,{ref:y}))})};class PropsObserver{constructor(s,a){this.update=s,this.deps=a}eventObserved(s){s.type=="change"&&raf.write(this.update)}}function getAnimatedState(r,s){const a=new Set;return TreeContext.dependencies=a,r.style&&(r=_extends$2({},r,{style:s.createAnimatedStyle(r.style)})),r=new AnimatedObject(r),TreeContext.dependencies=null,[r,a]}function updateRef(r,s){return r&&(is.fun(r)?r(s):r.current=s),s}const cacheKey=Symbol.for("AnimatedComponent"),createHost=(r,{applyAnimatedValues:s=()=>!1,createAnimatedStyle:a=o=>new AnimatedObject(o),getComponentProps:i=o=>o}={})=>{const o={applyAnimatedValues:s,createAnimatedStyle:a,getComponentProps:i},x=y=>{const _=getDisplayName(y)||"Anonymous";return is.str(y)?y=x[y]||(x[y]=withAnimated(y,o)):y=y[cacheKey]||(y[cacheKey]=withAnimated(y,o)),y.displayName=`Animated(${_})`,y};return eachProp(r,(y,_)=>{is.arr(r)&&(_=getDisplayName(y)),x[_]=x(y)}),{animated:x}},getDisplayName=r=>is.str(r)?r:r&&is.str(r.displayName)?r.displayName:is.fun(r)&&r.name||null;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends$1.apply(this,arguments)}function callProp(r,...s){return is.fun(r)?r(...s):r}const matchProp=(r,s)=>r===!0||!!(s&&r&&(is.fun(r)?r(s):toArray(r).includes(s))),resolveProp=(r,s)=>is.obj(r)?s&&r[s]:r,getDefaultProp=(r,s)=>r.default===!0?r[s]:r.default?r.default[s]:void 0,noopTransform=r=>r,getDefaultProps=(r,s=noopTransform)=>{let a=DEFAULT_PROPS;r.default&&r.default!==!0&&(r=r.default,a=Object.keys(r));const i={};for(const o of a){const x=s(r[o],o);is.und(x)||(i[o]=x)}return i},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(r){const s={};let a=0;if(eachProp(r,(i,o)=>{RESERVED_PROPS[o]||(s[o]=i,a++)}),a)return s}function inferTo(r){const s=getForwardProps(r);if(s){const a={to:s};return eachProp(r,(i,o)=>o in s||(a[o]=i)),a}return _extends$1({},r)}function computeGoal(r){return r=getFluidValue(r),is.arr(r)?r.map(computeGoal):isAnimatedString(r)?globals.createStringInterpolator({range:[0,1],output:[r,r]})(1):r}function hasProps(r){for(const s in r)return!0;return!1}function isAsyncTo(r){return is.fun(r)||is.arr(r)&&is.obj(r[0])}function detachRefs(r,s){var a;(a=r.ref)==null||a.delete(r),s==null||s.delete(r)}function replaceRef(r,s){if(s&&r.ref!==s){var a;(a=r.ref)==null||a.delete(r),s.add(r),r.ref=s}}const config$1={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults=_extends$1({},config$1.default,{mass:1,damping:1,easing:easings.linear,clamp:!1});class AnimationConfig{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,defaults)}}function mergeConfig(r,s,a){a&&(a=_extends$1({},a),sanitizeConfig(a,s),s=_extends$1({},a,s)),sanitizeConfig(r,s),Object.assign(r,s);for(const y in defaults)r[y]==null&&(r[y]=defaults[y]);let{mass:i,frequency:o,damping:x}=r;return is.und(o)||(o<.01&&(o=.01),x<0&&(x=0),r.tension=Math.pow(2*Math.PI/o,2)*i,r.friction=4*Math.PI*x*i/o),r}function sanitizeConfig(r,s){if(!is.und(s.decay))r.duration=void 0;else{const a=!is.und(s.tension)||!is.und(s.friction);(a||!is.und(s.frequency)||!is.und(s.damping)||!is.und(s.mass))&&(r.duration=void 0,r.decay=void 0),a&&(r.frequency=void 0)}}const emptyArray=[];class Animation{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.to=void 0,this.from=void 0,this.config=new AnimationConfig,this.immediate=!1}}function scheduleProps(r,{key:s,props:a,defaultProps:i,state:o,actions:x}){return new Promise((y,_)=>{var E;let R,S,j=matchProp((E=a.cancel)!=null?E:i==null?void 0:i.cancel,s);if(j)M();else{is.und(a.pause)||(o.paused=matchProp(a.pause,s));let P=i==null?void 0:i.pause;P!==!0&&(P=o.paused||matchProp(P,s)),R=callProp(a.delay||0,s),P?(o.resumeQueue.add(A),x.pause()):(x.resume(),A())}function T(){o.resumeQueue.add(A),o.timeouts.delete(S),S.cancel(),R=S.time-raf.now()}function A(){R>0&&!globals.skipAnimation?(o.delayed=!0,S=raf.setTimeout(M,R),o.pauseQueue.add(T),o.timeouts.add(S)):M()}function M(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(T),o.timeouts.delete(S),r<=(o.cancelId||0)&&(j=!0);try{x.start(_extends$1({},a,{callId:r,cancel:j}),y)}catch(P){_(P)}}})}const getCombinedResult=(r,s)=>s.length==1?s[0]:s.some(a=>a.cancelled)?getCancelledResult(r.get()):s.every(a=>a.noop)?getNoopResult(r.get()):getFinishedResult(r.get(),s.every(a=>a.finished)),getNoopResult=r=>({value:r,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(r,s,a=!1)=>({value:r,finished:s,cancelled:a}),getCancelledResult=r=>({value:r,cancelled:!0,finished:!1});function runAsync(r,s,a,i){const{callId:o,parentId:x,onRest:y}=s,{asyncTo:_,promise:E}=a;return!x&&r===_&&!s.reset?E:a.promise=(async()=>{a.asyncId=o,a.asyncTo=r;const R=getDefaultProps(s,(L,D)=>D==="onRest"?void 0:L);let S,j;const T=new Promise((L,D)=>(S=L,j=D)),A=L=>{const D=o<=(a.cancelId||0)&&getCancelledResult(i)||o!==a.asyncId&&getFinishedResult(i,!1);if(D)throw L.result=D,j(L),L},M=(L,D)=>{const O=new BailSignal,B=new SkipAnimationSignal;return(async()=>{if(globals.skipAnimation)throw stopAsync(a),B.result=getFinishedResult(i,!1),j(B),B;A(O);const N=is.obj(L)?_extends$1({},L):_extends$1({},D,{to:L});N.parentId=o,eachProp(R,(W,V)=>{is.und(N[V])&&(N[V]=W)});const F=await i.start(N);return A(O),a.paused&&await new Promise(W=>{a.resumeQueue.add(W)}),F})()};let P;if(globals.skipAnimation)return stopAsync(a),getFinishedResult(i,!1);try{let L;is.arr(r)?L=(async D=>{for(const O of D)await M(O)})(r):L=Promise.resolve(r(M,i.stop.bind(i))),await Promise.all([L.then(S),T]),P=getFinishedResult(i.get(),!0,!1)}catch(L){if(L instanceof BailSignal)P=L.result;else if(L instanceof SkipAnimationSignal)P=L.result;else throw L}finally{o==a.asyncId&&(a.asyncId=x,a.asyncTo=x?_:void 0,a.promise=x?E:void 0)}return is.fun(y)&&raf.batchedUpdates(()=>{y(P,i,i.item)}),P})()}function stopAsync(r,s){flush(r.timeouts,a=>a.cancel()),r.pauseQueue.clear(),r.resumeQueue.clear(),r.asyncId=r.asyncTo=r.promise=void 0,s&&(r.cancelId=s)}class BailSignal extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class SkipAnimationSignal extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const isFrameValue=r=>r instanceof FrameValue;let nextId$1=1;class FrameValue extends FluidValue{constructor(...s){super(...s),this.id=nextId$1++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(s){this._priority!=s&&(this._priority=s,this._onPriorityChange(s))}get(){const s=getAnimated(this);return s&&s.getValue()}to(...s){return globals.to(this,s)}interpolate(...s){return deprecateInterpolate(),globals.to(this,s)}toJSON(){return this.get()}observerAdded(s){s==1&&this._attach()}observerRemoved(s){s==0&&this._detach()}_attach(){}_detach(){}_onChange(s,a=!1){callFluidObservers(this,{type:"change",parent:this,value:s,idle:a})}_onPriorityChange(s){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:s})}}const $P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=r=>(r[$P]&HAS_ANIMATED)>0,isAnimating$1=r=>(r[$P]&IS_ANIMATING)>0,isPaused=r=>(r[$P]&IS_PAUSED)>0,setActiveBit=(r,s)=>s?r[$P]|=IS_ANIMATING|HAS_ANIMATED:r[$P]&=~IS_ANIMATING,setPausedBit=(r,s)=>s?r[$P]|=IS_PAUSED:r[$P]&=~IS_PAUSED;class SpringValue extends FrameValue{constructor(s,a){if(super(),this.key=void 0,this.animation=new Animation,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(s)||!is.und(a)){const i=is.obj(s)?_extends$1({},s):_extends$1({},a,{from:s});is.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(isAnimating$1(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const s=getAnimated(this);return s instanceof AnimatedValue?s.lastVelocity||0:s.getPayload().map(a=>a.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating$1(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(s){let a=!0,i=!1;const o=this.animation;let{config:x,toValues:y}=o;const _=getPayload(o.to);!_&&hasFluidValue(o.to)&&(y=toArray(getFluidValue(o.to))),o.values.forEach((S,j)=>{if(S.done)return;const T=S.constructor==AnimatedString?1:_?_[j].lastPosition:y[j];let A=o.immediate,M=T;if(!A){if(M=S.lastPosition,x.tension<=0){S.done=!0;return}let P=S.elapsedTime+=s;const L=o.fromValues[j],D=S.v0!=null?S.v0:S.v0=is.arr(x.velocity)?x.velocity[j]:x.velocity;let O;const B=x.precision||(L==T?.005:Math.min(1,Math.abs(T-L)*.001));if(is.und(x.duration))if(x.decay){const N=x.decay===!0?.998:x.decay,F=Math.exp(-(1-N)*P);M=L+D/(1-N)*(1-F),A=Math.abs(S.lastPosition-M)<=B,O=D*F}else{O=S.lastVelocity==null?D:S.lastVelocity;const N=x.restVelocity||B/10,F=x.clamp?0:x.bounce,W=!is.und(F),V=L==T?S.v0>0:L<T;let U,G=!1;const oe=1,X=Math.ceil(s/oe);for(let ee=0;ee<X&&(U=Math.abs(O)>N,!(!U&&(A=Math.abs(T-M)<=B,A)));++ee){W&&(G=M==T||M>T==V,G&&(O=-O*F,M=T));const ae=-x.tension*1e-6*(M-T),ie=-x.friction*.001*O,se=(ae+ie)/x.mass;O=O+se*oe,M=M+O*oe}}else{let N=1;x.duration>0&&(this._memoizedDuration!==x.duration&&(this._memoizedDuration=x.duration,S.durationProgress>0&&(S.elapsedTime=x.duration*S.durationProgress,P=S.elapsedTime+=s)),N=(x.progress||0)+P/this._memoizedDuration,N=N>1?1:N<0?0:N,S.durationProgress=N),M=L+x.easing(N)*(T-L),O=(M-S.lastPosition)/s,A=N==1}S.lastVelocity=O,Number.isNaN(M)&&(console.warn("Got NaN while animating:",this),A=!0)}_&&!_[j].done&&(A=!1),A?S.done=!0:a=!1,S.setValue(M,x.round)&&(i=!0)});const E=getAnimated(this),R=E.getValue();if(a){const S=getFluidValue(o.to);(R!==S||i)&&!x.decay?(E.setValue(S),this._onChange(S)):i&&x.decay&&this._onChange(R),this._stop()}else i&&this._onChange(R)}set(s){return raf.batchedUpdates(()=>{this._stop(),this._focus(s),this._set(s)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$1(this)){const{to:s,config:a}=this.animation;raf.batchedUpdates(()=>{this._onStart(),a.decay||this._set(s,!1),this._stop()})}return this}update(s){return(this.queue||(this.queue=[])).push(s),this}start(s,a){let i;return is.und(s)?(i=this.queue||[],this.queue=[]):i=[is.obj(s)?s:_extends$1({},a,{to:s})],Promise.all(i.map(o=>this._update(o))).then(o=>getCombinedResult(this,o))}stop(s){const{to:a}=this.animation;return this._focus(this.get()),stopAsync(this._state,s&&this._lastCallId),raf.batchedUpdates(()=>this._stop(a,s)),this}reset(){this._update({reset:!0})}eventObserved(s){s.type=="change"?this._start():s.type=="priority"&&(this.priority=s.priority+1)}_prepareNode(s){const a=this.key||"";let{to:i,from:o}=s;i=is.obj(i)?i[a]:i,(i==null||isAsyncTo(i))&&(i=void 0),o=is.obj(o)?o[a]:o,o==null&&(o=void 0);const x={to:i,from:o};return hasAnimated(this)||(s.reverse&&([i,o]=[o,i]),o=getFluidValue(o),is.und(o)?getAnimated(this)||this._set(i):this._set(o)),x}_update(s,a){let i=_extends$1({},s);const{key:o,defaultProps:x}=this;i.default&&Object.assign(x,getDefaultProps(i,(E,R)=>/^on/.test(R)?resolveProp(E,o):E)),mergeActiveFn(this,i,"onProps"),sendEvent(this,"onProps",i,this);const y=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const _=this._state;return scheduleProps(++this._lastCallId,{key:o,props:i,defaultProps:x,state:_,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(_.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating$1(this)&&this._resume(),flushCalls(_.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,y)}}).then(E=>{if(i.loop&&E.finished&&!(a&&E.noop)){const R=createLoopUpdate(i);if(R)return this._update(R,!0)}return E})}_merge(s,a,i){if(a.cancel)return this.stop(!0),i(getCancelledResult(this));const o=!is.und(s.to),x=!is.und(s.from);if(o||x)if(a.callId>this._lastToId)this._lastToId=a.callId;else return i(getCancelledResult(this));const{key:y,defaultProps:_,animation:E}=this,{to:R,from:S}=E;let{to:j=R,from:T=S}=s;x&&!o&&(!a.default||is.und(j))&&(j=T),a.reverse&&([j,T]=[T,j]);const A=!isEqual$1(T,S);A&&(E.from=T),T=getFluidValue(T);const M=!isEqual$1(j,R);M&&this._focus(j);const P=isAsyncTo(a.to),{config:L}=E,{decay:D,velocity:O}=L;(o||x)&&(L.velocity=0),a.config&&!P&&mergeConfig(L,callProp(a.config,y),a.config!==_.config?callProp(_.config,y):void 0);let B=getAnimated(this);if(!B||is.und(j))return i(getFinishedResult(this,!0));const N=is.und(a.reset)?x&&!a.default:!is.und(T)&&matchProp(a.reset,y),F=N?T:this.get(),W=computeGoal(j),V=is.num(W)||is.arr(W)||isAnimatedString(W),U=!P&&(!V||matchProp(_.immediate||a.immediate,y));if(M){const ee=getAnimatedType(j);if(ee!==B.constructor)if(U)B=this._set(W);else throw Error(`Cannot animate between ${B.constructor.name} and ${ee.name}, as the "to" prop suggests`)}const G=B.constructor;let oe=hasFluidValue(j),X=!1;if(!oe){const ee=N||!hasAnimated(this)&&A;(M||ee)&&(X=isEqual$1(computeGoal(F),W),oe=!X),(!isEqual$1(E.immediate,U)&&!U||!isEqual$1(L.decay,D)||!isEqual$1(L.velocity,O))&&(oe=!0)}if(X&&isAnimating$1(this)&&(E.changed&&!N?oe=!0:oe||this._stop(R)),!P&&((oe||hasFluidValue(R))&&(E.values=B.getPayload(),E.toValues=hasFluidValue(j)?null:G==AnimatedString?[1]:toArray(W)),E.immediate!=U&&(E.immediate=U,!U&&!N&&this._set(R)),oe)){const{onRest:ee}=E;each(ACTIVE_EVENTS,ie=>mergeActiveFn(this,a,ie));const ae=getFinishedResult(this,checkFinished(this,R));flushCalls(this._pendingCalls,ae),this._pendingCalls.add(i),E.changed&&raf.batchedUpdates(()=>{E.changed=!N,ee==null||ee(ae,this),N?callProp(_.onRest,ae):E.onStart==null||E.onStart(ae,this)})}N&&this._set(F),P?i(runAsync(a.to,a,this._state,this)):oe?this._start():isAnimating$1(this)&&!M?this._pendingCalls.add(i):i(getNoopResult(F))}_focus(s){const a=this.animation;s!==a.to&&(getFluidObservers(this)&&this._detach(),a.to=s,getFluidObservers(this)&&this._attach())}_attach(){let s=0;const{to:a}=this.animation;hasFluidValue(a)&&(addFluidObserver(a,this),isFrameValue(a)&&(s=a.priority+1)),this.priority=s}_detach(){const{to:s}=this.animation;hasFluidValue(s)&&removeFluidObserver(s,this)}_set(s,a=!0){const i=getFluidValue(s);if(!is.und(i)){const o=getAnimated(this);if(!o||!isEqual$1(i,o.getValue())){const x=getAnimatedType(i);!o||o.constructor!=x?setAnimated(this,x.create(i)):o.setValue(i),o&&raf.batchedUpdates(()=>{this._onChange(i,a)})}}return getAnimated(this)}_onStart(){const s=this.animation;s.changed||(s.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,s.to)),this))}_onChange(s,a){a||(this._onStart(),callProp(this.animation.onChange,s,this)),callProp(this.defaultProps.onChange,s,this),super._onChange(s,a)}_start(){const s=this.animation;getAnimated(this).reset(getFluidValue(s.to)),s.immediate||(s.fromValues=s.values.map(a=>a.lastPosition)),isAnimating$1(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals.skipAnimation?this.finish():frameLoop.start(this)}_stop(s,a){if(isAnimating$1(this)){setActiveBit(this,!1);const i=this.animation;each(i.values,x=>{x.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const o=a?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,s!=null?s:i.to));flushCalls(this._pendingCalls,o),i.changed&&(i.changed=!1,sendEvent(this,"onRest",o,this))}}}function checkFinished(r,s){const a=computeGoal(s),i=computeGoal(r.get());return isEqual$1(i,a)}function createLoopUpdate(r,s=r.loop,a=r.to){let i=callProp(s);if(i){const o=i!==!0&&inferTo(i),x=(o||r).reverse,y=!o||o.reset;return createUpdate(_extends$1({},r,{loop:s,default:!1,pause:void 0,to:!x||isAsyncTo(a)?a:void 0,from:y?r.from:void 0,reset:y},o))}}function createUpdate(r){const{to:s,from:a}=r=inferTo(r),i=new Set;return is.obj(s)&&findDefined(s,i),is.obj(a)&&findDefined(a,i),r.keys=i.size?Array.from(i):null,r}function findDefined(r,s){eachProp(r,(a,i)=>a!=null&&s.add(i))}const ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(r,s,a){r.animation[a]=s[a]!==getDefaultProp(s,a)?resolveProp(s[a],r.key):void 0}function sendEvent(r,s,...a){var i,o,x,y;(i=(o=r.animation)[s])==null||i.call(o,...a),(x=(y=r.defaultProps)[s])==null||x.call(y,...a)}const BATCHED_EVENTS=["onStart","onChange","onRest"];let nextId=1;class Controller{constructor(s,a){this.id=nextId++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),a&&(this._flush=a),s&&this.start(_extends$1({default:!0},s))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(s=>s.idle&&!s.isDelayed&&!s.isPaused)}get item(){return this._item}set item(s){this._item=s}get(){const s={};return this.each((a,i)=>s[i]=a.get()),s}set(s){for(const a in s){const i=s[a];is.und(i)||this.springs[a].set(i)}}update(s){return s&&this.queue.push(createUpdate(s)),this}start(s){let{queue:a}=this;return s?a=toArray(s).map(createUpdate):this.queue=[],this._flush?this._flush(this,a):(prepareKeys(this,a),flushUpdateQueue(this,a))}stop(s,a){if(s!==!!s&&(a=s),a){const i=this.springs;each(toArray(a),o=>i[o].stop(!!s))}else stopAsync(this._state,this._lastAsyncId),this.each(i=>i.stop(!!s));return this}pause(s){if(is.und(s))this.start({pause:!0});else{const a=this.springs;each(toArray(s),i=>a[i].pause())}return this}resume(s){if(is.und(s))this.start({pause:!1});else{const a=this.springs;each(toArray(s),i=>a[i].resume())}return this}each(s){eachProp(this.springs,s)}_onFrame(){const{onStart:s,onChange:a,onRest:i}=this._events,o=this._active.size>0,x=this._changed.size>0;(o&&!this._started||x&&!this._started)&&(this._started=!0,flush(s,([E,R])=>{R.value=this.get(),E(R,this,this._item)}));const y=!o&&this._started,_=x||y&&i.size?this.get():null;x&&a.size&&flush(a,([E,R])=>{R.value=_,E(R,this,this._item)}),y&&(this._started=!1,flush(i,([E,R])=>{R.value=_,E(R,this,this._item)}))}eventObserved(s){if(s.type=="change")this._changed.add(s.parent),s.idle||this._active.add(s.parent);else if(s.type=="idle")this._active.delete(s.parent);else return;raf.onFrame(this._onFrame)}}function flushUpdateQueue(r,s){return Promise.all(s.map(a=>flushUpdate(r,a))).then(a=>getCombinedResult(r,a))}async function flushUpdate(r,s,a){const{keys:i,to:o,from:x,loop:y,onRest:_,onResolve:E}=s,R=is.obj(s.default)&&s.default;y&&(s.loop=!1),o===!1&&(s.to=null),x===!1&&(s.from=null);const S=is.arr(o)||is.fun(o)?o:void 0;S?(s.to=void 0,s.onRest=void 0,R&&(R.onRest=void 0)):each(BATCHED_EVENTS,P=>{const L=s[P];if(is.fun(L)){const D=r._events[P];s[P]=({finished:O,cancelled:B})=>{const N=D.get(L);N?(O||(N.finished=!1),B&&(N.cancelled=!0)):D.set(L,{value:null,finished:O||!1,cancelled:B||!1})},R&&(R[P]=s[P])}});const j=r._state;s.pause===!j.paused?(j.paused=s.pause,flushCalls(s.pause?j.pauseQueue:j.resumeQueue)):j.paused&&(s.pause=!0);const T=(i||Object.keys(r.springs)).map(P=>r.springs[P].start(s)),A=s.cancel===!0||getDefaultProp(s,"cancel")===!0;(S||A&&j.asyncId)&&T.push(scheduleProps(++r._lastAsyncId,{props:s,state:j,actions:{pause:noop$2,resume:noop$2,start(P,L){A?(stopAsync(j,r._lastAsyncId),L(getCancelledResult(r))):(P.onRest=_,L(runAsync(S,P,j,r)))}}})),j.paused&&await new Promise(P=>{j.resumeQueue.add(P)});const M=getCombinedResult(r,await Promise.all(T));if(y&&M.finished&&!(a&&M.noop)){const P=createLoopUpdate(s,y,o);if(P)return prepareKeys(r,[P]),flushUpdate(r,P,!0)}return E&&raf.batchedUpdates(()=>E(M,r,r.item)),M}function getSprings(r,s){const a=_extends$1({},r.springs);return s&&each(toArray(s),i=>{is.und(i.keys)&&(i=createUpdate(i)),is.obj(i.to)||(i=_extends$1({},i,{to:void 0})),prepareSprings(a,i,o=>createSpring(o))}),setSprings(r,a),a}function setSprings(r,s){eachProp(s,(a,i)=>{r.springs[i]||(r.springs[i]=a,addFluidObserver(a,r))})}function createSpring(r,s){const a=new SpringValue;return a.key=r,s&&addFluidObserver(a,s),a}function prepareSprings(r,s,a){s.keys&&each(s.keys,i=>{(r[i]||(r[i]=a(i)))._prepareNode(s)})}function prepareKeys(r,s){each(s,a=>{prepareSprings(r.springs,a,i=>createSpring(i,r))})}function _objectWithoutPropertiesLoose$3(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}const _excluded$6=["children"],SpringContext=r=>{let{children:s}=r,a=_objectWithoutPropertiesLoose$3(r,_excluded$6);const i=reactExports.useContext(ctx),o=a.pause||!!i.pause,x=a.immediate||!!i.immediate;a=useMemoOne(()=>({pause:o,immediate:x}),[o,x]);const{Provider:y}=ctx;return reactExports.createElement(y,{value:a},s)},ctx=makeContext(SpringContext,{});SpringContext.Provider=ctx.Provider;SpringContext.Consumer=ctx.Consumer;function makeContext(r,s){return Object.assign(r,reactExports.createContext(s)),r.Provider._context=r,r.Consumer._context=r,r}const SpringRef=()=>{const r=[],s=function(o){deprecateDirectCall();const x=[];return each(r,(y,_)=>{if(is.und(o))x.push(y.start());else{const E=a(o,y,_);E&&x.push(y.start(E))}}),x};s.current=r,s.add=function(i){r.includes(i)||r.push(i)},s.delete=function(i){const o=r.indexOf(i);~o&&r.splice(o,1)},s.pause=function(){return each(r,i=>i.pause(...arguments)),this},s.resume=function(){return each(r,i=>i.resume(...arguments)),this},s.set=function(i){each(r,o=>o.set(i))},s.start=function(i){const o=[];return each(r,(x,y)=>{if(is.und(i))o.push(x.start());else{const _=this._getProps(i,x,y);_&&o.push(x.start(_))}}),o},s.stop=function(){return each(r,i=>i.stop(...arguments)),this},s.update=function(i){return each(r,(o,x)=>o.update(this._getProps(i,o,x))),this};const a=function(o,x,y){return is.fun(o)?o(y,x):o};return s._getProps=a,s};let TransitionPhase;(function(r){r.MOUNT="mount",r.ENTER="enter",r.UPDATE="update",r.LEAVE="leave"})(TransitionPhase||(TransitionPhase={}));function useTransition(r,s,a){const i=is.fun(s)&&s,{reset:o,sort:x,trail:y=0,expires:_=!0,exitBeforeEnter:E=!1,onDestroyed:R,ref:S,config:j}=i?i():s,T=reactExports.useMemo(()=>i||arguments.length==3?SpringRef():void 0,[]),A=toArray(r),M=[],P=reactExports.useRef(null),L=o?null:P.current;useIsomorphicLayoutEffect(()=>{P.current=M}),useOnce(()=>(each(M,ie=>{T==null||T.add(ie.ctrl),ie.ctrl.ref=T}),()=>{each(P.current,ie=>{ie.expired&&clearTimeout(ie.expirationId),detachRefs(ie.ctrl,T),ie.ctrl.stop(!0)})}));const D=getKeys(A,i?i():s,L),O=o&&P.current||[];useIsomorphicLayoutEffect(()=>each(O,({ctrl:ie,item:se,key:Q})=>{detachRefs(ie,T),callProp(R,se,Q)}));const B=[];if(L&&each(L,(ie,se)=>{ie.expired?(clearTimeout(ie.expirationId),O.push(ie)):(se=B[se]=D.indexOf(ie.key),~se&&(M[se]=ie))}),each(A,(ie,se)=>{M[se]||(M[se]={key:D[se],item:ie,phase:TransitionPhase.MOUNT,ctrl:new Controller},M[se].ctrl.item=ie)}),B.length){let ie=-1;const{leave:se}=i?i():s;each(B,(Q,Z)=>{const J=L[Z];~Q?(ie=M.indexOf(J),M[ie]=_extends$1({},J,{item:A[Q]})):se&&M.splice(++ie,0,J)})}is.fun(x)&&M.sort((ie,se)=>x(ie.item,se.item));let N=-y;const F=useForceUpdate(),W=getDefaultProps(s),V=new Map,U=reactExports.useRef(new Map),G=reactExports.useRef(!1);each(M,(ie,se)=>{const Q=ie.key,Z=ie.phase,J=i?i():s;let te,de,ce=callProp(J.delay||0,Q);if(Z==TransitionPhase.MOUNT)te=J.enter,de=TransitionPhase.ENTER;else{const ge=D.indexOf(Q)<0;if(Z!=TransitionPhase.LEAVE)if(ge)te=J.leave,de=TransitionPhase.LEAVE;else if(te=J.update)de=TransitionPhase.UPDATE;else return;else if(!ge)te=J.enter,de=TransitionPhase.ENTER;else return}if(te=callProp(te,ie.item,se),te=is.obj(te)?inferTo(te):{to:te},!te.config){const ge=j||W.config;te.config=callProp(ge,ie.item,se,de)}N+=y;const me=_extends$1({},W,{delay:ce+N,ref:S,immediate:J.immediate,reset:!1},te);if(de==TransitionPhase.ENTER&&is.und(me.from)){const ge=i?i():s,be=is.und(ge.initial)||L?ge.from:ge.initial;me.from=callProp(be,ie.item,se)}const{onResolve:ve}=me;me.onResolve=ge=>{callProp(ve,ge);const be=P.current,ye=be.find(Ie=>Ie.key===Q);if(ye&&!(ge.cancelled&&ye.phase!=TransitionPhase.UPDATE)&&ye.ctrl.idle){const Ie=be.every(Pe=>Pe.ctrl.idle);if(ye.phase==TransitionPhase.LEAVE){const Pe=callProp(_,ye.item);if(Pe!==!1){const we=Pe===!0?0:Pe;if(ye.expired=!0,!Ie&&we>0){we<=2147483647&&(ye.expirationId=setTimeout(F,we));return}}}Ie&&be.some(Pe=>Pe.expired)&&(U.current.delete(ye),E&&(G.current=!0),F())}};const xe=getSprings(ie.ctrl,me);de===TransitionPhase.LEAVE&&E?U.current.set(ie,{phase:de,springs:xe,payload:me}):V.set(ie,{phase:de,springs:xe,payload:me})});const oe=reactExports.useContext(SpringContext),X=usePrev(oe),ee=oe!==X&&hasProps(oe);useIsomorphicLayoutEffect(()=>{ee&&each(M,ie=>{ie.ctrl.start({default:oe})})},[oe]),each(V,(ie,se)=>{if(U.current.size){const Q=M.findIndex(Z=>Z.key===se.key);M.splice(Q,1)}}),useIsomorphicLayoutEffect(()=>{each(U.current.size?U.current:V,({phase:ie,payload:se},Q)=>{const{ctrl:Z}=Q;Q.phase=ie,T==null||T.add(Z),ee&&ie==TransitionPhase.ENTER&&Z.start({default:oe}),se&&(replaceRef(Z,se.ref),(Z.ref||T)&&!G.current?Z.update(se):(Z.start(se),G.current&&(G.current=!1)))})},o?void 0:a);const ae=ie=>reactExports.createElement(reactExports.Fragment,null,M.map((se,Q)=>{const{springs:Z}=V.get(se)||se.ctrl,J=ie(_extends$1({},Z),se.item,se,Q);return J&&J.type?reactExports.createElement(J.type,_extends$1({},J.props,{key:is.str(se.key)||is.num(se.key)?se.key:se.ctrl.id,ref:J.ref})):J}));return T?[ae,T]:ae}let nextKey=1;function getKeys(r,{key:s,keys:a=s},i){if(a===null){const o=new Set;return r.map(x=>{const y=i&&i.find(_=>_.item===x&&_.phase!==TransitionPhase.LEAVE&&!o.has(_));return y?(o.add(y),y.key):nextKey++})}return is.und(a)?r:is.fun(a)?r.map(a):toArray(a)}class Interpolation extends FrameValue{constructor(s,a){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=s,this.calc=createInterpolator(...a);const i=this._get(),o=getAnimatedType(i);setAnimated(this,o.create(i))}advance(s){const a=this._get(),i=this.get();isEqual$1(a,i)||(getAnimated(this).setValue(a),this._onChange(a,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const s=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...s)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),s=>{s.done=!1}),globals.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let s=1;each(toArray(this.source),a=>{hasFluidValue(a)&&addFluidObserver(a,this),isFrameValue(a)&&(a.idle||this._active.add(a),s=Math.max(s,a.priority+1))}),this.priority=s,this._start()}_detach(){each(toArray(this.source),s=>{hasFluidValue(s)&&removeFluidObserver(s,this)}),this._active.clear(),becomeIdle(this)}eventObserved(s){s.type=="change"?s.idle?this.advance():(this._active.add(s.parent),this._start()):s.type=="idle"?this._active.delete(s.parent):s.type=="priority"&&(this.priority=toArray(this.source).reduce((a,i)=>Math.max(a,(isFrameValue(i)?i.priority:0)+1),0))}}function isIdle(r){return r.idle!==!1}function checkIdle(r){return!r.size||Array.from(r).every(isIdle)}function becomeIdle(r){r.idle||(r.idle=!0,each(getPayload(r),s=>{s.done=!0}),callFluidObservers(r,{type:"idle",parent:r}))}globals.assign({createStringInterpolator,to:(r,s)=>new Interpolation(r,s)});function _objectWithoutPropertiesLoose$2(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}const _excluded$2$1=["style","children","scrollTop","scrollLeft","viewBox"],isCustomPropRE=/^--/;function dangerousStyleValue(r,s){return s==null||typeof s=="boolean"||s===""?"":typeof s=="number"&&s!==0&&!isCustomPropRE.test(r)&&!(isUnitlessNumber.hasOwnProperty(r)&&isUnitlessNumber[r])?s+"px":(""+s).trim()}const attributeCache={};function applyAnimatedValues(r,s){if(!r.nodeType||!r.setAttribute)return!1;const a=r.nodeName==="filter"||r.parentNode&&r.parentNode.nodeName==="filter",i=s,{style:o,children:x,scrollTop:y,scrollLeft:_,viewBox:E}=i,R=_objectWithoutPropertiesLoose$2(i,_excluded$2$1),S=Object.values(R),j=Object.keys(R).map(T=>a||r.hasAttribute(T)?T:attributeCache[T]||(attributeCache[T]=T.replace(/([A-Z])/g,A=>"-"+A.toLowerCase())));x!==void 0&&(r.textContent=x);for(let T in o)if(o.hasOwnProperty(T)){const A=dangerousStyleValue(T,o[T]);isCustomPropRE.test(T)?r.style.setProperty(T,A):r.style[T]=A}j.forEach((T,A)=>{r.setAttribute(T,S[A])}),y!==void 0&&(r.scrollTop=y),_!==void 0&&(r.scrollLeft=_),E!==void 0&&r.setAttribute("viewBox",E)}let isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const prefixKey=(r,s)=>r+s.charAt(0).toUpperCase()+s.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((r,s)=>(prefixes.forEach(a=>r[prefixKey(a,s)]=r[s]),r),isUnitlessNumber);const _excluded$1$1=["x","y","z"],domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(r,s)=>is.num(r)&&r!==0?r+s:r,isValueIdentity=(r,s)=>is.arr(r)?r.every(a=>isValueIdentity(a,s)):is.num(r)?r===s:parseFloat(r)===s;class AnimatedStyle extends AnimatedObject{constructor(s){let{x:a,y:i,z:o}=s,x=_objectWithoutPropertiesLoose$2(s,_excluded$1$1);const y=[],_=[];(a||i||o)&&(y.push([a||0,i||0,o||0]),_.push(E=>[`translate3d(${E.map(R=>addUnit(R,"px")).join(",")})`,isValueIdentity(E,0)])),eachProp(x,(E,R)=>{if(R==="transform")y.push([E||""]),_.push(S=>[S,S===""]);else if(domTransforms.test(R)){if(delete x[R],is.und(E))return;const S=pxTransforms.test(R)?"px":degTransforms.test(R)?"deg":"";y.push(toArray(E)),_.push(R==="rotate3d"?([j,T,A,M])=>[`rotate3d(${j},${T},${A},${addUnit(M,S)})`,isValueIdentity(M,0)]:j=>[`${R}(${j.map(T=>addUnit(T,S)).join(",")})`,isValueIdentity(j,R.startsWith("scale")?1:0)])}}),y.length&&(x.transform=new FluidTransform(y,_)),super(x)}}class FluidTransform extends FluidValue{constructor(s,a){super(),this._value=null,this.inputs=s,this.transforms=a}get(){return this._value||(this._value=this._get())}_get(){let s="",a=!0;return each(this.inputs,(i,o)=>{const x=getFluidValue(i[0]),[y,_]=this.transforms[o](is.arr(x)?x:i.map(getFluidValue));s+=" "+y,a=a&&_}),a?"none":s}observerAdded(s){s==1&&each(this.inputs,a=>each(a,i=>hasFluidValue(i)&&addFluidObserver(i,this)))}observerRemoved(s){s==0&&each(this.inputs,a=>each(a,i=>hasFluidValue(i)&&removeFluidObserver(i,this)))}eventObserved(s){s.type=="change"&&(this._value=null),callFluidObservers(this,s)}}const primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],_excluded$3=["scrollTop","scrollLeft"];globals.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator,colors});const host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:r=>new AnimatedStyle(r),getComponentProps:r=>_objectWithoutPropertiesLoose$2(r,_excluded$3)}),animated=host.animated;let globalModalDispatcher;function openModal(r,s){return assertNonNullable(globalModalDispatcher),globalModalDispatcher.openModal(r,s)}const ModalContext=reactExports.createContext({close:r=>{assertNonNullable(globalModalDispatcher),globalModalDispatcher.close(r)}}),useModal=()=>reactExports.useContext(ModalContext),ModalRoot=()=>{const[r,s]=reactExports.useState(),a=reactExports.useRef(),i=reactExports.useCallback(o=>{var x;(x=a.current)==null||x.call(a,o),s(void 0)},[]);return reactExports.useEffect(()=>{const o={close:i,openModal(x,y){const _=new Promise(E=>a.current=E);return s(E=>({component:x,initialProps:y})),_}};return globalModalDispatcher=o,()=>{globalModalDispatcher===o&&(globalModalDispatcher=void 0)}},[i]),r?jsxRuntimeExports.jsx(r.component,{isVisible:!0,onClose:i,...r.initialProps}):null},SvgAddTagicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("circle",{cx:12,cy:12,r:11.2,stroke:"currentColor",strokeWidth:1.6}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6,d:"M12.008 6.669v10.4M16.989 12.018h-10.4"})),chipIconElement=jsxRuntimeExports.jsx("svg",{width:8,height:8,viewBox:"0 0 8 8",className:"LabelsChipList__chip__icon",children:jsxRuntimeExports.jsxs("g",{strokeWidth:1,stroke:"currentColor",children:[jsxRuntimeExports.jsx("line",{x1:0,y1:0,x2:8,y2:8}),jsxRuntimeExports.jsx("line",{x1:8,y1:0,x2:0,y2:8})]})}),getIsLightTextColorByBackGroundColor=memoize(r=>{const s=r.match(/#(..)(..)(..)/);if(s==null)return!1;const[,a,i,o]=s,x=parseInt(a,16),y=parseInt(i,16),_=parseInt(o,16);return(x*.3+y*.59+_*.11|0)<188});function LabelsChipListItem({disabled:r,label:s,theme:a,onDeleteLabelClick:i}){const o=a==="new"||getIsLightTextColorByBackGroundColor(s.color);return jsxRuntimeExports.jsxs("div",{className:"LabelsChipList__chipWrapper",children:[jsxRuntimeExports.jsxs("button",{type:"button",disabled:r,onClick:r?void 0:()=>i(s.id),title:s.name,className:cx$6("LabelsChipList__chip",{"LabelsChipList__chip--disabled":r,"LabelsChipList__chip--lightText":o,"LabelsChipList__chip--darkText":!o}),style:{backgroundColor:s.color},children:[jsxRuntimeExports.jsx("span",{className:"LabelsChipList__chip__activeBg"}),jsxRuntimeExports.jsx("span",{className:"LabelsChipList__chip__textContainer",children:jsxRuntimeExports.jsx("span",{className:"LabelsChipList__chip__text",children:s.name})}),a==="default"&&jsxRuntimeExports.jsx("span",{className:"LabelsChipList__chip__icon",children:chipIconElement})]}),jsxRuntimeExports.jsx("div",{"aria-hidden":!0,className:"LabelsChipList__chipBlockClickContainer",children:s.name})]})}function LabelsChipList({disabled:r=!1,addLabelRef:s,labels:a,theme:i="default",onDeleteLabelClick:o,onAddLabelClick:x}){const y=reactExports.useCallback(()=>{i==="new"&&x()},[i,x]);return jsxRuntimeExports.jsxs("ul",{className:cx$6("LabelsChipList",{LabelsChipList__themeNew:i==="new"}),onClick:y,children:[a.map(_=>jsxRuntimeExports.jsx("li",{className:"LabelsChipList__item",children:jsxRuntimeExports.jsx(LabelsChipListItem,{theme:i,disabled:r,label:_,onDeleteLabelClick:o})},_.id)),jsxRuntimeExports.jsxs("li",{className:"LabelsChipList__item",children:[i==="new"&&jsxRuntimeExports.jsx("span",{className:"LabelsChipList__addTagIcon",children:jsxRuntimeExports.jsx(SvgAddTagicon$1,{})}),i==="default"&&jsxRuntimeExports.jsx("button",{ref:s,type:"button",disabled:r,onClick:()=>x(),className:"LabelsChipList__addTag",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"LabelsChipList.buttons.addTag"})})]})]})}const LabelsChipList_memo=reactExports.memo(LabelsChipList),PremiumPlanPickerContext=reactExports.createContext(null);PremiumPlanPickerContext.displayName="PremiumPlanPickerContext";function PremiumPlanPicker({children:r,selectedValue:s,onSelect:a,"data-testid":i,isCollapsed:o=!1}){const x=React$6.Children.toArray(r),y=React$6.useMemo(()=>({activeId:s,onSelect:a}),[s,a]);return jsxRuntimeExports.jsx("div",{"data-testid":i,className:"PremiumPlanPicker",children:jsxRuntimeExports.jsx(PremiumPlanPickerContext.Provider,{value:y,children:React$6.Children.map(x,_=>React$6.cloneElement(_,{isCollapsed:o}))})})}function PremiumPlanPickerButtonRing({isActive:r}){return jsxRuntimeExports.jsx("span",{className:cx$6("PremiumPlanPickerButtonRing",{"PremiumPlanPickerButtonRing--active":r}),children:jsxRuntimeExports.jsx("span",{className:cx$6("PremiumPlanPickerButtonRing__circle",{"PremiumPlanPickerButtonRing__circle--active":r})})})}function PremiumPlanPickerButton({banner:r,isLoading:s,title:a,subtitle:i,id:o,"data-testid":x,isCollapsed:y}){const _=React$6.useContext(PremiumPlanPickerContext),E=_.activeId===o,R=r!=null&&E;return jsxRuntimeExports.jsxs(BareButton_,{"data-testid":x,disabled:s,onClick:E?void 0:()=>_.onSelect(o),className:cx$6("PremiumPlanPickerButton",{"PremiumPlanPickerButton--active":E,"PremiumPlanPickerButton--isCollapsed":y}),children:[jsxRuntimeExports.jsx(AnimatedInOut,{isVisible:R,render:({isEntering:S,isLeaving:j,props:T})=>jsxRuntimeExports.jsx("span",{...T,className:cx$6("PremiumPlanPickerButton__banner",{"PremiumPlanPickerButton__banner--preIn":!R,"PremiumPlanPickerButton__banner--in":S,"PremiumPlanPickerButton__banner--out":j}),children:r})}),jsxRuntimeExports.jsx("span",{className:"PremiumPlanPickerButton__radio",children:jsxRuntimeExports.jsx(PremiumPlanPickerButtonRing,{isActive:E})}),jsxRuntimeExports.jsx("span",{className:"PremiumPlanPickerButton__content",children:s?jsxRuntimeExports.jsx("span",{className:cx$6({"PremiumPlanPickerButton__loader--large":i!=null}),children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:cx$6("PremiumPlanPickerButton__title",{"PremiumPlanPickerButton__title--active":E}),children:a}),jsxRuntimeExports.jsx("span",{"data-testid":x===void 0?void 0:`${x} - subtitle`,className:cx$6("PremiumPlanPickerButton__subtitle",{"PremiumPlanPickerButton__subtitle--active":E}),children:i})]})})]})}const root$D="_root_1308u_1",selected$2="_selected_1308u_18",disabled$4="_disabled_1308u_22",radioButton$2="_radioButton_1308u_27",details$2="_details_1308u_32",title$e="_title_1308u_39",discount$1="_discount_1308u_47",price$1="_price_1308u_51",extra$1="_extra_1308u_52",spinner$6="_spinner_1308u_61",styles$1o={root:root$D,selected:selected$2,disabled:disabled$4,radioButton:radioButton$2,details:details$2,title:title$e,discount:discount$1,price:price$1,extra:extra$1,spinner:spinner$6};function PlanPickerButton({selected:r,value:s,type:a,discountValue:i,pricePerUser:o,pricePerAllMembers:x,memberCount:y,disabled:_,loading:E,adornment:R}){const S=noop$4,{formatMessage:j}=useI18n();return jsxRuntimeExports.jsxs("label",{className:cx$6(styles$1o.root,{[styles$1o.selected]:r,[styles$1o.disabled]:_}),children:[R,E?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:styles$1o.spinner}):jsxRuntimeExports.jsx(RadioButton,{className:styles$1o.radioButton,onChange:S,value:s,name:"plan-picker",selectedValue:r?s:void 0,theme:"modern"}),jsxRuntimeExports.jsxs("div",{className:styles$1o.details,children:[jsxRuntimeExports.jsxs("div",{className:styles$1o.title,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:a==="yearly"?"PlanPickerButton.billed-yearly":"PlanPickerButton.billed-monthly"}),i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" ",jsxRuntimeExports.jsxs("span",{className:styles$1o.discount,children:["(",jsxRuntimeExports.jsx(FormattedMessage,{id:"PlanPickerButton.save-discount",values:{discountAmount:i}}),")"]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$1o.price,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PlanPickerButton.price-per-user",values:{price:o}})}),jsxRuntimeExports.jsx("div",{className:styles$1o.extra,children:y?jsxRuntimeExports.jsx(FormattedMessage,{id:y===1?"PlanPickerButton.price-for-person":"PlanPickerButton.price-for-people",values:{peopleCount:y,price:j(a==="yearly"?"PlanPickerButton.price-year":"PlanPickerButton.price-month",{price:x})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.cancel-anytime"})})]})]})}const CardScrollViewForwarded=reactExports.forwardRef(function({animationEnterIndex:s,bottomStickyElement:a,children:i,className:o,containerClassName:x,isWidthless:y=!1,headerStickyElement:_,isUnscrollable:E,onEnterAnimationEnd:R,scrollElementRef:S},j){const[T,A]=reactExports.useState(!1),M=reactExports.useMemo(()=>debounceRaf(()=>{A(!0)}),[]);reactExports.useImperativeHandle(j,()=>({blip(){M()}}),[M]),reactExports.useEffect(()=>M.cancel,[M]);const P=s!==void 0,L=P?{"--CardScrollView-index":s}:void 0;function D(N){N.target===N.currentTarget&&R!=null&&R()}function O(N){N.target===N.currentTarget&&A(!1)}const B=isCssScrollBarSupported();return jsxRuntimeExports.jsxs("article",{onTransitionEnd:T?O:void 0,onAnimationEnd:P&&R!=null?D:void 0,className:cx$6("CardScrollView",o,{"CardScrollView--hasWidth":!y,"CardScrollView--blip":T,"CardScrollView--animatedIn":P}),style:L,children:[_,jsxRuntimeExports.jsx("div",{ref:S,className:cx$6("CardScrollView__scrollbarContainer",x,{"CardScrollView__scrollbarContainer--custom":B,"CardScrollView__scrollbarContainer--noCustom":!B,"CardScrollView__scrollbarContainer--noScroll":E}),children:i}),a]})}),CardScrollView=reactExports.memo(CardScrollViewForwarded),skull="💀",ogre="👹",goblin="👺",ghost="👻",alien="👽",robot="🤖",collision="💥",dizzy="💫",hole="🕳",bomb="💣",zzz="💤",handshake="🤝",selfie="🤳",leg="🦵",foot="🦶",ear="👂",nose="👃",brain="🧠",lungs="🫁",tooth="🦷",bone="🦴",eyes="👀",eye="👁",tongue="👅",mouth="👄",baby="👶",child="🧒",boy="👦",girl="👧",person="🧑",man="👨",woman="👩",student="🧑‍🎓",teacher="🧑‍🏫",judge="🧑‍⚖",farmer="🧑‍🌾",cook="🧑‍🍳",mechanic="🧑‍🔧",scientist="🧑‍🔬",technologist="🧑‍💻",singer="🧑‍🎤",artist="🧑‍🎨",pilot="🧑‍✈",astronaut="🧑‍🚀",firefighter="🧑‍🚒",detective="🕵",guard="💂",ninja="🥷",prince="🤴",princess="👸",superhero="🦸",supervillain="🦹",mage="🧙",fairy="🧚",vampire="🧛",merperson="🧜",merman="🧜‍♂",mermaid="🧜‍♀",elf="🧝",genie="🧞",zombie="🧟",troll="🧌",skier="⛷",snowboarder="🏂",kiss="💏",family="👪",footprints="👣",bald="🦲",monkey="🐒",gorilla="🦍",orangutan="🦧",dog="🐕",poodle="🐩",wolf="🐺",fox="🦊",raccoon="🦝",cat="🐈",lion="🦁",tiger="🐅",leopard="🐆",horse="🐎",unicorn="🦄",zebra="🦓",deer="🦌",bison="🦬",ox="🐂",cow="🐄",pig="🐖",boar="🐗",ram="🐏",ewe="🐑",goat="🐐",camel="🐪",llama="🦙",giraffe="🦒",elephant="🐘",mammoth="🦣",rhinoceros="🦏",hippopotamus="🦛",mouse="🐁",rat="🐀",hamster="🐹",rabbit="🐇",chipmunk="🐿",beaver="🦫",hedgehog="🦔",bat="🦇",bear="🐻",koala="🐨",panda="🐼",sloth="🦥",otter="🦦",skunk="🦨",kangaroo="🦘",badger="🦡",turkey="🦃",chicken="🐔",rooster="🐓",bird="🐦",penguin="🐧",dove="🕊",eagle="🦅",duck="🦆",swan="🦢",owl="🦉",dodo="🦤",feather="🪶",flamingo="🦩",peacock="🦚",parrot="🦜",frog="🐸",crocodile="🐊",turtle="🐢",lizard="🦎",snake="🐍",dragon="🐉",sauropod="🦕",whale="🐋",dolphin="🐬",seal="🦭",fish="🐟",blowfish="🐡",shark="🦈",octopus="🐙",coral="🪸",snail="🐌",butterfly="🦋",bug="🐛",ant="🐜",honeybee="🐝",beetle="🪲",cricket="🦗",cockroach="🪳",spider="🕷",scorpion="🦂",mosquito="🦟",fly="🪰",worm="🪱",microbe="🦠",bouquet="💐",lotus="🪷",rosette="🏵",rose="🌹",hibiscus="🌺",sunflower="🌻",blossom="🌼",tulip="🌷",seedling="🌱",cactus="🌵",herb="🌿",shamrock="☘",grapes="🍇",melon="🍈",watermelon="🍉",tangerine="🍊",lemon="🍋",banana="🍌",pineapple="🍍",mango="🥭",pear="🍐",peach="🍑",cherries="🍒",strawberry="🍓",blueberries="🫐",tomato="🍅",olive="🫒",coconut="🥥",avocado="🥑",eggplant="🍆",potato="🥔",carrot="🥕",cucumber="🥒",broccoli="🥦",garlic="🧄",onion="🧅",mushroom="🍄",peanuts="🥜",beans="🫘",chestnut="🌰",bread="🍞",croissant="🥐",flatbread="🫓",pretzel="🥨",bagel="🥯",pancakes="🥞",waffle="🧇",bacon="🥓",hamburger="🍔",pizza="🍕",sandwich="🥪",taco="🌮",burrito="🌯",tamale="🫔",falafel="🧆",egg="🥚",cooking="🍳",fondue="🫕",popcorn="🍿",butter="🧈",salt="🧂",spaghetti="🍝",oden="🍢",sushi="🍣",dango="🍡",dumpling="🥟",crab="🦀",lobster="🦞",shrimp="🦐",squid="🦑",oyster="🦪",doughnut="🍩",cookie="🍪",shortcake="🍰",cupcake="🧁",pie="🥧",candy="🍬",lollipop="🍭",custard="🍮",teapot="🫖",sake="🍶",mate="🧉",ice="🧊",chopsticks="🥢",spoon="🥄",jar="🫙",amphora="🏺",compass="🧭",mountain="⛰",volcano="🌋",camping="🏕",desert="🏜",stadium="🏟",brick="🧱",rock="🪨",wood="🪵",hut="🛖",houses="🏘",house="🏠",hospital="🏥",bank="🏦",hotel="🏨",school="🏫",factory="🏭",castle="🏰",wedding="💒",church="⛪",mosque="🕌",synagogue="🕍",kaaba="🕋",fountain="⛲",tent="⛺",foggy="🌁",cityscape="🏙",sunrise="🌅",sunset="🌇",locomotive="🚂",train="🚆",metro="🚇",station="🚉",tram="🚊",monorail="🚝",bus="🚌",trolleybus="🚎",minibus="🚐",ambulance="🚑",taxi="🚕",automobile="🚗",tractor="🚜",motorcycle="🏍",bicycle="🚲",skateboard="🛹",motorway="🛣",wheel="🛞",construction="🚧",anchor="⚓",sailboat="⛵",canoe="🛶",speedboat="🚤",ferry="⛴",ship="🚢",airplane="✈",parachute="🪂",seat="💺",helicopter="🚁",satellite="🛰",rocket="🚀",luggage="🧳",watch="⌚",stopwatch="⏱",thermometer="🌡",sun="☀",star="⭐",cloud="☁",tornado="🌪",fog="🌫",cyclone="🌀",rainbow="🌈",umbrella="☂",snowflake="❄",snowman="☃",comet="☄",fire="🔥",droplet="💧",fireworks="🎆",sparkler="🎇",firecracker="🧨",sparkles="✨",balloon="🎈",ribbon="🎀",ticket="🎫",trophy="🏆",baseball="⚾",softball="🥎",basketball="🏀",volleyball="🏐",tennis="🎾",bowling="🎳",lacrosse="🥍",badminton="🏸",skis="🎿",sled="🛷",bullseye="🎯",kite="🪁",hamsa="🪬",joystick="🕹",joker="🃏",thread="🧵",yarn="🧶",knot="🪢",glasses="👓",sunglasses="🕶",goggles="🥽",necktie="👔",jeans="👖",scarf="🧣",gloves="🧤",coat="🧥",socks="🧦",dress="👗",kimono="👘",sari="🥻",briefs="🩲",shorts="🩳",bikini="👙",purse="👛",handbag="👜",backpack="🎒",crown="👑",lipstick="💄",ring="💍",loudspeaker="📢",megaphone="📣",bell="🔔",microphone="🎤",headphone="🎧",radio="📻",saxophone="🎷",accordion="🪗",guitar="🎸",trumpet="🎺",violin="🎻",banjo="🪕",drum="🥁",telephone="☎",pager="📟",battery="🔋",laptop="💻",printer="🖨",keyboard="⌨",trackball="🖲",dvd="📀",abacus="🧮",television="📺",camera="📷",videocassette="📼",candle="🕯",flashlight="🔦",books="📚",notebook="📓",ledger="📒",scroll="📜",newspaper="📰",bookmark="🔖",label$1="🏷",coin="🪙",receipt="🧾",envelope="✉",postbox="📮",pencil="✏",pen="🖊",paintbrush="🖌",crayon="🖍",memo$1="📝",briefcase="💼",calendar="📅",clipboard="📋",pushpin="📌",paperclip="📎",scissors="✂",wastebasket="🗑",locked="🔒",unlocked="🔓",key="🔑",hammer="🔨",axe="🪓",pick="⛏",dagger="🗡",boomerang="🪃",shield="🛡",wrench="🔧",screwdriver="🪛",gear="⚙",clamp="🗜",link$1="🔗",chains="⛓",hook="🪝",toolbox="🧰",magnet="🧲",ladder="🪜",alembic="⚗",dna="🧬",microscope="🔬",telescope="🔭",syringe="💉",pill="💊",crutch="🩼",stethoscope="🩺",door="🚪",elevator="🛗",mirror="🪞",window$1="🪟",bed="🛏",chair="🪑",toilet="🚽",plunger="🪠",shower="🚿",bathtub="🛁",razor="🪒",broom="🧹",basket="🧺",bucket="🪣",soap="🧼",bubbles="🫧",toothbrush="🪥",sponge="🧽",cigarette="🚬",coffin="⚰",headstone="🪦",moai="🗿",placard="🪧",restroom="🚻",customs="🛃",warning="⚠",prohibited="🚫",radioactive="☢",biohazard="☣",om="🕉",menorah="🕎",Aries="♈",Taurus="♉",Gemini="♊",Cancer="♋",Leo="♌",Virgo="♍",Libra="♎",Scorpio="♏",Sagittarius="♐",Capricorn="♑",Aquarius="♒",Pisces="♓",Ophiuchus="⛎",cinema="🎦",multiply="✖",plus="➕",minus="➖",divide="➗",infinity="♾",sparkle="❇",copyright="©",registered="®",information="ℹ",emojiList={"grinning face":"😀","grinning face with big eyes":"😃","grinning face with smiling eyes":"😄","beaming face with smiling eyes":"😁","grinning squinting face":"😆","grinning face with sweat":"😅","rolling on the floor laughing":"🤣","face with tears of joy":"😂","slightly smiling face":"🙂","upside-down face":"🙃","melting face":"🫠","winking face":"😉","smiling face with smiling eyes":"😊","smiling face with halo":"😇","smiling face with hearts":"🥰","smiling face with heart-eyes":"😍","star-struck":"🤩","face blowing a kiss":"😘","kissing face":"😗","smiling face":"☺","kissing face with closed eyes":"😚","kissing face with smiling eyes":"😙","smiling face with tear":"🥲","face savoring food":"😋","face with tongue":"😛","winking face with tongue":"😜","zany face":"🤪","squinting face with tongue":"😝","money-mouth face":"🤑","smiling face with open hands":"🤗","face with hand over mouth":"🤭","face with open eyes and hand over mouth":"🫢","face with peeking eye":"🫣","shushing face":"🤫","thinking face":"🤔","saluting face":"🫡","zipper-mouth face":"🤐","face with raised eyebrow":"🤨","neutral face":"😐","expressionless face":"😑","face without mouth":"😶","dotted line face":"🫥","face in clouds":"😶‍🌫","smirking face":"😏","unamused face":"😒","face with rolling eyes":"🙄","grimacing face":"😬","face exhaling":"😮‍💨","lying face":"🤥","relieved face":"😌","pensive face":"😔","sleepy face":"😪","drooling face":"🤤","sleeping face":"😴","face with medical mask":"😷","face with thermometer":"🤒","face with head-bandage":"🤕","nauseated face":"🤢","face vomiting":"🤮","sneezing face":"🤧","hot face":"🥵","cold face":"🥶","woozy face":"🥴","face with crossed-out eyes":"😵","face with spiral eyes":"😵‍💫","exploding head":"🤯","cowboy hat face":"🤠","partying face":"🥳","disguised face":"🥸","smiling face with sunglasses":"😎","nerd face":"🤓","face with monocle":"🧐","confused face":"😕","face with diagonal mouth":"🫤","worried face":"😟","slightly frowning face":"🙁","frowning face":"☹","face with open mouth":"😮","hushed face":"😯","astonished face":"😲","flushed face":"😳","pleading face":"🥺","face holding back tears":"🥹","frowning face with open mouth":"😦","anguished face":"😧","fearful face":"😨","anxious face with sweat":"😰","sad but relieved face":"😥","crying face":"😢","loudly crying face":"😭","face screaming in fear":"😱","confounded face":"😖","persevering face":"😣","disappointed face":"😞","downcast face with sweat":"😓","weary face":"😩","tired face":"😫","yawning face":"🥱","face with steam from nose":"😤","pouting face":"😡","angry face":"😠","face with symbols on mouth":"🤬","smiling face with horns":"😈","angry face with horns":"👿",skull,"skull and crossbones":"☠","pile of poo":"💩","clown face":"🤡",ogre,goblin,ghost,alien,"alien monster":"👾",robot,"grinning cat":"😺","grinning cat with smiling eyes":"😸","cat with tears of joy":"😹","smiling cat with heart-eyes":"😻","cat with wry smile":"😼","kissing cat":"😽","weary cat":"🙀","crying cat":"😿","pouting cat":"😾","see-no-evil monkey":"🙈","hear-no-evil monkey":"🙉","speak-no-evil monkey":"🙊","kiss mark":"💋","love letter":"💌","heart with arrow":"💘","heart with ribbon":"💝","sparkling heart":"💖","growing heart":"💗","beating heart":"💓","revolving hearts":"💞","two hearts":"💕","heart decoration":"💟","heart exclamation":"❣","broken heart":"💔","heart on fire":"❤‍🔥","mending heart":"❤‍🩹","red heart":"❤","orange heart":"🧡","yellow heart":"💛","green heart":"💚","blue heart":"💙","purple heart":"💜","brown heart":"🤎","black heart":"🖤","white heart":"🤍","hundred points":"💯","anger symbol":"💢",collision,dizzy,"sweat droplets":"💦","dashing away":"💨",hole,bomb,"speech balloon":"💬","eye in speech bubble":"👁‍🗨","left speech bubble":"🗨","right anger bubble":"🗯","thought balloon":"💭",zzz,"waving hand":"👋","raised back of hand":"🤚","hand with fingers splayed":"🖐","raised hand":"✋","vulcan salute":"🖖","rightwards hand":"🫱","leftwards hand":"🫲","palm down hand":"🫳","palm up hand":"🫴","OK hand":"👌","pinched fingers":"🤌","pinching hand":"🤏","victory hand":"✌","crossed fingers":"🤞","hand with index finger and thumb crossed":"🫰","love-you gesture":"🤟","sign of the horns":"🤘","call me hand":"🤙","backhand index pointing left":"👈","backhand index pointing right":"👉","backhand index pointing up":"👆","middle finger":"🖕","backhand index pointing down":"👇","index pointing up":"☝","index pointing at the viewer":"🫵","thumbs up":"👍","thumbs down":"👎","raised fist":"✊","oncoming fist":"👊","left-facing fist":"🤛","right-facing fist":"🤜","clapping hands":"👏","raising hands":"🙌","heart hands":"🫶","open hands":"👐","palms up together":"🤲",handshake,"folded hands":"🙏","writing hand":"✍","nail polish":"💅",selfie,"flexed biceps":"💪","mechanical arm":"🦾","mechanical leg":"🦿",leg,foot,ear,"ear with hearing aid":"🦻",nose,brain,"anatomical heart":"🫀",lungs,tooth,bone,eyes,eye,tongue,mouth,"biting lip":"🫦",baby,child,boy,girl,person,"person: blond hair":"👱",man,"person: beard":"🧔","man: beard":"🧔‍♂","woman: beard":"🧔‍♀","man: red hair":"👨‍🦰","man: curly hair":"👨‍🦱","man: white hair":"👨‍🦳","man: bald":"👨‍🦲",woman,"woman: red hair":"👩‍🦰","person: red hair":"🧑‍🦰","woman: curly hair":"👩‍🦱","person: curly hair":"🧑‍🦱","woman: white hair":"👩‍🦳","person: white hair":"🧑‍🦳","woman: bald":"👩‍🦲","person: bald":"🧑‍🦲","woman: blond hair":"👱‍♀","man: blond hair":"👱‍♂","older person":"🧓","old man":"👴","old woman":"👵","person frowning":"🙍","man frowning":"🙍‍♂","woman frowning":"🙍‍♀","person pouting":"🙎","man pouting":"🙎‍♂","woman pouting":"🙎‍♀","person gesturing NO":"🙅","man gesturing NO":"🙅‍♂","woman gesturing NO":"🙅‍♀","person gesturing OK":"🙆","man gesturing OK":"🙆‍♂","woman gesturing OK":"🙆‍♀","person tipping hand":"💁","man tipping hand":"💁‍♂","woman tipping hand":"💁‍♀","person raising hand":"🙋","man raising hand":"🙋‍♂","woman raising hand":"🙋‍♀","deaf person":"🧏","deaf man":"🧏‍♂","deaf woman":"🧏‍♀","person bowing":"🙇","man bowing":"🙇‍♂","woman bowing":"🙇‍♀","person facepalming":"🤦","man facepalming":"🤦‍♂","woman facepalming":"🤦‍♀","person shrugging":"🤷","man shrugging":"🤷‍♂","woman shrugging":"🤷‍♀","health worker":"🧑‍⚕","man health worker":"👨‍⚕","woman health worker":"👩‍⚕",student,"man student":"👨‍🎓","woman student":"👩‍🎓",teacher,"man teacher":"👨‍🏫","woman teacher":"👩‍🏫",judge,"man judge":"👨‍⚖","woman judge":"👩‍⚖",farmer,"man farmer":"👨‍🌾","woman farmer":"👩‍🌾",cook,"man cook":"👨‍🍳","woman cook":"👩‍🍳",mechanic,"man mechanic":"👨‍🔧","woman mechanic":"👩‍🔧","factory worker":"🧑‍🏭","man factory worker":"👨‍🏭","woman factory worker":"👩‍🏭","office worker":"🧑‍💼","man office worker":"👨‍💼","woman office worker":"👩‍💼",scientist,"man scientist":"👨‍🔬","woman scientist":"👩‍🔬",technologist,"man technologist":"👨‍💻","woman technologist":"👩‍💻",singer,"man singer":"👨‍🎤","woman singer":"👩‍🎤",artist,"man artist":"👨‍🎨","woman artist":"👩‍🎨",pilot,"man pilot":"👨‍✈","woman pilot":"👩‍✈",astronaut,"man astronaut":"👨‍🚀","woman astronaut":"👩‍🚀",firefighter,"man firefighter":"👨‍🚒","woman firefighter":"👩‍🚒","police officer":"👮","man police officer":"👮‍♂","woman police officer":"👮‍♀",detective,"man detective":"🕵‍♂","woman detective":"🕵‍♀",guard,"man guard":"💂‍♂","woman guard":"💂‍♀",ninja,"construction worker":"👷","man construction worker":"👷‍♂","woman construction worker":"👷‍♀","person with crown":"🫅",prince,princess,"person wearing turban":"👳","man wearing turban":"👳‍♂","woman wearing turban":"👳‍♀","person with skullcap":"👲","woman with headscarf":"🧕","person in tuxedo":"🤵","man in tuxedo":"🤵‍♂","woman in tuxedo":"🤵‍♀","person with veil":"👰","man with veil":"👰‍♂","woman with veil":"👰‍♀","pregnant woman":"🤰","pregnant man":"🫃","pregnant person":"🫄","breast-feeding":"🤱","woman feeding baby":"👩‍🍼","man feeding baby":"👨‍🍼","person feeding baby":"🧑‍🍼","baby angel":"👼","Santa Claus":"🎅","Mrs. Claus":"🤶","mx claus":"🧑‍🎄",superhero,"man superhero":"🦸‍♂","woman superhero":"🦸‍♀",supervillain,"man supervillain":"🦹‍♂","woman supervillain":"🦹‍♀",mage,"man mage":"🧙‍♂","woman mage":"🧙‍♀",fairy,"man fairy":"🧚‍♂","woman fairy":"🧚‍♀",vampire,"man vampire":"🧛‍♂","woman vampire":"🧛‍♀",merperson,merman,mermaid,elf,"man elf":"🧝‍♂","woman elf":"🧝‍♀",genie,"man genie":"🧞‍♂","woman genie":"🧞‍♀",zombie,"man zombie":"🧟‍♂","woman zombie":"🧟‍♀",troll,"person getting massage":"💆","man getting massage":"💆‍♂","woman getting massage":"💆‍♀","person getting haircut":"💇","man getting haircut":"💇‍♂","woman getting haircut":"💇‍♀","person walking":"🚶","man walking":"🚶‍♂","woman walking":"🚶‍♀","person standing":"🧍","man standing":"🧍‍♂","woman standing":"🧍‍♀","person kneeling":"🧎","man kneeling":"🧎‍♂","woman kneeling":"🧎‍♀","person with white cane":"🧑‍🦯","man with white cane":"👨‍🦯","woman with white cane":"👩‍🦯","person in motorized wheelchair":"🧑‍🦼","man in motorized wheelchair":"👨‍🦼","woman in motorized wheelchair":"👩‍🦼","person in manual wheelchair":"🧑‍🦽","man in manual wheelchair":"👨‍🦽","woman in manual wheelchair":"👩‍🦽","person running":"🏃","man running":"🏃‍♂","woman running":"🏃‍♀","woman dancing":"💃","man dancing":"🕺","person in suit levitating":"🕴","people with bunny ears":"👯","men with bunny ears":"👯‍♂","women with bunny ears":"👯‍♀","person in steamy room":"🧖","man in steamy room":"🧖‍♂","woman in steamy room":"🧖‍♀","person climbing":"🧗","man climbing":"🧗‍♂","woman climbing":"🧗‍♀","person fencing":"🤺","horse racing":"🏇",skier,snowboarder,"person golfing":"🏌","man golfing":"🏌‍♂","woman golfing":"🏌‍♀","person surfing":"🏄","man surfing":"🏄‍♂","woman surfing":"🏄‍♀","person rowing boat":"🚣","man rowing boat":"🚣‍♂","woman rowing boat":"🚣‍♀","person swimming":"🏊","man swimming":"🏊‍♂","woman swimming":"🏊‍♀","person bouncing ball":"⛹","man bouncing ball":"⛹‍♂","woman bouncing ball":"⛹‍♀","person lifting weights":"🏋","man lifting weights":"🏋‍♂","woman lifting weights":"🏋‍♀","person biking":"🚴","man biking":"🚴‍♂","woman biking":"🚴‍♀","person mountain biking":"🚵","man mountain biking":"🚵‍♂","woman mountain biking":"🚵‍♀","person cartwheeling":"🤸","man cartwheeling":"🤸‍♂","woman cartwheeling":"🤸‍♀","people wrestling":"🤼","men wrestling":"🤼‍♂","women wrestling":"🤼‍♀","person playing water polo":"🤽","man playing water polo":"🤽‍♂","woman playing water polo":"🤽‍♀","person playing handball":"🤾","man playing handball":"🤾‍♂","woman playing handball":"🤾‍♀","person juggling":"🤹","man juggling":"🤹‍♂","woman juggling":"🤹‍♀","person in lotus position":"🧘","man in lotus position":"🧘‍♂","woman in lotus position":"🧘‍♀","person taking bath":"🛀","person in bed":"🛌","people holding hands":"🧑‍🤝‍🧑","women holding hands":"👭","woman and man holding hands":"👫","men holding hands":"👬",kiss,"kiss: woman, man":"👩‍❤‍💋‍👨","kiss: man, man":"👨‍❤‍💋‍👨","kiss: woman, woman":"👩‍❤‍💋‍👩","couple with heart":"💑","couple with heart: woman, man":"👩‍❤‍👨","couple with heart: man, man":"👨‍❤‍👨","couple with heart: woman, woman":"👩‍❤‍👩",family,"family: man, woman, boy":"👨‍👩‍👦","family: man, woman, girl":"👨‍👩‍👧","family: man, woman, girl, boy":"👨‍👩‍👧‍👦","family: man, woman, boy, boy":"👨‍👩‍👦‍👦","family: man, woman, girl, girl":"👨‍👩‍👧‍👧","family: man, man, boy":"👨‍👨‍👦","family: man, man, girl":"👨‍👨‍👧","family: man, man, girl, boy":"👨‍👨‍👧‍👦","family: man, man, boy, boy":"👨‍👨‍👦‍👦","family: man, man, girl, girl":"👨‍👨‍👧‍👧","family: woman, woman, boy":"👩‍👩‍👦","family: woman, woman, girl":"👩‍👩‍👧","family: woman, woman, girl, boy":"👩‍👩‍👧‍👦","family: woman, woman, boy, boy":"👩‍👩‍👦‍👦","family: woman, woman, girl, girl":"👩‍👩‍👧‍👧","family: man, boy":"👨‍👦","family: man, boy, boy":"👨‍👦‍👦","family: man, girl":"👨‍👧","family: man, girl, boy":"👨‍👧‍👦","family: man, girl, girl":"👨‍👧‍👧","family: woman, boy":"👩‍👦","family: woman, boy, boy":"👩‍👦‍👦","family: woman, girl":"👩‍👧","family: woman, girl, boy":"👩‍👧‍👦","family: woman, girl, girl":"👩‍👧‍👧","speaking head":"🗣","bust in silhouette":"👤","busts in silhouette":"👥","people hugging":"🫂",footprints,"red hair":"🦰","curly hair":"🦱","white hair":"🦳",bald,"monkey face":"🐵",monkey,gorilla,orangutan,"dog face":"🐶",dog,"guide dog":"🦮","service dog":"🐕‍🦺",poodle,wolf,fox,raccoon,"cat face":"🐱",cat,"black cat":"🐈‍⬛",lion,"tiger face":"🐯",tiger,leopard,"horse face":"🐴",horse,unicorn,zebra,deer,bison,"cow face":"🐮",ox,"water buffalo":"🐃",cow,"pig face":"🐷",pig,boar,"pig nose":"🐽",ram,ewe,goat,camel,"two-hump camel":"🐫",llama,giraffe,elephant,mammoth,rhinoceros,hippopotamus,"mouse face":"🐭",mouse,rat,hamster,"rabbit face":"🐰",rabbit,chipmunk,beaver,hedgehog,bat,bear,"polar bear":"🐻‍❄",koala,panda,sloth,otter,skunk,kangaroo,badger,"paw prints":"🐾",turkey,chicken,rooster,"hatching chick":"🐣","baby chick":"🐤","front-facing baby chick":"🐥",bird,penguin,dove,eagle,duck,swan,owl,dodo,feather,flamingo,peacock,parrot,frog,crocodile,turtle,lizard,snake,"dragon face":"🐲",dragon,sauropod,"T-Rex":"🦖","spouting whale":"🐳",whale,dolphin,seal,fish,"tropical fish":"🐠",blowfish,shark,octopus,"spiral shell":"🐚",coral,snail,butterfly,bug,ant,honeybee,beetle,"lady beetle":"🐞",cricket,cockroach,spider,"spider web":"🕸",scorpion,mosquito,fly,worm,microbe,bouquet,"cherry blossom":"🌸","white flower":"💮",lotus,rosette,rose,"wilted flower":"🥀",hibiscus,sunflower,blossom,tulip,seedling,"potted plant":"🪴","evergreen tree":"🌲","deciduous tree":"🌳","palm tree":"🌴",cactus,"sheaf of rice":"🌾",herb,shamrock,"four leaf clover":"🍀","maple leaf":"🍁","fallen leaf":"🍂","leaf fluttering in wind":"🍃","empty nest":"🪹","nest with eggs":"🪺",grapes,melon,watermelon,tangerine,lemon,banana,pineapple,mango,"red apple":"🍎","green apple":"🍏",pear,peach,cherries,strawberry,blueberries,"kiwi fruit":"🥝",tomato,olive,coconut,avocado,eggplant,potato,carrot,"ear of corn":"🌽","hot pepper":"🌶","bell pepper":"🫑",cucumber,"leafy green":"🥬",broccoli,garlic,onion,mushroom,peanuts,beans,chestnut,bread,croissant,"baguette bread":"🥖",flatbread,pretzel,bagel,pancakes,waffle,"cheese wedge":"🧀","meat on bone":"🍖","poultry leg":"🍗","cut of meat":"🥩",bacon,hamburger,"french fries":"🍟",pizza,"hot dog":"🌭",sandwich,taco,burrito,tamale,"stuffed flatbread":"🥙",falafel,egg,cooking,"shallow pan of food":"🥘","pot of food":"🍲",fondue,"bowl with spoon":"🥣","green salad":"🥗",popcorn,butter,salt,"canned food":"🥫","bento box":"🍱","rice cracker":"🍘","rice ball":"🍙","cooked rice":"🍚","curry rice":"🍛","steaming bowl":"🍜",spaghetti,"roasted sweet potato":"🍠",oden,sushi,"fried shrimp":"🍤","fish cake with swirl":"🍥","moon cake":"🥮",dango,dumpling,"fortune cookie":"🥠","takeout box":"🥡",crab,lobster,shrimp,squid,oyster,"soft ice cream":"🍦","shaved ice":"🍧","ice cream":"🍨",doughnut,cookie,"birthday cake":"🎂",shortcake,cupcake,pie,"chocolate bar":"🍫",candy,lollipop,custard,"honey pot":"🍯","baby bottle":"🍼","glass of milk":"🥛","hot beverage":"☕",teapot,"teacup without handle":"🍵",sake,"bottle with popping cork":"🍾","wine glass":"🍷","cocktail glass":"🍸","tropical drink":"🍹","beer mug":"🍺","clinking beer mugs":"🍻","clinking glasses":"🥂","tumbler glass":"🥃","pouring liquid":"🫗","cup with straw":"🥤","bubble tea":"🧋","beverage box":"🧃",mate,ice,chopsticks,"fork and knife with plate":"🍽","fork and knife":"🍴",spoon,"kitchen knife":"🔪",jar,amphora,"globe showing Europe-Africa":"🌍","globe showing Americas":"🌎","globe showing Asia-Australia":"🌏","globe with meridians":"🌐","world map":"🗺","map of Japan":"🗾",compass,"snow-capped mountain":"🏔",mountain,volcano,"mount fuji":"🗻",camping,"beach with umbrella":"🏖",desert,"desert island":"🏝","national park":"🏞",stadium,"classical building":"🏛","building construction":"🏗",brick,rock,wood,hut,houses,"derelict house":"🏚",house,"house with garden":"🏡","office building":"🏢","Japanese post office":"🏣","post office":"🏤",hospital,bank,hotel,"love hotel":"🏩","convenience store":"🏪",school,"department store":"🏬",factory,"Japanese castle":"🏯",castle,wedding,"Tokyo tower":"🗼","Statue of Liberty":"🗽",church,mosque,"hindu temple":"🛕",synagogue,"shinto shrine":"⛩",kaaba,fountain,tent,foggy,"night with stars":"🌃",cityscape,"sunrise over mountains":"🌄",sunrise,"cityscape at dusk":"🌆",sunset,"bridge at night":"🌉","hot springs":"♨","carousel horse":"🎠","playground slide":"🛝","ferris wheel":"🎡","roller coaster":"🎢","barber pole":"💈","circus tent":"🎪",locomotive,"railway car":"🚃","high-speed train":"🚄","bullet train":"🚅",train,metro,"light rail":"🚈",station,tram,monorail,"mountain railway":"🚞","tram car":"🚋",bus,"oncoming bus":"🚍",trolleybus,minibus,ambulance,"fire engine":"🚒","police car":"🚓","oncoming police car":"🚔",taxi,"oncoming taxi":"🚖",automobile,"oncoming automobile":"🚘","sport utility vehicle":"🚙","pickup truck":"🛻","delivery truck":"🚚","articulated lorry":"🚛",tractor,"racing car":"🏎",motorcycle,"motor scooter":"🛵","manual wheelchair":"🦽","motorized wheelchair":"🦼","auto rickshaw":"🛺",bicycle,"kick scooter":"🛴",skateboard,"roller skate":"🛼","bus stop":"🚏",motorway,"railway track":"🛤","oil drum":"🛢","fuel pump":"⛽",wheel,"police car light":"🚨","horizontal traffic light":"🚥","vertical traffic light":"🚦","stop sign":"🛑",construction,anchor,"ring buoy":"🛟",sailboat,canoe,speedboat,"passenger ship":"🛳",ferry,"motor boat":"🛥",ship,airplane,"small airplane":"🛩","airplane departure":"🛫","airplane arrival":"🛬",parachute,seat,helicopter,"suspension railway":"🚟","mountain cableway":"🚠","aerial tramway":"🚡",satellite,rocket,"flying saucer":"🛸","bellhop bell":"🛎",luggage,"hourglass done":"⌛","hourglass not done":"⏳",watch,"alarm clock":"⏰",stopwatch,"timer clock":"⏲","mantelpiece clock":"🕰","twelve o’clock":"🕛","twelve-thirty":"🕧","one o’clock":"🕐","one-thirty":"🕜","two o’clock":"🕑","two-thirty":"🕝","three o’clock":"🕒","three-thirty":"🕞","four o’clock":"🕓","four-thirty":"🕟","five o’clock":"🕔","five-thirty":"🕠","six o’clock":"🕕","six-thirty":"🕡","seven o’clock":"🕖","seven-thirty":"🕢","eight o’clock":"🕗","eight-thirty":"🕣","nine o’clock":"🕘","nine-thirty":"🕤","ten o’clock":"🕙","ten-thirty":"🕥","eleven o’clock":"🕚","eleven-thirty":"🕦","new moon":"🌑","waxing crescent moon":"🌒","first quarter moon":"🌓","waxing gibbous moon":"🌔","full moon":"🌕","waning gibbous moon":"🌖","last quarter moon":"🌗","waning crescent moon":"🌘","crescent moon":"🌙","new moon face":"🌚","first quarter moon face":"🌛","last quarter moon face":"🌜",thermometer,sun,"full moon face":"🌝","sun with face":"🌞","ringed planet":"🪐",star,"glowing star":"🌟","shooting star":"🌠","milky way":"🌌",cloud,"sun behind cloud":"⛅","cloud with lightning and rain":"⛈","sun behind small cloud":"🌤","sun behind large cloud":"🌥","sun behind rain cloud":"🌦","cloud with rain":"🌧","cloud with snow":"🌨","cloud with lightning":"🌩",tornado,fog,"wind face":"🌬",cyclone,rainbow,"closed umbrella":"🌂",umbrella,"umbrella with rain drops":"☔","umbrella on ground":"⛱","high voltage":"⚡",snowflake,snowman,"snowman without snow":"⛄",comet,fire,droplet,"water wave":"🌊","jack-o-lantern":"🎃","Christmas tree":"🎄",fireworks,sparkler,firecracker,sparkles,balloon,"party popper":"🎉","confetti ball":"🎊","tanabata tree":"🎋","pine decoration":"🎍","Japanese dolls":"🎎","carp streamer":"🎏","wind chime":"🎐","moon viewing ceremony":"🎑","red envelope":"🧧",ribbon,"wrapped gift":"🎁","reminder ribbon":"🎗","admission tickets":"🎟",ticket,"military medal":"🎖",trophy,"sports medal":"🏅","1st place medal":"🥇","2nd place medal":"🥈","3rd place medal":"🥉","soccer ball":"⚽",baseball,softball,basketball,volleyball,"american football":"🏈","rugby football":"🏉",tennis,"flying disc":"🥏",bowling,"cricket game":"🏏","field hockey":"🏑","ice hockey":"🏒",lacrosse,"ping pong":"🏓",badminton,"boxing glove":"🥊","martial arts uniform":"🥋","goal net":"🥅","flag in hole":"⛳","ice skate":"⛸","fishing pole":"🎣","diving mask":"🤿","running shirt":"🎽",skis,sled,"curling stone":"🥌",bullseye,"yo-yo":"🪀",kite,"pool 8 ball":"🎱","crystal ball":"🔮","magic wand":"🪄","nazar amulet":"🧿",hamsa,"video game":"🎮",joystick,"slot machine":"🎰","game die":"🎲","puzzle piece":"🧩","teddy bear":"🧸",piñata:"🪅","mirror ball":"🪩","nesting dolls":"🪆","spade suit":"♠","heart suit":"♥","diamond suit":"♦","club suit":"♣","chess pawn":"♟",joker,"mahjong red dragon":"🀄","flower playing cards":"🎴","performing arts":"🎭","framed picture":"🖼","artist palette":"🎨",thread,"sewing needle":"🪡",yarn,knot,glasses,sunglasses,goggles,"lab coat":"🥼","safety vest":"🦺",necktie,"t-shirt":"👕",jeans,scarf,gloves,coat,socks,dress,kimono,sari,"one-piece swimsuit":"🩱",briefs,shorts,bikini,"woman’s clothes":"👚",purse,handbag,"clutch bag":"👝","shopping bags":"🛍",backpack,"thong sandal":"🩴","man’s shoe":"👞","running shoe":"👟","hiking boot":"🥾","flat shoe":"🥿","high-heeled shoe":"👠","woman’s sandal":"👡","ballet shoes":"🩰","woman’s boot":"👢",crown,"woman’s hat":"👒","top hat":"🎩","graduation cap":"🎓","billed cap":"🧢","military helmet":"🪖","rescue worker’s helmet":"⛑","prayer beads":"📿",lipstick,ring,"gem stone":"💎","muted speaker":"🔇","speaker low volume":"🔈","speaker medium volume":"🔉","speaker high volume":"🔊",loudspeaker,megaphone,"postal horn":"📯",bell,"bell with slash":"🔕","musical score":"🎼","musical note":"🎵","musical notes":"🎶","studio microphone":"🎙","level slider":"🎚","control knobs":"🎛",microphone,headphone,radio,saxophone,accordion,guitar,"musical keyboard":"🎹",trumpet,violin,banjo,drum,"long drum":"🪘","mobile phone":"📱","mobile phone with arrow":"📲",telephone,"telephone receiver":"📞",pager,"fax machine":"📠",battery,"low battery":"🪫","electric plug":"🔌",laptop,"desktop computer":"🖥",printer,keyboard,"computer mouse":"🖱",trackball,"computer disk":"💽","floppy disk":"💾","optical disk":"💿",dvd,abacus,"movie camera":"🎥","film frames":"🎞","film projector":"📽","clapper board":"🎬",television,camera,"camera with flash":"📸","video camera":"📹",videocassette,"magnifying glass tilted left":"🔍","magnifying glass tilted right":"🔎",candle,"light bulb":"💡",flashlight,"red paper lantern":"🏮","diya lamp":"🪔","notebook with decorative cover":"📔","closed book":"📕","open book":"📖","green book":"📗","blue book":"📘","orange book":"📙",books,notebook,ledger,"page with curl":"📃",scroll,"page facing up":"📄",newspaper,"rolled-up newspaper":"🗞","bookmark tabs":"📑",bookmark,label:label$1,"money bag":"💰",coin,"yen banknote":"💴","dollar banknote":"💵","euro banknote":"💶","pound banknote":"💷","money with wings":"💸","credit card":"💳",receipt,"chart increasing with yen":"💹",envelope,"e-mail":"📧","incoming envelope":"📨","envelope with arrow":"📩","outbox tray":"📤","inbox tray":"📥",package:"📦","closed mailbox with raised flag":"📫","closed mailbox with lowered flag":"📪","open mailbox with raised flag":"📬","open mailbox with lowered flag":"📭",postbox,"ballot box with ballot":"🗳",pencil,"black nib":"✒","fountain pen":"🖋",pen,paintbrush,crayon,memo:memo$1,briefcase,"file folder":"📁","open file folder":"📂","card index dividers":"🗂",calendar,"tear-off calendar":"📆","spiral notepad":"🗒","spiral calendar":"🗓","card index":"📇","chart increasing":"📈","chart decreasing":"📉","bar chart":"📊",clipboard,pushpin,"round pushpin":"📍",paperclip,"linked paperclips":"🖇","straight ruler":"📏","triangular ruler":"📐",scissors,"card file box":"🗃","file cabinet":"🗄",wastebasket,locked,unlocked,"locked with pen":"🔏","locked with key":"🔐",key,"old key":"🗝",hammer,axe,pick,"hammer and pick":"⚒","hammer and wrench":"🛠",dagger,"crossed swords":"⚔","water pistol":"🔫",boomerang,"bow and arrow":"🏹",shield,"carpentry saw":"🪚",wrench,screwdriver,"nut and bolt":"🔩",gear,clamp,"balance scale":"⚖","white cane":"🦯",link:link$1,chains,hook,toolbox,magnet,ladder,alembic,"test tube":"🧪","petri dish":"🧫",dna,microscope,telescope,"satellite antenna":"📡",syringe,"drop of blood":"🩸",pill,"adhesive bandage":"🩹",crutch,stethoscope,"x-ray":"🩻",door,elevator,mirror,window:window$1,bed,"couch and lamp":"🛋",chair,toilet,plunger,shower,bathtub,"mouse trap":"🪤",razor,"lotion bottle":"🧴","safety pin":"🧷",broom,basket,"roll of paper":"🧻",bucket,soap,bubbles,toothbrush,sponge,"fire extinguisher":"🧯","shopping cart":"🛒",cigarette,coffin,headstone,"funeral urn":"⚱",moai,placard,"identification card":"🪪","ATM sign":"🏧","litter in bin sign":"🚮","potable water":"🚰","wheelchair symbol":"♿","men’s room":"🚹","women’s room":"🚺",restroom,"baby symbol":"🚼","water closet":"🚾","passport control":"🛂",customs,"baggage claim":"🛄","left luggage":"🛅",warning,"children crossing":"🚸","no entry":"⛔",prohibited,"no bicycles":"🚳","no smoking":"🚭","no littering":"🚯","non-potable water":"🚱","no pedestrians":"🚷","no mobile phones":"📵","no one under eighteen":"🔞",radioactive,biohazard,"up arrow":"⬆","up-right arrow":"↗","right arrow":"➡","down-right arrow":"↘","down arrow":"⬇","down-left arrow":"↙","left arrow":"⬅","up-left arrow":"↖","up-down arrow":"↕","left-right arrow":"↔","right arrow curving left":"↩","left arrow curving right":"↪","right arrow curving up":"⤴","right arrow curving down":"⤵","clockwise vertical arrows":"🔃","counterclockwise arrows button":"🔄","BACK arrow":"🔙","END arrow":"🔚","ON! arrow":"🔛","SOON arrow":"🔜","TOP arrow":"🔝","place of worship":"🛐","atom symbol":"⚛",om,"star of David":"✡","wheel of dharma":"☸","yin yang":"☯","latin cross":"✝","orthodox cross":"☦","star and crescent":"☪","peace symbol":"☮",menorah,"dotted six-pointed star":"🔯",Aries,Taurus,Gemini,Cancer,Leo,Virgo,Libra,Scorpio,Sagittarius,Capricorn,Aquarius,Pisces,Ophiuchus,"shuffle tracks button":"🔀","repeat button":"🔁","repeat single button":"🔂","play button":"▶","fast-forward button":"⏩","next track button":"⏭","play or pause button":"⏯","reverse button":"◀","fast reverse button":"⏪","last track button":"⏮","upwards button":"🔼","fast up button":"⏫","downwards button":"🔽","fast down button":"⏬","pause button":"⏸","stop button":"⏹","record button":"⏺","eject button":"⏏",cinema,"dim button":"🔅","bright button":"🔆","antenna bars":"📶","vibration mode":"📳","mobile phone off":"📴","female sign":"♀","male sign":"♂","transgender symbol":"⚧",multiply,plus,minus,divide,"heavy equals sign":"🟰",infinity,"double exclamation mark":"‼","exclamation question mark":"⁉","red question mark":"❓","white question mark":"❔","white exclamation mark":"❕","red exclamation mark":"❗","wavy dash":"〰","currency exchange":"💱","heavy dollar sign":"💲","medical symbol":"⚕","recycling symbol":"♻","fleur-de-lis":"⚜","trident emblem":"🔱","name badge":"📛","Japanese symbol for beginner":"🔰","hollow red circle":"⭕","check mark button":"✅","check box with check":"☑","check mark":"✔","cross mark":"❌","cross mark button":"❎","curly loop":"➰","double curly loop":"➿","part alternation mark":"〽","eight-spoked asterisk":"✳","eight-pointed star":"✴",sparkle,copyright,registered,"trade mark":"™","keycap: #":"#⃣","keycap: *":"*⃣","keycap: 0":"0⃣","keycap: 1":"1⃣","keycap: 2":"2⃣","keycap: 3":"3⃣","keycap: 4":"4⃣","keycap: 5":"5⃣","keycap: 6":"6⃣","keycap: 7":"7⃣","keycap: 8":"8⃣","keycap: 9":"9⃣","keycap: 10":"🔟","input latin uppercase":"🔠","input latin lowercase":"🔡","input numbers":"🔢","input symbols":"🔣","input latin letters":"🔤","A button (blood type)":"🅰","AB button (blood type)":"🆎","B button (blood type)":"🅱","CL button":"🆑","COOL button":"🆒","FREE button":"🆓",information,"ID button":"🆔","circled M":"Ⓜ","NEW button":"🆕","NG button":"🆖","O button (blood type)":"🅾","OK button":"🆗","P button":"🅿","SOS button":"🆘","UP! button":"🆙","VS button":"🆚","Japanese “here” button":"🈁","Japanese “service charge” button":"🈂","Japanese “monthly amount” button":"🈷","Japanese “not free of charge” button":"🈶","Japanese “reserved” button":"🈯","Japanese “bargain” button":"🉐","Japanese “discount” button":"🈹","Japanese “free of charge” button":"🈚","Japanese “prohibited” button":"🈲","Japanese “acceptable” button":"🉑","Japanese “application” button":"🈸","Japanese “passing grade” button":"🈴","Japanese “vacancy” button":"🈳","Japanese “congratulations” button":"㊗","Japanese “secret” button":"㊙","Japanese “open for business” button":"🈺","Japanese “no vacancy” button":"🈵","red circle":"🔴","orange circle":"🟠","yellow circle":"🟡","green circle":"🟢","blue circle":"🔵","purple circle":"🟣","brown circle":"🟤","black circle":"⚫","white circle":"⚪","red square":"🟥","orange square":"🟧","yellow square":"🟨","green square":"🟩","blue square":"🟦","purple square":"🟪","brown square":"🟫","black large square":"⬛","white large square":"⬜","black medium square":"◼","white medium square":"◻","black medium-small square":"◾","white medium-small square":"◽","black small square":"▪","white small square":"▫","large orange diamond":"🔶","large blue diamond":"🔷","small orange diamond":"🔸","small blue diamond":"🔹","red triangle pointed up":"🔺","red triangle pointed down":"🔻","diamond with a dot":"💠","radio button":"🔘","white square button":"🔳","black square button":"🔲","chequered flag":"🏁","triangular flag":"🚩","crossed flags":"🎌","black flag":"🏴","white flag":"🏳","rainbow flag":"🏳‍🌈","transgender flag":"🏳‍⚧","pirate flag":"🏴‍☠","flag: Ascension Island":"🇦🇨","flag: Andorra":"🇦🇩","flag: United Arab Emirates":"🇦🇪","flag: Afghanistan":"🇦🇫","flag: Antigua & Barbuda":"🇦🇬","flag: Anguilla":"🇦🇮","flag: Albania":"🇦🇱","flag: Armenia":"🇦🇲","flag: Angola":"🇦🇴","flag: Antarctica":"🇦🇶","flag: Argentina":"🇦🇷","flag: American Samoa":"🇦🇸","flag: Austria":"🇦🇹","flag: Australia":"🇦🇺","flag: Aruba":"🇦🇼","flag: Åland Islands":"🇦🇽","flag: Azerbaijan":"🇦🇿","flag: Bosnia & Herzegovina":"🇧🇦","flag: Barbados":"🇧🇧","flag: Bangladesh":"🇧🇩","flag: Belgium":"🇧🇪","flag: Burkina Faso":"🇧🇫","flag: Bulgaria":"🇧🇬","flag: Bahrain":"🇧🇭","flag: Burundi":"🇧🇮","flag: Benin":"🇧🇯","flag: St. Barthélemy":"🇧🇱","flag: Bermuda":"🇧🇲","flag: Brunei":"🇧🇳","flag: Bolivia":"🇧🇴","flag: Caribbean Netherlands":"🇧🇶","flag: Brazil":"🇧🇷","flag: Bahamas":"🇧🇸","flag: Bhutan":"🇧🇹","flag: Bouvet Island":"🇧🇻","flag: Botswana":"🇧🇼","flag: Belarus":"🇧🇾","flag: Belize":"🇧🇿","flag: Canada":"🇨🇦","flag: Cocos (Keeling) Islands":"🇨🇨","flag: Congo - Kinshasa":"🇨🇩","flag: Central African Republic":"🇨🇫","flag: Congo - Brazzaville":"🇨🇬","flag: Switzerland":"🇨🇭","flag: Côte d’Ivoire":"🇨🇮","flag: Cook Islands":"🇨🇰","flag: Chile":"🇨🇱","flag: Cameroon":"🇨🇲","flag: China":"🇨🇳","flag: Colombia":"🇨🇴","flag: Clipperton Island":"🇨🇵","flag: Costa Rica":"🇨🇷","flag: Cuba":"🇨🇺","flag: Cape Verde":"🇨🇻","flag: Curaçao":"🇨🇼","flag: Christmas Island":"🇨🇽","flag: Cyprus":"🇨🇾","flag: Czechia":"🇨🇿","flag: Germany":"🇩🇪","flag: Diego Garcia":"🇩🇬","flag: Djibouti":"🇩🇯","flag: Denmark":"🇩🇰","flag: Dominica":"🇩🇲","flag: Dominican Republic":"🇩🇴","flag: Algeria":"🇩🇿","flag: Ceuta & Melilla":"🇪🇦","flag: Ecuador":"🇪🇨","flag: Estonia":"🇪🇪","flag: Egypt":"🇪🇬","flag: Western Sahara":"🇪🇭","flag: Eritrea":"🇪🇷","flag: Spain":"🇪🇸","flag: Ethiopia":"🇪🇹","flag: European Union":"🇪🇺","flag: Finland":"🇫🇮","flag: Fiji":"🇫🇯","flag: Falkland Islands":"🇫🇰","flag: Micronesia":"🇫🇲","flag: Faroe Islands":"🇫🇴","flag: France":"🇫🇷","flag: Gabon":"🇬🇦","flag: United Kingdom":"🇬🇧","flag: Grenada":"🇬🇩","flag: Georgia":"🇬🇪","flag: French Guiana":"🇬🇫","flag: Guernsey":"🇬🇬","flag: Ghana":"🇬🇭","flag: Gibraltar":"🇬🇮","flag: Greenland":"🇬🇱","flag: Gambia":"🇬🇲","flag: Guinea":"🇬🇳","flag: Guadeloupe":"🇬🇵","flag: Equatorial Guinea":"🇬🇶","flag: Greece":"🇬🇷","flag: South Georgia & South Sandwich Islands":"🇬🇸","flag: Guatemala":"🇬🇹","flag: Guam":"🇬🇺","flag: Guinea-Bissau":"🇬🇼","flag: Guyana":"🇬🇾","flag: Hong Kong SAR China":"🇭🇰","flag: Heard & McDonald Islands":"🇭🇲","flag: Honduras":"🇭🇳","flag: Croatia":"🇭🇷","flag: Haiti":"🇭🇹","flag: Hungary":"🇭🇺","flag: Canary Islands":"🇮🇨","flag: Indonesia":"🇮🇩","flag: Ireland":"🇮🇪","flag: Israel":"🇮🇱","flag: Isle of Man":"🇮🇲","flag: India":"🇮🇳","flag: British Indian Ocean Territory":"🇮🇴","flag: Iraq":"🇮🇶","flag: Iran":"🇮🇷","flag: Iceland":"🇮🇸","flag: Italy":"🇮🇹","flag: Jersey":"🇯🇪","flag: Jamaica":"🇯🇲","flag: Jordan":"🇯🇴","flag: Japan":"🇯🇵","flag: Kenya":"🇰🇪","flag: Kyrgyzstan":"🇰🇬","flag: Cambodia":"🇰🇭","flag: Kiribati":"🇰🇮","flag: Comoros":"🇰🇲","flag: St. Kitts & Nevis":"🇰🇳","flag: North Korea":"🇰🇵","flag: South Korea":"🇰🇷","flag: Kuwait":"🇰🇼","flag: Cayman Islands":"🇰🇾","flag: Kazakhstan":"🇰🇿","flag: Laos":"🇱🇦","flag: Lebanon":"🇱🇧","flag: St. Lucia":"🇱🇨","flag: Liechtenstein":"🇱🇮","flag: Sri Lanka":"🇱🇰","flag: Liberia":"🇱🇷","flag: Lesotho":"🇱🇸","flag: Lithuania":"🇱🇹","flag: Luxembourg":"🇱🇺","flag: Latvia":"🇱🇻","flag: Libya":"🇱🇾","flag: Morocco":"🇲🇦","flag: Monaco":"🇲🇨","flag: Moldova":"🇲🇩","flag: Montenegro":"🇲🇪","flag: St. Martin":"🇲🇫","flag: Madagascar":"🇲🇬","flag: Marshall Islands":"🇲🇭","flag: North Macedonia":"🇲🇰","flag: Mali":"🇲🇱","flag: Myanmar (Burma)":"🇲🇲","flag: Mongolia":"🇲🇳","flag: Macao SAR China":"🇲🇴","flag: Northern Mariana Islands":"🇲🇵","flag: Martinique":"🇲🇶","flag: Mauritania":"🇲🇷","flag: Montserrat":"🇲🇸","flag: Malta":"🇲🇹","flag: Mauritius":"🇲🇺","flag: Maldives":"🇲🇻","flag: Malawi":"🇲🇼","flag: Mexico":"🇲🇽","flag: Malaysia":"🇲🇾","flag: Mozambique":"🇲🇿","flag: Namibia":"🇳🇦","flag: New Caledonia":"🇳🇨","flag: Niger":"🇳🇪","flag: Norfolk Island":"🇳🇫","flag: Nigeria":"🇳🇬","flag: Nicaragua":"🇳🇮","flag: Netherlands":"🇳🇱","flag: Norway":"🇳🇴","flag: Nepal":"🇳🇵","flag: Nauru":"🇳🇷","flag: Niue":"🇳🇺","flag: New Zealand":"🇳🇿","flag: Oman":"🇴🇲","flag: Panama":"🇵🇦","flag: Peru":"🇵🇪","flag: French Polynesia":"🇵🇫","flag: Papua New Guinea":"🇵🇬","flag: Philippines":"🇵🇭","flag: Pakistan":"🇵🇰","flag: Poland":"🇵🇱","flag: St. Pierre & Miquelon":"🇵🇲","flag: Pitcairn Islands":"🇵🇳","flag: Puerto Rico":"🇵🇷","flag: Palestinian Territories":"🇵🇸","flag: Portugal":"🇵🇹","flag: Palau":"🇵🇼","flag: Paraguay":"🇵🇾","flag: Qatar":"🇶🇦","flag: Réunion":"🇷🇪","flag: Romania":"🇷🇴","flag: Serbia":"🇷🇸","flag: Russia":"🇷🇺","flag: Rwanda":"🇷🇼","flag: Saudi Arabia":"🇸🇦","flag: Solomon Islands":"🇸🇧","flag: Seychelles":"🇸🇨","flag: Sudan":"🇸🇩","flag: Sweden":"🇸🇪","flag: Singapore":"🇸🇬","flag: St. Helena":"🇸🇭","flag: Slovenia":"🇸🇮","flag: Svalbard & Jan Mayen":"🇸🇯","flag: Slovakia":"🇸🇰","flag: Sierra Leone":"🇸🇱","flag: San Marino":"🇸🇲","flag: Senegal":"🇸🇳","flag: Somalia":"🇸🇴","flag: Suriname":"🇸🇷","flag: South Sudan":"🇸🇸","flag: São Tomé & Príncipe":"🇸🇹","flag: El Salvador":"🇸🇻","flag: Sint Maarten":"🇸🇽","flag: Syria":"🇸🇾","flag: Eswatini":"🇸🇿","flag: Tristan da Cunha":"🇹🇦","flag: Turks & Caicos Islands":"🇹🇨","flag: Chad":"🇹🇩","flag: French Southern Territories":"🇹🇫","flag: Togo":"🇹🇬","flag: Thailand":"🇹🇭","flag: Tajikistan":"🇹🇯","flag: Tokelau":"🇹🇰","flag: Timor-Leste":"🇹🇱","flag: Turkmenistan":"🇹🇲","flag: Tunisia":"🇹🇳","flag: Tonga":"🇹🇴","flag: Turkey":"🇹🇷","flag: Trinidad & Tobago":"🇹🇹","flag: Tuvalu":"🇹🇻","flag: Taiwan":"🇹🇼","flag: Tanzania":"🇹🇿","flag: Ukraine":"🇺🇦","flag: Uganda":"🇺🇬","flag: U.S. Outlying Islands":"🇺🇲","flag: United Nations":"🇺🇳","flag: United States":"🇺🇸","flag: Uruguay":"🇺🇾","flag: Uzbekistan":"🇺🇿","flag: Vatican City":"🇻🇦","flag: St. Vincent & Grenadines":"🇻🇨","flag: Venezuela":"🇻🇪","flag: British Virgin Islands":"🇻🇬","flag: U.S. Virgin Islands":"🇻🇮","flag: Vietnam":"🇻🇳","flag: Vanuatu":"🇻🇺","flag: Wallis & Futuna":"🇼🇫","flag: Samoa":"🇼🇸","flag: Kosovo":"🇽🇰","flag: Yemen":"🇾🇪","flag: Mayotte":"🇾🇹","flag: South Africa":"🇿🇦","flag: Zambia":"🇿🇲","flag: Zimbabwe":"🇿🇼","flag: England":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag: Scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag: Wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿"},SEARCH_DEBOUNCE_TIMEFRAME=200,EMOJI_ENTRIES=emojiListToEmojisEntry(emojiList);function EmojiPicker({title:r,onPick:s,currentValue:a,isMacOs:i}){const o=useI18n(),[x,y]=reactExports.useState(""),_=useDebounce(x.toLocaleLowerCase(),SEARCH_DEBOUNCE_TIMEFRAME),E=reactExports.useMemo(()=>isSingleEmoji$1(_)?[{emoji:_,searchTerms:[]}]:EMOJI_ENTRIES.filter(({searchTerms:j})=>j.some(T=>T.toLocaleLowerCase().includes(_))),[_]),R=reactExports.useCallback(j=>{j.target instanceof HTMLElement&&j.target.dataset.emoji&&s(j.target.dataset.emoji)},[s]),S=reactExports.useCallback(()=>{s()},[s]);return jsxRuntimeExports.jsx("div",{className:"EmojiPicker",children:jsxRuntimeExports.jsxs(CardScrollView,{containerClassName:"EmojiPicker__card",headerStickyElement:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"EmojiPicker__header",children:[jsxRuntimeExports.jsx("div",{className:"EmojiPicker__header__title",children:r}),a&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:S,className:"EmojiPicker__header__action",children:o.formatMessage("EmojiPicker.remove")})]}),jsxRuntimeExports.jsx("div",{className:`EmojiPicker__search ${FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME}`,children:jsxRuntimeExports.jsx(SearchField,{value:x,onChange:y,placeholder:o.formatMessage("EmojiPicker.search"),autoFocus:!0})})]}),children:[jsxRuntimeExports.jsx("div",{className:cx$6("EmojiPicker__emojisGrid",{"EmojiPicker__emojisGrid--isMacOs":i}),onClick:R,children:E.map(({emoji:j,searchTerms:T})=>jsxRuntimeExports.jsx("div",{"data-emoji":j,title:T.join(" "),children:j},j))}),!!x&&!E.length&&jsxRuntimeExports.jsx("div",{className:"EmojiPicker__noResult",children:o.formatMessage("EmojiPicker.no-result")})]})})}function emojiListToEmojisEntry(r){return Object.entries(r).map(([s,a])=>({emoji:a,searchTerms:s.split("_")}))}const EmojiPicker_memo=reactExports.memo(EmojiPicker);var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange$1(r,s,a,i){for(var o=-1,x=nativeMax(nativeCeil((s-r)/(a||1)),0),y=Array(x);x--;)y[i?x:++o]=r,r+=a;return y}var _baseRange=baseRange$1,eq$4=eq_1$1,isArrayLike$2=isArrayLike_1,isIndex=_isIndex,isObject$3=isObject_1;function isIterateeCall$2(r,s,a){if(!isObject$3(a))return!1;var i=typeof s;return(i=="number"?isArrayLike$2(a)&&isIndex(s,a.length):i=="string"&&s in a)?eq$4(a[s],r):!1}var _isIterateeCall=isIterateeCall$2,baseRange=_baseRange,isIterateeCall$1=_isIterateeCall,toFinite=toFinite_1;function createRange$1(r){return function(s,a,i){return i&&typeof i!="number"&&isIterateeCall$1(s,a,i)&&(a=i=void 0),s=toFinite(s),a===void 0?(a=s,s=0):a=toFinite(a),i=i===void 0?s<a?1:-1:toFinite(i),baseRange(s,a,i,r)}}var _createRange=createRange$1,createRange=_createRange,range$1=createRange(),range_1=range$1;const range$2=getDefaultExportFromCjs(range_1);function ownKeys$1(r,s){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);s&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,i)}return a}function _objectSpread2$1(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(a),!0).forEach(function(i){_defineProperty$2(r,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(a,i))})}return r}function _typeof(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(s){return typeof s}:_typeof=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(r)}function _defineProperty$2(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function _slicedToArray$1(r,s){return _arrayWithHoles$1(r)||_iterableToArrayLimit$1(r,s)||_unsupportedIterableToArray$1(r,s)||_nonIterableRest$1()}function _arrayWithHoles$1(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$1(r,s){var a=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(a!=null){var i=[],o=!0,x=!1,y,_;try{for(a=a.call(r);!(o=(y=a.next()).done)&&(i.push(y.value),!(s&&i.length===s));o=!0);}catch(E){x=!0,_=E}finally{try{!o&&a.return!=null&&a.return()}finally{if(x)throw _}}return i}}function _unsupportedIterableToArray$1(r,s){if(r){if(typeof r=="string")return _arrayLikeToArray$1(r,s);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray$1(r,s)}}function _arrayLikeToArray$1(r,s){(s==null||s>r.length)&&(s=r.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=r[a];return i}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var usePrevious=function(s){var a=React$6.useRef(s);return React$6.useEffect(function(){a.current=s},[s]),a.current},isUnknownObject=function(s){return s!==null&&_typeof(s)==="object"},isPromise$1=function(s){return isUnknownObject(s)&&typeof s.then=="function"},isStripe=function(s){return isUnknownObject(s)&&typeof s.elements=="function"&&typeof s.createToken=="function"&&typeof s.createPaymentMethod=="function"&&typeof s.confirmCardPayment=="function"},PLAIN_OBJECT_STR="[object Object]",isEqual=function r(s,a){if(!isUnknownObject(s)||!isUnknownObject(a))return s===a;var i=Array.isArray(s),o=Array.isArray(a);if(i!==o)return!1;var x=Object.prototype.toString.call(s)===PLAIN_OBJECT_STR,y=Object.prototype.toString.call(a)===PLAIN_OBJECT_STR;if(x!==y)return!1;if(!x&&!i)return s===a;var _=Object.keys(s),E=Object.keys(a);if(_.length!==E.length)return!1;for(var R={},S=0;S<_.length;S+=1)R[_[S]]=!0;for(var j=0;j<E.length;j+=1)R[E[j]]=!0;var T=Object.keys(R);if(T.length!==_.length)return!1;var A=s,M=a,P=function(D){return r(A[D],M[D])};return T.every(P)},extractAllowedOptionsUpdates=function(s,a,i){return isUnknownObject(s)?Object.keys(s).reduce(function(o,x){var y=!isUnknownObject(a)||!isEqual(s[x],a[x]);return i.includes(x)?(y&&console.warn("Unsupported prop change: options.".concat(x," is not a mutable property.")),o):y?_objectSpread2$1(_objectSpread2$1({},o||{}),{},_defineProperty$2({},x,s[x])):o},null):null},INVALID_STRIPE_ERROR="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",validateStripe=function(s){if(s===null||isStripe(s))return s;throw new Error(INVALID_STRIPE_ERROR)},parseStripeProp=function(s){if(isPromise$1(s))return{tag:"async",stripePromise:Promise.resolve(s).then(validateStripe)};var a=validateStripe(s);return a===null?{tag:"empty"}:{tag:"sync",stripe:a}},ElementsContext=React$6.createContext(null);ElementsContext.displayName="ElementsContext";var parseElementsContext=function(s,a){if(!s)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(a," in an <Elements> provider."));return s},CartElementContext=React$6.createContext(null);CartElementContext.displayName="CartElementContext";var parseCartElementContext=function(s,a){if(!s)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(a," in an <Elements> provider."));return s},Elements=function(s){var a=s.stripe,i=s.options,o=s.children,x=React$6.useMemo(function(){return parseStripeProp(a)},[a]),y=React$6.useState(null),_=_slicedToArray$1(y,2),E=_[0],R=_[1],S=React$6.useState(null),j=_slicedToArray$1(S,2),T=j[0],A=j[1],M=React$6.useState(function(){return{stripe:x.tag==="sync"?x.stripe:null,elements:x.tag==="sync"?x.stripe.elements(i):null}}),P=_slicedToArray$1(M,2),L=P[0],D=P[1];React$6.useEffect(function(){var N=!0,F=function(V){D(function(U){return U.stripe?U:{stripe:V,elements:V.elements(i)}})};return x.tag==="async"&&!L.stripe?x.stripePromise.then(function(W){W&&N&&F(W)}):x.tag==="sync"&&!L.stripe&&F(x.stripe),function(){N=!1}},[x,L,i]);var O=usePrevious(a);React$6.useEffect(function(){O!==null&&O!==a&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[O,a]);var B=usePrevious(i);return React$6.useEffect(function(){if(L.elements){var N=extractAllowedOptionsUpdates(i,B,["clientSecret","fonts"]);N&&L.elements.update(N)}},[i,B,L.elements]),React$6.useEffect(function(){var N=L.stripe;!N||!N._registerWrapper||!N.registerAppInfo||(N._registerWrapper({name:"react-stripe-js",version:"1.16.0"}),N.registerAppInfo({name:"react-stripe-js",version:"1.16.0",url:"https://stripe.com/docs/stripe-js/react"}))},[L.stripe]),React$6.createElement(ElementsContext.Provider,{value:L},React$6.createElement(CartElementContext.Provider,{value:{cart:E,setCart:R,cartState:T,setCartState:A}},o))};Elements.propTypes={stripe:PropTypes.any,options:PropTypes.object};var useElementsContextWithUseCase=function(s){var a=React$6.useContext(ElementsContext);return parseElementsContext(a,s)},useCartElementContextWithUseCase=function(s){var a=React$6.useContext(CartElementContext);return parseCartElementContext(a,s)},useElements=function(){var s=useElementsContextWithUseCase("calls useElements()"),a=s.elements;return a},useStripe=function(){var s=useElementsContextWithUseCase("calls useStripe()"),a=s.stripe;return a};PropTypes.func.isRequired;var useCallbackReference=function(s){var a=React$6.useRef(s);return React$6.useEffect(function(){a.current=s},[s]),function(){a.current&&a.current.apply(a,arguments)}},noop$1=function(){},capitalized=function(s){return s.charAt(0).toUpperCase()+s.slice(1)},createElementComponent=function(s,a){var i="".concat(capitalized(s),"Element"),o=function(E){var R=E.id,S=E.className,j=E.options,T=j===void 0?{}:j,A=E.onBlur,M=A===void 0?noop$1:A,P=E.onFocus,L=P===void 0?noop$1:P,D=E.onReady,O=D===void 0?noop$1:D,B=E.onChange,N=B===void 0?noop$1:B,F=E.onEscape,W=F===void 0?noop$1:F,V=E.onClick,U=V===void 0?noop$1:V,G=E.onLoadError,oe=G===void 0?noop$1:G,X=E.onLoaderStart,ee=X===void 0?noop$1:X,ae=E.onNetworksChange,ie=ae===void 0?noop$1:ae,se=E.onCheckout,Q=se===void 0?noop$1:se,Z=E.onLineItemClick,J=Z===void 0?noop$1:Z,te=E.onConfirm,de=te===void 0?noop$1:te,ce=E.onCancel,me=ce===void 0?noop$1:ce,ve=E.onShippingAddressChange,xe=ve===void 0?noop$1:ve,ge=E.onShippingRateChange,be=ge===void 0?noop$1:ge,ye=useElementsContextWithUseCase("mounts <".concat(i,">")),Ie=ye.elements,Pe=React$6.useRef(null),we=React$6.useRef(null),Re=useCartElementContextWithUseCase("mounts <".concat(i,">")),Se=Re.setCart,Ee=Re.setCartState,Ce=useCallbackReference(O),he=useCallbackReference(M),Ae=useCallbackReference(L),Ne=useCallbackReference(U),Be=useCallbackReference(N),Oe=useCallbackReference(W),Ue=useCallbackReference(oe),Ve=useCallbackReference(ee),We=useCallbackReference(ie),Te=useCallbackReference(Q),De=useCallbackReference(J),Le=useCallbackReference(de),Fe=useCallbackReference(me),Ke=useCallbackReference(xe),nt=useCallbackReference(be);React$6.useLayoutEffect(function(){if(Pe.current==null&&Ie&&we.current!=null){var Je=Ie.create(s,T);s==="cart"&&Se&&Se(Je),Pe.current=Je,Je.mount(we.current),Je.on("ready",function(Qe){s==="cart"?(Ee&&Ee(Qe),Ce(Qe)):Ce(s==="payButton"?Qe:Je)}),Je.on("change",function(Qe){s==="cart"&&Ee&&Ee(Qe),Be(Qe)}),Je.on("blur",he),Je.on("focus",Ae),Je.on("escape",Oe),Je.on("loaderror",Ue),Je.on("loaderstart",Ve),Je.on("networkschange",We),Je.on("click",Ne),Je.on("checkout",function(Qe){s==="cart"&&Ee&&Ee(Qe),Te(Qe)}),Je.on("lineitemclick",De),Je.on("confirm",Le),Je.on("cancel",Fe),Je.on("shippingaddresschange",Ke),Je.on("shippingratechange",nt)}});var qe=usePrevious(T);return React$6.useEffect(function(){if(Pe.current){var Je=extractAllowedOptionsUpdates(T,qe,["paymentRequest"]);Je&&Pe.current.update(Je)}},[T,qe]),React$6.useLayoutEffect(function(){return function(){Pe.current&&(Pe.current.destroy(),Pe.current=null)}},[]),React$6.createElement("div",{id:R,className:S,ref:we})},x=function(E){useElementsContextWithUseCase("mounts <".concat(i,">")),useCartElementContextWithUseCase("mounts <".concat(i,">"));var R=E.id,S=E.className;return React$6.createElement("div",{id:R,className:S})},y=a?x:o;return y.propTypes={id:PropTypes.string,className:PropTypes.string,onChange:PropTypes.func,onBlur:PropTypes.func,onFocus:PropTypes.func,onReady:PropTypes.func,onEscape:PropTypes.func,onClick:PropTypes.func,onLoadError:PropTypes.func,onLoaderStart:PropTypes.func,onNetworksChange:PropTypes.func,onCheckout:PropTypes.func,onLineItemClick:PropTypes.func,onConfirm:PropTypes.func,onCancel:PropTypes.func,onShippingAddressChange:PropTypes.func,onShippingRateChange:PropTypes.func,options:PropTypes.object},y.displayName=i,y.__elementType=s,y},isServer=typeof window>"u";createElementComponent("auBankAccount",isServer);createElementComponent("card",isServer);createElementComponent("cardNumber",isServer);createElementComponent("cardExpiry",isServer);createElementComponent("cardCvc",isServer);createElementComponent("fpxBank",isServer);createElementComponent("iban",isServer);createElementComponent("idealBank",isServer);createElementComponent("p24Bank",isServer);createElementComponent("epsBank",isServer);var PaymentElement$1=createElementComponent("payment",isServer);createElementComponent("payButton",isServer);createElementComponent("paymentRequestButton",isServer);createElementComponent("linkAuthentication",isServer);createElementComponent("address",isServer);createElementComponent("shippingAddress",isServer);createElementComponent("cart",isServer);createElementComponent("paymentMethodMessaging",isServer);createElementComponent("affirmMessage",isServer);createElementComponent("afterpayClearpayMessage",isServer);function loadStripeOnce(){throw new Error("Stripe not supported in this environment")}function getStripeLocale(r){let s=r;return r==="zh-CN"&&(s="zh"),s}const ThemedElements=reactExports.forwardRef(function({clientSecretState:s,children:a},i){const o=Recoil_index_29(Recoil_index_2(s)?s:Recoil_index_12(s)),x=useI18n(),y=getStripeLocale(x.locale),_=useIsAppThemeDark(),E={theme:_?"night":"stripe",variables:{borderRadius:"6px",spacingGridColumn:"8px",spacingGridRow:"8px",colorDanger:"#ff001f"},rules:{".Label":{fontSize:"0",color:_?"#777":"#9B9B9B"},".Input":{padding:"10px 16px",boxShadow:"none",transition:"border-color 150ms linear"},".Input::placeholder":{color:_?"#777":"#d8d8d8"},".Input:focus":{borderColor:"#0083FF",boxShadow:"none"},".Input--invalid":{boxShadow:"none"},".Error":{fontSize:"12px"}}};return jsxRuntimeExports.jsxs(Elements,{stripe:loadStripeOnce(),options:{locale:y,clientSecret:o,appearance:E,loader:"never"},children:[jsxRuntimeExports.jsx(SetRef,{elementsRef:i}),a]},o)}),SetRef=({elementsRef:r})=>{const s=useElements();return reactExports.useImperativeHandle(r,()=>s,[s]),null};function useStripeSetupIntent(r,s,{userDetails:a}){const i=reactExports.useRef(!1);return{refreshIntentIfNeeded:reactExports.useCallback(()=>{i.current&&(s(),i.current=!1)},[s]),confirmSetup:reactExports.useCallback(async()=>{const o=await loadStripeOnce();assertNonNullable(r.current);const{error:x,setupIntent:y}=await o.confirmSetup({elements:r.current,redirect:"if_required",confirmParams:{payment_method_data:{billing_details:{name:a==null?void 0:a.name,email:a==null?void 0:a.email}}}});if(x)throw x;return i.current=!0,y},[r,a==null?void 0:a.email,a==null?void 0:a.name])}}function useAnalyticsTrackOnce(r){const{track:s}=useAnalytics(),a=reactExports.useRef(!1);return reactExports.useCallback(function(x){a.current||(a.current=!0,s(r,x))},[])}function isAuthCheckEmailStatusFailure(r){switch(r){case AuthCheckEmailStatus.BAD_REQUEST:case AuthCheckEmailStatus.INTERNAL_SERVER_ERROR:case AuthCheckEmailStatus.NETWORK_UNAVAILABLE:case AuthCheckEmailStatus.UNKNOWN_ERROR:return!0;case AuthCheckEmailStatus.LOADING:case AuthCheckEmailStatus.NONE:case AuthCheckEmailStatus.USER_DOES_NOT_EXIST:case AuthCheckEmailStatus.USER_EXIST:return!1}}var debounce=debounce_1,isObject$2=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(r,s,a){var i=!0,o=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(a)&&(i="leading"in a?!!a.leading:i,o="trailing"in a?!!a.trailing:o),debounce(r,s,{leading:i,maxWait:s,trailing:o})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1),THROTTLE_WAIT=300,THROTTLE_CONFIG={leading:!0,trailing:!1};function useAuthRefreshUserDetails(){const r=useAuthService();return reactExports.useMemo(()=>throttle$1(()=>void r.refreshUserFromServer(),THROTTLE_WAIT,THROTTLE_CONFIG),[r])}function useStripeConfirmPayment(){const{userDetails:r}=useAuth(),s=reactExports.useRef(!1);return reactExports.useCallback(async a=>{const i=await loadStripeOnce(),{error:o,paymentIntent:x}=await i.confirmPayment({clientSecret:a,redirect:"if_required",confirmParams:{payment_method_data:{billing_details:{name:r==null?void 0:r.name,email:r==null?void 0:r.email}}}});if(o)throw o;return s.current=!0,x},[r==null?void 0:r.email,r==null?void 0:r.name])}const root$C="_root_ji184_1",spinner$5="_spinner_ji184_9",isReady$1="_isReady_ji184_23",styles$1n={root:root$C,spinner:spinner$5,isReady:isReady$1},OPTIONS={terms:{card:"never"},fields:{billingDetails:{name:"never",email:"never"}}},PaymentElement=({onCompleteChange:r,onReadyStateChange:s})=>{const[a,i]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$1n.root,{[styles$1n.isReady]:a}),children:[jsxRuntimeExports.jsx("div",{className:styles$1n.spinner,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),jsxRuntimeExports.jsx(PaymentElement$1,{options:OPTIONS,onReady:()=>{i(!0),s==null||s(!0)},onChange:r?o=>r(o.complete):void 0})]})};function isStripeCardError(r){return r!==null&&typeof r=="object"&&"type"in r&&r.type==="card_error"}function TaskAlertRepeatDays(r){const s=useI18n(),a=getIsoWeekdayListByTaskAlertRepeatDays(r.value,r.isoWeekStartDay).map(i=>hooks().isoWeekday(i).format(s.momentParams.weekday));return jsxRuntimeExports.jsx(FormattedList,{value:a,type:"conjunction",style:"long"})}const TaskAlertRepeatDays_memo=reactExports.memo(TaskAlertRepeatDays);function TaskAlertReminderText({isoWeekStartDay:r,task:s,now:a}){const i=useI18n(),{alert:o,dueDate:x,repeatingMethod:y}=s;if(x==null)return ReminderUtils2.isOneTimeSomedayReminder(s)?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.someday"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.addReminder"});const _=o==null?null:o.repeatEndsOn,E=o==null?null:o.repeatEndType,R=o==null?null:o.repeatInterval,S=o==null?null:o.repeatDays,j=o==null?null:o.repeatMonthType;if(E!=="REPEAT_END_NEVER"&&_!=null&&_<=a)return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.addReminder"});const T=hooks(x);if(isTaskRecurring(s,a)){const A=getValidTaskAlertRepeatInterval(R);switch(y){case TaskRepeatingMethod.TASK_REPEAT_DAY:return jsxRuntimeExports.jsx(FormattedMessage,{id:A===1?"TaskAlertReminderText.recurrence.daily":"TaskAlertReminderText.recurrence.daily.plural",values:{interval:A,time:T.format(i.momentParams.time)}});case TaskRepeatingMethod.TASK_REPEAT_WEEK:return jsxRuntimeExports.jsx(FormattedMessage,{id:A===1?"TaskAlertReminderText.recurrence.weekly":"TaskAlertReminderText.recurrence.weekly.plural",values:{interval:A,isoWeekdays:jsxRuntimeExports.jsx(TaskAlertRepeatDays_memo,{isoWeekStartDay:r,value:S==null?"0000000":S})}});case TaskRepeatingMethod.TASK_REPEAT_MONTH:switch(j){case TaskAlertRepeatMonthType.ON_DAY:const M=getWeekNumberInMonth(x,r),P=i.formatMessage(`TaskAlertReminderText.recurrence.monthly.onDay.weekNumber.${M}`,{weekNumber:M});return jsxRuntimeExports.jsx(FormattedMessage,{id:A===1?"TaskAlertReminderText.recurrence.monthly.onDay":"TaskAlertReminderText.recurrence.monthly.onDay.plural",values:{interval:A,weekNumberFormatted:P,weekday:T.format(i.momentParams.weekday)}});case TaskAlertRepeatMonthType.ON_DATE:default:return jsxRuntimeExports.jsx(FormattedMessage,{id:A===1?"TaskAlertReminderText.recurrence.monthly.onDate":"TaskAlertReminderText.recurrence.monthly.onDate.plural",values:{interval:A,day:T.format(i.momentParams.day)}})}case TaskRepeatingMethod.TASK_REPEAT_YEAR:return jsxRuntimeExports.jsx(FormattedMessage,{id:A===1?"TaskAlertReminderText.recurrence.yearly":"TaskAlertReminderText.recurrence.yearly.plural",values:{interval:A,date:T.format(i.momentParams.date)}});default:throw new Error("<TaskAlertReminderText>: repeatingMethod's switch - default case")}}if(y==null||y==="TASK_REPEAT_OFF")switch(getTaskReminderCategory(x,r,a)){case ReminderCategoryEnum.NO_REMINDER:return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.addReminder"});case ReminderCategoryEnum.LATER_TODAY:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.laterToday",values:{hourIfRounded:isTimeRounded(T)?T.format(i.momentParams.hour):T.format(i.momentParams.time)}});case ReminderCategoryEnum.THIS_EVENING:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.thisEvening",values:{hourIfRounded:isTimeRounded(T)?T.format(i.momentParams.hour):T.format(i.momentParams.time)}});case ReminderCategoryEnum.TOMORROW:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.tomorrow",values:{hourIfRounded:isTimeRounded(T)?T.format(i.momentParams.hour):T.format(i.momentParams.time)}});case ReminderCategoryEnum.THIS_WEEK:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.thisWeek",values:{weekdayShort:T.format(i.momentParams.weekdayShort),time:T.format(i.momentParams.time)}});case ReminderCategoryEnum.NEXT_WEEK:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.nextWeek",values:{date:T.format(i.momentParams.date)}});case ReminderCategoryEnum.FUTURE:case ReminderCategoryEnum.OVERDUE:return jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskAlertReminderText.reminder.other",values:{hourIfRounded:isTimeRounded(T)?T.format(i.momentParams.hour):T.format(i.momentParams.time),date:T.format(i.momentParams.date)}});default:throw new Error("<TaskAlertReminderText>: ReminderCategoryEnum's switch - default case")}return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.addReminder"})}function isTimeRounded(r){return r.minute()===0}const FallbackImg=({errorSrc:r,alt:s,src:a,...i})=>{const[o,x]=React$6.useState(!1);return jsxRuntimeExports.jsx("img",{...i,alt:s,onError:o?void 0:()=>x(!0),src:o?r:a})};var ImageLoaderLoadingState=(r=>(r.LOADING="LOADING",r.SUCCESS="SUCCESS",r.FAILURE="FAILURE",r))(ImageLoaderLoadingState||{});class ImageLoader extends reactExports.Component{constructor(){super(...arguments);$e(this,"_isMounted",!0);$e(this,"_imagesLoader",ImagesLoader.getShared());$e(this,"state",{loadingState:this.props.isOptimistic===!0&&this._imagesLoader.isLoaded(this.props.src)?"SUCCESS":"LOADING"});$e(this,"handleLoad",()=>{this._isMounted&&rafBatch(()=>{this._isMounted&&this.setState(a=>a.loadingState==="SUCCESS"?null:{loadingState:"SUCCESS"})})});$e(this,"handleError",a=>{AnydoSentry.captureException(a),this._isMounted&&this.setState({loadingState:"FAILURE"})})}componentDidMount(){this._isMounted=!0;const{isOptimistic:a,src:i,timeout:o}=this.props;a===!0?this._imagesLoader.load(i,o).then(this.handleLoad,this.handleError):this._imagesLoader.reload(i,o).then(this.handleLoad,this.handleError)}componentWillUnmount(){this._isMounted=!1}render(){return this.props.render(this.state.loadingState)}}function last(r){var s=r==null?0:r.length;return s?r[s-1]:void 0}var last_1=last;const last$1=getDefaultExportFromCjs(last_1),item$3="_item_1khlr_1",animateFrom="_animateFrom_1khlr_8",animateTo="_animateTo_1khlr_12",styles$1m={item:item$3,animateFrom,"ani-morph-item-from":"_ani-morph-item-from_1khlr_1",animateTo,"ani-morph-item-to":"_ani-morph-item-to_1khlr_1"};function getRects(r){const s=r.map(a=>new Promise(i=>{const o=a.getBoundingClientRect();i(o)}));return Promise.all(s)}function morph(r,s,a,i){return!r||!a||!(s!=null&&s.length)||!(i!=null&&i.length)?Promise.reject():new Promise((o,x)=>{const y=last$1(s);if(!y)return x();const _=()=>{y.removeEventListener("animationend",_),a.classList.remove(styles$1m.animateTo),o(void 0)};y.addEventListener("animationend",_),Promise.all([getRects(s),getRects(i)]).then(([E,R])=>{E.forEach((S,j)=>{const T=i[j],A=s[j],M=R[j];T.style.setProperty("--translateX",`${S.x-M.x}px`),T.style.setProperty("--translateY",`${S.y-M.y}px`),T.style.setProperty("--scaleX",(S.width/M.width).toString()),T.style.setProperty("--scaleY",(S.height/M.height).toString()),A.style.setProperty("--translateX",`${M.x-S.x}px`),A.style.setProperty("--translateY",`${M.y-S.y}px`),A.style.setProperty("--scaleX",(M.width/S.width).toString()),A.style.setProperty("--scaleY",(M.height/S.height).toString())})}).then(()=>{r.classList.add(styles$1m.animateFrom),a.classList.add(styles$1m.animateTo)})})}function useMorphAnimation(){return React$6.useMemo(()=>({morph,itemClassName:styles$1m.item}),[])}function VisuallyHidden({tagName:r="div",id:s,children:a}){const i={id:s,className:"VisuallyHidden",children:a};return reactExports.createElement(r,i)}const Delayed=({ms:r=300,children:s})=>{const[a,i]=React$6.useState(!1);return React$6.useEffect(()=>{const o=setTimeout(()=>(i(!0),()=>clearTimeout(o)),r)},[r]),a?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:s}):null},Drawer$1="_Drawer_1rlac_1",portal="_portal_1rlac_20",isAboveBackdrop="_isAboveBackdrop_1rlac_30",header$4="_header_1rlac_34",stickyHeader="_stickyHeader_1rlac_43",title$d="_title_1rlac_51",buttons$5="_buttons_1rlac_59",content$4="_content_1rlac_66",contentWrapper$2="_contentWrapper_1rlac_71",contentInner="_contentInner_1rlac_79",topShadow="_topShadow_1rlac_83",closeButton$4="_closeButton_1rlac_92",isEnter="_isEnter_1rlac_110",isLeave="_isLeave_1rlac_115",styles$1l={Drawer:Drawer$1,portal,isAboveBackdrop,header:header$4,stickyHeader,title:title$d,buttons:buttons$5,content:content$4,contentWrapper:contentWrapper$2,contentInner,topShadow,closeButton:closeButton$4,isEnter,"ani-Drawer__Enter":"_ani-Drawer__Enter_1rlac_1",isLeave,"ani-Drawer__Leave":"_ani-Drawer__Leave_1rlac_1"},Drawer=({className:r="",contentInnerClassName:s="",isVisible:a,asPortal:i=!0,closeOnOutsideClick:o=!0,hasCloseButton:x=!0,isAboveBackdrop:y=!1,accessory:_,footer:E,close:R,title:S,onScrolledToBottom:j,onScrolledToTop:T,onScrolledToTopChange:A,onScrolledToBottomChange:M,children:P,stickyHeader:L})=>{const D=React$6.useRef(null),O=React$6.useRef(null),{isScrolledToTop:B,isScrolledToBottom:N,props:F}=useScrollViewObserver(),W=S||x||_||L,[{animationState:V,isVisible:U},G]=React$6.useState({animationState:a?"ENTER":"NONE",isVisible:a});React$6.useEffect(()=>{a&&N&&(j==null||j())},[a,N,j]),React$6.useEffect(()=>{a&&B&&(T==null||T())},[a,B,T]),React$6.useEffect(()=>{A==null||A(B)},[B,A]),React$6.useEffect(()=>{M==null||M(N)},[N,M]),React$6.useEffect(()=>{V==="NONE"&&U&&G({isVisible:!0,animationState:"PRE_ENTER"})},[V,U]),React$6.useEffect(()=>{G(a?{isVisible:!0,animationState:"NONE"}:ae=>ae.animationState==="PRE_ENTER"?{isVisible:!1,animationState:"NONE"}:ae.animationState==="ENTER"&&ae.isVisible?{animationState:"LEAVE",isVisible:!0}:ae)},[a]);const oe=()=>{V==="LEAVE"&&U?G({isVisible:!1,animationState:"NONE"}):V==="PRE_ENTER"&&U&&G({isVisible:!0,animationState:"ENTER"})},X=React$6.useCallback(()=>{var ae;(ae=O.current)==null||ae.scrollToBottom()},[]);useOutSideClick(D,o&&V==="ENTER"?R:void 0);const ee=U?jsxRuntimeExports.jsxs("div",{ref:D,className:cx$6(styles$1l.Drawer,FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME,{[styles$1l.isEnter]:V==="PRE_ENTER"||V==="ENTER",[styles$1l.isLeave]:V==="LEAVE",[styles$1l.isAboveBackdrop]:y,[styles$1l.portal]:i},r),onAnimationEnd:oe,children:[W?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$1l.header,children:[jsxRuntimeExports.jsx("div",{className:styles$1l.title,children:S}),jsxRuntimeExports.jsxs("div",{className:styles$1l.buttons,children:[_,x&&jsxRuntimeExports.jsx(CloseButton,{className:styles$1l.closeButton,onClick:R})]})]}),L&&jsxRuntimeExports.jsx("div",{className:styles$1l.stickyHeader,children:L})]}):null,jsxRuntimeExports.jsxs("div",{className:styles$1l.content,children:[!B&&jsxRuntimeExports.jsx("div",{className:styles$1l.topShadow}),jsxRuntimeExports.jsx("div",{className:styles$1l.contentWrapper,children:jsxRuntimeExports.jsx(ScrollView_forwarded,{ref:O,onDidMount:X,...F,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$1l.contentInner,s),children:P})})})]}),E&&jsxRuntimeExports.jsx("div",{children:E})]}):null;return U?i?jsxRuntimeExports.jsx(Portal,{children:ee}):ee:null},Drawer_memo=React$6.memo(Drawer),SvgMentionsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...r},reactExports.createElement("path",{fill:"#0083FF",stroke:"#0083FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M13 6.667a5.587 5.587 0 0 1-.6 2.533 5.666 5.666 0 0 1-5.067 3.133 5.587 5.587 0 0 1-2.533-.6L1 13l1.267-3.8a5.586 5.586 0 0 1-.6-2.533A5.667 5.667 0 0 1 4.8 1.6 5.587 5.587 0 0 1 7.333 1h.334A5.653 5.653 0 0 1 13 6.333v.334z"})),SvgMentionsBigicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",stroke:"#0083FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.379 8.379 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5Z"})),mentionsWrapper="_mentionsWrapper_u8s5c_1",mentionsCount="_mentionsCount_u8s5c_8",mentionsCountLarge="_mentionsCountLarge_u8s5c_18",styles$1k={mentionsWrapper,mentionsCount,mentionsCountLarge},UnreadCountIndicator=({count:r,size:s="regular"})=>jsxRuntimeExports.jsxs("span",{className:styles$1k.mentionsWrapper,children:[jsxRuntimeExports.jsx("span",{className:"rtl-mirror-icon",children:s==="large"?jsxRuntimeExports.jsx(SvgMentionsBigicon,{}):jsxRuntimeExports.jsx(SvgMentionsicon,{})}),jsxRuntimeExports.jsx("span",{className:cx$6(styles$1k.mentionsCount,{[styles$1k.mentionsCountLarge]:s==="large"}),children:r?r>9?"∞":r:null})]});function TimeAgo({date:r,className:s,showTooltip:a=!0}){const{momentParams:i,locale:o,formatMessage:x}=useI18n(),y=useNow2(5e3),_=React$6.useMemo(()=>hooks(y).format("m"),[y]),E=React$6.useMemo(()=>(hooks.locale(o),hooks(r)),[r,o]),R=React$6.useMemo(()=>y-E.valueOf()<6e4?x("_.time.just-now"):E.fromNow(),[_,E]),S=React$6.useMemo(()=>a?jsxRuntimeExports.jsx(TooltipSmallInfo,{text:E.format(`${i.date} ${i.time}`),children:R}):R,[a,E,i.date,i.time,R]);return jsxRuntimeExports.jsx("div",{className:s,children:S})}var styles$1j={container:"_13737bd0",title:"_13737bd1",topSpacing:"_13737bd2",groupHeader:"_13737bd3",groupHeaderTitle:"_13737bd4",group:"_13737bd5",groupItem:"_13737bd6",rounded:"_13737bd7"},styles$1i={root:"_18k04rp0",appBar:"_18k04rp1",appBarTitle:"_18k04rp2",appBarAccessories:"_18k04rp3",appBarAccessory:"_18k04rp4",button:"_18k04rp5 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9"};const PaneLayout=({leftAccessory:r,title:s,children:a})=>jsxRuntimeExports.jsxs("div",{className:styles$1i.root,children:[jsxRuntimeExports.jsxs("div",{className:styles$1i.appBar,children:[jsxRuntimeExports.jsx("h1",{className:styles$1i.appBarTitle,children:s}),jsxRuntimeExports.jsx("div",{className:styles$1i.appBarAccessories,children:jsxRuntimeExports.jsx("div",{className:styles$1i.appBarAccessory,children:r==="backButton"?jsxRuntimeExports.jsx(BackButton,{}):r})})]}),a]}),BackButton=()=>{const r=useI18n(),s=useNavigate();return jsxRuntimeExports.jsx("button",{className:styles$1i.button,type:"button",onClick:()=>{s(-1)},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:r.formatMessage("_.buttons.back"),children:jsxRuntimeExports.jsx(BackIcon,{})})})},Loading=()=>jsxRuntimeExports.jsx(PaneLayout,{leftAccessory:null,title:jsxRuntimeExports.jsx(Skeleton_memo,{className:styles$1j.title,height:19,lineClassName:styles$1j.rounded}),children:jsxRuntimeExports.jsxs("div",{className:styles$1j.container,children:[jsxRuntimeExports.jsx("div",{className:cx$6(styles$1j.groupHeader,styles$1j.topSpacing),children:jsxRuntimeExports.jsx(Skeleton_memo,{className:styles$1j.groupHeaderTitle,lineClassName:styles$1j.rounded,height:22})}),jsxRuntimeExports.jsx(Skeleton_memo,{className:styles$1j.group,lineClassName:cx$6(styles$1j.groupItem,styles$1j.rounded),count:4}),jsxRuntimeExports.jsx("div",{className:styles$1j.groupHeader,children:jsxRuntimeExports.jsx(Skeleton_memo,{className:styles$1j.groupHeaderTitle,lineClassName:styles$1j.rounded,height:22})}),jsxRuntimeExports.jsx(Skeleton_memo,{className:styles$1j.group,lineClassName:cx$6(styles$1j.groupItem,styles$1j.rounded),count:6})]})});var browserPolyfill={exports:{}};(function(r,s){(function(a,i){i(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:commonjsGlobal,function(a){var i,o;if(!((o=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&o.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const x="The message port closed before a response was received.",y=_=>{const E={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(E).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class R extends WeakMap{constructor(G,oe=void 0){super(oe),this.createItem=G}get(G){return this.has(G)||this.set(G,this.createItem(G)),super.get(G)}}const S=U=>U&&typeof U=="object"&&typeof U.then=="function",j=(U,G)=>(...oe)=>{_.runtime.lastError?U.reject(new Error(_.runtime.lastError.message)):G.singleCallbackArg||oe.length<=1&&G.singleCallbackArg!==!1?U.resolve(oe[0]):U.resolve(oe)},T=U=>U==1?"argument":"arguments",A=(U,G)=>function(X,...ee){if(ee.length<G.minArgs)throw new Error(`Expected at least ${G.minArgs} ${T(G.minArgs)} for ${U}(), got ${ee.length}`);if(ee.length>G.maxArgs)throw new Error(`Expected at most ${G.maxArgs} ${T(G.maxArgs)} for ${U}(), got ${ee.length}`);return new Promise((ae,ie)=>{if(G.fallbackToNoCallback)try{X[U](...ee,j({resolve:ae,reject:ie},G))}catch(se){console.warn(`${U} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,se),X[U](...ee),G.fallbackToNoCallback=!1,G.noCallback=!0,ae()}else G.noCallback?(X[U](...ee),ae()):X[U](...ee,j({resolve:ae,reject:ie},G))})},M=(U,G,oe)=>new Proxy(G,{apply(X,ee,ae){return oe.call(ee,U,...ae)}});let P=Function.call.bind(Object.prototype.hasOwnProperty);const L=(U,G={},oe={})=>{let X=Object.create(null),ee={has(ie,se){return se in U||se in X},get(ie,se,Q){if(se in X)return X[se];if(!(se in U))return;let Z=U[se];if(typeof Z=="function")if(typeof G[se]=="function")Z=M(U,U[se],G[se]);else if(P(oe,se)){let J=A(se,oe[se]);Z=M(U,U[se],J)}else Z=Z.bind(U);else if(typeof Z=="object"&&Z!==null&&(P(G,se)||P(oe,se)))Z=L(Z,G[se],oe[se]);else if(P(oe,"*"))Z=L(Z,G[se],oe["*"]);else return Object.defineProperty(X,se,{configurable:!0,enumerable:!0,get(){return U[se]},set(J){U[se]=J}}),Z;return X[se]=Z,Z},set(ie,se,Q,Z){return se in X?X[se]=Q:U[se]=Q,!0},defineProperty(ie,se,Q){return Reflect.defineProperty(X,se,Q)},deleteProperty(ie,se){return Reflect.deleteProperty(X,se)}},ae=Object.create(U);return new Proxy(ae,ee)},D=U=>({addListener(G,oe,...X){G.addListener(U.get(oe),...X)},hasListener(G,oe){return G.hasListener(U.get(oe))},removeListener(G,oe){G.removeListener(U.get(oe))}}),O=new R(U=>typeof U!="function"?U:function(oe){const X=L(oe,{},{getContent:{minArgs:0,maxArgs:0}});U(X)}),B=new R(U=>typeof U!="function"?U:function(oe,X,ee){let ae=!1,ie,se=new Promise(te=>{ie=function(de){ae=!0,te(de)}}),Q;try{Q=U(oe,X,ie)}catch(te){Q=Promise.reject(te)}const Z=Q!==!0&&S(Q);if(Q!==!0&&!Z&&!ae)return!1;const J=te=>{te.then(de=>{ee(de)},de=>{let ce;de&&(de instanceof Error||typeof de.message=="string")?ce=de.message:ce="An unexpected error occurred",ee({__mozWebExtensionPolyfillReject__:!0,message:ce})}).catch(de=>{console.error("Failed to send onMessage rejected reply",de)})};return J(Z?Q:se),!0}),N=({reject:U,resolve:G},oe)=>{_.runtime.lastError?_.runtime.lastError.message===x?G():U(new Error(_.runtime.lastError.message)):oe&&oe.__mozWebExtensionPolyfillReject__?U(new Error(oe.message)):G(oe)},F=(U,G,oe,...X)=>{if(X.length<G.minArgs)throw new Error(`Expected at least ${G.minArgs} ${T(G.minArgs)} for ${U}(), got ${X.length}`);if(X.length>G.maxArgs)throw new Error(`Expected at most ${G.maxArgs} ${T(G.maxArgs)} for ${U}(), got ${X.length}`);return new Promise((ee,ae)=>{const ie=N.bind(null,{resolve:ee,reject:ae});X.push(ie),oe.sendMessage(...X)})},W={devtools:{network:{onRequestFinished:D(O)}},runtime:{onMessage:D(B),onMessageExternal:D(B),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},V={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return E.privacy={network:{"*":V},services:{"*":V},websites:{"*":V}},L(_,W,E)};a.exports=y(chrome)}else a.exports=globalThis.browser})})(browserPolyfill);var browserPolyfillExports=browserPolyfill.exports;const browser=getDefaultExportFromCjs(browserPolyfillExports),AUTH_ORIGIN="https://www.any.do/",AUTH_COOKIE_NAME="web-extension.token",GOOGLE_CLIENT_ID=SETTINGS_GOOGLE_CLIENT_ID,LS_WEB_EXTENSION_BADGE_TEXT="web-extension.badge.today-count",AUTH_COOKIE_UPDATED="auth-cookie-updated";function err(r){const s=new Error(r);if(s.stack===void 0)try{throw s}catch{}return s}var err_1=err,Recoil_err=err_1;function raiseError(r,s){if(s!=null){const a=s.path.toString(),i=s.message;throw Recoil_err(`[refine.js (path=${a}, message=${i})]: ${r}`)}throw Recoil_err(`[refine.js (null result)]: ${r}`)}function assertion(r,s="assertion error"){return a=>{const i=r(a);return i.type==="success"?i.value:raiseError(s,i)}}function coercion(r,s){return a=>{const i=r(a);return s!=null&&s(i),i.type==="success"?i.value:null}}var Refine_API={assertion,coercion};function _defineProperty$1(r,s,a){return s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}class Path{constructor(s=null,a="<root>"){_defineProperty$1(this,"parent",void 0),_defineProperty$1(this,"field",void 0),this.parent=s,this.field=a}extend(s){return new Path(this,s)}toString(){const s=[];let a=this;for(;a!=null;){const{field:i,parent:o}=a;s.push(i),a=o}return s.reverse().join("")}}function success(r,s){return{type:"success",value:r,warnings:s}}function failure(r,s){return{type:"failure",message:r,path:s}}function compose(r,s){return(a,i=new Path)=>{const o=r(a,i);return o.type==="failure"?o:s(o,i)}}var Refine_Checkers={Path,success,failure,compose},Refine_Checkers_1=Refine_Checkers.Path,Refine_Checkers_2=Refine_Checkers.success,Refine_Checkers_3=Refine_Checkers.failure,Refine_Checkers_4=Refine_Checkers.compose,Refine_Checkers$1=Object.freeze({__proto__:null,Path:Refine_Checkers_1,success:Refine_Checkers_2,failure:Refine_Checkers_3,compose:Refine_Checkers_4});const{Path:Path$1,compose:compose$1,failure:failure$1,success:success$1}=Refine_Checkers$1;function isPlainObject(r){if(Object.prototype.toString.call(r)!=="[object Object]")return!1;const s=Object.getPrototypeOf(r);return s===null||s===Object.prototype}function array(r){return(s,a=new Path$1)=>{if(!Array.isArray(s))return failure$1("value is not an array",a);const i=s.length,o=new Array(i),x=[];for(let y=0;y<i;y++){const _=s[y],E=r(_,a.extend(`[${y}]`));if(E.type==="failure")return failure$1(E.message,E.path);o[y]=E.value,E.warnings.length!==0&&x.push(...E.warnings)}return success$1(o,x)}}function tuple(...r){return(s,a=new Path$1)=>{if(!Array.isArray(s))return failure$1("value is not an array",a);const i=new Array(r.length),o=[];for(const[x,y]of r.entries()){const _=y(s[x],a.extend(`[${x}]`));if(_.type==="failure")return failure$1(_.message,_.path);i[x]=_.value,_.warnings.length!==0&&o.push(..._.warnings)}return success$1(i,o)}}function dict(r){return(s,a=new Path$1)=>{if(typeof s!="object"||s===null||!isPlainObject(s))return failure$1("value is not an object",a);const i={},o=[];for(const[x,y]of Object.entries(s)){const _=r(y,a.extend(`.${x}`));if(_.type==="failure")return failure$1(_.message,_.path);i[x]=_.value,_.warnings.length!==0&&o.push(..._.warnings)}return success$1(i,o)}}class OptionalProperty{constructor(s){_defineProperty$1(this,"checker",void 0),this.checker=s}}function optional(r){return new OptionalProperty((s,a=new Path$1)=>{const i=r(s,a);return i.type==="failure"?{...i,message:"(optional property) "+i.message}:i})}function object(r){const s=Object.keys(r);return(a,i=new Path$1)=>{if(typeof a!="object"||a===null||!isPlainObject(a))return failure$1("value is not an object",i);const o={},x=[];for(const y of s){const _=r[y];let E,R;if(_ instanceof OptionalProperty){if(E=_.checker,!a.hasOwnProperty(y))continue;R=a[y]}else E=_,R=a.hasOwnProperty(y)?a[y]:void 0;const S=E(R,i.extend(`.${y}`));if(S.type==="failure")return failure$1(S.message,S.path);o[y]=S.value,S.warnings.length!==0&&x.push(...S.warnings)}return success$1(o,x)}}function set(r){return(s,a=new Path$1)=>{if(!(s instanceof Set))return failure$1("value is not a Set",a);const i=new Set,o=[];for(const x of s){const y=r(x,a.extend("[]"));if(y.type==="failure")return failure$1(y.message,y.path);i.add(y.value),y.warnings.length&&o.push(...y.warnings)}return success$1(i,o)}}function map$1(r,s){return(a,i=new Path$1)=>{if(!(a instanceof Map))return failure$1("value is not a Map",i);const o=new Map,x=[];for(const[y,_]of a.entries()){const E=r(y,i.extend(`[${y}] key`));if(E.type==="failure")return failure$1(E.message,E.path);const R=s(_,i.extend(`[${y}]`));if(R.type==="failure")return failure$1(R.message,R.path);o.set(y,_),x.push(...E.warnings,...R.warnings)}return success$1(o,x)}}function writableArray(r){return compose$1(array(r),({value:s,warnings:a})=>success$1([...s],a))}function writableDict(r){return compose$1(dict(r),({value:s,warnings:a})=>success$1({...s},a))}function writableObject(r){return compose$1(object(r),({value:s,warnings:a})=>success$1({...s},a))}var Refine_ContainerCheckers={array,tuple,object,optional,dict,set,map:map$1,writableArray,writableDict,writableObject},Refine_ContainerCheckers_1=Refine_ContainerCheckers.array,Refine_ContainerCheckers_2=Refine_ContainerCheckers.tuple,Refine_ContainerCheckers_3=Refine_ContainerCheckers.object,Refine_ContainerCheckers_4=Refine_ContainerCheckers.optional,Refine_ContainerCheckers_5=Refine_ContainerCheckers.dict,Refine_ContainerCheckers_6=Refine_ContainerCheckers.set,Refine_ContainerCheckers_7=Refine_ContainerCheckers.map,Refine_ContainerCheckers_8=Refine_ContainerCheckers.writableArray,Refine_ContainerCheckers_9=Refine_ContainerCheckers.writableDict,Refine_ContainerCheckers_10=Refine_ContainerCheckers.writableObject,Refine_ContainerCheckers$1=Object.freeze({__proto__:null,array:Refine_ContainerCheckers_1,tuple:Refine_ContainerCheckers_2,object:Refine_ContainerCheckers_3,optional:Refine_ContainerCheckers_4,dict:Refine_ContainerCheckers_5,set:Refine_ContainerCheckers_6,map:Refine_ContainerCheckers_7,writableArray:Refine_ContainerCheckers_8,writableDict:Refine_ContainerCheckers_9,writableObject:Refine_ContainerCheckers_10});const{assertion:assertion$1}=Refine_API;function tryParseJSONMixed(r,s){if(r==null)return null;try{return JSON.parse(r,s)}catch{return null}}function jsonParserEnforced(r,s){const a=assertion$1(r,s!=null?s:"value is invalid");return i=>a(tryParseJSONMixed(i!=null?i:""))}function jsonParser(r){return s=>{const a=r(tryParseJSONMixed(s));return a.type==="success"?a.value:null}}var Refine_JSON={jsonParserEnforced,jsonParser};const{Path:Path$2,compose:compose$2,failure:failure$2,success:success$2}=Refine_Checkers$1;function mixed(){return MIXED_CHECKER}const MIXED_CHECKER=r=>success$2(r,[]);function literal(r){const s=a=>JSON.stringify(a);return(a,i=new Path$2)=>{var o;return a===r?success$2(r,[]):failure$2(`value is not literal ${(o=s(r))!==null&&o!==void 0?o:"void"}`,i)}}function bool(){return(r,s=new Path$2)=>typeof r=="boolean"?success$2(r,[]):failure$2("value is not a boolean",s)}function number(){return(r,s=new Path$2)=>typeof r=="number"?success$2(r,[]):failure$2("value is not a number",s)}function string(r){return(s,a=new Path$2)=>typeof s!="string"?failure$2("value is not a string",a):r!=null&&!r.test(s)?failure$2(`value does not match regex: ${r.toString()}`,a):success$2(s,[])}function stringLiterals(r){return(s,a=new Path$2)=>{if(typeof s!="string")return failure$2("value must be a string",a);const i=r[s];return i==null?failure$2(`value is not one of ${Object.values(r).join(", ")}`,a):success$2(i,[])}}function date$2(){return(r,s=new Path$2)=>r instanceof Date?isNaN(r)?failure$2("invalid date",s):success$2(r,[]):failure$2("value is not a date",s)}function jsonDate(){return compose$2(string(),({value:r,warnings:s},a)=>{const i=new Date(r);return Number.isNaN(i)?failure$2("value is not valid date string",a):success$2(i,s)})}var Refine_PrimitiveCheckers={mixed,literal,bool,number,string,stringLiterals,date:date$2,jsonDate};const{Path:Path$3,compose:compose$3,failure:failure$3,success:success$3}=Refine_Checkers$1;function asType(r,s){return compose$3(r,({value:a,warnings:i})=>success$3(s(a),i))}function unionFailure(r,s,a){return failure$3(`${r}: ${a.map(i=>i.message).join(", ")}`,s)}function or(r,s){return(a,i=new Path$3)=>{const o=r(a,i);if(o.type==="success")return success$3(o.value,o.warnings);const x=s(a,i);return x.type==="success"?success$3(x.value,x.warnings):unionFailure("value did not match any types in or()",i,[o,x])}}function union(...r){return(s,a=new Path$3)=>{const i=[];for(const o of r){const x=o(s,a);if(x.type==="success")return success$3(x.value,x.warnings);i.push(x)}return unionFailure("value did not match any types in union",a,i)}}function match(...r){return union(...r)}function nullable(r,s){const{nullWithWarningWhenInvalid:a=!1}=s!=null?s:{};return(i,o=new Path$3)=>{if(i==null)return success$3(i,[]);const x=r(i,o);if(x.type==="success")return success$3(x.value,x.warnings);if(a)return success$3(null,[x]);const{message:y,path:_}=x;return failure$3(y,_)}}function voidable(r,s){const{undefinedWithWarningWhenInvalid:a=!1}=s!=null?s:{};return(i,o=new Path$3)=>{if(i===void 0)return success$3(void 0,[]);const x=r(i,o);if(x.type==="success")return success$3(x.value,x.warnings);if(a)return success$3(void 0,[x]);const{message:y,path:_}=x;return failure$3(y,_)}}function withDefault(r,s){return(a,i=new Path$3)=>{if(a==null)return success$3(s,[]);const o=r(a,i);return o.type==="failure"||o.value!=null?o:success$3(s,[])}}function constraint(r,s){return compose$3(r,({value:a,warnings:i},o)=>{const x=s(a),[y,_]=typeof x=="boolean"?[x,"value failed constraint check"]:x;return y?success$3(a,i):failure$3(_,o)})}function lazy(r){return(s,a=new Path$3)=>r()(s,a)}function custom(r,s="failed to return non-null from custom checker."){return(a,i=new Path$3)=>{try{const o=r(a);return o!=null?success$3(o,[]):failure$3(s,i)}catch(o){return failure$3(o.message,i)}}}var Refine_UtilityCheckers={or,union,match,nullable,voidable,withDefault,constraint,asType,lazy,custom};const{assertion:assertion$2,coercion:coercion$1}=Refine_API,{Path:Path$4}=Refine_Checkers$1,{array:array$1,dict:dict$1,map:map$1$1,object:object$1,optional:optional$1,set:set$1,tuple:tuple$1,writableArray:writableArray$1,writableDict:writableDict$1,writableObject:writableObject$1}=Refine_ContainerCheckers$1,{jsonParser:jsonParser$1,jsonParserEnforced:jsonParserEnforced$1}=Refine_JSON,{bool:bool$1,date:date$1$1,jsonDate:jsonDate$1,literal:literal$1,mixed:mixed$1,number:number$1,string:string$1,stringLiterals:stringLiterals$1}=Refine_PrimitiveCheckers,{asType:asType$1,constraint:constraint$1,custom:custom$1,lazy:lazy$1,match:match$1,nullable:nullable$1,or:or$1,union:union$1,voidable:voidable$1,withDefault:withDefault$1}=Refine_UtilityCheckers;var Refine_index={assertion:assertion$2,coercion:coercion$1,jsonParser:jsonParser$1,jsonParserEnforced:jsonParserEnforced$1,Path:Path$4,mixed:mixed$1,literal:literal$1,bool:bool$1,number:number$1,string:string$1,stringLiterals:stringLiterals$1,date:date$1$1,jsonDate:jsonDate$1,asType:asType$1,or:or$1,union:union$1,match:match$1,nullable:nullable$1,voidable:voidable$1,withDefault:withDefault$1,constraint:constraint$1,lazy:lazy$1,custom:custom$1,array:array$1,tuple:tuple$1,dict:dict$1,object:object$1,optional:optional$1,set:set$1,map:map$1$1,writableArray:writableArray$1,writableDict:writableDict$1,writableObject:writableObject$1},Refine_index_5=Refine_index.Path;const AB_SERVICE_STORE_KEY="@anydo/ab-service",abExperimentState=internal_createExperimentsState(AbServiceExperiments);function internal_createExperimentsState(r){const s={};for(const a of Object.values(r))s[a.name]=Recoil_index_8({key:`abService/experiment/${a.name}`,default:z.object(a.properties).parse({}),effects:[RecoilSync_index_2({storeKey:AB_SERVICE_STORE_KEY,itemKey:a.name,refine:i=>{try{return{type:"success",warnings:[],value:z.object(a.properties).parse(i)}}catch(o){let x,y=new Refine_index_5;if(o instanceof ZodError){const[_]=o.errors;x=o.message,y=_.path.reduce((E,R)=>E.extend(R.toString()),y)}else o!=null&&typeof o=="object"&&"message"in o?x=String(o.message):x="Unknown refine error";return{type:"failure",message:x,path:y}}}})]});return s}const AUTH_REDIRECT_URL=new URL("/auth/web-extension/callback",AUTH_ORIGIN).href,AUTH_REDIRECT_URL_GOOGLE=new URL("/auth/web-extension/google/callback",AUTH_ORIGIN).href,AUTH_REDIRECT_URL_FACEBOOK=new URL("/auth/web-extension/facebook/callback",AUTH_ORIGIN).href,APPLE_AUTHORIZE_URL=new URL("/auth/web-extension/apple",AUTH_ORIGIN).href;class AuthWebExtension extends AuthBase{redirectJoinWithEmail(s){browser.tabs.create({url:new URL(`/auth/web-extension/new-user?${new URLSearchParams({email:s,state:JSON.stringify({platform:getPlatformForApi(),referrer:getReferral(),locale:this._i18nLocaleLoader.localeData.locale,client_id:this._clientId,create_predefined_data:{lists:!0,labels:!0},requested_experiments:ABSERVICE_EXPERIMENTS})})}`,AUTH_ORIGIN).href})}async loginWithGoogle(){const s=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:GOOGLE_CLIENT_ID,redirect_uri:AUTH_REDIRECT_URL_GOOGLE,scope:AUTH_GOOGLE_REDIRECT_SCOPE,response_type:"token",state:JSON.stringify({platform:getPlatformForApi(),referrer:getReferral(),locale:this._i18nLocaleLoader.localeData.locale,client_id:this._clientId,create_predefined_data:{lists:!0,labels:!0},requested_experiments:ABSERVICE_EXPERIMENTS})})}`;openNewWindowUrl(s)}async redirectLoginWithFacebook(){const s=`https://www.facebook.com/dialog/oauth?${new URLSearchParams({client_id:SETTINGS_FACEBOOK_APP_ID,redirect_uri:AUTH_REDIRECT_URL_FACEBOOK,scope:SETTINGS_FACEBOOK_PERMISSIONS,response_type:"token",state:JSON.stringify({platform:getPlatformForApi(),referrer:getReferral(),locale:this._i18nLocaleLoader.localeData.locale,client_id:this._clientId,create_predefined_data:{lists:!0,labels:!0},requested_experiments:ABSERVICE_EXPERIMENTS})})}`;openNewWindowUrl(s)}async redirectLoginWithApple(){const s=btoa(JSON.stringify({bundle_identifier:"do.any.desktop",redirect_uri:SETTINGS_AUTH_APPLE_LOGIN_WEB_REDIRECT_URL,app_login_uri:AUTH_REDIRECT_URL,platform:getPlatformForApi(),referrer:getReferral(),locale:this._i18nLocaleLoader.localeData.locale,client_id:this._clientId,create_predefined_data:{lists:!0,labels:!0},requested_experiments:ABSERVICE_EXPERIMENTS})),a=`${APPLE_AUTHORIZE_URL}?${new URLSearchParams({state:s,redirectUrl:SETTINGS_AUTH_APPLE_LOGIN_WEB_REDIRECT_URL})}`;window.open(a)}loginWithFacebook(){throw new Error("Method not implemented.")}finishFacebookRedirectLogin(){throw new Error("Method not implemented.")}redirectLoginWithGoogle(){throw new Error("Method not implemented.")}finishGoogleRedirectLogin(){throw new Error("Method not implemented.")}loginWithApple(){throw new Error("Method not implemented.")}_applyLoginFailure(){super._applyLoginFailure(),AnydoSentry.captureMessage("_applyLoginFailure")}_applyLogout(){super._applyLogout(),AnydoSentry.captureMessage("_applyLogout")}}var styles$1h={root:"_1hu52kp0",logo:"_1hu52kp1",disclaimer:"_1hu52kp2",button:"_1hu52kp3 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk1e _11268mk74 _1fxpvqe8 _1fxpvqec _1fxpvqed"},styles$1g={lightTheme:"_1tcgdma0",darkTheme:"_1tcgdma1"};const Logo=({className:r,...s})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 118 32",className:cx$6(r,styles$1g.darkTheme),...s,children:[jsxRuntimeExports.jsx("path",{d:"m15.4 15-3-9H11l-3 9h7.4zM8.2 0h7.3l8.3 24.1h-5.4L17 19.8H6.6l-1.4 4.3H0L8.2 0zM26.5 5.9H32v2h.7c.8-1.2 2.4-2.4 5.1-2.4 3.3 0 6.8 2.7 6.8 6.5v12.1H39V13.6c0-1.9-1.2-3.2-3.2-3.2s-3.9 1.6-3.9 3.5v10.2h-5.5V5.9zM49.3 27.3h2.1c1.4 0 2.3-.8 2.7-2l.3-.9-7.2-18.5h5.6l4 11.5h.7l3.8-11.5h5.6l-7.7 20.8C58 30 55.7 32 51.9 32h-2.6v-4.7z",fill:"#fff"}),jsxRuntimeExports.jsx("path",{d:"M112.8 15c0 .9-.3 1.8-.8 2.5s-1.2 1.3-2 1.7c-.8.3-1.7.4-2.6.3-.9-.2-1.7-.6-2.3-1.2-.6-.6-1.1-1.4-1.2-2.3-.2-.9-.1-1.8.3-2.6.3-.8.9-1.5 1.7-2s1.6-.8 2.5-.8c1.2 0 2.3.5 3.2 1.3.8.8 1.2 1.9 1.2 3.1zm-4.5 9.5c1.9 0 3.7-.6 5.3-1.6 1.6-1 2.8-2.5 3.5-4.3s.9-3.7.5-5.5c-.4-1.8-1.3-3.5-2.6-4.9s-3-2.2-4.9-2.6c-1.8-.4-3.8-.2-5.5.5-1.7.7-3.2 1.9-4.3 3.5-1 1.6-1.6 3.4-1.6 5.3 0 2.5 1 4.9 2.8 6.7 1.9 1.9 4.3 2.9 6.8 2.9z",fill:"#fff"}),jsxRuntimeExports.jsx("path",{d:"M71.4 24.3c2.4-.8 3.6-3.3 2.9-5.7-.8-2.4-3.3-3.6-5.7-2.9-2.4.8-3.6 3.3-2.9 5.7.8 2.4 3.4 3.7 5.7 2.9z",fill:"#fff"}),jsxRuntimeExports.jsx("path",{d:"M91.6 15c0 .9-.3 1.8-.8 2.5s-1.2 1.3-2 1.6c-.8.3-1.7.4-2.6.3-.9-.2-1.7-.6-2.3-1.2-.6-.6-1.1-1.4-1.2-2.3-.2-.9-.1-1.8.3-2.6.3-.8.9-1.5 1.6-2 .7-.5 1.6-.8 2.5-.8 1.2 0 2.3.5 3.2 1.3.8.9 1.3 2 1.3 3.2zm-10 8.3c1.4.8 3 1.3 4.8 1.3 2 0 3.6-.4 4.9-1.2.1-.1.3-.2.4-.3v1h4.4V0h-5v6.7c-1.2-.7-2.7-1.1-4.5-1.1-1.9 0-3.5.4-4.9 1.2-1.4.8-2.5 2-3.3 3.4-.8 1.5-1.2 3.2-1.2 4.9 0 1.7.4 3.3 1.1 4.8.9 1.4 2 2.6 3.3 3.4z",fill:"#fff"})]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 118 32",className:cx$6(r,styles$1g.lightTheme),...s,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#a)",children:[jsxRuntimeExports.jsx("path",{fill:"#030303",d:"m15.42 14.974-2.963-8.977h-1.364l-3.008 8.977h7.335ZM8.192 0h7.3l8.299 24.077h-5.444l-1.445-4.267H6.613l-1.41 4.267H0L8.192 0ZM26.453 5.924h5.487v2h.7c.783-1.232 2.43-2.445 5.11-2.445 3.306 0 6.758 2.713 6.758 6.498v12.13h-5.496v-10.47c0-1.859-1.212-3.2-3.2-3.2-1.988 0-3.86 1.552-3.86 3.479v10.19h-5.499V5.925ZM49.26 27.287h2.134c1.446 0 2.267-.785 2.75-1.999l.303-.853-7.205-18.511h5.57l3.998 11.53h.685l3.785-11.52h5.638l-7.71 20.775c-1.23 3.328-3.529 5.29-7.339 5.29H49.26v-4.712Z"}),jsxRuntimeExports.jsx("path",{fill:"#030303",fillRule:"evenodd",d:"M112.825 15.02a4.482 4.482 0 0 1-5.354 4.395 4.482 4.482 0 0 1-3.265-6.108 4.478 4.478 0 0 1 7.307-1.454 4.48 4.48 0 0 1 1.312 3.168Zm-4.48 9.52a9.52 9.52 0 1 0-9.517-9.52 9.52 9.52 0 0 0 9.513 9.513l.004.007Z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#0083FF",d:"M71.416 24.324a4.484 4.484 0 1 0-2.773-8.529 4.484 4.484 0 0 0 2.773 8.53Z"}),jsxRuntimeExports.jsx("path",{fill:"#030303",fillRule:"evenodd",d:"M91.58 15.02a4.48 4.48 0 1 1-8.961 0 4.48 4.48 0 0 1 8.961 0Zm-9.98 8.27c1.362.838 2.951 1.25 4.766 1.25 1.953 0 3.589-.412 4.907-1.235.145-.092.286-.186.427-.284v1.024h4.388V0H91.07v6.71c-1.233-.726-2.715-1.082-4.462-1.082-1.89 0-3.525.399-4.933 1.222a8.64 8.64 0 0 0-3.251 3.352 10.079 10.079 0 0 0-1.165 4.874 10.159 10.159 0 0 0 1.15 4.837 8.772 8.772 0 0 0 3.192 3.377Z",clipRule:"evenodd"})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M0 0h117.858v32H0z"})})})]})]}),PermissionRequest=({onRequestPermissions:r})=>{const[s,a]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:styles$1h.root,children:[jsxRuntimeExports.jsx(Logo,{className:styles$1h.logo}),jsxRuntimeExports.jsx("p",{className:styles$1h.disclaimer,children:"Press the button to grant permissions to access your Any.do account."}),jsxRuntimeExports.jsxs("button",{disabled:s,className:styles$1h.button,type:"button",onClick:()=>{a(!0),r()},children:[s&&jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}),"Request permissions"]})]})};async function cookieLogin(r){if("cookies"in browser){const s=await browser.cookies.get({url:AUTH_ORIGIN,name:AUTH_COOKIE_NAME}).catch(a=>(AnydoSentry.captureException(a),null));if(s!=null)return browser.cookies.remove({url:AUTH_ORIGIN,name:AUTH_COOKIE_NAME}),await r.loginWithToken(s.value),!0}return!1}var $r,xr;const _n=class _n{constructor(s,a){yn(this,$r);yn(this,xr);vn(this,$r,a),vn(this,xr,new Map(Object.entries(s)))}static async create(s,a){return new _n(await s.get(a),s)}get length(){return yr(this,xr).size}clear(){yr(this,xr).clear()}getItem(s){var a;return(a=yr(this,xr).get(s))!=null?a:null}key(s){var a;return(a=[...yr(this,xr).keys()].at(s))!=null?a:null}removeItem(s){yr(this,xr).delete(s),yr(this,$r).remove(s)}setItem(s,a){yr(this,xr).set(s,a),yr(this,$r).set({[s]:a})}};$r=new WeakMap,xr=new WeakMap;let AuthStorage=_n;AnydoSentry.init({app_platform:"web-extension",app_os:"browser",app_window:"browser"});const rootElement=document.getElementById("root"),root$B=createRoot(rootElement),storage=localStorage,notificationManager=new NotificationManager({provider:new WebNotificationProvider}),I18ProviderComponent=({i18n:r,children:s})=>{const{userSettings:a}=useUserSettings(),i=useI18nLocale();return jsxRuntimeExports.jsx(I18nProvider_memo,{locale:i.localeData.locale,messages:i.localeData.messages,timeFormatters:i.localeData.timeFormatters,dateFormat:a.dateFormat,timeFormat:a.timeFormat,weekStartDay:a.isoWeekStartDay,i18n:r,children:s})};async function init(r){const s=await I18nLocaleLoader.create({detectedLocale:"en",storage:localStorage}),{userDetails:a}=await browser.storage.local.get(["userDetails"]),i=new AuthWebExtension({abService:new AbService(localStorage),storage:await AuthStorage.create(browser.storage.local,[AUTH_TOKEN_LS_KEY]),i18nLocaleLoader:s,initialUserDetails:a});i.subscribe("userDetailsUpdate",()=>{browser.storage.local.set({userDetails:i.getUserDetails()})}),i.subscribe("loggedOut",()=>{browser.storage.local.remove("userDetails")}),browser.runtime.onMessage.addListener(S=>{typeof S=="object"&&S!=null&&S.msg===AUTH_COOKIE_UPDATED&&cookieLogin(i)}),i.subscribe("userDetailsUpdate",()=>{browser.storage.local.set({userDetails:i.getUserDetails()})});const o=new Analytics({auth:i,queryParams:new URLSearchParams,storage}),x=new AnydoI18n({locale:s.localeData.locale,messages:s.localeData.messages,timeFormatters:s.localeData.timeFormatters,dateFormat:UserSettingsRecordDateFormat.MM_DD_YY,timeFormat:UserSettingsRecordTimeFormat.CLOCK_12,weekStartDay:DEFAULT_WEEK_START_DAY}),y=new UserSessionStorage({auth:i,storage});function _(S){root$B.render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(DndProvider,{backend:HTML5Backend,children:jsxRuntimeExports.jsx(AnalyticsProvider,{analytics:o,children:jsxRuntimeExports.jsx(I18nLocaleProvider_memo,{i18nLocaleLoader:s,children:jsxRuntimeExports.jsx(AuthProviderMemo,{auth:i,children:jsxRuntimeExports.jsx(UserSessionStorageProvider,{userSessionStorage:y,children:jsxRuntimeExports.jsx(NotificationProvider_memo,{manager:notificationManager,children:jsxRuntimeExports.jsx(DarkModeProvider_memo,{children:jsxRuntimeExports.jsx(MotionConfig,{reducedMotion:"user",children:jsxRuntimeExports.jsx($a093c7e1ec25a057$export$f78649fb9ca566b8,{children:jsxRuntimeExports.jsx(I18ProviderComponent,{i18n:x,children:jsxRuntimeExports.jsx(MiniToastNotificationsProvider,{children:S})})})})})})})})})})})}))}async function E(){await prepareAuth(i),browser.storage.onChanged.addListener((S,j)=>{j==="local"&&AUTH_TOKEN_LS_KEY in S&&S[AUTH_TOKEN_LS_KEY].newValue!==void 0&&i.loginWithToken(S[AUTH_TOKEN_LS_KEY].newValue)}),r({storage,auth:i,i18n:x,renderApp:_})}function R(){_(jsxRuntimeExports.jsx(PermissionRequest,{onRequestPermissions:()=>{browser.permissions.request({permissions:["cookies"],origins:[AUTH_ORIGIN]}).then(S=>{S&&E()})}}))}if(!i.isLoggedIn()&&!await browser.permissions.contains({permissions:["cookies"],origins:[AUTH_ORIGIN]})){R();return}await E()}async function prepareAuth(r){const s=localStorage.getItem("username"),a=localStorage.getItem("password");if(s!=null&&s.length&&(a!=null&&a.length))return localStorage.removeItem("username"),localStorage.removeItem("password"),r.login(s,atob(a));try{if(await cookieLogin(r))return}catch(o){console.log(o)}const{[AUTH_TOKEN_LS_KEY]:i}=await browser.storage.local.get([AUTH_TOKEN_LS_KEY]);i!=null&&localStorage.setItem(AUTH_TOKEN_LS_KEY,i),r.isLoggedIn()&&r.getUserDetails()==null?await initUserAuthFromServer(r):initUserAuthFromServer(r)}async function initUserAuthFromServer(r){try{await r.refreshUserFromServer()}catch(s){if(!(r.getUserDetails()!=null&&AnydoAuthError.isAnydoAuthError(s)&&s.code===AuthStatusCode.NETWORK_UNAVAILABLE))return await r.logout()}}var SyncQueryModelFlag=(r=>(r[r.EQUAL=0]="EQUAL",r[r.NOT=1]="NOT",r[r.EMPTY=2]="EMPTY",r))(SyncQueryModelFlag||{});function useSyncQueryModelById(r,s){const a=reactExports.useMemo(()=>({getValue:i=>{if(s!=null)return i[r].get(s)},getUpdatedValue:(i,{changes:o})=>{if(s!=null)return o[r].has(s)?o[r].get(s):i}}),[s,r]);return useSyncReactSubscription(a)}const EMPTY_ARRAY=[];function useSyncQueryModelsByValue(r,s,a,i=SyncQueryModelFlag.EQUAL){const o=reactExports.useMemo(()=>({getValue:x=>{const y=new Map;if(i===SyncQueryModelFlag.EMPTY)return{map:y,array:EMPTY_ARRAY};const _=[];for(let E of x[r].values())isFlagEqual(E[s],a,i)&&(y.set(E.id,E),_.push(E));return{map:y,array:_}},getUpdatedValue:(x,y)=>{if(y.changes[r].size===0)return x;const{map:_}=x;let E=!1;for(let[R,S]of y.changes[r]){const j=S;_.has(R)?(E=!0,j===void 0?_.delete(R):_.set(R,j)):j!==void 0&&isFlagEqual(j[s],a,i)&&(E=!0,_.set(R,j))}return E?{map:_,array:[..._.values()]}:x}}),[i,s,r,a]);return useSyncReactSubscription(o).array}function isFlagEqual(r,s,a){switch(a){case SyncQueryModelFlag.EQUAL:return r===s;case SyncQueryModelFlag.NOT:return r!==s;case SyncQueryModelFlag.EMPTY:return!1}}function addAttachment({attachmentId:r,globalTaskId:s,url:a,displayName:i,mimeType:o,attachments:x,tasks:y,fileSize:_,duration:E}){try{new URL(a)}catch{throw new Error(`addAttachment() - Invalid url: "${a}"`)}if(y.has(s),x.has(r))throw new Error(`addAttachment(): You cannot add an attachment with a id of "${r}" which already exist`);return{attachment:[new FileAttachmentRecord({creationDate:Date.now(),deleted:0,dirty:1,displayName:i,globalTaskId:s,id:r,mimeType:o==null?null:o,fileSize:_,duration:E,url:a})]}}const syncCounters$6=SyncCounterFields[AttachmentSyncLogic.name];function updateAttachment({model:r,key:s,value:a}){let i="set"in r?FileAttachmentRecord.setImmutable(r,s,a):FileAttachmentRecord.setImmutable(FileAttachmentRecord.create(r),s,a);if(i!==r){if(syncCounters$6!=null&&syncCounters$6.get(s)!=null)throw new Error("updateAttachment(): Should implement");i.dirty=1}return i}function removeAttachment({attachment:r,clientSyncCounter:s}){if(r.deleted!==1)return r=updateAttachment({model:r,clientSyncCounter:s,key:"deleted",value:1}),{attachment:[r]}}const syncCounters$5=SyncCounterFields[SpaceSyncLogic.name];function updateWorkspace({model:r,key:s,value:a,clientSyncCounter:i}){let o="set"in r?SpaceRecord.setImmutable(r,s,a):SpaceRecord.setImmutable(SpaceRecord.create(r),s,a);if(o!==r){if(syncCounters$5!=null){const x=syncCounters$5.get(s);x!=null&&(o[x]=i)}o.dirty=1}return o}function updateWorkspaces({spaces:r,updates:s,clientSyncCounter:a}){const i=new Map,o=[i,r];return s.forEach(x=>{let y=get$6(x.id,o);if(!y){console.warn(`updateWorkspaces(): You try to update Space id of "${x.id}" that doesn't exist`);return}if(y[x.key]!==x.value){const _=updateWorkspace({model:y,key:x.key,value:x.value,clientSyncCounter:a});i.set(x.id,_)}}),{spaces:i}}function get$6(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}async function fetchSyncHttpLeaveBoard(r,s,a){const i=SETTINGS_API_ORIGIN_URL+"/me/boards/leave";if(r==null)throw new Error("fetchSyncHttpLeaveBoard(): Cannot leave board without auth token");const o={boardId:s},x=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",[AUTH_HEADER]:r,...createMetaHeaders()},body:JSON.stringify(o),signal:a});if(!x.ok)throw new Error(`fetchSyncHttpLeaveBoard(): ${x.status} - ${await x.text()}`)}async function fetchSyncHttpRemoveBoardMembers(r,s,a,i){const o=SETTINGS_API_ORIGIN_URL+"/me/boards/members/remove";if(r==null)throw new Error("fetchSyncHttpRemoveBoardMembers(): Cannot leave board without auth token");const x={boardId:s,members:a.map(_=>({memberPuid:_}))},y=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",[AUTH_HEADER]:r,...createMetaHeaders()},body:JSON.stringify(x),signal:i});if(!y.ok)throw new Error(`fetchSyncHttpRemoveBoardMembers(): ${y.status} - ${await y.text()}`)}async function fetchSyncHttpAddBoardMembers(r,s,a,i){const o=SETTINGS_API_ORIGIN_URL+"/me/boards/members/add";if(r==null)throw new Error("fetchSyncHttpAddBoardMembers(): Cannot leave board without auth token");const x=Object.entries(a).map(([E,R])=>({memberPuid:E,permission:R})),y={boardId:s,members:x},_=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",[AUTH_HEADER]:r,...createMetaHeaders()},body:JSON.stringify(y),signal:i});if(!_.ok)throw await createHttpError(_)}async function fetchSyncHttpAddWorkspaceMembers(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpAddWorkspaceMembers",authToken:r,path:"/me/spaces/members/add",body:{spaceId:s,members:a},signal:i})).json()}async function fetchSyncHttpCreateWorkspace({authToken:r,id:s,spaceName:a,spaceDescription:i="",spaceType:o,metadata:x,signal:y,..._}){const E="subscription"in _?_.subscription:void 0,R="subscriptionParams"in _?_.subscriptionParams:void 0;return await(await makePostRequest({requestName:"fetchSyncHttpCreateWorkspace",authToken:r,path:"/me/spaces/create",body:{id:s,name:a,description:i,spaceType:o,subscription:E,subscriptionParams:R,metadata:x},signal:y})).json()}async function fetchSyncHttpWorkspaceSubscription(r,s,a){return await(await makeGetRequest({requestName:"fetchSyncHttpWorkspaceSubscription",authToken:r,path:`/me/spaces/subscription?spaceId=${s}&t=${new Date().getTime()}`,signal:a})).json()}async function fetchSyncHttpUpdateWorkspaceSubscription(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpUpdateWorkspaceSubscription",authToken:r,path:"/me/spaces/subscription/update",body:{spaceId:s,planId:a},signal:i})).json()}async function fetchSyncHttpCancelWorkspaceSubscription(r,s,a){return await(await makePostRequest({requestName:"fetchSyncHttpCancelWorkspaceSubscription",authToken:r,path:"/me/spaces/subscription/cancel",body:{spaceId:s},signal:a})).json()}async function fetchSyncHttpDeleteWorkspace(r,s,a){await makePostRequest({requestName:"fetchSyncHttpDeleteWorkspace",authToken:r,path:"/me/spaces/delete",body:{spaceId:s},signal:a})}async function fetchSyncHttpGetWorkspaceTrialExtensionEligibility(r,s,a){return await(await makeGetRequest({requestName:"fetchSyncHttpGetWorkspaceTrialExtensionEligibility",authToken:r,path:`/me/spaces/trial_extend_eligibility?spaceId=${s}`,signal:a})).json()}async function fetchSyncHttpExtendWorkspaceTrial(r,s,a){return await(await makePostRequest({requestName:"fetchSyncHttpExtendWorkspaceTrial",authToken:r,path:"/me/spaces/extend_trial",body:{spaceId:s},signal:a})).json()}async function fetchSyncHttpRenewWorkspaceSubscription(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpRenewWorkspaceSubscription",authToken:r,path:"/me/spaces/resubscribe",body:{spaceId:s,subscription:a},signal:i})).json()}async function fetchSyncHttpSubscribeWorkspaceSubscription({authToken:r,workspaceId:s,planId:a,campaignId:i,stripeData:o,countryCode:x,signal:y}){return await(await makePostRequest({requestName:"fetchSyncHttpSubscribeWorkspaceSubscription",authToken:r,path:"/me/spaces/stripe/subscribe",body:{spaceId:s,planId:a,campaign:i,stripeData:o,countryCode:x},signal:y})).json()}async function fetchSyncHttpRefreshWorkspaceSubscriptionDataBySetupIntent(r,s,a,i){return await(await makeGetRequest({requestName:"fetchSyncHttpRefreshWorkspaceSubscriptionDataBySetupIntent",authToken:r,path:`/me/spaces/subscription/stripe/setup_intent_result?spaceId=${encodeURIComponent(s)}&setupIntentId=${encodeURIComponent(a)}`,signal:i})).json()}async function fetchSyncHttpUpdateWorkspaceSubscriptionBillingEmail(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpUpdateWorkspaceSubscriptionBillingEmail",authToken:r,path:"/me/spaces/subscription/update_billing_email",body:{spaceId:s,billingEmail:a},signal:i})).json()}async function fetchSyncHttpUpdateWorkspaceSubscriptionBillingHistory(r,s,a){return await(await makeGetRequest({requestName:"fetchSyncHttpUpdateWorkspaceSubscriptionBillingHistory",authToken:r,path:`/me/spaces/subscription/invoices?spaceId=${s}`,signal:a})).json()}async function fetchSyncHttpCustomerDescription(r,s,a){return await(await makeGetRequest({requestName:"fetchSyncHttpCustomerDescription",authToken:r,path:`/me/spaces/subscription/customer_description?spaceId=${s}`,signal:a})).json()}async function fetchSyncHttpUpdateWorkspaceSubscriptionCustomerDescription(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpUpdateWorkspaceSubscriptionCustomerDescription",authToken:r,path:"/me/spaces/subscription/customer_description",body:{spaceId:s,customerDescription:a},signal:i})).json()}async function fetchSyncHttpDeleteBoardTag(r,s,a){await makePostRequest({requestName:"fetchSyncHttpDeleteBoardTag",authToken:r,path:"/me/tags/delete",body:{tagId:s},signal:a})}async function fetchSyncHttpBoardTemplates({authToken:r,spaceId:s,signal:a}){const o=await(await makeGetRequest({requestName:"fetchSyncHttpBoardTemplates",authToken:r,path:`/me/boards/templates${s?`?spaceId=${s}`:""}`,signal:a})).json();return{tags:o.tags,templates:o.templates,teamTypeToTags:o.team_type_to_tags}}async function fetchSyncHttpCalculateFirstOccurrence(r,s,a,i){const o=SETTINGS_API_ORIGIN_URL+"/calculate_first_occurrence";if(r==null)throw new Error("fetchSyncHttpCalculateFirstOccurrence(): No auth token");const x={dueDate:cardRecordDueDateToString(s),recurrenceConfig:a},y=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",[AUTH_HEADER]:r,...createMetaHeaders()},body:JSON.stringify(x),signal:i});if(!y.ok)throw await createHttpError(y);const{firstOccurrence:_}=await y.json();return{firstOccurrence:cardDueDateFromString(_)}}async function fetchSyncHttpCardActivity(r,s,{locale:a,limit:i,before:o=new Date().getTime(),chatOnly:x=!1,after:y},_){let E=`/me/updates/card/${s}?language=${a}&pageSize=${i}&${y?`after=${y}`:`before=${o}`}`;return x&&(E+="&chatOnly=true"),await(await makeGetRequest({requestName:"fetchSyncHttpCrdActivity",authToken:r,path:E,signal:_})).json()}async function fetchSyncHttpCardAddChatActivity(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpCardAddChatActivity",authToken:r,path:"/me/cards/comment",body:{cardId:s,text:a},signal:i})).json()}async function fetchSyncHttpCardMove(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpCardMove",authToken:r,path:"/me/cards/move",body:{cardIds:s,targetSectionId:a},signal:i})).json()}async function fetchSyncHttpEnablePublicView(r,s,a){return(await makePostRequest({requestName:"fetchSyncHttpEnablePublicView",authToken:r,path:"/me/boards/enable_public_view",body:{boardId:s},signal:a})).json()}async function fetchSyncHttpDisablePublicView(r,s,a){await makePostRequest({requestName:"fetchSyncHttpDisablePublicView",authToken:r,path:"/me/boards/disable_public_view",body:{boardId:s},signal:a})}async function fetchWorkspaceStripeSetupIntent({authToken:r,spaceId:s,signal:a}){return await(await makeGetRequest({requestName:"fetchWorkspaceStripeSetupIntent",authToken:r,path:`/me/spaces/subscription/stripe/setup_intent${s!==void 0?`?${new URLSearchParams({spaceId:s})}`:""}`,signal:a})).json()}async function fetchSyncHttpNotificationCenter(r,{locale:s,limit:a=20,before:i,after:o,importantOnly:x},y){let _=`/me/updates/user_updates?language=${s}&pageSize=${a}&importantOnly=${!!x}${o?`&after=${o}`:`&before=${i||new Date().valueOf()}`}`;return await(await makeGetRequest({requestName:"fetchSyncHttpNotificationCenter",authToken:r,path:_,signal:y})).json()}async function fetchSyncHttpActivityUpdateChangeStatus(r,s,a){await makePostRequest({requestName:"fetchSyncHttpActivityUpdateChangeStatus",authToken:r,path:"/me/user_updates/change_status",signal:a,body:s})}async function fetchSyncHttpActivityUpdateClear(r,s){await makePostRequest({requestName:"fetchSyncHttpActivityUpdateClear",authToken:r,path:"/me/user_updates/clear",signal:s,body:{}})}async function fetchSyncHttpCreateBoardTemplate({boardId:r,authToken:s,values:a,signal:i}){await makePostRequest({requestName:"fetchSyncHttpCreateBoardTemplate",authToken:s,path:"/me/boards/create_template",body:{boardId:r,...a},signal:i})}async function fetchSyncHttpUpdateBoardTemplate({authToken:r,values:s,signal:a}){await makePostRequest({requestName:"fetchSyncHttpUpdateBoardTemplate",authToken:r,path:"/me/boards/edit_template",body:{...s},signal:a})}async function fetchSyncHttpDeleteBoardTemplate({authToken:r,templateId:s,signal:a}){await makePostRequest({requestName:"fetchSyncHttpDeleteBoardTemplate",authToken:r,path:"/me/boards/delete_template",body:{templateId:s},signal:a})}async function fetchSyncHttpInviteWorkspaceMember(r,s,a,i,o){await makePostRequest({requestName:"fetchSyncHttpInviteWorkspaceMember",authToken:r,path:"/me/spaces/invitation_request",body:{spaceId:s,boardId:i,inviteTarget:a},signal:o})}async function fetchSyncHttpWorkspaceInviteAccept(r,s,a){return(await makePostRequest({requestName:"fetchSyncHttpWorkspaceInviteAccept",authToken:r,path:"/me/spaces/invitation_request/accept",body:{updateId:s},signal:a})).json()}async function fetchSyncHttpWorkspaceInviteDeny(r,s,a){return(await makePostRequest({requestName:"fetchSyncHttpWorkspaceInviteDeny",authToken:r,path:"/me/spaces/invitation_request/deny",body:{updateId:s},signal:a})).json()}async function fetchSyncHttpPremiumStripeSubscribe(r,s,a,i){return await(await makePostRequest({requestName:"fetchSyncHttpPremiumStripeSubscribe",authToken:r,path:"/api/v1/subscribe_user/stripe",body:{stripe_plan:s,stripe_data:a},signal:i})).json()}async function fetchSyncHttpPremiumStripePlans({authToken:r,signal:s}){return(await makePostRequest({requestName:"fetchSyncHttpPremiumStripePlans",authToken:r,path:"/api/v1/subscription/stripe_plans",signal:s,body:{requested_plans:[StripePlan.webMonthly2019,StripePlan.web6Month2019,StripePlan.webYearly2019,StripePlan.monthlyNoDiscount,StripePlan.sixMonthsNoDiscount,StripePlan.YearlySevenDaysDiscount]}})).json()}async function fetchSyncHttpSpaceTrialEligibility(r,s){const a=await makeGetRequest({requestName:"fetchSyncHttpCrdActivity",authToken:r,path:"/me/space_trial_eligibility",signal:s});if(!a.ok)throw await createHttpError(a);return await a.json()}async function fetchSyncHttpStripeSetupIntent({authToken:r,signal:s}){return await(await makeGetRequest({requestName:"fetchSyncHttpStripeSetupIntent",authToken:r,path:"/api/v1/subscription/stripe/setup_intent",signal:s})).json()}function anySignal(r){const s=new AbortController;for(const a of r)if(a){if(a.aborted)return s.abort(a.reason),a;a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal})}return s.signal}async function fetchSyncHttpCardChecklistSuggestions({authToken:r,signal:s,...a}){return await(await makePostRequest({requestName:"fetchSyncHttpCardChecklistSuggestions",authToken:r,path:"/me/cards/checklist_item_suggestions",signal:anySignal([AbortSignal.timeout(SYNC_AI_SUGGESTION_TIMEOUT),s]),body:a})).json()}async function fetchSyncHttpSubtaskSuggestions({authToken:r,signal:s,...a}){return await(await makePostRequest({requestName:"fetchSyncHttpSubtaskSuggestions",authToken:r,path:"/me/tasks/subtask_suggestions",signal:anySignal([AbortSignal.timeout(SYNC_AI_SUGGESTION_TIMEOUT),s]),body:a})).json()}const ERROR_UNKNOWN_CARD_ID=10011,ERROR_PAYMENT_INCOMPLETE=10041,ERROR_PAYMENT_REQUIRED=10047,ERROR_PAYMENT_MISSING=10059,ERROR_AI_MODERATION_VIOLATION=10054,ERROR_MAX_MEMBERS_LIMIT=10055,ERROR_MAX_SHARED_BOARDS=10063,ERROR_SUBSCRIPTION_USED_BY_ANOTHER_SPACE=10023,ERROR_SUBSCRIPTION_PAYMENT_INTENT_PROCESSING=10069;async function addWorkspaceMembers({authToken:r,workspaceId:s,members:a}){return await fetchSyncHttpAddWorkspaceMembers(r,s,a)}async function inviteWorkspaceMember({authToken:r,workspaceId:s,email:a,boardId:i}){await fetchSyncHttpInviteWorkspaceMember(r,s,a,i)}function leaveBoard({authToken:r,boardId:s}){return fetchSyncHttpLeaveBoard(r,s)}function removeBoardMembers({authToken:r,boardId:s,members:a}){return fetchSyncHttpRemoveBoardMembers(r,s,a)}function addBoardMembers({authToken:r,boardId:s,members:a}){return fetchSyncHttpAddBoardMembers(r,s,a)}const syncCounters$4=SyncCounterFields[BoardSyncLogic.name];function updateBoard({model:r,key:s,value:a,clientSyncCounter:i}){let o="set"in r?BoardRecord.setImmutable(r,s,a):BoardRecord.setImmutable(BoardRecord.create(r),s,a);if(o!==r){if(syncCounters$4!=null){const x=syncCounters$4.get(s);x!=null&&(o[x]=i)}o.dirty=1}return o}function updateBoards({boards:r,updates:s,clientSyncCounter:a}){const i=new Set,o=new Map,x=[o,r];return s.forEach(y=>{let _=get$5(y.id,x);if(_===void 0){console.warn(`updateBoards(): You try to update board id of "${y.id}" that doesn't exist`);return}if(_.status!==1&&_[y.key]!==y.value){switch(y.key){case"status":i.add(y.id);break;case"name":if(!isBoardNameValid(y.value))return}const E=updateBoard({model:_,key:y.key,value:y.value,clientSyncCounter:a});o.set(y.id,E)}}),{boards:o}}function get$5(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}function isCardNoteValid(r){return r.length<=CARD_NOTE_MAX_LENGTH}function isTagNameValid(r){return r.trim().length===r.length&&r.length<=TAG_NAME_MAX_LENGTH}function createTag({boardId:r,name:s,color:a,boardTags:i}){if(!isTagNameValid(s)){const _=s.length,E=s[0],R=s[s.length-1];throw new Error(`createTag(): "name" is invalid. Given name of length of ${_} & Starts with "${E}" and end with "${R}"`)}const o=Positioning2.getModelWithMaxPosition(Array.from(i.values())),x=o==null?null:o.position,y=Positioning2.getNewLast(x);return TeamsTagRecord.create({id:createGlobalModelId("uuid4"),boardId:r,name:s,dirty:1,status:TeamsTagStatus.ACTIVE,color:a,position:y})}const syncCounters$3=SyncCounterFields[TeamsTagSyncLogic.name];function updateTag({model:r,key:s,value:a,clientSyncCounter:i}){let o="set"in r?TeamsTagRecord.setImmutable(r,s,a):TeamsTagRecord.setImmutable(TeamsTagRecord.create(r),s,a);if(o!==r){if(syncCounters$3!=null){const x=syncCounters$3.get(s);x!=null&&(o[x]=i)}o.dirty=1}return o}function updateTags({tags:r,updates:s,clientSyncCounter:a}){const i=new Map,o=[i,r];return s.forEach(x=>{let y=get$4(x.id,o);if(!y){console.warn(`updateTags(): You try to update tag id of "${x.id}" that doesn't exist`);return}if(y.status!==1&&y[x.key]!==x.value){switch(x.key){case"name":if(!isTagNameValid(x.value))return}const _=updateTag({model:y,key:x.key,value:x.value,clientSyncCounter:a});i.set(x.id,_)}}),{tags:i}}function get$4(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}function updateUser({model:r,key:s,value:a}){let i="set"in r?UserDetailsSyncRecord.setImmutable(r,s,a):UserDetailsSyncRecord.setImmutable(UserDetailsSyncRecord.create(r),s,a);return i!==r&&(i.dirty=1),i}function updateUsers({users:r,updates:s,clientSyncCounter:a}){const i=new Map,o=[i,r];return s.forEach(x=>{let y=get$3(x.id,o);if(!y){console.warn(`updateUsers(): You try to update user id of "${x.id}" that doesn't exist`);return}if(y[x.key]!==x.value){const _=updateUser({model:y,key:x.key,value:x.value,clientSyncCounter:a});i.set(x.id,_)}}),{users:i}}function get$3(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}SyncCounterFields[LabelSyncLogic.name];function updateLabel(r,s,a){if(r.isPredefined)return r;let i;for(let o of a){const[x,y]=o,_=i===void 0?r:i;LabelRecord.isKeyEqual(_,x,y)||(i===void 0?i=LabelRecord.setImmutable(r instanceof LabelRecord?r:LabelRecord.create(r),x,y):LabelRecord.setMutable(i,x,y))}return i===void 0?r:(LabelRecord.setMutable(i,"dirty",1),i)}function updateLabels({labelModelViews:r,store:s}){const a=new Set,i=new Set,o=new Set,x=new Map;for(let _ of r){const E=s.label.get(_.id);x.set(_.id,_),E==null?a.add(_.id):!E.isDeleted&&_.isDeleted?(o.add(_.id),i.add(_.id)):isLabelUpdateDifferent(_,E)&&i.add(_.id)}const y=[];for(let _ of i){const E=x.get(_),R=updateLabel(s.label.get(_),s.clientSyncCounter,[["color",E.color],["isDeleted",E.isDeleted],["name",E.name]]);y.push(R)}for(let _ of a){const E=x.get(_),R=LabelRecord.create({id:_,color:E.color,dirty:1,isDeleted:!1,isPredefined:!1,name:E.name.normalize("NFC")});y.push(R)}return y===void 0?void 0:{label:y}}function isLabelUpdateDifferent(r,s){return r.color!==s.color||r.name!==s.name||r.isDeleted!==s.isDeleted}function areArraysTaskLabelsSameMembers(r,s){if(r==null&&[...s].length===0)return!0;if(r==null)return!1;const a=[...new Set([...r].sort())],i=[...new Set([...s].sort())];if(a.length!==i.length)return!1;for(let o=0;o<a.length;o++)if(a[o]!==i[o])return!1;return!0}function createSubTask({id:r=createGlobalModelId(),parentGlobalTaskId:s,position:a,title:i,tasks:o}){i=i.trim();const x=o.get(s);if(!r.trim())throw new Error("createSubTask(): Cannot create a sub task without an id");if(o.has(r))throw new Error(`createSubTask(): Task's id of "${r}" is already exist`);if(!isTaskFieldValid("title",i))throw new Error(`createSubTask(): title of length ${i.length} is invalid`);if(x==null)throw new Error(`createSubTask(): parentGlobalTaskId of "${s}" doesn't exist`);if(isSubTask(x))throw new Error(`createSubTask(): parentTask's "${s}", is a sub-task. Sub-tasks can only have non sun-tasks as parent`);const y=Date.now();return TaskRecord.create({id:r,categoryId:x.categoryId,parentGlobalTaskId:s,position:a,title:i,creationDate:y,dirty:1})}function getSubTasksGroup({parentGlobalTaskId:r,clientSyncCounter:s,tasks:a}){const i=[];for(let y of a.values())y.parentGlobalTaskId===r&&isSubTaskVisible(y)&&i.push(y);const{updated:o}=Positioning2.healPositionsArray(i,(y,_)=>updateTask({model:y,key:"position",value:_,clientSyncCounter:s})),x=o.length===0?void 0:{task:o};return{group:i,updates:x}}function updateSubTasksGroup({group:r,parentGlobalTaskId:s,clientSyncCounter:a,tasks:i,updatedTasksId:o}){let x=!1;const y=[],_=[];o.forEach(j=>{const T=i.get(j);T!=null&&T.parentGlobalTaskId===s&&isSubTaskVisible(T)&&(x=!0,_.push(T))});let E=r.filter(j=>o.has(j.id)?(x=!0,!1):!0);if(!x)return{group:r,updates:void 0};let R=!1;for(let j of _)R?E.push(j):insertItemToListByPosition(E,j,0).shouldHealPositions&&(R=!0);if(R){const{updated:j}=Positioning2.healPositionsArray(E,(T,A)=>updateTask({model:T,key:"position",value:A,clientSyncCounter:a}));j.length>0&&y.push(...j)}const S=y.length===0?void 0:{task:y};return{group:E,updates:S}}function updateTaskLabels({taskLabelsIds:r,labelsUpdates:s,clientSyncCounter:a,labels:i,task:o}){const x=updateLabels({labelModelViews:s,store:{clientSyncCounter:a,label:i}}),y=x==null?r:r.filter(E=>{const R=i.get(E),S=x.label.find(j=>j.id===E);return S===void 0?R!==void 0&&!R.isDeleted:!S.isDeleted});let _=o;return areArraysTaskLabelsSameMembers(o.labels,y)||(_=updateTask({model:o,key:"labels",value:[...new Set(y)],clientSyncCounter:a})),x===void 0&&_===o?void 0:{label:x==null?void 0:x.label,task:_===o?void 0:[_]}}function isChecklistItemNameValid(r){return r.trim().length===r.length&&r.length>0&&r.length<=CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH}function isChecklistNameValid(r){return r.trim().length===r.length&&r.length>0&&r.length<=CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH}function createChecklistItem({checklistItems:r,checklistId:s,name:a,dueDate:i=null,owners:o=null}){if(!isChecklistItemNameValid(a)){const R=a.length,S=a[0],j=a[a.length-1];throw new Error(`createChecklistItem(): "name" is invalid. Given name of length of ${R} & Starts with "${S}" and end with "${j}"`)}const x=[...r].filter(R=>R.status!==CardCheckListItemStatus.DELETED),y=Positioning2.getModelWithMaxPosition(x),_=y==null?null:y.position,E=Positioning2.getNewLast(_);return CardChecklistItemRecord.create({id:createGlobalModelId("uuid4"),checklistId:s,name:a,dirty:1,status:CardCheckListItemStatus.ACTIVE,position:E,dueDate:i,owners:o})}const syncCounters$2=SyncCounterFields[CardChecklistItemSyncLogic.name];function updateCardChecklistItem({model:r,key:s,value:a,clientSyncCounter:i}){let o="set"in r?CardChecklistItemRecord.setImmutable(r,s,a):CardChecklistItemRecord.setImmutable(CardChecklistItemRecord.create(r),s,a);if(o!==r){if(syncCounters$2!=null){const x=syncCounters$2.get(s);x!=null&&(o[x]=i)}o.dirty=1}return o}function updateCardChecklistItems({checklistItems:r,updates:s,clientSyncCounter:a}){const i=new Map,o=[i,r];return s.forEach(x=>{let y=get$2(x.id,o);if(!y){console.warn(`updateCardChecklistItems(): You try to update CardChecklistItem id of "${x.id}" that doesn't exist`);return}if(y.status!==CardCheckListItemStatus.DELETED&&y[x.key]!==x.value){switch(x.key){case"name":if(!isChecklistItemNameValid(x.value))return}const _=updateCardChecklistItem({model:y,key:x.key,value:x.value,clientSyncCounter:a});i.set(x.id,_)}}),{checklistItems:i}}function get$2(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}function createCardChecklist({cardChecklists:r,cardId:s,name:a}){if(!isChecklistItemNameValid(a)){const _=a.length,E=a[0],R=a[a.length-1];throw new Error(`createCardChecklist(): "name" is invalid. Given name of length of ${_} & Starts with "${E}" and end with "${R}"`)}const i=[...r].filter(_=>_.status!==CardCheckListStatus.DELETED),o=Positioning2.getModelWithMaxPosition(i),x=o==null?null:o.position,y=Positioning2.getNewLast(x);return CardChecklistRecord.create({id:createGlobalModelId("uuid4"),cardId:s,name:a,dirty:1,status:CardCheckListStatus.ACTIVE,position:y})}const syncCounters$1=SyncCounterFields[CardChecklistSyncLogic.name];function updateCardChecklist({model:r,key:s,value:a,clientSyncCounter:i}){let o="set"in r?CardChecklistRecord.setImmutable(r,s,a):CardChecklistRecord.setImmutable(CardChecklistRecord.create(r),s,a);if(o!==r){if(syncCounters$1!=null){const x=syncCounters$1.get(s);x!=null&&(o[x]=i)}o.dirty=1}return o}function updateCardChecklists({cardChecklists:r,updates:s,clientSyncCounter:a}){const i=new Map,o=[i,r];return s.forEach(x=>{let y=get$1(x.id,o);if(!y){console.warn(`updateCardChecklists(): You try to update CardChecklist id of "${x.id}" that doesn't exist`);return}if(y.status!==CardCheckListStatus.DELETED&&y[x.key]!==x.value){switch(x.key){case"name":if(!isChecklistNameValid(x.value))return}const _=updateCardChecklist({model:y,key:x.key,value:x.value,clientSyncCounter:a});i.set(x.id,_)}}),{cardChecklists:i}}function get$1(r,s){for(let a of s){const i=a.get(r);if(i!=null)return i}}function createCardAttachment(r){return CardAttachmentRecord.create({...r,dirty:1,status:CardAttachmentStatus.ACTIVE})}const syncCounters=SyncCounterFields[CardAttachmentSyncLogic.name];function removeCardAttachment({model:r,clientSyncCounter:s}){let a="set"in r?CardAttachmentRecord.setImmutable(r,"status",CardAttachmentStatus.DELETED):CardAttachmentRecord.setImmutable(CardAttachmentRecord.create(r),"status",CardAttachmentStatus.DELETED);if(a!==r){if(syncCounters!=null){const i=syncCounters.get("status");i!=null&&(a[i]=s)}a.dirty=1}return a}function getPositionInPositionableGroupAtIndex(r,s,a=r.length){const i=Math.min(s,a);return a===0?Positioning2.NEW_POSITION:i===0?Positioning2.getNewFirst(r[0].position):i===a?Positioning2.getNewLast(r[a-1].position):Positioning2.getPositionBetween(r[i-1].position,r[i].position)}function useSyncTaskAttachments(r){const s=React$6.useContext(AttachmentsContext),{read:a,update:i}=useSyncContext(),o=useSyncQueryModelsByValue("attachment","globalTaskId",r),x=React$6.useMemo(()=>o.filter(E=>E.deleted!==1),[o]),y=React$6.useMemo(()=>{const E=[];return s.attachmentsUploadStates.forEach(R=>{R.taskId===r&&E.push(R)}),E},[s.attachmentsUploadStates,r]),_=React$6.useCallback(E=>{const{attachment:R,clientSyncCounter:S}=a(),j=R.get(E);if(j==null)return;const T=removeAttachment({attachment:j,clientSyncCounter:S});T!=null&&i(T)},[a,i]);return React$6.useEffect(()=>s.onUploadAttachmentComplete(E=>{if(!E.taskId||E.taskId!==r)return;const{attachment:R,task:S}=a(),j=addAttachment({attachmentId:E.fileId,globalTaskId:E.taskId,url:E.url,displayName:E.originalFileName,mimeType:E.mimeType,fileSize:E.fileSize,duration:E.duration,attachments:R,tasks:S});j!=null&&i(j)}),[s,a,r,i]),React$6.useMemo(()=>({attachments:x,attachmentsUploadStates:y,attachmentsUploadErrors:s.attachmentsUploadErrors,abortAttachmentUpload:s.abortAttachmentUpload,removeAttachment:_,uploadAttachments:s.uploadAttachments,resetAttachmentsUploadErrors:s.resetAttachmentsUploadErrors}),[x,y,s.abortAttachmentUpload,s.attachmentsUploadErrors,s.resetAttachmentsUploadErrors,s.uploadAttachments,_])}const asMap=Recoil_index_11({key:"boardMembers/asMap",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{const a=s(cacheTaxonomy.board.byId(r)),i=new Map;return Object.entries((a==null?void 0:a.members)||{}).forEach(o=>i.set(...o)),i}}),sorted=Recoil_index_11({key:"boardMembers/sorted",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var E;const a=s(asMap(r)),{allMap:i}=s(cardSelectors.bySection),o=s(sectionSelectors.byBoardId(r)),x=(E=s(authSelectors.authState))==null?void 0:E.userDetails,y={};o.forEach(R=>{(i.get(R.id)||[]).forEach(j=>{var T;(T=j.owners)==null||T.forEach(A=>{y[A]=(y[A]||0)+1})})});const _=lodashExports.sortBy(Array.from(a.values()),[R=>R.publicUserId===(x==null?void 0:x.id)?0:1,R=>-(y[R.publicUserId]||0),R=>{var S;return(S=R.name)==null?void 0:S.toLocaleLowerCase()}]);return{boardMembers:a,sortedBoardMembers:_}}}),boardMemberSelectors={asMap,sorted},allAsMap$1=Recoil_index_9({key:"tasks/asMap",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const s=new Map;return Object.entries(r(cacheTaxonomy.task.all).dictionary).forEach(a=>s.set(...a)),s}}),titleById=Recoil_index_11({key:"tasks/nameById",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var a;return(a=s(cacheTaxonomy.task.byId(r)))==null?void 0:a.title}}),noteById=Recoil_index_11({key:"tasks/noteById",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var a;return(a=s(cacheTaxonomy.task.byId(r)))==null?void 0:a.note}}),byCategoryId=Recoil_index_11({key:"tasks/byCategoryId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>s(cacheTaxonomy.task.all).list.filter(a=>a.categoryId===r)}),taskSelectors={allAsMap:allAsMap$1,titleById,noteById,byCategoryId},currentUser=Recoil_index_9({key:"users/currentUser",get:({get:r})=>r(cacheTaxonomy.user.all).list[0]}),userSelectors={currentUser},emptyResult=new Map,allAsMap=Recoil_index_9({key:"spaces/asMap",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const s=r(userSelectors.currentUser);if(!s)return emptyResult;const a=r(cacheTaxonomy.space.all).dictionary,i=new Map;return s.currentUserSpaces.forEach(o=>{a[o]&&i.set(o,a[o])}),i}}),activeAsMap=Recoil_index_9({key:"spaces/active/asMap",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const s=r(userSelectors.currentUser);if(!s)return emptyResult;const a=r(cacheTaxonomy.space.all).dictionary,i=new Map;return s.currentUserSpaces.forEach(o=>{var y;const x=a[o];x&&((y=x.paymentStatus)!=null&&y.isActive)&&i.set(o,a[o])}),i}}),trialEligibilityRequestIdState=Recoil_index_8({key:"space/trialEligibility/requestId",default:0}),useRefreshTrialEligibility=()=>Recoil_index_31(({set:r})=>()=>{r(trialEligibilityRequestIdState,s=>s+1)},[]),trialEligibility=Recoil_index_9({key:"space/trialEligibility",get({get:r}){return r(trialEligibilityRequestIdState),fetchSyncHttpSpaceTrialEligibility(r(authSelectors.authToken))}}),intentRequestIdState$1=Recoil_index_10({key:"space/stripe/setupIntent/requestId",default:0}),useRefreshStripeSetupIntent$1=r=>Recoil_index_31(({set:s})=>()=>{s(intentRequestIdState$1(r),a=>a+1)},[r]),stripeSetupIntent$1=Recoil_index_11({key:"space/stripe/setupIntent",get:r=>({get:s})=>(s(intentRequestIdState$1(r)),fetchWorkspaceStripeSetupIntent({authToken:s(authSelectors.authToken)}).then(a=>a.clientSecret))}),stripeSetupIntentForCreate=Recoil_index_9({key:"space/stripe/setupIntent/create",get:({get:r})=>(r(intentRequestIdState$1(null)),fetchWorkspaceStripeSetupIntent({authToken:r(authSelectors.authToken)}).then(s=>s.clientSecret))}),spaceState={useRefreshTrialEligibility,trialEligibility,useRefreshStripeSetupIntent:useRefreshStripeSetupIntent$1,stripeSetupIntent:stripeSetupIntent$1,stripeSetupIntentForCreate},byCardId=Recoil_index_11({key:"spaces/byCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{const a=s(cacheTaxonomy.card.byId(r));if(a){const i=s(cacheTaxonomy.section.byId(a.sectionId));if(i){const o=s(cacheTaxonomy.board.byId(i.boardId));if(o)return s(cacheTaxonomy.space.byId(o.spaceId))}}return null}}),byBoardId=Recoil_index_11({key:"spaces/byBoardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{const a=s(cacheTaxonomy.board.byId(r));return a?s(cacheTaxonomy.space.byId(a.spaceId)):null}}),idByCardId=Recoil_index_11({key:"spaces/idByCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var a;return(a=s(byCardId(r)))==null?void 0:a.id}}),spaceSelectors={allAsMap,activeAsMap,byCardId,idByCardId,byBoardId};var baseEach=_baseEach,isArrayLike$1=isArrayLike_1;function baseMap$1(r,s){var a=-1,i=isArrayLike$1(r)?Array(r.length):[];return baseEach(r,function(o,x,y){i[++a]=s(o,x,y)}),i}var _baseMap=baseMap$1;function baseSortBy$1(r,s){var a=r.length;for(r.sort(s);a--;)r[a]=r[a].value;return r}var _baseSortBy=baseSortBy$1,isSymbol=isSymbol_1;function compareAscending$1(r,s){if(r!==s){var a=r!==void 0,i=r===null,o=r===r,x=isSymbol(r),y=s!==void 0,_=s===null,E=s===s,R=isSymbol(s);if(!_&&!R&&!x&&r>s||x&&y&&E&&!_&&!R||i&&y&&E||!a&&E||!o)return 1;if(!i&&!x&&!R&&r<s||R&&a&&o&&!i&&!x||_&&a&&o||!y&&o||!E)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(r,s,a){for(var i=-1,o=r.criteria,x=s.criteria,y=o.length,_=a.length;++i<y;){var E=compareAscending(o[i],x[i]);if(E){if(i>=_)return E;var R=a[i];return E*(R=="desc"?-1:1)}}return r.index-s.index}var _compareMultiple=compareMultiple$1,arrayMap$2=_arrayMap,baseGet=_baseGet,baseIteratee=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary$2=_baseUnary,compareMultiple=_compareMultiple,identity$1=identity_1,isArray$1=isArray_1;function baseOrderBy$1(r,s,a){s.length?s=arrayMap$2(s,function(x){return isArray$1(x)?function(y){return baseGet(y,x.length===1?x[0]:x)}:x}):s=[identity$1];var i=-1;s=arrayMap$2(s,baseUnary$2(baseIteratee));var o=baseMap(r,function(x,y,_){var E=arrayMap$2(s,function(R){return R(x)});return{criteria:E,index:++i,value:x}});return baseSortBy(o,function(x,y){return compareMultiple(x,y,a)})}var _baseOrderBy=baseOrderBy$1,baseFlatten=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest$1=_baseRest,isIterateeCall=_isIterateeCall,sortBy=baseRest$1(function(r,s){if(r==null)return[];var a=s.length;return a>1&&isIterateeCall(r,s[0],s[1])?s=[]:a>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(r,baseFlatten(s,1),[])}),sortBy_1=sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy_1);function toMapByCardId$1(r){const s=new Map;return Object.values(r).forEach(a=>{var o;const{cardId:i}=a;s.has(i)||s.set(i,[]),(o=s.get(i))==null||o.push(a)}),s}const checklistsGroupedByCardId=Recoil_index_9({key:"cardChecklists/groupedByCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const{dictionary:s}=r(cacheTaxonomy.cardChecklist.all);return{allMap:toMapByCardId$1(s),groupedMap:new Map(Object.entries(s))}}});function toMapByChecklistId(r){const s=new Map;return Object.values(r).forEach(a=>{var o;const{checklistId:i}=a;s.has(i)||s.set(i,[]),(o=s.get(i))==null||o.push(a)}),s}const checklistItemsGroupedByChecklistId=Recoil_index_9({key:"checklistItems/groupedByChecklistId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const{dictionary:s}=r(cacheTaxonomy.checklistItem.all);return{allMap:toMapByChecklistId(s),groupedMap:new Map(Object.entries(s))}}}),countByCardId$1=Recoil_index_11({key:"cardChecklists/countByCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var a,i;return(i=(a=s(checklistsGroupedByCardId).allMap.get(r))==null?void 0:a.length)!=null?i:0}}),withItemsByCardId=Recoil_index_11({key:"cardChecklists/byCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var o;const a=s(checklistItemsGroupedByChecklistId);return((o=s(checklistsGroupedByCardId).allMap.get(r))!=null?o:[]).map(x=>{var _;const y=(_=a.allMap.get(x.id))!=null?_:[];return{checklist:x,items:y}})}}),cardChecklistSelectors={checklistsGroupedByCardId,checklistItemsGroupedByChecklistId,countByCardId:countByCardId$1,withItemsByCardId};function toMapByCardId(r){const s=new Map;return Object.values(r).forEach(a=>{var o;const{cardId:i}=a;s.has(i)||s.set(i,[]),(o=s.get(i))==null||o.push(a)}),s}const groupedByCardId=Recoil_index_9({key:"cardAttachment/groupedByCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:({get:r})=>{const{dictionary:s}=r(cacheTaxonomy.cardAttachment.all);return{allMap:toMapByCardId(s),groupedMap:new Map(Object.entries(s))}}}),countByCardId=Recoil_index_11({key:"cardAttachment/countByCardId",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>({get:s})=>{var a,i;return(i=(a=s(groupedByCardId).allMap.get(r))==null?void 0:a.length)!=null?i:0}}),cardAttachmentSelectors={groupedByCardId,countByCardId},intentRequestIdState=Recoil_index_8({key:"premium/stripe/setupIntent/requestId",default:0}),useRefreshStripeSetupIntent=()=>Recoil_index_31(({set:r})=>()=>{r(intentRequestIdState,s=>s+1)},[]),stripeSetupIntent=Recoil_index_9({key:"premium/stripe/setupIntent",get({get:r}){return r(intentRequestIdState),fetchSyncHttpStripeSetupIntent({authToken:r(authSelectors.authToken)}).then(s=>s.clientSecret)}}),stripePlansRequestIdState=Recoil_index_8({key:"premium/stripe/plans/requestId",default:0}),useRefreshStripePlans=()=>Recoil_index_31(({set:r})=>()=>{r(stripePlansRequestIdState,s=>s+1)},[]),stripePlans=Recoil_index_9({key:"premium/stripe/plans",get({get:r}){return r(stripePlansRequestIdState),fetchSyncHttpPremiumStripePlans({authToken:r(authSelectors.authToken)})}}),inAppProductList=Recoil_index_11({key:"premium/mas/inAppState",get:r=>()=>{const s=AnydoElectronPreload==null?void 0:AnydoElectronPreload.inAppPurchaseMas;assertNonNullable(s);const a=s.read()[r];if(a)return a;const i=new Promise(o=>{const x=s.subscribe(y=>{const _=y[r];if(_)try{x()}finally{o(_)}})});return s.fetchMasProductsIfNeeded(),i}}),premiumState={useRefreshStripeSetupIntent,stripeSetupIntent,useRefreshStripePlans,stripePlans,inAppProductList};function getMembers(r,s){var a;return(a=s.get(r))==null?void 0:a.members}function useSyncSpaceMembers(r){const s=React$6.useMemo(()=>({getValue:o=>getMembers(r,o.space),getUpdatedValue:(o,x)=>getMembers(r,x.store.space)}),[r]),a=useSyncReactSubscription(s);return{members:React$6.useMemo(()=>new Map(Object.entries(a||{})),[a])}}function useSyncAddWorkspaceMembers(r){const s=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),{update:a}=reactExports.useContext(SyncContext),i=useSyncQueryModelById("space",r);return reactExports.useCallback(async function(x){if(!i)throw new Error("Invariant");const y=await addWorkspaceMembers({authToken:s,workspaceId:i.id,members:x}),_=i.set("members",y).set("dirty",1);return a({space:[_]}),y},[s,a,i])}function useSyncInviteWorkspaceMember(r){const s=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO();return reactExports.useCallback(async function(i,o){r&&await inviteWorkspaceMember({authToken:s,workspaceId:r,email:i,boardId:o})},[s,r])}function useSyncUpdateSpaces(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{space:i,clientSyncCounter:o}=r(),x=updateWorkspaces({spaces:i,clientSyncCounter:o,updates:a});x.spaces.size>0&&s({space:x.spaces.values()})},[r,s])}function useSyncCreateWorkspace(){var o;const{update:r,read:s}=reactExports.useContext(SyncContext),a=useAuth(),i=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO();return reactExports.useCallback(async function(y){var R;const _=await fetchSyncHttpCreateWorkspace({authToken:i,...y}),E=(R=a.userDetails)==null?void 0:R.id;if(E){const S=s().user.get(E);S&&r({space:[SpaceRecord.create(_).set("metadataSyncCounter",s().clientSyncCounter).set("dirty",1)],user:[{...S,currentUserSpaces:[...S.currentUserSpaces,_.id],dirty:1}]})}return _},[(o=a.userDetails)==null?void 0:o.id,i,s,r])}function useSyncWorkspaceSubscription(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),s=useUnmountSignal(),a=React$6.useCallback(P=>fetchSyncHttpWorkspaceSubscription(r,P,s()),[r,s]),i=React$6.useCallback((P,L)=>fetchSyncHttpUpdateWorkspaceSubscription(r,P,L,s()),[r,s]),o=React$6.useCallback(P=>fetchSyncHttpCancelWorkspaceSubscription(r,P,s()),[r,s]),x=React$6.useCallback((P,L)=>fetchSyncHttpRenewWorkspaceSubscription(r,P,L,s()),[r,s]),y=React$6.useCallback((P,L)=>fetchSyncHttpRefreshWorkspaceSubscriptionDataBySetupIntent(r,P,L,s()),[r,s]),_=React$6.useCallback(({workspaceId:P,planId:L,campaignId:D,setupIntentId:O,countryCode:B})=>fetchSyncHttpSubscribeWorkspaceSubscription({authToken:r,workspaceId:P,planId:L,campaignId:D,stripeData:O?{setupIntentId:O}:void 0,countryCode:B}),[r]),E=React$6.useCallback((P,L)=>fetchSyncHttpGetWorkspaceTrialExtensionEligibility(r,P,L),[r]),R=React$6.useCallback(P=>fetchSyncHttpExtendWorkspaceTrial(r,P,s()),[r,s]),S=React$6.useCallback(P=>fetchSyncHttpDeleteWorkspace(r,P,s()),[r,s]),j=React$6.useCallback((P,L)=>fetchSyncHttpUpdateWorkspaceSubscriptionBillingEmail(r,P,L,s()),[r,s]),T=React$6.useCallback((P,L)=>fetchSyncHttpUpdateWorkspaceSubscriptionCustomerDescription(r,P,L,s()),[r,s]),A=React$6.useCallback(P=>fetchSyncHttpUpdateWorkspaceSubscriptionBillingHistory(r,P,s()),[r,s]),M=React$6.useCallback(P=>fetchSyncHttpCustomerDescription(r,P,s()),[r,s]);return{fetchWorkspaceSubscription:a,updateWorkspaceSubscriptionPlan:i,deleteWorkspace:S,cancelWorkspaceSubscription:o,renewWorkspaceSubscription:x,refreshWorkspaceSubscriptionBySetupIntentId:y,subscribeWorkspaceSubscription:_,getTrialExtensionEligibility:E,updateBillingEmail:j,updateCustomerDescription:T,fetchBillingHistory:A,fetchCustomerDescription:M,extendTrial:R}}function useSyncWorkspaceSetupIntent(r){const s=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),[a,i]=React$6.useState(),o=React$6.useRef(),[x,y]=React$6.useState(),_=React$6.useCallback(E=>{o.current&&o.current.abort();const R=new AbortController;o.current=R,y("fetching"),fetchWorkspaceStripeSetupIntent({authToken:s,spaceId:E,signal:R.signal}).then(S=>{i(S.clientSecret),y("success")}).catch(()=>{R.signal.aborted||y("fail")})},[s]);return React$6.useEffect(()=>(r&&_(r),()=>{var E;(E=o.current)==null||E.abort(),i(void 0),y(void 0)}),[_,r]),[{status:x,clientSecret:a},React$6.useCallback(()=>{assertNonNullable(r,"useSyncWorkspaceSetupIntent: failed to fetch new setup intent; spaceId is null"),_(r)},[_,r])]}function useSyncCreateWorkspaceSetupIntent(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),[s,a]=React$6.useState(),i=React$6.useRef(),[o,x]=React$6.useState(),y=React$6.useCallback(()=>{i.current&&i.current.abort();const _=new AbortController;i.current=_,x("fetching"),fetchWorkspaceStripeSetupIntent({authToken:r,signal:_.signal}).then(E=>{a(E.clientSecret),x("success")}).catch(()=>{_.signal.aborted||x("fail")})},[r]);return React$6.useEffect(()=>(y(),()=>{var _;(_=i.current)==null||_.abort(),a(void 0),x(void 0)}),[y]),[{status:o,clientSecret:s},y]}const TEAMS_PLANS={us:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:799},year:{plan_id:"teams_yearly_localized2_usd_60",amount:5988},cur:"usd",decimal:2},af:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ax:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},al:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},dz:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},as:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ad:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},ao:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ai:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},aq:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},ag:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ar:{month:{plan_id:"teams_monthly_localized2_ars",amount:33700},year:{plan_id:"teams_yearly_localized2_ars",amount:253200},cur:"ars",decimal:2},am:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},aw:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},au:{month:{plan_id:"teams_monthly_localized2_aud",amount:1e3},year:{plan_id:"teams_yearly_localized2_aud",amount:8400},cur:"aud",decimal:2},at:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},az:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},bs:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bh:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bd:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},bb:{month:{plan_id:"teams_monthly_localized2_usd_9",amount:900},year:{plan_id:"teams_yearly_localized2_usd_72",amount:7200},cur:"usd",decimal:2},by:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},be:{month:{plan_id:"teams_monthly_localized2_eur_8",amount:800},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},bz:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},bj:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bm:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bt:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bo:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ba:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},bw:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},br:{month:{plan_id:"teams_monthly_localized2_brl",amount:2300},year:{plan_id:"teams_yearly_localized2_brl",amount:18e3},cur:"brl",decimal:2},io:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},vg:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},bg:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},bf:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},bi:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},kh:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},cm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ca:{month:{plan_id:"teams_monthly_localized2_cad",amount:900},year:{plan_id:"teams_yearly_localized2_cad",amount:6e3},cur:"cad",decimal:2},cv:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},bq:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ky:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cf:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},td:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cl:{month:{plan_id:"teams_monthly_localized2_clp",amount:5279},year:{plan_id:"teams_yearly_localized2_clp",amount:39576},cur:"clp",decimal:0},cx:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cc:{month:{plan_id:"teams_monthly_localized2_aud",amount:1e3},year:{plan_id:"teams_yearly_localized2_aud",amount:7200},cur:"aud",decimal:2},co:{month:{plan_id:"teams_monthly_localized2_cop",amount:1502e3},year:{plan_id:"teams_yearly_localized2_cop",amount:11257200},cur:"cop",decimal:2},km:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},cg:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cd:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ck:{month:{plan_id:"teams_monthly_localized2_nzd",amount:1200},year:{plan_id:"teams_yearly_localized2_nzd",amount:9600},cur:"nzd",decimal:2},cr:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ci:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},hr:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},cu:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cw:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},cy:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},cz:{month:{plan_id:"teams_monthly_localized2_czk",amount:17700},year:{plan_id:"teams_yearly_localized2_czk",amount:133200},cur:"czk",decimal:2},dk:{month:{plan_id:"teams_monthly_localized2_dkk",amount:7e3},year:{plan_id:"teams_yearly_localized2_dkk",amount:52800},cur:"dkk",decimal:2},dj:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},dm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},do:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ec:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},eg:{month:{plan_id:"teams_monthly_localized2_egp",amount:10700},year:{plan_id:"teams_yearly_localized2_egp",amount:80400},cur:"egp",decimal:2},sv:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},gq:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},er:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ee:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},et:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},fk:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},fo:{month:{plan_id:"teams_monthly_localized2_dkk",amount:7e3},year:{plan_id:"teams_yearly_localized2_dkk",amount:52800},cur:"dkk",decimal:2},fj:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},fi:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},fr:{month:{plan_id:"teams_monthly_localized2_eur_8",amount:800},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},gf:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},pf:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tf:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},ga:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},gm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ge:{month:{plan_id:"teams_monthly_localized2_eur_8",amount:800},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},de:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},gh:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},gi:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},gr:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},gl:{month:{plan_id:"teams_monthly_localized2_dkk",amount:7e3},year:{plan_id:"teams_yearly_localized2_dkk",amount:52800},cur:"dkk",decimal:2},gd:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},gp:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},gu:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},gt:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},gg:{month:{plan_id:"teams_monthly_localized2_gbp",amount:500},year:{plan_id:"teams_yearly_localized2_gbp",amount:3600},cur:"gbp",decimal:2},gn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},gw:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},gy:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ht:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},hm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},hn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},hk:{month:{plan_id:"teams_monthly_localized2_hkd",amount:5600},year:{plan_id:"teams_yearly_localized2_hkd",amount:42e3},cur:"hkd",decimal:2},hu:{month:{plan_id:"teams_monthly_localized2_huf",amount:221300},year:{plan_id:"teams_yearly_localized2_huf",amount:1659600},cur:"huf",decimal:2},is:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},in:{month:{plan_id:"teams_monthly_localized2_inr",amount:17700},year:{plan_id:"teams_yearly_localized2_inr",amount:133200},cur:"inr",decimal:2},id:{month:{plan_id:"teams_monthly_localized2_idr",amount:10665200},year:{plan_id:"teams_yearly_localized2_idr",amount:79929600},cur:"idr",decimal:2},ir:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},iq:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ie:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},im:{month:{plan_id:"teams_monthly_localized2_gbp",amount:500},year:{plan_id:"teams_yearly_localized2_gbp",amount:4800},cur:"gbp",decimal:2},il:{month:{plan_id:"teams_monthly_localized2_ils",amount:2900},year:{plan_id:"teams_yearly_localized2_ils",amount:21600},cur:"ils",decimal:2},it:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},jm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},jp:{month:{plan_id:"teams_monthly_localized2_jpy",amount:880},year:{plan_id:"teams_yearly_localized2_jpy",amount:6600},cur:"jpy",decimal:0},je:{month:{plan_id:"teams_monthly_localized2_gbp",amount:500},year:{plan_id:"teams_yearly_localized2_gbp",amount:3600},cur:"gbp",decimal:2},jo:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},kz:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},ke:{month:{plan_id:"teams_monthly_localized2_kes",amount:62200},year:{plan_id:"teams_yearly_localized2_kes",amount:466800},cur:"kes",decimal:2},ki:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},kw:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},kg:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},la:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},lv:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},lb:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ls:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},lr:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ly:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},li:{month:{plan_id:"teams_monthly_localized2_chf",amount:1100},year:{plan_id:"teams_yearly_localized2_chf",amount:8400},cur:"chf",decimal:2},lt:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},lu:{month:{plan_id:"teams_monthly_localized2_eur_8",amount:800},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},mo:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},mg:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},mw:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},my:{month:{plan_id:"teams_monthly_localized2_myr",amount:3100},year:{plan_id:"teams_yearly_localized2_myr",amount:24e3},cur:"myr",decimal:2},mv:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ml:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},mt:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},mh:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},mq:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},mr:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},mu:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},yt:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},mx:{month:{plan_id:"teams_monthly_localized2_mxn",amount:12400},year:{plan_id:"teams_yearly_localized2_mxn",amount:93600},cur:"mxn",decimal:2},fm:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},md:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},mc:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},mn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},me:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},ms:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ma:{month:{plan_id:"teams_monthly_localized2_mad",amount:5800},year:{plan_id:"teams_yearly_localized2_mad",amount:44400},cur:"mad",decimal:2},mz:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},mm:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},na:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},nr:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},np:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},nl:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},nc:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},nz:{month:{plan_id:"teams_monthly_localized2_nzd",amount:1200},year:{plan_id:"teams_yearly_localized2_nzd",amount:8400},cur:"nzd",decimal:2},ni:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ne:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ng:{month:{plan_id:"teams_monthly_localized2_ngn",amount:257700},year:{plan_id:"teams_yearly_localized2_ngn",amount:1932e3},cur:"ngn",decimal:2},nu:{month:{plan_id:"teams_monthly_localized2_nzd",amount:1200},year:{plan_id:"teams_yearly_localized2_nzd",amount:9600},cur:"nzd",decimal:2},nf:{month:{plan_id:"teams_monthly_localized2_aud",amount:1e3},year:{plan_id:"teams_yearly_localized2_aud",amount:7200},cur:"aud",decimal:2},mp:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},mk:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},no:{month:{plan_id:"teams_monthly_localized2_nok",amount:7900},year:{plan_id:"teams_yearly_localized2_nok",amount:6e4},cur:"nok",decimal:2},om:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pk:{month:{plan_id:"teams_monthly_localized2_pkr",amount:4e4},year:{plan_id:"teams_yearly_localized2_pkr",amount:3e5},cur:"pkr",decimal:2},pw:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ps:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pa:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pg:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},py:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pe:{month:{plan_id:"teams_monthly_localized2_pen",amount:2200},year:{plan_id:"teams_yearly_localized2_pen",amount:16800},cur:"pen",decimal:2},ph:{month:{plan_id:"teams_monthly_localized2_php",amount:32800},year:{plan_id:"teams_yearly_localized2_php",amount:246e3},cur:"php",decimal:2},pn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pl:{month:{plan_id:"teams_monthly_localized2_pln",amount:2600},year:{plan_id:"teams_yearly_localized2_pln",amount:20400},cur:"pln",decimal:2},pt:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},pr:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},qa:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},re:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ro:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},ru:{month:{plan_id:"teams_monthly_localized2_rub",amount:53200},year:{plan_id:"teams_yearly_localized2_rub",amount:399600},cur:"rub",decimal:2},rw:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ws:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sm:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},st:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sa:{month:{plan_id:"teams_monthly_localized2_sar",amount:2800},year:{plan_id:"teams_yearly_localized2_sar",amount:21600},cur:"sar",decimal:2},sn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},rs:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},sc:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sl:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},sg:{month:{plan_id:"teams_monthly_localized2_sgd",amount:1200},year:{plan_id:"teams_yearly_localized2_sgd",amount:9600},cur:"sgd",decimal:2},sx:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sk:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},si:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},sb:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},so:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},za:{month:{plan_id:"teams_monthly_localized2_zar",amount:8800},year:{plan_id:"teams_yearly_localized2_zar",amount:66e3},cur:"zar",decimal:2},gs:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},kr:{month:{plan_id:"teams_monthly_localized2_krw",amount:8443},year:{plan_id:"teams_yearly_localized2_krw",amount:63288},cur:"krw",decimal:0},ss:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},es:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},lk:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},bl:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sh:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},kn:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},lc:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},mf:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},pm:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},vc:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sd:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},sr:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},sz:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},se:{month:{plan_id:"teams_monthly_localized2_sek",amount:8800},year:{plan_id:"teams_yearly_localized2_sek",amount:66e3},cur:"sek",decimal:2},ch:{month:{plan_id:"teams_monthly_localized2_chf",amount:1100},year:{plan_id:"teams_yearly_localized2_chf",amount:8400},cur:"chf",decimal:2},tw:{month:{plan_id:"teams_monthly_localized2_twd",amount:24e3},year:{plan_id:"teams_yearly_localized2_twd",amount:18e4},cur:"twd",decimal:2},tj:{month:{plan_id:"teams_monthly_localized2_eur_8",amount:800},year:{plan_id:"teams_yearly_localized2_eur_72",amount:7200},cur:"eur",decimal:2},tz:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},th:{month:{plan_id:"teams_monthly_localized2_thb",amount:24800},year:{plan_id:"teams_yearly_localized2_thb",amount:186e3},cur:"thb",decimal:2},tl:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},tg:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tk:{month:{plan_id:"teams_monthly_localized2_nzd",amount:1200},year:{plan_id:"teams_yearly_localized2_nzd",amount:8400},cur:"nzd",decimal:2},to:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tt:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tn:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tr:{month:{plan_id:"teams_monthly_localized2_try",amount:2400},year:{plan_id:"teams_yearly_localized2_try",amount:18e3},cur:"try",decimal:2},tm:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_60",amount:6e3},cur:"eur",decimal:2},tc:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},tv:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},um:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},vi:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ug:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},ua:{month:{plan_id:"teams_monthly_localized2_eur_4",amount:400},year:{plan_id:"teams_yearly_localized2_eur_36",amount:3600},cur:"eur",decimal:2},ae:{month:{plan_id:"teams_monthly_localized2_aed",amount:2600},year:{plan_id:"teams_yearly_localized2_aed",amount:20400},cur:"aed",decimal:2},gb:{month:{plan_id:"teams_monthly_localized2_gbp",amount:500},year:{plan_id:"teams_yearly_localized2_gbp",amount:3600},cur:"gbp",decimal:2},uy:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},uz:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},vu:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},va:{month:{plan_id:"teams_monthly_localized2_eur_7",amount:700},year:{plan_id:"teams_yearly_localized2_eur_48",amount:4800},cur:"eur",decimal:2},ve:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},wf:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},eh:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_48",amount:4800},cur:"usd",decimal:2},ye:{month:{plan_id:"teams_monthly_localized2_usd_7",amount:700},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},zm:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2},zw:{month:{plan_id:"teams_monthly_localized2_usd_8",amount:800},year:{plan_id:"teams_yearly_localized2_usd_60",amount:6e3},cur:"usd",decimal:2}},fallbackCountryCode$1="us";function useWorkspaceSubscriptionPlanInfo(r){const{formatMessage:s,formatPrice:a}=useI18n(),{enabled:i}=Recoil_index_20(abExperimentState.WEB_LOCALIZED_PRICING_FEB23),[o,x]=React$6.useState(()=>{if((r==null?void 0:r.countryCode)!=null)return isKeyOf(TEAMS_PLANS,r.countryCode)?r.countryCode:(AnydoSentry.captureMessage(`useWorkspaceSubscriptionPlanInfo(): unknown country code - ${r.countryCode}`,"warning"),fallbackCountryCode$1);if(!i)return fallbackCountryCode$1;const A=getCountryCode();return A!==null&&isKeyOf(TEAMS_PLANS,A)?A:fallbackCountryCode$1}),y=usePreviousValue(r);React$6.useEffect(()=>{(r==null?void 0:r.countryCode)!=null&&r.countryCode!==(y==null?void 0:y.countryCode)&&(isKeyOf(TEAMS_PLANS,r.countryCode)?x(r.countryCode):AnydoSentry.captureMessage(`useWorkspaceSubscriptionPlanInfo(): unknown country code - ${r.countryCode}`,"warning"))},[i,y==null?void 0:y.countryCode,r==null?void 0:r.countryCode]);const _=TEAMS_PLANS[o],E=_.cur,R=Math.floor((1-_.year.amount/(_.month.amount*12))*100),S=_.month.amount*12-_.year.amount,j=React$6.useCallback((A,M)=>({memberCount:P=1,period:L="plan"}={})=>getAmountByPeriod$1(A,M,L)*P,[]),T=React$6.useCallback((A,M,P)=>L=>{if(P===2){const D=j(A,M)(L);return a(D/100,E)}return a(j(A,M)(L),E)},[E,a,j]);return React$6.useMemo(()=>({country:o,currency:E,yearlyPlanDiscountPercentage:R,yearlyPlanDiscountAmount:S,formatPrice:A=>_.decimal===2?a(A/100,E):a(A,E),[TeamsPlanPeriod.MONTH]:{planId:_.month.plan_id,getPrice:j(_.month.amount,TeamsPlanPeriod.MONTH),getPriceFormatted:T(_.month.amount,TeamsPlanPeriod.MONTH,_.decimal),label:s("_.billing.teams-month-plan")},[TeamsPlanPeriod.YEAR]:{planId:_.year.plan_id,getPrice:j(_.year.amount,TeamsPlanPeriod.YEAR),getPriceFormatted:T(_.year.amount,TeamsPlanPeriod.YEAR,_.decimal),label:s("_.billing.teams-year-plan")}}),[o,E,R,S,_.month.plan_id,_.month.amount,_.decimal,_.year.plan_id,_.year.amount,j,T,s,a])}function getAmountByPeriod$1(r,s,a){return a==="month"&&s===TeamsPlanPeriod.YEAR?r/12:r}const FAMILY_PLANS={us:{cur:"usd",maxMembers:4,month:{plan_id:"family_monthly_jan_24",mas_product_id:MacAppStorePlan.Family_Monthly,amount:999},year:{plan_id:"family_yearly_jan_24",mas_product_id:MacAppStorePlan.Family_Yearly,amount:9999},decimal:2}},fallbackCountryCode="us";function useFamilyPlanInfo(r=void 0){const{formatMessage:s,formatPrice:a}=useI18n(),i=!1,[o,x]=React$6.useState(()=>(r==null?void 0:r.countryCode)!=null?isKeyOf(FAMILY_PLANS,r.countryCode)?r.countryCode:(AnydoSentry.captureMessage(`useFamilyPlanInfo(): unknown country code - ${r.countryCode}`,"warning"),fallbackCountryCode):fallbackCountryCode),y=usePreviousValue(r);React$6.useEffect(()=>{(r==null?void 0:r.countryCode)!=null&&r.countryCode!==(y==null?void 0:y.countryCode)&&(isKeyOf(FAMILY_PLANS,r.countryCode)?x(r.countryCode):AnydoSentry.captureMessage(`useFamilyPlanInfo(): unknown country code - ${r.countryCode}`,"warning"))},[i,y==null?void 0:y.countryCode,r==null?void 0:r.countryCode]);const _=FAMILY_PLANS[o],E=_.cur,R=Math.floor((1-_.year.amount/(_.month.amount*12))*100),S=_.month.amount*12-_.year.amount,j=React$6.useCallback((A,M)=>({period:P="plan"}={})=>getAmountByPeriod(A,M,P),[]),T=React$6.useCallback((A,M,P)=>L=>{if(P===2){const D=j(A,M)(L);return a(D/100,E)}return a(j(A,M)(L),E)},[E,a,j]);return React$6.useMemo(()=>({country:o,currency:E,yearlyPlanDiscountPercentage:R,maxMembers:_.maxMembers,yearlyPlanDiscountAmount:S,formatPrice:A=>_.decimal===2?a(A/100,E):a(A,E),[TeamsPlanPeriod.MONTH]:{planId:_.month.plan_id,masProductId:_.month.mas_product_id,getPrice:j(_.month.amount,TeamsPlanPeriod.MONTH),getPriceFormatted:T(_.month.amount,TeamsPlanPeriod.MONTH,_.decimal),label:s("_.billing.teams-month-plan")},[TeamsPlanPeriod.YEAR]:{planId:_.year.plan_id,masProductId:_.year.mas_product_id,getPrice:j(_.year.amount,TeamsPlanPeriod.YEAR),getPriceFormatted:T(_.year.amount,TeamsPlanPeriod.YEAR,_.decimal),label:s("_.billing.teams-year-plan")}}),[o,E,R,_.maxMembers,_.month.plan_id,_.month.mas_product_id,_.month.amount,_.decimal,_.year.plan_id,_.year.mas_product_id,_.year.amount,S,j,T,s,a])}function getAmountByPeriod(r,s,a){return a==="month"&&s===TeamsPlanPeriod.YEAR?r/12:r}function useSyncUpdateBoardsCallback(r,s){return reactExports.useCallback(function(i){const o=r(),x=updateBoards({boards:o.board,updates:i,clientSyncCounter:o.clientSyncCounter});x.boards.size>0&&s({board:x.boards.values()})},[r,s])}function useSyncUpdateBoards(){const r=reactExports.useContext(SyncContext);return useSyncUpdateBoardsCallback(r.read,r.update)}function useSyncBoardMembers(r){return{members:Recoil_index_20(boardMemberSelectors.asMap(r))}}const useSyncBoardSortedMembers=r=>Recoil_index_20(boardMemberSelectors.sorted(r));function useSyncLeaveBoard(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO();return React$6.useCallback(async function(a){await leaveBoard({authToken:r,boardId:a.id})},[r])}function useSyncRemoveBoardMembers(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),{update:s}=reactExports.useContext(SyncContext);return reactExports.useCallback(async function(i,o){const x=o.map(y=>y.publicUserId);await removeBoardMembers({authToken:r,boardId:i.id,members:x}),i instanceof BoardRecord&&s({board:[{...i,members:Object.fromEntries(Object.entries(i.members).filter(([y,_])=>!x.includes(_.publicUserId))),dirty:1}]})},[r,s])}function useSyncAddBoardMembers(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),{update:s}=reactExports.useContext(SyncContext);return reactExports.useCallback(async function(i,o){const{id:x}=i,y={};if(Object.entries(o).forEach(([_,[,E]])=>{y[_]=E}),await addBoardMembers({authToken:r,boardId:x,members:y}),i instanceof BoardRecord){const _={};for(const[E,R]of Object.values(o))_[E.publicUserId]={...E,permissionLevel:R};s({board:[{...i,members:{...i.members,..._},dirty:1}]})}},[r,s])}function useSyncBoardPublicView(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),{update:s}=reactExports.useContext(SyncContext),a=reactExports.useCallback(async function(x){const y=await fetchSyncHttpEnablePublicView(r,x.id),_=x.set("publicViewUrl",y.url).set("dirty",1);s({board:[_]})},[r,s]),i=reactExports.useCallback(async function(x){await fetchSyncHttpDisablePublicView(r,x.id);const y=x.set("publicViewUrl",null).set("dirty",1);s({board:[y]})},[r,s]);return{syncEnablePublicView:a,syncDisablePublicView:i}}const useSyncBoardTemplates=()=>{const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),s=React$6.useCallback(async function(y){return fetchSyncHttpBoardTemplates({authToken:r,spaceId:y})},[r]),a=React$6.useCallback(async function(y,_){return fetchSyncHttpCreateBoardTemplate({authToken:r,boardId:y,values:_})},[r]),i=React$6.useCallback(async function(y){return fetchSyncHttpUpdateBoardTemplate({authToken:r,values:y})},[r]),o=React$6.useCallback(async function(y){return fetchSyncHttpDeleteBoardTemplate({authToken:r,templateId:y})},[r]);return{fetch:s,create:a,update:i,remove:o}};function useBoardTableViewConfig(r){var x,y;const s=Recoil_index_20(cacheTaxonomy.board.byId(r!=null?r:null)),a=useSyncUpdateBoards(),i=(y=(x=s==null?void 0:s.tableViewConfig)==null?void 0:x.columns)!=null&&y.length?s.tableViewConfig:TABLE_VIEW_CONFIG.defaultColumnSettings,o=React$6.useCallback(_=>{s&&a([{id:s.id,key:"tableViewConfig",value:_}])},[s,a]);return[i,o]}const useSyncSectionsByBoard=r=>Recoil_index_20(sectionSelectors.byBoardId(r)),useSyncCardById=r=>Recoil_index_20(cacheTaxonomy.card.byId(r));function useSyncUpdateCardsChecked(){const r=useSyncUpdateCards(),{read:s,update:a}=useSyncContext();return reactExports.useCallback((i,o)=>{const x=new Map,{card:y,clientSyncCounter:_,tasksMyDayEntryIds:E,myDayEntry:R}=s(),S=[];i.forEach(j=>{const T=y.get(j);if(T&&T.isChecked!==o&&(S.push({id:T.id,key:"isChecked",value:o}),o)){S.push({id:T.id,key:"userReminders",value:null});const A=E.get(T.id);if(A&&A.size>0)for(const M of A){const P=R.get(M);P&&P.status===MyDayEntryStatus.UNCHECKED&&(S.push(),x.set(P.id,updateMyDayEntry({model:updateMyDayEntry({model:P,key:"status",value:MyDayEntryStatus.CHECKED,clientSyncCounter:_}),key:"position",value:StatusPositioning.getStatusChangeNewPosition([...R.values()],P),clientSyncCounter:_})))}}}),S.length&&r(S),x.size&&a({myDayEntry:x.values()})},[s,a,r])}const POLLING_INTERVAL=1e4,useSyncCardActivity=(r,s,{enabled:a=!0,isChatOnly:i=!1}={})=>{const o=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),x=React$6.useRef(),y=React$6.useRef(!1),[_,E]=React$6.useState([]),[R,S]=React$6.useState(!1),[j,T]=React$6.useState(!1),[A,M]=React$6.useState(!0),[P,L]=React$6.useState(!0),D=React$6.useRef(5),O=usePreviousValue(i),B=React$6.useCallback(U=>{E(G=>lodashExports.sortBy(lodashExports.uniqBy([...G,...U],"id"),"creationDate"))},[]),N=React$6.useCallback(async U=>{var G;if(!y.current){y.current=!0;try{S(!0);const oe=await fetchSyncHttpCardActivity(o,r,U);return S(!1),L(!0),y.current=!1,oe}catch(oe){if(y.current=!1,isHttpError(oe)&&((G=oe.payload)==null?void 0:G.error_code)===ERROR_UNKNOWN_CARD_ID&&D.current>0)return L(!1),D.current--,await new Promise(X=>setTimeout(X,1e3)),N(U);T(!0),S(!1)}}},[o,r]),F=React$6.useCallback(async()=>{var oe;if(!A)return;const U=(oe=_[0])==null?void 0:oe.creationDate,G=await N({locale:s,limit:20,before:U,chatOnly:i});G&&(B(G.data),M(!G.is_last_page))},[_,N,s,i,A,B]),W=React$6.useCallback(async()=>{var oe;const U=(oe=_[_.length-1])==null?void 0:oe.creationDate,G=await N({locale:s,limit:20,after:U,chatOnly:i});G&&B(G.data)},[_,N,s,i,B]),V=React$6.useCallback(async function(G){try{const oe=await fetchSyncHttpCardAddChatActivity(o,r,G);return B([oe]),oe}catch{}},[o,r,B]);return React$6.useEffect(()=>{O!==i&&(x.current&&clearTimeout(x.current),E([]),M(!0))},[O,i]),React$6.useEffect(()=>{a&&(_.length===0?F():(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{W()},POLLING_INTERVAL)))},[_,F,a,W,i]),{data:_,fetching:R,fetchError:j,canFetchOlder:A,fetch:N,loadOlder:F,loadNewer:W,addChatActivity:V,isBackendCardReady:P}},useSyncMoveCards=()=>{const{cards:r,syncCards:s}=useSyncCards(),a=useSyncUpdateCards();return(i,o)=>{const y=(r.get(o)||[])[0];let _=y?Positioning2.getNewFirst(y.position):Positioning2.NEW_POSITION;const E=[];i.forEach(R=>{const S=s.get(R);S&&(E.push({id:S.id,key:"sectionId",value:o}),E.push({id:S.id,key:"position",value:_})),_=Positioning2.getNewFirst(_)}),E.length&&a(E)}};function useSyncCardsMoveToAnotherBoard(){const{update:r}=React$6.useContext(SyncContext),s=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO();return React$6.useCallback(async(a,i)=>{const o=await fetchSyncHttpCardMove(s,a,i);return r({card:o.map(x=>CardRecord.create(x).set("pendingInitialSync",!0).set("dirty",1))}),o},[s,r])}const useSyncCalculateFirstOccurrence=()=>{const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO();return reactExports.useCallback(({dueDate:s,recurrence:a,signal:i})=>fetchSyncHttpCalculateFirstOccurrence(r,s,a,i),[r])};function useSyncCreateTag(){const{update:r}=reactExports.useContext(SyncContext);return reactExports.useCallback(function(a){const i=createTag(a);return r({tag:[i]}),i},[r])}function useSyncUpdateTags(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{tag:i,clientSyncCounter:o}=r(),x=updateTags({updates:a,tags:i,clientSyncCounter:o});x.tags.size>0&&s({tag:x.tags.values()})},[r,s])}const subscription$1={getValue:r=>r.tag,getUpdatedValue:(r,s)=>s.changes.tag.size>0?new Map(s.store.tag):r},useSyncAllTags=()=>useSyncReactSubscription(subscription$1);function useSyncTags(r){const s=useAuthTokenGetter_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),a=useSyncAllTags(),i=getActiveTagsForBoard(a,r),o=React$6.useMemo(()=>[...i.values()].sort((S,j)=>Positioning2.comparePositions(S.position,j.position)),[i]),x=useSyncCreateTag(),y=useSyncUpdateTags(),_=React$6.useCallback(({name:S,color:j})=>(assertNonNullable(r),x({name:S,color:j,boardId:r,boardTags:i}).id),[r,x,i]),E=React$6.useCallback(function(j,T){y([{id:j,key:"name",value:T.name},{id:j,key:"color",value:T.color}])},[y]),R=React$6.useCallback(async function(j){try{await fetchSyncHttpDeleteBoardTag(s(),j)}finally{y([{id:j,key:"status",value:TeamsTagStatus.ARCHIVED}])}},[s,y]);return{sortedTagsList:o,createTag:_,editTag:E,deleteTag:R}}function getActiveTagsForBoard(r,s){const a=new Map;for(const[i,o]of r)o.status===TeamsTagStatus.ARCHIVED||o.boardId!==s||a.set(i,o);return a}function useSyncUpdateUsers(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{user:i,clientSyncCounter:o}=r(),x=updateUsers({updates:a,users:i,clientSyncCounter:o});x.users.size>0&&s({user:x.users.values()})},[r,s])}const subscription={getValue:r=>r.user,getUpdatedValue:(r,s)=>s.changes.user.size>0?new Map(s.store.user):r};function useSyncUsers(){const r=useSyncReactSubscription(subscription),s=React$6.useMemo(()=>[...r.values()][0]||{hasUnreadNotifications:!1},[r]),a=useSyncUpdateUsers(),i=React$6.useCallback(function(x,y){a([{id:x,key:"hasUnreadNotifications",value:y.hasUnreadNotifications}])},[a]);return{user:s,editUser:i}}function useSyncPremiumStripeSubscribe(){const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),s=reactExports.useRef();return reactExports.useCallback(({planId:a,stripeData:i})=>{var o;return(o=s.current)==null||o.abort(),s.current=new AbortController,fetchSyncHttpPremiumStripeSubscribe(r,a,i,s.current.signal)},[r])}const useSyncUserNotifications2=()=>{const{user:r,editUser:s}=useSyncUsers(),{hasUnreadNotifications:a}=r,i=React$6.useCallback(()=>{s(r.id,{hasUnreadNotifications:!1})},[s,r.id]);return{hasUnreadNotifications:a,dismissUnreadNotifications:i}};function useSyncLabelsIds({labelsIds:r,isPremium:s}){const a=reactExports.useRef(r);areArraysShallowEqual(a.current,r)||(a.current=r),r=a.current;const i=reactExports.useMemo(()=>({getValue:o=>getLabels(o.label,r,s),getUpdatedValue:(o,x)=>x.changes.label.size>0&&o.some(y=>x.changes.label.has(y.id))?getLabels(x.store.label,r,s):o}),[s,r]);return useSyncReactSubscription(i)}function getLabels(r,s,a){const i=[];return s.forEach(o=>{const x=r.get(o);x!=null&&(x.isDeleted||!a&&!x.isPredefined||i.push(x))}),sortLabelsModelViews(i),i}function useUpdateSync(r,s){const a=s.current;reactExports.useEffect(()=>{if(a.length===0)return;const i={task:a};s.current=[],r(i)},[s,r,a])}function useCreateSubTask(r,s){const{track:a}=useAnalytics();return reactExports.useCallback(({parentGlobalTaskId:o,position:x,title:y})=>{const{task:_}=r(),E=createSubTask({parentGlobalTaskId:o,position:x,title:y,tasks:_});a("added_subtask",{extra_str1:E.id,extra_str2:o}),s({task:[E]})},[r,a,s])}function useAppendSubTask(r,s){const{track:a}=useAnalytics();return reactExports.useCallback(({parentGlobalTaskId:o,title:x})=>{var E,R;const{task:y}=r(),_=createSubTask({parentGlobalTaskId:o,position:Positioning2.getNewLast((R=(E=Positioning2.getModelWithMaxPosition(y.values()))==null?void 0:E.position)!=null?R:null),title:x,tasks:y});a("added_subtask",{extra_str1:_.id,extra_str2:o}),s({task:[_]})},[r,a,s])}function useUpdateSubTask(r,s){return reactExports.useCallback((i,o,x)=>{const{task:y,clientSyncCounter:_}=r();let E=y.get(i);if(E==null)throw ReferenceError(`useSyncSubTasks() - useUpdateSubTask(): ${i} doesn't exist`);x!==E[o]&&(E=updateTask({model:E,key:o,value:x,clientSyncCounter:_}),s({task:[E]}))},[r,s])}function useSyncSubTasks(r){const{read:s,update:a}=useSyncContext(),i=reactExports.useRef([]),o=reactExports.useMemo(()=>({getValue:S=>{const{clientSyncCounter:j}=s(),{group:T,updates:A}=getSubTasksGroup({clientSyncCounter:j,parentGlobalTaskId:r,tasks:S.task});return A!=null&&i.current.push(...A.task),T},getUpdatedValue:(S,{store:j,changes:T})=>{const{clientSyncCounter:A}=s(),{group:M,updates:P}=updateSubTasksGroup({group:S,parentGlobalTaskId:r,clientSyncCounter:A,tasks:j.task,updatedTasksId:new Set(T.task.keys())});return P!=null&&i.current.push(...P.task),M}}),[r,s]),x=useSyncQueryModelById("task",r),y=useSyncReactSubscription(o);useUpdateSync(a,i);const _=useCreateSubTask(s,a),E=useAppendSubTask(s,a),R=useUpdateSubTask(s,a);return{list:y,parentTask:x,createSubTask:_,appendSubTask:E,updateSubTask:R}}function useSyncTaskSubTasksCount(r){const s=reactExports.useMemo(()=>({getValue:a=>{var i,o,x,y;return{unchecked:(o=(i=a.tasksUncheckedSubTasksIds.get(r))==null?void 0:i.size)!=null?o:0,checked:(y=(x=a.tasksCheckedSubTasksIds.get(r))==null?void 0:x.size)!=null?y:0}},getUpdatedValue:(a,{changes:i,store:o})=>i.task.size===0?a:fn(a,x=>{var y,_,E,R;x.unchecked=(_=(y=o.tasksUncheckedSubTasksIds.get(r))==null?void 0:y.size)!=null?_:0,x.checked=(R=(E=o.tasksCheckedSubTasksIds.get(r))==null?void 0:E.size)!=null?R:0})}),[r]);return useSyncReactSubscription(s)}function useSyncUpdateTaskLabels(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(({taskId:i,taskLabels:o,labelsUpdates:x})=>{const{label:y,task:_,clientSyncCounter:E}=r(),R=_.get(i);if(R==null)return;const S=updateTaskLabels({taskLabelsIds:o,labelsUpdates:x,clientSyncCounter:E,labels:y,task:R});S!=null&&s(S)},[r,s])}function useSyncUpdateReminder(r){const s=useSyncUpdateTasks();return React$6.useCallback(a=>{s([{id:r,key:"dueDate",value:a.dueDate},{id:r,key:"repeatingMethod",value:a.repeatingMethod},{id:r,key:"alert",value:a.alert}])},[r,s])}function useSyncCreateChecklistItem(){const{update:r}=React$6.useContext(SyncContext);return React$6.useCallback(function(a){const i=createChecklistItem(a);return r({checklistItem:[i]}),i},[r])}function useSyncUpdateChecklistItems(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{checklistItem:i,clientSyncCounter:o}=r(),x=updateCardChecklistItems({checklistItems:i,clientSyncCounter:o,updates:a});x.checklistItems.size>0&&s({checklistItem:x.checklistItems.values()})},[r,s])}function useSyncCreateCardChecklist(){const{update:r}=React$6.useContext(SyncContext);return React$6.useCallback(function(a){const i=createCardChecklist(a);return r({cardChecklist:[i]}),i},[r])}function useSyncUpdateCardChecklists(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{cardChecklist:i,clientSyncCounter:o}=r(),x=updateCardChecklists({cardChecklists:i,clientSyncCounter:o,updates:a});x.cardChecklists.size>0&&s({cardChecklist:x.cardChecklists.values()})},[r,s])}function useSyncCreateCardAttachment(){const{update:r}=React$6.useContext(SyncContext);return React$6.useCallback(function(a){const i=createCardAttachment(a);return r({cardAttachment:[i]}),i},[r])}function useSyncRemoveCardAttachment(){const{read:r,update:s}=useSyncContext();return reactExports.useCallback(a=>{const{cardAttachment:i,clientSyncCounter:o}=r(),x=i.get(a);if(x){const y=removeCardAttachment({clientSyncCounter:o,model:x});y&&s({cardAttachment:[y]})}},[r,s])}function useMemoizedValue(r,s){const a=r[`${s}UpdateTime`],i=reactExports.useRef({updateTime:a,value:r[s]});return r.dirty!==1&&a===i.current.updateTime?i.current.value:(i.current={updateTime:a,value:r[s]},r[s])}const useSyncNotificationCenter=()=>{const r=useAuthToken_PLEASE_DONT_USE_UNLESS_YOU_REALLY_HAVE_TO(),s=React$6.useCallback(y=>fetchSyncHttpNotificationCenter(r,y),[r]),a=React$6.useCallback(y=>fetchSyncHttpActivityUpdateChangeStatus(r,y),[r]),i=React$6.useCallback(()=>fetchSyncHttpActivityUpdateClear(r),[r]),o=React$6.useCallback(y=>fetchSyncHttpWorkspaceInviteAccept(r,y),[r]),x=React$6.useCallback(y=>fetchSyncHttpWorkspaceInviteDeny(r,y),[r]);return{fetch:s,changeStatus:a,clear:i,acceptWorkspaceInvite:o,denyWorkspaceInvite:x}},SvgEmail=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("g",{stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},reactExports.createElement("path",{d:"M3 5.25h18V18a.75.75 0 0 1-.75.75H3.75A.75.75 0 0 1 3 18V5.25Z"}),reactExports.createElement("path",{d:"m21 5.25-9 8.25-9-8.25"}))),SvgFacebook=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("g",{clipPath:"url(#clip0_3638_43118)"},reactExports.createElement("path",{fill:"#1877F2",d:"M12 .6c-14.134.414-15.576 20.247-1.79 22.8h3.58C27.58 20.844 26.131 1.012 12 .6Z"}),reactExports.createElement("path",{fill:"#F1F1F1",d:"M13.79 15.384h2.67l.508-3.315H13.79V9.917c0-.907.444-1.791 1.868-1.791h1.445V5.303c-3.095-.557-6.813-.388-6.894 4.239v2.527H7.3v3.315h2.91v8.015h3.581v-8.015Z"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_3638_43118"},reactExports.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))),SvgGoogle=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...r},reactExports.createElement("g",{clipPath:"url(#clip0_3638_43138)"},reactExports.createElement("path",{fill:"#4285F4",d:"M17.809 9.203c0-.593-.053-1.155-.143-1.703H9.191v3.383h4.853c-.218 1.11-.855 2.047-1.8 2.685v2.25h2.895c1.695-1.568 2.67-3.878 2.67-6.615Z"}),reactExports.createElement("path",{fill:"#34A853",d:"M9.191 18c2.43 0 4.462-.81 5.947-2.182l-2.895-2.25c-.81.54-1.837.87-3.052.87-2.348 0-4.335-1.583-5.048-3.72H1.158v2.317C2.636 15.975 5.673 18 9.191 18Z"}),reactExports.createElement("path",{fill:"#FBBC05",d:"M4.144 10.717A5.222 5.222 0 0 1 3.859 9c0-.6.105-1.178.285-1.718V4.965H1.159a8.896 8.896 0 0 0 0 8.07l2.985-2.318Z"}),reactExports.createElement("path",{fill:"#EA4335",d:"M9.191 3.563c1.328 0 2.513.457 3.45 1.35l2.565-2.566C13.654.894 11.621 0 9.191 0 5.674 0 2.636 2.025 1.16 4.965l2.985 2.317c.712-2.137 2.7-3.72 5.047-3.72Z"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_3638_43138"},reactExports.createElement("path",{fill:"#fff",d:"M0 0h18v18H0z"})))),SvgApple=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:21,fill:"none",viewBox:"0 0 17 21",...r},reactExports.createElement("path",{fill:"currentcolor",d:"M11.375 3.293c.709-.887 1.19-2.077 1.063-3.293-1.037.052-2.303.684-3.036 1.571-.658.76-1.24 2-1.089 3.165 1.165.101 2.328-.582 3.062-1.443ZM12.425 4.964c-1.691-.101-3.13.96-3.937.96-.808 0-2.044-.91-3.382-.885-1.74.026-3.356 1.01-4.24 2.575-1.817 3.132-.479 7.778 1.288 10.329.858 1.261 1.892 2.65 3.255 2.6 1.287-.05 1.792-.833 3.357-.833 1.564 0 2.018.834 3.381.809 1.414-.026 2.297-1.263 3.155-2.526.985-1.438 1.388-2.827 1.413-2.904-.025-.025-2.725-1.06-2.75-4.167-.026-2.6 2.12-3.837 2.22-3.914-1.211-1.791-3.104-1.993-3.76-2.044Z"}));var styles$1f={root:"_2n8fnz0",decoration:"_2n8fnz1",grid:"_2n8fnz2",dot:"_2n8fnz3",title:"_2n8fnz4",slogan:"_2n8fnz5",loginOptions:"_2n8fnz6",loginLoadingIndicator:"_2n8fnz7",loginButton:"_2n8fnz8 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",safariLoginButton:"_2n8fnz9 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",legal:"_2n8fnzb",appleIcon:"_2n8fnza"},styles$1e={root:"_1fbfj730",appBar:"_1fbfj731",appBarTitle:"_1fbfj732",appBarAccessories:"_1fbfj733",button:"_1fbfj734 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",form:"_1fbfj735",textFieldSubmit:"_1fbfj736 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",forgotPassword:"_1fbfj737",resendCode:"_1fbfj73j",submitButton:"_1fbfj739 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk1e _11268mk74 _1fxpvqe8 _1fxpvqec _1fxpvqed",authError:"_1fbfj73a",emailSent:"_1fbfj738",twoFactorInput:"_1fbfj73b",twoFactorInputSlot:"_1fbfj73c",fakeCaret:"_1fbfj73e",fakeCaretLine:"_1fbfj73f",subheader:"_1fbfj73g",text:"_1fbfj73h",resendContainer:"_1fbfj73i"};const SvgArrowRighticon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:13,height:13,fill:"none",viewBox:"0 0 13 13",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M.8 6.6H12M6.4 1 12 6.6l-5.6 5.6"})),AppLoginLoadingIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("div",{className:"AppLoginLoadingIcon"})}),root$A="_root_10imn_1",textField$2="_textField_10imn_6",submitButton$1="_submitButton_10imn_11",enabled="_enabled_10imn_31",isLoading$1="_isLoading_10imn_45",errorText="_errorText_10imn_55",styles$1d={root:root$A,textField:textField$2,submitButton:submitButton$1,enabled,isLoading:isLoading$1,errorText};React$6.memo(function({autoFocus:s,onEmailChecked:a}){const i=useAuth(),o=useI18n(),x=useAnalyticsTrackOnce("funnel_sign_up_started_typing_email"),[y,_]=React$6.useState(""),E=React$6.useMemo(()=>isValidEmail(y),[y]),[R,S]=React$6.useState(!1),j=i.checkEmailStatus===AuthCheckEmailStatus.LOADING;React$6.useEffect(()=>{i.checkEmailStatus===AuthCheckEmailStatus.USER_EXIST?a(!0,y,i.mustUseCaptcha):i.checkEmailStatus===AuthCheckEmailStatus.USER_DOES_NOT_EXIST&&a(!1,y,i.mustUseCaptcha)},[i.checkEmailStatus,i.mustUseCaptcha,y,a]);function T(L){x(),_(L),S(!1)}function A(L){L.preventDefault(),!j&&E&&(i.checkEmail(y),S(!0))}const M=React$6.useMemo(()=>jsxRuntimeExports.jsx("button",{type:"submit",disabled:j||!E,className:cx$6(styles$1d.submitButton,{[styles$1d.isLoading]:j,[styles$1d.enabled]:E}),children:j?jsxRuntimeExports.jsx(AppLoginLoadingIcon,{}):jsxRuntimeExports.jsx("span",{className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgArrowRighticon$1,{})})}),[j,E]),P=R&&getErrorMessage(o,i.checkEmailStatus);return jsxRuntimeExports.jsx("div",{className:styles$1d.root,children:jsxRuntimeExports.jsx("form",{onSubmit:A,children:jsxRuntimeExports.jsx(TextField,{type:"email",autoFocus:s,disabled:j,value:y,onChange:T,placeholder:o.formatMessage("AppLoginEmailChecker.placeholder"),endElement:M,className:styles$1d.textField,theme:"login",mode:P?"error":void 0,errorText:P||void 0})})})});function getErrorMessage(r,s){if(isAuthCheckEmailStatusFailure(s))switch(s){case AuthCheckEmailStatus.BAD_REQUEST:return r.formatMessage("AppLoginEmailChecker.errors.badRequest");case AuthCheckEmailStatus.NETWORK_UNAVAILABLE:return r.formatMessage("AppLoginEmailChecker.errors.connectivity");case AuthCheckEmailStatus.UNKNOWN_ERROR:case AuthCheckEmailStatus.INTERNAL_SERVER_ERROR:default:return r.formatMessage("AppLoginEmailChecker.errors.unknown")}else return null}const CheckEmail=({onEmailVerified:r})=>{const s=useI18n(),{checkEmail:a,checkEmailStatus:i,mustUseCaptcha:o}=useAuth(),x=i===AuthCheckEmailStatus.LOADING,[y,_]=reactExports.useState(!1),[E,R]=reactExports.useState(""),S=isValidEmail(E),j=y&&getErrorMessage(s,i),T=M=>{_(!1),R(M)},A=M=>{M.preventDefault(),_(!0),!x&&S&&a(E)};return reactExports.useEffect(()=>{const M=i===AuthCheckEmailStatus.USER_EXIST;(M||i===AuthCheckEmailStatus.USER_DOES_NOT_EXIST)&&r(E,M,o)},[i,E,o,r]),jsxRuntimeExports.jsx("form",{className:styles$1e.form,onSubmit:A,children:jsxRuntimeExports.jsx(TextField,{autoFocus:!0,type:"email",disabled:x,value:E,onChange:T,placeholder:s.formatMessage("AppLoginEmailChecker.placeholder"),endElement:x?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{color:"primary"}):jsxRuntimeExports.jsx("button",{type:"submit",disabled:!S,className:cx$6(styles$1e.textFieldSubmit),children:jsxRuntimeExports.jsx("span",{className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgArrowRighticon$1,{})})}),theme:"onboarding",mode:j?"error":void 0,errorText:j||void 0})})},ExistingUser=({email:r,onForgotPasswordClick:s,onTwoFactorLogin:a})=>{const i=useI18n(),{preLoginWithEmail2fa:o,status:x,isPending:y}=useAuth(),[_,E]=reactExports.useState(!1),[R,S]=reactExports.useState(""),[j,T]=reactExports.useState(!1),A=P=>{P.preventDefault(),E(!0),T(!0),o(r,R)},M=useEffectEvent(()=>{a(R)});return reactExports.useEffect(()=>{x===AuthStatusCode.TWO_FACTOR_REQUIRED&&M()},[x]),jsxRuntimeExports.jsxs("form",{className:styles$1e.form,onSubmit:A,children:[jsxRuntimeExports.jsx(TextField,{type:"email",disabled:!0,value:r,theme:"onboarding"}),jsxRuntimeExports.jsx(PasswordField,{autoFocus:!0,name:"password",theme:"onboarding",value:R,onChange:S,placeholder:i.formatMessage("AppLoginNewUser.password.placeHolder"),disabled:j||y}),jsxRuntimeExports.jsx("button",{className:styles$1e.forgotPassword,type:"button",onClick:()=>s(),disabled:j||y,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginExistingUser.button.forgotPassword"})}),jsxRuntimeExports.jsxs("button",{className:styles$1e.submitButton,type:"submit",disabled:j||y||R.length===0,children:[j&&jsxRuntimeExports.jsx(Delayed,{ms:500,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginExistingUser.button.signIn"})]}),(()=>{if(!_)return null;switch(x){case AuthStatusCode.NONE:case AuthStatusCode.LOGGED_IN:case AuthStatusCode.TWO_FACTOR_REQUIRED:return null;case AuthStatusCode.UNAUTHORIZED:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.incorrectEmailPassword",values:{newLine:jsxRuntimeExports.jsx("br",{})}})});case AuthStatusCode.NETWORK_UNAVAILABLE:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.networkUnavailable",values:{newLine:jsxRuntimeExports.jsx("br",{})}})});default:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}})})}})()]})},ForgotPassword=({initialEmail:r})=>{const s=useI18n(),{forgotPassword:a,forgotPasswordStatus:i}=useAuth(),o=i===AuthForgotPasswordStatus.LOADING,[x,y]=reactExports.useState(!1),[_,E]=reactExports.useState(r),R=isValidEmail(_),S=M=>{y(!1),E(M)},j=M=>{M.preventDefault(),R&&(y(!0),a(_))},[T,A]=reactExports.useState();return reactExports.useEffect(()=>{i===AuthForgotPasswordStatus.SUCCESS?A({success:!0}):i===AuthForgotPasswordStatus.NETWORK_ERROR&&A({success:!1,errorMessage:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.networkUnavailable",values:{newLine:jsxRuntimeExports.jsx("br",{})}})})},[i,s]),jsxRuntimeExports.jsxs("form",{className:styles$1e.form,onSubmit:j,children:[jsxRuntimeExports.jsx(TextField,{autoFocus:!0,type:"email",disabled:o,value:_,onChange:S,placeholder:s.formatMessage("AppLoginEmailChecker.placeholder"),theme:"onboarding"}),T!=null&&T.success?jsxRuntimeExports.jsx("p",{className:styles$1e.emailSent,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginForgotPassword.email-sent",values:{newLine:jsxRuntimeExports.jsx("br",{})}})}):jsxRuntimeExports.jsxs("button",{className:styles$1e.submitButton,type:"submit",disabled:!isValidEmail||o,children:[o&&jsxRuntimeExports.jsx(Delayed,{ms:500,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginForgotPassword.recover"})]}),x&&(T==null?void 0:T.success)===!1&&jsxRuntimeExports.jsx("p",{className:styles$1e.authError,children:T.errorMessage})]})};var Bt=Object.defineProperty,At=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,gt$5=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,vt=(r,s,a)=>s in r?Bt(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,St=(r,s)=>{for(var a in s||(s={}))gt$5.call(s,a)&&vt(r,a,s[a]);if(Y)for(var a of Y(s))Et.call(s,a)&&vt(r,a,s[a]);return r},bt=(r,s)=>At(r,kt(s)),Pt=(r,s)=>{var a={};for(var i in r)gt$5.call(r,i)&&s.indexOf(i)<0&&(a[i]=r[i]);if(r!=null&&Y)for(var i of Y(r))s.indexOf(i)<0&&Et.call(r,i)&&(a[i]=r[i]);return a};function ht(r){let s=setTimeout(r,0),a=setTimeout(r,10),i=setTimeout(r,50);return[s,a,i]}function _t(r){let s=reactExports.useRef();return reactExports.useEffect(()=>{s.current=r}),s.current}var Ot=18,wt=40,Gt=`${wt}px`,xt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Tt({containerRef:r,inputRef:s,pushPasswordManagerStrategy:a,isFocused:i}){let[o,x]=reactExports.useState(!1),[y,_]=reactExports.useState(!1),[E,R]=reactExports.useState(!1),S=reactExports.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&o&&y,[o,y,a]),j=reactExports.useCallback(()=>{let T=r.current,A=s.current;if(!T||!A||E||a==="none")return;let M=T,P=M.getBoundingClientRect().left+M.offsetWidth,L=M.getBoundingClientRect().top+M.offsetHeight/2,D=P-Ot,O=L;document.querySelectorAll(xt).length===0&&document.elementFromPoint(D,O)===T||(x(!0),R(!0))},[r,s,E,a]);return reactExports.useEffect(()=>{let T=r.current;if(!T||a==="none")return;function A(){let P=window.innerWidth-T.getBoundingClientRect().right;_(P>=wt)}A();let M=setInterval(A,1e3);return()=>{clearInterval(M)}},[r,a]),reactExports.useEffect(()=>{let T=i||document.activeElement===s.current;if(a==="none"||!T)return;let A=setTimeout(j,0),M=setTimeout(j,2e3),P=setTimeout(j,5e3),L=setTimeout(()=>{R(!0)},6e3);return()=>{clearTimeout(A),clearTimeout(M),clearTimeout(P),clearTimeout(L)}},[s,i,a,j]),{hasPWMBadge:o,willPushPWMBadge:S,PWM_BADGE_SPACE_WIDTH:Gt}}var jt=reactExports.createContext({}),Lt=reactExports.forwardRef((r,s)=>{var a=r,{value:i,onChange:o,maxLength:x,textAlign:y="left",pattern:_,placeholder:E,inputMode:R="numeric",onComplete:S,pushPasswordManagerStrategy:j="increase-width",pasteTransformer:T,containerClassName:A,noScriptCSSFallback:M=Nt,render:P,children:L}=a,D=Pt(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),O,B,N,F,W;let[V,U]=reactExports.useState(typeof D.defaultValue=="string"?D.defaultValue:""),G=i!=null?i:V,oe=_t(G),X=reactExports.useCallback(Ce=>{o==null||o(Ce),U(Ce)},[o]),ee=reactExports.useMemo(()=>_?typeof _=="string"?new RegExp(_):_:null,[_]),ae=reactExports.useRef(null),ie=reactExports.useRef(null),se=reactExports.useRef({value:G,onChange:X,isIOS:typeof window<"u"&&((B=(O=window==null?void 0:window.CSS)==null?void 0:O.supports)==null?void 0:B.call(O,"-webkit-touch-callout","none"))}),Q=reactExports.useRef({prev:[(N=ae.current)==null?void 0:N.selectionStart,(F=ae.current)==null?void 0:F.selectionEnd,(W=ae.current)==null?void 0:W.selectionDirection]});reactExports.useImperativeHandle(s,()=>ae.current,[]),reactExports.useEffect(()=>{let Ce=ae.current,he=ie.current;if(!Ce||!he)return;se.current.value!==Ce.value&&se.current.onChange(Ce.value),Q.current.prev=[Ce.selectionStart,Ce.selectionEnd,Ce.selectionDirection];function Ae(){if(document.activeElement!==Ce){me(null),xe(null);return}let Oe=Ce.selectionStart,Ue=Ce.selectionEnd,Ve=Ce.selectionDirection,We=Ce.maxLength,Te=Ce.value,De=Q.current.prev,Le=-1,Fe=-1,Ke;if(Te.length!==0&&Oe!==null&&Ue!==null){let Qe=Oe===Ue,Wt=Oe===Te.length&&Te.length<We;if(Qe&&!Wt){let ct=Oe;if(ct===0)Le=0,Fe=1,Ke="forward";else if(ct===We)Le=ct-1,Fe=ct,Ke="backward";else if(We>1&&Te.length>1){let qt=0;if(De[0]!==null&&De[1]!==null){Ke=ct<De[1]?"backward":"forward";let it=De[0]===De[1]&&De[0]<We;Ke==="backward"&&!it&&(qt=-1)}Le=qt+ct,Fe=qt+ct+1}}Le!==-1&&Fe!==-1&&Le!==Fe&&ae.current.setSelectionRange(Le,Fe,Ke)}let nt=Le!==-1?Le:Oe,qe=Fe!==-1?Fe:Ue,Je=Ke!=null?Ke:Ve;me(nt),xe(qe),Q.current.prev=[nt,qe,Je]}if(document.addEventListener("selectionchange",Ae,{capture:!0}),Ae(),document.activeElement===Ce&&de(!0),!document.getElementById("input-otp-style")){let Oe=document.createElement("style");if(Oe.id="input-otp-style",document.head.appendChild(Oe),Oe.sheet){let Ue="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";$(Oe.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),$(Oe.sheet,`[data-input-otp]:autofill { ${Ue} }`),$(Oe.sheet,`[data-input-otp]:-webkit-autofill { ${Ue} }`),$(Oe.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),$(Oe.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Ne=()=>{he&&he.style.setProperty("--root-height",`${Ce.clientHeight}px`)};Ne();let Be=new ResizeObserver(Ne);return Be.observe(Ce),()=>{document.removeEventListener("selectionchange",Ae,{capture:!0}),Be.disconnect()}},[]);let[Z,J]=reactExports.useState(!1),[te,de]=reactExports.useState(!1),[ce,me]=reactExports.useState(null),[ve,xe]=reactExports.useState(null);reactExports.useEffect(()=>{ht(()=>{var Ce,he,Ae,Ne;(Ce=ae.current)==null||Ce.dispatchEvent(new Event("input"));let Be=(he=ae.current)==null?void 0:he.selectionStart,Oe=(Ae=ae.current)==null?void 0:Ae.selectionEnd,Ue=(Ne=ae.current)==null?void 0:Ne.selectionDirection;Be!==null&&Oe!==null&&(me(Be),xe(Oe),Q.current.prev=[Be,Oe,Ue])})},[G,te]),reactExports.useEffect(()=>{oe!==void 0&&G!==oe&&oe.length<x&&G.length===x&&(S==null||S(G))},[x,S,oe,G]);let ge=Tt({containerRef:ie,inputRef:ae,pushPasswordManagerStrategy:j,isFocused:te}),be=reactExports.useCallback(Ce=>{let he=Ce.currentTarget.value.slice(0,x);if(he.length>0&&ee&&!ee.test(he)){Ce.preventDefault();return}typeof oe=="string"&&he.length<oe.length&&document.dispatchEvent(new Event("selectionchange")),X(he)},[x,X,oe,ee]),ye=reactExports.useCallback(()=>{var Ce;if(ae.current){let he=Math.min(ae.current.value.length,x-1),Ae=ae.current.value.length;(Ce=ae.current)==null||Ce.setSelectionRange(he,Ae),me(he),xe(Ae)}de(!0)},[x]),Ie=reactExports.useCallback(Ce=>{var he,Ae;let Ne=ae.current;if(!T&&(!se.current.isIOS||!Ce.clipboardData||!Ne))return;let Be=Ce.clipboardData.getData("text/plain"),Oe=T?T(Be):Be;console.log({_content:Be,content:Oe}),Ce.preventDefault();let Ue=(he=ae.current)==null?void 0:he.selectionStart,Ve=(Ae=ae.current)==null?void 0:Ae.selectionEnd,We=(Ue!==Ve?G.slice(0,Ue)+Oe+G.slice(Ve):G.slice(0,Ue)+Oe+G.slice(Ue)).slice(0,x);if(We.length>0&&ee&&!ee.test(We))return;Ne.value=We,X(We);let Te=Math.min(We.length,x-1),De=We.length;Ne.setSelectionRange(Te,De),me(Te),xe(De)},[x,X,ee,G]),Pe=reactExports.useMemo(()=>({position:"relative",cursor:D.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[D.disabled]),we=reactExports.useMemo(()=>({position:"absolute",inset:0,width:ge.willPushPWMBadge?`calc(100% + ${ge.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:ge.willPushPWMBadge?`inset(0 ${ge.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:y,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[ge.PWM_BADGE_SPACE_WIDTH,ge.willPushPWMBadge,y]),Re=reactExports.useMemo(()=>reactExports.createElement("input",bt(St({autoComplete:D.autoComplete||"one-time-code"},D),{"data-input-otp":!0,"data-input-otp-placeholder-shown":G.length===0||void 0,"data-input-otp-mss":ce,"data-input-otp-mse":ve,inputMode:R,pattern:ee==null?void 0:ee.source,"aria-placeholder":E,style:we,maxLength:x,value:G,ref:ae,onPaste:Ce=>{var he;Ie(Ce),(he=D.onPaste)==null||he.call(D,Ce)},onChange:be,onMouseOver:Ce=>{var he;J(!0),(he=D.onMouseOver)==null||he.call(D,Ce)},onMouseLeave:Ce=>{var he;J(!1),(he=D.onMouseLeave)==null||he.call(D,Ce)},onFocus:Ce=>{var he;ye(),(he=D.onFocus)==null||he.call(D,Ce)},onBlur:Ce=>{var he;de(!1),(he=D.onBlur)==null||he.call(D,Ce)}})),[be,ye,Ie,R,we,x,ve,ce,D,ee==null?void 0:ee.source,G]),Se=reactExports.useMemo(()=>({slots:Array.from({length:x}).map((Ce,he)=>{var Ae;let Ne=te&&ce!==null&&ve!==null&&(ce===ve&&he===ce||he>=ce&&he<ve),Be=G[he]!==void 0?G[he]:null,Oe=G[0]!==void 0?null:(Ae=E==null?void 0:E[he])!=null?Ae:null;return{char:Be,placeholderChar:Oe,isActive:Ne,hasFakeCaret:Ne&&Be===null}}),isFocused:te,isHovering:!D.disabled&&Z}),[te,Z,x,ve,ce,D.disabled,G]),Ee=reactExports.useMemo(()=>P?P(Se):reactExports.createElement(jt.Provider,{value:Se},L),[L,Se,P]);return reactExports.createElement(reactExports.Fragment,null,M!==null&&reactExports.createElement("noscript",null,reactExports.createElement("style",null,M)),reactExports.createElement("div",{ref:ie,"data-input-otp-container":!0,style:Pe,className:A},Ee,reactExports.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Re)))});Lt.displayName="Input";function $(r,s){try{r.insertRule(s)}catch{console.error("input-otp could not insert CSS rule:",s)}}var Nt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const TwoFactor=({email:r,password:s,isPendingSync:a})=>{useI18n();const{preLoginWithEmail2fa:i,loginWithEmail2fa:o,status:x,isPending:y,isLoggedIn:_}=useAuth(),[E,R]=reactExports.useState(!1),[S,j]=reactExports.useState(""),T=y||_&&a,A=M=>{M.preventDefault(),R(!0),o(r,s,S)};return jsxRuntimeExports.jsxs("form",{className:styles$1e.form,onSubmit:A,children:[jsxRuntimeExports.jsx("p",{className:styles$1e.subheader,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginTwoFactorCodeTab.subHeader",values:{email:r}})}),jsxRuntimeExports.jsx(Lt,{maxLength:6,containerClassName:styles$1e.twoFactorInput,onChange:j,render:({slots:M})=>M.map((P,L)=>jsxRuntimeExports.jsx(Slot,{...P},L))}),jsxRuntimeExports.jsxs("div",{className:styles$1e.resendContainer,children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginTwoFactorCodeTab.resendQuestion"})}),jsxRuntimeExports.jsx("button",{className:styles$1e.resendCode,type:"button",onClick:()=>{i(r,s)},disabled:T||y,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginTwoFactorCodeTab.resendButton"})})]}),jsxRuntimeExports.jsx("p",{className:styles$1e.text,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginTwoFactorCodeTab.codeValidity"})}),jsxRuntimeExports.jsxs("button",{className:styles$1e.submitButton,type:"submit",disabled:T||s.length===0,children:[T&&jsxRuntimeExports.jsx(Delayed,{ms:500,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginTwoFactorCodeTab.verify"})]}),(()=>{if(!E)return null;switch(x){case AuthStatusCode.NONE:case AuthStatusCode.LOGGED_IN:case AuthStatusCode.TWO_FACTOR_REQUIRED:return null;case AuthStatusCode.UNAUTHORIZED:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.incorrectEmailPassword",values:{newLine:jsxRuntimeExports.jsx("br",{})}})});case AuthStatusCode.NETWORK_UNAVAILABLE:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.networkUnavailable",values:{newLine:jsxRuntimeExports.jsx("br",{})}})});default:return jsxRuntimeExports.jsx("div",{className:styles$1e.authError,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}})})}})()]})};function FakeCaret(){return jsxRuntimeExports.jsx("div",{className:styles$1e.fakeCaret,children:jsxRuntimeExports.jsx("div",{className:styles$1e.fakeCaretLine})})}function Slot({hasFakeCaret:r,isActive:s,placeholderChar:a,char:i=a}){return jsxRuntimeExports.jsxs("div",{className:styles$1e.twoFactorInputSlot,"data-active":s,children:[i,r&&jsxRuntimeExports.jsx(FakeCaret,{})]})}const EmailLogin=({isPendingSync:r,onBack:s,onJoinWithEmail:a})=>{const i=useAuth(),o=useI18n(),[x,y]=reactExports.useState(!1),[_,E]=reactExports.useState(""),[R,S]=reactExports.useState(""),j=reactExports.useCallback((T,A)=>{if(!A){a(T);return}E(T)},[a]);return jsxRuntimeExports.jsx(motion.div,{className:styles$1e.root,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:x?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("nav",{className:styles$1e.appBar,children:[jsxRuntimeExports.jsx("div",{className:styles$1e.appBarAccessories,children:jsxRuntimeExports.jsx("button",{disabled:i.isLoggedIn&&r,className:styles$1e.button,type:"button",onClick:()=>{y(!1)},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:o.formatMessage("_.buttons.back"),children:jsxRuntimeExports.jsx(BackIcon,{})})})}),jsxRuntimeExports.jsx("h1",{className:styles$1e.appBarTitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLogin.tab.forgot-password.title"})})]}),jsxRuntimeExports.jsx(ForgotPassword,{initialEmail:_})]}):_.length===0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("nav",{className:styles$1e.appBar,children:[jsxRuntimeExports.jsx("div",{className:styles$1e.appBarAccessories,children:jsxRuntimeExports.jsx("button",{disabled:i.isLoggedIn&&r,className:styles$1e.button,type:"button",onClick:()=>{s()},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:o.formatMessage("_.buttons.back"),children:jsxRuntimeExports.jsx(BackIcon,{})})})}),jsxRuntimeExports.jsx("h1",{className:styles$1e.appBarTitle,children:"Email"})]}),jsxRuntimeExports.jsx(CheckEmail,{onEmailVerified:j})]}):R.length===0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("nav",{className:styles$1e.appBar,children:[jsxRuntimeExports.jsx("div",{className:styles$1e.appBarAccessories,children:jsxRuntimeExports.jsx("button",{disabled:i.isLoggedIn&&r,className:styles$1e.button,type:"button",onClick:()=>{E("")},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:o.formatMessage("_.buttons.back"),children:jsxRuntimeExports.jsx(BackIcon,{})})})}),jsxRuntimeExports.jsx("h1",{className:styles$1e.appBarTitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLogin.tab.title.welcomeExistsUser"})})]}),jsxRuntimeExports.jsx(ExistingUser,{email:_,onForgotPasswordClick:()=>{y(!0)},onTwoFactorLogin:T=>{S(T)}})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("nav",{className:styles$1e.appBar,children:[jsxRuntimeExports.jsx("div",{className:styles$1e.appBarAccessories,children:jsxRuntimeExports.jsx("button",{disabled:i.isLoggedIn&&r,className:styles$1e.button,type:"button",onClick:()=>{E("")},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:o.formatMessage("_.buttons.back"),children:jsxRuntimeExports.jsx(BackIcon,{})})})}),jsxRuntimeExports.jsx("h1",{className:styles$1e.appBarTitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLogin.tab.title.welcomeExistsUser"})})]}),jsxRuntimeExports.jsx(TwoFactor,{email:_,password:R,isPendingSync:r})]})})},LogIn=({auth:r,isPendingSync:s})=>{const a=useI18n(),{loginWithGoogle:i,loginWithFacebook:o,loginWithApple:x,isLoggedIn:y,isPending:_}=useAuth(),[E,R]=reactExports.useState(!1),S=E||_||y&&s,[j,T]=reactExports.useState(!1);return reactExports.useEffect(()=>{const A=M=>{M.data.name==="AUTH_TOKEN_RESULT"&&r.loginWithToken(M.data.token)};return window.addEventListener("message",A),()=>{window.removeEventListener("message",A)}},[r]),reactExports.useEffect(()=>{browser.action.setBadgeText({text:null})},[]),reactExports.useEffect(()=>{if(!E)return;let A;function M(){A=setTimeout(async()=>{await cookieLogin(r)||M()},500)}return M(),()=>clearTimeout(A)},[r,E]),useAuthService(),jsxRuntimeExports.jsxs("div",{className:styles$1f.root,children:[jsxRuntimeExports.jsxs("div",{className:styles$1f.decoration,children:[jsxRuntimeExports.jsxs("div",{className:styles$1f.grid,children:[jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:3}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:5}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:7}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:3}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:5}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:7}}),jsxRuntimeExports.jsx("h1",{className:styles$1f.title,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLogin.visual.title"})}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-is-branded":!0}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:3}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:5}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,style:{gridColumn:7}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:3}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:5}}),jsxRuntimeExports.jsx("div",{className:styles$1f.dot,"data-size-xl":!0,style:{gridColumn:7}})]}),jsxRuntimeExports.jsx("p",{className:styles$1f.slogan,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLogin.visual.slogan"})})]}),jsxRuntimeExports.jsxs("div",{className:styles$1f.loginOptions,children:[S&&jsxRuntimeExports.jsx("div",{className:styles$1f.loginLoadingIndicator,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{color:"primary"})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{disabled:S,className:styles$1f.loginButton,type:"button",onClick:()=>{i(),R(!0)},children:[jsxRuntimeExports.jsx(SvgGoogle,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.buttons.googleLogin.title"})]}),jsxRuntimeExports.jsxs("button",{disabled:S,className:styles$1f.loginButton,type:"button",onClick:()=>{x()},children:[jsxRuntimeExports.jsx(SvgApple,{className:styles$1f.appleIcon}),jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginEmailLoginTab.buttons.loginWithApple"})]}),jsxRuntimeExports.jsx("button",{disabled:S,className:styles$1f.loginButton,type:"button","data-icon-only":!0,onClick:()=>{T(!0)},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:a.formatMessage("AppLoginExistingUser.button.signIn"),children:jsxRuntimeExports.jsx(SvgEmail,{})})}),jsxRuntimeExports.jsx("button",{disabled:S,className:styles$1f.loginButton,type:"button","data-icon-only":!0,onClick:()=>{o(),R(!0)},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:a.formatMessage("AppLoginMainTab.buttons.facebookLogin.title"),children:jsxRuntimeExports.jsx(SvgFacebook,{})})})]})]}),jsxRuntimeExports.jsx("p",{className:styles$1f.legal,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppLoginMainTabTerms.terms",values:{newLine:jsxRuntimeExports.jsx("br",{}),terms:A=>jsxRuntimeExports.jsx("a",{href:"https://www.any.do/eula",target:"_blank",rel:"noopener noreferrer",className:"AppLoginMainTabTerms__link",children:A}),privacy:A=>jsxRuntimeExports.jsx("a",{href:"https://www.any.do/privacy",target:"_blank",rel:"noopener noreferrer",className:"AppLoginMainTabTerms__link",children:A})}})}),jsxRuntimeExports.jsx(AnimatePresence,{children:j&&jsxRuntimeExports.jsx(EmailLogin,{onBack:()=>T(!1),onJoinWithEmail:A=>{r.redirectJoinWithEmail(A),R(!0),T(!1)},isPendingSync:s})})]})};/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,s){return r.button===0&&(!s||s==="_self")&&!isModifiedEvent(r)}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$7[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(r){startTransitionImpl?startTransitionImpl(r):r()}function flushSyncSafe(r){flushSyncImpl?flushSyncImpl(r):r()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((s,a)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",s(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",a(i))}})}}function RouterProvider(r){let{fallbackElement:s,router:a,future:i}=r,[o,x]=reactExports.useState(a.state),[y,_]=reactExports.useState(),[E,R]=reactExports.useState({isTransitioning:!1}),[S,j]=reactExports.useState(),[T,A]=reactExports.useState(),[M,P]=reactExports.useState(),L=reactExports.useRef(new Map),{v7_startTransition:D}=i||{},O=reactExports.useCallback(V=>{D?startTransitionSafe(V):V()},[D]),B=reactExports.useCallback((V,U)=>{let{deletedFetchers:G,unstable_flushSync:oe,unstable_viewTransitionOpts:X}=U;G.forEach(ae=>L.current.delete(ae)),V.fetchers.forEach((ae,ie)=>{ae.data!==void 0&&L.current.set(ie,ae.data)});let ee=a.window==null||a.window.document==null||typeof a.window.document.startViewTransition!="function";if(!X||ee){oe?flushSyncSafe(()=>x(V)):O(()=>x(V));return}if(oe){flushSyncSafe(()=>{T&&(S&&S.resolve(),T.skipTransition()),R({isTransitioning:!0,flushSync:!0,currentLocation:X.currentLocation,nextLocation:X.nextLocation})});let ae=a.window.document.startViewTransition(()=>{flushSyncSafe(()=>x(V))});ae.finished.finally(()=>{flushSyncSafe(()=>{j(void 0),A(void 0),_(void 0),R({isTransitioning:!1})})}),flushSyncSafe(()=>A(ae));return}T?(S&&S.resolve(),T.skipTransition(),P({state:V,currentLocation:X.currentLocation,nextLocation:X.nextLocation})):(_(V),R({isTransitioning:!0,flushSync:!1,currentLocation:X.currentLocation,nextLocation:X.nextLocation}))},[a.window,T,S,L,O]);reactExports.useLayoutEffect(()=>a.subscribe(B),[a,B]),reactExports.useEffect(()=>{E.isTransitioning&&!E.flushSync&&j(new Deferred)},[E]),reactExports.useEffect(()=>{if(S&&y&&a.window){let V=y,U=S.promise,G=a.window.document.startViewTransition(async()=>{O(()=>x(V)),await U});G.finished.finally(()=>{j(void 0),A(void 0),_(void 0),R({isTransitioning:!1})}),A(G)}},[O,y,S,a.window]),reactExports.useEffect(()=>{S&&y&&o.location.key===y.location.key&&S.resolve()},[S,T,o.location,y]),reactExports.useEffect(()=>{!E.isTransitioning&&M&&(_(M.state),R({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}),P(void 0))},[E.isTransitioning,M]),reactExports.useEffect(()=>{},[]);let N=reactExports.useMemo(()=>({createHref:a.createHref,encodeLocation:a.encodeLocation,go:V=>a.navigate(V),push:(V,U,G)=>a.navigate(V,{state:U,preventScrollReset:G==null?void 0:G.preventScrollReset}),replace:(V,U,G)=>a.navigate(V,{replace:!0,state:U,preventScrollReset:G==null?void 0:G.preventScrollReset})}),[a]),F=a.basename||"/",W=reactExports.useMemo(()=>({router:a,navigator:N,static:!1,basename:F}),[a,N,F]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:W},reactExports.createElement(DataRouterStateContext.Provider,{value:o},reactExports.createElement(FetchersContext.Provider,{value:L.current},reactExports.createElement(ViewTransitionContext.Provider,{value:E},reactExports.createElement(Router,{basename:F,location:o.location,navigationType:o.historyAction,navigator:N,future:{v7_relativeSplatPath:a.future.v7_relativeSplatPath}},o.initialized||a.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:a.routes,future:a.future,state:o}):s))))),null)}function DataRoutes(r){let{routes:s,future:a,state:i}=r;return useRoutesImpl(s,void 0,i,a)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(s,a){let{onClick:i,relative:o,reloadDocument:x,replace:y,state:_,target:E,to:R,preventScrollReset:S,unstable_viewTransition:j}=s,T=_objectWithoutPropertiesLoose$1(s,_excluded$2),{basename:A}=reactExports.useContext(NavigationContext),M,P=!1;if(typeof R=="string"&&ABSOLUTE_URL_REGEX.test(R)&&(M=R,isBrowser))try{let B=new URL(window.location.href),N=R.startsWith("//")?new URL(B.protocol+R):new URL(R),F=stripBasename(N.pathname,A);N.origin===B.origin&&F!=null?R=F+N.search+N.hash:P=!0}catch{}let L=useHref(R,{relative:o}),D=useLinkClickHandler(R,{replace:y,state:_,target:E,preventScrollReset:S,relative:o,unstable_viewTransition:j});function O(B){i&&i(B),B.defaultPrevented||D(B)}return reactExports.createElement("a",_extends({},T,{href:M||L,onClick:P||x?i:O,ref:a,target:E}))}),NavLink$1=reactExports.forwardRef(function(s,a){let{"aria-current":i="page",caseSensitive:o=!1,className:x="",end:y=!1,style:_,to:E,unstable_viewTransition:R,children:S}=s,j=_objectWithoutPropertiesLoose$1(s,_excluded2),T=useResolvedPath(E,{relative:j.relative}),A=useLocation(),M=reactExports.useContext(DataRouterStateContext),{navigator:P,basename:L}=reactExports.useContext(NavigationContext),D=M!=null&&useViewTransitionState(T)&&R===!0,O=P.encodeLocation?P.encodeLocation(T).pathname:T.pathname,B=A.pathname,N=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;o||(B=B.toLowerCase(),N=N?N.toLowerCase():null,O=O.toLowerCase()),N&&L&&(N=stripBasename(N,L)||N);const F=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let W=B===O||!y&&B.startsWith(O)&&B.charAt(F)==="/",V=N!=null&&(N===O||!y&&N.startsWith(O)&&N.charAt(O.length)==="/"),U={isActive:W,isPending:V,isTransitioning:D},G=W?i:void 0,oe;typeof x=="function"?oe=x(U):oe=[x,W?"active":null,V?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let X=typeof _=="function"?_(U):_;return reactExports.createElement(Link,_extends({},j,{"aria-current":G,className:oe,ref:a,style:X,to:E,unstable_viewTransition:R}),typeof S=="function"?S(U):S)});var DataRouterHook;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(r){let s=reactExports.useContext(DataRouterContext);return s||invariant$v(!1),s}function useLinkClickHandler(r,s){let{target:a,replace:i,state:o,preventScrollReset:x,relative:y,unstable_viewTransition:_}=s===void 0?{}:s,E=useNavigate(),R=useLocation(),S=useResolvedPath(r,{relative:y});return reactExports.useCallback(j=>{if(shouldProcessLinkClick(j,a)){j.preventDefault();let T=i!==void 0?i:createPath(R)===createPath(S);E(r,{replace:T,state:o,preventScrollReset:x,relative:y,unstable_viewTransition:_})}},[R,E,S,i,o,a,r,x,y,_])}function useViewTransitionState(r,s){s===void 0&&(s={});let a=reactExports.useContext(ViewTransitionContext);a==null&&invariant$v(!1);let{basename:i}=useDataRouterContext(DataRouterHook.useViewTransitionState),o=useResolvedPath(r,{relative:s.relative});if(!a.isTransitioning)return!1;let x=stripBasename(a.currentLocation.pathname,i)||a.currentLocation.pathname,y=stripBasename(a.nextLocation.pathname,i)||a.nextLocation.pathname;return matchPath$1(o.pathname,y)!=null||matchPath$1(o.pathname,x)!=null}var themeVars={color:{black:"var(--_1c46z120)",white:"var(--_1c46z121)",danger:"var(--_1c46z122)",dangerLight:"var(--_1c46z123)",confirm:"var(--_1c46z124)",confirmLight:"var(--_1c46z125)",brand:"var(--_1c46z126)",primary:"var(--_1c46z127)","tertiary.1":"var(--_1c46z128)","tertiary.2":"var(--_1c46z129)","tertiary.3":"var(--_1c46z12a)","text.1":"var(--_1c46z12b)","text.2":"var(--_1c46z12c)","text.3":"var(--_1c46z12d)","text.4":"var(--_1c46z12e)","card.bg1":"var(--_1c46z12f)","card.bg2":"var(--_1c46z12g)","card.bg3":"var(--_1c46z12h)","card.bg4":"var(--_1c46z12i)","card.bg5":"var(--_1c46z12j)",divider:"var(--_1c46z12k)","action.hover":"var(--_1c46z12l)","action.active":"var(--_1c46z12m)","skeleton.bg":"var(--_1c46z12n)"}};function matchPath(r,s){return matchPath$1(s,r)}function getMyDayUrl(r,s){const a=s;if(a.taskId==null&&a.calendarId==null&&a.eventId==null)return appendSearchToUrl(r,`/${RouteName.MyDay}`);if(a.taskId!=null){const i=encodeURIComponent(a.taskId);let o=`/${RouteName.MyDay}/tasks/${i}`;return a.taskActivity&&(o+="/activity"),appendSearchToUrl(r,o)}if(a.eventId!=null&&a.calendarId!=null){const i=encodeURIComponent(a.eventId),o=encodeURIComponent(a.calendarId);return appendSearchToUrl(r,`/${RouteName.MyDay}/events/${o}/${i}`)}throw new Error(`getMyDayUrl(): Not implemented '${JSON.stringify(s)}'`)}function getBoardUrl(r,s,{taskId:a=null,activityId:i=!1,withUpsell:o=!1,absolutePath:x=!1,members:y=!1,tags:_=!1,sections:E=!1,archive:R=!1,automations:S=!1,preserveFilters:j}={}){const T=encodeURIComponent(s);let A=x?new URL(window.location.href).origin:"";if(A+=`/boards/${T}`,a!==null){const M=encodeURIComponent(a);A+=`/tasks/${M}`}else if(o)A+="/upsell";else if(i!==!1){if(A+="/activity",i!==!0){const M=encodeURIComponent(i);A+=`/${M}`}}else y?A+="/members":_?A+="/tags":E?A+="/sections":R?A+="/archive":S&&(A+="/automations");return appendSearchToUrl(r,A,{preserveFilters:j})}function getTaskGroupTypeByRoutesPathsKey(r){switch(r){case"myday":case"mydayTask":case"mydayTaskActivity":case"mydayEvent":case"workspace":case"myCalendar":case"oauthResultMicrosoftCalendar":return TaskGroupsType.MYDAY;case"allTasks":case"allTasksTask":case"allTasksTaskActivity":return TaskGroupsType.ALL_TASKS;case"list":case"listTask":return TaskGroupsType.CATEGORY;case"board":case"boardTask":case"boardActivity":case"boardMembers":case"boardTags":case"boardAutomations":case"sections":case"boardActivityId":case"boardActivityTask":case"boardTaskActivity":case"boardTaskActivityId":case"boardUpsell":case"archive":return TaskGroupsType.BOARD;case"nextSevenDays":case"nextSevenDaysTask":case"nextSevenDaysTaskActivity":return TaskGroupsType.NEXT_SEVEN_DAYS;case"label":case"labelTask":return TaskGroupsType.LABEL;case"customView":case"customViewTask":case"customViewTaskActivity":case"customViewTaskActivityId":return TaskGroupsType.CUSTOM_VIEW;case"groceryBoard":return TaskGroupsType.GROCERY_BOARD;default:return r}}function getLocationPathnameParams(r){let s=TaskGroupsType.ALL_TASKS,a=null,i=null,o=null,x=null,y=null,_=null,E=null,R=!1,S=!1,j=null,T=null,A=!1,M=!1,P=!1,L=!1,D=!1,O=!1,B=!1;for(let N of TASK_ROUTES_PATHS_ORDER){const F=matchPath(r,N);F!=null&&(ROUTES_PATHS.myday===N&&(A=!0),ROUTES_PATHS.myCalendar===N&&(M=!0),ROUTES_PATHS.mydayTask===N&&(A=!0),ROUTES_PATHS.mydayTaskActivity===N&&(A=!0),ROUTES_PATHS.mydayEvent===N&&(A=!0),ROUTES_PATHS.workspace===N&&(A=!0),ROUTES_PATHS.boardMembers===N&&(P=!0),ROUTES_PATHS.boardTags===N&&(L=!0),ROUTES_PATHS.sections===N&&(D=!0),ROUTES_PATHS.archive===N&&(O=!0),ROUTES_PATHS.boardAutomations===N&&(B=!0),(ROUTES_PATHS.boardActivity===N||ROUTES_PATHS.boardActivityTask===N)&&(R=!0),ROUTES_PATHS.boardActivityId===N&&(R=F.params.activityId===void 0?!0:decodeURIComponent(F.params.activityId)),(ROUTES_PATHS.boardTaskActivity===N||ROUTES_PATHS.mydayTaskActivity===N||ROUTES_PATHS.allTasksTaskActivity===N||ROUTES_PATHS.nextSevenDaysTaskActivity===N||ROUTES_PATHS.customViewTaskActivity===N)&&(S=!0),(ROUTES_PATHS.boardTaskActivityId===N||ROUTES_PATHS.customViewTaskActivityId===N)&&(S=F.params.activityId===void 0?!0:decodeURIComponent(F.params.activityId)),s=getTaskGroupTypeByRoutesPathsKey(INVERTED_ROUTES_PATHS.get(N)),_=F.params.calendarId===void 0?null:decodeURIComponent(F.params.calendarId),E=F.params.eventId===void 0?null:decodeURIComponent(F.params.eventId),i=F.params.taskId===void 0?null:decodeURIComponent(F.params.taskId),o=F.params.categoryId===void 0?null:decodeURIComponent(F.params.categoryId),a=F.params.labelId===void 0?null:decodeURIComponent(F.params.labelId),x=F.params.boardId===void 0?null:decodeURIComponent(F.params.boardId),j=F.params.workspaceId===void 0?null:decodeURIComponent(F.params.workspaceId),y=F.params.customViewId===void 0?null:decodeURIComponent(F.params.customViewId),T=F.params.groceryBoardId===void 0?null:decodeURIComponent(F.params.groceryBoardId))}return{isMyDay:A,isMyCalendar:M,isBoardMembers:P,isBoardTags:L,isSections:D,isArchive:O,isBoardAutomations:B,taskGroupsType:s,selectedCalendarId:_,selectedEventId:E,selectedCategoryId:o,selectedBoardId:x,selectedTaskId:i,selectedLabelId:a,selectedBoardActivityId:R,selectedTaskActivityId:S,selectedWorkspaceId:j,selectedCustomViewId:y,selectedGroceryBoardId:T}}function getUrl$1(r){switch(r.taskGroupsType){case TaskGroupsType.CATEGORY:if(r.selectedCategoryId!=null){const s=encodeURIComponent(r.selectedCategoryId);return`/${RouteName.Tasks}/lists/${s}`}break;case TaskGroupsType.BOARD:if(r.selectedBoardId!=null){const s=encodeURIComponent(r.selectedBoardId);return`/${RouteName.Boards}/${s}`}break;case TaskGroupsType.CUSTOM_VIEW:if(r.selectedCustomViewId!=null){const s=encodeURIComponent(r.selectedCustomViewId);return`/${RouteName.CustomViews}/${s}`}break;case TaskGroupsType.LABEL:if(r.selectedLabelId!=null){const s=encodeURIComponent(r.selectedLabelId);return`/${RouteName.Labels}/tag/${s}`}break;case TaskGroupsType.NEXT_SEVEN_DAYS:return`/${RouteName.Tasks}/next-seven-days`;case TaskGroupsType.MYDAY:return"/myday"}return`/${RouteName.Tasks}/all`}function getTaskDeselectedUrl(r,s){const a=getLocationPathnameParams(r.pathname);return a.isMyDay?getMyDayUrl(r.search,{taskId:null,calendarId:a.selectedCalendarId,eventId:a.selectedEventId}):appendSearchToUrl(r.search,getUrl$1(a),{preserveFilters:s})}function getUrl(r,s){const a=encodeURIComponent(r);switch(s.taskGroupsType){case TaskGroupsType.CATEGORY:if(s.selectedCategoryId!=null){const x=encodeURIComponent(s.selectedCategoryId);return`/${RouteName.Tasks}/lists/${x}/tasks/${a}`}break;case TaskGroupsType.BOARD:if(s.selectedBoardId!=null){const x=encodeURIComponent(s.selectedBoardId);if(s.selectedBoardActivityId!==!1)return`/boards/${x}/activity/tasks/${a}`;{let y=`/boards/${x}/tasks/${a}`;return s.selectedTaskActivityId&&(y+="/activity"),y}}break;case TaskGroupsType.CUSTOM_VIEW:let o=`/custom-views/${s.selectedCustomViewId}/tasks/${a}`;return s.selectedTaskActivityId&&(o+="/activity"),o;case TaskGroupsType.LABEL:if(s.selectedLabelId!=null){const x=encodeURIComponent(s.selectedLabelId);return`/${RouteName.Labels}/tag/${x}/tasks/${a}`}break;case TaskGroupsType.NEXT_SEVEN_DAYS:{let x=`/${RouteName.TasksNextSevenDays}/tasks/${a}`;return s.selectedTaskActivityId&&(x+="/activity"),x}}let i=`/${RouteName.Tasks}/all/tasks/${a}`;return s.selectedTaskActivityId&&(i+="/activity"),i}function getTaskUrl(r,{taskId:s,isMyDay:a,taskActivity:i,preserveFilters:o}){const x=getLocationPathnameParams(r.pathname);return x.selectedTaskActivityId=!!i,(a!=null?a:x.isMyDay)?getMyDayUrl(r.search,{taskId:s,taskActivity:i}):appendSearchToUrl(r.search,getUrl(s,x),{preserveFilters:o})}class AppHeaderNotificationsIcon extends reactExports.Component{shouldComponentUpdate(s){return s.hasNotifications!==this.props.hasNotifications}render(){const{hasNotifications:s}=this.props,a=s?"var(--error-color)":"currentColor";return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("rect",{width:"14.4",height:"14.4",x:"5",y:"5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6",rx:"1.6"}),s?jsxRuntimeExports.jsx("circle",{cx:"19",cy:"5",r:"4",fill:a}):null]})})}}const SvgMyDayicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("circle",{r:9,fill:"transparent",stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:5,fill:"transparent",stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:1,fill:"transparent",stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"})),SvgRemoveMyDayicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("mask",{id:"mask0",width:24,height:23,x:-4,y:5,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#EDEDED",d:"m5.5 5-9.5.5 4.5 17L17 28l2.5-9-14-14Z"})),reactExports.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask0)"},reactExports.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"})),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.5,d:"M3.061 3 21 20.939"}),reactExports.createElement("mask",{id:"mask1",width:25,height:25,x:6,y:-7,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#C4C4C4",d:"M16.156-6.414 30.729 8.159l-9.299 9.3L6.857 2.884z"})),reactExports.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask1)"},reactExports.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"}),reactExports.createElement("circle",{r:2,transform:"matrix(1 0 0 -1 12 12)"}))),MyDayAddButton=({id:r,type:s,source:a,className:i,renderLabel:o,renderButton:x,onIsAddedToMydayChange:y,onRemoveFromMyDay:_})=>{const{createMyDayEntry:E,updateMyDayEntries:R,myDayEntries:S}=useSyncMyDayEntries(),j=React$6.useMemo(()=>S.find(P=>P.referencedObjectId===r),[r,S]),T=!!j;React$6.useEffect(()=>{y==null||y(T)},[T,y]);const A=React$6.useCallback(()=>E({referencedObjectId:r,referencedObjectType:s,source:a}),[E,r,s,a]),M=React$6.useCallback(()=>{j&&(R([{id:j.id,key:"visibilityStatus",value:MyDayEntryVisibilityStatus.DISMISSED}]),_==null||_())},[j,_,R]);return x?x({isAlreadyAddedToMyDay:T,onAddToMyDay:A,onRemoveFromMyDay:M}):T?jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:M,accessory:jsxRuntimeExports.jsx(SvgRemoveMyDayicon$1,{}),className:cx$6("MyDayAddButton",i),children:(o==null?void 0:o(!0))||jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.remove-from-my-day"})}):jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:A,accessory:jsxRuntimeExports.jsx(SvgMyDayicon$1,{}),className:cx$6("MyDayAddButton",i),children:(o==null?void 0:o(!1))||jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.add-to-my-day"})})},MyDayAddButton_memo=React$6.memo(MyDayAddButton),NavLink=({to:r,children:s,...a})=>jsxRuntimeExports.jsx("a",{href:new URL(r,APP_BASE_URL).href,target:"_blank",rel:"noreferrer",...a,children:s});function baseSlice$1(r,s,a){var i=-1,o=r.length;s<0&&(s=-s>o?0:o+s),a=a>o?o:a,a<0&&(a+=o),o=s>a?0:a-s>>>0,s>>>=0;for(var x=Array(o);++i<o;)x[i]=r[i+s];return x}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$1(r,s,a){var i=r.length;return a=a===void 0?i:a,!s&&a>=i?r:baseSlice(r,s,a)}var _castSlice=castSlice$1,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$2+rsVarRange$2+"]");function hasUnicode$3(r){return reHasUnicode.test(r)}var _hasUnicode=hasUnicode$3,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,regexpTag="[object RegExp]";function baseIsRegExp$1(r){return isObjectLike(r)&&baseGetTag(r)==regexpTag}var _baseIsRegExp=baseIsRegExp$1,baseIsRegExp=_baseIsRegExp,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,isRegExp$1=nodeIsRegExp?baseUnary$1(nodeIsRegExp):baseIsRegExp,isRegExp_1=isRegExp$1,baseProperty=_baseProperty,asciiSize$1=baseProperty("length"),_asciiSize=asciiSize$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$1+"]",rsCombo$1="["+rsComboRange$1+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g");function unicodeSize$1(r){for(var s=reUnicode$1.lastIndex=0;reUnicode$1.test(r);)++s;return s}var _unicodeSize=unicodeSize$1,asciiSize=_asciiSize,hasUnicode$2=_hasUnicode,unicodeSize=_unicodeSize;function stringSize$1(r){return hasUnicode$2(r)?unicodeSize(r):asciiSize(r)}var _stringSize=stringSize$1;function asciiToArray$1(r){return r.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(r){return r.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(r){return hasUnicode$1(r)?unicodeToArray(r):asciiToArray(r)}var _stringToArray=stringToArray$1,baseToString=_baseToString,castSlice=_castSlice,hasUnicode=_hasUnicode,isObject$1=isObject_1,isRegExp=isRegExp_1,stringSize=_stringSize,stringToArray=_stringToArray,toInteger=toInteger_1,toString=toString_1,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",reFlags=/\w*$/;function truncate(r,s){var a=DEFAULT_TRUNC_LENGTH,i=DEFAULT_TRUNC_OMISSION;if(isObject$1(s)){var o="separator"in s?s.separator:o;a="length"in s?toInteger(s.length):a,i="omission"in s?baseToString(s.omission):i}r=toString(r);var x=r.length;if(hasUnicode(r)){var y=stringToArray(r);x=y.length}if(a>=x)return r;var _=a-stringSize(i);if(_<1)return i;var E=y?castSlice(y,0,_).join(""):r.slice(0,_);if(o===void 0)return E+i;if(y&&(_+=E.length-_),isRegExp(o)){if(r.slice(_).search(o)){var R,S=E;for(o.global||(o=RegExp(o.source,toString(reFlags.exec(o))+"g")),o.lastIndex=0;R=o.exec(S);)var j=R.index;E=E.slice(0,j===void 0?_:j)}}else if(r.indexOf(baseToString(o),_)!=_){var T=E.lastIndexOf(o);T>-1&&(E=E.slice(0,T))}return E+i}var truncate_1=truncate;const truncate$1=getDefaultExportFromCjs(truncate_1),item$2="_item_1az1n_1",clickable="_clickable_1az1n_6",themeNotificationCenter$1="_themeNotificationCenter_1az1n_18",styles$1c={item:item$2,clickable,themeNotificationCenter:themeNotificationCenter$1},MAX_TEXT_LEMGTH=100,truncate_=r=>truncate$1(r,{length:MAX_TEXT_LEMGTH,separator:" ",omission:"…"}),ItemBoard=reactExports.memo(function({text:s,url:a,onClick:i}){return a?jsxRuntimeExports.jsx(NavLink,{className:cx$6(styles$1c.item,styles$1c.clickable),"data-private":"lipsum",to:a,onClick:i,children:truncate_(s)}):jsxRuntimeExports.jsx("div",{className:styles$1c.item,children:truncate_(s)})}),ItemCard=reactExports.memo(function({text:s,url:a,onClick:i}){return a?jsxRuntimeExports.jsx(NavLink,{className:cx$6(styles$1c.item,styles$1c.clickable),"data-private":"lipsum",to:a,onClick:i,children:truncate_(s)}):jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item),"data-private":"lipsum",children:truncate_(s)})}),ItemSection=reactExports.memo(function({text:s,theme:a}){return jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:truncate_(s)})}),ItemUser=reactExports.memo(function({text:s,theme:a}){return jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:s})}),ItemAttachment=reactExports.memo(function({text:s,theme:a,attachment:i,onClick:o}){const x=i==null?void 0:i.url,y=truncate_((i==null?void 0:i.displayName)||s);return x?jsxRuntimeExports.jsx("a",{onClick:o,className:cx$6(styles$1c.item,styles$1c.clickable),href:x,target:"_blank","data-private":"lipsum",rel:"noreferrer",children:y}):jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:y})}),ItemChecklistItem=reactExports.memo(function({text:s,theme:a}){return jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:s})}),ItemChecklist=reactExports.memo(function({text:s,theme:a}){return jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:s})}),ItemTag=reactExports.memo(function({text:s,theme:a}){return jsxRuntimeExports.jsx("div",{className:cx$6(styles$1c.item,{[styles$1c.themeNotificationCenter]:a==="notificationCenter"}),"data-private":"lipsum",children:s})}),ActivityUpdate$1="_ActivityUpdate_14fiq_1",themeNotificationCenter="_themeNotificationCenter_14fiq_8",interacted="_interacted_14fiq_8",message$1="_message_14fiq_13",header$3="_header_14fiq_45",content$3="_content_14fiq_49",avatar$1="_avatar_14fiq_53",name$1="_name_14fiq_57",isCurrentUser="_isCurrentUser_14fiq_67",isChat="_isChat_14fiq_67",isSingleEmoji="_isSingleEmoji_14fiq_77",date$1="_date_14fiq_81",dateTooltip="_dateTooltip_14fiq_92",quote="_quote_14fiq_107",actions="_actions_14fiq_117",myDayButton="_myDayButton_14fiq_127",buttonWithIcon="_buttonWithIcon_14fiq_132",denyButton="_denyButton_14fiq_140",dismissButton$2="_dismissButton_14fiq_153",styles$1b={ActivityUpdate:ActivityUpdate$1,themeNotificationCenter,interacted,message:message$1,header:header$3,content:content$3,avatar:avatar$1,name:name$1,isCurrentUser,isChat,isSingleEmoji,date:date$1,dateTooltip,quote,actions,myDayButton,buttonWithIcon,denyButton,dismissButton:dismissButton$2},SvgReplyicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"#0083FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19 9.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.379 8.379 0 0 1-3.8-.9L1 19l1.9-5.7A8.38 8.38 0 0 1 2 9.5a8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5Z"})),SvgDismissicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"#9B9B9B",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 5 5 15M5 5l10 10"})),SvgApproveicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"}),reactExports.createElement("mask",{id:"mask0",width:15,height:11,x:5,y:6,"mask-type":"alpha",maskUnits:"userSpaceOnUse"},reactExports.createElement("path",{fill:"#fff",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"})),reactExports.createElement("g",{mask:"url(#mask0)"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h24v24H0z"})));function updateEntriesToJsx(r,s,a,i,o,x,y,_,E){return r.map((R,S)=>{var j,T,A,M;switch(R.type){case"cardAttachment":return jsxRuntimeExports.jsx(ItemAttachment,{text:R.text,attachment:y.get((R==null?void 0:R.id)||""),onClick:E},S);case"checklistItem":return jsxRuntimeExports.jsx(ItemChecklistItem,{text:R.text},S);case"cardChecklist":return jsxRuntimeExports.jsx(ItemChecklist,{text:R.text},S);case"board":{const P=o.get((R==null?void 0:R.id)||"");let L;return P&&(L=getBoardUrl(window.location.search,P.id)),jsxRuntimeExports.jsx(ItemBoard,{text:((j=o.get((R==null?void 0:R.id)||""))==null?void 0:j.name)||R.text,url:L,onClick:E},S)}case"card":{const P=s.get((R==null?void 0:R.id)||""),L=P&&a.get(P.sectionId||"");let D;return L&&(D=getCardUrl(window.location.search,L.boardId,P.id,_==="default")),jsxRuntimeExports.jsx(ItemCard,{text:R.text,url:D,onClick:E},S)}case"section":return jsxRuntimeExports.jsx(ItemSection,{text:((T=a.get((R==null?void 0:R.id)||""))==null?void 0:T.name)||R.text},S);case"user":return jsxRuntimeExports.jsx(ItemUser,{text:((A=i.get((R==null?void 0:R.id)||""))==null?void 0:A.name)||R.text},S);case"userGroup":return jsxRuntimeExports.jsx(ItemUser,{text:R.text},S);case"tag":return jsxRuntimeExports.jsx(ItemTag,{text:((M=x.get((R==null?void 0:R.id)||""))==null?void 0:M.name)||R.text},S);default:return jsxRuntimeExports.jsx("span",{"data-private":"lipsum",children:linkifyText(R.text,nonPropagatingWrapLink)},S)}})}function ActivityUpdate({data:r,onInteract:s,onUpdate:a,onClose:i,onDismiss:o,models:{cards:x=new Map,users:y=new Map,sections:_=new Map,boards:E=new Map,attachments:R=new Map,tags:S=new Map},className:j,id:T,theme:A="default",isCurrentUser:M=!1}){const{creator:P,text:L,quoteText:D}=r,O=useNavigate(),B=React$6.useMemo(()=>{try{return updateEntriesToJsx(L,x,_,y,E,S,R,A,i)}catch(Q){return AnydoSentry.captureMessage(`Failed to convert activity text ${JSON.stringify(L)}`,"error"),AnydoSentry.captureException(Q),null}},[L,x,_,y,E,S,R,A,i]),N=React$6.useMemo(()=>{try{return D?updateEntriesToJsx(D,x,_,y,E,S,R,A,i):null}catch{return AnydoSentry.captureMessage(`Failed to convert activity quote text ${JSON.stringify(L)}`,"error"),null}},[D,x,_,y,E,S,R,A,i,L]),{track:F}=useAnalytics(),W=React$6.useCallback(Q=>{A==="notificationCenter"&&F("notification_interacted",{extra_str1:r.id,extra_str2:Q||"update_tapped"}),s==null||s(r)},[r,s,A,F]),V=useMiniToastNotifications(),{acceptWorkspaceInvite:U,denyWorkspaceInvite:G}=useSyncNotificationCenter(),[oe,X]=React$6.useState(!1),ee=useStripeConfirmPayment(),ae=React$6.useCallback(async()=>{var Q;X(!0);try{const Z=await U(r.id);a==null||a(Z),V.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"ActivityUpdate.inviteApproved"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}catch(Z){if(isHttpError(Z)&&((Q=Z.payload)==null?void 0:Q.error_code)===ERROR_PAYMENT_REQUIRED){await ee(Z.payload.payment_intent_client_secret);const J=await U(r.id);a==null||a(J),i==null||i(),V.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"ActivityUpdate.inviteApproved"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}});return}i==null||i(),V.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}finally{X(!1)}},[U,ee,r.id,V,i,a]),ie=React$6.useCallback(async()=>{X(!0);try{const Q=await G(r.id);a==null||a(Q)}catch{V.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}finally{X(!1)}},[r.id,G,V,a]);if(!B)return null;const se=L.length===1&&isSingleEmoji$1(L[0].text.trim());return jsxRuntimeExports.jsxs("div",{onClick:()=>W(),id:T,className:cx$6(styles$1b.ActivityUpdate,j,{[styles$1b.isCurrentUser]:M,[styles$1b.isChat]:r.isChat,[styles$1b.interacted]:r.status===ActivityUpdateStatus.Interacted,[styles$1b.themeNotificationCenter]:A==="notificationCenter"}),children:[jsxRuntimeExports.jsxs("div",{className:styles$1b.header,children:[jsxRuntimeExports.jsx("span",{className:styles$1b.avatar,children:jsxRuntimeExports.jsx(SharingAvatar_memo,{size:A==="notificationCenter"?SharingAvatarSize.NOTIFICATION_CENTER:SharingAvatarSize.ACTIVITY_UPDATE,name:P.name,imageUrl:P.profilePicture})}),jsxRuntimeExports.jsxs("div",{className:styles$1b.content,children:[jsxRuntimeExports.jsx("div",{className:cx$6(styles$1b.message,{[styles$1b.isSingleEmoji]:se}),children:B}),jsxRuntimeExports.jsx(TimeAgo,{date:r.creationDate,className:styles$1b.date})]}),o&&jsxRuntimeExports.jsx("button",{className:styles$1b.dismissButton,onClick:Q=>{Q.stopPropagation(),F("notification_dismissed",{extra_str1:r.id}),o(r)},children:jsxRuntimeExports.jsx(SvgDismissicon,{})})]}),jsxRuntimeExports.jsxs("div",{children:[(D==null?void 0:D.length)&&jsxRuntimeExports.jsx("div",{className:cx$6(styles$1b.quote),onClick:Q=>{var J;const Z=((J=r.actions)!=null?J:[]).find(te=>te.type==="comment");if("tagName"in Q.target&&Q.target.tagName!=="A"&&(Z==null?void 0:Z.type)==="comment"&&x.has(Z.payload.card)){const te=x.get(Z.payload.card),de=te&&_.get(te.sectionId||"");if(de){const ce=getCardUrl(window.location.search,de.boardId,te.id,!1,!0);Q.stopPropagation(),(i||noop$4)(),W(Z.type),O(ce)}}},children:N}),r.actions&&r.actions.length>0&&jsxRuntimeExports.jsx("div",{className:styles$1b.actions,children:r.actions.map(Q=>{if(Q.type==="myday"&&x.has(Q.payload.card))return jsxRuntimeExports.jsx("span",{onClick:Z=>{Z.stopPropagation(),W(Q.type)},children:jsxRuntimeExports.jsx(MyDayAddButton_memo,{className:styles$1b.myDayButton,id:Q.payload.card,type:MyDayReferencedObjectType.ANYDO_CARD,source:"board_view"})},Q.type);if(Q.type==="deny_invite_request")return jsxRuntimeExports.jsxs(ButtonInlineText,{disabled:oe,className:cx$6(styles$1b.buttonWithIcon,styles$1b.denyButton),onClickNative:Z=>{Z.stopPropagation(),ie(),W(Q.type)},children:[jsxRuntimeExports.jsx(SvgDismissicon,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"_.inviteRequest.deny"})]},Q.type);if(Q.type==="accept_invite_request")return jsxRuntimeExports.jsxs(ButtonInlineText,{className:styles$1b.buttonWithIcon,onClickNative:Z=>{Z.stopPropagation(),ae(),W(Q.type)},disabled:oe,children:[oe?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}):jsxRuntimeExports.jsx(SvgApproveicon,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"_.inviteRequest.approve"})]},Q.type);if(Q.type==="comment"&&x.has(Q.payload.card)){const Z=x.get(Q.payload.card),J=Z&&_.get(Z.sectionId||"");let te;return J&&(te=getCardUrl(window.location.search,J.boardId,Z.id,!1,!0)),jsxRuntimeExports.jsxs(NavLink,{to:te||"",className:styles$1b.buttonWithIcon,onClick:de=>{de.stopPropagation(),(i||noop$4)(),W(Q.type)},children:[jsxRuntimeExports.jsx(SvgReplyicon,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reply"})]},Q.type)}return null})})]})]})}const ActivityUpdate_memo=React$6.memo(ActivityUpdate),MoreCircleIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...r,children:jsxRuntimeExports.jsxs("g",{stroke:"#B2B2B2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:11.98,cy:12,r:.6,strokeWidth:1.2}),jsxRuntimeExports.jsx("circle",{cx:16.18,cy:12,r:.6,strokeWidth:1.2}),jsxRuntimeExports.jsx("circle",{cx:7.78,cy:12,r:.6,strokeWidth:1.2}),jsxRuntimeExports.jsx("circle",{cx:12,cy:12,r:9,strokeWidth:1.4})]})});function useIsPremium(){const r=useAuthService();return reactExports.useSyncExternalStore(s=>unsubscribeAll(r.subscribe("subscriptionChange",s),r.subscribe("userDetailsUpdate",s)),()=>isUserDetailsPremiumUser(r.getUserDetails(),r.getUserSubscription()))}const noProfileImageUrl="/no-profile-image.png";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o])},extendStatics(r,s)};function __extends(r,s){extendStatics(r,s);function a(){this.constructor=r}r.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function isFunction(r){return typeof r=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var s=new Error;""+s.stack}_enable_super_gross_mode_that_will_cause_bad_things=r},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(r){setTimeout(function(){throw r},0)}var empty$3={closed:!0,next:function(r){},error:function(r){if(config.useDeprecatedSynchronousErrorHandling)throw r;hostReportError(r)},complete:function(){}},isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function isObject(r){return r!==null&&typeof r=="object"}var UnsubscriptionErrorImpl=function(){function r(s){return Error.call(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(a,i){return i+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s,this}return r.prototype=Object.create(Error.prototype),r}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function r(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}return r.prototype.unsubscribe=function(){var s;if(!this.closed){var a=this,i=a._parentOrParents,o=a._ctorUnsubscribe,x=a._unsubscribe,y=a._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof r)i.remove(this);else if(i!==null)for(var _=0;_<i.length;++_){var E=i[_];E.remove(this)}if(isFunction(x)){o&&(this._unsubscribe=void 0);try{x.call(this)}catch(j){s=j instanceof UnsubscriptionError?flattenUnsubscriptionErrors(j.errors):[j]}}if(isArray(y))for(var _=-1,R=y.length;++_<R;){var S=y[_];if(isObject(S))try{S.unsubscribe()}catch(T){s=s||[],T instanceof UnsubscriptionError?s=s.concat(flattenUnsubscriptionErrors(T.errors)):s.push(T)}}if(s)throw new UnsubscriptionError(s)}},r.prototype.add=function(s){var a=s;if(!s)return r.EMPTY;switch(typeof s){case"function":a=new r(s);case"object":if(a===this||a.closed||typeof a.unsubscribe!="function")return a;if(this.closed)return a.unsubscribe(),a;if(!(a instanceof r)){var i=a;a=new r,a._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}var o=a._parentOrParents;if(o===null)a._parentOrParents=this;else if(o instanceof r){if(o===this)return a;a._parentOrParents=[o,this]}else if(o.indexOf(this)===-1)o.push(this);else return a;var x=this._subscriptions;return x===null?this._subscriptions=[a]:x.push(a),a},r.prototype.remove=function(s){var a=this._subscriptions;if(a){var i=a.indexOf(s);i!==-1&&a.splice(i,1)}},r.EMPTY=function(s){return s.closed=!0,s}(new r),r}();function flattenUnsubscriptionErrors(r){return r.reduce(function(s,a){return s.concat(a instanceof UnsubscriptionError?a.errors:a)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(r){__extends(s,r);function s(a,i,o){var x=r.call(this)||this;switch(x.syncErrorValue=null,x.syncErrorThrown=!1,x.syncErrorThrowable=!1,x.isStopped=!1,arguments.length){case 0:x.destination=empty$3;break;case 1:if(!a){x.destination=empty$3;break}if(typeof a=="object"){a instanceof s?(x.syncErrorThrowable=a.syncErrorThrowable,x.destination=a,a.add(x)):(x.syncErrorThrowable=!0,x.destination=new SafeSubscriber(x,a));break}default:x.syncErrorThrowable=!0,x.destination=new SafeSubscriber(x,a,i,o);break}return x}return s.prototype[rxSubscriber]=function(){return this},s.create=function(a,i,o){var x=new s(a,i,o);return x.syncErrorThrowable=!1,x},s.prototype.next=function(a){this.isStopped||this._next(a)},s.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},s.prototype._next=function(a){this.destination.next(a)},s.prototype._error=function(a){this.destination.error(a),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var a=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=a,this},s}(Subscription),SafeSubscriber=function(r){__extends(s,r);function s(a,i,o,x){var y=r.call(this)||this;y._parentSubscriber=a;var _,E=y;return isFunction(i)?_=i:i&&(_=i.next,o=i.error,x=i.complete,i!==empty$3&&(E=Object.create(i),isFunction(E.unsubscribe)&&y.add(E.unsubscribe.bind(E)),E.unsubscribe=y.unsubscribe.bind(y))),y._context=E,y._next=_,y._error=o,y._complete=x,y}return s.prototype.next=function(a){if(!this.isStopped&&this._next){var i=this._parentSubscriber;!config.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?this.__tryOrUnsub(this._next,a):this.__tryOrSetError(i,this._next,a)&&this.unsubscribe()}},s.prototype.error=function(a){if(!this.isStopped){var i=this._parentSubscriber,o=config.useDeprecatedSynchronousErrorHandling;if(this._error)!o||!i.syncErrorThrowable?(this.__tryOrUnsub(this._error,a),this.unsubscribe()):(this.__tryOrSetError(i,this._error,a),this.unsubscribe());else if(i.syncErrorThrowable)o?(i.syncErrorValue=a,i.syncErrorThrown=!0):hostReportError(a),this.unsubscribe();else{if(this.unsubscribe(),o)throw a;hostReportError(a)}}},s.prototype.complete=function(){var a=this;if(!this.isStopped){var i=this._parentSubscriber;if(this._complete){var o=function(){return a._complete.call(a._context)};!config.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?(this.__tryOrUnsub(o),this.unsubscribe()):(this.__tryOrSetError(i,o),this.unsubscribe())}else this.unsubscribe()}},s.prototype.__tryOrUnsub=function(a,i){try{a.call(this._context,i)}catch(o){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw o;hostReportError(o)}},s.prototype.__tryOrSetError=function(a,i,o){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this._context,o)}catch(x){return config.useDeprecatedSynchronousErrorHandling?(a.syncErrorValue=x,a.syncErrorThrown=!0,!0):(hostReportError(x),!0)}return!1},s.prototype._unsubscribe=function(){var a=this._parentSubscriber;this._context=null,this._parentSubscriber=null,a.unsubscribe()},s}(Subscriber);function canReportError(r){for(;r;){var s=r,a=s.closed,i=s.destination,o=s.isStopped;if(a||o)return!1;i&&i instanceof Subscriber?r=i:r=null}return!0}function toSubscriber(r,s,a){if(r){if(r instanceof Subscriber)return r;if(r[rxSubscriber])return r[rxSubscriber]()}return!r&&!s&&!a?new Subscriber(empty$3):new Subscriber(r,s,a)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(r){return r}function pipeFromArray(r){return r.length===0?identity:r.length===1?r[0]:function(a){return r.reduce(function(i,o){return o(i)},a)}}var Observable=function(){function r(s){this._isScalar=!1,s&&(this._subscribe=s)}return r.prototype.lift=function(s){var a=new r;return a.source=this,a.operator=s,a},r.prototype.subscribe=function(s,a,i){var o=this.operator,x=toSubscriber(s,a,i);if(o?x.add(o.call(x,this.source)):x.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!x.syncErrorThrowable?this._subscribe(x):this._trySubscribe(x)),config.useDeprecatedSynchronousErrorHandling&&x.syncErrorThrowable&&(x.syncErrorThrowable=!1,x.syncErrorThrown))throw x.syncErrorValue;return x},r.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(a){config.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=a),canReportError(s)?s.error(a):console.warn(a)}},r.prototype.forEach=function(s,a){var i=this;return a=getPromiseCtor(a),new a(function(o,x){var y;y=i.subscribe(function(_){try{s(_)}catch(E){x(E),y&&y.unsubscribe()}},x,o)})},r.prototype._subscribe=function(s){var a=this.source;return a&&a.subscribe(s)},r.prototype[observable]=function(){return this},r.prototype.pipe=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return s.length===0?this:pipeFromArray(s)(this)},r.prototype.toPromise=function(s){var a=this;return s=getPromiseCtor(s),new s(function(i,o){var x;a.subscribe(function(y){return x=y},function(y){return o(y)},function(){return i(x)})})},r.create=function(s){return new r(s)},r}();function getPromiseCtor(r){if(r||(r=Promise),!r)throw new Error("no Promise impl found");return r}var subscribeToArray=function(r){return function(s){for(var a=0,i=r.length;a<i&&!s.closed;a++)s.next(r[a]);s.complete()}};function map(r,s){return function(i){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new MapOperator(r,s))}}var MapOperator=function(){function r(s,a){this.project=s,this.thisArg=a}return r.prototype.call=function(s,a){return a.subscribe(new MapSubscriber(s,this.project,this.thisArg))},r}(),MapSubscriber=function(r){__extends(s,r);function s(a,i,o){var x=r.call(this,a)||this;return x.project=i,x.count=0,x.thisArg=o||x,x}return s.prototype._next=function(a){var i;try{i=this.project.call(this.thisArg,a,this.count++)}catch(o){this.destination.error(o);return}this.destination.next(i)},s}(Subscriber),subscribeToPromise=function(r){return function(s){return r.then(function(a){s.closed||(s.next(a),s.complete())},function(a){return s.error(a)}).then(null,hostReportError),s}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator$1=getSymbolIterator(),subscribeToIterable=function(r){return function(s){var a=r[iterator$1]();do{var i=void 0;try{i=a.next()}catch(o){return s.error(o),s}if(i.done){s.complete();break}if(s.next(i.value),s.closed)break}while(!0);return typeof a.return=="function"&&s.add(function(){a.return&&a.return()}),s}},subscribeToObservable=function(r){return function(s){var a=r[observable]();if(typeof a.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return a.subscribe(s)}},isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function isPromise(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var subscribeTo=function(r){if(r&&typeof r[observable]=="function")return subscribeToObservable(r);if(isArrayLike(r))return subscribeToArray(r);if(isPromise(r))return subscribeToPromise(r);if(r&&typeof r[iterator$1]=="function")return subscribeToIterable(r);var s=isObject(r)?"an invalid object":"'"+r+"'",a="You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(a)};function from(r,s){return r instanceof Observable?r:new Observable(subscribeTo(r))}var SimpleInnerSubscriber=function(r){__extends(s,r);function s(a){var i=r.call(this)||this;return i.parent=a,i}return s.prototype._next=function(a){this.parent.notifyNext(a)},s.prototype._error=function(a){this.parent.notifyError(a),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},s}(Subscriber),SimpleOuterSubscriber=function(r){__extends(s,r);function s(){return r!==null&&r.apply(this,arguments)||this}return s.prototype.notifyNext=function(a){this.destination.next(a)},s.prototype.notifyError=function(a){this.destination.error(a)},s.prototype.notifyComplete=function(){this.destination.complete()},s}(Subscriber);function innerSubscribe(r,s){if(!s.closed){if(r instanceof Observable)return r.subscribe(s);var a;try{a=subscribeTo(r)(s)}catch(i){s.error(i)}return a}}function mergeMap(r,s,a){return a===void 0&&(a=Number.POSITIVE_INFINITY),typeof s=="function"?function(i){return i.pipe(mergeMap(function(o,x){return from(r(o,x)).pipe(map(function(y,_){return s(o,y,x,_)}))},a))}:(typeof s=="number"&&(a=s),function(i){return i.lift(new MergeMapOperator(r,a))})}var MergeMapOperator=function(){function r(s,a){a===void 0&&(a=Number.POSITIVE_INFINITY),this.project=s,this.concurrent=a}return r.prototype.call=function(s,a){return a.subscribe(new MergeMapSubscriber(s,this.project,this.concurrent))},r}(),MergeMapSubscriber=function(r){__extends(s,r);function s(a,i,o){o===void 0&&(o=Number.POSITIVE_INFINITY);var x=r.call(this,a)||this;return x.project=i,x.concurrent=o,x.hasCompleted=!1,x.buffer=[],x.active=0,x.index=0,x}return s.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)},s.prototype._tryNext=function(a){var i,o=this.index++;try{i=this.project(a,o)}catch(x){this.destination.error(x);return}this.active++,this._innerSub(i)},s.prototype._innerSub=function(a){var i=new SimpleInnerSubscriber(this),o=this.destination;o.add(i);var x=innerSubscribe(a,i);x!==i&&o.add(x)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(a){this.destination.next(a)},s.prototype.notifyComplete=function(){var a=this.buffer;this.active--,a.length>0?this._next(a.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);const SvgAppSidebarUploadImageicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...r},reactExports.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,transform:"translate(-.8)"},reactExports.createElement("path",{d:"M21.6 17.8a1.6 1.6 0 0 1-1.6 1.6H5.6A1.6 1.6 0 0 1 4 17.8V9a1.6 1.6 0 0 1 1.6-1.6h3.2L10.4 5h4.8l1.6 2.4H20A1.6 1.6 0 0 1 21.6 9v8.8z"}),reactExports.createElement("circle",{cx:12.8,cy:13,r:3.2}))),SvgSettingicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("mask",{id:"mask0_7_1043",width:20,height:20,x:2,y:2,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#fff",d:"M11.8 8.6a3.2 3.2 0 1 0 0 6.4 3.2 3.2 0 0 0 0-6.4Zm0 1.6a1.6 1.6 0 1 1 0 3.2 1.6 1.6 0 0 1 0-3.2Zm0-8a2.4 2.4 0 0 0-2.4 2.4v.136l-.008.086a.519.519 0 0 1-.161.293l-.064.048-.05.011a.8.8 0 0 0-.104.038.52.52 0 0 1-.574-.104l-.041-.042a2.4 2.4 0 1 0-3.395 3.396l.047.048a.517.517 0 0 1 .098.567c-.093.247-.281.382-.495.387H4.6a2.4 2.4 0 1 0 0 4.8h.136c.204 0 .391.125.473.315.089.202.048.43-.1.582l-.043.041a2.4 2.4 0 1 0 3.396 3.395l.048-.047a.517.517 0 0 1 .567-.098c.247.092.382.281.387.495V19a2.4 2.4 0 1 0 4.8 0v-.136c0-.204.125-.391.315-.473a.523.523 0 0 1 .582.1l.041.043a2.4 2.4 0 1 0 3.395-3.396l-.047-.048a.517.517 0 0 1-.098-.567.523.523 0 0 1 .48-.323H19a2.4 2.4 0 1 0 0-4.8h-.136l-.086-.008a.52.52 0 0 1-.293-.161l-.049-.064-.01-.05a.797.797 0 0 0-.038-.104.52.52 0 0 1 .104-.574l.042-.041a2.4 2.4 0 1 0-3.396-3.395l-.048.047a.517.517 0 0 1-.567.098.523.523 0 0 1-.323-.48V4.6a2.4 2.4 0 0 0-2.4-2.4Zm0 1.6a.8.8 0 0 1 .8.8v.072c.003.848.508 1.61 1.285 1.943a2.117 2.117 0 0 0 2.33-.427l.055-.054a.8.8 0 1 1 1.133 1.132l-.049.048-.116.13a2.121 2.121 0 0 0-.375 2.058l.022.111c.01.035.021.069.036.102A2.12 2.12 0 0 0 18.86 11H19a.8.8 0 0 1 0 1.6h-.072a2.121 2.121 0 0 0-1.943 1.285 2.117 2.117 0 0 0 .427 2.33l.054.055a.8.8 0 1 1-1.132 1.133l-.048-.049a2.123 2.123 0 0 0-2.345-.43 2.117 2.117 0 0 0-1.277 1.937V19a.8.8 0 0 1-1.6 0v-.072a2.128 2.128 0 0 0-1.238-1.897l-.15-.062c-.746-.33-1.672-.163-2.291.443l-.055.054a.8.8 0 1 1-1.133-1.132l.049-.048c.612-.626.78-1.552.43-2.345a2.117 2.117 0 0 0-1.937-1.277H4.6a.8.8 0 0 1 0-1.6h.072a2.128 2.128 0 0 0 1.897-1.238l.062-.15c.33-.746.163-1.672-.443-2.291l-.054-.055a.8.8 0 1 1 1.132-1.133l.048.049.13.116c.575.48 1.354.62 2.058.374l.111-.02a.8.8 0 0 0 .102-.037A2.12 2.12 0 0 0 11 4.74V4.6a.8.8 0 0 1 .8-.8Z"})),reactExports.createElement("g",{mask:"url(#mask0_7_1043)"},reactExports.createElement("path",{fill:"currentColor",d:"M11.8 8.6a3.2 3.2 0 1 0 0 6.4 3.2 3.2 0 0 0 0-6.4Zm0 1.6a1.6 1.6 0 1 1 0 3.2 1.6 1.6 0 0 1 0-3.2Zm0-8a2.4 2.4 0 0 0-2.4 2.4v.136l-.008.086a.519.519 0 0 1-.161.293l-.064.048-.05.011a.8.8 0 0 0-.104.038.52.52 0 0 1-.574-.104l-.041-.042a2.4 2.4 0 1 0-3.395 3.396l.047.048a.517.517 0 0 1 .098.567c-.093.247-.281.382-.495.387H4.6a2.4 2.4 0 1 0 0 4.8h.136c.204 0 .391.125.473.315.089.202.048.43-.1.582l-.043.041a2.4 2.4 0 1 0 3.396 3.395l.048-.047a.517.517 0 0 1 .567-.098c.247.092.382.281.387.495V19a2.4 2.4 0 1 0 4.8 0v-.136c0-.204.125-.391.315-.473a.523.523 0 0 1 .582.1l.041.043a2.4 2.4 0 1 0 3.395-3.396l-.047-.048a.517.517 0 0 1-.098-.567.523.523 0 0 1 .48-.323H19a2.4 2.4 0 1 0 0-4.8h-.136l-.086-.008a.52.52 0 0 1-.293-.161l-.049-.064-.01-.05a.797.797 0 0 0-.038-.104.52.52 0 0 1 .104-.574l.042-.041a2.4 2.4 0 1 0-3.396-3.395l-.048.047a.517.517 0 0 1-.567.098.523.523 0 0 1-.323-.48V4.6a2.4 2.4 0 0 0-2.4-2.4Zm0 1.6a.8.8 0 0 1 .8.8v.072c.003.848.508 1.61 1.285 1.943a2.117 2.117 0 0 0 2.33-.427l.055-.054a.8.8 0 1 1 1.133 1.132l-.049.048-.116.13a2.121 2.121 0 0 0-.375 2.058l.022.111c.01.035.021.069.036.102A2.12 2.12 0 0 0 18.86 11H19a.8.8 0 0 1 0 1.6h-.072a2.121 2.121 0 0 0-1.943 1.285 2.117 2.117 0 0 0 .427 2.33l.054.055a.8.8 0 1 1-1.132 1.133l-.048-.049a2.123 2.123 0 0 0-2.345-.43 2.117 2.117 0 0 0-1.277 1.937V19a.8.8 0 0 1-1.6 0v-.072a2.128 2.128 0 0 0-1.238-1.897l-.15-.062c-.746-.33-1.672-.163-2.291.443l-.055.054a.8.8 0 1 1-1.133-1.132l.049-.048c.612-.626.78-1.552.43-2.345a2.117 2.117 0 0 0-1.937-1.277H4.6a.8.8 0 0 1 0-1.6h.072a2.128 2.128 0 0 0 1.897-1.238l.062-.15c.33-.746.163-1.672-.443-2.291l-.054-.055a.8.8 0 1 1 1.132-1.133l.048.049.13.116c.575.48 1.354.62 2.058.374l.111-.02a.8.8 0 0 0 .102-.037A2.12 2.12 0 0 0 11 4.74V4.6a.8.8 0 0 1 .8-.8Z"}),reactExports.createElement("path",{fill:"#currentColor",d:"M24 0H0v24h24V0Z"}))),SvgPlusMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.774 4.145a.8.8 0 0 0-1.6-.006l-.022 6-5.95-.022a.8.8 0 0 0-.006 1.6l5.95.022-.023 6.001a.8.8 0 1 0 1.6.006l.022-6 6.052.022a.8.8 0 1 0 .006-1.6l-6.051-.022.022-6Z",clipRule:"evenodd"}));var smartcrop$1={exports:{}};(function(r,s){(function(){var a={};function i(){throw new Error("No native promises and smartcrop.Promise not set.")}a.Promise=typeof Promise<"u"?Promise:i,a.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:.2,skinColor:[.78,.57,.44],skinBias:.01,skinBrightnessMin:.2,skinBrightnessMax:1,skinThreshold:.8,skinWeight:1.8,saturationBrightnessMin:.05,saturationBrightnessMax:.9,saturationThreshold:.4,saturationBias:.2,saturationWeight:.1,scoreDownSample:8,step:8,scaleStep:.1,minScale:1,maxScale:1,edgeRadius:.4,edgeWeight:-20,outsideImportance:-.5,boostWeight:100,ruleOfThirds:!0,prescale:!0,imageOperations:null,canvasFactory:L,debug:!1},a.crop=function(X,ee,ae){var ie=W({},a.DEFAULTS,ee);ie.aspect&&(ie.width=ie.aspect,ie.height=1),ie.imageOperations===null&&(ie.imageOperations=D(ie.canvasFactory));var se=ie.imageOperations,Q=1,Z=1;return se.open(X,ie.input).then(function(J){return ie.width&&ie.height&&(Q=O(J.width/ie.width,J.height/ie.height),ie.cropWidth=~~(ie.width*Q),ie.cropHeight=~~(ie.height*Q),ie.minScale=O(ie.maxScale,B(1/Q,ie.minScale)),ie.prescale!==!1&&(Z=O(B(256/J.width,256/J.height),1),Z<1?(J=se.resample(J,J.width*Z,J.height*Z),ie.cropWidth=~~(ie.cropWidth*Z),ie.cropHeight=~~(ie.cropHeight*Z),ie.boost&&(ie.boost=ie.boost.map(function(te){return{x:~~(te.x*Z),y:~~(te.y*Z),width:~~(te.width*Z),height:~~(te.height*Z),weight:te.weight}}))):Z=1)),J}).then(function(J){return se.getData(J).then(function(te){for(var de=A(ie,te),ce=de.crops||[de.topCrop],me=0,ve=ce.length;me<ve;me++){var xe=ce[me];xe.x=~~(xe.x/Z),xe.y=~~(xe.y/Z),xe.width=~~(xe.width/Z),xe.height=~~(xe.height/Z)}return ae&&ae(de),de})})},a.isAvailable=function(X){if(!a.Promise)return!1;var ee=X?X.canvasFactory:L;if(ee===L){var ae=document.createElement("canvas");if(!ae.getContext("2d"))return!1}return!0};function o(X,ee){for(var ae=X.data,ie=ee.data,se=X.width,Q=X.height,Z=0;Z<Q;Z++)for(var J=0;J<se;J++){var te=(Z*se+J)*4,de;J===0||J>=se-1||Z===0||Z>=Q-1?de=G(ae,te):de=G(ae,te)*4-G(ae,te-se*4)-G(ae,te-4)-G(ae,te+4)-G(ae,te+se*4),ie[te+1]=de}}function x(X,ee,ae){for(var ie=ee.data,se=ae.data,Q=ee.width,Z=ee.height,J=0;J<Z;J++)for(var te=0;te<Q;te++){var de=(J*Q+te)*4,ce=U(ie[de],ie[de+1],ie[de+2])/255,me=T(X,ie[de],ie[de+1],ie[de+2]),ve=me>X.skinThreshold,xe=ce>=X.skinBrightnessMin&&ce<=X.skinBrightnessMax;ve&&xe?se[de]=(me-X.skinThreshold)*(255/(1-X.skinThreshold)):se[de]=0}}function y(X,ee,ae){for(var ie=ee.data,se=ae.data,Q=ee.width,Z=ee.height,J=0;J<Z;J++)for(var te=0;te<Q;te++){var de=(J*Q+te)*4,ce=U(ie[de],ie[de+1],ie[de+2])/255,me=oe(ie[de],ie[de+1],ie[de+2]),ve=me>X.saturationThreshold,xe=ce>=X.saturationBrightnessMin&&ce<=X.saturationBrightnessMax;xe&&ve?se[de+2]=(me-X.saturationThreshold)*(255/(1-X.saturationThreshold)):se[de+2]=0}}function _(X,ee){if(X.boost){for(var ae=ee.data,ie=0;ie<ee.width;ie+=4)ae[ie+3]=0;for(ie=0;ie<X.boost.length;ie++)E(X.boost[ie],X,ee)}}function E(X,ee,ae){for(var ie=ae.data,se=ae.width,Q=~~X.x,Z=~~(X.x+X.width),J=~~X.y,te=~~(X.y+X.height),de=X.weight*255,ce=J;ce<te;ce++)for(var me=Q;me<Z;me++){var ve=(ce*se+me)*4;ie[ve+3]+=de}}function R(X,ee,ae){for(var ie=[],se=O(ee,ae),Q=X.cropWidth||se,Z=X.cropHeight||se,J=X.maxScale;J>=X.minScale;J-=X.scaleStep)for(var te=0;te+Z*J<=ae;te+=X.step)for(var de=0;de+Q*J<=ee;de+=X.step)ie.push({x:de,y:te,width:Q*J,height:Z*J});return ie}function S(X,ee,ae){for(var ie={detail:0,saturation:0,skin:0,boost:0,total:0},se=ee.data,Q=X.scoreDownSample,Z=1/Q,J=ee.height*Q,te=ee.width*Q,de=ee.width,ce=0;ce<J;ce+=Q)for(var me=0;me<te;me+=Q){var ve=(~~(ce*Z)*de+~~(me*Z))*4,xe=j(X,ae,me,ce),ge=se[ve+1]/255;ie.skin+=se[ve]/255*(ge+X.skinBias)*xe,ie.detail+=ge*xe,ie.saturation+=se[ve+2]/255*(ge+X.saturationBias)*xe,ie.boost+=se[ve+3]/255*xe}return ie.total=(ie.detail*X.detailWeight+ie.skin*X.skinWeight+ie.saturation*X.saturationWeight+ie.boost*X.boostWeight)/(ae.width*ae.height),ie}function j(X,ee,ae,ie){if(ee.x>ae||ae>=ee.x+ee.width||ee.y>ie||ie>=ee.y+ee.height)return X.outsideImportance;ae=(ae-ee.x)/ee.width,ie=(ie-ee.y)/ee.height;var se=N(.5-ae)*2,Q=N(.5-ie)*2,Z=Math.max(se-1+X.edgeRadius,0),J=Math.max(Q-1+X.edgeRadius,0),te=(Z*Z+J*J)*X.edgeWeight,de=1.41-F(se*se+Q*Q);return X.ruleOfThirds&&(de+=Math.max(0,de+te+.5)*1.2*(V(se)+V(Q))),de+te}a.importance=j;function T(X,ee,ae,ie){var se=F(ee*ee+ae*ae+ie*ie),Q=ee/se-X.skinColor[0],Z=ae/se-X.skinColor[1],J=ie/se-X.skinColor[2],te=F(Q*Q+Z*Z+J*J);return 1-te}function A(X,ee){var ae={},ie=new M(ee.width,ee.height);o(ee,ie),x(X,ee,ie),y(X,ee,ie),_(X,ie);for(var se=P(ie,X.scoreDownSample),Q=-1/0,Z=null,J=R(X,ee.width,ee.height),te=0,de=J.length;te<de;te++){var ce=J[te];ce.score=S(X,se,ce),ce.score.total>Q&&(Z=ce,Q=ce.score.total)}return ae.topCrop=Z,X.debug&&Z&&(ae.crops=J,ae.debugOutput=ie,ae.debugOptions=X,ae.debugTopCrop=W({},ae.topCrop)),ae}function M(X,ee,ae){this.width=X,this.height=ee,ae?this.data=new Uint8ClampedArray(ae):this.data=new Uint8ClampedArray(X*ee*4)}a.ImgData=M;function P(X,ee){for(var ae=X.data,ie=X.width,se=Math.floor(X.width/ee),Q=Math.floor(X.height/ee),Z=new M(se,Q),J=Z.data,te=1/(ee*ee),de=0;de<Q;de++)for(var ce=0;ce<se;ce++){for(var me=(de*se+ce)*4,ve=0,xe=0,ge=0,be=0,ye=0,Ie=0,Pe=0;Pe<ee;Pe++)for(var we=0;we<ee;we++){var Re=((de*ee+Pe)*ie+(ce*ee+we))*4;ve+=ae[Re],xe+=ae[Re+1],ge+=ae[Re+2],be+=ae[Re+3],ye=Math.max(ye,ae[Re]),Ie=Math.max(Ie,ae[Re+1])}J[me]=ve*te*.5+ye*.5,J[me+1]=xe*te*.7+Ie*.3,J[me+2]=ge*te,J[me+3]=be*te}return Z}a._downSample=P;function L(X,ee){var ae=document.createElement("canvas");return ae.width=X,ae.height=ee,ae}function D(X){return{open:function(ee){var ae=ee.naturalWidth||ee.width,ie=ee.naturalHeight||ee.height,se=X(ae,ie),Q=se.getContext("2d");return ee.naturalWidth&&(ee.naturalWidth!=ee.width||ee.naturalHeight!=ee.height)?(se.width=ee.naturalWidth,se.height=ee.naturalHeight):(se.width=ee.width,se.height=ee.height),Q.drawImage(ee,0,0),a.Promise.resolve(se)},resample:function(ee,ae,ie){return Promise.resolve(ee).then(function(se){var Q=X(~~ae,~~ie),Z=Q.getContext("2d");return Z.drawImage(se,0,0,se.width,se.height,0,0,Q.width,Q.height),a.Promise.resolve(Q)})},getData:function(ee){return Promise.resolve(ee).then(function(ae){var ie=ae.getContext("2d"),se=ie.getImageData(0,0,ae.width,ae.height);return new M(ae.width,ae.height,se.data)})}}}a._canvasImageOperations=D;var O=Math.min,B=Math.max,N=Math.abs,F=Math.sqrt;function W(X){for(var ee=1,ae=arguments.length;ee<ae;ee++){var ie=arguments[ee];if(ie)for(var se in ie)X[se]=ie[se]}return X}function V(X){return X=((X-1/3+1)%2*.5-.5)*16,Math.max(1-X*X,0)}function U(X,ee,ae){return .5126*ae+.7152*ee+.0722*X}function G(X,ee){return U(X[ee],X[ee+1],X[ee+2])}function oe(X,ee,ae){var ie=B(X/255,ee/255,ae/255),se=O(X/255,ee/255,ae/255);if(ie===se)return 0;var Q=(ie+se)/2,Z=ie-se;return Q>.5?Z/(2-ie-se):Z/(ie+se)}s.smartcrop=a,r.exports=a})()})(smartcrop$1,smartcrop$1.exports);var smartcropExports=smartcrop$1.exports;const smartcrop=getDefaultExportFromCjs(smartcropExports);async function getImageFromFile(r){const s=document.createElement("img");return s.src=URL.createObjectURL(r),s.decode!=null?(await s.decode(),s):new Promise((a,i)=>{s.onload=()=>{a(s),s.remove()},s.onerror=o=>{s.remove(),i(o)},s.style.cssText="position: fixed; top: 0; left: 0;  width: 1px; height: 1px; z-index: -1",document.body.append(s)})}let avatarSize=0;function getAvatarSize(){return avatarSize===0&&(avatarSize=getCssExpressionPixelSize("var(--app-sidebar-item-avatar-size)")*3,avatarSize===0&&(avatarSize=120)),avatarSize}async function getCroppedCanvas(r){const s=getAvatarSize(),{topCrop:{x:a,y:i,width:o,height:x}}=await smartcrop.crop(r),y=document.createElement("canvas");y.width=s,y.height=s;const _=s/Math.max(o,x);return y.getContext("2d").drawImage(r,a,i,o,x,0,0,o*_,x*_),y}function cropAppSidebarProfileImageFile(r){const s=r.name,a="image/jpeg";return from(getImageFromFile(r)).pipe(mergeMap(getCroppedCanvas),mergeMap(async i=>i.toDataURL(a,.6)),mergeMap(async i=>fetch(i)),mergeMap(async i=>i.blob()),mergeMap(async i=>new File([i],s,{type:a,lastModified:Date.now()})))}var AppSidebarProfileImageTheme=(r=>(r[r.DEFAULT=0]="DEFAULT",r[r.POPUP=1]="POPUP",r[r.PROFILE=2]="PROFILE",r))(AppSidebarProfileImageTheme||{});const ENTER_WITHOUT_FADE_TIMEOUT=100,INITIAL_STATE={hasFadeIn:!1,isInFadeIn:!1,loadedImage:null,previousLoadedImage:null};function createUpload$(r,s){return new Observable(a=>{const i=new AbortController;return r.uploadFile(s,"profile_image",i.signal).then(({url:o})=>{a.next(o),a.complete()},o=>{i.signal.aborted||a.error(o)}),()=>i.abort()})}function useUploadImage(){const r=useS3UploadManager(),{isRunning:s,updateUserDetails:a}=useAuthUpdateUserDetails(),[,i]=reactExports.useReducer(_=>_+1,0),o=reactExports.useRef(!1),x=reactExports.useRef();reactExports.useEffect(function(){return()=>{var E;(E=x.current)==null||E.unsubscribe()}},[]);function y(_){var R;if(o.current)return;o.current=!0,(R=x.current)==null||R.unsubscribe();const E=cropAppSidebarProfileImageFile(_).pipe(mergeMap(S=>createUpload$(r,S))).subscribe(S=>{o.current=!1,a({profilePicture:S}),i()},S=>{logError(S,"AppSidebarProfileImage -> useUploadImage()"),alert("Something went wrong, please try again"),o.current=!1,i()});x.current=E,i()}return{isUploading:o.current||s,upload:y}}function useImage(r){reactExports.useMemo(()=>{if(r==null)return;const R=new Image;R.src=r,R.decode!=null&&R.decode().then(()=>{},()=>{})},[r]);const s=reactExports.useMemo(()=>Date.now(),[r]);let[{hasFadeIn:a,isInFadeIn:i,loadedImage:o,previousLoadedImage:x},y]=reactExports.useState(INITIAL_STATE);o!=null&&o!==r&&(x=o,{hasFadeIn:a,isInFadeIn:i,loadedImage:o}=INITIAL_STATE,y(x==null?INITIAL_STATE:{...INITIAL_STATE,previousLoadedImage:x}));function _(){const R=Date.now()-s>ENTER_WITHOUT_FADE_TIMEOUT;y(S=>({hasFadeIn:R,loadedImage:r,isInFadeIn:R,previousLoadedImage:R?S.previousLoadedImage:null}))}const E=i?function(R){R.currentTarget===R.target&&y(S=>S.hasFadeIn?{...S,hasFadeIn:!1,isInFadeIn:!1,previousLoadedImage:null}:S)}:void 0;return{isImageLoaded:o!=null,hasFadeIn:a,isInFadeIn:i,previousLoadedImage:x,onImageLoad:_,onFadeInAnimationEnd:E}}const AppSidebarProfileImage=reactExports.forwardRef(function({theme:s=0,imageUrl:a,isSideBarOpen:i,isUpload:o=!1,onClick:x},y){const _=reactExports.useRef(null),[E,R]=reactExports.useState(!1),{isImageLoaded:S,hasFadeIn:j,isInFadeIn:T,previousLoadedImage:A,onImageLoad:M,onFadeInAnimationEnd:P}=useImage(a),{isUploading:L,upload:D}=useUploadImage();function O(N){N.dataTransfer.files==null||N.dataTransfer.files.length===0||D(N.dataTransfer.files[0])}function B(N){N.currentTarget.files==null||N.currentTarget.files.length===0||D(N.currentTarget.files[0])}return jsxRuntimeExports.jsxs("div",{ref:y,title:"",className:cx$6("AppSidebarProfileImage",{"AppSidebarProfileImage--hasImageWhileUploading":L&&S&&!T,"AppSidebarProfileImage--showBorder":!(S&&!T||A!=null),"AppSidebarProfileImage--isSideBarClosed":!i,"AppSidebarProfileImage--themePopup":s===1,"AppSidebarProfileImage--themeProfile":s===2}),children:[A==null&&a==null?null:jsxRuntimeExports.jsx("img",{hidden:A==null,alt:"",src:A||a,className:"AppSidebarProfileImage__img"}),a==null?jsxRuntimeExports.jsx("div",{hidden:L,className:"AppSidebarProfileImage__uploadIcon",children:o?jsxRuntimeExports.jsx(SvgAppSidebarUploadImageicon,{}):jsxRuntimeExports.jsx(SvgSettingicon,{})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{alt:"",hidden:!S,src:a,onLoad:M,onAnimationEnd:P,className:cx$6("AppSidebarProfileImage__img",{"AppSidebarProfileImage__img--hasFadeIn":j})}),jsxRuntimeExports.jsx("div",{className:cx$6("AppSidebarProfileImage__imgHover",{"AppSidebarProfileImage__imgHover--hasHover":o&&E}),children:jsxRuntimeExports.jsx(SvgPlusMiniicon,{})})]}),jsxRuntimeExports.jsx("div",{hidden:!L,className:cx$6("AppSidebarProfileImage__spinner",{"AppSidebarProfileImage__spinner--hasImage":S&&!T}),children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),jsxRuntimeExports.jsx("input",{ref:_,type:o?"file":"button",hidden:!i,"tab-index":-1,disabled:L,multiple:!1,accept:"image/png, image/jpeg",onDrop:O,onChange:B,onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:x,"data-testid":`app-sidebar-profile-image-${s}`,className:"AppSidebarProfileImage__input"})]})}),AppSidebarProfileImage__memo=reactExports.memo(AppSidebarProfileImage);var styles$1a={button:"twj6pk0 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9",profileHeader:"twj6pk1",goPremium:"twj6pk5",profileImage:"twj6pk2",fullName:"twj6pk3",tagLine:"twj6pk4"};const LS_DEFAULT_NEW_TAB="anydo.settings.defaultNewTab";function redirectToDefaultNewTab(){switch(!0){case!0:browser.tabs.update({url:"chrome://new-tab-page"});break}}async function isDefaultNewTab(){const{[LS_DEFAULT_NEW_TAB]:r=!0}=await browser.storage.local.get([LS_DEFAULT_NEW_TAB]);return!!r}async function setDefaultNewTab(r){await browser.storage.local.set({[LS_DEFAULT_NEW_TAB]:r})}const AppBarMenu=r=>{const s=useNavigate(),{userDetails:a}=useAuth();assertNonNullable(a);const i=useI18n(),[o,x]=reactExports.useState(!1),y=reactExports.useCallback(()=>x(!1),[]),_=useIsPremium(),E=reactExports.useRef(null),R=reactExports.useRef(null);useOutSideClick(reactExports.useMemo(()=>[E,R],[]),y);const S=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),y],j=getImageUrl(a);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{ref:E,className:styles$1a.button,type:"button",onClick:()=>x(T=>!T),children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:i.formatMessage("_.buttons.more-options"),children:jsxRuntimeExports.jsx(MoreCircleIcon,{})})}),jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[S],children:jsxRuntimeExports.jsx(DropdownMenu,{scrollbars:!0,offset:0,isVisible:o,position:"bottom-end",from:E.current,animationDelay:0,children:jsxRuntimeExports.jsxs("div",{ref:R,children:[jsxRuntimeExports.jsxs("div",{className:styles$1a.profileHeader,children:[jsxRuntimeExports.jsx("div",{className:styles$1a.profileImage,children:jsxRuntimeExports.jsx(AppSidebarProfileImage__memo,{theme:AppSidebarProfileImageTheme.PROFILE,imageUrl:j,isUpload:!0,isSideBarOpen:!0})}),jsxRuntimeExports.jsx("div",{className:styles$1a.fullName,children:a.name}),jsxRuntimeExports.jsx("div",{className:styles$1a.tagLine,children:a.email})]}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{s("/me")},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.settingsMenu.profile"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{window.open(new URL("/tasks/all",APP_BASE_URL))},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.open-anydo"})}),!_&&jsxRuntimeExports.jsx(DropdownMenu.Item,{className:styles$1a.goPremium,onClick:()=>{openNewWindowUrl(new URL("/?d=anydo%3A%2F%2Fanydo%3Faction%3Dopenupsell",APP_BASE_URL))},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.premium.goPremium"})}),jsxRuntimeExports.jsx(ToggleNewTab,{}),r.type==="tasks"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{r.onCompleteAllTasks(),x(!1)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.completeAll"})})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{window.open(new URL("/?d=anydo%3A%2F%2Fanydo%3Faction%3Dwhatsnew",APP_BASE_URL))},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppHeaderProductUpdateBannerLayout.modal-title"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{s("/support")},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.settingsMenu.support"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:()=>{s("/about")},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.settingsMenu.about"})})]})})})]})},ToggleNewTab=()=>{const[r,s]=reactExports.useState(!1);return reactExports.useEffect(()=>{isDefaultNewTab().then(a=>s(!a))},[]),jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:jsxRuntimeExports.jsx("div",{style:{paddingLeft:"4px",paddingRight:"4px"},children:jsxRuntimeExports.jsx(Switch,{size:"small",theme:"new",checked:r,stopClickPropagation:!0,onChange:()=>{setDefaultNewTab(r),s(!r)}})}),onClick:()=>{setDefaultNewTab(r),s(!r)},children:"New tab"})};function getImageUrl(r){if(r.profilePicture){const a=r.profilePicture;if(a!=null&&a!=="")return a}const{googleAvatarUrl:s}=r;return s!=null&&s!==""?s:noProfileImageUrl}const CloseIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",...r,children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"m12 4-8 8M4 4l8 8"})}),SvgSendicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12.6 17.2V8M8 12.6 12.6 8l4.6 4.6"}));function areTaskLabelsTooltipContentLabelsModelViewsValid(r,s){if(r=r.filter(o=>!o.isDeleted),r.length<=1)return!0;const a=s?r.find(o=>o.id===s):void 0;let i=[];for(let o of r)a!=null&&o.id===a.id||i.push(getLabelData(o));if(a!=null)return!i.some(createDuplicationComparator(getLabelData(a)));for(;;){const o=i.pop();if(o===void 0)return!0;if(i.some(createDuplicationComparator(o)))return!1}}function createDuplicationComparator(r){return s=>s[0]===r[0]&&s[1]===r[1]}function getLabelData(r){const s=r.color,a=r.name.trim().normalize("NFC");return[s,a]}function LabelUpdateErrorModalContent({onClose:r}){return jsxRuntimeExports.jsxs("section",{className:"LabelUpdateErrorModal",children:[jsxRuntimeExports.jsx("h4",{className:"LabelUpdateErrorModal__errorHeading",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"LabelUpdateErrorModal.errors.existSameLabel.title"})}),jsxRuntimeExports.jsx("p",{className:"LabelUpdateErrorModal__errorText",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"LabelUpdateErrorModal.errors.existSameLabel.text"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{theme:"primary",onClick:()=>r(),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"})})})]})}function LabelUpdateErrorModal({isVisible:r,onClose:s}){return jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:r,onClose:s,children:jsxRuntimeExports.jsx(LabelUpdateErrorModalContent,{onClose:s})})}function TaskLabelsTooltipGrid({editedLabel:r,onLabelColorClick:s}){return jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipGrid",children:LABEL_COLORS.map((a,i)=>{const o=r!=null&&r.color===a;return jsxRuntimeExports.jsx("button",{type:"button",role:"checkbox","aria-checked":o,"aria-label":a,onClick:()=>s(a),className:"TaskLabelsTooltipGrid__item",style:{background:a},children:o?jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipGrid__item__icon",children:jsxRuntimeExports.jsx(PositiveIconLarge,{})}):null},i)})})}function TaskLabelsTooltipEditBody({editedLabel:r,isLabelInvalidModalVisible:s,onCloseLabelInvalidModal:a,onLabelColorClick:i,onLabelNameChange:o}){const x=useI18n(),y=r==null?"":r.name;return jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipEditBody",children:[jsxRuntimeExports.jsx(Label,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipEditBody.labelName.title"})}),jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipEditBody__labelNameInput",children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{disallowEnter:!0,isSingleLine:!0,autoFocus:!0,maxLength:LABEL_NAME_MAX_LENGTH,placeholder:x.formatMessage("TaskLabelsTooltipEditBody.labelName.placeholder"),value:y,onChange:o,theme:DynamicTextAreaTheme.LABELS_MODAL_EDIT_NAME})}),jsxRuntimeExports.jsx(Label,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipEditBody.labelColor.title"})}),jsxRuntimeExports.jsx(TaskLabelsTooltipGrid,{editedLabel:r,onLabelColorClick:i}),jsxRuntimeExports.jsx(LabelUpdateErrorModal,{isVisible:s,onClose:a})]})}const TaskLabelTooltipSearchIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"nonzero",d:"M11.6 13.003l1.42-1.19 3.54 4.218-1.42 1.191-3.54-4.219zm-2.3-.408c2.2 0 3.982-1.778 3.982-3.97A3.976 3.976 0 0 0 9.3 4.656a3.976 3.976 0 0 0-3.982 3.97A3.976 3.976 0 0 0 9.3 12.594zm0 1.322a5.299 5.299 0 0 1-5.305-5.292A5.299 5.299 0 0 1 9.3 3.333c2.93 0 5.305 2.37 5.305 5.292A5.299 5.299 0 0 1 9.3 13.917z"})})}),TaskLabelTooltipCheckboxOffIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:jsxRuntimeExports.jsx("rect",{x:"0.5",y:"0.5",width:"17",height:"17",rx:"5",fill:"none",fillRule:"evenodd",stroke:"currentColor"})})}),TaskLabelTooltipCheckboxOnIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.299 12.61l-2.257-2.556a.61.61 0 0 0-.83-.068.54.54 0 0 0-.074.79l2.658 3.01c.105.119.251.186.403.198a.603.603 0 0 0 .59-.183l6.075-6.881a.54.54 0 0 0-.076-.788.608.608 0 0 0-.829.067L7.3 12.61zM5 0h8a5 5 0 0 1 5 5v8a5 5 0 0 1-5 5H5a5 5 0 0 1-5-5V5a5 5 0 0 1 5-5z"})})}),TaskLabelTooltipCheckboxMixedIcon=reactExports.memo(function(){const s=`svg-${useUniqueId()}`;return jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("mask",{id:s,x:"0",y:"0",width:"18",height:"18",children:[jsxRuntimeExports.jsx("rect",{x:"0.5",y:"0.5",width:"17",height:"17",rx:"5",fill:"white",fillRule:"evenodd",stroke:"white"}),jsxRuntimeExports.jsx("rect",{x:"4",y:"8",width:"10",height:"2",fill:"black",fillRule:"evenodd",stroke:"none"})]})}),jsxRuntimeExports.jsx("rect",{mask:`url(#${s})`,x:"0.5",y:"0.5",width:"17",height:"17",rx:"5",fill:"currentColor",fillRule:"evenodd",stroke:"currentColor"})]})}),TaskLabelTooltipEditIcon=reactExports.memo(function(){return jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("path",{d:"M0 0h24v24H0z"}),jsxRuntimeExports.jsx("path",{stroke:"currentColor",d:"M8.213 12.975l2.828 2.828 8.268-8.267-2.829-2.829-8.267 8.268zm-.464.95l-1.196 3.588 3.588-1.196-2.392-2.391z"})]})})});function TaskLabelsTooltipLabelsItem({isEditable:r,isEnabled:s,isSelectedMixed:a,isSelectionDisabled:i,label:o,onEditClick:x,onSelectClick:y}){return jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipLabelsItem",style:{background:o.color},children:[r?jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipLabelsItem__edit",children:[jsxRuntimeExports.jsx("button",{type:"button",disabled:!s,className:cx$6("TaskLabelsTooltipLabelsItem__edit__clickableArea",{"TaskLabelsTooltipLabelsItem__edit__clickableArea--disabled":!s}),onClick:!s||x==null?void 0:()=>x(o)}),jsxRuntimeExports.jsx(TaskLabelTooltipEditIcon,{})]}):null,jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipLabelsItem__name",children:[jsxRuntimeExports.jsx("button",{type:"button",role:"checkbox","aria-checked":o.isSelected?a?"mixed":"true":"false",disabled:!s||i,className:cx$6("TaskLabelsTooltipLabelsItem__name__clickableArea",{"TaskLabelsTooltipLabelsItem__name__clickableArea--disabled":!s}),onClick:y==null?void 0:()=>y(o.id)}),jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipLabelsItem__name__group",children:[i?null:o.isSelected?a?jsxRuntimeExports.jsx(TaskLabelTooltipCheckboxMixedIcon,{}):jsxRuntimeExports.jsx(TaskLabelTooltipCheckboxOnIcon,{}):jsxRuntimeExports.jsx(TaskLabelTooltipCheckboxOffIcon,{}),jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipLabelsItem__name__group__name","data-private":"lipsum",children:o.name})]})]})]})}const MAIN_FILTER_QUERY_MAX_LENGTH=50;function FreeUserBody({showPremiumUpsell:r,labelsModelViews:s,mixedSelectionLabels:a,onEditClick:i,onSelectClick:o,onUpgradeToPremiumClick:x}){const y=useI18n(),_=s.find(j=>j.isPredefined),E=reactExports.useMemo(()=>[y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.important"),y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.family"),y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.deadline"),y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.nothing"),y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.trackback"),y.formatMessage("TaskLabelsTooltipLabelsBody.freeUser.demoLabel.name.scienceproject")],[y]),R=reactExports.useMemo(()=>Array.from({length:E.length},createGlobalModelId),[E.length]),S=reactExports.useMemo(()=>E.map((j,T)=>({id:R[T],color:LABEL_COLORS[T],isDeleted:!1,isNew:!0,isPredefined:!1,isSelected:!1,name:j})),[E,R]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_!=null?jsxRuntimeExports.jsx(TaskLabelsTooltipLabelsItem,{isSelectedMixed:a.has(_.id),isSelectionDisabled:!1,isEditable:!1,isEnabled:!0,label:_,onEditClick:i,onSelectClick:o}):null,r&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"TaskLabelsTooltipLabelsBody__upsell",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"TaskLabelsTooltipLabelsBody__upsellUpgradeButton",onClick:x,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipLabelsBody.upsellItem.button.upgrade"})}),jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipLabelsBody__upsell__title",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipLabelsBody.upsellItem.title"})})]}),S.map(j=>jsxRuntimeExports.jsx(TaskLabelsTooltipLabelsItem,{isSelectedMixed:a.has(j.id),isSelectionDisabled:!1,isEditable:!1,isEnabled:!1,label:j},j.id)),jsxRuntimeExports.jsx("button",{type:"button",className:cx$6("TaskLabelsTooltipLabelsBody__demoLabelsOverlay",{"TaskLabelsTooltipLabelsBody__demoLabelsOverlay--noPredefinedLabel":_==null}),onClick:x})]})]})}function PremiumUserBody({isEditable:r,isSelectionDisabled:s,labelsModelViews:a,mixedSelectionLabels:i,searchQuery:o,onEditClick:x,onSelectClick:y}){const _=reactExports.useMemo(()=>o.trim().toLowerCase().normalize("NFC"),[o]),E=reactExports.useMemo(()=>{const R=a.filter(S=>S.isDeleted?!1:S.name.toLowerCase().normalize("NFC").includes(_));return sortLabelsModelViews(R),R},[_,a]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:E.map(R=>jsxRuntimeExports.jsx(TaskLabelsTooltipLabelsItem,{isEditable:!R.isPredefined&&r,isEnabled:!0,isSelectedMixed:i.has(R.id),isSelectionDisabled:s,label:R,onEditClick:x,onSelectClick:y},R.id))})}function TaskLabelsTooltipLabelsBody({isElectronWindow:r,isPremium:s,showPremiumUpsell:a,isEditable:i,isSelectionDisabled:o,labelsModelViews:x,mixedSelectionLabels:y,onEditClick:_,onSelectClick:E,onUpgradeToPremiumClick:R}){const S=useI18n(),j=isCssScrollBarSupported(),T=reactExports.useRef(null),[A,M]=reactExports.useState(""),P=reactExports.useRef(!1);function L(){var D;A===""?(D=T.current)==null||D.focus():(P.current=!0,M(""))}return reactExports.useLayoutEffect(()=>{var D;P.current&&(P.current=!1,(D=T.current)==null||D.focus())}),jsxRuntimeExports.jsxs("div",{children:[s?jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipLabelsBody__filterInputContainer",children:jsxRuntimeExports.jsx(TextField,{ref:T,type:"text",maxLength:MAIN_FILTER_QUERY_MAX_LENGTH,placeholder:S.formatMessage("TaskLabelsTooltipLabelsBody.filter.placeholder"),value:A,onChange:D=>M(D),theme:"labelsFilter",startElement:jsxRuntimeExports.jsx(TaskLabelTooltipSearchIcon,{}),endElement:isBlankString(A)?null:jsxRuntimeExports.jsx("button",{type:"button",className:"TaskLabelsTooltipLabelsBody__clearButton",onClick:L,children:jsxRuntimeExports.jsx(NegativeIcon,{})})})}):null,jsxRuntimeExports.jsx("div",{className:cx$6("TaskLabelsTooltipLabelsBody__scroller",{"TaskLabelsTooltipLabelsBody__scroller--premiumUser":s,"TaskLabelsTooltipLabelsBody__scroller--freeUser":!s,"TaskLabelsTooltipLabelsBody__scroller--custom":j,"TaskLabelsTooltipLabelsBody__scroller--isElectronWindow":r}),children:jsxRuntimeExports.jsx("div",{className:cx$6("TaskLabelsTooltipLabelsBody__scrollerContainer",{"TaskLabelsTooltipLabelsBody__scrollerContainer--custom":j}),children:jsxRuntimeExports.jsx(UnsafeHeightTransition,{children:jsxRuntimeExports.jsx("div",{className:"TaskLabelsTooltipLabelsBody__labelsList",children:s?jsxRuntimeExports.jsx(PremiumUserBody,{labelsModelViews:x,mixedSelectionLabels:y,searchQuery:A,onEditClick:_,onSelectClick:E,isEditable:i,isSelectionDisabled:o}):jsxRuntimeExports.jsx(FreeUserBody,{showPremiumUpsell:a,labelsModelViews:x,mixedSelectionLabels:y,onEditClick:_,onSelectClick:E,onUpgradeToPremiumClick:R})})})})})]})}function mapLabelModelView(r,s){return{id:r.id,color:r.color,isDeleted:r.isDeleted,isNew:!1,isPredefined:r.isPredefined,isSelected:s.has(r.id),name:r.name}}function getIntialTab(r){return r==="LABEL_EDIT_OR_CREATION"?1:0}function createEmptyNewLabelModelView(){return{id:createGlobalModelId(),color:DEFAULT_LABEL_COLOR,isDeleted:!1,isNew:!0,isPredefined:!1,isSelected:!0,name:""}}class TaskLabelsTooltipContent extends reactExports.Component{constructor(a){super(a);$e(this,"initialTab");$e(this,"main_handleLabelEditClick",a=>{this.props.track("tag_screen_edit_tapped"),this.setState({editedLabel:a,activeTab:1})});$e(this,"main_handleCreateNewLabelClick",a=>{a.stopPropagation(),this.props.track("tag_screen_add_tapped"),this.setState({editedLabel:createEmptyNewLabelModelView(),activeTab:1})});$e(this,"main_handleLabelClick",a=>{this.setState(i=>fn(i,o=>{for(let x of o.labelsModelViews)if(x.id===a){x.isSelected=!x.isSelected;break}o.mixedSelectionLabels.delete(a)}))});$e(this,"main_renderModalBody",()=>{const{onUpgradeToPremiumClick:a,isPremiumUser:i,isElectronWindow:o=!1,shouldDisallowSelection:x=!1,isEditable:y=!0,showPremiumUpsell:_}=this.props,{labelsModelViews:E,mixedSelectionLabels:R}=this.state;return jsxRuntimeExports.jsx(TaskLabelsTooltipLabelsBody,{isElectronWindow:o,isPremium:i,showPremiumUpsell:_,isEditable:y,isSelectionDisabled:x,labelsModelViews:E,mixedSelectionLabels:R,onUpgradeToPremiumClick:a,onEditClick:this.main_handleLabelEditClick,onSelectClick:this.main_handleLabelClick})});$e(this,"edit_handleSaveButtonClicked",a=>{a.stopPropagation(),this.initialTab==="LABEL_EDIT_OR_CREATION"?this.edit_saveAndClose():this.edit_save()});$e(this,"edit_handleDeleteButtonClicked",()=>{const{editedLabel:a}=this.state;a!=null&&(this.props.track("tag_delete_tapped"),this.edit_closeAndUpdateLabelsTo(fn(this.state,i=>{const o=i.labelsModelViews.find(x=>x.id===a.id);o!=null&&(o.isDeleted=!0),i.mixedSelectionLabels.delete(a.id)})))});$e(this,"edit_handleBackButtonClicked",()=>{this.edit_closeAndUpdateLabelsTo(this.state)});$e(this,"edit_renderModalBody",()=>jsxRuntimeExports.jsx(TaskLabelsTooltipEditBody,{editedLabel:this.state.editedLabel,isLabelInvalidModalVisible:this.state.isLabelInvalidModalVisible,onCloseLabelInvalidModal:()=>this.setState({isLabelInvalidModalVisible:!1}),onLabelColorClick:a=>{this.setState(i=>i.editedLabel==null?null:{editedLabel:fn(i.editedLabel,o=>{o.color=a})})},onLabelNameChange:a=>{this.setState(i=>i.editedLabel==null?null:{editedLabel:fn(i.editedLabel,o=>{o.name=a})})}}));this.initialTab=a.initialTab;const i=getIntialTab(this.initialTab);let o=null;i===1&&(o=createEmptyNewLabelModelView()),this.state={activeTab:i,editedLabel:o,labelsModelViews:a.initialLabels.map(x=>mapLabelModelView(x,new Set(a.initialTaskLabelsIds))),isLabelInvalidModalVisible:!1,mixedSelectionLabels:new Set(a.initialMixedSelectionLabels)}}_save(a=this.state.labelsModelViews){const i=a.map(S=>({id:S.id,color:S.color,isDeleted:S.isDeleted,isPredefined:S.isPredefined,name:S.name})),o=a.filter(S=>S.isSelected).map(S=>S.id),x=new Set(this.props.initialTaskLabelsIds),y=new Set(o),_=o.reduce((S,j)=>x.has(j)?S:S+1,0),E=this.props.initialTaskLabelsIds.reduce((S,j)=>y.has(j)?S:S+1,0);this.props.track("tag_screen_save_tapped",{extra_double1:o.length,extra_double2:_,extra_double3:E});const{mixedSelectionLabels:R}=this.state;this.props.onSaveClick({labelsUpdates:i,taskLabels:o,mixedSelectionLabels:R})}main_renderModalFooter(){const{onCancelClick:a}=this.props;return jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:PlatformConfig.type===PlatformType.WEB_EXTENSION?["save"]:["cancel","save"],renderButton:i=>{switch(i){case"cancel":return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"});case"save":return jsxRuntimeExports.jsx("span",{className:"TaskLabelsTooltipContent__footerButton TaskLabelsTooltipContent__footerButton--primary",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})});default:return null}},onClick:i=>{switch(i){case"cancel":a();break;case"save":this._save();break}}})}main_renderModalHeader(){const{isPremiumUser:a,isEditable:i=!0,onCancelClick:o}=this.props;return jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipContent.header.title"}),type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:o,accessory:a&&i?jsxRuntimeExports.jsx("button",{type:"button",className:"TaskLabelsTooltipContent__header__actionButton",onClick:this.main_handleCreateNewLabelClick,children:jsxRuntimeExports.jsx(PlusIcon,{})}):null})}edit_save(){const{editedLabel:a,labelsModelViews:i,mixedSelectionLabels:o}=this.state;if(a==null)return;const x=fn(i,y=>{const _=y.findIndex(E=>E.id===a.id);_===-1?y.push(a):y[_]=a});areTaskLabelsTooltipContentLabelsModelViewsValid(x,a.id)?(a.isNew&&this.props.track("tag_added",{extra_str2:a.color}),this.edit_closeAndUpdateLabelsTo({mixedSelectionLabels:o,labelsModelViews:x})):this.setState({isLabelInvalidModalVisible:!0})}edit_saveAndClose(){const{editedLabel:a,labelsModelViews:i}=this.state;if(a==null)return;const o=fn(i,x=>{const y=x.findIndex(_=>_.id===a.id);y===-1?x.push(a):x[y]=a});areTaskLabelsTooltipContentLabelsModelViewsValid(o,a.id)?(a.isNew&&this.props.track("tag_added",{extra_str2:a.color}),this._save(o)):this.initialTab==="LABEL_EDIT_OR_CREATION"?this.setState({isLabelInvalidModalVisible:!0}):this.props.onCancelClick()}edit_closeAndUpdateLabelsTo(a){this.setState({...a,activeTab:0,editedLabel:null})}edit_renderModalFooter(){const a=this.state.labelsModelViews.length<=1;return this.state.editedLabel!=null&&this.state.editedLabel.isNew?null:jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{disabledOptions:a?["delete"]:void 0,options:["delete"],renderButton:()=>jsxRuntimeExports.jsx("span",{className:"TaskLabelsTooltipContent__footerButton--error",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskLabelsTooltipContent.deleteButton.text"})}),onClick:this.edit_handleDeleteButtonClicked})}edit_renderModalHeader(){const{editedLabel:a}=this.state,i=a!=null&&!a.isNew,o=!isBlankString(a==null?"":a.name);return jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:i?"TaskLabelsTooltipContent.title.edit":"TaskLabelsTooltipContent.newTag"}),accessory:jsxRuntimeExports.jsx("button",{type:"button",className:"TaskLabelsTooltipContent__header__actionButton",disabled:!o,onClick:this.edit_handleSaveButtonClicked,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})}),type:this.initialTab==="LABEL_EDIT_OR_CREATION"?void 0:CardMenuHeaderTabItemType.BACK,onClick:this.initialTab==="LABEL_EDIT_OR_CREATION"?void 0:this.edit_handleBackButtonClicked})}render(){const{isElectronWindow:a=!1}=this.props,{activeTab:i}=this.state;return jsxRuntimeExports.jsx("div",{className:cx$6("TaskLabelsTooltipContent",{"TaskLabelsTooltipContent--isElectronWindow":a}),children:jsxRuntimeExports.jsxs(CardMenu$1,{active:i,children:[jsxRuntimeExports.jsxs(CardMenuTab,{label:0,children:[this.main_renderModalHeader(),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:this.main_renderModalBody}),this.main_renderModalFooter()]}),jsxRuntimeExports.jsxs(CardMenuTab,{label:1,children:[this.edit_renderModalHeader(),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:this.edit_renderModalBody}),this.edit_renderModalFooter()]})]})})}}function TaskLabelsTooltipContentConnected(r){const{track:s}=useAnalytics();return jsxRuntimeExports.jsx(TaskLabelsTooltipContent,{...r,track:s})}const SvgCloseicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m16.4 6.8-9.6 9.6M6.8 6.8l9.6 9.6"})),SvgEveryoneicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 15.2a3.2 3.2 0 1 0 0-6.4 3.2 3.2 0 0 0 0 6.4Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M15.2 8.8v4a2.4 2.4 0 0 0 4.8 0V12a8 8 0 1 0-3.136 6.352"})),SvgAssigneesicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:19,height:19,fill:"none",viewBox:"0 0 19 19",...r},reactExports.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,clipPath:"url(#clip0_3447_69)"},reactExports.createElement("path",{d:"M12.667 16.625v-1.583A3.167 3.167 0 0 0 9.5 11.875H3.96a3.167 3.167 0 0 0-3.167 3.167v1.583M6.73 8.708a3.167 3.167 0 1 0 0-6.333 3.167 3.167 0 0 0 0 6.333ZM15.833 6.333v4.75M18.208 8.708h-4.75"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_3447_69"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h19v19H0z"}))));var TeamMemberBoxTheme=(r=>(r[r.TEAM_MEMBER_TOOLTIP=0]="TEAM_MEMBER_TOOLTIP",r[r.TEAM_MEMBER_MANAGER=1]="TEAM_MEMBER_MANAGER",r))(TeamMemberBoxTheme||{});const AVATAR_SIZE={0:SharingAvatarSize.TEAM_MEMBER_TOOLTIP,1:SharingAvatarSize.TEAM_MEMBER_MANAGER},THEME_CLASSNAME={0:"TeamMemberBox--TeamMemberTooltipTheme",1:"TeamMemberBox--TeamMemberManagerTheme"},GROUP_AVATARS={assignees:jsxRuntimeExports.jsx(SvgAssigneesicon,{}),everyone:jsxRuntimeExports.jsx(SvgEveryoneicon,{})},TeamMemberBox=({member:r,theme:s=0})=>jsxRuntimeExports.jsxs("div",{className:cx$6("TeamMemberBox",THEME_CLASSNAME[s]),children:[jsxRuntimeExports.jsx("div",{className:"TeamMemberBox__avatar",children:r.profilePicture&&USER_GROUP_MENTIONS.includes(r.profilePicture)?jsxRuntimeExports.jsx(SharingAvatarImageContainer,{size:AVATAR_SIZE[s],bgColor:"var(--action-color)",children:GROUP_AVATARS[r.profilePicture]}):jsxRuntimeExports.jsx(SharingAvatar_memo,{name:r.name||r.email,imageUrl:r.profilePicture,size:AVATAR_SIZE[s]})}),jsxRuntimeExports.jsxs("div",{className:"TeamMemberBox__details",children:[r.name?jsxRuntimeExports.jsx("div",{className:"TeamMemberBox__name","data-private":"lipsum",children:r.name}):null,r.email?jsxRuntimeExports.jsx("div",{className:"TeamMemberBox__email ","data-private":"lipsum",children:r.email}):null]})]}),TeamMemberBox_memo=React$6.memo(TeamMemberBox),SvgRemoveicon=r=>reactExports.createElement("svg",{width:14,height:14,viewBox:"0 0 22 22",...r},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M17.475.298c.62.448.703 1.242.186 1.772L2.583 17.553c-.517.53-1.433.6-2.058.149-.62-.448-.703-1.242-.186-1.772L15.417.447c.517-.53 1.433-.6 2.058-.149z"}),reactExports.createElement("path",{d:"M.525.298C-.095.746-.178 1.54.34 2.07l15.078 15.483c.517.53 1.433.6 2.058.149.62-.448.703-1.242.186-1.772L2.583.447C2.066-.083 1.15-.153.525.298z"}))),RemoveBoardMemberConfirmationModal=({fromRef:r,isVisible:s,onYes:a,onCancel:i})=>jsxRuntimeExports.jsx(ConfirmModal,{fromRef:r,isVisible:s,headerElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.confirm-dialog.are-you-sure"}),mainElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"RemoveBoardMemberConfirmationModal.content"}),declineElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"}),acceptElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.yes"}),onAccept:a,onDecline:i}),RemoveBoardMemberConfirmationModal_memo=React$6.memo(RemoveBoardMemberConfirmationModal),TOOLTIP_TOP_OFFSET=7,Permissioni18n={[BoardPermissionLevel.ADMIN]:"_.permission.admin",[BoardPermissionLevel.MEMBER]:"_.permission.member",[BoardPermissionLevel.VIEWER]:"_.permission.viewer"},BoardMemberPicker=({member:r,isCurrentUser:s,permissionPickerDisabled:a,updatePermission:i,removeMember:o,leaveBoard:x,setModalOpen:y,scrollElement:_,boardPermissions:E,canEditSelfPermissions:R})=>{const{canUserRemoveMembersFromBoard:S,canEditMemberPermissions:j,canMemberBeRemovedFromBoard:T}=E,{formatMessage:A}=useI18n(),[M,P]=React$6.useState(r.permissionLevel),[L,D]=React$6.useState(!1),[O,B]=React$6.useState(!1),[N,F]=React$6.useState(!1),W=React$6.useCallback(()=>B(!1),[]);React$6.useEffect(()=>_?attachScrollEvent(_,W):void 0,[W,_]),React$6.useEffect(()=>{P(r.permissionLevel)},[r.permissionLevel]),React$6.useEffect(()=>{y&&y(!!L)},[L,y]);const V=React$6.useMemo(()=>A(Permissioni18n[M]),[A,M]),U=React$6.useCallback(()=>{B(Z=>!Z)},[]),G=React$6.useCallback(()=>{B(!1),D(!1)},[]),oe=React$6.useCallback(()=>{D(!0)},[]),X=React$6.useCallback(()=>{F(!0),G(),o().catch(()=>F(!1))},[G,o]),ee=React$6.useCallback(()=>{F(!0),B(!1),x().catch(()=>F(!1))},[x]),ae=React$6.useCallback(Z=>{B(!1),Z!==M&&(P(Z),F(!0),i(Z).finally(()=>F(!1)))},[M,i]),ie=j&&(!s||R),se=S||s,Q=!ie&&!se;return jsxRuntimeExports.jsxs("div",{className:"BoardMemberPicker",children:[jsxRuntimeExports.jsx(TooltipCard,{isVisible:O,isTooltipStyleless:!0,offset:TOOLTIP_TOP_OFFSET,onOutSideClick:W,renderTooltip:()=>jsxRuntimeExports.jsxs(DropdownMenu.Content,{theme:"modern-condensed",children:[ie&&[BoardPermissionLevel.ADMIN,BoardPermissionLevel.MEMBER,BoardPermissionLevel.VIEWER].map(Z=>jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a,className:OUTSIDE_EVENT_ALWAYS_IGNORE_CLASSNAMES,onClick:()=>ae(Z),selected:M===Z,children:jsxRuntimeExports.jsx(FormattedMessage,{id:Permissioni18n[Z]})},Z)),se&&jsxRuntimeExports.jsx(DropdownMenu.Item,{className:OUTSIDE_EVENT_ALWAYS_IGNORE_CLASSNAMES,icon:jsxRuntimeExports.jsx(SvgRemoveicon,{}),withDivider:ie,onClick:s?ee:oe,disabled:!T(r),children:A(s?"_.buttons.leave":"_.buttons.remove")})]}),render:Z=>jsxRuntimeExports.jsx(SideSpinner,{isVisible:N,children:jsxRuntimeExports.jsx(SelectButton_,{theme:"modern",ref:Z,value:V,onClick:U,disabled:N,active:O,withTitle:!1,readonly:Q})})}),jsxRuntimeExports.jsx(RemoveBoardMemberConfirmationModal_memo,{isVisible:L,onCancel:G,onYes:X})]})},BoardMemberPicker_memo=React$6.memo(BoardMemberPicker),AddMemberButton=({addMember:r})=>{const[s,a]=React$6.useState(!1),i=React$6.useCallback(()=>{a(!0),r().catch(()=>a(!1))},[r]);return jsxRuntimeExports.jsx(SideSpinner,{isVisible:s,children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:i,className:cx$6("AddMemberButton",OUTSIDE_EVENT_ALWAYS_IGNORE_CLASSNAMES),disabled:s,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.add"})})})},AddMemberButton__memo=React$6.memo(AddMemberButton),SvgLinkicon$2=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m11.47 6.697 1.856-1.856a4.126 4.126 0 1 1 5.834 5.833l-2.652 2.652a4.124 4.124 0 0 1-5.834 0"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m12.53 17.303-1.856 1.857a4.124 4.124 0 0 1-7.043-2.917 4.125 4.125 0 0 1 1.21-2.917l2.651-2.652a4.125 4.125 0 0 1 5.834 0"})),SvgCopyicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M20 9h-9a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),label="_label_1nd5x_1",disabled$3="_disabled_1nd5x_8",loadingIcon="_loadingIcon_1nd5x_12",styles$19={label,disabled:disabled$3,loadingIcon},useCopyLink=()=>{const r=useMiniToastNotifications(),s=React$6.useCallback(i=>{r.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:i}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})},[r]);return React$6.useCallback((i,o="_.link-copied")=>{let x=i;x.startsWith("anydo://")&&(x=x.replace("anydo://localhost","https://app.any.do")),navigator.clipboard.writeText(x).then(()=>s(o)).catch(()=>{})},[s])},CopyButton=({link:r,label:s,className:a,labelClassName:i,disabled:o,onClick:x,icon:y,tooltipText:_})=>{const{formatMessage:E}=useI18n(),R=useCopyLink(),S=React$6.useCallback(()=>R(r),[R,r]),j=_||E("CopyButton.tooltip");return jsxRuntimeExports.jsx(TooltipSmallInfo,{text:j,position:"top",className:a,isActive:!o,children:jsxRuntimeExports.jsxs(ButtonInlineText,{className:cx$6({[styles$19.disabled]:o}),onClick:x||S,theme:"action",disabled:o,children:[y!==!1&&jsxRuntimeExports.jsx(SvgCopyicon$1,{}),s&&jsxRuntimeExports.jsx("span",{className:cx$6(i,styles$19.label),children:s})]})})},root$z="_root_1t9qw_1",copyLink="_copyLink_1t9qw_9",wrapper$7="_wrapper_1t9qw_14",linkWrapper="_linkWrapper_1t9qw_19",link="_link_1t9qw_19",guideText="_guideText_1t9qw_36",linkIcon="_linkIcon_1t9qw_44",styles$18={root:root$z,copyLink,wrapper:wrapper$7,linkWrapper,link,guideText,linkIcon},ExternalLinkManager=({boardId:r,className:s,disableToggleOn:a})=>{const{formatMessage:i}=useI18n(),o=useMiniToastNotifications(),{syncEnablePublicView:x,syncDisablePublicView:y}=useSyncBoardPublicView(),_=useSyncQueryModelById("board",r),[E,R]=React$6.useState(_!=null&&_.publicViewUrl?0:2),S=React$6.useCallback(()=>{E===2&&_?(R(1),x(_).then(()=>{R(0)}).catch(()=>{R(2),o.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})})):E===0&&_&&(R(3),y(_).then(()=>{R(2)}).catch(()=>{R(0),o.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.auth.errors.unknown",values:{newLine:jsxRuntimeExports.jsx("br",{})}}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})}))},[E,x,y,o,_]),j=React$6.useMemo(()=>!!(E===1||E===3||a&&E===2),[a,E]);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$18.root,s),children:[E===0&&(_!=null&&_.publicViewUrl)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CopyButton,{link:_==null?void 0:_.publicViewUrl}),jsxRuntimeExports.jsx("div",{className:styles$18.linkWrapper,children:jsxRuntimeExports.jsx(TooltipSmallInfo,{text:i("ExternalLinkManager.copyLink.tooltip",{newLine:jsxRuntimeExports.jsx("br",{})}),children:jsxRuntimeExports.jsx("div",{className:styles$18.link,children:_==null?void 0:_.publicViewUrl})})})]}):jsxRuntimeExports.jsxs(TooltipSmallInfo,{className:styles$18.wrapper,text:i("ExternalLinkManager.copyLink.tooltip",{newLine:jsxRuntimeExports.jsx("br",{})}),children:[jsxRuntimeExports.jsx("div",{className:styles$18.linkIcon,children:jsxRuntimeExports.jsx(SvgLinkicon$2,{})}),jsxRuntimeExports.jsx("div",{className:styles$18.guideText,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"ExternalLinkManager.copyLink.guide"})})]}),jsxRuntimeExports.jsx(Switch,{checked:E===0||E===1,disabled:j,theme:"new",onChange:S,children:E===1||E===3?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{size:"medium"}):void 0})]})};function noop(){}const deepLinkerNoop={on:()=>noop,off:noop,push:noop,__IS_DEEP_LINKER_NOOP__:!0},DeepLinkerContext=reactExports.createContext(deepLinkerNoop);function useDeepLink(r,s){const a=reactExports.useContext(DeepLinkerContext);reactExports.useEffect(()=>a.on(r,s),[r,s,a])}function usePushDeepLink(){const r=reactExports.useContext(DeepLinkerContext);return reactExports.useCallback(a=>r.push(a),[r])}function useLocationPathnameParams(r){return reactExports.useMemo(()=>getLocationPathnameParams(r),[r])}function useRouterSelectTask(){const r=useNavigate(),s=useLocation();return reactExports.useCallback(function(i,o){const x=getTaskUrl(s,{taskId:i,taskActivity:o,preserveFilters:!0});r(x)},[r,s])}function useRouterSelectBoardActivity(){const r=useNavigate();return React$6.useCallback(function(a,i){const o=getBoardUrl(window.location.search,a,{activityId:i,preserveFilters:!0});r(o)},[r])}function useRouterDeselectBoardActivity(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useRouterSelectTaskActivity(){const r=useNavigate(),s=useLocation();return React$6.useCallback(function(i,o,x,y=!1){if(i){const _=getCardUrl(s.search,i,o,!1,x,y);r(_)}else{const _=getTaskUrl(s,{taskId:o,taskActivity:!!x,preserveFilters:!0});r(_)}},[r,s])}function useRouterDeselectTaskActivity(){const r=useNavigate(),s=useLocation();return React$6.useCallback(function(i,o,x=!1){if(i){const y=getCardUrl(s.search,i,o,!1,!1,x);r(y)}else{const y=getTaskUrl(s,{taskId:o,preserveFilters:!0});r(y)}},[s,r])}function useRouterSelectMydayTaskActivity(){const r=useNavigate(),s=useLocation();return React$6.useCallback(function(i){const o=getMyDayUrl(s.search,{taskId:i,taskActivity:!0});r(o)},[s.search,r])}function useRouterDeselectMydayTaskActivity(){const r=useNavigate();return React$6.useCallback(function(a){const i=getMyDayUrl(window.location.search,{taskId:a,taskActivity:!1});r(i)},[r])}function useRouterDeselectTask(){const r=useNavigate(),s=useLocation();return reactExports.useCallback(function(){r(getTaskDeselectedUrl(s,!0))},[r,s])}function useRouterDeselectBoardMembers(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useRouterSelectBoardMembers(){const r=useNavigate();return React$6.useCallback(function(a){const i=getBoardUrl(window.location.search,a,{members:!0,preserveFilters:!0});r(i)},[r])}function useRouterSelectBoardTags(){const r=useNavigate();return React$6.useCallback(function(a){const i=getBoardUrl(window.location.search,a,{tags:!0,preserveFilters:!0});r(i)},[r])}function useRouterDeselectBoardTags(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useRouterSelectBoardAchive(){const r=useNavigate();return React$6.useCallback(function(a){const i=getBoardUrl(window.location.search,a,{archive:!0,preserveFilters:!0});r(i)},[r])}function useRouterDeselectBoardArchive(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useRouterSelectSections(){const r=useNavigate();return React$6.useCallback(function(a){const i=getBoardUrl(window.location.search,a,{sections:!0,preserveFilters:!0});r(i)},[r])}function useRouterDeselectSections(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useRouterSelectBoardAutomations(){const r=useNavigate();return React$6.useCallback(function(a){const i=getBoardUrl(window.location.search,a,{automations:!0,preserveFilters:!0});r(i)},[r])}function useRouterDeselectBoardAutomations(){const r=useNavigate();return reactExports.useCallback(function(a){const o=`/boards/${encodeURIComponent(a)}`;r(appendSearchToUrl(window.location.search,o,{preserveFilters:!0}))},[r])}function useTaskRouter(){const r=useLocation(),s=useLocationPathnameParams(r.pathname),{taskGroupsType:a,selectedLabelId:i,selectedTaskId:o,selectedCategoryId:x,selectedBoardId:y,selectedCustomViewId:_,selectedGroceryBoardId:E,selectedBoardActivityId:R,selectedTaskActivityId:S,isMyDay:j,isBoardMembers:T,isBoardTags:A,isBoardAutomations:M,isSections:P,isArchive:L}=s,D=useRouterSelectTask(),O=useRouterDeselectTask(),B=useRouterSelectTaskActivity(),N=useRouterDeselectTaskActivity(),F=useRouterSelectMydayTaskActivity(),W=useRouterDeselectMydayTaskActivity(),V=useRouterSelectBoardActivity(),U=useRouterDeselectBoardActivity(),G=useRouterSelectBoardMembers(),oe=useRouterDeselectBoardMembers(),X=useRouterSelectBoardTags(),ee=useRouterDeselectBoardTags(),ae=useRouterSelectSections(),ie=useRouterDeselectSections(),se=useRouterSelectBoardAchive(),Q=useRouterDeselectBoardArchive(),Z=useRouterSelectBoardAutomations(),J=useRouterDeselectBoardAutomations();return{isMyDay:j,isBoardMembers:T,isBoardTags:A,isSections:P,isArchive:L,selectedCategoryId:x,selectedBoardId:y,selectedCustomViewId:_,selectedGroceryBoardId:E,selectedLabelId:i,selectedTaskId:o,taskGroupsType:a,selectedTaskActivityId:S,selectTaskActivity:B,deselectTaskActivity:N,selectMydayTaskActivity:F,deselectMydayTaskActivity:W,deselectTask:O,selectTask:D,selectedBoardActivityId:R,selectBoardActivity:V,deselectBoardActivity:U,selectBoardMembers:G,deselectBoardMembers:oe,selectBoardTags:X,deselectBoardTags:ee,selectSections:ae,deselectSections:ie,selectBoardArchive:se,deselectBoardArchive:Q,isBoardAutomations:M,selectBoardAutomations:Z,deselectBoardAutomations:J}}function objectToSearchString(r){const s=new URLSearchParams,a=Object.entries(r);for(const[i,o]of a)if(o!==void 0&&o!==null)if(Array.isArray(o))for(const x of o)s.append(i,x!=null?x:"");else s.append(i,o);return s.toString()}'{}[],":'.split("").map(r=>[r,encodeURIComponent(r)]);function searchStringToObject(r){const s=new URLSearchParams(r),a={};for(let[i,o]of s)Object.prototype.hasOwnProperty.call(a,i)?Array.isArray(a[i])?a[i].push(o):a[i]=[a[i],o]:a[i]=o;return a}const defaultOptions={searchStringToObject,objectToSearchString,updateType:"pushIn",includeKnownParams:void 0,includeAllParams:!1,removeDefaultsFromUrl:!1,enableBatching:!1,skipUpdateWhenNoChange:!0},providerlessContextValue={adapter:{},options:defaultOptions};reactExports.createContext(providerlessContextValue);const FILTER_UNASSIGNED_SEARCH_PARAM_NAME="unassigned";function errorNotification(r){return{id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:r!=null?r:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}}}function useStripeElementLocale(){const{locale:r}=useI18n();return React$6.useMemo(()=>getStripeLocale(r),[r])}const root$y="_root_19ga2_1",fullTheme="_fullTheme_19ga2_9",spinner$4="_spinner_19ga2_19",error$3="_error_19ga2_20",isReady="_isReady_19ga2_37",paymentElement$1="_paymentElement_19ga2_45",button$8="_button_19ga2_49",styles$17={root:root$y,fullTheme,spinner:spinner$4,error:error$3,isReady,paymentElement:paymentElement$1,button:button$8},PAYMENT_ELEMENT_OPTIONS={terms:{card:"never"},fields:{billingDetails:{name:"never",email:"never"}}},PaymentMethodInput=({onConfirmed:r,submitPaymentInfo:s,setupIntentStatus:a,theme:i="minimal",buttonLabel:o,buttonClassName:x,onSubmitStart:y,onReady:_,isPlanLoading:E=!1,footer:R,disabled:S})=>{const[j,T]=React$6.useState(!1),[A,M]=React$6.useState(!1),[P,L]=React$6.useState(!1),D=useEffectEvent(()=>{L(!0),_==null||_()}),O=React$6.useMemo(()=>P||a==="fail",[P,a]),B=React$6.useCallback(V=>{V.preventDefault(),s&&O&&(T(!0),y==null||y(),s().then(U=>r(U)).then(U=>{U!==void 0&&U.pending||M(!0)}).catch(U=>{AnydoSentry.captureException(U)}).finally(()=>{T(!1)}))},[O,r,y,s]),[N,F]=React$6.useState(!1),W=React$6.useCallback(V=>{F(V.complete)},[]);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$17.root,{[styles$17.isReady]:O,[styles$17.fullTheme]:i==="full"}),children:[jsxRuntimeExports.jsx("div",{className:styles$17.spinner,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),a==="fail"&&jsxRuntimeExports.jsx("div",{className:styles$17.error,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"})}),jsxRuntimeExports.jsxs("form",{onSubmit:B,children:[jsxRuntimeExports.jsx("div",{className:styles$17.paymentElement,children:a==="success"&&jsxRuntimeExports.jsx(PaymentElement$1,{onReady:D,options:PAYMENT_ELEMENT_OPTIONS,onChange:W})}),R,jsxRuntimeExports.jsx("div",{className:styles$17.button,children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{className:x,theme:A?"success":"primary",disabled:!s||j||!N||E||S,type:"submit",loading:j||E||!O,children:A?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.approved"}):o||jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})})})]})]})};function usePaymentMethodInputAppearance(r){const s=useIsAppThemeDark();return{theme:s?"night":"stripe",variables:{borderRadius:"6px",spacingGridColumn:"8px",spacingGridRow:"8px",colorDanger:"#ff001f"},rules:{".Label":{...r==="minimal"?{fontSize:"0"}:{},color:s?"#777":"#9B9B9B"},".Input":{padding:"10px 16px",boxShadow:"none",transition:"border-color 150ms linear"},".Input::placeholder":{color:s?"#777":"#d8d8d8"},".Input:focus":{borderColor:"#0083FF",boxShadow:"none"},".Input--invalid":{boxShadow:"none"},".Error":{fontSize:"12px"}}}}const PaymentElementForSetupIntent=({theme:r="minimal",onConfirm:s,buttonLabel:a,buttonClassName:i,clientSecret:o,status:x,onSubmitStart:y,onReady:_,isPlanLoading:E,footer:R,disabled:S})=>{const j=useMiniToastNotifications(),T=React$6.useCallback((D,O)=>{O?AnydoSentry.captureException(O):AnydoSentry.captureMessage(`${D}: error`),j.deleteAll(),j.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:isStripeCardError(O)?O.message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})},[j]);React$6.useEffect(()=>{x==="fail"&&T("SetupIntent")},[j,T,x]);const A=useStripeElementLocale(),M=usePaymentMethodInputAppearance(r),P=React$6.useMemo(()=>{if(o)return{locale:A,clientSecret:o,appearance:M}},[M,o,A]),L=React$6.useCallback(D=>jsxRuntimeExports.jsx(PaymentMethodInput,{onSubmitStart:y,onConfirmed:s,onReady:_,submitPaymentInfo:D,setupIntentStatus:x,theme:r,buttonLabel:a,buttonClassName:i,isPlanLoading:E,footer:R,disabled:S}),[y,s,_,x,r,a,i,E,R,S]);return o?jsxRuntimeExports.jsx(Elements,{options:P,stripe:loadStripeOnce(),children:jsxRuntimeExports.jsx(ElementsInner,{onError:T,children:L})},o):L()},ElementsInner=({children:r,onError:s})=>{const a=useStripe(),i=useElements(),{userDetails:o}=useAuth(),x=React$6.useCallback(_=>{s("stripe.confirmSetup",_)},[s]),y=React$6.useMemo(()=>{if(!(!a||!i))return()=>new Promise((_,E)=>{AnydoSentry.addBreadcrumb({category:"subscription",level:"info",message:"stripe.confirmSetup"}),a.confirmSetup({elements:i,redirect:"if_required",confirmParams:{payment_method_data:{billing_details:{name:o==null?void 0:o.name,email:o==null?void 0:o.email}}}}).then(({error:R,setupIntent:S})=>{R?(x(R),E()):S?_(S):E()}).catch(R=>{x(R),E()})})},[i,x,a,o==null?void 0:o.email,o==null?void 0:o.name]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r(y)})},NO_PAYMENT_STATUS_VALUE={isActive:!1,isCanceled:!1,isTrialing:!1,status:SubscriptionPaymentStatusT.PENDING_PAYMENT,expiration:0},isTrialExpired=r=>!(!r||r.isActive||r.status!==SubscriptionPaymentStatusT.PRE_PAYMENT&&r.status!==SubscriptionPaymentStatusT.PAYMENT_ENDED);function useWorkspaceSubscriptionBasic(r){const s=useSyncSpaces(),a=React$6.useMemo(()=>r?s.get(r):void 0,[s,r]),i=(a==null?void 0:a.paymentStatus)||NO_PAYMENT_STATUS_VALUE;return React$6.useMemo(()=>getWorkspaceSubscriptionBasic(i),[i])}function getWorkspaceSubscriptionBasic(r){return{isPlanActive:!!(r!=null&&r.isActive),planExpirationDate:r==null?void 0:r.expiration,planPaymentStatus:r==null?void 0:r.status,isTrialing:r==null?void 0:r.isTrialing,isCanceled:r==null?void 0:r.isCanceled,paymentMethodInfo:r==null?void 0:r.paymentMethodInfo,isTrialExpired:isTrialExpired(r),invoiceUrl:r==null?void 0:r.invoiceUrl}}const useWorkspaceSubscriptionFull=r=>{var X;const{fetchWorkspaceSubscription:s,refreshWorkspaceSubscriptionBySetupIntentId:a,renewWorkspaceSubscription:i,cancelWorkspaceSubscription:o,deleteWorkspace:x,subscribeWorkspaceSubscription:y,updateBillingEmail:_,updateCustomerDescription:E,updateWorkspaceSubscriptionPlan:R}=useSyncWorkspaceSubscription(),S=Recoil_index_20(cacheTaxonomy.space.byId(r!=null?r:null)),{canViewPaymentMethodInfo:j}=useTeamWorkspacePermissions(S),[T,A]=React$6.useState(),[M,P]=React$6.useState(!1),L=React$6.useCallback(()=>S!=null&&S.id?j?(P(!0),s(S.id).then(A).catch(ee=>{isAbortError(ee)||(AnydoSentry.addBreadcrumb({category:"subscription",data:{workspaceId:S==null?void 0:S.id},message:"useWorkspaceSubscriptionFull::fetchData failed"}),AnydoSentry.captureException(ee),A(void 0))}).finally(()=>P(!1))):Promise.reject("Can't fetch subscription data without proper user permissions"):Promise.reject("Can't fetch subscription data with no workspace"),[j,s,S==null?void 0:S.id]),D=React$6.useCallback(ee=>S!=null&&S.id?a(S.id,ee).then(A):Promise.reject("Can't update payment method with no workspace"),[S==null?void 0:S.id,a]),O=React$6.useCallback(ee=>S!=null&&S.id?i(S.id,ee).then(A):Promise.reject("Can't renew subscription method with no workspace"),[S==null?void 0:S.id,i]),B=React$6.useCallback(ee=>S!=null&&S.id?R(S.id,ee).then(A):Promise.reject("Can't cancel subscription method with no workspace"),[S==null?void 0:S.id,R]),N=React$6.useCallback(()=>S!=null&&S.id?o(S.id).then(A):Promise.reject("Can't cancel subscription method with no workspace"),[S==null?void 0:S.id,o]),F=React$6.useCallback(()=>S!=null&&S.id?x(S.id):Promise.reject("Can't delete workspace with no workspace"),[S==null?void 0:S.id,x]),W=React$6.useCallback(({planId:ee,setupIntentId:ae,countryCode:ie})=>r?y({workspaceId:r,planId:ee,setupIntentId:ae,countryCode:ie}).then(A):Promise.reject("Can't subscribe with no workspace"),[r,y]),V=React$6.useCallback(ee=>S!=null&&S.id?_(S.id,ee).then(A):Promise.reject("Can't update billing email with no workspace"),[S==null?void 0:S.id,_]),U=React$6.useCallback(ee=>S!=null&&S.id?E(S.id,ee).then(A):Promise.reject("Can't update customer description with no workspace"),[S==null?void 0:S.id,E]),G=React$6.useMemo(()=>Object.keys((S==null?void 0:S.members)||{}).length,[S==null?void 0:S.members]),oe=React$6.useCallback(()=>S!=null&&S.id?L().catch(ee=>{if(!isAbortError(ee))throw ee}):Promise.resolve(),[L,S==null?void 0:S.id]);return React$6.useEffect(()=>{S!=null&&S.id?oe().catch(AnydoSentry.captureException):A(void 0)},[S==null?void 0:S.id,(X=S==null?void 0:S.paymentStatus)==null?void 0:X.status,G,oe]),{isLoading:M,subscriptionData:T,refreshWorkpsaceSubscriptionData:D,renewWorkspaceSubscription:O,cancelWorkspaceSubscription:N,deleteWorkspace:F,subscribeWorkspaceSubscription:W,updateWorkspaceSubscriptionPlan:B,updateBillingEmail:V,updateCustomerDescription:U,fetchSubscriptionDataFromServer:oe}},WorkspacePaymentElementForSetupIntent=({workspaceId:r,onConfirm:s,...a})=>{const[i,o]=useSyncWorkspaceSetupIntent(r);return jsxRuntimeExports.jsx(PaymentElementForSetupIntent,{onConfirm:reactExports.useCallback(async x=>{try{return await s(x)}catch(y){throw o(),y}},[o,s]),...i,...a})},CreateWorkspacePaymentElementForSetupIntent=({onConfirm:r,...s})=>{const[a,i]=useSyncCreateWorkspaceSetupIntent();return jsxRuntimeExports.jsx(PaymentElementForSetupIntent,{onConfirm:reactExports.useCallback(async o=>{try{return await r(o)}catch(x){throw i(),x}},[i,r]),...a,...s})},root$x="_root_ibed4_1",content$2="_content_ibed4_5",complete="_complete_ibed4_9",button$7="_button_ibed4_13",styles$16={root:root$x,content:content$2,complete,button:button$7},SubscriptionSubmitButton=({onClick:r,initialButtonLabel:s})=>{const[a,i]=React$6.useState(!1),[o,x]=React$6.useState(!1),y=React$6.useCallback(()=>{i(!0),r().then(_=>{_!==void 0&&_.pending||(x(!0),i(!1))}).catch(()=>i(!1))},[r]);return jsxRuntimeExports.jsx("div",{className:cx$6(styles$16.root,{[styles$16.complete]:o}),children:jsxRuntimeExports.jsx("div",{className:styles$16.content,children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{className:styles$16.button,theme:o?"success":"primary",disabled:a,loading:a,onClick:y,children:o?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.approved"}):s||jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})})})})},VisualImageSource="/visual.png",root$w="_root_1hd3q_1",close$4="_close_1hd3q_7",title$c="_title_1hd3q_15",visual="_visual_1hd3q_20",desc="_desc_1hd3q_26",button$6="_button_1hd3q_34",styles$15={root:root$w,close:close$4,title:title$c,visual,desc,button:button$6},TrialPeriodExtensionModal=({onClose:r,workspaceId:s,onSubscribed:a})=>{const{formatMessage:i}=useI18n(),{extendTrial:o}=useSyncWorkspaceSubscription(),[x,y]=React$6.useState(!1),[_,E]=React$6.useState(!1),R=useMiniToastNotifications(),S=React$6.useCallback(T=>{AnydoSentry.captureException(T),R.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})},[R]),j=React$6.useCallback(()=>{AnydoSentry.addBreadcrumb({category:"subscription",message:"Extending workspace trial",data:{workspaceId:s}}),R.deleteAll(),y(!0),o(s).then(()=>{E(!0),a()}).catch(S).finally(()=>y(!1))},[o,R,a,S,s]);return React$6.useEffect(()=>()=>R.deleteAll(),[R]),jsxRuntimeExports.jsxs("div",{className:styles$15.root,children:[r&&jsxRuntimeExports.jsx("div",{role:"button",className:styles$15.close,onClick:r,children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsx("img",{className:styles$15.visual,src:VisualImageSource,alt:i("TrialPeriodExtensionModal.title")}),jsxRuntimeExports.jsx("h1",{className:styles$15.title,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodExtensionModal.title"})}),jsxRuntimeExports.jsx("div",{className:styles$15.desc,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodExtensionModal.desc",values:{dayCount:TEAMS_PLAN_TRIAL_EXTENSION_PERIOD,newLine:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})]})}})}),jsxRuntimeExports.jsx("div",{className:styles$15.button,children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{theme:_?"success":"primary",disabled:x,onClick:_?void 0:j,loading:x,children:_?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.approved"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodExtensionModal.buttonText",values:{dayCount:TEAMS_PLAN_TRIAL_EXTENSION_PERIOD}})})})]})},root$v="_root_u72fw_1",styles$14={root:root$v},ApprovePaymentLink=({invoiceUrl:r,isLoading:s,onClick:a})=>jsxRuntimeExports.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:styles$14.root,onClick:a,children:s?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.approve-payment"})}),root$u="_root_pfqzd_1",title$b="_title_pfqzd_10",contact$2="_contact_pfqzd_26",close$3="_close_pfqzd_31",styles$13={root:root$u,title:title$b,contact:contact$2,close:close$3},ApproveIncompletePayment=({invoiceUrl:r,heading:s=jsxRuntimeExports.jsx(FormattedMessage,{id:"ApproveIncompletePayment.heading"}),onClose:a,children:i})=>{const{userDetails:o}=useAuth(),x=reactExports.useCallback(()=>{const R=getContactFormUrl((o==null?void 0:o.name)||"",(o==null?void 0:o.email)||"","sales");openNewWindowUrl(R)},[o==null?void 0:o.email,o==null?void 0:o.name]),[y,_]=reactExports.useState(!1),E=()=>{window.location.reload()};return jsxRuntimeExports.jsxs("div",{className:styles$13.root,children:[a&&jsxRuntimeExports.jsx("button",{className:styles$13.close,onClick:a,children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsx("h2",{className:styles$13.title,children:s}),i,jsxRuntimeExports.jsx(ApprovePaymentLink,{invoiceUrl:r,isLoading:y,onClick:()=>_(!0)}),jsxRuntimeExports.jsx("div",{className:styles$13.contact,children:y?jsxRuntimeExports.jsx(FormattedMessage,{id:"ApproveIncompletePayment.refresh-the-page",values:{a:R=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:E,children:R})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-sales",values:{a:R=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:x,children:R})}})})]})},CheckmarkIcon$2=r=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...r,children:[jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"}),jsxRuntimeExports.jsx("mask",{id:"svg-67241629-__a",width:15,height:11,x:5,y:6,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"},children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#svg-67241629-__a)",children:jsxRuntimeExports.jsx("path",{fill:"#currentColor",d:"M0 0h24v24H0z"})})]}),root$t="_root_1476z_1",spinner$3="_spinner_1476z_13",currentPlan$1="_currentPlan_1476z_28",styles$12={root:root$t,spinner:spinner$3,currentPlan:currentPlan$1},root$s="_root_1308u_1",selected$1="_selected_1308u_18",disabled$2="_disabled_1308u_22",radioButton$1="_radioButton_1308u_27",details$1="_details_1308u_32",title$a="_title_1308u_39",discount="_discount_1308u_47",price="_price_1308u_51",extra="_extra_1308u_52",spinner$2="_spinner_1308u_61",styles$11={root:root$s,selected:selected$1,disabled:disabled$2,radioButton:radioButton$1,details:details$1,title:title$a,discount,price,extra,spinner:spinner$2};function FamilyPlanPickerButton({selected:r,value:s,type:a,discountValue:i,pricePerUser:o,pricePerAllMembers:x,memberCount:y,disabled:_,loading:E,adornment:R}){const S=noop$4,{formatMessage:j}=useI18n();return jsxRuntimeExports.jsxs("label",{className:cx$6(styles$11.root,{[styles$11.selected]:r,[styles$11.disabled]:_}),children:[R,E?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:styles$11.spinner}):jsxRuntimeExports.jsx(RadioButton,{className:styles$11.radioButton,onChange:S,value:s,name:"plan-picker",selectedValue:r?s:void 0,theme:"modern"}),jsxRuntimeExports.jsxs("div",{className:styles$11.details,children:[jsxRuntimeExports.jsxs("div",{className:styles$11.title,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:a==="yearly"?"PlanPickerButton.billed-yearly":"PlanPickerButton.billed-monthly"}),i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" ",jsxRuntimeExports.jsxs("span",{className:styles$11.discount,children:["(",jsxRuntimeExports.jsx(FormattedMessage,{id:"PlanPickerButton.save-discount",values:{discountAmount:i}}),")"]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$11.price,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PlanPickerButton.price-per-users",values:{price:o,peopleCount:y}})}),jsxRuntimeExports.jsx("div",{className:styles$11.extra,children:y?jsxRuntimeExports.jsx(FormattedMessage,{id:y===1?"PlanPickerButton.price-for-person":"PlanPickerButton.price-for-people",values:{peopleCount:y,price:j(a==="yearly"?"PlanPickerButton.price-year":"PlanPickerButton.price-month",{price:x})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.cancel-anytime"})})]})]})}function FamilyPlanPicker({plansInfo:{[TeamsPlanPeriod.YEAR]:r,[TeamsPlanPeriod.MONTH]:s,yearlyPlanDiscountPercentage:a,yearlyPlanDiscountAmount:i,formatPrice:o},onChange:x,planPeriod:y,currentPlanPeriod:_,memberCount:E,disabled:R,disabledPlans:S}){const[j,T]=React$6.useState(),A=R||!!j||y===void 0,M=j||y,P=React$6.useCallback(O=>{const B=O.target.value;T(B);const N=x(B);N!==void 0?N.finally(()=>T(void 0)):T(void 0)},[x]),L=React$6.useMemo(()=>E?o(i):`${a}%`,[a,o,E,i]),D=jsxRuntimeExports.jsx("div",{className:styles$12.currentPlan,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.current-plan"})});return jsxRuntimeExports.jsxs("div",{className:styles$12.root,onChange:A?void 0:P,children:[jsxRuntimeExports.jsx(FamilyPlanPickerButton,{selected:M===TeamsPlanPeriod.MONTH,value:TeamsPlanPeriod.MONTH,type:"monthly",pricePerUser:s.getPriceFormatted(),pricePerAllMembers:s.getPriceFormatted(),memberCount:E,loading:j===TeamsPlanPeriod.MONTH,disabled:A||(S==null?void 0:S.includes(TeamsPlanPeriod.MONTH)),adornment:_===TeamsPlanPeriod.MONTH?D:null}),jsxRuntimeExports.jsx(FamilyPlanPickerButton,{selected:M===TeamsPlanPeriod.YEAR,value:TeamsPlanPeriod.YEAR,type:"yearly",pricePerUser:r.getPriceFormatted({period:"month"}),pricePerAllMembers:r.getPriceFormatted(),memberCount:E,discountValue:L,loading:j===TeamsPlanPeriod.YEAR,disabled:A||(S==null?void 0:S.includes(TeamsPlanPeriod.YEAR)),adornment:_===TeamsPlanPeriod.YEAR?D:null})]})}const root$r="_root_1ptuw_1",close$2="_close_1ptuw_7",title$9="_title_1ptuw_17",subtitle$4="_subtitle_1ptuw_21",bullets$1="_bullets_1ptuw_29",planPicker$2="_planPicker_1ptuw_52",paymentMethod$1="_paymentMethod_1ptuw_56",paymentMethodButton$1="_paymentMethodButton_1ptuw_60",footer$4="_footer_1ptuw_65",styles$10={root:root$r,close:close$2,title:title$9,subtitle:subtitle$4,bullets:bullets$1,planPicker:planPicker$2,paymentMethod:paymentMethod$1,paymentMethodButton:paymentMethodButton$1,footer:footer$4},PurchaseFamilyPlanUpsell=({title:r,memberCount:s,plansInfo:a,planPeriod:i,setPlanPeriod:o,paymentElement:x,onClose:y,footer:_,prePickerContent:E})=>jsxRuntimeExports.jsxs("div",{className:styles$10.root,children:[y&&jsxRuntimeExports.jsx("div",{role:"button",className:styles$10.close,onClick:y,children:jsxRuntimeExports.jsx(CloseIcon,{})}),jsxRuntimeExports.jsx("h1",{className:styles$10.title,children:r}),jsxRuntimeExports.jsxs("ul",{className:styles$10.bullets,children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.advantage.1",values:{maxMembers:a.maxMembers}})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.advantage.2",values:{maxMembers:a.maxMembers}})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.advantage.3",values:{maxMembers:a.maxMembers}})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.advantage.4",values:{maxMembers:a.maxMembers}})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.advantage.5",values:{maxMembers:a.maxMembers}})]})]}),E,jsxRuntimeExports.jsx("div",{className:styles$10.planPicker,children:jsxRuntimeExports.jsx(FamilyPlanPicker,{plansInfo:a,planPeriod:i,onChange:o,memberCount:s})}),jsxRuntimeExports.jsx("div",{className:styles$10.paymentMethod,children:x}),_&&jsxRuntimeExports.jsx("div",{className:styles$10.footer,children:_})]});var styles$$={root:"o28njb0",stripeRoot:"o28njb1",spinnerContainer:"o28njb2",spinner:"o28njb3",spinnerText:"o28njb4",masPurchase:"o28njb5",syncTooSlow:"o28njb6"};const SvgCheckicon$2=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m16 5-7.5 8L4 8.5"})),root$q="_root_1476z_1",spinner$1="_spinner_1476z_13",currentPlan="_currentPlan_1476z_28",styles$_={root:root$q,spinner:spinner$1,currentPlan};function TeamsPlanPicker({plansInfo:{[TeamsPlanPeriod.YEAR]:r,[TeamsPlanPeriod.MONTH]:s,yearlyPlanDiscountPercentage:a,yearlyPlanDiscountAmount:i,formatPrice:o},onChange:x,planPeriod:y,currentPlanPeriod:_,memberCount:E,disabled:R,disabledPlans:S}){const[j,T]=React$6.useState(),A=R||!!j||y===void 0,M=j||y,P=React$6.useCallback(O=>{const B=O.target.value;T(B);const N=x(B);N!==void 0?N.finally(()=>T(void 0)):T(void 0)},[x]),L=React$6.useMemo(()=>E?o(i*E):`${a}%`,[a,o,E,i]),D=jsxRuntimeExports.jsx("div",{className:styles$_.currentPlan,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.current-plan"})});return jsxRuntimeExports.jsxs("div",{className:styles$_.root,onChange:A?void 0:P,children:[jsxRuntimeExports.jsx(PlanPickerButton,{selected:M===TeamsPlanPeriod.MONTH,value:TeamsPlanPeriod.MONTH,type:"monthly",pricePerUser:s.getPriceFormatted(),pricePerAllMembers:s.getPriceFormatted({memberCount:E}),memberCount:E,loading:j===TeamsPlanPeriod.MONTH,disabled:A||(S==null?void 0:S.includes(TeamsPlanPeriod.MONTH)),adornment:_===TeamsPlanPeriod.MONTH?D:null}),jsxRuntimeExports.jsx(PlanPickerButton,{selected:M===TeamsPlanPeriod.YEAR,value:TeamsPlanPeriod.YEAR,type:"yearly",pricePerUser:r.getPriceFormatted({period:"month"}),pricePerAllMembers:r.getPriceFormatted({memberCount:E}),memberCount:E,discountValue:L,loading:j===TeamsPlanPeriod.YEAR,disabled:A||(S==null?void 0:S.includes(TeamsPlanPeriod.YEAR)),adornment:_===TeamsPlanPeriod.YEAR?D:null})]})}const root$p="_root_1rf7a_1",close$1="_close_1rf7a_7",title$8="_title_1rf7a_15",subtitle$3="_subtitle_1rf7a_19",bullets="_bullets_1rf7a_27",planPicker$1="_planPicker_1rf7a_46",paymentMethod="_paymentMethod_1rf7a_50",paymentMethodButton="_paymentMethodButton_1rf7a_54",footer$3="_footer_1rf7a_59",styles$Z={root:root$p,close:close$1,title:title$8,subtitle:subtitle$3,bullets,planPicker:planPicker$1,paymentMethod,paymentMethodButton,footer:footer$3},PurchaseTeamsPlanUpsell=({title:r,subtitle:s,memberCount:a,plansInfo:i,planPeriod:o,setPlanPeriod:x,paymentElement:y,onClose:_,footer:E})=>jsxRuntimeExports.jsxs("div",{className:styles$Z.root,children:[_&&jsxRuntimeExports.jsx("div",{role:"button",className:styles$Z.close,onClick:_,children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsx("h1",{className:styles$Z.title,children:r}),s&&jsxRuntimeExports.jsx("h2",{className:styles$Z.subtitle,children:s}),jsxRuntimeExports.jsxs("ul",{className:styles$Z.bullets,children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(SvgCheckicon$2,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanUpsell.bullets.1"})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(SvgCheckicon$2,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanUpsell.bullets.2"})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(SvgCheckicon$2,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanUpsell.bullets.3"})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(SvgCheckicon$2,{}),jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanUpsell.bullets.4",values:{discountPercentage:i.yearlyPlanDiscountPercentage,monthCount:3}})]})]}),jsxRuntimeExports.jsx("div",{className:styles$Z.planPicker,children:jsxRuntimeExports.jsx(TeamsPlanPicker,{plansInfo:i,planPeriod:o,onChange:x,memberCount:a})}),jsxRuntimeExports.jsx("div",{className:styles$Z.paymentMethod,children:y}),E&&jsxRuntimeExports.jsx("div",{className:styles$Z.footer,children:E})]}),PurchaseTeamsPlanForInactiveWorkspace=({workspaceId:r,onMount:s,onClose:a,onSubscribed:i,boardId:o,isTrialExpired:x})=>{const y=useSyncQueryModelById("space",r),_=useMiniToastNotifications(),{canManageSubscription:E}=useTeamWorkspacePermissions(y),{track:R}=useAnalytics(),{subscriptionData:S,subscribeWorkspaceSubscription:j,isLoading:T}=useWorkspaceSubscriptionFull(y==null?void 0:y.id),A=useWorkspaceSubscriptionPlanInfo(S),{updateWorkspaceSubscriptionPlan:M}=useSyncWorkspaceSubscription(),[P,L]=React$6.useState(""),[D,O]=React$6.useState(TeamsPlanPeriod.YEAR),B=React$6.useMemo(()=>Object.keys((y==null?void 0:y.members)||{}).length,[y==null?void 0:y.members]),N=(y==null?void 0:y.name)||"";React$6.useEffect(()=>{s==null||s({currency:A.currency,totalAmount:A[D].getPrice({memberCount:B})})},[]),React$6.useEffect(()=>{S!=null&&S.planPeriod&&O(S.planPeriod)},[S==null?void 0:S.planPeriod,R,r]);const F=React$6.useCallback(Q=>(R("teams_upsell_plan_picked",{extra_str1:r,extra_str2:A[Q].planId,extra_str3:A.currency,extra_double1:A[Q].getPrice({memberCount:B})}),O(Q),Promise.resolve()),[B,A,R,r]),[W,V]=React$6.useMemo(()=>[x?jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.trial-expired.title"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.no-trial.title"}),x?jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.trial-expired.subtitle",values:{workspaceName:N}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.no-trial.subtitle",values:{workspaceName:N}})],[x,N]),U=React$6.useCallback(Q=>{var Z;throw isHttpError(Q)&&((Z=Q.payload)==null?void 0:Z.error_code)===ERROR_SUBSCRIPTION_PAYMENT_INTENT_PROCESSING?_.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.subscription-payment-intent-processing"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick(){}}):(AnydoSentry.captureException(Q),_.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.payment-failed"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})),Q},[_]);React$6.useEffect(()=>()=>_.deleteAll(),[_]);const G=React$6.useCallback(async()=>{const Q=S==null?void 0:S.activePlan,Z=A[D].planId;D&&((S==null?void 0:S.planPeriod)!==D||Q!==Z)&&await M(r,Z)},[D,A,S==null?void 0:S.activePlan,S==null?void 0:S.planPeriod,M,r]),[oe,X]=React$6.useState(!1),ee=useWaitForSpaceActivation(r),ae=React$6.useCallback(Q=>{const{planId:Z}=A[D];return j({planId:Z,setupIntentId:Q,countryCode:A.country}).then(G).then(async()=>{X(!0),await ee()}).then(i).catch(async J=>{var te;if(isHttpError(J)&&((te=J.payload)==null?void 0:te.error_code)===ERROR_PAYMENT_INCOMPLETE)return L(J.payload.invoice_url),{pending:!0};throw J}).catch(U)},[U,i,D,A,j,G,ee]),ie=React$6.useCallback(Q=>(AnydoSentry.addBreadcrumb({category:"subscription",type:"PurchaseTeamsPlanForInactiveWorkspace: purchase after setupIntentId obtained"}),ae(Q.id)),[ae]),se=React$6.useMemo(()=>E&&(S==null?void 0:S.paymentStatus)===SubscriptionPaymentStatusT.PAYMENT_VALID?jsxRuntimeExports.jsx(SubscriptionSubmitButton,{onClick:ae}):jsxRuntimeExports.jsx(WorkspacePaymentElementForSetupIntent,{workspaceId:r,onConfirm:ie}),[E,ie,ae,S==null?void 0:S.paymentStatus,r]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PurchaseTeamsPlanUpsell,{title:W,subtitle:V,plansInfo:A,planPeriod:T?void 0:D,setPlanPeriod:F,paymentElement:se,footer:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[oe&&jsxRuntimeExports.jsx(Delayed,{ms:1e4,children:jsxRuntimeExports.jsxs("div",{className:styles$$.syncTooSlow,children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.taking-longer-than-expected-refresh-the-page"})}),jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>window.location.reload(),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.refresh"})})]})}),jsxRuntimeExports.jsx(Footer$1,{canManageSubscription:E,boardId:o,workspace:y})]}),onClose:a,memberCount:B}),jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:P!=="",onClose:a,blurred:!0,children:jsxRuntimeExports.jsx(ApproveIncompletePayment,{onClose:a,invoiceUrl:P,children:jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.activate-subscription"})})})})]})},PurchaseFamilyPlanForInactiveWorkspace=({workspaceId:r,onMount:s,onClose:a,onSubscribed:i,boardId:o})=>{const x=useSyncQueryModelById("space",r),y=useMiniToastNotifications(),{canManageSubscription:_}=useTeamWorkspacePermissions(x),{track:E}=useAnalytics(),{subscriptionData:R,subscribeWorkspaceSubscription:S,renewWorkspaceSubscription:j,isLoading:T}=useWorkspaceSubscriptionFull(x==null?void 0:x.id),A=useFamilyPlanInfo(R),{updateWorkspaceSubscriptionPlan:M}=useSyncWorkspaceSubscription(),[P,L]=React$6.useState(""),[D,O]=React$6.useState(TeamsPlanPeriod.YEAR);React$6.useEffect(()=>{s==null||s({currency:A.currency,totalAmount:A[D].getPrice()})},[]);const B=React$6.useRef(!1);useUnmountEffect(()=>{B.current||E("family_upsell_dismissed",{extra_str1:"spaces_banner",extra_str2:[A.Year.planId,A.Month.planId]})}),React$6.useEffect(()=>{R!=null&&R.planPeriod&&O(R.planPeriod)},[R==null?void 0:R.planPeriod,E,r]);const N=React$6.useCallback(se=>(E("family_upsell_plan_picked",{extra_str1:"spaces_banner",extra_str2:A[se].planId,extra_double2:se===TeamsPlanPeriod.MONTH?0:1,extra_double3:A[se].getPrice()}),O(se),Promise.resolve()),[A,E]),F=React$6.useCallback(se=>{var Q;throw isHttpError(se)&&((Q=se.payload)==null?void 0:Q.error_code)===ERROR_SUBSCRIPTION_PAYMENT_INTENT_PROCESSING?y.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.subscription-payment-intent-processing"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick(){}}):(AnydoSentry.captureException(se),y.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.payment-failed"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})),se},[y]);React$6.useEffect(()=>()=>y.deleteAll(),[y]);const W=React$6.useCallback(async()=>{const se=R==null?void 0:R.activePlan,Q=A[D].planId;D&&((R==null?void 0:R.planPeriod)!==D||se!==Q)&&await M(r,Q)},[D,A,R==null?void 0:R.activePlan,R==null?void 0:R.planPeriod,M,r]),[V,U]=React$6.useState(!1),G=useWaitForSpaceActivation(r),oe=React$6.useCallback(se=>{const{planId:Q}=A[D];return S({planId:Q,setupIntentId:se,countryCode:A.country}).then(()=>{B.current=!0}).then(W).then(async()=>{U(!0),await G()}).then(i).catch(async Z=>{var J;if(isHttpError(Z)&&((J=Z.payload)==null?void 0:J.error_code)===ERROR_PAYMENT_INCOMPLETE)return await W(),L(Z.payload.invoice_url),{pending:!0};throw Z}).catch(F)},[F,i,D,A,S,W,G]),X=React$6.useCallback(se=>(AnydoSentry.addBreadcrumb({category:"subscription",type:"PurchaseTeamsPlanForInactiveWorkspace: purchase after setupIntentId obtained"}),oe(se.id)),[oe]),[ee,ae]=React$6.useState(!1),ie=PlatformConfig.installer===PlatformInstaller.MAC_STORE?jsxRuntimeExports.jsx("div",{className:styles$$.masPurchase,children:ee?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:sprinkles({color:"primary"})}):jsxRuntimeExports.jsx(CtaButton,{onClick:async()=>{var se;try{assertNonNullable(AnydoElectronPreload),ae(!0);const Q=await AnydoElectronPreload.inAppPurchaseMas.buyProduct(A[D].masProductId);if(![A.Month.masProductId,A.Year.masProductId].includes(Q.productId))return;await j({paymentProvider:TeamsPlanPaymentProvider.MAC_APP_STORE,planPeriod:D,planType:SubscriptionPlanTypeT.FAMILY,activePlan:Q.productId,orderId:Q.transactionId,subscriptionData:{transactionId:Q.transactionId,environment:"production"}}),U(!0),await G(),i()}catch(Q){if(Q!=null&&typeof Q=="object"&&"code"in Q&&Q.code==="CANCELLED")return;if(isHttpError(Q)&&((se=Q.payload)==null?void 0:se.error_code)===ERROR_SUBSCRIPTION_USED_BY_ANOTHER_SPACE){y.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.errors.subscription-used-by-another-space"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}});return}AnydoSentry.captureException(Q),y.set(errorNotification())}finally{ae(!1)}},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})})}):_&&(R==null?void 0:R.paymentProvider)===TeamsPlanPaymentProvider.STRIPE&&(R==null?void 0:R.paymentStatus)===SubscriptionPaymentStatusT.PAYMENT_VALID?jsxRuntimeExports.jsx(SubscriptionSubmitButton,{onClick:oe}):jsxRuntimeExports.jsx(WorkspacePaymentElementForSetupIntent,{workspaceId:r,onConfirm:X});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PurchaseFamilyPlanUpsell,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.title"}),plansInfo:A,planPeriod:T?void 0:D,setPlanPeriod:N,paymentElement:ie,footer:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[V&&jsxRuntimeExports.jsx(Delayed,{ms:1e4,children:jsxRuntimeExports.jsxs("div",{className:styles$$.syncTooSlow,children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.taking-longer-than-expected-refresh-the-page"})}),jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>window.location.reload(),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.refresh"})})]})}),jsxRuntimeExports.jsx(Footer$1,{canManageSubscription:_,boardId:o,workspace:x})]}),onClose:a,memberCount:A.maxMembers}),jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:P!=="",onClose:a,blurred:!0,children:jsxRuntimeExports.jsx(ApproveIncompletePayment,{onClose:a,invoiceUrl:P,children:jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.activate-subscription"})})})})]})},PurchaseTeamsPlanForInactiveWorkspace__connector=r=>{const{isTrialExpired:s}=useWorkspaceSubscriptionBasic(r.workspaceId),{getTrialExtensionEligibility:a}=useSyncWorkspaceSubscription(),[i,o]=React$6.useState(),x=useSyncSpaces(),y=React$6.useMemo(()=>x.get(r.workspaceId),[r.workspaceId,x]);return React$6.useEffect(()=>{const _=new AbortController;return s?a(r.workspaceId,_.signal).then(({isEligible:E})=>o(E)).catch(E=>{_.signal.aborted||(AnydoSentry.captureException(E),o(!1))}):o(!1),()=>_.abort()},[a,s,r.workspaceId]),i===!1?(y==null?void 0:y.spaceType)===WorkspaceTypeT.Family?jsxRuntimeExports.jsx(PurchaseFamilyPlanForInactiveWorkspace,{...r}):jsxRuntimeExports.jsx(PurchaseTeamsPlanForInactiveWorkspace,{isTrialExpired:s,...r}):i===!0?jsxRuntimeExports.jsx(TrialPeriodExtensionModal,{...r}):null},Footer$1=({canManageSubscription:r,workspace:s,boardId:a})=>{const{userDetails:i}=useAuth(),o=useCopyLink(),x=React$6.useCallback(()=>{const E=getContactFormUrl((i==null?void 0:i.name)||"",(i==null?void 0:i.email)||"","sales");openNewWindowUrl(E)},[i==null?void 0:i.email,i==null?void 0:i.name]),y=React$6.useCallback(E=>()=>{const R=getBoardUrl(window.location.search,E,{withUpsell:!0,absolutePath:!0});o(R)},[o]),_=React$6.useCallback(()=>{const E=Object.values((s==null?void 0:s.members)||{}).find(R=>R.permissionLevel===WorkspacePermissionLevel.ADMIN);return E!=null&&E.name?E.name:null},[s==null?void 0:s.members]);return r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.cancel-anytime"}),"."," ",jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-sales",values:{a:E=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:x,children:E})}})]}):a&&_?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.copy-send",values:{adminName:_()}})," ",jsxRuntimeExports.jsx(ButtonInlineText,{onClick:y(a),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.copy-link"})})]}):null};function useWaitForSpaceActivation(r){const s=React$6.useRef(),a=React$6.useRef(),i=Recoil_index_20(cacheTaxonomy.space.byId(r));return React$6.useEffect(()=>{!s.current||!i||!isSpaceActive(i)||s.current()},[i]),React$6.useCallback(()=>(a.current||(a.current=new Promise(o=>{s.current=o})),a.current),[])}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(r,s){module.exports=s()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(s){_useWebWorker=!!s},getWebWorker=function(){return _useWebWorker},setLocationHref=function(s){locationHref=s},getLocationHref=function(){return locationHref};function createTag(r){return document.createElement(r)}function extendPrototype(r,s){var a,i=r.length,o;for(a=0;a<i;a+=1){o=r[a].prototype;for(var x in o)Object.prototype.hasOwnProperty.call(o,x)&&(s.prototype[x]=o[x])}}function getDescriptor(r,s){return Object.getOwnPropertyDescriptor(r,s)}function createProxyFunction(r){function s(){}return s.prototype=r,s}var audioControllerFactory=function(){function r(s){this.audios=[],this.audioFactory=s,this._volume=1,this._isMuted=!1}return r.prototype={addAudio:function(a){this.audios.push(a)},pause:function(){var a,i=this.audios.length;for(a=0;a<i;a+=1)this.audios[a].pause()},resume:function(){var a,i=this.audios.length;for(a=0;a<i;a+=1)this.audios[a].resume()},setRate:function(a){var i,o=this.audios.length;for(i=0;i<o;i+=1)this.audios[i].setRate(a)},createAudio:function(a){return this.audioFactory?this.audioFactory(a):window.Howl?new window.Howl({src:[a]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(a){this.audioFactory=a},setVolume:function(a){this._volume=a,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var a,i=this.audios.length;for(a=0;a<i;a+=1)this.audios[a].volume(this._volume*(this._isMuted?0:1))}},function(){return new r}}(),createTypedArray=function(){function r(a,i){var o=0,x=[],y;switch(a){case"int16":case"uint8c":y=1;break;default:y=1.1;break}for(o=0;o<i;o+=1)x.push(y);return x}function s(a,i){return a==="float32"?new Float32Array(i):a==="int16"?new Int16Array(i):a==="uint8c"?new Uint8ClampedArray(i):r(a,i)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?s:r}();function createSizedArray(r){return Array.apply(null,{length:r})}function _typeof$6(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(a){return typeof a}:_typeof$6=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$6(r)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var r=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],s,a=r.length;for(s=0;s<a;s+=1)BMMath[r[s]]=Math[r[s]]})(),BMMath.random=Math.random,BMMath.abs=function(r){var s=_typeof$6(r);if(s==="object"&&r.length){var a=createSizedArray(r.length),i,o=r.length;for(i=0;i<o;i+=1)a[i]=Math.abs(r[i]);return a}return Math.abs(r)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(r){r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.display="block",r.style.transformOrigin="0 0",r.style.webkitTransformOrigin="0 0",r.style.backfaceVisibility="visible",r.style.webkitBackfaceVisibility="visible",r.style.transformStyle="preserve-3d",r.style.webkitTransformStyle="preserve-3d",r.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(r,s,a,i){this.type=r,this.currentTime=s,this.totalTime=a,this.direction=i<0?-1:1}function BMCompleteEvent(r,s){this.type=r,this.direction=s<0?-1:1}function BMCompleteLoopEvent(r,s,a,i){this.type=r,this.currentLoop=a,this.totalLoops=s,this.direction=i<0?-1:1}function BMSegmentStartEvent(r,s,a){this.type=r,this.firstFrame=s,this.totalFrames=a}function BMDestroyEvent(r,s){this.type=r,this.target=s}function BMRenderFrameErrorEvent(r,s){this.type="renderFrameError",this.nativeError=r,this.currentTime=s}function BMConfigErrorEvent(r){this.type="configError",this.nativeError=r}var createElementID=function(){var r=0;return function(){return r+=1,idPrefix$1+"__lottie_element_"+r}}();function HSVtoRGB(r,s,a){var i,o,x,y,_,E,R,S;switch(y=Math.floor(r*6),_=r*6-y,E=a*(1-s),R=a*(1-_*s),S=a*(1-(1-_)*s),y%6){case 0:i=a,o=S,x=E;break;case 1:i=R,o=a,x=E;break;case 2:i=E,o=a,x=S;break;case 3:i=E,o=R,x=a;break;case 4:i=S,o=E,x=a;break;case 5:i=a,o=E,x=R;break}return[i,o,x]}function RGBtoHSV(r,s,a){var i=Math.max(r,s,a),o=Math.min(r,s,a),x=i-o,y,_=i===0?0:x/i,E=i/255;switch(i){case o:y=0;break;case r:y=s-a+x*(s<a?6:0),y/=6*x;break;case s:y=a-r+x*2,y/=6*x;break;case a:y=r-s+x*4,y/=6*x;break}return[y,_,E]}function addSaturationToRGB(r,s){var a=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return a[1]+=s,a[1]>1?a[1]=1:a[1]<=0&&(a[1]=0),HSVtoRGB(a[0],a[1],a[2])}function addBrightnessToRGB(r,s){var a=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return a[2]+=s,a[2]>1?a[2]=1:a[2]<0&&(a[2]=0),HSVtoRGB(a[0],a[1],a[2])}function addHueToRGB(r,s){var a=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return a[0]+=s/360,a[0]>1?a[0]-=1:a[0]<0&&(a[0]+=1),HSVtoRGB(a[0],a[1],a[2])}var rgbToHex=function(){var r=[],s,a;for(s=0;s<256;s+=1)a=s.toString(16),r[s]=a.length===1?"0"+a:a;return function(i,o,x){return i<0&&(i=0),o<0&&(o=0),x<0&&(x=0),"#"+r[i]+r[o]+r[x]}}(),setSubframeEnabled=function(s){subframeEnabled=!!s},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(s){expressionsPlugin=s},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(s){expressionsInterfaces=s},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(s){defaultCurveSegments=s},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(s){idPrefix$1=s};function createNS(r){return document.createElementNS(svgNS,r)}function _typeof$5(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(a){return typeof a}:_typeof$5=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$5(r)}var dataManager=function(){var r=1,s=[],a,i,o={onmessage:function(){},postMessage:function(A){a({data:A})}},x={postMessage:function(A){o.onmessage({data:A})}};function y(T){if(window.Worker&&window.Blob&&getWebWorker()){var A=new Blob(["var _workerSelf = self; self.onmessage = ",T.toString()],{type:"text/javascript"}),M=URL.createObjectURL(A);return new Worker(M)}return a=T,o}function _(){i||(i=y(function(A){function M(){function L(se,Q){var Z,J,te=se.length,de,ce,me,ve;for(J=0;J<te;J+=1)if(Z=se[J],"ks"in Z&&!Z.completed){if(Z.completed=!0,Z.hasMask){var xe=Z.masksProperties;for(ce=xe.length,de=0;de<ce;de+=1)if(xe[de].pt.k.i)F(xe[de].pt.k);else for(ve=xe[de].pt.k.length,me=0;me<ve;me+=1)xe[de].pt.k[me].s&&F(xe[de].pt.k[me].s[0]),xe[de].pt.k[me].e&&F(xe[de].pt.k[me].e[0])}Z.ty===0?(Z.layers=B(Z.refId,Q),L(Z.layers,Q)):Z.ty===4?N(Z.shapes):Z.ty===5&&ae(Z)}}function D(se,Q){if(se){var Z=0,J=se.length;for(Z=0;Z<J;Z+=1)se[Z].t===1&&(se[Z].data.layers=B(se[Z].data.refId,Q),L(se[Z].data.layers,Q))}}function O(se,Q){for(var Z=0,J=Q.length;Z<J;){if(Q[Z].id===se)return Q[Z];Z+=1}return null}function B(se,Q){var Z=O(se,Q);return Z?Z.layers.__used?JSON.parse(JSON.stringify(Z.layers)):(Z.layers.__used=!0,Z.layers):null}function N(se){var Q,Z=se.length,J,te;for(Q=Z-1;Q>=0;Q-=1)if(se[Q].ty==="sh")if(se[Q].ks.k.i)F(se[Q].ks.k);else for(te=se[Q].ks.k.length,J=0;J<te;J+=1)se[Q].ks.k[J].s&&F(se[Q].ks.k[J].s[0]),se[Q].ks.k[J].e&&F(se[Q].ks.k[J].e[0]);else se[Q].ty==="gr"&&N(se[Q].it)}function F(se){var Q,Z=se.i.length;for(Q=0;Q<Z;Q+=1)se.i[Q][0]+=se.v[Q][0],se.i[Q][1]+=se.v[Q][1],se.o[Q][0]+=se.v[Q][0],se.o[Q][1]+=se.v[Q][1]}function W(se,Q){var Z=Q?Q.split("."):[100,100,100];return se[0]>Z[0]?!0:Z[0]>se[0]?!1:se[1]>Z[1]?!0:Z[1]>se[1]?!1:se[2]>Z[2]?!0:Z[2]>se[2]?!1:null}var V=function(){var se=[4,4,14];function Q(J){var te=J.t.d;J.t.d={k:[{s:te,t:0}]}}function Z(J){var te,de=J.length;for(te=0;te<de;te+=1)J[te].ty===5&&Q(J[te])}return function(J){if(W(se,J.v)&&(Z(J.layers),J.assets)){var te,de=J.assets.length;for(te=0;te<de;te+=1)J.assets[te].layers&&Z(J.assets[te].layers)}}}(),U=function(){var se=[4,7,99];return function(Q){if(Q.chars&&!W(se,Q.v)){var Z,J=Q.chars.length;for(Z=0;Z<J;Z+=1){var te=Q.chars[Z];te.data&&te.data.shapes&&(N(te.data.shapes),te.data.ip=0,te.data.op=99999,te.data.st=0,te.data.sr=1,te.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Q.chars[Z].t||(te.data.shapes.push({ty:"no"}),te.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),G=function(){var se=[5,7,15];function Q(J){var te=J.t.p;typeof te.a=="number"&&(te.a={a:0,k:te.a}),typeof te.p=="number"&&(te.p={a:0,k:te.p}),typeof te.r=="number"&&(te.r={a:0,k:te.r})}function Z(J){var te,de=J.length;for(te=0;te<de;te+=1)J[te].ty===5&&Q(J[te])}return function(J){if(W(se,J.v)&&(Z(J.layers),J.assets)){var te,de=J.assets.length;for(te=0;te<de;te+=1)J.assets[te].layers&&Z(J.assets[te].layers)}}}(),oe=function(){var se=[4,1,9];function Q(J){var te,de=J.length,ce,me;for(te=0;te<de;te+=1)if(J[te].ty==="gr")Q(J[te].it);else if(J[te].ty==="fl"||J[te].ty==="st")if(J[te].c.k&&J[te].c.k[0].i)for(me=J[te].c.k.length,ce=0;ce<me;ce+=1)J[te].c.k[ce].s&&(J[te].c.k[ce].s[0]/=255,J[te].c.k[ce].s[1]/=255,J[te].c.k[ce].s[2]/=255,J[te].c.k[ce].s[3]/=255),J[te].c.k[ce].e&&(J[te].c.k[ce].e[0]/=255,J[te].c.k[ce].e[1]/=255,J[te].c.k[ce].e[2]/=255,J[te].c.k[ce].e[3]/=255);else J[te].c.k[0]/=255,J[te].c.k[1]/=255,J[te].c.k[2]/=255,J[te].c.k[3]/=255}function Z(J){var te,de=J.length;for(te=0;te<de;te+=1)J[te].ty===4&&Q(J[te].shapes)}return function(J){if(W(se,J.v)&&(Z(J.layers),J.assets)){var te,de=J.assets.length;for(te=0;te<de;te+=1)J.assets[te].layers&&Z(J.assets[te].layers)}}}(),X=function(){var se=[4,4,18];function Q(J){var te,de=J.length,ce,me;for(te=de-1;te>=0;te-=1)if(J[te].ty==="sh")if(J[te].ks.k.i)J[te].ks.k.c=J[te].closed;else for(me=J[te].ks.k.length,ce=0;ce<me;ce+=1)J[te].ks.k[ce].s&&(J[te].ks.k[ce].s[0].c=J[te].closed),J[te].ks.k[ce].e&&(J[te].ks.k[ce].e[0].c=J[te].closed);else J[te].ty==="gr"&&Q(J[te].it)}function Z(J){var te,de,ce=J.length,me,ve,xe,ge;for(de=0;de<ce;de+=1){if(te=J[de],te.hasMask){var be=te.masksProperties;for(ve=be.length,me=0;me<ve;me+=1)if(be[me].pt.k.i)be[me].pt.k.c=be[me].cl;else for(ge=be[me].pt.k.length,xe=0;xe<ge;xe+=1)be[me].pt.k[xe].s&&(be[me].pt.k[xe].s[0].c=be[me].cl),be[me].pt.k[xe].e&&(be[me].pt.k[xe].e[0].c=be[me].cl)}te.ty===4&&Q(te.shapes)}}return function(J){if(W(se,J.v)&&(Z(J.layers),J.assets)){var te,de=J.assets.length;for(te=0;te<de;te+=1)J.assets[te].layers&&Z(J.assets[te].layers)}}}();function ee(se){se.__complete||(oe(se),V(se),U(se),G(se),X(se),L(se.layers,se.assets),D(se.chars,se.assets),se.__complete=!0)}function ae(se){se.t.a.length===0&&"m"in se.t.p}var ie={};return ie.completeData=ee,ie.checkColors=oe,ie.checkChars=U,ie.checkPathProperties=G,ie.checkShapes=X,ie.completeLayers=L,ie}if(x.dataManager||(x.dataManager=M()),x.assetLoader||(x.assetLoader=function(){function L(O){var B=O.getResponseHeader("content-type");return B&&O.responseType==="json"&&B.indexOf("json")!==-1||O.response&&_typeof$5(O.response)==="object"?O.response:O.response&&typeof O.response=="string"?JSON.parse(O.response):O.responseText?JSON.parse(O.responseText):null}function D(O,B,N,F){var W,V=new XMLHttpRequest;try{V.responseType="json"}catch{}V.onreadystatechange=function(){if(V.readyState===4)if(V.status===200)W=L(V),N(W);else try{W=L(V),N(W)}catch(U){F&&F(U)}};try{V.open(["G","E","T"].join(""),O,!0)}catch{V.open(["G","E","T"].join(""),B+"/"+O,!0)}V.send()}return{load:D}}()),A.data.type==="loadAnimation")x.assetLoader.load(A.data.path,A.data.fullPath,function(L){x.dataManager.completeData(L),x.postMessage({id:A.data.id,payload:L,status:"success"})},function(){x.postMessage({id:A.data.id,status:"error"})});else if(A.data.type==="complete"){var P=A.data.animation;x.dataManager.completeData(P),x.postMessage({id:A.data.id,payload:P,status:"success"})}else A.data.type==="loadData"&&x.assetLoader.load(A.data.path,A.data.fullPath,function(L){x.postMessage({id:A.data.id,payload:L,status:"success"})},function(){x.postMessage({id:A.data.id,status:"error"})})}),i.onmessage=function(T){var A=T.data,M=A.id,P=s[M];s[M]=null,A.status==="success"?P.onComplete(A.payload):P.onError&&P.onError()})}function E(T,A){r+=1;var M="processId_"+r;return s[M]={onComplete:T,onError:A},M}function R(T,A,M){_();var P=E(A,M);i.postMessage({type:"loadAnimation",path:T,fullPath:window.location.origin+window.location.pathname,id:P})}function S(T,A,M){_();var P=E(A,M);i.postMessage({type:"loadData",path:T,fullPath:window.location.origin+window.location.pathname,id:P})}function j(T,A,M){_();var P=E(A,M);i.postMessage({type:"complete",animation:T,id:P})}return{loadAnimation:R,loadData:S,completeAnimation:j}}(),ImagePreloader=function(){var r=function(){var D=createTag("canvas");D.width=1,D.height=1;var O=D.getContext("2d");return O.fillStyle="rgba(0,0,0,0)",O.fillRect(0,0,1,1),D}();function s(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function a(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(D,O,B){var N="";if(D.e)N=D.p;else if(O){var F=D.p;F.indexOf("images/")!==-1&&(F=F.split("/")[1]),N=O+F}else N=B,N+=D.u?D.u:"",N+=D.p;return N}function o(D){var O=0,B=setInterval((function(){var N=D.getBBox();(N.width||O>500)&&(this._imageLoaded(),clearInterval(B)),O+=1}).bind(this),50)}function x(D){var O=i(D,this.assetsPath,this.path),B=createNS("image");isSafari?this.testImageLoaded(B):B.addEventListener("load",this._imageLoaded,!1),B.addEventListener("error",(function(){N.img=r,this._imageLoaded()}).bind(this),!1),B.setAttributeNS("http://www.w3.org/1999/xlink","href",O),this._elementHelper.append?this._elementHelper.append(B):this._elementHelper.appendChild(B);var N={img:B,assetData:D};return N}function y(D){var O=i(D,this.assetsPath,this.path),B=createTag("img");B.crossOrigin="anonymous",B.addEventListener("load",this._imageLoaded,!1),B.addEventListener("error",(function(){N.img=r,this._imageLoaded()}).bind(this),!1),B.src=O;var N={img:B,assetData:D};return N}function _(D){var O={assetData:D},B=i(D,this.assetsPath,this.path);return dataManager.loadData(B,(function(N){O.img=N,this._footageLoaded()}).bind(this),(function(){O.img={},this._footageLoaded()}).bind(this)),O}function E(D,O){this.imagesLoadedCb=O;var B,N=D.length;for(B=0;B<N;B+=1)D[B].layers||(!D[B].t||D[B].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(D[B]))):D[B].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(D[B]))))}function R(D){this.path=D||""}function S(D){this.assetsPath=D||""}function j(D){for(var O=0,B=this.images.length;O<B;){if(this.images[O].assetData===D)return this.images[O].img;O+=1}return null}function T(){this.imagesLoadedCb=null,this.images.length=0}function A(){return this.totalImages===this.loadedAssets}function M(){return this.totalFootages===this.loadedFootagesCount}function P(D,O){D==="svg"?(this._elementHelper=O,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function L(){this._imageLoaded=s.bind(this),this._footageLoaded=a.bind(this),this.testImageLoaded=o.bind(this),this.createFootageData=_.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return L.prototype={loadAssets:E,setAssetsPath:S,setPath:R,loadedImages:A,loadedFootages:M,destroy:T,getAsset:j,createImgData:y,createImageData:x,imageLoaded:s,footageLoaded:a,setCacheType:P},L}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(s,a){if(this._cbs[s])for(var i=this._cbs[s],o=0;o<i.length;o+=1)i[o](a)},addEventListener:function(s,a){return this._cbs[s]||(this._cbs[s]=[]),this._cbs[s].push(a),(function(){this.removeEventListener(s,a)}).bind(this)},removeEventListener:function(s,a){if(!a)this._cbs[s]=null;else if(this._cbs[s]){for(var i=0,o=this._cbs[s].length;i<o;)this._cbs[s][i]===a&&(this._cbs[s].splice(i,1),i-=1,o-=1),i+=1;this._cbs[s].length||(this._cbs[s]=null)}}};var markerParser=function(){function r(s){for(var a=s.split(`\r
`),i={},o,x=0,y=0;y<a.length;y+=1)o=a[y].split(":"),o.length===2&&(i[o[0]]=o[1].trim(),x+=1);if(x===0)throw new Error;return i}return function(s){for(var a=[],i=0;i<s.length;i+=1){var o=s[i],x={time:o.tm,duration:o.dr};try{x.payload=JSON.parse(s[i].cm)}catch{try{x.payload=r(s[i].cm)}catch{x.payload={name:s[i].cm}}}a.push(x)}return a}}(),ProjectInterface=function(){function r(s){this.compositions.push(s)}return function(){function s(a){for(var i=0,o=this.compositions.length;i<o;){if(this.compositions[i].data&&this.compositions[i].data.nm===a)return this.compositions[i].prepareFrame&&this.compositions[i].data.xt&&this.compositions[i].prepareFrame(this.currentFrame),this.compositions[i].compInterface;i+=1}return null}return s.compositions=[],s.currentFrame=0,s.registerComposition=r,s}}(),renderers={},registerRenderer=function(s,a){renderers[s]=a};function getRenderer(r){return renderers[r]}function _typeof$4(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(a){return typeof a}:_typeof$4=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$4(r)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(r){(r.wrapper||r.container)&&(this.wrapper=r.wrapper||r.container);var s="svg";r.animType?s=r.animType:r.renderer&&(s=r.renderer);var a=getRenderer(s);this.renderer=new a(this,r.rendererSettings),this.imagePreloader.setCacheType(s,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=s,r.loop===""||r.loop===null||r.loop===void 0||r.loop===!0?this.loop=!0:r.loop===!1?this.loop=!1:this.loop=parseInt(r.loop,10),this.autoplay="autoplay"in r?r.autoplay:!0,this.name=r.name?r.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(r,"autoloadSegments")?r.autoloadSegments:!0,this.assetsPath=r.assetsPath,this.initialSegment=r.initialSegment,r.audioFactory&&this.audioController.setAudioFactory(r.audioFactory),r.animationData?this.setupAnimation(r.animationData):r.path&&(r.path.lastIndexOf("\\")!==-1?this.path=r.path.substr(0,r.path.lastIndexOf("\\")+1):this.path=r.path.substr(0,r.path.lastIndexOf("/")+1),this.fileName=r.path.substr(r.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(r.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(r){dataManager.completeAnimation(r,this.configAnimation)},AnimationItem.prototype.setData=function(r,s){s&&_typeof$4(s)!=="object"&&(s=JSON.parse(s));var a={wrapper:r,animationData:s},i=r.attributes;a.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",a.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:"canvas";var o=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";o==="false"?a.loop=!1:o==="true"?a.loop=!0:o!==""&&(a.loop=parseInt(o,10));var x=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:i.getNamedItem("bm-autoplay")?i.getNamedItem("bm-autoplay").value:!0;a.autoplay=x!=="false",a.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"";var y=i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"";y==="false"&&(a.prerender=!1),this.setParams(a)},AnimationItem.prototype.includeLayers=function(r){r.op>this.animationData.op&&(this.animationData.op=r.op,this.totalFrames=Math.floor(r.op-this.animationData.ip));var s=this.animationData.layers,a,i=s.length,o=r.layers,x,y=o.length;for(x=0;x<y;x+=1)for(a=0;a<i;){if(s[a].id===o[x].id){s[a]=o[x];break}a+=1}if((r.chars||r.fonts)&&(this.renderer.globalData.fontManager.addChars(r.chars),this.renderer.globalData.fontManager.addFonts(r.fonts,this.renderer.globalData.defs)),r.assets)for(i=r.assets.length,a=0;a<i;a+=1)this.animationData.assets.push(r.assets[a]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(r){this.animationData=r;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var r=this.animationData.segments;if(!r||r.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var s=r.shift();this.timeCompleted=s.time*this.frameRate;var a=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(a,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var r=this.animationData.segments;r||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(r){if(this.renderer)try{this.animationData=r,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(r),r.assets||(r.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(r.assets),this.markers=markerParser(r.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(s){this.triggerConfigError(s)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(r,s){var a=typeof r=="number"?r:void 0,i=typeof s=="number"?s:void 0;this.renderer.updateContainerSize(a,i)},AnimationItem.prototype.setSubframe=function(r){this.isSubframeEnabled=!!r},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(r){this.triggerRenderFrameError(r)}},AnimationItem.prototype.play=function(r){r&&this.name!==r||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(r){r&&this.name!==r||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(r){r&&this.name!==r||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(r){r&&this.name!==r||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(r){for(var s,a=0;a<this.markers.length;a+=1)if(s=this.markers[a],s.payload&&s.payload.name===r)return s;return null},AnimationItem.prototype.goToAndStop=function(r,s,a){if(!(a&&this.name!==a)){var i=Number(r);if(isNaN(i)){var o=this.getMarkerData(r);o&&this.goToAndStop(o.time,!0)}else s?this.setCurrentRawFrameValue(r):this.setCurrentRawFrameValue(r*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(r,s,a){if(!(a&&this.name!==a)){var i=Number(r);if(isNaN(i)){var o=this.getMarkerData(r);o&&(o.duration?this.playSegments([o.time,o.time+o.duration],!0):this.goToAndStop(o.time,!0))}else this.goToAndStop(i,s,a);this.play()}},AnimationItem.prototype.advanceTime=function(r){if(!(this.isPaused===!0||this.isLoaded===!1)){var s=this.currentRawFrame+r*this.frameModifier,a=!1;s>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(s>this.totalFrames?s%this.totalFrames:0)||(a=!0,s=this.totalFrames-1):s>=this.totalFrames?(this.playCount+=1,this.checkSegments(s%this.totalFrames)||(this.setCurrentRawFrameValue(s%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(s):s<0?this.checkSegments(s%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+s%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(a=!0,s=0)):this.setCurrentRawFrameValue(s),a&&(this.setCurrentRawFrameValue(s),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(r,s){this.playCount=0,r[1]<r[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=r[0]-r[1],this.timeCompleted=this.totalFrames,this.firstFrame=r[1],this.setCurrentRawFrameValue(this.totalFrames-.001-s)):r[1]>r[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=r[1]-r[0],this.timeCompleted=this.totalFrames,this.firstFrame=r[0],this.setCurrentRawFrameValue(.001+s)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(r,s){var a=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<r?a=r:this.currentRawFrame+this.firstFrame>s&&(a=s-r)),this.firstFrame=r,this.totalFrames=s-r,this.timeCompleted=this.totalFrames,a!==-1&&this.goToAndStop(a,!0)},AnimationItem.prototype.playSegments=function(r,s){if(s&&(this.segments.length=0),_typeof$4(r[0])==="object"){var a,i=r.length;for(a=0;a<i;a+=1)this.segments.push(r[a])}else this.segments.push(r);this.segments.length&&s&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(r){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),r&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(r){return this.segments.length?(this.adjustSegment(this.segments.shift(),r),!0):!1},AnimationItem.prototype.destroy=function(r){r&&this.name!==r||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(r){this.currentRawFrame=r,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(r){this.playSpeed=r,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(r){this.playDirection=r<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(r){this.loop=r},AnimationItem.prototype.setVolume=function(r,s){s&&this.name!==s||this.audioController.setVolume(r)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(r){r&&this.name!==r||this.audioController.mute()},AnimationItem.prototype.unmute=function(r){r&&this.name!==r||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(r){var s="";if(r.e)s=r.p;else if(this.assetsPath){var a=r.p;a.indexOf("images/")!==-1&&(a=a.split("/")[1]),s=this.assetsPath+a}else s=this.path,s+=r.u?r.u:"",s+=r.p;return s},AnimationItem.prototype.getAssetData=function(r){for(var s=0,a=this.assets.length;s<a;){if(r===this.assets[s].id)return this.assets[s];s+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(r){return r?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(r,s,a){try{var i=this.renderer.getElementByPath(r);i.updateDocumentData(s,a)}catch{}},AnimationItem.prototype.trigger=function(r){if(this._cbs&&this._cbs[r])switch(r){case"enterFrame":this.triggerEvent(r,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(r,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(r,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(r,new BMCompleteEvent(r,this.frameMult));break;case"segmentStart":this.triggerEvent(r,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(r,new BMDestroyEvent(r,this));break;default:this.triggerEvent(r)}r==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameMult)),r==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult)),r==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(r,this.frameMult)),r==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames)),r==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(r,this))},AnimationItem.prototype.triggerRenderFrameError=function(r){var s=new BMRenderFrameErrorEvent(r,this.currentFrame);this.triggerEvent("error",s),this.onError&&this.onError.call(this,s)},AnimationItem.prototype.triggerConfigError=function(r){var s=new BMConfigErrorEvent(r,this.currentFrame);this.triggerEvent("error",s),this.onError&&this.onError.call(this,s)};var animationManager=function(){var r={},s=[],a=0,i=0,o=0,x=!0,y=!1;function _(Q){for(var Z=0,J=Q.target;Z<i;)s[Z].animation===J&&(s.splice(Z,1),Z-=1,i-=1,J.isPaused||j()),Z+=1}function E(Q,Z){if(!Q)return null;for(var J=0;J<i;){if(s[J].elem===Q&&s[J].elem!==null)return s[J].animation;J+=1}var te=new AnimationItem;return T(te,Q),te.setData(Q,Z),te}function R(){var Q,Z=s.length,J=[];for(Q=0;Q<Z;Q+=1)J.push(s[Q].animation);return J}function S(){o+=1,oe()}function j(){o-=1}function T(Q,Z){Q.addEventListener("destroy",_),Q.addEventListener("_active",S),Q.addEventListener("_idle",j),s.push({elem:Z,animation:Q}),i+=1}function A(Q){var Z=new AnimationItem;return T(Z,null),Z.setParams(Q),Z}function M(Q,Z){var J;for(J=0;J<i;J+=1)s[J].animation.setSpeed(Q,Z)}function P(Q,Z){var J;for(J=0;J<i;J+=1)s[J].animation.setDirection(Q,Z)}function L(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.play(Q)}function D(Q){var Z=Q-a,J;for(J=0;J<i;J+=1)s[J].animation.advanceTime(Z);a=Q,o&&!y?window.requestAnimationFrame(D):x=!0}function O(Q){a=Q,window.requestAnimationFrame(D)}function B(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.pause(Q)}function N(Q,Z,J){var te;for(te=0;te<i;te+=1)s[te].animation.goToAndStop(Q,Z,J)}function F(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.stop(Q)}function W(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.togglePause(Q)}function V(Q){var Z;for(Z=i-1;Z>=0;Z-=1)s[Z].animation.destroy(Q)}function U(Q,Z,J){var te=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),de,ce=te.length;for(de=0;de<ce;de+=1)J&&te[de].setAttribute("data-bm-type",J),E(te[de],Q);if(Z&&ce===0){J||(J="svg");var me=document.getElementsByTagName("body")[0];me.innerText="";var ve=createTag("div");ve.style.width="100%",ve.style.height="100%",ve.setAttribute("data-bm-type",J),me.appendChild(ve),E(ve,Q)}}function G(){var Q;for(Q=0;Q<i;Q+=1)s[Q].animation.resize()}function oe(){!y&&o&&x&&(window.requestAnimationFrame(O),x=!1)}function X(){y=!0}function ee(){y=!1,oe()}function ae(Q,Z){var J;for(J=0;J<i;J+=1)s[J].animation.setVolume(Q,Z)}function ie(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.mute(Q)}function se(Q){var Z;for(Z=0;Z<i;Z+=1)s[Z].animation.unmute(Q)}return r.registerAnimation=E,r.loadAnimation=A,r.setSpeed=M,r.setDirection=P,r.play=L,r.pause=B,r.stop=F,r.togglePause=W,r.searchAnimations=U,r.resize=G,r.goToAndStop=N,r.destroy=V,r.freeze=X,r.unfreeze=ee,r.setVolume=ae,r.mute=ie,r.unmute=se,r.getRegisteredAnimations=R,r}(),BezierFactory=function(){var r={};r.getBezierEasing=a;var s={};function a(O,B,N,F,W){var V=W||("bez_"+O+"_"+B+"_"+N+"_"+F).replace(/\./g,"p");if(s[V])return s[V];var U=new D([O,B,N,F]);return s[V]=U,U}var i=4,o=.001,x=1e-7,y=10,_=11,E=1/(_-1),R=typeof Float32Array=="function";function S(O,B){return 1-3*B+3*O}function j(O,B){return 3*B-6*O}function T(O){return 3*O}function A(O,B,N){return((S(B,N)*O+j(B,N))*O+T(B))*O}function M(O,B,N){return 3*S(B,N)*O*O+2*j(B,N)*O+T(B)}function P(O,B,N,F,W){var V,U,G=0;do U=B+(N-B)/2,V=A(U,F,W)-O,V>0?N=U:B=U;while(Math.abs(V)>x&&++G<y);return U}function L(O,B,N,F){for(var W=0;W<i;++W){var V=M(B,N,F);if(V===0)return B;var U=A(B,N,F)-O;B-=U/V}return B}function D(O){this._p=O,this._mSampleValues=R?new Float32Array(_):new Array(_),this._precomputed=!1,this.get=this.get.bind(this)}return D.prototype={get:function(B){var N=this._p[0],F=this._p[1],W=this._p[2],V=this._p[3];return this._precomputed||this._precompute(),N===F&&W===V?B:B===0?0:B===1?1:A(this._getTForX(B),F,V)},_precompute:function(){var B=this._p[0],N=this._p[1],F=this._p[2],W=this._p[3];this._precomputed=!0,(B!==N||F!==W)&&this._calcSampleValues()},_calcSampleValues:function(){for(var B=this._p[0],N=this._p[2],F=0;F<_;++F)this._mSampleValues[F]=A(F*E,B,N)},_getTForX:function(B){for(var N=this._p[0],F=this._p[2],W=this._mSampleValues,V=0,U=1,G=_-1;U!==G&&W[U]<=B;++U)V+=E;--U;var oe=(B-W[U])/(W[U+1]-W[U]),X=V+oe*E,ee=M(X,N,F);return ee>=o?L(B,X,N,F):ee===0?X:P(B,V,V+E,N,F)}},r}(),pooling=function(){function r(s){return s.concat(createSizedArray(s.length))}return{double:r}}(),poolFactory=function(){return function(r,s,a){var i=0,o=r,x=createSizedArray(o),y={newElement:_,release:E};function _(){var R;return i?(i-=1,R=x[i]):R=s(),R}function E(R){i===o&&(x=pooling.double(x),o*=2),a&&a(R),x[i]=R,i+=1}return y}}(),bezierLengthPool=function(){function r(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,r)}(),segmentsLengthPool=function(){function r(){return{lengths:[],totalLength:0}}function s(a){var i,o=a.lengths.length;for(i=0;i<o;i+=1)bezierLengthPool.release(a.lengths[i]);a.lengths.length=0}return poolFactory(8,r,s)}();function bezFunction(){var r=Math;function s(T,A,M,P,L,D){var O=T*P+A*L+M*D-L*P-D*T-M*A;return O>-.001&&O<.001}function a(T,A,M,P,L,D,O,B,N){if(M===0&&D===0&&N===0)return s(T,A,P,L,O,B);var F=r.sqrt(r.pow(P-T,2)+r.pow(L-A,2)+r.pow(D-M,2)),W=r.sqrt(r.pow(O-T,2)+r.pow(B-A,2)+r.pow(N-M,2)),V=r.sqrt(r.pow(O-P,2)+r.pow(B-L,2)+r.pow(N-D,2)),U;return F>W?F>V?U=F-W-V:U=V-W-F:V>W?U=V-W-F:U=W-F-V,U>-1e-4&&U<1e-4}var i=function(){return function(T,A,M,P){var L=getDefaultCurveSegments(),D,O,B,N,F,W=0,V,U=[],G=[],oe=bezierLengthPool.newElement();for(B=M.length,D=0;D<L;D+=1){for(F=D/(L-1),V=0,O=0;O<B;O+=1)N=bmPow(1-F,3)*T[O]+3*bmPow(1-F,2)*F*M[O]+3*(1-F)*bmPow(F,2)*P[O]+bmPow(F,3)*A[O],U[O]=N,G[O]!==null&&(V+=bmPow(U[O]-G[O],2)),G[O]=U[O];V&&(V=bmSqrt(V),W+=V),oe.percents[D]=F,oe.lengths[D]=W}return oe.addedLength=W,oe}}();function o(T){var A=segmentsLengthPool.newElement(),M=T.c,P=T.v,L=T.o,D=T.i,O,B=T._length,N=A.lengths,F=0;for(O=0;O<B-1;O+=1)N[O]=i(P[O],P[O+1],L[O],D[O+1]),F+=N[O].addedLength;return M&&B&&(N[O]=i(P[O],P[0],L[O],D[0]),F+=N[O].addedLength),A.totalLength=F,A}function x(T){this.segmentLength=0,this.points=new Array(T)}function y(T,A){this.partialLength=T,this.point=A}var _=function(){var T={};return function(A,M,P,L){var D=(A[0]+"_"+A[1]+"_"+M[0]+"_"+M[1]+"_"+P[0]+"_"+P[1]+"_"+L[0]+"_"+L[1]).replace(/\./g,"p");if(!T[D]){var O=getDefaultCurveSegments(),B,N,F,W,V,U=0,G,oe,X=null;A.length===2&&(A[0]!==M[0]||A[1]!==M[1])&&s(A[0],A[1],M[0],M[1],A[0]+P[0],A[1]+P[1])&&s(A[0],A[1],M[0],M[1],M[0]+L[0],M[1]+L[1])&&(O=2);var ee=new x(O);for(F=P.length,B=0;B<O;B+=1){for(oe=createSizedArray(F),V=B/(O-1),G=0,N=0;N<F;N+=1)W=bmPow(1-V,3)*A[N]+3*bmPow(1-V,2)*V*(A[N]+P[N])+3*(1-V)*bmPow(V,2)*(M[N]+L[N])+bmPow(V,3)*M[N],oe[N]=W,X!==null&&(G+=bmPow(oe[N]-X[N],2));G=bmSqrt(G),U+=G,ee.points[B]=new y(G,oe),X=oe}ee.segmentLength=U,T[D]=ee}return T[D]}}();function E(T,A){var M=A.percents,P=A.lengths,L=M.length,D=bmFloor((L-1)*T),O=T*A.addedLength,B=0;if(D===L-1||D===0||O===P[D])return M[D];for(var N=P[D]>O?-1:1,F=!0;F;)if(P[D]<=O&&P[D+1]>O?(B=(O-P[D])/(P[D+1]-P[D]),F=!1):D+=N,D<0||D>=L-1){if(D===L-1)return M[D];F=!1}return M[D]+(M[D+1]-M[D])*B}function R(T,A,M,P,L,D){var O=E(L,D),B=1-O,N=r.round((B*B*B*T[0]+(O*B*B+B*O*B+B*B*O)*M[0]+(O*O*B+B*O*O+O*B*O)*P[0]+O*O*O*A[0])*1e3)/1e3,F=r.round((B*B*B*T[1]+(O*B*B+B*O*B+B*B*O)*M[1]+(O*O*B+B*O*O+O*B*O)*P[1]+O*O*O*A[1])*1e3)/1e3;return[N,F]}var S=createTypedArray("float32",8);function j(T,A,M,P,L,D,O){L<0?L=0:L>1&&(L=1);var B=E(L,O);D=D>1?1:D;var N=E(D,O),F,W=T.length,V=1-B,U=1-N,G=V*V*V,oe=B*V*V*3,X=B*B*V*3,ee=B*B*B,ae=V*V*U,ie=B*V*U+V*B*U+V*V*N,se=B*B*U+V*B*N+B*V*N,Q=B*B*N,Z=V*U*U,J=B*U*U+V*N*U+V*U*N,te=B*N*U+V*N*N+B*U*N,de=B*N*N,ce=U*U*U,me=N*U*U+U*N*U+U*U*N,ve=N*N*U+U*N*N+N*U*N,xe=N*N*N;for(F=0;F<W;F+=1)S[F*4]=r.round((G*T[F]+oe*M[F]+X*P[F]+ee*A[F])*1e3)/1e3,S[F*4+1]=r.round((ae*T[F]+ie*M[F]+se*P[F]+Q*A[F])*1e3)/1e3,S[F*4+2]=r.round((Z*T[F]+J*M[F]+te*P[F]+de*A[F])*1e3)/1e3,S[F*4+3]=r.round((ce*T[F]+me*M[F]+ve*P[F]+xe*A[F])*1e3)/1e3;return S}return{getSegmentsLength:o,getNewSegment:j,getPointInSegment:R,buildBezierData:_,pointOnLine2D:s,pointOnLine3D:a}}var bez=bezFunction(),PropertyFactory=function(){var r=initialDefaultFrame,s=Math.abs;function a(L,D){var O=this.offsetTime,B;this.propType==="multidimensional"&&(B=createTypedArray("float32",this.pv.length));for(var N=D.lastIndex,F=N,W=this.keyframes.length-1,V=!0,U,G,oe;V;){if(U=this.keyframes[F],G=this.keyframes[F+1],F===W-1&&L>=G.t-O){U.h&&(U=G),N=0;break}if(G.t-O>L){N=F;break}F<W-1?F+=1:(N=0,V=!1)}oe=this.keyframesMetadata[F]||{};var X,ee,ae,ie,se,Q,Z=G.t-O,J=U.t-O,te;if(U.to){oe.bezierData||(oe.bezierData=bez.buildBezierData(U.s,G.s||U.e,U.to,U.ti));var de=oe.bezierData;if(L>=Z||L<J){var ce=L>=Z?de.points.length-1:0;for(ee=de.points[ce].point.length,X=0;X<ee;X+=1)B[X]=de.points[ce].point[X]}else{oe.__fnct?Q=oe.__fnct:(Q=BezierFactory.getBezierEasing(U.o.x,U.o.y,U.i.x,U.i.y,U.n).get,oe.__fnct=Q),ae=Q((L-J)/(Z-J));var me=de.segmentLength*ae,ve,xe=D.lastFrame<L&&D._lastKeyframeIndex===F?D._lastAddedLength:0;for(se=D.lastFrame<L&&D._lastKeyframeIndex===F?D._lastPoint:0,V=!0,ie=de.points.length;V;){if(xe+=de.points[se].partialLength,me===0||ae===0||se===de.points.length-1){for(ee=de.points[se].point.length,X=0;X<ee;X+=1)B[X]=de.points[se].point[X];break}else if(me>=xe&&me<xe+de.points[se+1].partialLength){for(ve=(me-xe)/de.points[se+1].partialLength,ee=de.points[se].point.length,X=0;X<ee;X+=1)B[X]=de.points[se].point[X]+(de.points[se+1].point[X]-de.points[se].point[X])*ve;break}se<ie-1?se+=1:V=!1}D._lastPoint=se,D._lastAddedLength=xe-de.points[se].partialLength,D._lastKeyframeIndex=F}}else{var ge,be,ye,Ie,Pe;if(W=U.s.length,te=G.s||U.e,this.sh&&U.h!==1)if(L>=Z)B[0]=te[0],B[1]=te[1],B[2]=te[2];else if(L<=J)B[0]=U.s[0],B[1]=U.s[1],B[2]=U.s[2];else{var we=x(U.s),Re=x(te),Se=(L-J)/(Z-J);o(B,i(we,Re,Se))}else for(F=0;F<W;F+=1)U.h!==1&&(L>=Z?ae=1:L<J?ae=0:(U.o.x.constructor===Array?(oe.__fnct||(oe.__fnct=[]),oe.__fnct[F]?Q=oe.__fnct[F]:(ge=U.o.x[F]===void 0?U.o.x[0]:U.o.x[F],be=U.o.y[F]===void 0?U.o.y[0]:U.o.y[F],ye=U.i.x[F]===void 0?U.i.x[0]:U.i.x[F],Ie=U.i.y[F]===void 0?U.i.y[0]:U.i.y[F],Q=BezierFactory.getBezierEasing(ge,be,ye,Ie).get,oe.__fnct[F]=Q)):oe.__fnct?Q=oe.__fnct:(ge=U.o.x,be=U.o.y,ye=U.i.x,Ie=U.i.y,Q=BezierFactory.getBezierEasing(ge,be,ye,Ie).get,U.keyframeMetadata=Q),ae=Q((L-J)/(Z-J)))),te=G.s||U.e,Pe=U.h===1?U.s[F]:U.s[F]+(te[F]-U.s[F])*ae,this.propType==="multidimensional"?B[F]=Pe:B=Pe}return D.lastIndex=N,B}function i(L,D,O){var B=[],N=L[0],F=L[1],W=L[2],V=L[3],U=D[0],G=D[1],oe=D[2],X=D[3],ee,ae,ie,se,Q;return ae=N*U+F*G+W*oe+V*X,ae<0&&(ae=-ae,U=-U,G=-G,oe=-oe,X=-X),1-ae>1e-6?(ee=Math.acos(ae),ie=Math.sin(ee),se=Math.sin((1-O)*ee)/ie,Q=Math.sin(O*ee)/ie):(se=1-O,Q=O),B[0]=se*N+Q*U,B[1]=se*F+Q*G,B[2]=se*W+Q*oe,B[3]=se*V+Q*X,B}function o(L,D){var O=D[0],B=D[1],N=D[2],F=D[3],W=Math.atan2(2*B*F-2*O*N,1-2*B*B-2*N*N),V=Math.asin(2*O*B+2*N*F),U=Math.atan2(2*O*F-2*B*N,1-2*O*O-2*N*N);L[0]=W/degToRads,L[1]=V/degToRads,L[2]=U/degToRads}function x(L){var D=L[0]*degToRads,O=L[1]*degToRads,B=L[2]*degToRads,N=Math.cos(D/2),F=Math.cos(O/2),W=Math.cos(B/2),V=Math.sin(D/2),U=Math.sin(O/2),G=Math.sin(B/2),oe=N*F*W-V*U*G,X=V*U*W+N*F*G,ee=V*F*W+N*U*G,ae=N*U*W-V*F*G;return[X,ee,ae,oe]}function y(){var L=this.comp.renderedFrame-this.offsetTime,D=this.keyframes[0].t-this.offsetTime,O=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(L===this._caching.lastFrame||this._caching.lastFrame!==r&&(this._caching.lastFrame>=O&&L>=O||this._caching.lastFrame<D&&L<D))){this._caching.lastFrame>=L&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var B=this.interpolateValue(L,this._caching);this.pv=B}return this._caching.lastFrame=L,this.pv}function _(L){var D;if(this.propType==="unidimensional")D=L*this.mult,s(this.v-D)>1e-5&&(this.v=D,this._mdf=!0);else for(var O=0,B=this.v.length;O<B;)D=L[O]*this.mult,s(this.v[O]-D)>1e-5&&(this.v[O]=D,this._mdf=!0),O+=1}function E(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var L,D=this.effectsSequence.length,O=this.kf?this.pv:this.data.k;for(L=0;L<D;L+=1)O=this.effectsSequence[L](O);this.setVValue(O),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function R(L){this.effectsSequence.push(L),this.container.addDynamicProperty(this)}function S(L,D,O,B){this.propType="unidimensional",this.mult=O||1,this.data=D,this.v=O?D.k*O:D.k,this.pv=D.k,this._mdf=!1,this.elem=L,this.container=B,this.comp=L.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=E,this.setVValue=_,this.addEffect=R}function j(L,D,O,B){this.propType="multidimensional",this.mult=O||1,this.data=D,this._mdf=!1,this.elem=L,this.container=B,this.comp=L.comp,this.k=!1,this.kf=!1,this.frameId=-1;var N,F=D.k.length;for(this.v=createTypedArray("float32",F),this.pv=createTypedArray("float32",F),this.vel=createTypedArray("float32",F),N=0;N<F;N+=1)this.v[N]=D.k[N]*this.mult,this.pv[N]=D.k[N];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=E,this.setVValue=_,this.addEffect=R}function T(L,D,O,B){this.propType="unidimensional",this.keyframes=D.k,this.keyframesMetadata=[],this.offsetTime=L.data.st,this.frameId=-1,this._caching={lastFrame:r,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=D,this.mult=O||1,this.elem=L,this.container=B,this.comp=L.comp,this.v=r,this.pv=r,this._isFirstFrame=!0,this.getValue=E,this.setVValue=_,this.interpolateValue=a,this.effectsSequence=[y.bind(this)],this.addEffect=R}function A(L,D,O,B){this.propType="multidimensional";var N,F=D.k.length,W,V,U,G;for(N=0;N<F-1;N+=1)D.k[N].to&&D.k[N].s&&D.k[N+1]&&D.k[N+1].s&&(W=D.k[N].s,V=D.k[N+1].s,U=D.k[N].to,G=D.k[N].ti,(W.length===2&&!(W[0]===V[0]&&W[1]===V[1])&&bez.pointOnLine2D(W[0],W[1],V[0],V[1],W[0]+U[0],W[1]+U[1])&&bez.pointOnLine2D(W[0],W[1],V[0],V[1],V[0]+G[0],V[1]+G[1])||W.length===3&&!(W[0]===V[0]&&W[1]===V[1]&&W[2]===V[2])&&bez.pointOnLine3D(W[0],W[1],W[2],V[0],V[1],V[2],W[0]+U[0],W[1]+U[1],W[2]+U[2])&&bez.pointOnLine3D(W[0],W[1],W[2],V[0],V[1],V[2],V[0]+G[0],V[1]+G[1],V[2]+G[2]))&&(D.k[N].to=null,D.k[N].ti=null),W[0]===V[0]&&W[1]===V[1]&&U[0]===0&&U[1]===0&&G[0]===0&&G[1]===0&&(W.length===2||W[2]===V[2]&&U[2]===0&&G[2]===0)&&(D.k[N].to=null,D.k[N].ti=null));this.effectsSequence=[y.bind(this)],this.data=D,this.keyframes=D.k,this.keyframesMetadata=[],this.offsetTime=L.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=O||1,this.elem=L,this.container=B,this.comp=L.comp,this.getValue=E,this.setVValue=_,this.interpolateValue=a,this.frameId=-1;var oe=D.k[0].s.length;for(this.v=createTypedArray("float32",oe),this.pv=createTypedArray("float32",oe),N=0;N<oe;N+=1)this.v[N]=r,this.pv[N]=r;this._caching={lastFrame:r,lastIndex:0,value:createTypedArray("float32",oe)},this.addEffect=R}function M(L,D,O,B,N){var F;if(!D.k.length)F=new S(L,D,B,N);else if(typeof D.k[0]=="number")F=new j(L,D,B,N);else switch(O){case 0:F=new T(L,D,B,N);break;case 1:F=new A(L,D,B,N);break}return F.effectsSequence.length&&N.addDynamicProperty(F),F}var P={getProp:M};return P}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(s){this.dynamicProperties.indexOf(s)===-1&&(this.dynamicProperties.push(s),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var s,a=this.dynamicProperties.length;for(s=0;s<a;s+=1)this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(s){this.container=s,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function r(){return createTypedArray("float32",2)}return poolFactory(8,r)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(r,s){this.c=r,this.setLength(s);for(var a=0;a<s;)this.v[a]=pointPool.newElement(),this.o[a]=pointPool.newElement(),this.i[a]=pointPool.newElement(),a+=1},ShapePath.prototype.setLength=function(r){for(;this._maxLength<r;)this.doubleArrayLength();this._length=r},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(r,s,a,i,o){var x;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),a){case"v":x=this.v;break;case"i":x=this.i;break;case"o":x=this.o;break;default:x=[];break}(!x[i]||x[i]&&!o)&&(x[i]=pointPool.newElement()),x[i][0]=r,x[i][1]=s},ShapePath.prototype.setTripleAt=function(r,s,a,i,o,x,y,_){this.setXYAt(r,s,"v",y,_),this.setXYAt(a,i,"o",y,_),this.setXYAt(o,x,"i",y,_)},ShapePath.prototype.reverse=function(){var r=new ShapePath;r.setPathData(this.c,this._length);var s=this.v,a=this.o,i=this.i,o=0;this.c&&(r.setTripleAt(s[0][0],s[0][1],i[0][0],i[0][1],a[0][0],a[0][1],0,!1),o=1);var x=this._length-1,y=this._length,_;for(_=o;_<y;_+=1)r.setTripleAt(s[x][0],s[x][1],i[x][0],i[x][1],a[x][0],a[x][1],_,!1),x-=1;return r},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function r(){return new ShapePath}function s(o){var x=o._length,y;for(y=0;y<x;y+=1)pointPool.release(o.v[y]),pointPool.release(o.i[y]),pointPool.release(o.o[y]),o.v[y]=null,o.i[y]=null,o.o[y]=null;o._length=0,o.c=!1}function a(o){var x=i.newElement(),y,_=o._length===void 0?o.v.length:o._length;for(x.setLength(_),x.c=o.c,y=0;y<_;y+=1)x.setTripleAt(o.v[y][0],o.v[y][1],o.o[y][0],o.o[y][1],o.i[y][0],o.i[y][1],y);return x}var i=poolFactory(4,r,s);return i.clone=a,i}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(r){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=r,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var r;for(r=0;r<this._length;r+=1)shapePool.release(this.shapes[r]);this._length=0};var shapeCollectionPool=function(){var r={newShapeCollection:o,release:x},s=0,a=4,i=createSizedArray(a);function o(){var y;return s?(s-=1,y=i[s]):y=new ShapeCollection,y}function x(y){var _,E=y._length;for(_=0;_<E;_+=1)shapePool.release(y.shapes[_]);y._length=0,s===a&&(i=pooling.double(i),a*=2),i[s]=y,s+=1}return r}(),ShapePropertyFactory=function(){var r=-999999;function s(D,O,B){var N=B.lastIndex,F,W,V,U,G,oe,X,ee,ae,ie=this.keyframes;if(D<ie[0].t-this.offsetTime)F=ie[0].s[0],V=!0,N=0;else if(D>=ie[ie.length-1].t-this.offsetTime)F=ie[ie.length-1].s?ie[ie.length-1].s[0]:ie[ie.length-2].e[0],V=!0;else{for(var se=N,Q=ie.length-1,Z=!0,J,te,de;Z&&(J=ie[se],te=ie[se+1],!(te.t-this.offsetTime>D));)se<Q-1?se+=1:Z=!1;if(de=this.keyframesMetadata[se]||{},V=J.h===1,N=se,!V){if(D>=te.t-this.offsetTime)ee=1;else if(D<J.t-this.offsetTime)ee=0;else{var ce;de.__fnct?ce=de.__fnct:(ce=BezierFactory.getBezierEasing(J.o.x,J.o.y,J.i.x,J.i.y).get,de.__fnct=ce),ee=ce((D-(J.t-this.offsetTime))/(te.t-this.offsetTime-(J.t-this.offsetTime)))}W=te.s?te.s[0]:J.e[0]}F=J.s[0]}for(oe=O._length,X=F.i[0].length,B.lastIndex=N,U=0;U<oe;U+=1)for(G=0;G<X;G+=1)ae=V?F.i[U][G]:F.i[U][G]+(W.i[U][G]-F.i[U][G])*ee,O.i[U][G]=ae,ae=V?F.o[U][G]:F.o[U][G]+(W.o[U][G]-F.o[U][G])*ee,O.o[U][G]=ae,ae=V?F.v[U][G]:F.v[U][G]+(W.v[U][G]-F.v[U][G])*ee,O.v[U][G]=ae}function a(){var D=this.comp.renderedFrame-this.offsetTime,O=this.keyframes[0].t-this.offsetTime,B=this.keyframes[this.keyframes.length-1].t-this.offsetTime,N=this._caching.lastFrame;return N!==r&&(N<O&&D<O||N>B&&D>B)||(this._caching.lastIndex=N<D?this._caching.lastIndex:0,this.interpolateShape(D,this.pv,this._caching)),this._caching.lastFrame=D,this.pv}function i(){this.paths=this.localShapeCollection}function o(D,O){if(D._length!==O._length||D.c!==O.c)return!1;var B,N=D._length;for(B=0;B<N;B+=1)if(D.v[B][0]!==O.v[B][0]||D.v[B][1]!==O.v[B][1]||D.o[B][0]!==O.o[B][0]||D.o[B][1]!==O.o[B][1]||D.i[B][0]!==O.i[B][0]||D.i[B][1]!==O.i[B][1])return!1;return!0}function x(D){o(this.v,D)||(this.v=shapePool.clone(D),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function y(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var D;this.kf?D=this.pv:this.data.ks?D=this.data.ks.k:D=this.data.pt.k;var O,B=this.effectsSequence.length;for(O=0;O<B;O+=1)D=this.effectsSequence[O](D);this.setVValue(D),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function _(D,O,B){this.propType="shape",this.comp=D.comp,this.container=D,this.elem=D,this.data=O,this.k=!1,this.kf=!1,this._mdf=!1;var N=B===3?O.pt.k:O.ks.k;this.v=shapePool.clone(N),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function E(D){this.effectsSequence.push(D),this.container.addDynamicProperty(this)}_.prototype.interpolateShape=s,_.prototype.getValue=y,_.prototype.setVValue=x,_.prototype.addEffect=E;function R(D,O,B){this.propType="shape",this.comp=D.comp,this.elem=D,this.container=D,this.offsetTime=D.data.st,this.keyframes=B===3?O.pt.k:O.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var N=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,N),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=r,this.reset=i,this._caching={lastFrame:r,lastIndex:0},this.effectsSequence=[a.bind(this)]}R.prototype.getValue=y,R.prototype.interpolateShape=s,R.prototype.setVValue=x,R.prototype.addEffect=E;var S=function(){var D=roundCorner;function O(B,N){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=N.d,this.elem=B,this.comp=B.comp,this.frameId=-1,this.initDynamicPropertyContainer(B),this.p=PropertyFactory.getProp(B,N.p,1,0,this),this.s=PropertyFactory.getProp(B,N.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return O.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var N=this.p.v[0],F=this.p.v[1],W=this.s.v[0]/2,V=this.s.v[1]/2,U=this.d!==3,G=this.v;G.v[0][0]=N,G.v[0][1]=F-V,G.v[1][0]=U?N+W:N-W,G.v[1][1]=F,G.v[2][0]=N,G.v[2][1]=F+V,G.v[3][0]=U?N-W:N+W,G.v[3][1]=F,G.i[0][0]=U?N-W*D:N+W*D,G.i[0][1]=F-V,G.i[1][0]=U?N+W:N-W,G.i[1][1]=F-V*D,G.i[2][0]=U?N+W*D:N-W*D,G.i[2][1]=F+V,G.i[3][0]=U?N-W:N+W,G.i[3][1]=F+V*D,G.o[0][0]=U?N+W*D:N-W*D,G.o[0][1]=F-V,G.o[1][0]=U?N+W:N-W,G.o[1][1]=F+V*D,G.o[2][0]=U?N-W*D:N+W*D,G.o[2][1]=F+V,G.o[3][0]=U?N-W:N+W,G.o[3][1]=F-V*D}},extendPrototype([DynamicPropertyContainer],O),O}(),j=function(){function D(O,B){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=O,this.comp=O.comp,this.data=B,this.frameId=-1,this.d=B.d,this.initDynamicPropertyContainer(O),B.sy===1?(this.ir=PropertyFactory.getProp(O,B.ir,0,0,this),this.is=PropertyFactory.getProp(O,B.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(O,B.pt,0,0,this),this.p=PropertyFactory.getProp(O,B.p,1,0,this),this.r=PropertyFactory.getProp(O,B.r,0,degToRads,this),this.or=PropertyFactory.getProp(O,B.or,0,0,this),this.os=PropertyFactory.getProp(O,B.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return D.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var B=Math.floor(this.pt.v)*2,N=Math.PI*2/B,F=!0,W=this.or.v,V=this.ir.v,U=this.os.v,G=this.is.v,oe=2*Math.PI*W/(B*2),X=2*Math.PI*V/(B*2),ee,ae,ie,se,Q=-Math.PI/2;Q+=this.r.v;var Z=this.data.d===3?-1:1;for(this.v._length=0,ee=0;ee<B;ee+=1){ae=F?W:V,ie=F?U:G,se=F?oe:X;var J=ae*Math.cos(Q),te=ae*Math.sin(Q),de=J===0&&te===0?0:te/Math.sqrt(J*J+te*te),ce=J===0&&te===0?0:-J/Math.sqrt(J*J+te*te);J+=+this.p.v[0],te+=+this.p.v[1],this.v.setTripleAt(J,te,J-de*se*ie*Z,te-ce*se*ie*Z,J+de*se*ie*Z,te+ce*se*ie*Z,ee,!0),F=!F,Q+=N*Z}},convertPolygonToPath:function(){var B=Math.floor(this.pt.v),N=Math.PI*2/B,F=this.or.v,W=this.os.v,V=2*Math.PI*F/(B*4),U,G=-Math.PI*.5,oe=this.data.d===3?-1:1;for(G+=this.r.v,this.v._length=0,U=0;U<B;U+=1){var X=F*Math.cos(G),ee=F*Math.sin(G),ae=X===0&&ee===0?0:ee/Math.sqrt(X*X+ee*ee),ie=X===0&&ee===0?0:-X/Math.sqrt(X*X+ee*ee);X+=+this.p.v[0],ee+=+this.p.v[1],this.v.setTripleAt(X,ee,X-ae*V*W*oe,ee-ie*V*W*oe,X+ae*V*W*oe,ee+ie*V*W*oe,U,!0),G+=N*oe}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],D),D}(),T=function(){function D(O,B){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=O,this.comp=O.comp,this.frameId=-1,this.d=B.d,this.initDynamicPropertyContainer(O),this.p=PropertyFactory.getProp(O,B.p,1,0,this),this.s=PropertyFactory.getProp(O,B.s,1,0,this),this.r=PropertyFactory.getProp(O,B.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return D.prototype={convertRectToPath:function(){var B=this.p.v[0],N=this.p.v[1],F=this.s.v[0]/2,W=this.s.v[1]/2,V=bmMin(F,W,this.r.v),U=V*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(B+F,N-W+V,B+F,N-W+V,B+F,N-W+U,0,!0),this.v.setTripleAt(B+F,N+W-V,B+F,N+W-U,B+F,N+W-V,1,!0),V!==0?(this.v.setTripleAt(B+F-V,N+W,B+F-V,N+W,B+F-U,N+W,2,!0),this.v.setTripleAt(B-F+V,N+W,B-F+U,N+W,B-F+V,N+W,3,!0),this.v.setTripleAt(B-F,N+W-V,B-F,N+W-V,B-F,N+W-U,4,!0),this.v.setTripleAt(B-F,N-W+V,B-F,N-W+U,B-F,N-W+V,5,!0),this.v.setTripleAt(B-F+V,N-W,B-F+V,N-W,B-F+U,N-W,6,!0),this.v.setTripleAt(B+F-V,N-W,B+F-U,N-W,B+F-V,N-W,7,!0)):(this.v.setTripleAt(B-F,N+W,B-F+U,N+W,B-F,N+W,2),this.v.setTripleAt(B-F,N-W,B-F,N-W+U,B-F,N-W,3))):(this.v.setTripleAt(B+F,N-W+V,B+F,N-W+U,B+F,N-W+V,0,!0),V!==0?(this.v.setTripleAt(B+F-V,N-W,B+F-V,N-W,B+F-U,N-W,1,!0),this.v.setTripleAt(B-F+V,N-W,B-F+U,N-W,B-F+V,N-W,2,!0),this.v.setTripleAt(B-F,N-W+V,B-F,N-W+V,B-F,N-W+U,3,!0),this.v.setTripleAt(B-F,N+W-V,B-F,N+W-U,B-F,N+W-V,4,!0),this.v.setTripleAt(B-F+V,N+W,B-F+V,N+W,B-F+U,N+W,5,!0),this.v.setTripleAt(B+F-V,N+W,B+F-U,N+W,B+F-V,N+W,6,!0),this.v.setTripleAt(B+F,N+W-V,B+F,N+W-V,B+F,N+W-U,7,!0)):(this.v.setTripleAt(B-F,N-W,B-F+U,N-W,B-F,N-W,1,!0),this.v.setTripleAt(B-F,N+W,B-F,N+W-U,B-F,N+W,2,!0),this.v.setTripleAt(B+F,N+W,B+F-U,N+W,B+F,N+W,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],D),D}();function A(D,O,B){var N;if(B===3||B===4){var F=B===3?O.pt:O.ks,W=F.k;W.length?N=new R(D,O,B):N=new _(D,O,B)}else B===5?N=new T(D,O):B===6?N=new S(D,O):B===7&&(N=new j(D,O));return N.k&&D.addDynamicProperty(N),N}function M(){return _}function P(){return R}var L={};return L.getShapeProp=A,L.getConstructorFunction=M,L.getKeyframedConstructorFunction=P,L}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var r=Math.cos,s=Math.sin,a=Math.tan,i=Math.round;function o(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function x(Z){if(Z===0)return this;var J=r(Z),te=s(Z);return this._t(J,-te,0,0,te,J,0,0,0,0,1,0,0,0,0,1)}function y(Z){if(Z===0)return this;var J=r(Z),te=s(Z);return this._t(1,0,0,0,0,J,-te,0,0,te,J,0,0,0,0,1)}function _(Z){if(Z===0)return this;var J=r(Z),te=s(Z);return this._t(J,0,te,0,0,1,0,0,-te,0,J,0,0,0,0,1)}function E(Z){if(Z===0)return this;var J=r(Z),te=s(Z);return this._t(J,-te,0,0,te,J,0,0,0,0,1,0,0,0,0,1)}function R(Z,J){return this._t(1,J,Z,1,0,0)}function S(Z,J){return this.shear(a(Z),a(J))}function j(Z,J){var te=r(J),de=s(J);return this._t(te,de,0,0,-de,te,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,a(Z),1,0,0,0,0,1,0,0,0,0,1)._t(te,-de,0,0,de,te,0,0,0,0,1,0,0,0,0,1)}function T(Z,J,te){return!te&&te!==0&&(te=1),Z===1&&J===1&&te===1?this:this._t(Z,0,0,0,0,J,0,0,0,0,te,0,0,0,0,1)}function A(Z,J,te,de,ce,me,ve,xe,ge,be,ye,Ie,Pe,we,Re,Se){return this.props[0]=Z,this.props[1]=J,this.props[2]=te,this.props[3]=de,this.props[4]=ce,this.props[5]=me,this.props[6]=ve,this.props[7]=xe,this.props[8]=ge,this.props[9]=be,this.props[10]=ye,this.props[11]=Ie,this.props[12]=Pe,this.props[13]=we,this.props[14]=Re,this.props[15]=Se,this}function M(Z,J,te){return te=te||0,Z!==0||J!==0||te!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Z,J,te,1):this}function P(Z,J,te,de,ce,me,ve,xe,ge,be,ye,Ie,Pe,we,Re,Se){var Ee=this.props;if(Z===1&&J===0&&te===0&&de===0&&ce===0&&me===1&&ve===0&&xe===0&&ge===0&&be===0&&ye===1&&Ie===0)return Ee[12]=Ee[12]*Z+Ee[15]*Pe,Ee[13]=Ee[13]*me+Ee[15]*we,Ee[14]=Ee[14]*ye+Ee[15]*Re,Ee[15]*=Se,this._identityCalculated=!1,this;var Ce=Ee[0],he=Ee[1],Ae=Ee[2],Ne=Ee[3],Be=Ee[4],Oe=Ee[5],Ue=Ee[6],Ve=Ee[7],We=Ee[8],Te=Ee[9],De=Ee[10],Le=Ee[11],Fe=Ee[12],Ke=Ee[13],nt=Ee[14],qe=Ee[15];return Ee[0]=Ce*Z+he*ce+Ae*ge+Ne*Pe,Ee[1]=Ce*J+he*me+Ae*be+Ne*we,Ee[2]=Ce*te+he*ve+Ae*ye+Ne*Re,Ee[3]=Ce*de+he*xe+Ae*Ie+Ne*Se,Ee[4]=Be*Z+Oe*ce+Ue*ge+Ve*Pe,Ee[5]=Be*J+Oe*me+Ue*be+Ve*we,Ee[6]=Be*te+Oe*ve+Ue*ye+Ve*Re,Ee[7]=Be*de+Oe*xe+Ue*Ie+Ve*Se,Ee[8]=We*Z+Te*ce+De*ge+Le*Pe,Ee[9]=We*J+Te*me+De*be+Le*we,Ee[10]=We*te+Te*ve+De*ye+Le*Re,Ee[11]=We*de+Te*xe+De*Ie+Le*Se,Ee[12]=Fe*Z+Ke*ce+nt*ge+qe*Pe,Ee[13]=Fe*J+Ke*me+nt*be+qe*we,Ee[14]=Fe*te+Ke*ve+nt*ye+qe*Re,Ee[15]=Fe*de+Ke*xe+nt*Ie+qe*Se,this._identityCalculated=!1,this}function L(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function D(Z){for(var J=0;J<16;){if(Z.props[J]!==this.props[J])return!1;J+=1}return!0}function O(Z){var J;for(J=0;J<16;J+=1)Z.props[J]=this.props[J];return Z}function B(Z){var J;for(J=0;J<16;J+=1)this.props[J]=Z[J]}function N(Z,J,te){return{x:Z*this.props[0]+J*this.props[4]+te*this.props[8]+this.props[12],y:Z*this.props[1]+J*this.props[5]+te*this.props[9]+this.props[13],z:Z*this.props[2]+J*this.props[6]+te*this.props[10]+this.props[14]}}function F(Z,J,te){return Z*this.props[0]+J*this.props[4]+te*this.props[8]+this.props[12]}function W(Z,J,te){return Z*this.props[1]+J*this.props[5]+te*this.props[9]+this.props[13]}function V(Z,J,te){return Z*this.props[2]+J*this.props[6]+te*this.props[10]+this.props[14]}function U(){var Z=this.props[0]*this.props[5]-this.props[1]*this.props[4],J=this.props[5]/Z,te=-this.props[1]/Z,de=-this.props[4]/Z,ce=this.props[0]/Z,me=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Z,ve=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Z,xe=new Matrix;return xe.props[0]=J,xe.props[1]=te,xe.props[4]=de,xe.props[5]=ce,xe.props[12]=me,xe.props[13]=ve,xe}function G(Z){var J=this.getInverseMatrix();return J.applyToPointArray(Z[0],Z[1],Z[2]||0)}function oe(Z){var J,te=Z.length,de=[];for(J=0;J<te;J+=1)de[J]=G(Z[J]);return de}function X(Z,J,te){var de=createTypedArray("float32",6);if(this.isIdentity())de[0]=Z[0],de[1]=Z[1],de[2]=J[0],de[3]=J[1],de[4]=te[0],de[5]=te[1];else{var ce=this.props[0],me=this.props[1],ve=this.props[4],xe=this.props[5],ge=this.props[12],be=this.props[13];de[0]=Z[0]*ce+Z[1]*ve+ge,de[1]=Z[0]*me+Z[1]*xe+be,de[2]=J[0]*ce+J[1]*ve+ge,de[3]=J[0]*me+J[1]*xe+be,de[4]=te[0]*ce+te[1]*ve+ge,de[5]=te[0]*me+te[1]*xe+be}return de}function ee(Z,J,te){var de;return this.isIdentity()?de=[Z,J,te]:de=[Z*this.props[0]+J*this.props[4]+te*this.props[8]+this.props[12],Z*this.props[1]+J*this.props[5]+te*this.props[9]+this.props[13],Z*this.props[2]+J*this.props[6]+te*this.props[10]+this.props[14]],de}function ae(Z,J){if(this.isIdentity())return Z+","+J;var te=this.props;return Math.round((Z*te[0]+J*te[4]+te[12])*100)/100+","+Math.round((Z*te[1]+J*te[5]+te[13])*100)/100}function ie(){for(var Z=0,J=this.props,te="matrix3d(",de=1e4;Z<16;)te+=i(J[Z]*de)/de,te+=Z===15?")":",",Z+=1;return te}function se(Z){var J=1e4;return Z<1e-6&&Z>0||Z>-1e-6&&Z<0?i(Z*J)/J:Z}function Q(){var Z=this.props,J=se(Z[0]),te=se(Z[1]),de=se(Z[4]),ce=se(Z[5]),me=se(Z[12]),ve=se(Z[13]);return"matrix("+J+","+te+","+de+","+ce+","+me+","+ve+")"}return function(){this.reset=o,this.rotate=x,this.rotateX=y,this.rotateY=_,this.rotateZ=E,this.skew=S,this.skewFromAxis=j,this.shear=R,this.scale=T,this.setTransform=A,this.translate=M,this.transform=P,this.applyToPoint=N,this.applyToX=F,this.applyToY=W,this.applyToZ=V,this.applyToPointArray=ee,this.applyToTriplePoints=X,this.applyToPointStringified=ae,this.toCSS=ie,this.to2dCSS=Q,this.clone=O,this.cloneFromProps=B,this.equals=D,this.inversePoints=oe,this.inversePoint=G,this.getInverseMatrix=U,this._t=this.transform,this.isIdentity=L,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(a){return typeof a}:_typeof$3=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$3(r)}var lottie={};function setLocation(r){setLocationHref(r)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(r){setSubframeEnabled(r)}function setPrefix(r){setIdPrefix(r)}function loadAnimation(r){return animationManager.loadAnimation(r)}function setQuality(r){if(typeof r=="string")switch(r){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(r)&&r>1&&setDefaultCurveSegments(r)}function inBrowser(){return typeof navigator<"u"}function installPlugin(r,s){r==="expressions"&&setExpressionsPlugin(s)}function getFactory(r){switch(r){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(r){for(var s=queryString.split("&"),a=0;a<s.length;a+=1){var i=s[a].split("=");if(decodeURIComponent(i[0])==r)return decodeURIComponent(i[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(r){}var ShapeModifiers=function(){var r={},s={};r.registerModifier=a,r.getModifier=i;function a(o,x){s[o]||(s[o]=x)}function i(o,x,y){return new s[o](x,y)}return r}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(r){if(!this.closed){r.sh.container.addDynamicProperty(r.sh);var s={shape:r.sh,data:r,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(s),this.addShapeToModifier(s),this._isAnimated&&r.setAsAnimated()}},ShapeModifier.prototype.init=function(r,s){this.shapes=[],this.elem=r,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,s),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(r,s){this.s=PropertyFactory.getProp(r,s.s,0,.01,this),this.e=PropertyFactory.getProp(r,s.e,0,.01,this),this.o=PropertyFactory.getProp(r,s.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=s.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(r){r.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(r,s,a,i,o){var x=[];s<=1?x.push({s:r,e:s}):r>=1?x.push({s:r-1,e:s-1}):(x.push({s:r,e:1}),x.push({s:0,e:s-1}));var y=[],_,E=x.length,R;for(_=0;_<E;_+=1)if(R=x[_],!(R.e*o<i||R.s*o>i+a)){var S,j;R.s*o<=i?S=0:S=(R.s*o-i)/a,R.e*o>=i+a?j=1:j=(R.e*o-i)/a,y.push([S,j])}return y.length||y.push([0,0]),y},TrimModifier.prototype.releasePathsData=function(r){var s,a=r.length;for(s=0;s<a;s+=1)segmentsLengthPool.release(r[s]);return r.length=0,r},TrimModifier.prototype.processShapes=function(r){var s,a;if(this._mdf||r){var i=this.o.v%360/360;if(i<0&&(i+=1),this.s.v>1?s=1+i:this.s.v<0?s=0+i:s=this.s.v+i,this.e.v>1?a=1+i:this.e.v<0?a=0+i:a=this.e.v+i,s>a){var o=s;s=a,a=o}s=Math.round(s*1e4)*1e-4,a=Math.round(a*1e4)*1e-4,this.sValue=s,this.eValue=a}else s=this.sValue,a=this.eValue;var x,y,_=this.shapes.length,E,R,S,j,T,A=0;if(a===s)for(y=0;y<_;y+=1)this.shapes[y].localShapeCollection.releaseShapes(),this.shapes[y].shape._mdf=!0,this.shapes[y].shape.paths=this.shapes[y].localShapeCollection,this._mdf&&(this.shapes[y].pathsData.length=0);else if(a===1&&s===0||a===0&&s===1){if(this._mdf)for(y=0;y<_;y+=1)this.shapes[y].pathsData.length=0,this.shapes[y].shape._mdf=!0}else{var M=[],P,L;for(y=0;y<_;y+=1)if(P=this.shapes[y],!P.shape._mdf&&!this._mdf&&!r&&this.m!==2)P.shape.paths=P.localShapeCollection;else{if(x=P.shape.paths,R=x._length,T=0,!P.shape._mdf&&P.pathsData.length)T=P.totalShapeLength;else{for(S=this.releasePathsData(P.pathsData),E=0;E<R;E+=1)j=bez.getSegmentsLength(x.shapes[E]),S.push(j),T+=j.totalLength;P.totalShapeLength=T,P.pathsData=S}A+=T,P.shape._mdf=!0}var D=s,O=a,B=0,N;for(y=_-1;y>=0;y-=1)if(P=this.shapes[y],P.shape._mdf){for(L=P.localShapeCollection,L.releaseShapes(),this.m===2&&_>1?(N=this.calculateShapeEdges(s,a,P.totalShapeLength,B,A),B+=P.totalShapeLength):N=[[D,O]],R=N.length,E=0;E<R;E+=1){D=N[E][0],O=N[E][1],M.length=0,O<=1?M.push({s:P.totalShapeLength*D,e:P.totalShapeLength*O}):D>=1?M.push({s:P.totalShapeLength*(D-1),e:P.totalShapeLength*(O-1)}):(M.push({s:P.totalShapeLength*D,e:P.totalShapeLength}),M.push({s:0,e:P.totalShapeLength*(O-1)}));var F=this.addShapes(P,M[0]);if(M[0].s!==M[0].e){if(M.length>1){var W=P.shape.paths.shapes[P.shape.paths._length-1];if(W.c){var V=F.pop();this.addPaths(F,L),F=this.addShapes(P,M[1],V)}else this.addPaths(F,L),F=this.addShapes(P,M[1])}this.addPaths(F,L)}}P.shape.paths=L}}},TrimModifier.prototype.addPaths=function(r,s){var a,i=r.length;for(a=0;a<i;a+=1)s.addShape(r[a])},TrimModifier.prototype.addSegment=function(r,s,a,i,o,x,y){o.setXYAt(s[0],s[1],"o",x),o.setXYAt(a[0],a[1],"i",x+1),y&&o.setXYAt(r[0],r[1],"v",x),o.setXYAt(i[0],i[1],"v",x+1)},TrimModifier.prototype.addSegmentFromArray=function(r,s,a,i){s.setXYAt(r[1],r[5],"o",a),s.setXYAt(r[2],r[6],"i",a+1),i&&s.setXYAt(r[0],r[4],"v",a),s.setXYAt(r[3],r[7],"v",a+1)},TrimModifier.prototype.addShapes=function(r,s,a){var i=r.pathsData,o=r.shape.paths.shapes,x,y=r.shape.paths._length,_,E,R=0,S,j,T,A,M=[],P,L=!0;for(a?(j=a._length,P=a._length):(a=shapePool.newElement(),j=0,P=0),M.push(a),x=0;x<y;x+=1){for(T=i[x].lengths,a.c=o[x].c,E=o[x].c?T.length:T.length+1,_=1;_<E;_+=1)if(S=T[_-1],R+S.addedLength<s.s)R+=S.addedLength,a.c=!1;else if(R>s.e){a.c=!1;break}else s.s<=R&&s.e>=R+S.addedLength?(this.addSegment(o[x].v[_-1],o[x].o[_-1],o[x].i[_],o[x].v[_],a,j,L),L=!1):(A=bez.getNewSegment(o[x].v[_-1],o[x].v[_],o[x].o[_-1],o[x].i[_],(s.s-R)/S.addedLength,(s.e-R)/S.addedLength,T[_-1]),this.addSegmentFromArray(A,a,j,L),L=!1,a.c=!1),R+=S.addedLength,j+=1;if(o[x].c&&T.length){if(S=T[_-1],R<=s.e){var D=T[_-1].addedLength;s.s<=R&&s.e>=R+D?(this.addSegment(o[x].v[_-1],o[x].o[_-1],o[x].i[0],o[x].v[0],a,j,L),L=!1):(A=bez.getNewSegment(o[x].v[_-1],o[x].v[0],o[x].o[_-1],o[x].i[0],(s.s-R)/D,(s.e-R)/D,T[_-1]),this.addSegmentFromArray(A,a,j,L),L=!1,a.c=!1)}else a.c=!1;R+=S.addedLength,j+=1}if(a._length&&(a.setXYAt(a.v[P][0],a.v[P][1],"i",P),a.setXYAt(a.v[a._length-1][0],a.v[a._length-1][1],"o",a._length-1)),R>s.e)break;x<y-1&&(a=shapePool.newElement(),L=!0,M.push(a),j=0)}return M};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(r,s){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,s.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(r,s){var a=s/100,i=[0,0],o=r._length,x=0;for(x=0;x<o;x+=1)i[0]+=r.v[x][0],i[1]+=r.v[x][1];i[0]/=o,i[1]/=o;var y=shapePool.newElement();y.c=r.c;var _,E,R,S,j,T;for(x=0;x<o;x+=1)_=r.v[x][0]+(i[0]-r.v[x][0])*a,E=r.v[x][1]+(i[1]-r.v[x][1])*a,R=r.o[x][0]+(i[0]-r.o[x][0])*-a,S=r.o[x][1]+(i[1]-r.o[x][1])*-a,j=r.i[x][0]+(i[0]-r.i[x][0])*-a,T=r.i[x][1]+(i[1]-r.i[x][1])*-a,y.setTripleAt(_,E,R,S,j,T,x);return y},PuckerAndBloatModifier.prototype.processShapes=function(r){var s,a,i=this.shapes.length,o,x,y=this.amount.v;if(y!==0){var _,E;for(a=0;a<i;a+=1){if(_=this.shapes[a],E=_.localShapeCollection,!(!_.shape._mdf&&!this._mdf&&!r))for(E.releaseShapes(),_.shape._mdf=!0,s=_.shape.paths.shapes,x=_.shape.paths._length,o=0;o<x;o+=1)E.addShape(this.processPath(s[o],y));_.shape.paths=_.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var r=[0,0];function s(E){var R=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||R,this.a&&E.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&E.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&E.skewFromAxis(-this.sk.v,this.sa.v),this.r?E.rotate(-this.r.v):E.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?E.translate(this.px.v,this.py.v,-this.pz.v):E.translate(this.px.v,this.py.v,0):E.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function a(E){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||E){var R;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var S,j;if(R=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(S=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/R,0),j=this.p.getValueAtTime(this.p.keyframes[0].t/R,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(S=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/R,0),j=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/R,0)):(S=this.p.pv,j=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/R,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){S=[],j=[];var T=this.px,A=this.py;T._caching.lastFrame+T.offsetTime<=T.keyframes[0].t?(S[0]=T.getValueAtTime((T.keyframes[0].t+.01)/R,0),S[1]=A.getValueAtTime((A.keyframes[0].t+.01)/R,0),j[0]=T.getValueAtTime(T.keyframes[0].t/R,0),j[1]=A.getValueAtTime(A.keyframes[0].t/R,0)):T._caching.lastFrame+T.offsetTime>=T.keyframes[T.keyframes.length-1].t?(S[0]=T.getValueAtTime(T.keyframes[T.keyframes.length-1].t/R,0),S[1]=A.getValueAtTime(A.keyframes[A.keyframes.length-1].t/R,0),j[0]=T.getValueAtTime((T.keyframes[T.keyframes.length-1].t-.01)/R,0),j[1]=A.getValueAtTime((A.keyframes[A.keyframes.length-1].t-.01)/R,0)):(S=[T.pv,A.pv],j[0]=T.getValueAtTime((T._caching.lastFrame+T.offsetTime-.01)/R,T.offsetTime),j[1]=A.getValueAtTime((A._caching.lastFrame+A.offsetTime-.01)/R,A.offsetTime))}else j=r,S=j;this.v.rotate(-Math.atan2(S[1]-j[1],S[0]-j[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function i(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function o(){}function x(E){this._addDynamicProperty(E),this.elem.addDynamicProperty(E),this._isDirty=!0}function y(E,R,S){if(this.elem=E,this.frameId=-1,this.propType="transform",this.data=R,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(S||E),R.p&&R.p.s?(this.px=PropertyFactory.getProp(E,R.p.x,0,0,this),this.py=PropertyFactory.getProp(E,R.p.y,0,0,this),R.p.z&&(this.pz=PropertyFactory.getProp(E,R.p.z,0,0,this))):this.p=PropertyFactory.getProp(E,R.p||{k:[0,0,0]},1,0,this),R.rx){if(this.rx=PropertyFactory.getProp(E,R.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(E,R.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(E,R.rz,0,degToRads,this),R.or.k[0].ti){var j,T=R.or.k.length;for(j=0;j<T;j+=1)R.or.k[j].to=null,R.or.k[j].ti=null}this.or=PropertyFactory.getProp(E,R.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(E,R.r||{k:0},0,degToRads,this);R.sk&&(this.sk=PropertyFactory.getProp(E,R.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(E,R.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(E,R.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(E,R.s||{k:[100,100,100]},1,.01,this),R.o?this.o=PropertyFactory.getProp(E,R.o,0,.01,E):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}y.prototype={applyToMatrix:s,getValue:a,precalculateMatrix:i,autoOrient:o},extendPrototype([DynamicPropertyContainer],y),y.prototype.addDynamicProperty=x,y.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function _(E,R,S){return new y(E,R,S)}return{getTransformProperty:_}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(r,s){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(r,s.c,0,null,this),this.o=PropertyFactory.getProp(r,s.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(r,s.tr,this),this.so=PropertyFactory.getProp(r,s.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(r,s.tr.eo,0,.01,this),this.data=s,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(r,s,a,i,o,x){var y=x?-1:1,_=i.s.v[0]+(1-i.s.v[0])*(1-o),E=i.s.v[1]+(1-i.s.v[1])*(1-o);r.translate(i.p.v[0]*y*o,i.p.v[1]*y*o,i.p.v[2]),s.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),s.rotate(-i.r.v*y*o),s.translate(i.a.v[0],i.a.v[1],i.a.v[2]),a.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),a.scale(x?1/_:_,x?1/E:E),a.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(r,s,a,i){for(this.elem=r,this.arr=s,this.pos=a,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,s[a]);a>0;)a-=1,this._elements.unshift(s[a]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(r){var s,a=r.length;for(s=0;s<a;s+=1)r[s]._processed=!1,r[s].ty==="gr"&&this.resetElements(r[s].it)},RepeaterModifier.prototype.cloneElements=function(r){var s=JSON.parse(JSON.stringify(r));return this.resetElements(s),s},RepeaterModifier.prototype.changeGroupRender=function(r,s){var a,i=r.length;for(a=0;a<i;a+=1)r[a]._render=s,r[a].ty==="gr"&&this.changeGroupRender(r[a].it,s)},RepeaterModifier.prototype.processShapes=function(r){var s,a,i,o,x,y=!1;if(this._mdf||r){var _=Math.ceil(this.c.v);if(this._groups.length<_){for(;this._groups.length<_;){var E={it:this.cloneElements(this._elements),ty:"gr"};E.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,E),this._groups.splice(0,0,E),this._currentCopies+=1}this.elem.reloadShapes(),y=!0}x=0;var R;for(i=0;i<=this._groups.length-1;i+=1){if(R=x<_,this._groups[i]._render=R,this.changeGroupRender(this._groups[i].it,R),!R){var S=this.elemsData[i].it,j=S[S.length-1];j.transform.op.v!==0?(j.transform.op._mdf=!0,j.transform.op.v=0):j.transform.op._mdf=!1}x+=1}this._currentCopies=_;var T=this.o.v,A=T%1,M=T>0?Math.floor(T):Math.ceil(T),P=this.pMatrix.props,L=this.rMatrix.props,D=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var O=0;if(T>0){for(;O<M;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),O+=1;A&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,A,!1),O+=A)}else if(T<0){for(;O>M;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),O-=1;A&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-A,!0),O-=A)}i=this.data.m===1?0:this._currentCopies-1,o=this.data.m===1?1:-1,x=this._currentCopies;for(var B,N;x;){if(s=this.elemsData[i].it,a=s[s.length-1].transform.mProps.v.props,N=a.length,s[s.length-1].transform.mProps._mdf=!0,s[s.length-1].transform.op._mdf=!0,s[s.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),O!==0){for((i!==0&&o===1||i!==this._currentCopies-1&&o===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8],L[9],L[10],L[11],L[12],L[13],L[14],L[15]),this.matrix.transform(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15]),this.matrix.transform(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15]),B=0;B<N;B+=1)a[B]=this.matrix.props[B];this.matrix.reset()}else for(this.matrix.reset(),B=0;B<N;B+=1)a[B]=this.matrix.props[B];O+=1,x-=1,i+=o}}else for(x=this._currentCopies,i=0,o=1;x;)s=this.elemsData[i].it,a=s[s.length-1].transform.mProps.v.props,s[s.length-1].transform.mProps._mdf=!1,s[s.length-1].transform.op._mdf=!1,x-=1,i+=o;return y},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(r,s){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(r,s.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(r,s){var a=shapePool.newElement();a.c=r.c;var i,o=r._length,x,y,_,E,R,S,j=0,T,A,M,P,L,D;for(i=0;i<o;i+=1)x=r.v[i],_=r.o[i],y=r.i[i],x[0]===_[0]&&x[1]===_[1]&&x[0]===y[0]&&x[1]===y[1]?(i===0||i===o-1)&&!r.c?(a.setTripleAt(x[0],x[1],_[0],_[1],y[0],y[1],j),j+=1):(i===0?E=r.v[o-1]:E=r.v[i-1],R=Math.sqrt(Math.pow(x[0]-E[0],2)+Math.pow(x[1]-E[1],2)),S=R?Math.min(R/2,s)/R:0,L=x[0]+(E[0]-x[0])*S,T=L,D=x[1]-(x[1]-E[1])*S,A=D,M=T-(T-x[0])*roundCorner,P=A-(A-x[1])*roundCorner,a.setTripleAt(T,A,M,P,L,D,j),j+=1,i===o-1?E=r.v[0]:E=r.v[i+1],R=Math.sqrt(Math.pow(x[0]-E[0],2)+Math.pow(x[1]-E[1],2)),S=R?Math.min(R/2,s)/R:0,M=x[0]+(E[0]-x[0])*S,T=M,P=x[1]+(E[1]-x[1])*S,A=P,L=T-(T-x[0])*roundCorner,D=A-(A-x[1])*roundCorner,a.setTripleAt(T,A,M,P,L,D,j),j+=1):(a.setTripleAt(r.v[i][0],r.v[i][1],r.o[i][0],r.o[i][1],r.i[i][0],r.i[i][1],j),j+=1);return a},RoundCornersModifier.prototype.processShapes=function(r){var s,a,i=this.shapes.length,o,x,y=this.rd.v;if(y!==0){var _,E;for(a=0;a<i;a+=1){if(_=this.shapes[a],E=_.localShapeCollection,!(!_.shape._mdf&&!this._mdf&&!r))for(E.releaseShapes(),_.shape._mdf=!0,s=_.shape.paths.shapes,x=_.shape.paths._length,o=0;o<x;o+=1)E.addShape(this.processPath(s[o],y));_.shape.paths=_.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(r,s){return Math.abs(r-s)*1e5<=Math.min(Math.abs(r),Math.abs(s))}function floatZero(r){return Math.abs(r)<=1e-5}function lerp(r,s,a){return r*(1-a)+s*a}function lerpPoint(r,s,a){return[lerp(r[0],s[0],a),lerp(r[1],s[1],a)]}function quadRoots(r,s,a){if(r===0)return[];var i=s*s-4*r*a;if(i<0)return[];var o=-s/(2*r);if(i===0)return[o];var x=Math.sqrt(i)/(2*r);return[o-x,o+x]}function polynomialCoefficients(r,s,a,i){return[-r+3*s-3*a+i,3*r-6*s+3*a,-3*r+3*s,r]}function singlePoint(r){return new PolynomialBezier(r,r,r,r,!1)}function PolynomialBezier(r,s,a,i,o){o&&pointEqual(r,s)&&(s=lerpPoint(r,i,1/3)),o&&pointEqual(a,i)&&(a=lerpPoint(r,i,2/3));var x=polynomialCoefficients(r[0],s[0],a[0],i[0]),y=polynomialCoefficients(r[1],s[1],a[1],i[1]);this.a=[x[0],y[0]],this.b=[x[1],y[1]],this.c=[x[2],y[2]],this.d=[x[3],y[3]],this.points=[r,s,a,i]}PolynomialBezier.prototype.point=function(r){return[((this.a[0]*r+this.b[0])*r+this.c[0])*r+this.d[0],((this.a[1]*r+this.b[1])*r+this.c[1])*r+this.d[1]]},PolynomialBezier.prototype.derivative=function(r){return[(3*r*this.a[0]+2*this.b[0])*r+this.c[0],(3*r*this.a[1]+2*this.b[1])*r+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(r){var s=this.derivative(r);return Math.atan2(s[1],s[0])},PolynomialBezier.prototype.normalAngle=function(r){var s=this.derivative(r);return Math.atan2(s[0],s[1])},PolynomialBezier.prototype.inflectionPoints=function(){var r=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(r))return[];var s=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/r,a=s*s-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/r;if(a<0)return[];var i=Math.sqrt(a);return floatZero(i)?i>0&&i<1?[s]:[]:[s-i,s+i].filter(function(o){return o>0&&o<1})},PolynomialBezier.prototype.split=function(r){if(r<=0)return[singlePoint(this.points[0]),this];if(r>=1)return[this,singlePoint(this.points[this.points.length-1])];var s=lerpPoint(this.points[0],this.points[1],r),a=lerpPoint(this.points[1],this.points[2],r),i=lerpPoint(this.points[2],this.points[3],r),o=lerpPoint(s,a,r),x=lerpPoint(a,i,r),y=lerpPoint(o,x,r);return[new PolynomialBezier(this.points[0],s,o,y,!0),new PolynomialBezier(y,x,i,this.points[3],!0)]};function extrema(r,s){var a=r.points[0][s],i=r.points[r.points.length-1][s];if(a>i){var o=i;i=a,a=o}for(var x=quadRoots(3*r.a[s],2*r.b[s],r.c[s]),y=0;y<x.length;y+=1)if(x[y]>0&&x[y]<1){var _=r.point(x[y])[s];_<a?a=_:_>i&&(i=_)}return{min:a,max:i}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var r=this.bounds();return{left:r.x.min,right:r.x.max,top:r.y.min,bottom:r.y.max,width:r.x.max-r.x.min,height:r.y.max-r.y.min,cx:(r.x.max+r.x.min)/2,cy:(r.y.max+r.y.min)/2}};function intersectData(r,s,a){var i=r.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:r,t:(s+a)/2,t1:s,t2:a}}function splitData(r){var s=r.bez.split(.5);return[intersectData(s[0],r.t1,r.t),intersectData(s[1],r.t,r.t2)]}function boxIntersect(r,s){return Math.abs(r.cx-s.cx)*2<r.width+s.width&&Math.abs(r.cy-s.cy)*2<r.height+s.height}function intersectsImpl(r,s,a,i,o,x){if(boxIntersect(r,s)){if(a>=x||r.width<=i&&r.height<=i&&s.width<=i&&s.height<=i){o.push([r.t,s.t]);return}var y=splitData(r),_=splitData(s);intersectsImpl(y[0],_[0],a+1,i,o,x),intersectsImpl(y[0],_[1],a+1,i,o,x),intersectsImpl(y[1],_[0],a+1,i,o,x),intersectsImpl(y[1],_[1],a+1,i,o,x)}}PolynomialBezier.prototype.intersections=function(r,s,a){s===void 0&&(s=2),a===void 0&&(a=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(r,0,1),0,s,i,a),i},PolynomialBezier.shapeSegment=function(r,s){var a=(s+1)%r.length();return new PolynomialBezier(r.v[s],r.o[s],r.i[a],r.v[a],!0)},PolynomialBezier.shapeSegmentInverted=function(r,s){var a=(s+1)%r.length();return new PolynomialBezier(r.v[a],r.i[a],r.o[s],r.v[s],!0)};function crossProduct(r,s){return[r[1]*s[2]-r[2]*s[1],r[2]*s[0]-r[0]*s[2],r[0]*s[1]-r[1]*s[0]]}function lineIntersection(r,s,a,i){var o=[r[0],r[1],1],x=[s[0],s[1],1],y=[a[0],a[1],1],_=[i[0],i[1],1],E=crossProduct(crossProduct(o,x),crossProduct(y,_));return floatZero(E[2])?null:[E[0]/E[2],E[1]/E[2]]}function polarOffset(r,s,a){return[r[0]+Math.cos(s)*a,r[1]-Math.sin(s)*a]}function pointDistance(r,s){return Math.hypot(r[0]-s[0],r[1]-s[1])}function pointEqual(r,s){return floatEqual(r[0],s[0])&&floatEqual(r[1],s[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(r,s){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(r,s.s,0,null,this),this.frequency=PropertyFactory.getProp(r,s.r,0,null,this),this.pointsType=PropertyFactory.getProp(r,s.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(r,s,a,i,o,x,y){var _=a-Math.PI/2,E=a+Math.PI/2,R=s[0]+Math.cos(a)*i*o,S=s[1]-Math.sin(a)*i*o;r.setTripleAt(R,S,R+Math.cos(_)*x,S-Math.sin(_)*x,R+Math.cos(E)*y,S-Math.sin(E)*y,r.length())}function getPerpendicularVector(r,s){var a=[s[0]-r[0],s[1]-r[1]],i=-Math.PI*.5,o=[Math.cos(i)*a[0]-Math.sin(i)*a[1],Math.sin(i)*a[0]+Math.cos(i)*a[1]];return o}function getProjectingAngle(r,s){var a=s===0?r.length()-1:s-1,i=(s+1)%r.length(),o=r.v[a],x=r.v[i],y=getPerpendicularVector(o,x);return Math.atan2(0,1)-Math.atan2(y[1],y[0])}function zigZagCorner(r,s,a,i,o,x,y){var _=getProjectingAngle(s,a),E=s.v[a%s._length],R=s.v[a===0?s._length-1:a-1],S=s.v[(a+1)%s._length],j=x===2?Math.sqrt(Math.pow(E[0]-R[0],2)+Math.pow(E[1]-R[1],2)):0,T=x===2?Math.sqrt(Math.pow(E[0]-S[0],2)+Math.pow(E[1]-S[1],2)):0;setPoint(r,s.v[a%s._length],_,y,i,T/((o+1)*2),j/((o+1)*2))}function zigZagSegment(r,s,a,i,o,x){for(var y=0;y<i;y+=1){var _=(y+1)/(i+1),E=o===2?Math.sqrt(Math.pow(s.points[3][0]-s.points[0][0],2)+Math.pow(s.points[3][1]-s.points[0][1],2)):0,R=s.normalAngle(_),S=s.point(_);setPoint(r,S,R,x,a,E/((i+1)*2),E/((i+1)*2)),x=-x}return x}ZigZagModifier.prototype.processPath=function(r,s,a,i){var o=r._length,x=shapePool.newElement();if(x.c=r.c,r.c||(o-=1),o===0)return x;var y=-1,_=PolynomialBezier.shapeSegment(r,0);zigZagCorner(x,r,0,s,a,i,y);for(var E=0;E<o;E+=1)y=zigZagSegment(x,_,s,a,i,-y),E===o-1&&!r.c?_=null:_=PolynomialBezier.shapeSegment(r,(E+1)%o),zigZagCorner(x,r,E+1,s,a,i,y);return x},ZigZagModifier.prototype.processShapes=function(r){var s,a,i=this.shapes.length,o,x,y=this.amplitude.v,_=Math.max(0,Math.round(this.frequency.v)),E=this.pointsType.v;if(y!==0){var R,S;for(a=0;a<i;a+=1){if(R=this.shapes[a],S=R.localShapeCollection,!(!R.shape._mdf&&!this._mdf&&!r))for(S.releaseShapes(),R.shape._mdf=!0,s=R.shape.paths.shapes,x=R.shape.paths._length,o=0;o<x;o+=1)S.addShape(this.processPath(s[o],y,_,E));R.shape.paths=R.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(r,s,a){var i=Math.atan2(s[0]-r[0],s[1]-r[1]);return[polarOffset(r,i,a),polarOffset(s,i,a)]}function offsetSegment(r,s){var a,i,o,x,y,_,E;E=linearOffset(r.points[0],r.points[1],s),a=E[0],i=E[1],E=linearOffset(r.points[1],r.points[2],s),o=E[0],x=E[1],E=linearOffset(r.points[2],r.points[3],s),y=E[0],_=E[1];var R=lineIntersection(a,i,o,x);R===null&&(R=i);var S=lineIntersection(y,_,o,x);return S===null&&(S=y),new PolynomialBezier(a,R,S,_)}function joinLines(r,s,a,i,o){var x=s.points[3],y=a.points[0];if(i===3||pointEqual(x,y))return x;if(i===2){var _=-s.tangentAngle(1),E=-a.tangentAngle(0)+Math.PI,R=lineIntersection(x,polarOffset(x,_+Math.PI/2,100),y,polarOffset(y,_+Math.PI/2,100)),S=R?pointDistance(R,x):pointDistance(x,y)/2,j=polarOffset(x,_,2*S*roundCorner);return r.setXYAt(j[0],j[1],"o",r.length()-1),j=polarOffset(y,E,2*S*roundCorner),r.setTripleAt(y[0],y[1],y[0],y[1],j[0],j[1],r.length()),y}var T=pointEqual(x,s.points[2])?s.points[0]:s.points[2],A=pointEqual(y,a.points[1])?a.points[3]:a.points[1],M=lineIntersection(T,x,y,A);return M&&pointDistance(M,x)<o?(r.setTripleAt(M[0],M[1],M[0],M[1],M[0],M[1],r.length()),M):x}function getIntersection(r,s){var a=r.intersections(s);return a.length&&floatEqual(a[0][0],1)&&a.shift(),a.length?a[0]:null}function pruneSegmentIntersection(r,s){var a=r.slice(),i=s.slice(),o=getIntersection(r[r.length-1],s[0]);return o&&(a[r.length-1]=r[r.length-1].split(o[0])[0],i[0]=s[0].split(o[1])[1]),r.length>1&&s.length>1&&(o=getIntersection(r[0],s[s.length-1]),o)?[[r[0].split(o[0])[0]],[s[s.length-1].split(o[1])[1]]]:[a,i]}function pruneIntersections(r){for(var s,a=1;a<r.length;a+=1)s=pruneSegmentIntersection(r[a-1],r[a]),r[a-1]=s[0],r[a]=s[1];return r.length>1&&(s=pruneSegmentIntersection(r[r.length-1],r[0]),r[r.length-1]=s[0],r[0]=s[1]),r}function offsetSegmentSplit(r,s){var a=r.inflectionPoints(),i,o,x,y;if(a.length===0)return[offsetSegment(r,s)];if(a.length===1||floatEqual(a[1],1))return x=r.split(a[0]),i=x[0],o=x[1],[offsetSegment(i,s),offsetSegment(o,s)];x=r.split(a[0]),i=x[0];var _=(a[1]-a[0])/(1-a[0]);return x=x[1].split(_),y=x[0],o=x[1],[offsetSegment(i,s),offsetSegment(y,s),offsetSegment(o,s)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(r,s){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,s.a,0,null,this),this.miterLimit=PropertyFactory.getProp(r,s.ml,0,null,this),this.lineJoin=s.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(r,s,a,i){var o=shapePool.newElement();o.c=r.c;var x=r.length();r.c||(x-=1);var y,_,E,R=[];for(y=0;y<x;y+=1)E=PolynomialBezier.shapeSegment(r,y),R.push(offsetSegmentSplit(E,s));if(!r.c)for(y=x-1;y>=0;y-=1)E=PolynomialBezier.shapeSegmentInverted(r,y),R.push(offsetSegmentSplit(E,s));R=pruneIntersections(R);var S=null,j=null;for(y=0;y<R.length;y+=1){var T=R[y];for(j&&(S=joinLines(o,j,T[0],a,i)),j=T[T.length-1],_=0;_<T.length;_+=1)E=T[_],S&&pointEqual(E.points[0],S)?o.setXYAt(E.points[1][0],E.points[1][1],"o",o.length()-1):o.setTripleAt(E.points[0][0],E.points[0][1],E.points[1][0],E.points[1][1],E.points[0][0],E.points[0][1],o.length()),o.setTripleAt(E.points[3][0],E.points[3][1],E.points[3][0],E.points[3][1],E.points[2][0],E.points[2][1],o.length()),S=E.points[3]}return R.length&&joinLines(o,j,R[0][0],a,i),o},OffsetPathModifier.prototype.processShapes=function(r){var s,a,i=this.shapes.length,o,x,y=this.amount.v,_=this.miterLimit.v,E=this.lineJoin;if(y!==0){var R,S;for(a=0;a<i;a+=1){if(R=this.shapes[a],S=R.localShapeCollection,!(!R.shape._mdf&&!this._mdf&&!r))for(S.releaseShapes(),R.shape._mdf=!0,s=R.shape.paths.shapes,x=R.shape.paths._length,o=0;o<x;o+=1)S.addShape(this.processPath(s[o],y,E,_));R.shape.paths=R.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(r){for(var s=r.fStyle?r.fStyle.split(" "):[],a="normal",i="normal",o=s.length,x,y=0;y<o;y+=1)switch(x=s[y].toLowerCase(),x){case"italic":i="italic";break;case"bold":a="700";break;case"black":a="900";break;case"medium":a="500";break;case"regular":case"normal":a="400";break;case"light":case"thin":a="200";break}return{style:i,weight:r.fWeight||a}}var FontManager=function(){var r=5e3,s={w:0,size:0,shapes:[],data:{shapes:[]}},a=[];a=a.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],o=[65039,8205];function x(N){var F=N.split(","),W,V=F.length,U=[];for(W=0;W<V;W+=1)F[W]!=="sans-serif"&&F[W]!=="monospace"&&U.push(F[W]);return U.join(",")}function y(N,F){var W=createTag("span");W.setAttribute("aria-hidden",!0),W.style.fontFamily=F;var V=createTag("span");V.innerText="giItT1WQy@!-/#",W.style.position="absolute",W.style.left="-10000px",W.style.top="-10000px",W.style.fontSize="300px",W.style.fontVariant="normal",W.style.fontStyle="normal",W.style.fontWeight="normal",W.style.letterSpacing="0",W.appendChild(V),document.body.appendChild(W);var U=V.offsetWidth;return V.style.fontFamily=x(N)+", "+F,{node:V,w:U,parent:W}}function _(){var N,F=this.fonts.length,W,V,U=F;for(N=0;N<F;N+=1)this.fonts[N].loaded?U-=1:this.fonts[N].fOrigin==="n"||this.fonts[N].origin===0?this.fonts[N].loaded=!0:(W=this.fonts[N].monoCase.node,V=this.fonts[N].monoCase.w,W.offsetWidth!==V?(U-=1,this.fonts[N].loaded=!0):(W=this.fonts[N].sansCase.node,V=this.fonts[N].sansCase.w,W.offsetWidth!==V&&(U-=1,this.fonts[N].loaded=!0)),this.fonts[N].loaded&&(this.fonts[N].sansCase.parent.parentNode.removeChild(this.fonts[N].sansCase.parent),this.fonts[N].monoCase.parent.parentNode.removeChild(this.fonts[N].monoCase.parent)));U!==0&&Date.now()-this.initTime<r?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function E(N,F){var W=document.body&&F?"svg":"canvas",V,U=getFontProperties(N);if(W==="svg"){var G=createNS("text");G.style.fontSize="100px",G.setAttribute("font-family",N.fFamily),G.setAttribute("font-style",U.style),G.setAttribute("font-weight",U.weight),G.textContent="1",N.fClass?(G.style.fontFamily="inherit",G.setAttribute("class",N.fClass)):G.style.fontFamily=N.fFamily,F.appendChild(G),V=G}else{var oe=new OffscreenCanvas(500,500).getContext("2d");oe.font=U.style+" "+U.weight+" 100px "+N.fFamily,V=oe}function X(ee){return W==="svg"?(V.textContent=ee,V.getComputedTextLength()):V.measureText(ee).width}return{measureText:X}}function R(N,F){if(!N){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=N.list;return}if(!document.body){this.isLoaded=!0,N.list.forEach(function(Q){Q.helper=E(Q),Q.cache={}}),this.fonts=N.list;return}var W=N.list,V,U=W.length,G=U;for(V=0;V<U;V+=1){var oe=!0,X,ee;if(W[V].loaded=!1,W[V].monoCase=y(W[V].fFamily,"monospace"),W[V].sansCase=y(W[V].fFamily,"sans-serif"),!W[V].fPath)W[V].loaded=!0,G-=1;else if(W[V].fOrigin==="p"||W[V].origin===3){if(X=document.querySelectorAll('style[f-forigin="p"][f-family="'+W[V].fFamily+'"], style[f-origin="3"][f-family="'+W[V].fFamily+'"]'),X.length>0&&(oe=!1),oe){var ae=createTag("style");ae.setAttribute("f-forigin",W[V].fOrigin),ae.setAttribute("f-origin",W[V].origin),ae.setAttribute("f-family",W[V].fFamily),ae.type="text/css",ae.innerText="@font-face {font-family: "+W[V].fFamily+"; font-style: normal; src: url('"+W[V].fPath+"');}",F.appendChild(ae)}}else if(W[V].fOrigin==="g"||W[V].origin===1){for(X=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ee=0;ee<X.length;ee+=1)X[ee].href.indexOf(W[V].fPath)!==-1&&(oe=!1);if(oe){var ie=createTag("link");ie.setAttribute("f-forigin",W[V].fOrigin),ie.setAttribute("f-origin",W[V].origin),ie.type="text/css",ie.rel="stylesheet",ie.href=W[V].fPath,document.body.appendChild(ie)}}else if(W[V].fOrigin==="t"||W[V].origin===2){for(X=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ee=0;ee<X.length;ee+=1)W[V].fPath===X[ee].src&&(oe=!1);if(oe){var se=createTag("link");se.setAttribute("f-forigin",W[V].fOrigin),se.setAttribute("f-origin",W[V].origin),se.setAttribute("rel","stylesheet"),se.setAttribute("href",W[V].fPath),F.appendChild(se)}}W[V].helper=E(W[V],F),W[V].cache={},this.fonts.push(W[V])}G===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function S(N){if(N){this.chars||(this.chars=[]);var F,W=N.length,V,U=this.chars.length,G;for(F=0;F<W;F+=1){for(V=0,G=!1;V<U;)this.chars[V].style===N[F].style&&this.chars[V].fFamily===N[F].fFamily&&this.chars[V].ch===N[F].ch&&(G=!0),V+=1;G||(this.chars.push(N[F]),U+=1)}}}function j(N,F,W){for(var V=0,U=this.chars.length;V<U;){if(this.chars[V].ch===N&&this.chars[V].style===F&&this.chars[V].fFamily===W)return this.chars[V];V+=1}return(typeof N=="string"&&N.charCodeAt(0)!==13||!N)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",N,F,W)),s}function T(N,F,W){var V=this.getFontByName(F),U=N.charCodeAt(0);if(!V.cache[U+1]){var G=V.helper;if(N===" "){var oe=G.measureText("|"+N+"|"),X=G.measureText("||");V.cache[U+1]=(oe-X)/100}else V.cache[U+1]=G.measureText(N)/100}return V.cache[U+1]*W}function A(N){for(var F=0,W=this.fonts.length;F<W;){if(this.fonts[F].fName===N)return this.fonts[F];F+=1}return this.fonts[0]}function M(N,F){var W=N.toString(16)+F.toString(16);return i.indexOf(W)!==-1}function P(N,F){return F?N===o[0]&&F===o[1]:N===o[1]}function L(N){return a.indexOf(N)!==-1}function D(){this.isLoaded=!0}var O=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};O.isModifier=M,O.isZeroWidthJoiner=P,O.isCombinedCharacter=L;var B={addChars:S,addFonts:R,getCharData:j,getFontByName:A,measureText:T,checkLoadedFonts:_,setIsLoaded:D};return O.prototype=B,O}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(s){this.renderableComponents.indexOf(s)===-1&&this.renderableComponents.push(s)},removeRenderableComponent:function(s){this.renderableComponents.indexOf(s)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(s),1)},prepareRenderableFrame:function(s){this.checkLayerLimits(s)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(s){this.data.ip-this.data.st<=s&&this.data.op-this.data.st>s?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var s,a=this.renderableComponents.length;for(s=0;s<a;s+=1)this.renderableComponents[s].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var r={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(s){return r[s]||""}}();function SliderEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,0,0,a)}function AngleEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,0,0,a)}function ColorEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,1,0,a)}function PointEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,1,0,a)}function LayerIndexEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,0,0,a)}function MaskIndexEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,0,0,a)}function CheckboxEffect(r,s,a){this.p=PropertyFactory.getProp(s,r.v,0,0,a)}function NoValueEffect(){this.p={}}function EffectsManager(r,s){var a=r.ef||[];this.effectElements=[];var i,o=a.length,x;for(i=0;i<o;i+=1)x=new GroupEffect(a[i],s),this.effectElements.push(x)}function GroupEffect(r,s){this.init(r,s)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(r,s){this.data=r,this.effectElements=[],this.initDynamicPropertyContainer(s);var a,i=this.data.ef.length,o,x=this.data.ef;for(a=0;a<i;a+=1){switch(o=null,x[a].ty){case 0:o=new SliderEffect(x[a],s,this);break;case 1:o=new AngleEffect(x[a],s,this);break;case 2:o=new ColorEffect(x[a],s,this);break;case 3:o=new PointEffect(x[a],s,this);break;case 4:case 7:o=new CheckboxEffect(x[a],s,this);break;case 10:o=new LayerIndexEffect(x[a],s,this);break;case 11:o=new MaskIndexEffect(x[a],s,this);break;case 5:o=new EffectsManager(x[a],s);break;default:o=new NoValueEffect(x[a]);break}o&&this.effectElements.push(o)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var s=0,a=this.data.masksProperties.length;s<a;){if(this.data.masksProperties[s].mode!=="n"&&this.data.masksProperties[s].cl!==!1)return!0;s+=1}return!1},initExpressions:function(){var s=getExpressionInterfaces();if(s){var a=s("layer"),i=s("effects"),o=s("shape"),x=s("text"),y=s("comp");this.layerInterface=a(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var _=i.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(_),this.data.ty===0||this.data.xt?this.compInterface=y(this):this.data.ty===4?(this.layerInterface.shapeInterface=o(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=x(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var s=getBlendMode(this.data.bm),a=this.baseElement||this.layerElement;a.style["mix-blend-mode"]=s},initBaseData:function(s,a,i){this.globalData=a,this.comp=i,this.data=s,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(s,a){var i,o=this.dynamicProperties.length;for(i=0;i<o;i+=1)(a||this._isParent&&this.dynamicProperties[i].propType==="transform")&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(s){this.dynamicProperties.indexOf(s)===-1&&this.dynamicProperties.push(s)}};function FootageElement(r,s,a){this.initFrame(),this.initRenderable(),this.assetData=s.getAssetData(r.refId),this.footageData=s.imageLoader.getAsset(this.assetData),this.initBaseData(r,s,a)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var r=getExpressionInterfaces();if(r){var s=r("footage");this.layerInterface=s(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(r,s,a){this.initFrame(),this.initRenderable(),this.assetData=s.getAssetData(r.refId),this.initBaseData(r,s,a),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,s.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,r.au&&r.au.lv?r.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(r){if(this.prepareRenderableFrame(r,!0),this.prepareProperties(r,!0),this.tm._placeholder)this._currentTime=r/this.data.sr;else{var s=this.tm.v;this._currentTime=s}this._volume=this.lv.v[0];var a=this._volume*this._volumeMultiplier;this._previousVolume!==a&&(this._previousVolume=a,this.audio.volume(a))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(r){this.audio.rate(r)},AudioElement.prototype.volume=function(r){this._volumeMultiplier=r,this._previousVolume=r*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(r){var s,a=this.layers.length,i;for(this.completeLayers=!0,s=a-1;s>=0;s-=1)this.elements[s]||(i=this.layers[s],i.ip-i.st<=r-this.layers[s].st&&i.op-i.st>r-this.layers[s].st&&this.buildItem(s)),this.completeLayers=this.elements[s]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(r){switch(r.ty){case 2:return this.createImage(r);case 0:return this.createComp(r);case 1:return this.createSolid(r);case 3:return this.createNull(r);case 4:return this.createShape(r);case 5:return this.createText(r);case 6:return this.createAudio(r);case 13:return this.createCamera(r);case 15:return this.createFootage(r);default:return this.createNull(r)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(r){return new AudioElement(r,this.globalData,this)},BaseRenderer.prototype.createFootage=function(r){return new FootageElement(r,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var r,s=this.layers.length;for(r=0;r<s;r+=1)this.buildItem(r);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(r){this.completeLayers=!1;var s,a=r.length,i,o=this.layers.length;for(s=0;s<a;s+=1)for(i=0;i<o;){if(this.layers[i].id===r[s].id){this.layers[i]=r[s];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(r){this.globalData.projectInterface=r},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(r,s,a){for(var i=this.elements,o=this.layers,x=0,y=o.length;x<y;)o[x].ind==s&&(!i[x]||i[x]===!0?(this.buildItem(x),this.addPendingElement(r)):(a.push(i[x]),i[x].setAsParent(),o[x].parent!==void 0?this.buildElementParenting(r,o[x].parent,a):r.setHierarchy(a))),x+=1},BaseRenderer.prototype.addPendingElement=function(r){this.pendingElements.push(r)},BaseRenderer.prototype.searchExtraCompositions=function(r){var s,a=r.length;for(s=0;s<a;s+=1)if(r[s].xt){var i=this.createComp(r[s]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(r){var s,a=this.elements.length;for(s=0;s<a;s+=1)if(this.elements[s].data.ind===r)return this.elements[s];return null},BaseRenderer.prototype.getElementByPath=function(r){var s=r.shift(),a;if(typeof s=="number")a=this.elements[s];else{var i,o=this.elements.length;for(i=0;i<o;i+=1)if(this.elements[i].data.nm===s){a=this.elements[i];break}}return r.length===0?a:a.getElementByPath(r)},BaseRenderer.prototype.setupGlobalData=function(r,s){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(r.chars),this.globalData.fontManager.addFonts(r.fonts,s),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=r.fr,this.globalData.nm=r.nm,this.globalData.compSize={w:r.w,h:r.h}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var s,a=this.finalTransform.mat,i=0,o=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<o;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(s=this.finalTransform.mProp.v.props,a.cloneFromProps(s),i=0;i<o;i+=1)s=this.hierarchy[i].finalTransform.mProp.v.props,a.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15])}},globalToLocal:function(s){var a=[];a.push(this.finalTransform);for(var i=!0,o=this.comp;i;)o.finalTransform?(o.data.hasMask&&a.splice(0,0,o.finalTransform),o=o.comp):i=!1;var x,y=a.length,_;for(x=0;x<y;x+=1)_=a[x].mat.applyToPointArray(0,0,0),s=[s[0]-_[0],s[1]-_[1],0];return s},mHelper:new Matrix};function MaskElement(r,s,a){this.data=r,this.element=s,this.globalData=a,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i=this.globalData.defs,o,x=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(x),this.solidPath="";var y,_=this.masksProperties,E=0,R=[],S,j,T=createElementID(),A,M,P,L,D="clipPath",O="clip-path";for(o=0;o<x;o+=1)if((_[o].mode!=="a"&&_[o].mode!=="n"||_[o].inv||_[o].o.k!==100||_[o].o.x)&&(D="mask",O="mask"),(_[o].mode==="s"||_[o].mode==="i")&&E===0?(A=createNS("rect"),A.setAttribute("fill","#ffffff"),A.setAttribute("width",this.element.comp.data.w||0),A.setAttribute("height",this.element.comp.data.h||0),R.push(A)):A=null,y=createNS("path"),_[o].mode==="n")this.viewData[o]={op:PropertyFactory.getProp(this.element,_[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,_[o],3),elem:y,lastPath:""},i.appendChild(y);else{E+=1,y.setAttribute("fill",_[o].mode==="s"?"#000000":"#ffffff"),y.setAttribute("clip-rule","nonzero");var B;if(_[o].x.k!==0?(D="mask",O="mask",L=PropertyFactory.getProp(this.element,_[o].x,0,null,this.element),B=createElementID(),M=createNS("filter"),M.setAttribute("id",B),P=createNS("feMorphology"),P.setAttribute("operator","erode"),P.setAttribute("in","SourceGraphic"),P.setAttribute("radius","0"),M.appendChild(P),i.appendChild(M),y.setAttribute("stroke",_[o].mode==="s"?"#000000":"#ffffff")):(P=null,L=null),this.storedData[o]={elem:y,x:L,expan:P,lastPath:"",lastOperator:"",filterId:B,lastRadius:0},_[o].mode==="i"){j=R.length;var N=createNS("g");for(S=0;S<j;S+=1)N.appendChild(R[S]);var F=createNS("mask");F.setAttribute("mask-type","alpha"),F.setAttribute("id",T+"_"+E),F.appendChild(y),i.appendChild(F),N.setAttribute("mask","url("+getLocationHref()+"#"+T+"_"+E+")"),R.length=0,R.push(N)}else R.push(y);_[o].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[o]={elem:y,lastPath:"",op:PropertyFactory.getProp(this.element,_[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,_[o],3),invRect:A},this.viewData[o].prop.k||this.drawPath(_[o],this.viewData[o].prop.v,this.viewData[o])}for(this.maskElement=createNS(D),x=R.length,o=0;o<x;o+=1)this.maskElement.appendChild(R[o]);E>0&&(this.maskElement.setAttribute("id",T),this.element.maskedElement.setAttribute(O,"url("+getLocationHref()+"#"+T+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(r){return this.viewData[r].prop},MaskElement.prototype.renderFrame=function(r){var s=this.element.finalTransform.mat,a,i=this.masksProperties.length;for(a=0;a<i;a+=1)if((this.viewData[a].prop._mdf||r)&&this.drawPath(this.masksProperties[a],this.viewData[a].prop.v,this.viewData[a]),(this.viewData[a].op._mdf||r)&&this.viewData[a].elem.setAttribute("fill-opacity",this.viewData[a].op.v),this.masksProperties[a].mode!=="n"&&(this.viewData[a].invRect&&(this.element.finalTransform.mProp._mdf||r)&&this.viewData[a].invRect.setAttribute("transform",s.getInverseMatrix().to2dCSS()),this.storedData[a].x&&(this.storedData[a].x._mdf||r))){var o=this.storedData[a].expan;this.storedData[a].x.v<0?(this.storedData[a].lastOperator!=="erode"&&(this.storedData[a].lastOperator="erode",this.storedData[a].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[a].filterId+")")),o.setAttribute("radius",-this.storedData[a].x.v)):(this.storedData[a].lastOperator!=="dilate"&&(this.storedData[a].lastOperator="dilate",this.storedData[a].elem.setAttribute("filter",null)),this.storedData[a].elem.setAttribute("stroke-width",this.storedData[a].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var r="M0,0 ";return r+=" h"+this.globalData.compSize.w,r+=" v"+this.globalData.compSize.h,r+=" h-"+this.globalData.compSize.w,r+=" v-"+this.globalData.compSize.h+" ",r},MaskElement.prototype.drawPath=function(r,s,a){var i=" M"+s.v[0][0]+","+s.v[0][1],o,x;for(x=s._length,o=1;o<x;o+=1)i+=" C"+s.o[o-1][0]+","+s.o[o-1][1]+" "+s.i[o][0]+","+s.i[o][1]+" "+s.v[o][0]+","+s.v[o][1];if(s.c&&x>1&&(i+=" C"+s.o[o-1][0]+","+s.o[o-1][1]+" "+s.i[0][0]+","+s.i[0][1]+" "+s.v[0][0]+","+s.v[0][1]),a.lastPath!==i){var y="";a.elem&&(s.c&&(y=r.inv?this.solidPath+i:i),a.elem.setAttribute("d",y)),a.lastPath=i}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var r={};r.createFilter=s,r.createAlphaToLuminanceFilter=a;function s(i,o){var x=createNS("filter");return x.setAttribute("id",i),o!==!0&&(x.setAttribute("filterUnits","objectBoundingBox"),x.setAttribute("x","0%"),x.setAttribute("y","0%"),x.setAttribute("width","100%"),x.setAttribute("height","100%")),x}function a(){var i=createNS("feColorMatrix");return i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),i}return r}(),featureSupport=function(){var r={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(r.maskType=!1),/firefox/i.test(navigator.userAgent)&&(r.svgLumaHidden=!1),r}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(r){var s,a="SourceGraphic",i=r.data.ef?r.data.ef.length:0,o=createElementID(),x=filtersFactory.createFilter(o,!0),y=0;this.filters=[];var _;for(s=0;s<i;s+=1){_=null;var E=r.data.ef[s].ty;if(registeredEffects[E]){var R=registeredEffects[E].effect;_=new R(x,r.effectsManager.effectElements[s],r,idPrefix+y,a),a=idPrefix+y,registeredEffects[E].countsAsEffect&&(y+=1)}_&&this.filters.push(_)}y&&(r.globalData.defs.appendChild(x),r.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+o+")")),this.filters.length&&r.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(r){var s,a=this.filters.length;for(s=0;s<a;s+=1)this.filters[s].renderFrame(r)};function registerEffect(r,s,a){registeredEffects[r]={effect:s,countsAsEffect:a}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var s=null;if(this.data.td){this.matteMasks={};var a=createNS("g");a.setAttribute("id",this.layerId),a.appendChild(this.layerElement),s=a,this.globalData.defs.appendChild(a)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),s=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var i=createNS("clipPath"),o=createNS("path");o.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var x=createElementID();if(i.setAttribute("id",x),i.appendChild(o),this.globalData.defs.appendChild(i),this.checkMasks()){var y=createNS("g");y.setAttribute("clip-path","url("+getLocationHref()+"#"+x+")"),y.appendChild(this.layerElement),this.transformedElement=y,s?s.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+x+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(s){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[s]){var a=this.layerId+"_"+s,i,o,x,y;if(s===1||s===3){var _=createNS("mask");_.setAttribute("id",a),_.setAttribute("mask-type",s===3?"luminance":"alpha"),x=createNS("use"),x.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),_.appendChild(x),this.globalData.defs.appendChild(_),!featureSupport.maskType&&s===1&&(_.setAttribute("mask-type","luminance"),i=createElementID(),o=filtersFactory.createFilter(i),this.globalData.defs.appendChild(o),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),y=createNS("g"),y.appendChild(x),_.appendChild(y),y.setAttribute("filter","url("+getLocationHref()+"#"+i+")"))}else if(s===2){var E=createNS("mask");E.setAttribute("id",a),E.setAttribute("mask-type","alpha");var R=createNS("g");E.appendChild(R),i=createElementID(),o=filtersFactory.createFilter(i);var S=createNS("feComponentTransfer");S.setAttribute("in","SourceGraphic"),o.appendChild(S);var j=createNS("feFuncA");j.setAttribute("type","table"),j.setAttribute("tableValues","1.0 0.0"),S.appendChild(j),this.globalData.defs.appendChild(o);var T=createNS("rect");T.setAttribute("width",this.comp.data.w),T.setAttribute("height",this.comp.data.h),T.setAttribute("x","0"),T.setAttribute("y","0"),T.setAttribute("fill","#ffffff"),T.setAttribute("opacity","0"),R.setAttribute("filter","url("+getLocationHref()+"#"+i+")"),R.appendChild(T),x=createNS("use"),x.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),R.appendChild(x),featureSupport.maskType||(E.setAttribute("mask-type","luminance"),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),y=createNS("g"),R.appendChild(T),y.appendChild(this.layerElement),R.appendChild(y)),this.globalData.defs.appendChild(E)}this.matteMasks[s]=a}return this.matteMasks[s]},setMatte:function(s){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+s+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(s){this.hierarchy=s},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var r={initElement:function(a,i,o){this.initFrame(),this.initBaseData(a,i,o),this.initTransform(a,i,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var a=this.baseElement||this.layerElement;a.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var a=this.baseElement||this.layerElement;a.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(r)],RenderableDOMElement)})();function IImageElement(r,s,a){this.assetData=s.getAssetData(r.refId),this.initElement(r,s,a),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(r,s){this.elem=r,this.pos=s}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(s){var a,i=this.shapeModifiers.length;for(a=0;a<i;a+=1)this.shapeModifiers[a].addShape(s)},isShapeInAnimatedModifiers:function(s){for(var a=0,i=this.shapeModifiers.length;a<i;)if(this.shapeModifiers[a].isAnimatedWithShape(s))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var s,a=this.shapes.length;for(s=0;s<a;s+=1)this.shapes[s].sh.reset();a=this.shapeModifiers.length;var i;for(s=a-1;s>=0&&(i=this.shapeModifiers[s].processShapes(this._isFirstFrame),!i);s-=1);}},searchProcessedElement:function(s){for(var a=this.processedElements,i=0,o=a.length;i<o;){if(a[i].elem===s)return a[i].pos;i+=1}return 0},addProcessedElement:function(s,a){for(var i=this.processedElements,o=i.length;o;)if(o-=1,i[o].elem===s){i[o].pos=a;return}i.push(new ProcessedElement(s,a))},prepareFrame:function(s){this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(r,s,a){this.caches=[],this.styles=[],this.transformers=r,this.lStr="",this.sh=a,this.lvl=s,this._isAnimated=!!a.k;for(var i=0,o=r.length;i<o;){if(r[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(r,s){this.data=r,this.type=r.ty,this.d="",this.lvl=s,this._mdf=!1,this.closed=r.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(r,s,a,i){this.elem=r,this.frameId=-1,this.dataProps=createSizedArray(s.length),this.renderer=a,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",s.length?s.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var o,x=s.length||0,y;for(o=0;o<x;o+=1)y=PropertyFactory.getProp(r,s[o].v,0,0,this),this.k=y.k||this.k,this.dataProps[o]={n:s[o].n,p:y};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(r){if(!(this.elem.globalData.frameId===this.frameId&&!r)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||r,this._mdf)){var s=0,a=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),s=0;s<a;s+=1)this.dataProps[s].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[s].p.v:this.dashArray[s]=this.dataProps[s].p.v:this.dashoffset[0]=this.dataProps[s].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(r,s,a){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,s.o,0,.01,this),this.w=PropertyFactory.getProp(r,s.w,0,null,this),this.d=new DashProperty(r,s.d||{},"svg",this),this.c=PropertyFactory.getProp(r,s.c,1,255,this),this.style=a,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(r,s,a){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,s.o,0,.01,this),this.c=PropertyFactory.getProp(r,s.c,1,255,this),this.style=a}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(r,s,a){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.style=a}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(r,s,a){this.data=s,this.c=createTypedArray("uint8c",s.p*4);var i=s.k.k[0].s?s.k.k[0].s.length-s.p*4:s.k.k.length-s.p*4;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(a),this.prop=PropertyFactory.getProp(r,s.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(r,s){for(var a=0,i=this.o.length/2,o;a<i;){if(o=Math.abs(r[a*4]-r[s*4+a*2]),o>.01)return!1;a+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var r=0,s=this.data.k.k.length;r<s;){if(!this.comparePoints(this.data.k.k[r].s,this.data.p))return!1;r+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(r){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||r){var s,a=this.data.p*4,i,o;for(s=0;s<a;s+=1)i=s%4===0?100:255,o=Math.round(this.prop.v[s]*i),this.c[s]!==o&&(this.c[s]=o,this._cmdf=!r);if(this.o.length)for(a=this.prop.v.length,s=this.data.p*4;s<a;s+=1)i=s%2===0?100:1,o=s%2===0?Math.round(this.prop.v[s]*100):this.prop.v[s],this.o[s-this.data.p*4]!==o&&(this.o[s-this.data.p*4]=o,this._omdf=!r);this._mdf=!r}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(r,s,a){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.initGradientData(r,s,a)}SVGGradientFillStyleData.prototype.initGradientData=function(r,s,a){this.o=PropertyFactory.getProp(r,s.o,0,.01,this),this.s=PropertyFactory.getProp(r,s.s,1,null,this),this.e=PropertyFactory.getProp(r,s.e,1,null,this),this.h=PropertyFactory.getProp(r,s.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(r,s.a||{k:0},0,degToRads,this),this.g=new GradientProperty(r,s.g,this),this.style=a,this.stops=[],this.setGradientData(a.pElem,s),this.setGradientOpacity(s,a),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(r,s){var a=createElementID(),i=createNS(s.t===1?"linearGradient":"radialGradient");i.setAttribute("id",a),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var o=[],x,y,_;for(_=s.g.p*4,y=0;y<_;y+=4)x=createNS("stop"),i.appendChild(x),o.push(x);r.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+a+")"),this.gf=i,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(r,s){if(this.g._hasOpacity&&!this.g._collapsable){var a,i,o,x=createNS("mask"),y=createNS("path");x.appendChild(y);var _=createElementID(),E=createElementID();x.setAttribute("id",E);var R=createNS(r.t===1?"linearGradient":"radialGradient");R.setAttribute("id",_),R.setAttribute("spreadMethod","pad"),R.setAttribute("gradientUnits","userSpaceOnUse"),o=r.g.k.k[0].s?r.g.k.k[0].s.length:r.g.k.k.length;var S=this.stops;for(i=r.g.p*4;i<o;i+=2)a=createNS("stop"),a.setAttribute("stop-color","rgb(255,255,255)"),R.appendChild(a),S.push(a);y.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+_+")"),r.ty==="gs"&&(y.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),y.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),r.lj===1&&y.setAttribute("stroke-miterlimit",r.ml)),this.of=R,this.ms=x,this.ost=S,this.maskId=E,s.msElem=y}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(r,s,a){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(r,s.w,0,null,this),this.d=new DashProperty(r,s.d||{},"svg",this),this.initGradientData(r,s,a),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(r,s,a){this.transform={mProps:r,op:s,container:a},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(s,a,i,o){if(a===0)return"";var x=s.o,y=s.i,_=s.v,E,R=" M"+o.applyToPointStringified(_[0][0],_[0][1]);for(E=1;E<a;E+=1)R+=" C"+o.applyToPointStringified(x[E-1][0],x[E-1][1])+" "+o.applyToPointStringified(y[E][0],y[E][1])+" "+o.applyToPointStringified(_[E][0],_[E][1]);return i&&a&&(R+=" C"+o.applyToPointStringified(x[E-1][0],x[E-1][1])+" "+o.applyToPointStringified(y[0][0],y[0][1])+" "+o.applyToPointStringified(_[0][0],_[0][1]),R+="z"),R},SVGElementsRenderer=function(){var r=new Matrix,s=new Matrix,a={createRenderFunction:i};function i(j){switch(j.ty){case"fl":return _;case"gf":return R;case"gs":return E;case"st":return S;case"sh":case"el":case"rc":case"sr":return y;case"tr":return o;case"no":return x;default:return null}}function o(j,T,A){(A||T.transform.op._mdf)&&T.transform.container.setAttribute("opacity",T.transform.op.v),(A||T.transform.mProps._mdf)&&T.transform.container.setAttribute("transform",T.transform.mProps.v.to2dCSS())}function x(){}function y(j,T,A){var M,P,L,D,O,B,N=T.styles.length,F=T.lvl,W,V,U,G,oe;for(B=0;B<N;B+=1){if(D=T.sh._mdf||A,T.styles[B].lvl<F){for(V=s.reset(),G=F-T.styles[B].lvl,oe=T.transformers.length-1;!D&&G>0;)D=T.transformers[oe].mProps._mdf||D,G-=1,oe-=1;if(D)for(G=F-T.styles[B].lvl,oe=T.transformers.length-1;G>0;)U=T.transformers[oe].mProps.v.props,V.transform(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15]),G-=1,oe-=1}else V=r;if(W=T.sh.paths,P=W._length,D){for(L="",M=0;M<P;M+=1)O=W.shapes[M],O&&O._length&&(L+=buildShapeString(O,O._length,O.c,V));T.caches[B]=L}else L=T.caches[B];T.styles[B].d+=j.hd===!0?"":L,T.styles[B]._mdf=D||T.styles[B]._mdf}}function _(j,T,A){var M=T.style;(T.c._mdf||A)&&M.pElem.setAttribute("fill","rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||A)&&M.pElem.setAttribute("fill-opacity",T.o.v)}function E(j,T,A){R(j,T,A),S(j,T,A)}function R(j,T,A){var M=T.gf,P=T.g._hasOpacity,L=T.s.v,D=T.e.v;if(T.o._mdf||A){var O=j.ty==="gf"?"fill-opacity":"stroke-opacity";T.style.pElem.setAttribute(O,T.o.v)}if(T.s._mdf||A){var B=j.t===1?"x1":"cx",N=B==="x1"?"y1":"cy";M.setAttribute(B,L[0]),M.setAttribute(N,L[1]),P&&!T.g._collapsable&&(T.of.setAttribute(B,L[0]),T.of.setAttribute(N,L[1]))}var F,W,V,U;if(T.g._cmdf||A){F=T.cst;var G=T.g.c;for(V=F.length,W=0;W<V;W+=1)U=F[W],U.setAttribute("offset",G[W*4]+"%"),U.setAttribute("stop-color","rgb("+G[W*4+1]+","+G[W*4+2]+","+G[W*4+3]+")")}if(P&&(T.g._omdf||A)){var oe=T.g.o;for(T.g._collapsable?F=T.cst:F=T.ost,V=F.length,W=0;W<V;W+=1)U=F[W],T.g._collapsable||U.setAttribute("offset",oe[W*2]+"%"),U.setAttribute("stop-opacity",oe[W*2+1])}if(j.t===1)(T.e._mdf||A)&&(M.setAttribute("x2",D[0]),M.setAttribute("y2",D[1]),P&&!T.g._collapsable&&(T.of.setAttribute("x2",D[0]),T.of.setAttribute("y2",D[1])));else{var X;if((T.s._mdf||T.e._mdf||A)&&(X=Math.sqrt(Math.pow(L[0]-D[0],2)+Math.pow(L[1]-D[1],2)),M.setAttribute("r",X),P&&!T.g._collapsable&&T.of.setAttribute("r",X)),T.e._mdf||T.h._mdf||T.a._mdf||A){X||(X=Math.sqrt(Math.pow(L[0]-D[0],2)+Math.pow(L[1]-D[1],2)));var ee=Math.atan2(D[1]-L[1],D[0]-L[0]),ae=T.h.v;ae>=1?ae=.99:ae<=-1&&(ae=-.99);var ie=X*ae,se=Math.cos(ee+T.a.v)*ie+L[0],Q=Math.sin(ee+T.a.v)*ie+L[1];M.setAttribute("fx",se),M.setAttribute("fy",Q),P&&!T.g._collapsable&&(T.of.setAttribute("fx",se),T.of.setAttribute("fy",Q))}}}function S(j,T,A){var M=T.style,P=T.d;P&&(P._mdf||A)&&P.dashStr&&(M.pElem.setAttribute("stroke-dasharray",P.dashStr),M.pElem.setAttribute("stroke-dashoffset",P.dashoffset[0])),T.c&&(T.c._mdf||A)&&M.pElem.setAttribute("stroke","rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||A)&&M.pElem.setAttribute("stroke-opacity",T.o.v),(T.w._mdf||A)&&(M.pElem.setAttribute("stroke-width",T.w.v),M.msElem&&M.msElem.setAttribute("stroke-width",T.w.v))}return a}();function SVGShapeElement(r,s,a){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(r,s,a),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var r,s=this.shapes.length,a,i,o=this.stylesList.length,x,y=[],_=!1;for(i=0;i<o;i+=1){for(x=this.stylesList[i],_=!1,y.length=0,r=0;r<s;r+=1)a=this.shapes[r],a.styles.indexOf(x)!==-1&&(y.push(a),_=a._isAnimated||_);y.length>1&&_&&this.setShapesAsAnimated(y)}},SVGShapeElement.prototype.setShapesAsAnimated=function(r){var s,a=r.length;for(s=0;s<a;s+=1)r[s].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(r,s){var a,i=new SVGStyleData(r,s),o=i.pElem;if(r.ty==="st")a=new SVGStrokeStyleData(this,r,i);else if(r.ty==="fl")a=new SVGFillStyleData(this,r,i);else if(r.ty==="gf"||r.ty==="gs"){var x=r.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;a=new x(this,r,i),this.globalData.defs.appendChild(a.gf),a.maskId&&(this.globalData.defs.appendChild(a.ms),this.globalData.defs.appendChild(a.of),o.setAttribute("mask","url("+getLocationHref()+"#"+a.maskId+")"))}else r.ty==="no"&&(a=new SVGNoStyleData(this,r,i));return(r.ty==="st"||r.ty==="gs")&&(o.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),o.setAttribute("fill-opacity","0"),r.lj===1&&o.setAttribute("stroke-miterlimit",r.ml)),r.r===2&&o.setAttribute("fill-rule","evenodd"),r.ln&&o.setAttribute("id",r.ln),r.cl&&o.setAttribute("class",r.cl),r.bm&&(o.style["mix-blend-mode"]=getBlendMode(r.bm)),this.stylesList.push(i),this.addToAnimatedContents(r,a),a},SVGShapeElement.prototype.createGroupElement=function(r){var s=new ShapeGroupData;return r.ln&&s.gr.setAttribute("id",r.ln),r.cl&&s.gr.setAttribute("class",r.cl),r.bm&&(s.gr.style["mix-blend-mode"]=getBlendMode(r.bm)),s},SVGShapeElement.prototype.createTransformElement=function(r,s){var a=TransformPropertyFactory.getTransformProperty(this,r,this),i=new SVGTransformData(a,a.o,s);return this.addToAnimatedContents(r,i),i},SVGShapeElement.prototype.createShapeElement=function(r,s,a){var i=4;r.ty==="rc"?i=5:r.ty==="el"?i=6:r.ty==="sr"&&(i=7);var o=ShapePropertyFactory.getShapeProp(this,r,i,this),x=new SVGShapeData(s,a,o);return this.shapes.push(x),this.addShapeToModifiers(x),this.addToAnimatedContents(r,x),x},SVGShapeElement.prototype.addToAnimatedContents=function(r,s){for(var a=0,i=this.animatedContents.length;a<i;){if(this.animatedContents[a].element===s)return;a+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(r),element:s,data:r})},SVGShapeElement.prototype.setElementStyles=function(r){var s=r.styles,a,i=this.stylesList.length;for(a=0;a<i;a+=1)this.stylesList[a].closed||s.push(this.stylesList[a])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var r,s=this.itemsData.length;for(r=0;r<s;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),s=this.dynamicProperties.length,r=0;r<s;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(r,s,a,i,o,x,y){var _=[].concat(x),E,R=r.length-1,S,j,T=[],A=[],M,P,L;for(E=R;E>=0;E-=1){if(L=this.searchProcessedElement(r[E]),L?s[E]=a[L-1]:r[E]._render=y,r[E].ty==="fl"||r[E].ty==="st"||r[E].ty==="gf"||r[E].ty==="gs"||r[E].ty==="no")L?s[E].style.closed=!1:s[E]=this.createStyleElement(r[E],o),r[E]._render&&s[E].style.pElem.parentNode!==i&&i.appendChild(s[E].style.pElem),T.push(s[E].style);else if(r[E].ty==="gr"){if(!L)s[E]=this.createGroupElement(r[E]);else for(j=s[E].it.length,S=0;S<j;S+=1)s[E].prevViewData[S]=s[E].it[S];this.searchShapes(r[E].it,s[E].it,s[E].prevViewData,s[E].gr,o+1,_,y),r[E]._render&&s[E].gr.parentNode!==i&&i.appendChild(s[E].gr)}else r[E].ty==="tr"?(L||(s[E]=this.createTransformElement(r[E],i)),M=s[E].transform,_.push(M)):r[E].ty==="sh"||r[E].ty==="rc"||r[E].ty==="el"||r[E].ty==="sr"?(L||(s[E]=this.createShapeElement(r[E],_,o)),this.setElementStyles(s[E])):r[E].ty==="tm"||r[E].ty==="rd"||r[E].ty==="ms"||r[E].ty==="pb"||r[E].ty==="zz"||r[E].ty==="op"?(L?(P=s[E],P.closed=!1):(P=ShapeModifiers.getModifier(r[E].ty),P.init(this,r[E]),s[E]=P,this.shapeModifiers.push(P)),A.push(P)):r[E].ty==="rp"&&(L?(P=s[E],P.closed=!0):(P=ShapeModifiers.getModifier(r[E].ty),s[E]=P,P.init(this,r,E,s),this.shapeModifiers.push(P),y=!1),A.push(P));this.addProcessedElement(r[E],E+1)}for(R=T.length,E=0;E<R;E+=1)T[E].closed=!0;for(R=A.length,E=0;E<R;E+=1)A[E].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var r,s=this.stylesList.length;for(r=0;r<s;r+=1)this.stylesList[r].reset();for(this.renderShape(),r=0;r<s;r+=1)(this.stylesList[r]._mdf||this._isFirstFrame)&&(this.stylesList[r].msElem&&(this.stylesList[r].msElem.setAttribute("d",this.stylesList[r].d),this.stylesList[r].d="M0 0"+this.stylesList[r].d),this.stylesList[r].pElem.setAttribute("d",this.stylesList[r].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var r,s=this.animatedContents.length,a;for(r=0;r<s;r+=1)a=this.animatedContents[r],(this._isFirstFrame||a.element._isAnimated)&&a.data!==!0&&a.fn(a.data,a.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(r,s,a,i,o,x){this.o=r,this.sw=s,this.sc=a,this.fc=i,this.m=o,this.p=x,this._mdf={o:!0,sw:!!s,sc:!!a,fc:!!i,m:!0,p:!0}}LetterProps.prototype.update=function(r,s,a,i,o,x){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var y=!1;return this.o!==r&&(this.o=r,this._mdf.o=!0,y=!0),this.sw!==s&&(this.sw=s,this._mdf.sw=!0,y=!0),this.sc!==a&&(this.sc=a,this._mdf.sc=!0,y=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,y=!0),this.m!==o&&(this.m=o,this._mdf.m=!0,y=!0),x.length&&(this.p[0]!==x[0]||this.p[1]!==x[1]||this.p[4]!==x[4]||this.p[5]!==x[5]||this.p[12]!==x[12]||this.p[13]!==x[13])&&(this.p=x,this._mdf.p=!0,y=!0),y};function TextProperty(r,s){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=s,this.elem=r,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a]);return r},TextProperty.prototype.setCurrentData=function(r){r.__complete||this.completeTextData(r),this.currentData=r,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(r){this.effectsSequence.push(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(r){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!r)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var s=this.currentData,a=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var i,o=this.effectsSequence.length,x=r||this.data.d.k[this.keysIndex].s;for(i=0;i<o;i+=1)a!==this.keysIndex?x=this.effectsSequence[i](x,x.t):x=this.effectsSequence[i](this.currentData,x.t);s!==x&&this.setCurrentData(x),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var r=this.data.d.k,s=this.elem.comp.renderedFrame,a=0,i=r.length;a<=i-1&&!(a===i-1||r[a+1].t>s);)a+=1;return this.keysIndex!==a&&(this.keysIndex=a),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(r){for(var s=[],a=0,i=r.length,o,x,y=!1;a<i;)o=r.charCodeAt(a),FontManager.isCombinedCharacter(o)?s[s.length-1]+=r.charAt(a):o>=55296&&o<=56319?(x=r.charCodeAt(a+1),x>=56320&&x<=57343?(y||FontManager.isModifier(o,x)?(s[s.length-1]+=r.substr(a,2),y=!1):s.push(r.substr(a,2)),a+=1):s.push(r.charAt(a))):o>56319?(x=r.charCodeAt(a+1),FontManager.isZeroWidthJoiner(o,x)?(y=!0,s[s.length-1]+=r.substr(a,2),a+=1):s.push(r.charAt(a))):FontManager.isZeroWidthJoiner(o)?(s[s.length-1]+=r.charAt(a),y=!0):s.push(r.charAt(a)),a+=1;return s},TextProperty.prototype.completeTextData=function(r){r.__complete=!0;var s=this.elem.globalData.fontManager,a=this.data,i=[],o,x,y,_=0,E,R=a.m.g,S=0,j=0,T=0,A=[],M=0,P=0,L,D,O=s.getFontByName(r.f),B,N=0,F=getFontProperties(O);r.fWeight=F.weight,r.fStyle=F.style,r.finalSize=r.s,r.finalText=this.buildFinalText(r.t),x=r.finalText.length,r.finalLineHeight=r.lh;var W=r.tr/1e3*r.finalSize,V;if(r.sz)for(var U=!0,G=r.sz[0],oe=r.sz[1],X,ee;U;){ee=this.buildFinalText(r.t),X=0,M=0,x=ee.length,W=r.tr/1e3*r.finalSize;var ae=-1;for(o=0;o<x;o+=1)V=ee[o].charCodeAt(0),y=!1,ee[o]===" "?ae=o:(V===13||V===3)&&(M=0,y=!0,X+=r.finalLineHeight||r.finalSize*1.2),s.chars?(B=s.getCharData(ee[o],O.fStyle,O.fFamily),N=y?0:B.w*r.finalSize/100):N=s.measureText(ee[o],r.f,r.finalSize),M+N>G&&ee[o]!==" "?(ae===-1?x+=1:o=ae,X+=r.finalLineHeight||r.finalSize*1.2,ee.splice(o,ae===o?1:0,"\r"),ae=-1,M=0):(M+=N,M+=W);X+=O.ascent*r.finalSize/100,this.canResize&&r.finalSize>this.minimumFontSize&&oe<X?(r.finalSize-=1,r.finalLineHeight=r.finalSize*r.lh/r.s):(r.finalText=ee,x=r.finalText.length,U=!1)}M=-W,N=0;var ie=0,se;for(o=0;o<x;o+=1)if(y=!1,se=r.finalText[o],V=se.charCodeAt(0),V===13||V===3?(ie=0,A.push(M),P=M>P?M:P,M=-2*W,E="",y=!0,T+=1):E=se,s.chars?(B=s.getCharData(se,O.fStyle,s.getFontByName(r.f).fFamily),N=y?0:B.w*r.finalSize/100):N=s.measureText(E,r.f,r.finalSize),se===" "?ie+=N+W:(M+=N+W+ie,ie=0),i.push({l:N,an:N,add:S,n:y,anIndexes:[],val:E,line:T,animatorJustifyOffset:0}),R==2){if(S+=N,E===""||E===" "||o===x-1){for((E===""||E===" ")&&(S-=N);j<=o;)i[j].an=S,i[j].ind=_,i[j].extra=N,j+=1;_+=1,S=0}}else if(R==3){if(S+=N,E===""||o===x-1){for(E===""&&(S-=N);j<=o;)i[j].an=S,i[j].ind=_,i[j].extra=N,j+=1;S=0,_+=1}}else i[_].ind=_,i[_].extra=0,_+=1;if(r.l=i,P=M>P?M:P,A.push(M),r.sz)r.boxWidth=r.sz[0],r.justifyOffset=0;else switch(r.boxWidth=P,r.j){case 1:r.justifyOffset=-r.boxWidth;break;case 2:r.justifyOffset=-r.boxWidth/2;break;default:r.justifyOffset=0}r.lineWidths=A;var Q=a.a,Z,J;D=Q.length;var te,de,ce=[];for(L=0;L<D;L+=1){for(Z=Q[L],Z.a.sc&&(r.strokeColorAnim=!0),Z.a.sw&&(r.strokeWidthAnim=!0),(Z.a.fc||Z.a.fh||Z.a.fs||Z.a.fb)&&(r.fillColorAnim=!0),de=0,te=Z.s.b,o=0;o<x;o+=1)J=i[o],J.anIndexes[L]=de,(te==1&&J.val!==""||te==2&&J.val!==""&&J.val!==" "||te==3&&(J.n||J.val==" "||o==x-1)||te==4&&(J.n||o==x-1))&&(Z.s.rn===1&&ce.push(de),de+=1);a.a[L].s.totalChars=de;var me=-1,ve;if(Z.s.rn===1)for(o=0;o<x;o+=1)J=i[o],me!=J.anIndexes[L]&&(me=J.anIndexes[L],ve=ce.splice(Math.floor(Math.random()*ce.length),1)[0]),J.anIndexes[L]=ve}r.yOffset=r.finalLineHeight||r.finalSize*1.2,r.ls=r.ls||0,r.ascent=O.ascent*r.finalSize/100},TextProperty.prototype.updateDocumentData=function(r,s){s=s===void 0?this.keysIndex:s;var a=this.copyData({},this.data.d.k[s].s);a=this.copyData(a,r),this.data.d.k[s].s=a,this.recalculate(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(r){var s=this.data.d.k[r].s;s.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(s)},TextProperty.prototype.canResizeFont=function(r){this.canResize=r,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(r){this.minimumFontSize=Math.floor(r)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var r=Math.max,s=Math.min,a=Math.floor;function i(x,y){this._currentTextLength=-1,this.k=!1,this.data=y,this.elem=x,this.comp=x.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(x),this.s=PropertyFactory.getProp(x,y.s||{k:0},0,0,this),"e"in y?this.e=PropertyFactory.getProp(x,y.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(x,y.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(x,y.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(x,y.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(x,y.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(x,y.a,0,.01,this),this.dynamicProperties.length||this.getValue()}i.prototype={getMult:function(y){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var _=0,E=0,R=1,S=1;this.ne.v>0?_=this.ne.v/100:E=-this.ne.v/100,this.xe.v>0?R=1-this.xe.v/100:S=1+this.xe.v/100;var j=BezierFactory.getBezierEasing(_,E,R,S).get,T=0,A=this.finalS,M=this.finalE,P=this.data.sh;if(P===2)M===A?T=y>=M?1:0:T=r(0,s(.5/(M-A)+(y-A)/(M-A),1)),T=j(T);else if(P===3)M===A?T=y>=M?0:1:T=1-r(0,s(.5/(M-A)+(y-A)/(M-A),1)),T=j(T);else if(P===4)M===A?T=0:(T=r(0,s(.5/(M-A)+(y-A)/(M-A),1)),T<.5?T*=2:T=1-2*(T-.5)),T=j(T);else if(P===5){if(M===A)T=0;else{var L=M-A;y=s(r(0,y+.5-A),M-A);var D=-L/2+y,O=L/2;T=Math.sqrt(1-D*D/(O*O))}T=j(T)}else P===6?(M===A?T=0:(y=s(r(0,y+.5-A),M-A),T=(1+Math.cos(Math.PI+Math.PI*2*y/(M-A)))/2),T=j(T)):(y>=a(A)&&(y-A<0?T=r(0,s(s(M,1)-(A-y),1)):T=r(0,s(M-y,1))),T=j(T));if(this.sm.v!==100){var B=this.sm.v*.01;B===0&&(B=1e-8);var N=.5-B*.5;T<N?T=0:(T=(T-N)/B,T>1&&(T=1))}return T*this.a.v},getValue:function(y){this.iterateDynamicProperties(),this._mdf=y||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,y&&this.data.r===2&&(this.e.v=this._currentTextLength);var _=this.data.r===2?1:100/this.data.totalChars,E=this.o.v/_,R=this.s.v/_+E,S=this.e.v/_+E;if(R>S){var j=R;R=S,S=j}this.finalS=R,this.finalE=S}},extendPrototype([DynamicPropertyContainer],i);function o(x,y,_){return new i(x,y)}return{getTextSelectorProp:o}}();function TextAnimatorDataProperty(r,s,a){var i={propType:!1},o=PropertyFactory.getProp,x=s.a;this.a={r:x.r?o(r,x.r,0,degToRads,a):i,rx:x.rx?o(r,x.rx,0,degToRads,a):i,ry:x.ry?o(r,x.ry,0,degToRads,a):i,sk:x.sk?o(r,x.sk,0,degToRads,a):i,sa:x.sa?o(r,x.sa,0,degToRads,a):i,s:x.s?o(r,x.s,1,.01,a):i,a:x.a?o(r,x.a,1,0,a):i,o:x.o?o(r,x.o,0,.01,a):i,p:x.p?o(r,x.p,1,0,a):i,sw:x.sw?o(r,x.sw,0,0,a):i,sc:x.sc?o(r,x.sc,1,0,a):i,fc:x.fc?o(r,x.fc,1,0,a):i,fh:x.fh?o(r,x.fh,0,0,a):i,fs:x.fs?o(r,x.fs,0,.01,a):i,fb:x.fb?o(r,x.fb,0,.01,a):i,t:x.t?o(r,x.t,0,0,a):i},this.s=TextSelectorProp.getTextSelectorProp(r,s.s,a),this.s.t=s.s.t}function TextAnimatorProperty(r,s,a){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=r,this._renderType=s,this._elem=a,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(a)}TextAnimatorProperty.prototype.searchProperties=function(){var r,s=this._textData.a.length,a,i=PropertyFactory.getProp;for(r=0;r<s;r+=1)a=this._textData.a[r],this._animatorsData[r]=new TextAnimatorDataProperty(this._elem,a,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(r,s){if(this.lettersChangedFlag=s,!(!this._mdf&&!this._isFirstFrame&&!s&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var a=this._moreOptions.alignment.v,i=this._animatorsData,o=this._textData,x=this.mHelper,y=this._renderType,_=this.renderedLetters.length,E,R,S,j,T=r.l,A,M,P,L,D,O,B,N,F,W,V,U,G,oe,X;if(this._hasMaskedPath){if(X=this._pathData.m,!this._pathData.n||this._pathData._mdf){var ee=X.v;this._pathData.r.v&&(ee=ee.reverse()),A={tLength:0,segments:[]},j=ee._length-1;var ae;for(U=0,S=0;S<j;S+=1)ae=bez.buildBezierData(ee.v[S],ee.v[S+1],[ee.o[S][0]-ee.v[S][0],ee.o[S][1]-ee.v[S][1]],[ee.i[S+1][0]-ee.v[S+1][0],ee.i[S+1][1]-ee.v[S+1][1]]),A.tLength+=ae.segmentLength,A.segments.push(ae),U+=ae.segmentLength;S=j,X.v.c&&(ae=bez.buildBezierData(ee.v[S],ee.v[0],[ee.o[S][0]-ee.v[S][0],ee.o[S][1]-ee.v[S][1]],[ee.i[0][0]-ee.v[0][0],ee.i[0][1]-ee.v[0][1]]),A.tLength+=ae.segmentLength,A.segments.push(ae),U+=ae.segmentLength),this._pathData.pi=A}if(A=this._pathData.pi,M=this._pathData.f.v,B=0,O=1,L=0,D=!0,W=A.segments,M<0&&X.v.c)for(A.tLength<Math.abs(M)&&(M=-Math.abs(M)%A.tLength),B=W.length-1,F=W[B].points,O=F.length-1;M<0;)M+=F[O].partialLength,O-=1,O<0&&(B-=1,F=W[B].points,O=F.length-1);F=W[B].points,N=F[O-1],P=F[O],V=P.partialLength}j=T.length,E=0,R=0;var ie=r.finalSize*1.2*.714,se=!0,Q,Z,J,te,de;te=i.length;var ce,me=-1,ve,xe,ge,be=M,ye=B,Ie=O,Pe=-1,we,Re,Se,Ee,Ce,he,Ae,Ne,Be="",Oe=this.defaultPropsArray,Ue;if(r.j===2||r.j===1){var Ve=0,We=0,Te=r.j===2?-.5:-1,De=0,Le=!0;for(S=0;S<j;S+=1)if(T[S].n){for(Ve&&(Ve+=We);De<S;)T[De].animatorJustifyOffset=Ve,De+=1;Ve=0,Le=!0}else{for(J=0;J<te;J+=1)Q=i[J].a,Q.t.propType&&(Le&&r.j===2&&(We+=Q.t.v*Te),Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),ce.length?Ve+=Q.t.v*ce[0]*Te:Ve+=Q.t.v*ce*Te);Le=!1}for(Ve&&(Ve+=We);De<S;)T[De].animatorJustifyOffset=Ve,De+=1}for(S=0;S<j;S+=1){if(x.reset(),we=1,T[S].n)E=0,R+=r.yOffset,R+=se?1:0,M=be,se=!1,this._hasMaskedPath&&(B=ye,O=Ie,F=W[B].points,N=F[O-1],P=F[O],V=P.partialLength,L=0),Be="",Ne="",he="",Ue="",Oe=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Pe!==T[S].line){switch(r.j){case 1:M+=U-r.lineWidths[T[S].line];break;case 2:M+=(U-r.lineWidths[T[S].line])/2;break}Pe=T[S].line}me!==T[S].ind&&(T[me]&&(M+=T[me].extra),M+=T[S].an/2,me=T[S].ind),M+=a[0]*T[S].an*.005;var Fe=0;for(J=0;J<te;J+=1)Q=i[J].a,Q.p.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),ce.length?Fe+=Q.p.v[0]*ce[0]:Fe+=Q.p.v[0]*ce),Q.a.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),ce.length?Fe+=Q.a.v[0]*ce[0]:Fe+=Q.a.v[0]*ce);for(D=!0,this._pathData.a.v&&(M=T[0].an*.5+(U-this._pathData.f.v-T[0].an*.5-T[T.length-1].an*.5)*me/(j-1),M+=this._pathData.f.v);D;)L+V>=M+Fe||!F?(G=(M+Fe-L)/P.partialLength,xe=N.point[0]+(P.point[0]-N.point[0])*G,ge=N.point[1]+(P.point[1]-N.point[1])*G,x.translate(-a[0]*T[S].an*.005,-(a[1]*ie)*.01),D=!1):F&&(L+=P.partialLength,O+=1,O>=F.length&&(O=0,B+=1,W[B]?F=W[B].points:X.v.c?(O=0,B=0,F=W[B].points):(L-=P.partialLength,F=null)),F&&(N=P,P=F[O],V=P.partialLength));ve=T[S].an/2-T[S].add,x.translate(-ve,0,0)}else ve=T[S].an/2-T[S].add,x.translate(-ve,0,0),x.translate(-a[0]*T[S].an*.005,-a[1]*ie*.01,0);for(J=0;J<te;J+=1)Q=i[J].a,Q.t.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),(E!==0||r.j!==0)&&(this._hasMaskedPath?ce.length?M+=Q.t.v*ce[0]:M+=Q.t.v*ce:ce.length?E+=Q.t.v*ce[0]:E+=Q.t.v*ce));for(r.strokeWidthAnim&&(Se=r.sw||0),r.strokeColorAnim&&(r.sc?Re=[r.sc[0],r.sc[1],r.sc[2]]:Re=[0,0,0]),r.fillColorAnim&&r.fc&&(Ee=[r.fc[0],r.fc[1],r.fc[2]]),J=0;J<te;J+=1)Q=i[J].a,Q.a.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),ce.length?x.translate(-Q.a.v[0]*ce[0],-Q.a.v[1]*ce[1],Q.a.v[2]*ce[2]):x.translate(-Q.a.v[0]*ce,-Q.a.v[1]*ce,Q.a.v[2]*ce));for(J=0;J<te;J+=1)Q=i[J].a,Q.s.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),ce.length?x.scale(1+(Q.s.v[0]-1)*ce[0],1+(Q.s.v[1]-1)*ce[1],1):x.scale(1+(Q.s.v[0]-1)*ce,1+(Q.s.v[1]-1)*ce,1));for(J=0;J<te;J+=1){if(Q=i[J].a,Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),Q.sk.propType&&(ce.length?x.skewFromAxis(-Q.sk.v*ce[0],Q.sa.v*ce[1]):x.skewFromAxis(-Q.sk.v*ce,Q.sa.v*ce)),Q.r.propType&&(ce.length?x.rotateZ(-Q.r.v*ce[2]):x.rotateZ(-Q.r.v*ce)),Q.ry.propType&&(ce.length?x.rotateY(Q.ry.v*ce[1]):x.rotateY(Q.ry.v*ce)),Q.rx.propType&&(ce.length?x.rotateX(Q.rx.v*ce[0]):x.rotateX(Q.rx.v*ce)),Q.o.propType&&(ce.length?we+=(Q.o.v*ce[0]-we)*ce[0]:we+=(Q.o.v*ce-we)*ce),r.strokeWidthAnim&&Q.sw.propType&&(ce.length?Se+=Q.sw.v*ce[0]:Se+=Q.sw.v*ce),r.strokeColorAnim&&Q.sc.propType)for(Ce=0;Ce<3;Ce+=1)ce.length?Re[Ce]+=(Q.sc.v[Ce]-Re[Ce])*ce[0]:Re[Ce]+=(Q.sc.v[Ce]-Re[Ce])*ce;if(r.fillColorAnim&&r.fc){if(Q.fc.propType)for(Ce=0;Ce<3;Ce+=1)ce.length?Ee[Ce]+=(Q.fc.v[Ce]-Ee[Ce])*ce[0]:Ee[Ce]+=(Q.fc.v[Ce]-Ee[Ce])*ce;Q.fh.propType&&(ce.length?Ee=addHueToRGB(Ee,Q.fh.v*ce[0]):Ee=addHueToRGB(Ee,Q.fh.v*ce)),Q.fs.propType&&(ce.length?Ee=addSaturationToRGB(Ee,Q.fs.v*ce[0]):Ee=addSaturationToRGB(Ee,Q.fs.v*ce)),Q.fb.propType&&(ce.length?Ee=addBrightnessToRGB(Ee,Q.fb.v*ce[0]):Ee=addBrightnessToRGB(Ee,Q.fb.v*ce))}}for(J=0;J<te;J+=1)Q=i[J].a,Q.p.propType&&(Z=i[J].s,ce=Z.getMult(T[S].anIndexes[J],o.a[J].s.totalChars),this._hasMaskedPath?ce.length?x.translate(0,Q.p.v[1]*ce[0],-Q.p.v[2]*ce[1]):x.translate(0,Q.p.v[1]*ce,-Q.p.v[2]*ce):ce.length?x.translate(Q.p.v[0]*ce[0],Q.p.v[1]*ce[1],-Q.p.v[2]*ce[2]):x.translate(Q.p.v[0]*ce,Q.p.v[1]*ce,-Q.p.v[2]*ce));if(r.strokeWidthAnim&&(he=Se<0?0:Se),r.strokeColorAnim&&(Ae="rgb("+Math.round(Re[0]*255)+","+Math.round(Re[1]*255)+","+Math.round(Re[2]*255)+")"),r.fillColorAnim&&r.fc&&(Ne="rgb("+Math.round(Ee[0]*255)+","+Math.round(Ee[1]*255)+","+Math.round(Ee[2]*255)+")"),this._hasMaskedPath){if(x.translate(0,-r.ls),x.translate(0,a[1]*ie*.01+R,0),this._pathData.p.v){oe=(P.point[1]-N.point[1])/(P.point[0]-N.point[0]);var Ke=Math.atan(oe)*180/Math.PI;P.point[0]<N.point[0]&&(Ke+=180),x.rotate(-Ke*Math.PI/180)}x.translate(xe,ge,0),M-=a[0]*T[S].an*.005,T[S+1]&&me!==T[S+1].ind&&(M+=T[S].an/2,M+=r.tr*.001*r.finalSize)}else{switch(x.translate(E,R,0),r.ps&&x.translate(r.ps[0],r.ps[1]+r.ascent,0),r.j){case 1:x.translate(T[S].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[T[S].line]),0,0);break;case 2:x.translate(T[S].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[T[S].line])/2,0,0);break}x.translate(0,-r.ls),x.translate(ve,0,0),x.translate(a[0]*T[S].an*.005,a[1]*ie*.01,0),E+=T[S].l+r.tr*.001*r.finalSize}y==="html"?Be=x.toCSS():y==="svg"?Be=x.to2dCSS():Oe=[x.props[0],x.props[1],x.props[2],x.props[3],x.props[4],x.props[5],x.props[6],x.props[7],x.props[8],x.props[9],x.props[10],x.props[11],x.props[12],x.props[13],x.props[14],x.props[15]],Ue=we}_<=S?(de=new LetterProps(Ue,he,Ae,Ne,Be,Oe),this.renderedLetters.push(de),_+=1,this.lettersChangedFlag=!0):(de=this.renderedLetters[S],this.lettersChangedFlag=de.update(Ue,he,Ae,Ne,Be,Oe)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(r,s,a){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(r,s,a),this.textProperty=new TextProperty(this,r.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(r.t,this.renderType,this),this.initTransform(r,s,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(r,s){var a,i=s.length,o,x="";for(a=0;a<i;a+=1)s[a].ty==="sh"&&(o=s[a].ks.k,x+=buildShapeString(o,o.i.length,!0,r));return x},ITextElement.prototype.updateDocumentData=function(r,s){this.textProperty.updateDocumentData(r,s)},ITextElement.prototype.canResizeFont=function(r){this.textProperty.canResizeFont(r)},ITextElement.prototype.setMinimumFontSize=function(r){this.textProperty.setMinimumFontSize(r)},ITextElement.prototype.applyTextPropertiesToMatrix=function(r,s,a,i,o){switch(r.ps&&s.translate(r.ps[0],r.ps[1]+r.ascent,0),s.translate(0,-r.ls,0),r.j){case 1:s.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[a]),0,0);break;case 2:s.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[a])/2,0,0);break}s.translate(i,o,0)},ITextElement.prototype.buildColor=function(r){return"rgb("+Math.round(r[0]*255)+","+Math.round(r[1]*255)+","+Math.round(r[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(r,s,a){this.textSpans=[],this.renderType="svg",this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(r){for(var s=0,a=r.length,i=[],o="";s<a;)r[s]==="\r"||r[s]===""?(i.push(o),o=""):o+=r[s],s+=1;return i.push(o),i},SVGTextLottieElement.prototype.buildShapeData=function(r,s){if(r.shapes&&r.shapes.length){var a=r.shapes[0];if(a.it){var i=a.it[a.it.length-1];i.s&&(i.s.k[0]=s,i.s.k[1]=s)}}return r},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var r,s,a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a?a.l.length:0),a.fc?this.layerElement.setAttribute("fill",this.buildColor(a.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),a.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(a.sc)),this.layerElement.setAttribute("stroke-width",a.sw)),this.layerElement.setAttribute("font-size",a.finalSize);var i=this.globalData.fontManager.getFontByName(a.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var o=a.fWeight,x=a.fStyle;this.layerElement.setAttribute("font-style",x),this.layerElement.setAttribute("font-weight",o)}this.layerElement.setAttribute("aria-label",a.t);var y=a.l||[],_=!!this.globalData.fontManager.chars;s=y.length;var E,R=this.mHelper,S="",j=this.data.singleShape,T=0,A=0,M=!0,P=a.tr*.001*a.finalSize;if(j&&!_&&!a.sz){var L=this.textContainer,D="start";switch(a.j){case 1:D="end";break;case 2:D="middle";break;default:D="start";break}L.setAttribute("text-anchor",D),L.setAttribute("letter-spacing",P);var O=this.buildTextContents(a.finalText);for(s=O.length,A=a.ps?a.ps[1]+a.ascent:0,r=0;r<s;r+=1)E=this.textSpans[r].span||createNS("tspan"),E.textContent=O[r],E.setAttribute("x",0),E.setAttribute("y",A),E.style.display="inherit",L.appendChild(E),this.textSpans[r]||(this.textSpans[r]={span:null,glyph:null}),this.textSpans[r].span=E,A+=a.finalLineHeight;this.layerElement.appendChild(L)}else{var B=this.textSpans.length,N;for(r=0;r<s;r+=1){if(this.textSpans[r]||(this.textSpans[r]={span:null,childSpan:null,glyph:null}),!_||!j||r===0){if(E=B>r?this.textSpans[r].span:createNS(_?"g":"text"),B<=r){if(E.setAttribute("stroke-linecap","butt"),E.setAttribute("stroke-linejoin","round"),E.setAttribute("stroke-miterlimit","4"),this.textSpans[r].span=E,_){var F=createNS("g");E.appendChild(F),this.textSpans[r].childSpan=F}this.textSpans[r].span=E,this.layerElement.appendChild(E)}E.style.display="inherit"}if(R.reset(),j&&(y[r].n&&(T=-P,A+=a.yOffset,A+=M?1:0,M=!1),this.applyTextPropertiesToMatrix(a,R,y[r].line,T,A),T+=y[r].l||0,T+=P),_){N=this.globalData.fontManager.getCharData(a.finalText[r],i.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily);var W;if(N.t===1)W=new SVGCompElement(N.data,this.globalData,this);else{var V=emptyShapeData;N.data&&N.data.shapes&&(V=this.buildShapeData(N.data,a.finalSize)),W=new SVGShapeElement(V,this.globalData,this)}if(this.textSpans[r].glyph){var U=this.textSpans[r].glyph;this.textSpans[r].childSpan.removeChild(U.layerElement),U.destroy()}this.textSpans[r].glyph=W,W._debug=!0,W.prepareFrame(0),W.renderFrame(),this.textSpans[r].childSpan.appendChild(W.layerElement),N.t===1&&this.textSpans[r].childSpan.setAttribute("transform","scale("+a.finalSize/100+","+a.finalSize/100+")")}else j&&E.setAttribute("transform","translate("+R.props[12]+","+R.props[13]+")"),E.textContent=y[r].val,E.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}j&&E&&E.setAttribute("d",S)}for(;r<this.textSpans.length;)this.textSpans[r].span.style.display="none",r+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var r=this.layerElement.getBBox();this.bbox={top:r.y,left:r.x,width:r.width,height:r.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var r,s=this.textSpans.length,a;for(this.renderedFrame=this.comp.renderedFrame,r=0;r<s;r+=1)a=this.textSpans[r].glyph,a&&(a.prepareFrame(this.comp.renderedFrame-this.data.st),a._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var r,s,a=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l;s=i.length;var o,x,y;for(r=0;r<s;r+=1)i[r].n||(o=a[r],x=this.textSpans[r].span,y=this.textSpans[r].glyph,y&&y.renderFrame(),o._mdf.m&&x.setAttribute("transform",o.m),o._mdf.o&&x.setAttribute("opacity",o.o),o._mdf.sw&&x.setAttribute("stroke-width",o.sw),o._mdf.sc&&x.setAttribute("stroke",o.sc),o._mdf.fc&&x.setAttribute("fill",o.fc))}};function ISolidElement(r,s,a){this.initElement(r,s,a)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var r=createNS("rect");r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.layerElement.appendChild(r)};function NullElement(r,s,a){this.initFrame(),this.initBaseData(r,s,a),this.initFrame(),this.initTransform(r,s,a),this.initHierarchy()}NullElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(r){return new NullElement(r,this.globalData,this)},SVGRendererBase.prototype.createShape=function(r){return new SVGShapeElement(r,this.globalData,this)},SVGRendererBase.prototype.createText=function(r){return new SVGTextLottieElement(r,this.globalData,this)},SVGRendererBase.prototype.createImage=function(r){return new IImageElement(r,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(r){return new ISolidElement(r,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(r){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+r.w+" "+r.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",r.w),this.svgElement.setAttribute("height",r.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var s=this.globalData.defs;this.setupGlobalData(r,s),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=r;var a=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",r.w),i.setAttribute("height",r.h),i.setAttribute("x",0),i.setAttribute("y",0);var o=createElementID();a.setAttribute("id",o),a.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),s.appendChild(a),this.layers=r.layers,this.elements=createSizedArray(r.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var r,s=this.layers?this.layers.length:0;for(r=0;r<s;r+=1)this.elements[r]&&this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(r){var s=0,a=this.layers.length;for(s=0;s<a;s+=1)if(this.layers[s].ind===r)return s;return-1},SVGRendererBase.prototype.buildItem=function(r){var s=this.elements;if(!(s[r]||this.layers[r].ty===99)){s[r]=!0;var a=this.createItem(this.layers[r]);if(s[r]=a,getExpressionsPlugin()&&(this.layers[r].ty===0&&this.globalData.projectInterface.registerComposition(a),a.initExpressions()),this.appendElementInPos(a,r),this.layers[r].tt){var i="tp"in this.layers[r]?this.findIndexByInd(this.layers[r].tp):r-1;if(i===-1)return;if(!this.elements[i]||this.elements[i]===!0)this.buildItem(i),this.addPendingElement(a);else{var o=s[i],x=o.getMatte(this.layers[r].tt);a.setMatte(x)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();if(r.checkParenting(),r.data.tt)for(var s=0,a=this.elements.length;s<a;){if(this.elements[s]===r){var i="tp"in r.data?this.findIndexByInd(r.data.tp):s-1,o=this.elements[i],x=o.getMatte(this.layers[s].tt);r.setMatte(x);break}s+=1}}},SVGRendererBase.prototype.renderFrame=function(r){if(!(this.renderedFrame===r||this.destroyed)){r===null?r=this.renderedFrame:this.renderedFrame=r,this.globalData.frameNum=r,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=r,this.globalData._mdf=!1;var s,a=this.layers.length;for(this.completeLayers||this.checkLayers(r),s=a-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(r-this.layers[s].st);if(this.globalData._mdf)for(s=0;s<a;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(r,s){var a=r.getBaseElement();if(a){for(var i=0,o;i<s;)this.elements[i]&&this.elements[i]!==!0&&this.elements[i].getBaseElement()&&(o=this.elements[i].getBaseElement()),i+=1;o?this.layerElement.insertBefore(a,o):this.layerElement.appendChild(a)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(r,s,a){this.initFrame(),this.initBaseData(r,s,a),this.initTransform(r,s,a),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!s.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(r){if(this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=r/this.data.sr;else{var s=this.tm.v;s===this.data.op&&(s=this.data.op-1),this.renderedFrame=s}var a,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),a=i-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&(this.elements[a].prepareFrame(this.renderedFrame-this.layers[a].st),this.elements[a]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var r,s=this.layers.length;for(r=0;r<s;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},ICompElement.prototype.setElements=function(r){this.elements=r},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var r,s=this.layers.length;for(r=0;r<s;r+=1)this.elements[r]&&this.elements[r].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(r,s,a){this.layers=r.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,s,a),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,s.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)};function SVGRenderer(r,s){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var a="";if(s&&s.title){var i=createNS("title"),o=createElementID();i.setAttribute("id",o),i.textContent=s.title,this.svgElement.appendChild(i),a+=o}if(s&&s.description){var x=createNS("desc"),y=createElementID();x.setAttribute("id",y),x.textContent=s.description,this.svgElement.appendChild(x),a+=" "+y}a&&this.svgElement.setAttribute("aria-labelledby",a);var _=createNS("defs");this.svgElement.appendChild(_);var E=createNS("g");this.svgElement.appendChild(E),this.layerElement=E,this.renderConfig={preserveAspectRatio:s&&s.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:s&&s.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:s&&s.contentVisibility||"visible",progressiveLoad:s&&s.progressiveLoad||!1,hideOnTransparent:!(s&&s.hideOnTransparent===!1),viewBoxOnly:s&&s.viewBoxOnly||!1,viewBoxSize:s&&s.viewBoxSize||!1,className:s&&s.className||"",id:s&&s.id||"",focusable:s&&s.focusable,filterSize:{width:s&&s.filterSize&&s.filterSize.width||"100%",height:s&&s.filterSize&&s.filterSize.height||"100%",x:s&&s.filterSize&&s.filterSize.x||"0%",y:s&&s.filterSize&&s.filterSize.y||"0%"},width:s&&s.width,height:s&&s.height,runExpressions:!s||s.runExpressions===void 0||s.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:_,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var r,s=15;for(this.savedOp=createTypedArray("float32",s),r=0;r<s;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=s}CVContextData.prototype.duplicate=function(){var r=this._length*2,s=this.savedOp;this.savedOp=createTypedArray("float32",r),this.savedOp.set(s);var a=0;for(a=this._length;a<r;a+=1)this.saved[a]=createTypedArray("float32",16);this._length=r},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var r=this.saved[this.cArrPos],s,a=this.cTr.props;for(s=0;s<16;s+=1)a[s]=r[s];return r},CVContextData.prototype.popOpacity=function(){var r=this.savedOp[this.cArrPos];return this.cO=r,r},CVContextData.prototype.pop=function(){this.cArrPos-=1;var r=this.popTransform(),s=this.popOpacity();return{transform:r,opacity:s}},CVContextData.prototype.push=function(){var r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s,a=this.saved[this.cArrPos];for(s=0;s<16;s+=1)a[s]=r[s];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(r){this.cO=r};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(s){var a,i=s.length,o="_";for(a=0;a<i;a+=1)o+=s[a].transform.key+"_";var x=this.sequences[o];return x||(x={transforms:[].concat(s),finalTransform:new Matrix,_mdf:!1},this.sequences[o]=x,this.sequenceList.push(x)),x},processSequence:function(s,a){for(var i=0,o=s.transforms.length,x=a;i<o&&!a;){if(s.transforms[i].transform.mProps._mdf){x=!0;break}i+=1}if(x){var y;for(s.finalTransform.reset(),i=o-1;i>=0;i-=1)y=s.transforms[i].transform.mProps.v.props,s.finalTransform.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15])}s._mdf=x},processSequences:function(s){var a,i=this.sequenceList.length;for(a=0;a<i;a+=1)this.processSequence(this.sequenceList[a],s)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var s="__lottie_element_luma_buffer",a=null,i=null,o=null;function x(){var E=createNS("svg"),R=createNS("filter"),S=createNS("feColorMatrix");return R.setAttribute("id",s),S.setAttribute("type","matrix"),S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),R.appendChild(S),E.appendChild(R),E.setAttribute("id",s+"_svg"),featureSupport.svgLumaHidden&&(E.style.display="none"),E}function y(){a||(o=x(),document.body.appendChild(o),a=createTag("canvas"),i=a.getContext("2d"),i.filter="url(#"+s+")",i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1))}function _(E){return a||y(),a.width=E.width,a.height=E.height,i.filter="url(#"+s+")",a}return{load:y,get:_}};function createCanvas(r,s){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(r,s);var a=createTag("canvas");return a.width=r,a.height=s,a}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}();function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function CVMaskElement(r,s){this.data=r,this.element=s,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var a,i=this.masksProperties.length,o=!1;for(a=0;a<i;a+=1)this.masksProperties[a].mode!=="n"&&(o=!0),this.viewData[a]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[a],3);this.hasMasks=o,o&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var r=this.element.finalTransform.mat,s=this.element.canvasContext,a,i=this.masksProperties.length,o,x,y;for(s.beginPath(),a=0;a<i;a+=1)if(this.masksProperties[a].mode!=="n"){this.masksProperties[a].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),y=this.viewData[a].v,o=r.applyToPointArray(y.v[0][0],y.v[0][1],0),s.moveTo(o[0],o[1]);var _,E=y._length;for(_=1;_<E;_+=1)x=r.applyToTriplePoints(y.o[_-1],y.i[_],y.v[_]),s.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);x=r.applyToTriplePoints(y.o[_-1],y.i[0],y.v[0]),s.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var s=this.globalData.canvasContext,a=assetLoader.createCanvas(s.canvas.width,s.canvas.height);this.buffers.push(a);var i=assetLoader.createCanvas(s.canvas.width,s.canvas.height);this.buffers.push(i),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects},createContent:function(){},setBlendMode:function(){var s=this.globalData;if(s.blendMode!==this.data.bm){s.blendMode=this.data.bm;var a=getBlendMode(this.data.bm);s.canvasContext.globalCompositeOperation=a}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(s){s.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var s=this.buffers[0],a=s.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var s=this.buffers[1],a=s.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var i=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(i.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var o=assetLoader.getLumaCanvas(this.canvasContext.canvas),x=o.getContext("2d");x.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(o,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(s,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(s){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!s)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var a=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(a),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(a),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(r,s,a,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var o=4;s.ty==="rc"?o=5:s.ty==="el"?o=6:s.ty==="sr"&&(o=7),this.sh=ShapePropertyFactory.getShapeProp(r,s,o,r);var x,y=a.length,_;for(x=0;x<y;x+=1)a[x].closed||(_={transforms:i.addTransformSequence(a[x].transforms),trNodes:[]},this.styledShapes.push(_),a[x].elements.push(_))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(r,s,a){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(r,s){var a={data:r,type:r.ty,preTransforms:this.transformsManager.addTransformSequence(s),transforms:[],elements:[],closed:r.hd===!0},i={};if(r.ty==="fl"||r.ty==="st"?(i.c=PropertyFactory.getProp(this,r.c,1,255,this),i.c.k||(a.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):(r.ty==="gf"||r.ty==="gs")&&(i.s=PropertyFactory.getProp(this,r.s,1,null,this),i.e=PropertyFactory.getProp(this,r.e,1,null,this),i.h=PropertyFactory.getProp(this,r.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,r.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,r.g,this)),i.o=PropertyFactory.getProp(this,r.o,0,.01,this),r.ty==="st"||r.ty==="gs"){if(a.lc=lineCapEnum[r.lc||2],a.lj=lineJoinEnum[r.lj||2],r.lj==1&&(a.ml=r.ml),i.w=PropertyFactory.getProp(this,r.w,0,null,this),i.w.k||(a.wi=i.w.v),r.d){var o=new DashProperty(this,r.d,"canvas",this);i.d=o,i.d.k||(a.da=i.d.dashArray,a.do=i.d.dashoffset[0])}}else a.r=r.r===2?"evenodd":"nonzero";return this.stylesList.push(a),i.style=a,i},CVShapeElement.prototype.createGroupElement=function(){var r={it:[],prevViewData:[]};return r},CVShapeElement.prototype.createTransformElement=function(r){var s={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,r.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,r,this)}};return s},CVShapeElement.prototype.createShapeElement=function(r){var s=new CVShapeData(this,r,this.stylesList,this.transformsManager);return this.shapes.push(s),this.addShapeToModifiers(s),s},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var r,s=this.itemsData.length;for(r=0;r<s;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),s=this.dynamicProperties.length,r=0;r<s;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(r){var s,a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.push(r)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var r,s=this.stylesList.length;for(r=0;r<s;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.pop()},CVShapeElement.prototype.closeStyles=function(r){var s,a=r.length;for(s=0;s<a;s+=1)r[s].closed=!0},CVShapeElement.prototype.searchShapes=function(r,s,a,i,o){var x,y=r.length-1,_,E,R=[],S=[],j,T,A,M=[].concat(o);for(x=y;x>=0;x-=1){if(j=this.searchProcessedElement(r[x]),j?s[x]=a[j-1]:r[x]._shouldRender=i,r[x].ty==="fl"||r[x].ty==="st"||r[x].ty==="gf"||r[x].ty==="gs")j?s[x].style.closed=!1:s[x]=this.createStyleElement(r[x],M),R.push(s[x].style);else if(r[x].ty==="gr"){if(!j)s[x]=this.createGroupElement(r[x]);else for(E=s[x].it.length,_=0;_<E;_+=1)s[x].prevViewData[_]=s[x].it[_];this.searchShapes(r[x].it,s[x].it,s[x].prevViewData,i,M)}else r[x].ty==="tr"?(j||(A=this.createTransformElement(r[x]),s[x]=A),M.push(s[x]),this.addTransformToStyleList(s[x])):r[x].ty==="sh"||r[x].ty==="rc"||r[x].ty==="el"||r[x].ty==="sr"?j||(s[x]=this.createShapeElement(r[x])):r[x].ty==="tm"||r[x].ty==="rd"||r[x].ty==="pb"||r[x].ty==="zz"||r[x].ty==="op"?(j?(T=s[x],T.closed=!1):(T=ShapeModifiers.getModifier(r[x].ty),T.init(this,r[x]),s[x]=T,this.shapeModifiers.push(T)),S.push(T)):r[x].ty==="rp"&&(j?(T=s[x],T.closed=!0):(T=ShapeModifiers.getModifier(r[x].ty),s[x]=T,T.init(this,r,x,s),this.shapeModifiers.push(T),i=!1),S.push(T));this.addProcessedElement(r[x],x+1)}for(this.removeTransformFromStyleList(),this.closeStyles(R),y=S.length,x=0;x<y;x+=1)S[x].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(r,s){(r._opMdf||s.op._mdf||this._isFirstFrame)&&(s.opacity=r.opacity,s.opacity*=s.op.v,s._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var r,s=this.stylesList.length,a,i,o,x,y,_,E=this.globalData.renderer,R=this.globalData.canvasContext,S,j;for(r=0;r<s;r+=1)if(j=this.stylesList[r],S=j.type,!((S==="st"||S==="gs")&&j.wi===0||!j.data._shouldRender||j.coOp===0||this.globalData.currentGlobalAlpha===0)){for(E.save(),y=j.elements,S==="st"||S==="gs"?(R.strokeStyle=S==="st"?j.co:j.grd,R.lineWidth=j.wi,R.lineCap=j.lc,R.lineJoin=j.lj,R.miterLimit=j.ml||0):R.fillStyle=S==="fl"?j.co:j.grd,E.ctxOpacity(j.coOp),S!=="st"&&S!=="gs"&&R.beginPath(),E.ctxTransform(j.preTransforms.finalTransform.props),i=y.length,a=0;a<i;a+=1){for((S==="st"||S==="gs")&&(R.beginPath(),j.da&&(R.setLineDash(j.da),R.lineDashOffset=j.do)),_=y[a].trNodes,x=_.length,o=0;o<x;o+=1)_[o].t==="m"?R.moveTo(_[o].p[0],_[o].p[1]):_[o].t==="c"?R.bezierCurveTo(_[o].pts[0],_[o].pts[1],_[o].pts[2],_[o].pts[3],_[o].pts[4],_[o].pts[5]):R.closePath();(S==="st"||S==="gs")&&(R.stroke(),j.da&&R.setLineDash(this.dashResetter))}S!=="st"&&S!=="gs"&&R.fill(j.r),E.restore()}},CVShapeElement.prototype.renderShape=function(r,s,a,i){var o,x=s.length-1,y;for(y=r,o=x;o>=0;o-=1)s[o].ty==="tr"?(y=a[o].transform,this.renderShapeTransform(r,y)):s[o].ty==="sh"||s[o].ty==="el"||s[o].ty==="rc"||s[o].ty==="sr"?this.renderPath(s[o],a[o]):s[o].ty==="fl"?this.renderFill(s[o],a[o],y):s[o].ty==="st"?this.renderStroke(s[o],a[o],y):s[o].ty==="gf"||s[o].ty==="gs"?this.renderGradientFill(s[o],a[o],y):s[o].ty==="gr"?this.renderShape(y,s[o].it,a[o].it):s[o].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(r,s){if(this._isFirstFrame||s._mdf||r.transforms._mdf){var a=r.trNodes,i=s.paths,o,x,y,_=i._length;a.length=0;var E=r.transforms.finalTransform;for(y=0;y<_;y+=1){var R=i.shapes[y];if(R&&R.v){for(x=R._length,o=1;o<x;o+=1)o===1&&a.push({t:"m",p:E.applyToPointArray(R.v[0][0],R.v[0][1],0)}),a.push({t:"c",pts:E.applyToTriplePoints(R.o[o-1],R.i[o],R.v[o])});x===1&&a.push({t:"m",p:E.applyToPointArray(R.v[0][0],R.v[0][1],0)}),R.c&&x&&(a.push({t:"c",pts:E.applyToTriplePoints(R.o[o-1],R.i[0],R.v[0])}),a.push({t:"z"}))}}r.trNodes=a}},CVShapeElement.prototype.renderPath=function(r,s){if(r.hd!==!0&&r._shouldRender){var a,i=s.styledShapes.length;for(a=0;a<i;a+=1)this.renderStyledShape(s.styledShapes[a],s.sh)}},CVShapeElement.prototype.renderFill=function(r,s,a){var i=s.style;(s.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")"),(s.o._mdf||a._opMdf||this._isFirstFrame)&&(i.coOp=s.o.v*a.opacity)},CVShapeElement.prototype.renderGradientFill=function(r,s,a){var i=s.style,o;if(!i.grd||s.g._mdf||s.s._mdf||s.e._mdf||r.t!==1&&(s.h._mdf||s.a._mdf)){var x=this.globalData.canvasContext,y=s.s.v,_=s.e.v;if(r.t===1)o=x.createLinearGradient(y[0],y[1],_[0],_[1]);else{var E=Math.sqrt(Math.pow(y[0]-_[0],2)+Math.pow(y[1]-_[1],2)),R=Math.atan2(_[1]-y[1],_[0]-y[0]),S=s.h.v;S>=1?S=.99:S<=-1&&(S=-.99);var j=E*S,T=Math.cos(R+s.a.v)*j+y[0],A=Math.sin(R+s.a.v)*j+y[1];o=x.createRadialGradient(T,A,0,y[0],y[1],E)}var M,P=r.g.p,L=s.g.c,D=1;for(M=0;M<P;M+=1)s.g._hasOpacity&&s.g._collapsable&&(D=s.g.o[M*2+1]),o.addColorStop(L[M*4]/100,"rgba("+L[M*4+1]+","+L[M*4+2]+","+L[M*4+3]+","+D+")");i.grd=o}i.coOp=s.o.v*a.opacity},CVShapeElement.prototype.renderStroke=function(r,s,a){var i=s.style,o=s.d;o&&(o._mdf||this._isFirstFrame)&&(i.da=o.dashArray,i.do=o.dashoffset[0]),(s.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")"),(s.o._mdf||a._opMdf||this._isFirstFrame)&&(i.coOp=s.o.v*a.opacity),(s.w._mdf||this._isFirstFrame)&&(i.wi=s.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(r,s,a){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var s=!1;r.fc?(s=!0,this.values.fill=this.buildColor(r.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=s;var a=!1;r.sc&&(a=!0,this.values.stroke=this.buildColor(r.sc),this.values.sWidth=r.sw);var i=this.globalData.fontManager.getFontByName(r.f),o,x,y=r.l,_=this.mHelper;this.stroke=a,this.values.fValue=r.finalSize+"px "+this.globalData.fontManager.getFontByName(r.f).fFamily,x=r.finalText.length;var E,R,S,j,T,A,M,P,L,D,O=this.data.singleShape,B=r.tr*.001*r.finalSize,N=0,F=0,W=!0,V=0;for(o=0;o<x;o+=1){E=this.globalData.fontManager.getCharData(r.finalText[o],i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily),R=E&&E.data||{},_.reset(),O&&y[o].n&&(N=-B,F+=r.yOffset,F+=W?1:0,W=!1),T=R.shapes?R.shapes[0].it:[],M=T.length,_.scale(r.finalSize/100,r.finalSize/100),O&&this.applyTextPropertiesToMatrix(r,_,y[o].line,N,F),L=createSizedArray(M-1);var U=0;for(A=0;A<M;A+=1)if(T[A].ty==="sh"){for(j=T[A].ks.k.i.length,P=T[A].ks.k,D=[],S=1;S<j;S+=1)S===1&&D.push(_.applyToX(P.v[0][0],P.v[0][1],0),_.applyToY(P.v[0][0],P.v[0][1],0)),D.push(_.applyToX(P.o[S-1][0],P.o[S-1][1],0),_.applyToY(P.o[S-1][0],P.o[S-1][1],0),_.applyToX(P.i[S][0],P.i[S][1],0),_.applyToY(P.i[S][0],P.i[S][1],0),_.applyToX(P.v[S][0],P.v[S][1],0),_.applyToY(P.v[S][0],P.v[S][1],0));D.push(_.applyToX(P.o[S-1][0],P.o[S-1][1],0),_.applyToY(P.o[S-1][0],P.o[S-1][1],0),_.applyToX(P.i[0][0],P.i[0][1],0),_.applyToY(P.i[0][0],P.i[0][1],0),_.applyToX(P.v[0][0],P.v[0][1],0),_.applyToY(P.v[0][0],P.v[0][1],0)),L[U]=D,U+=1}O&&(N+=y[o].l,N+=B),this.textSpans[V]?this.textSpans[V].elem=L:this.textSpans[V]={elem:L},V+=1}},CVTextElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.font=this.values.fValue,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,a,i,o,x,y,_=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;a=E.length;var R,S=null,j=null,T=null,A,M;for(s=0;s<a;s+=1)if(!E[s].n){if(R=_[s],R&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(R.p),this.globalData.renderer.ctxOpacity(R.o)),this.fill){for(R&&R.fc?S!==R.fc&&(S=R.fc,r.fillStyle=R.fc):S!==this.values.fill&&(S=this.values.fill,r.fillStyle=this.values.fill),A=this.textSpans[s].elem,o=A.length,this.globalData.canvasContext.beginPath(),i=0;i<o;i+=1)for(M=A[i],y=M.length,this.globalData.canvasContext.moveTo(M[0],M[1]),x=2;x<y;x+=6)this.globalData.canvasContext.bezierCurveTo(M[x],M[x+1],M[x+2],M[x+3],M[x+4],M[x+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(R&&R.sw?T!==R.sw&&(T=R.sw,r.lineWidth=R.sw):T!==this.values.sWidth&&(T=this.values.sWidth,r.lineWidth=this.values.sWidth),R&&R.sc?j!==R.sc&&(j=R.sc,r.strokeStyle=R.sc):j!==this.values.stroke&&(j=this.values.stroke,r.strokeStyle=this.values.stroke),A=this.textSpans[s].elem,o=A.length,this.globalData.canvasContext.beginPath(),i=0;i<o;i+=1)for(M=A[i],y=M.length,this.globalData.canvasContext.moveTo(M[0],M[1]),x=2;x<y;x+=6)this.globalData.canvasContext.bezierCurveTo(M[x],M[x+1],M[x+2],M[x+3],M[x+4],M[x+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}R&&this.globalData.renderer.restore()}};function CVImageElement(r,s,a){this.assetData=s.getAssetData(r.refId),this.img=s.imageLoader.getAsset(this.assetData),this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var r=createTag("canvas");r.width=this.assetData.w,r.height=this.assetData.h;var s=r.getContext("2d"),a=this.img.width,i=this.img.height,o=a/i,x=this.assetData.w/this.assetData.h,y,_,E=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>x&&E==="xMidYMid slice"||o<x&&E!=="xMidYMid slice"?(_=i,y=_*x):(y=a,_=y/x),s.drawImage(this.img,(a-y)/2,(i-_)/2,y,_,0,0,this.assetData.w,this.assetData.h),this.img=r}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(r,s,a){this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.fillStyle=this.data.sc,r.fillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(r,s){this.animationItem=r,this.renderConfig={clearCanvas:s&&s.clearCanvas!==void 0?s.clearCanvas:!0,context:s&&s.context||null,progressiveLoad:s&&s.progressiveLoad||!1,preserveAspectRatio:s&&s.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:s&&s.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:s&&s.contentVisibility||"visible",className:s&&s.className||"",id:s&&s.id||""},this.renderConfig.dpr=s&&s.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=s&&s.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(r){return new CVShapeElement(r,this.globalData,this)},CanvasRendererBase.prototype.createText=function(r){return new CVTextElement(r,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(r){return new CVImageElement(r,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(r){return new CVSolidElement(r,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(r){if(!(r[0]===1&&r[1]===0&&r[4]===0&&r[5]===1&&r[12]===0&&r[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(r[0],r[1],r[4],r[5],r[12],r[13]);return}this.transformMat.cloneFromProps(r);var s=this.contextData.getTransform(),a=s.props;this.transformMat.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),s.cloneFromProps(this.transformMat.props);var i=s.props;this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}},CanvasRendererBase.prototype.ctxOpacity=function(r){var s=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=r<0?0:r,this.globalData.currentGlobalAlpha=s;return}s*=r<0?0:r,this.contextData.setOpacity(s),this.globalData.currentGlobalAlpha!==s&&(this.canvasContext.globalAlpha=s,this.globalData.currentGlobalAlpha=s)},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(r){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}r&&this.canvasContext.save(),this.contextData.push()},CanvasRendererBase.prototype.restore=function(r){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}r&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var s=this.contextData.pop(),a=s.transform,i=s.opacity;this.canvasContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),this.globalData.currentGlobalAlpha!==i&&(this.canvasContext.globalAlpha=i,this.globalData.currentGlobalAlpha=i)},CanvasRendererBase.prototype.configAnimation=function(r){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var s=this.animationItem.container.style;s.width="100%",s.height="100%";var a="0px 0px 0px";s.transformOrigin=a,s.mozTransformOrigin=a,s.webkitTransformOrigin=a,s["-webkit-transform"]=a,s.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=r,this.layers=r.layers,this.transformCanvas={w:r.w,h:r.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(r,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(r.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(r,s){this.reset();var a,i;r?(a=r,i=s,this.canvasContext.canvas.width=a,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(a=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(a=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=a*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr);var o,x;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var y=this.renderConfig.preserveAspectRatio.split(" "),_=y[1]||"meet",E=y[0]||"xMidYMid",R=E.substr(0,4),S=E.substr(4);o=a/i,x=this.transformCanvas.w/this.transformCanvas.h,x>o&&_==="meet"||x<o&&_==="slice"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),R==="xMid"&&(x<o&&_==="meet"||x>o&&_==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:R==="xMax"&&(x<o&&_==="meet"||x>o&&_==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,S==="YMid"&&(x>o&&_==="meet"||x<o&&_==="slice")?this.transformCanvas.ty=(i-this.transformCanvas.h*(a/this.transformCanvas.w))/2*this.renderConfig.dpr:S==="YMax"&&(x>o&&_==="meet"||x<o&&_==="slice")?this.transformCanvas.ty=(i-this.transformCanvas.h*(a/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var r,s=this.layers?this.layers.length:0;for(r=s-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(r,s){if(!(this.renderedFrame===r&&this.renderConfig.clearCanvas===!0&&!s||this.destroyed||r===-1)){this.renderedFrame=r,this.globalData.frameNum=r-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||s,this.globalData.projectInterface.currentFrame=r;var a,i=this.layers.length;for(this.completeLayers||this.checkLayers(r),a=0;a<i;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(r-this.layers[a].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),a=i-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(r){var s=this.elements;if(!(s[r]||this.layers[r].ty===99)){var a=this.createItem(this.layers[r],this,this.globalData);s[r]=a,a.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();r.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CVCompElement(r,s,a){this.completeLayers=!1,this.layers=r.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(r,s,a),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,s.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.beginPath(),r.moveTo(0,0),r.lineTo(this.data.w,0),r.lineTo(this.data.w,this.data.h),r.lineTo(0,this.data.h),r.lineTo(0,0),r.clip();var s,a=this.layers.length;for(s=a-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},CVCompElement.prototype.destroy=function(){var r,s=this.layers.length;for(r=s-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)};function CanvasRenderer(r,s){this.animationItem=r,this.renderConfig={clearCanvas:s&&s.clearCanvas!==void 0?s.clearCanvas:!0,context:s&&s.context||null,progressiveLoad:s&&s.progressiveLoad||!1,preserveAspectRatio:s&&s.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:s&&s.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:s&&s.contentVisibility||"visible",className:s&&s.className||"",id:s&&s.id||"",runExpressions:!s||s.runExpressions===void 0||s.runExpressions},this.renderConfig.dpr=s&&s.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=s&&s.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects,this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var s=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var a=this.finalTransform.mat.toCSS();s.transform=a,s.webkitTransform=a}this.finalTransform._opMdf&&(s.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(r,s,a){this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var r;this.data.hasMask?(r=createNS("rect"),r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(r=createTag("div"),r.style.width=this.data.sw+"px",r.style.height=this.data.sh+"px",r.style.backgroundColor=this.data.sc),this.layerElement.appendChild(r)};function HShapeElement(r,s,a){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(r,s,a),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var r;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),r=this.svgElement;else{r=createNS("svg");var s=this.comp.data?this.comp.data:this.globalData.compSize;r.setAttribute("width",s.w),r.setAttribute("height",s.h),r.appendChild(this.shapesContainer),this.layerElement.appendChild(r)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=r},HShapeElement.prototype.getTransformedPoint=function(r,s){var a,i=r.length;for(a=0;a<i;a+=1)s=r[a].mProps.v.applyToPointArray(s[0],s[1],0);return s},HShapeElement.prototype.calculateShapeBoundingBox=function(r,s){var a=r.sh.v,i=r.transformers,o,x=a._length,y,_,E,R;if(!(x<=1)){for(o=0;o<x-1;o+=1)y=this.getTransformedPoint(i,a.v[o]),_=this.getTransformedPoint(i,a.o[o]),E=this.getTransformedPoint(i,a.i[o+1]),R=this.getTransformedPoint(i,a.v[o+1]),this.checkBounds(y,_,E,R,s);a.c&&(y=this.getTransformedPoint(i,a.v[o]),_=this.getTransformedPoint(i,a.o[o]),E=this.getTransformedPoint(i,a.i[0]),R=this.getTransformedPoint(i,a.v[0]),this.checkBounds(y,_,E,R,s))}},HShapeElement.prototype.checkBounds=function(r,s,a,i,o){this.getBoundsOfCurve(r,s,a,i);var x=this.shapeBoundingBox;o.x=bmMin(x.left,o.x),o.xMax=bmMax(x.right,o.xMax),o.y=bmMin(x.top,o.y),o.yMax=bmMax(x.bottom,o.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(r,s,a,i){for(var o=[[r[0],i[0]],[r[1],i[1]]],x,y,_,E,R,S,j,T=0;T<2;++T)y=6*r[T]-12*s[T]+6*a[T],x=-3*r[T]+9*s[T]-9*a[T]+3*i[T],_=3*s[T]-3*r[T],y|=0,x|=0,_|=0,x===0&&y===0||(x===0?(E=-_/y,E>0&&E<1&&o[T].push(this.calculateF(E,r,s,a,i,T))):(R=y*y-4*_*x,R>=0&&(S=(-y+bmSqrt(R))/(2*x),S>0&&S<1&&o[T].push(this.calculateF(S,r,s,a,i,T)),j=(-y-bmSqrt(R))/(2*x),j>0&&j<1&&o[T].push(this.calculateF(j,r,s,a,i,T)))));this.shapeBoundingBox.left=bmMin.apply(null,o[0]),this.shapeBoundingBox.top=bmMin.apply(null,o[1]),this.shapeBoundingBox.right=bmMax.apply(null,o[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,o[1])},HShapeElement.prototype.calculateF=function(r,s,a,i,o,x){return bmPow(1-r,3)*s[x]+3*bmPow(1-r,2)*r*a[x]+3*(1-r)*bmPow(r,2)*i[x]+bmPow(r,3)*o[x]},HShapeElement.prototype.calculateBoundingBox=function(r,s){var a,i=r.length;for(a=0;a<i;a+=1)r[a]&&r[a].sh?this.calculateShapeBoundingBox(r[a],s):r[a]&&r[a].it?this.calculateBoundingBox(r[a].it,s):r[a]&&r[a].style&&r[a].w&&this.expandStrokeBoundingBox(r[a].w,s)},HShapeElement.prototype.expandStrokeBoundingBox=function(r,s){var a=0;if(r.keyframes){for(var i=0;i<r.keyframes.length;i+=1){var o=r.keyframes[i].s;o>a&&(a=o)}a*=r.mult}else a=r.v*r.mult;s.x-=a,s.xMax+=a,s.y-=a,s.yMax+=a},HShapeElement.prototype.currentBoxContains=function(r){return this.currentBBox.x<=r.x&&this.currentBBox.y<=r.y&&this.currentBBox.width+this.currentBBox.x>=r.x+r.width&&this.currentBBox.height+this.currentBBox.y>=r.y+r.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var r=this.tempBoundingBox,s=999999;if(r.x=s,r.xMax=-s,r.y=s,r.yMax=-s,this.calculateBoundingBox(this.itemsData,r),r.width=r.xMax<r.x?0:r.xMax-r.x,r.height=r.yMax<r.y?0:r.yMax-r.y,this.currentBoxContains(r))return;var a=!1;if(this.currentBBox.w!==r.width&&(this.currentBBox.w=r.width,this.shapeCont.setAttribute("width",r.width),a=!0),this.currentBBox.h!==r.height&&(this.currentBBox.h=r.height,this.shapeCont.setAttribute("height",r.height),a=!0),a||this.currentBBox.x!==r.x||this.currentBBox.y!==r.y){this.currentBBox.w=r.width,this.currentBBox.h=r.height,this.currentBBox.x=r.x,this.currentBBox.y=r.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=o,i.webkitTransform=o}}};function HTextElement(r,s,a){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var r=createNS("g");this.maskedElement.appendChild(r),this.innerElem=r}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var s=this.innerElem.style,a=r.fc?this.buildColor(r.fc):"rgba(0,0,0,0)";s.fill=a,s.color=a,r.sc&&(s.stroke=this.buildColor(r.sc),s.strokeWidth=r.sw+"px");var i=this.globalData.fontManager.getFontByName(r.f);if(!this.globalData.fontManager.chars)if(s.fontSize=r.finalSize+"px",s.lineHeight=r.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{s.fontFamily=i.fFamily;var o=r.fWeight,x=r.fStyle;s.fontStyle=x,s.fontWeight=o}var y,_,E=r.l;_=E.length;var R,S,j,T=this.mHelper,A,M="",P=0;for(y=0;y<_;y+=1){if(this.globalData.fontManager.chars?(this.textPaths[P]?R=this.textPaths[P]:(R=createNS("path"),R.setAttribute("stroke-linecap",lineCapEnum[1]),R.setAttribute("stroke-linejoin",lineJoinEnum[2]),R.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[P]?(S=this.textSpans[P],j=S.children[0]):(S=createTag("div"),S.style.lineHeight=0,j=createNS("svg"),j.appendChild(R),styleDiv(S)))):this.isMasked?R=this.textPaths[P]?this.textPaths[P]:createNS("text"):this.textSpans[P]?(S=this.textSpans[P],R=this.textPaths[P]):(S=createTag("span"),styleDiv(S),R=createTag("span"),styleDiv(R),S.appendChild(R)),this.globalData.fontManager.chars){var L=this.globalData.fontManager.getCharData(r.finalText[y],i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily),D;if(L?D=L.data:D=null,T.reset(),D&&D.shapes&&D.shapes.length&&(A=D.shapes[0].it,T.scale(r.finalSize/100,r.finalSize/100),M=this.createPathShape(T,A),R.setAttribute("d",M)),this.isMasked)this.innerElem.appendChild(R);else{if(this.innerElem.appendChild(S),D&&D.shapes){document.body.appendChild(j);var O=j.getBBox();j.setAttribute("width",O.width+2),j.setAttribute("height",O.height+2),j.setAttribute("viewBox",O.x-1+" "+(O.y-1)+" "+(O.width+2)+" "+(O.height+2));var B=j.style,N="translate("+(O.x-1)+"px,"+(O.y-1)+"px)";B.transform=N,B.webkitTransform=N,E[y].yOffset=O.y-1}else j.setAttribute("width",1),j.setAttribute("height",1);S.appendChild(j)}}else if(R.textContent=E[y].val,R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(R);else{this.innerElem.appendChild(S);var F=R.style,W="translate3d(0,"+-r.finalSize/1.2+"px,0)";F.transform=W,F.webkitTransform=W}this.isMasked?this.textSpans[P]=R:this.textSpans[P]=S,this.textSpans[P].style.display="block",this.textPaths[P]=R,P+=1}for(;P<this.textSpans.length;)this.textSpans[P].style.display="none",P+=1},HTextElement.prototype.renderInnerContent=function(){var r;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),r=this.svgElement.style;var s="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";r.transform=s,r.webkitTransform=s}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var a,i,o=0,x=this.textAnimator.renderedLetters,y=this.textProperty.currentData.l;i=y.length;var _,E,R;for(a=0;a<i;a+=1)y[a].n?o+=1:(E=this.textSpans[a],R=this.textPaths[a],_=x[o],o+=1,_._mdf.m&&(this.isMasked?E.setAttribute("transform",_.m):(E.style.webkitTransform=_.m,E.style.transform=_.m)),E.style.opacity=_.o,_.sw&&_._mdf.sw&&R.setAttribute("stroke-width",_.sw),_.sc&&_._mdf.sc&&R.setAttribute("stroke",_.sc),_.fc&&_._mdf.fc&&(R.setAttribute("fill",_.fc),R.style.color=_.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var S=this.innerElem.getBBox();this.currentBBox.w!==S.width&&(this.currentBBox.w=S.width,this.svgElement.setAttribute("width",S.width)),this.currentBBox.h!==S.height&&(this.currentBBox.h=S.height,this.svgElement.setAttribute("height",S.height));var j=1;if(this.currentBBox.w!==S.width+j*2||this.currentBBox.h!==S.height+j*2||this.currentBBox.x!==S.x-j||this.currentBBox.y!==S.y-j){this.currentBBox.w=S.width+j*2,this.currentBBox.h=S.height+j*2,this.currentBBox.x=S.x-j,this.currentBBox.y=S.y-j,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),r=this.svgElement.style;var T="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=T,r.webkitTransform=T}}}};function HCameraElement(r,s,a){this.initFrame(),this.initBaseData(r,s,a),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,r.pe,0,0,this),r.ks.p.s?(this.px=i(this,r.ks.p.x,1,0,this),this.py=i(this,r.ks.p.y,1,0,this),this.pz=i(this,r.ks.p.z,1,0,this)):this.p=i(this,r.ks.p,1,0,this),r.ks.a&&(this.a=i(this,r.ks.a,1,0,this)),r.ks.or.k.length&&r.ks.or.k[0].to){var o,x=r.ks.or.k.length;for(o=0;o<x;o+=1)r.ks.or.k[o].to=null,r.ks.or.k[o].ti=null}this.or=i(this,r.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,r.ks.rx,0,degToRads,this),this.ry=i(this,r.ks.ry,0,degToRads,this),this.rz=i(this,r.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var r,s=this.comp.threeDElements.length,a,i,o;for(r=0;r<s;r+=1)if(a=this.comp.threeDElements[r],a.type==="3d"){i=a.perspectiveElem.style,o=a.container.style;var x=this.pe.v+"px",y="0px 0px 0px",_="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=x,i.webkitPerspective=x,o.transformOrigin=y,o.mozTransformOrigin=y,o.webkitTransformOrigin=y,i.transform=_,i.webkitTransform=_}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var r=this._isFirstFrame,s,a;if(this.hierarchy)for(a=this.hierarchy.length,s=0;s<a;s+=1)r=this.hierarchy[s].finalTransform.mProp._mdf||r;if(r||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(a=this.hierarchy.length-1,s=a;s>=0;s-=1){var i=this.hierarchy[s].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var o;this.p?o=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:o=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var x=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2)),y=[o[0]/x,o[1]/x,o[2]/x],_=Math.sqrt(y[2]*y[2]+y[0]*y[0]),E=Math.atan2(y[1],_),R=Math.atan2(y[0],-y[2]);this.mat.rotateY(R).rotateX(-E)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var S=!this._prevMat.equals(this.mat);if((S||this.pe._mdf)&&this.comp.threeDElements){a=this.comp.threeDElements.length;var j,T,A;for(s=0;s<a;s+=1)if(j=this.comp.threeDElements[s],j.type==="3d"){if(S){var M=this.mat.toCSS();A=j.container.style,A.transform=M,A.webkitTransform=M}this.pe._mdf&&(T=j.perspectiveElem.style,T.perspective=this.pe.v+"px",T.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(r,s,a){this.assetData=s.getAssetData(r.refId),this.initElement(r,s,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData),s=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(s),s.crossOrigin="anonymous",s.src=r,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(r,s){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:s&&s.className||"",imagePreserveAspectRatio:s&&s.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(s&&s.hideOnTransparent===!1),filterSize:{width:s&&s.filterSize&&s.filterSize.width||"400%",height:s&&s.filterSize&&s.filterSize.height||"400%",x:s&&s.filterSize&&s.filterSize.x||"-100%",y:s&&s.filterSize&&s.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();r.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(r,s){var a=r.getBaseElement();if(a){var i=this.layers[s];if(!i.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(a,s);else{for(var o=0,x,y,_;o<s;)this.elements[o]&&this.elements[o]!==!0&&this.elements[o].getBaseElement&&(y=this.elements[o],_=this.layers[o].ddd?this.getThreeDContainerByPos(o):y.getBaseElement(),x=_||x),o+=1;x?(!i.ddd||!this.supports3d)&&this.layerElement.insertBefore(a,x):(!i.ddd||!this.supports3d)&&this.layerElement.appendChild(a)}else this.addTo3dContainer(a,s)}},HybridRendererBase.prototype.createShape=function(r){return this.supports3d?new HShapeElement(r,this.globalData,this):new SVGShapeElement(r,this.globalData,this)},HybridRendererBase.prototype.createText=function(r){return this.supports3d?new HTextElement(r,this.globalData,this):new SVGTextLottieElement(r,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(r){return this.camera=new HCameraElement(r,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(r){return this.supports3d?new HImageElement(r,this.globalData,this):new IImageElement(r,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(r){return this.supports3d?new HSolidElement(r,this.globalData,this):new ISolidElement(r,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(r){for(var s=0,a=this.threeDElements.length;s<a;){if(this.threeDElements[s].startPos<=r&&this.threeDElements[s].endPos>=r)return this.threeDElements[s].perspectiveElem;s+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(r,s){var a=createTag("div"),i,o;styleDiv(a);var x=createTag("div");if(styleDiv(x),s==="3d"){i=a.style,i.width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var y="50% 50%";i.webkitTransformOrigin=y,i.mozTransformOrigin=y,i.transformOrigin=y,o=x.style;var _="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.transform=_,o.webkitTransform=_}a.appendChild(x);var E={container:x,perspectiveElem:a,startPos:r,endPos:r,type:s};return this.threeDElements.push(E),E},HybridRendererBase.prototype.build3dContainers=function(){var r,s=this.layers.length,a,i="";for(r=0;r<s;r+=1)this.layers[r].ddd&&this.layers[r].ty!==3?(i!=="3d"&&(i="3d",a=this.createThreeDContainer(r,"3d")),a.endPos=Math.max(a.endPos,r)):(i!=="2d"&&(i="2d",a=this.createThreeDContainer(r,"2d")),a.endPos=Math.max(a.endPos,r));for(s=this.threeDElements.length,r=s-1;r>=0;r-=1)this.resizerElem.appendChild(this.threeDElements[r].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(r,s){for(var a=0,i=this.threeDElements.length;a<i;){if(s<=this.threeDElements[a].endPos){for(var o=this.threeDElements[a].startPos,x;o<s;)this.elements[o]&&this.elements[o].getBaseElement&&(x=this.elements[o].getBaseElement()),o+=1;x?this.threeDElements[a].container.insertBefore(r,x):this.threeDElements[a].container.appendChild(r);break}a+=1}},HybridRendererBase.prototype.configAnimation=function(r){var s=createTag("div"),a=this.animationItem.wrapper,i=s.style;i.width=r.w+"px",i.height=r.h+"px",this.resizerElem=s,styleDiv(s),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&s.setAttribute("class",this.renderConfig.className),a.appendChild(s),i.overflow="hidden";var o=createNS("svg");o.setAttribute("width","1"),o.setAttribute("height","1"),styleDiv(o),this.resizerElem.appendChild(o);var x=createNS("defs");o.appendChild(x),this.data=r,this.setupGlobalData(r,o),this.globalData.defs=x,this.layers=r.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var r,s=this.layers?this.layers.length:0;for(r=0;r<s;r+=1)this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var r=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,a=r/s,i=this.globalData.compSize.w/this.globalData.compSize.h,o,x,y,_;i>a?(o=r/this.globalData.compSize.w,x=r/this.globalData.compSize.w,y=0,_=(s-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(o=s/this.globalData.compSize.h,x=s/this.globalData.compSize.h,y=(r-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,_=0);var E=this.resizerElem.style;E.webkitTransform="matrix3d("+o+",0,0,0,0,"+x+",0,0,0,0,1,0,"+y+","+_+",0,1)",E.transform=E.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var r=this.globalData.compSize.w,s=this.globalData.compSize.h,a,i=this.threeDElements.length;for(a=0;a<i;a+=1){var o=this.threeDElements[a].perspectiveElem.style;o.webkitPerspective=Math.sqrt(Math.pow(r,2)+Math.pow(s,2))+"px",o.perspective=o.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(r){var s,a=r.length,i=createTag("div");for(s=0;s<a;s+=1)if(r[s].xt){var o=this.createComp(r[s],i,this.globalData.comp,null);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}};function HCompElement(r,s,a){this.layers=r.layers,this.supports3d=!r.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,s,a),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,s.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(r,s){for(var a=0,i;a<s;)this.elements[a]&&this.elements[a].getBaseElement&&(i=this.elements[a].getBaseElement()),a+=1;i?this.layerElement.insertBefore(r,i):this.layerElement.appendChild(r)},HCompElement.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)};function HybridRenderer(r,s){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:s&&s.className||"",imagePreserveAspectRatio:s&&s.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(s&&s.hideOnTransparent===!1),filterSize:{width:s&&s.filterSize&&s.filterSize.width||"400%",height:s&&s.filterSize&&s.filterSize.height||"400%",x:s&&s.filterSize&&s.filterSize.x||"-100%",y:s&&s.filterSize&&s.filterSize.y||"-100%"},runExpressions:!s||s.runExpressions===void 0||s.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)};var CompExpressionInterface=function(){return function(r){function s(a){for(var i=0,o=r.layers.length;i<o;){if(r.layers[i].nm===a||r.layers[i].ind===a)return r.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(s,"_name",{value:r.data.nm}),s.layer=s,s.pixelAspect=1,s.height=r.data.h||r.globalData.compSize.h,s.width=r.data.w||r.globalData.compSize.w,s.pixelAspect=1,s.frameDuration=1/r.globalData.frameRate,s.displayStartTime=0,s.numLayers=r.layers.length,s}}(),Expressions=function(){var r={};r.initExpressions=s;function s(a){var i=0,o=[];function x(){i+=1}function y(){i-=1,i===0&&E()}function _(R){o.indexOf(R)===-1&&o.push(R)}function E(){var R,S=o.length;for(R=0;R<S;R+=1)o[R].release();o.length=0}a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=x,a.renderer.globalData.popExpression=y,a.renderer.globalData.registerExpressionProperty=_}return r}(),MaskManagerInterface=function(){function r(a,i){this._mask=a,this._data=i}Object.defineProperty(r.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(r.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var s=function(i){var o=createSizedArray(i.viewData.length),x,y=i.viewData.length;for(x=0;x<y;x+=1)o[x]=new r(i.viewData[x],i.masksProperties[x]);var _=function(R){for(x=0;x<y;){if(i.masksProperties[x].nm===R)return o[x];x+=1}return null};return _};return s}(),ExpressionPropertyInterface=function(){var r={pv:0,v:0,mult:1},s={pv:[0,0,0],v:[0,0,0],mult:1};function a(y,_,E){Object.defineProperty(y,"velocity",{get:function(){return _.getVelocityAtTime(_.comp.currentFrame)}}),y.numKeys=_.keyframes?_.keyframes.length:0,y.key=function(R){if(!y.numKeys)return 0;var S="";"s"in _.keyframes[R-1]?S=_.keyframes[R-1].s:"e"in _.keyframes[R-2]?S=_.keyframes[R-2].e:S=_.keyframes[R-2].s;var j=E==="unidimensional"?new Number(S):Object.assign({},S);return j.time=_.keyframes[R-1].t/_.elem.comp.globalData.frameRate,j.value=E==="unidimensional"?S[0]:S,j},y.valueAtTime=_.getValueAtTime,y.speedAtTime=_.getSpeedAtTime,y.velocityAtTime=_.getVelocityAtTime,y.propertyGroup=_.propertyGroup}function i(y){(!y||!("pv"in y))&&(y=r);var _=1/y.mult,E=y.pv*_,R=new Number(E);return R.value=E,a(R,y,"unidimensional"),function(){return y.k&&y.getValue(),E=y.v*_,R.value!==E&&(R=new Number(E),R.value=E,a(R,y,"unidimensional")),R}}function o(y){(!y||!("pv"in y))&&(y=s);var _=1/y.mult,E=y.data&&y.data.l||y.pv.length,R=createTypedArray("float32",E),S=createTypedArray("float32",E);return R.value=S,a(R,y,"multidimensional"),function(){y.k&&y.getValue();for(var j=0;j<E;j+=1)S[j]=y.v[j]*_,R[j]=S[j];return R}}function x(){return r}return function(y){return y?y.propType==="unidimensional"?i(y):o(y):x}}(),TransformExpressionInterface=function(){return function(r){function s(y){switch(y){case"scale":case"Scale":case"ADBE Scale":case 6:return s.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return s.rotation;case"ADBE Rotate X":return s.xRotation;case"ADBE Rotate Y":return s.yRotation;case"position":case"Position":case"ADBE Position":case 2:return s.position;case"ADBE Position_0":return s.xPosition;case"ADBE Position_1":return s.yPosition;case"ADBE Position_2":return s.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return s.anchorPoint;case"opacity":case"Opacity":case 11:return s.opacity;default:return null}}Object.defineProperty(s,"rotation",{get:ExpressionPropertyInterface(r.r||r.rz)}),Object.defineProperty(s,"zRotation",{get:ExpressionPropertyInterface(r.rz||r.r)}),Object.defineProperty(s,"xRotation",{get:ExpressionPropertyInterface(r.rx)}),Object.defineProperty(s,"yRotation",{get:ExpressionPropertyInterface(r.ry)}),Object.defineProperty(s,"scale",{get:ExpressionPropertyInterface(r.s)});var a,i,o,x;return r.p?x=ExpressionPropertyInterface(r.p):(a=ExpressionPropertyInterface(r.px),i=ExpressionPropertyInterface(r.py),r.pz&&(o=ExpressionPropertyInterface(r.pz))),Object.defineProperty(s,"position",{get:function(){return r.p?x():[a(),i(),o?o():0]}}),Object.defineProperty(s,"xPosition",{get:ExpressionPropertyInterface(r.px)}),Object.defineProperty(s,"yPosition",{get:ExpressionPropertyInterface(r.py)}),Object.defineProperty(s,"zPosition",{get:ExpressionPropertyInterface(r.pz)}),Object.defineProperty(s,"anchorPoint",{get:ExpressionPropertyInterface(r.a)}),Object.defineProperty(s,"opacity",{get:ExpressionPropertyInterface(r.o)}),Object.defineProperty(s,"skew",{get:ExpressionPropertyInterface(r.sk)}),Object.defineProperty(s,"skewAxis",{get:ExpressionPropertyInterface(r.sa)}),Object.defineProperty(s,"orientation",{get:ExpressionPropertyInterface(r.or)}),s}}(),LayerExpressionInterface=function(){function r(R){var S=new Matrix;if(R!==void 0){var j=this._elem.finalTransform.mProp.getValueAtTime(R);j.clone(S)}else{var T=this._elem.finalTransform.mProp;T.applyToMatrix(S)}return S}function s(R,S){var j=this.getMatrix(S);return j.props[12]=0,j.props[13]=0,j.props[14]=0,this.applyPoint(j,R)}function a(R,S){var j=this.getMatrix(S);return this.applyPoint(j,R)}function i(R,S){var j=this.getMatrix(S);return j.props[12]=0,j.props[13]=0,j.props[14]=0,this.invertPoint(j,R)}function o(R,S){var j=this.getMatrix(S);return this.invertPoint(j,R)}function x(R,S){if(this._elem.hierarchy&&this._elem.hierarchy.length){var j,T=this._elem.hierarchy.length;for(j=0;j<T;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(R)}return R.applyToPointArray(S[0],S[1],S[2]||0)}function y(R,S){if(this._elem.hierarchy&&this._elem.hierarchy.length){var j,T=this._elem.hierarchy.length;for(j=0;j<T;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(R)}return R.inversePoint(S)}function _(R){var S=new Matrix;if(S.reset(),this._elem.finalTransform.mProp.applyToMatrix(S),this._elem.hierarchy&&this._elem.hierarchy.length){var j,T=this._elem.hierarchy.length;for(j=0;j<T;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(S);return S.inversePoint(R)}return S.inversePoint(R)}function E(){return[1,1,1,1]}return function(R){var S;function j(P){A.mask=new MaskManagerInterface(P,R)}function T(P){A.effect=P}function A(P){switch(P){case"ADBE Root Vectors Group":case"Contents":case 2:return A.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return S;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return A.effect;case"ADBE Text Properties":return A.textInterface;default:return null}}A.getMatrix=r,A.invertPoint=y,A.applyPoint=x,A.toWorld=a,A.toWorldVec=s,A.fromWorld=o,A.fromWorldVec=i,A.toComp=a,A.fromComp=_,A.sampleImage=E,A.sourceRectAtTime=R.sourceRectAtTime.bind(R),A._elem=R,S=TransformExpressionInterface(R.finalTransform.mProp);var M=getDescriptor(S,"anchorPoint");return Object.defineProperties(A,{hasParent:{get:function(){return R.hierarchy.length}},parent:{get:function(){return R.hierarchy[0].layerInterface}},rotation:getDescriptor(S,"rotation"),scale:getDescriptor(S,"scale"),position:getDescriptor(S,"position"),opacity:getDescriptor(S,"opacity"),anchorPoint:M,anchor_point:M,transform:{get:function(){return S}},active:{get:function(){return R.isInRange}}}),A.startTime=R.data.st,A.index=R.data.ind,A.source=R.data.refId,A.height=R.data.ty===0?R.data.h:100,A.width=R.data.ty===0?R.data.w:100,A.inPoint=R.data.ip/R.comp.globalData.frameRate,A.outPoint=R.data.op/R.comp.globalData.frameRate,A._name=R.data.nm,A.registerMaskInterface=j,A.registerEffectsInterface=T,A}}(),propertyGroupFactory=function(){return function(r,s){return function(a){return a=a===void 0?1:a,a<=0?r:s(a-1)}}}(),PropertyInterface=function(){return function(r,s){var a={_name:r};function i(o){return o=o===void 0?1:o,o<=0?a:s(o-1)}return i}}(),EffectsExpressionInterface=function(){var r={createEffectsInterface:s};function s(o,x){if(o.effectsManager){var y=[],_=o.data.ef,E,R=o.effectsManager.effectElements.length;for(E=0;E<R;E+=1)y.push(a(_[E],o.effectsManager.effectElements[E],x,o));var S=o.data.ef||[],j=function(A){for(E=0,R=S.length;E<R;){if(A===S[E].nm||A===S[E].mn||A===S[E].ix)return y[E];E+=1}return null};return Object.defineProperty(j,"numProperties",{get:function(){return S.length}}),j}return null}function a(o,x,y,_){function E(A){for(var M=o.ef,P=0,L=M.length;P<L;){if(A===M[P].nm||A===M[P].mn||A===M[P].ix)return M[P].ty===5?S[P]:S[P]();P+=1}throw new Error}var R=propertyGroupFactory(E,y),S=[],j,T=o.ef.length;for(j=0;j<T;j+=1)o.ef[j].ty===5?S.push(a(o.ef[j],x.effectElements[j],x.effectElements[j].propertyGroup,_)):S.push(i(x.effectElements[j],o.ef[j].ty,_,R));return o.mn==="ADBE Color Control"&&Object.defineProperty(E,"color",{get:function(){return S[0]()}}),Object.defineProperties(E,{numProperties:{get:function(){return o.np}},_name:{value:o.nm},propertyGroup:{value:R}}),E.enabled=o.en!==0,E.active=E.enabled,E}function i(o,x,y,_){var E=ExpressionPropertyInterface(o.p);function R(){return x===10?y.comp.compInterface(o.p.v):E()}return o.p.setGroupProperty&&o.p.setGroupProperty(PropertyInterface("",_)),R}return r}(),ShapePathInterface=function(){return function(s,a,i){var o=a.sh;function x(_){return _==="Shape"||_==="shape"||_==="Path"||_==="path"||_==="ADBE Vector Shape"||_===2?x.path:null}var y=propertyGroupFactory(x,i);return o.setGroupProperty(PropertyInterface("Path",y)),Object.defineProperties(x,{path:{get:function(){return o.k&&o.getValue(),o}},shape:{get:function(){return o.k&&o.getValue(),o}},_name:{value:s.nm},ix:{value:s.ix},propertyIndex:{value:s.ix},mn:{value:s.mn},propertyGroup:{value:i}}),x}}(),ShapeExpressionInterface=function(){function r(M,P,L){var D=[],O,B=M?M.length:0;for(O=0;O<B;O+=1)M[O].ty==="gr"?D.push(a(M[O],P[O],L)):M[O].ty==="fl"?D.push(i(M[O],P[O],L)):M[O].ty==="st"?D.push(y(M[O],P[O],L)):M[O].ty==="tm"?D.push(_(M[O],P[O],L)):M[O].ty==="tr"||(M[O].ty==="el"?D.push(R(M[O],P[O],L)):M[O].ty==="sr"?D.push(S(M[O],P[O],L)):M[O].ty==="sh"?D.push(ShapePathInterface(M[O],P[O],L)):M[O].ty==="rc"?D.push(j(M[O],P[O],L)):M[O].ty==="rd"?D.push(T(M[O],P[O],L)):M[O].ty==="rp"?D.push(A(M[O],P[O],L)):M[O].ty==="gf"?D.push(o(M[O],P[O],L)):D.push(x(M[O],P[O])));return D}function s(M,P,L){var D,O=function(F){for(var W=0,V=D.length;W<V;){if(D[W]._name===F||D[W].mn===F||D[W].propertyIndex===F||D[W].ix===F||D[W].ind===F)return D[W];W+=1}return typeof F=="number"?D[F-1]:null};O.propertyGroup=propertyGroupFactory(O,L),D=r(M.it,P.it,O.propertyGroup),O.numProperties=D.length;var B=E(M.it[M.it.length-1],P.it[P.it.length-1],O.propertyGroup);return O.transform=B,O.propertyIndex=M.cix,O._name=M.nm,O}function a(M,P,L){var D=function(F){switch(F){case"ADBE Vectors Group":case"Contents":case 2:return D.content;default:return D.transform}};D.propertyGroup=propertyGroupFactory(D,L);var O=s(M,P,D.propertyGroup),B=E(M.it[M.it.length-1],P.it[P.it.length-1],D.propertyGroup);return D.content=O,D.transform=B,Object.defineProperty(D,"_name",{get:function(){return M.nm}}),D.numProperties=M.np,D.propertyIndex=M.ix,D.nm=M.nm,D.mn=M.mn,D}function i(M,P,L){function D(O){return O==="Color"||O==="color"?D.color:O==="Opacity"||O==="opacity"?D.opacity:null}return Object.defineProperties(D,{color:{get:ExpressionPropertyInterface(P.c)},opacity:{get:ExpressionPropertyInterface(P.o)},_name:{value:M.nm},mn:{value:M.mn}}),P.c.setGroupProperty(PropertyInterface("Color",L)),P.o.setGroupProperty(PropertyInterface("Opacity",L)),D}function o(M,P,L){function D(O){return O==="Start Point"||O==="start point"?D.startPoint:O==="End Point"||O==="end point"?D.endPoint:O==="Opacity"||O==="opacity"?D.opacity:null}return Object.defineProperties(D,{startPoint:{get:ExpressionPropertyInterface(P.s)},endPoint:{get:ExpressionPropertyInterface(P.e)},opacity:{get:ExpressionPropertyInterface(P.o)},type:{get:function(){return"a"}},_name:{value:M.nm},mn:{value:M.mn}}),P.s.setGroupProperty(PropertyInterface("Start Point",L)),P.e.setGroupProperty(PropertyInterface("End Point",L)),P.o.setGroupProperty(PropertyInterface("Opacity",L)),D}function x(){function M(){return null}return M}function y(M,P,L){var D=propertyGroupFactory(V,L),O=propertyGroupFactory(W,D);function B(U){Object.defineProperty(W,M.d[U].nm,{get:ExpressionPropertyInterface(P.d.dataProps[U].p)})}var N,F=M.d?M.d.length:0,W={};for(N=0;N<F;N+=1)B(N),P.d.dataProps[N].p.setGroupProperty(O);function V(U){return U==="Color"||U==="color"?V.color:U==="Opacity"||U==="opacity"?V.opacity:U==="Stroke Width"||U==="stroke width"?V.strokeWidth:null}return Object.defineProperties(V,{color:{get:ExpressionPropertyInterface(P.c)},opacity:{get:ExpressionPropertyInterface(P.o)},strokeWidth:{get:ExpressionPropertyInterface(P.w)},dash:{get:function(){return W}},_name:{value:M.nm},mn:{value:M.mn}}),P.c.setGroupProperty(PropertyInterface("Color",D)),P.o.setGroupProperty(PropertyInterface("Opacity",D)),P.w.setGroupProperty(PropertyInterface("Stroke Width",D)),V}function _(M,P,L){function D(B){return B===M.e.ix||B==="End"||B==="end"?D.end:B===M.s.ix?D.start:B===M.o.ix?D.offset:null}var O=propertyGroupFactory(D,L);return D.propertyIndex=M.ix,P.s.setGroupProperty(PropertyInterface("Start",O)),P.e.setGroupProperty(PropertyInterface("End",O)),P.o.setGroupProperty(PropertyInterface("Offset",O)),D.propertyIndex=M.ix,D.propertyGroup=L,Object.defineProperties(D,{start:{get:ExpressionPropertyInterface(P.s)},end:{get:ExpressionPropertyInterface(P.e)},offset:{get:ExpressionPropertyInterface(P.o)},_name:{value:M.nm}}),D.mn=M.mn,D}function E(M,P,L){function D(B){return M.a.ix===B||B==="Anchor Point"?D.anchorPoint:M.o.ix===B||B==="Opacity"?D.opacity:M.p.ix===B||B==="Position"?D.position:M.r.ix===B||B==="Rotation"||B==="ADBE Vector Rotation"?D.rotation:M.s.ix===B||B==="Scale"?D.scale:M.sk&&M.sk.ix===B||B==="Skew"?D.skew:M.sa&&M.sa.ix===B||B==="Skew Axis"?D.skewAxis:null}var O=propertyGroupFactory(D,L);return P.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",O)),P.transform.mProps.p.setGroupProperty(PropertyInterface("Position",O)),P.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",O)),P.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",O)),P.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",O)),P.transform.mProps.sk&&(P.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",O)),P.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",O))),P.transform.op.setGroupProperty(PropertyInterface("Opacity",O)),Object.defineProperties(D,{opacity:{get:ExpressionPropertyInterface(P.transform.mProps.o)},position:{get:ExpressionPropertyInterface(P.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(P.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(P.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(P.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(P.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(P.transform.mProps.sa)},_name:{value:M.nm}}),D.ty="tr",D.mn=M.mn,D.propertyGroup=L,D}function R(M,P,L){function D(N){return M.p.ix===N?D.position:M.s.ix===N?D.size:null}var O=propertyGroupFactory(D,L);D.propertyIndex=M.ix;var B=P.sh.ty==="tm"?P.sh.prop:P.sh;return B.s.setGroupProperty(PropertyInterface("Size",O)),B.p.setGroupProperty(PropertyInterface("Position",O)),Object.defineProperties(D,{size:{get:ExpressionPropertyInterface(B.s)},position:{get:ExpressionPropertyInterface(B.p)},_name:{value:M.nm}}),D.mn=M.mn,D}function S(M,P,L){function D(N){return M.p.ix===N?D.position:M.r.ix===N?D.rotation:M.pt.ix===N?D.points:M.or.ix===N||N==="ADBE Vector Star Outer Radius"?D.outerRadius:M.os.ix===N?D.outerRoundness:M.ir&&(M.ir.ix===N||N==="ADBE Vector Star Inner Radius")?D.innerRadius:M.is&&M.is.ix===N?D.innerRoundness:null}var O=propertyGroupFactory(D,L),B=P.sh.ty==="tm"?P.sh.prop:P.sh;return D.propertyIndex=M.ix,B.or.setGroupProperty(PropertyInterface("Outer Radius",O)),B.os.setGroupProperty(PropertyInterface("Outer Roundness",O)),B.pt.setGroupProperty(PropertyInterface("Points",O)),B.p.setGroupProperty(PropertyInterface("Position",O)),B.r.setGroupProperty(PropertyInterface("Rotation",O)),M.ir&&(B.ir.setGroupProperty(PropertyInterface("Inner Radius",O)),B.is.setGroupProperty(PropertyInterface("Inner Roundness",O))),Object.defineProperties(D,{position:{get:ExpressionPropertyInterface(B.p)},rotation:{get:ExpressionPropertyInterface(B.r)},points:{get:ExpressionPropertyInterface(B.pt)},outerRadius:{get:ExpressionPropertyInterface(B.or)},outerRoundness:{get:ExpressionPropertyInterface(B.os)},innerRadius:{get:ExpressionPropertyInterface(B.ir)},innerRoundness:{get:ExpressionPropertyInterface(B.is)},_name:{value:M.nm}}),D.mn=M.mn,D}function j(M,P,L){function D(N){return M.p.ix===N?D.position:M.r.ix===N?D.roundness:M.s.ix===N||N==="Size"||N==="ADBE Vector Rect Size"?D.size:null}var O=propertyGroupFactory(D,L),B=P.sh.ty==="tm"?P.sh.prop:P.sh;return D.propertyIndex=M.ix,B.p.setGroupProperty(PropertyInterface("Position",O)),B.s.setGroupProperty(PropertyInterface("Size",O)),B.r.setGroupProperty(PropertyInterface("Rotation",O)),Object.defineProperties(D,{position:{get:ExpressionPropertyInterface(B.p)},roundness:{get:ExpressionPropertyInterface(B.r)},size:{get:ExpressionPropertyInterface(B.s)},_name:{value:M.nm}}),D.mn=M.mn,D}function T(M,P,L){function D(N){return M.r.ix===N||N==="Round Corners 1"?D.radius:null}var O=propertyGroupFactory(D,L),B=P;return D.propertyIndex=M.ix,B.rd.setGroupProperty(PropertyInterface("Radius",O)),Object.defineProperties(D,{radius:{get:ExpressionPropertyInterface(B.rd)},_name:{value:M.nm}}),D.mn=M.mn,D}function A(M,P,L){function D(N){return M.c.ix===N||N==="Copies"?D.copies:M.o.ix===N||N==="Offset"?D.offset:null}var O=propertyGroupFactory(D,L),B=P;return D.propertyIndex=M.ix,B.c.setGroupProperty(PropertyInterface("Copies",O)),B.o.setGroupProperty(PropertyInterface("Offset",O)),Object.defineProperties(D,{copies:{get:ExpressionPropertyInterface(B.c)},offset:{get:ExpressionPropertyInterface(B.o)},_name:{value:M.nm}}),D.mn=M.mn,D}return function(M,P,L){var D;function O(N){if(typeof N=="number")return N=N===void 0?1:N,N===0?L:D[N-1];for(var F=0,W=D.length;F<W;){if(D[F]._name===N)return D[F];F+=1}return null}function B(){return L}return O.propertyGroup=propertyGroupFactory(O,B),D=r(M,P,O.propertyGroup),O.numProperties=D.length,O._name="Contents",O}}(),TextExpressionInterface=function(){return function(r){var s,a;function i(o){switch(o){case"ADBE Text Document":return i.sourceText;default:return null}}return Object.defineProperty(i,"sourceText",{get:function(){r.textProperty.getValue();var x=r.textProperty.currentData.t;return x!==s&&(s=r.textProperty.currentData.t,a=new String(x),a.value=x||new String(x),Object.defineProperty(a,"style",{get:function(){return{fillColor:r.textProperty.currentData.fc}}})),a}}),i}}();function _typeof$2(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(a){return typeof a}:_typeof$2=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$2(r)}var FootageInterface=function(){var r=function(i){var o="",x=i.getFootageData();function y(){return o="",x=i.getFootageData(),_}function _(E){if(x[E])return o=E,x=x[E],_typeof$2(x)==="object"?_:x;var R=E.indexOf(o);if(R!==-1){var S=parseInt(E.substr(R+o.length),10);return x=x[S],_typeof$2(x)==="object"?_:x}return""}return y},s=function(i){function o(x){return x==="Outline"?o.outlineInterface():null}return o._name="Outline",o.outlineInterface=r(i),o};return function(a){function i(o){return o==="Data"?i.dataInterface:null}return i._name="Data",i.dataInterface=s(a),i}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(r){return interfaces[r]||null}function _typeof$1(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(a){return typeof a}:_typeof$1=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$1(r)}function seedRandom(r,s){var a=this,i=256,o=6,x=52,y="random",_=s.pow(i,o),E=s.pow(2,x),R=E*2,S=i-1,j;function T(B,N,F){var W=[];N=N===!0?{entropy:!0}:N||{};var V=L(P(N.entropy?[B,O(r)]:B===null?D():B,3),W),U=new A(W),G=function(){for(var X=U.g(o),ee=_,ae=0;X<E;)X=(X+ae)*i,ee*=i,ae=U.g(1);for(;X>=R;)X/=2,ee/=2,ae>>>=1;return(X+ae)/ee};return G.int32=function(){return U.g(4)|0},G.quick=function(){return U.g(4)/4294967296},G.double=G,L(O(U.S),r),(N.pass||F||function(oe,X,ee,ae){return ae&&(ae.S&&M(ae,U),oe.state=function(){return M(U,{})}),ee?(s[y]=oe,X):oe})(G,V,"global"in N?N.global:this==s,N.state)}s["seed"+y]=T;function A(B){var N,F=B.length,W=this,V=0,U=W.i=W.j=0,G=W.S=[];for(F||(B=[F++]);V<i;)G[V]=V++;for(V=0;V<i;V++)G[V]=G[U=S&U+B[V%F]+(N=G[V])],G[U]=N;W.g=function(oe){for(var X,ee=0,ae=W.i,ie=W.j,se=W.S;oe--;)X=se[ae=S&ae+1],ee=ee*i+se[S&(se[ae]=se[ie=S&ie+X])+(se[ie]=X)];return W.i=ae,W.j=ie,ee}}function M(B,N){return N.i=B.i,N.j=B.j,N.S=B.S.slice(),N}function P(B,N){var F=[],W=_typeof$1(B),V;if(N&&W=="object")for(V in B)try{F.push(P(B[V],N-1))}catch{}return F.length?F:W=="string"?B:B+"\0"}function L(B,N){for(var F=B+"",W,V=0;V<F.length;)N[S&V]=S&(W^=N[S&V]*19)+F.charCodeAt(V++);return O(N)}function D(){try{var B=new Uint8Array(i);return(a.crypto||a.msCrypto).getRandomValues(B),O(B)}catch{var N=a.navigator,F=N&&N.plugins;return[+new Date,a,F,a.screen,O(r)]}}function O(B){return String.fromCharCode.apply(0,B)}L(s.random(),r)}function initialize$2(r){seedRandom([],r)}var propTypes={SHAPE:"shape"};function _typeof(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(a){return typeof a}:_typeof=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(r)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;initialize$2(BMMath);function $bm_isInstanceOfArray(r){return r.constructor===Array||r.constructor===Float32Array}function isNumerable(r,s){return r==="number"||r==="boolean"||r==="string"||s instanceof Number}function $bm_neg(r){var s=_typeof(r);if(s==="number"||s==="boolean"||r instanceof Number)return-r;if($bm_isInstanceOfArray(r)){var a,i=r.length,o=[];for(a=0;a<i;a+=1)o[a]=-r[a];return o}return r.propType?r.v:-r}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(r,s){var a=_typeof(r),i=_typeof(s);if(a==="string"||i==="string"||isNumerable(a,r)&&isNumerable(i,s))return r+s;if($bm_isInstanceOfArray(r)&&isNumerable(i,s))return r=r.slice(0),r[0]+=s,r;if(isNumerable(a,r)&&$bm_isInstanceOfArray(s))return s=s.slice(0),s[0]=r+s[0],s;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(s)){for(var o=0,x=r.length,y=s.length,_=[];o<x||o<y;)(typeof r[o]=="number"||r[o]instanceof Number)&&(typeof s[o]=="number"||s[o]instanceof Number)?_[o]=r[o]+s[o]:_[o]=s[o]===void 0?r[o]:r[o]||s[o],o+=1;return _}return 0}var add=sum;function sub(r,s){var a=_typeof(r),i=_typeof(s);if(isNumerable(a,r)&&isNumerable(i,s))return a==="string"&&(r=parseInt(r,10)),i==="string"&&(s=parseInt(s,10)),r-s;if($bm_isInstanceOfArray(r)&&isNumerable(i,s))return r=r.slice(0),r[0]-=s,r;if(isNumerable(a,r)&&$bm_isInstanceOfArray(s))return s=s.slice(0),s[0]=r-s[0],s;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(s)){for(var o=0,x=r.length,y=s.length,_=[];o<x||o<y;)(typeof r[o]=="number"||r[o]instanceof Number)&&(typeof s[o]=="number"||s[o]instanceof Number)?_[o]=r[o]-s[o]:_[o]=s[o]===void 0?r[o]:r[o]||s[o],o+=1;return _}return 0}function mul(r,s){var a=_typeof(r),i=_typeof(s),o;if(isNumerable(a,r)&&isNumerable(i,s))return r*s;var x,y;if($bm_isInstanceOfArray(r)&&isNumerable(i,s)){for(y=r.length,o=createTypedArray("float32",y),x=0;x<y;x+=1)o[x]=r[x]*s;return o}if(isNumerable(a,r)&&$bm_isInstanceOfArray(s)){for(y=s.length,o=createTypedArray("float32",y),x=0;x<y;x+=1)o[x]=r*s[x];return o}return 0}function div(r,s){var a=_typeof(r),i=_typeof(s),o;if(isNumerable(a,r)&&isNumerable(i,s))return r/s;var x,y;if($bm_isInstanceOfArray(r)&&isNumerable(i,s)){for(y=r.length,o=createTypedArray("float32",y),x=0;x<y;x+=1)o[x]=r[x]/s;return o}if(isNumerable(a,r)&&$bm_isInstanceOfArray(s)){for(y=s.length,o=createTypedArray("float32",y),x=0;x<y;x+=1)o[x]=r/s[x];return o}return 0}function mod(r,s){return typeof r=="string"&&(r=parseInt(r,10)),typeof s=="string"&&(s=parseInt(s,10)),r%s}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(r,s,a){if(s>a){var i=a;a=s,s=i}return Math.min(Math.max(r,s),a)}function radiansToDegrees(r){return r/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(r){return r*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(r,s){if(typeof r=="number"||r instanceof Number)return s=s||0,Math.abs(r-s);s||(s=helperLengthArray);var a,i=Math.min(r.length,s.length),o=0;for(a=0;a<i;a+=1)o+=Math.pow(s[a]-r[a],2);return Math.sqrt(o)}function normalize(r){return div(r,length(r))}function rgbToHsl(r){var s=r[0],a=r[1],i=r[2],o=Math.max(s,a,i),x=Math.min(s,a,i),y,_,E=(o+x)/2;if(o===x)y=0,_=0;else{var R=o-x;switch(_=E>.5?R/(2-o-x):R/(o+x),o){case s:y=(a-i)/R+(a<i?6:0);break;case a:y=(i-s)/R+2;break;case i:y=(s-a)/R+4;break}y/=6}return[y,_,E,r[3]]}function hue2rgb(r,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(s-r)*6*a:a<1/2?s:a<2/3?r+(s-r)*(2/3-a)*6:r}function hslToRgb(r){var s=r[0],a=r[1],i=r[2],o,x,y;if(a===0)o=i,y=i,x=i;else{var _=i<.5?i*(1+a):i+a-i*a,E=2*i-_;o=hue2rgb(E,_,s+1/3),x=hue2rgb(E,_,s),y=hue2rgb(E,_,s-1/3)}return[o,x,y,r[3]]}function linear(r,s,a,i,o){if((i===void 0||o===void 0)&&(i=s,o=a,s=0,a=1),a<s){var x=a;a=s,s=x}if(r<=s)return i;if(r>=a)return o;var y=a===s?0:(r-s)/(a-s);if(!i.length)return i+(o-i)*y;var _,E=i.length,R=createTypedArray("float32",E);for(_=0;_<E;_+=1)R[_]=i[_]+(o[_]-i[_])*y;return R}function random(r,s){if(s===void 0&&(r===void 0?(r=0,s=1):(s=r,r=void 0)),s.length){var a,i=s.length;r||(r=createTypedArray("float32",i));var o=createTypedArray("float32",i),x=BMMath.random();for(a=0;a<i;a+=1)o[a]=r[a]+x*(s[a]-r[a]);return o}r===void 0&&(r=0);var y=BMMath.random();return r+y*(s-r)}function createPath(r,s,a,i){var o,x=r.length,y=shapePool.newElement();y.setPathData(!!i,x);var _=[0,0],E,R;for(o=0;o<x;o+=1)E=s&&s[o]?s[o]:_,R=a&&a[o]?a[o]:_,y.setTripleAt(r[o][0],r[o][1],R[0]+r[o][0],R[1]+r[o][1],E[0]+r[o][0],E[1]+r[o][1],o,!0);return y}function initiateExpression(elem,data,property){function noOp(r){return r}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function r(s,a){var i,o,x=this.pv.length?this.pv.length:1,y=createTypedArray("float32",x);s=5;var _=Math.floor(time*s);for(i=0,o=0;i<_;){for(o=0;o<x;o+=1)y[o]+=-a+a*2*BMMath.random();i+=1}var E=time*s,R=E-Math.floor(E),S=createTypedArray("float32",x);if(x>1){for(o=0;o<x;o+=1)S[o]=this.pv[o]+y[o]+(-a+a*2*BMMath.random())*R;return S}return this.pv+y[0]+(-a+a*2*BMMath.random())*R}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(r,s){return loopIn(r,s,!0)}function loopOutDuration(r,s){return loopOut(r,s,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(r,s){var a=[s[0]-r[0],s[1]-r[1],s[2]-r[2]],i=Math.atan2(a[0],Math.sqrt(a[1]*a[1]+a[2]*a[2]))/degToRads,o=-Math.atan2(a[1],a[2])/degToRads;return[o,i,0]}function easeOut(r,s,a,i,o){return applyEase(easeOutBez,r,s,a,i,o)}function easeIn(r,s,a,i,o){return applyEase(easeInBez,r,s,a,i,o)}function ease(r,s,a,i,o){return applyEase(easeInOutBez,r,s,a,i,o)}function applyEase(r,s,a,i,o,x){o===void 0?(o=a,x=i):s=(s-a)/(i-a),s>1?s=1:s<0&&(s=0);var y=r(s);if($bm_isInstanceOfArray(o)){var _,E=o.length,R=createTypedArray("float32",E);for(_=0;_<E;_+=1)R[_]=(x[_]-o[_])*y+o[_];return R}return(x-o)*y+o}function nearestKey(r){var s,a=data.k.length,i,o;if(!data.k.length||typeof data.k[0]=="number")i=0,o=0;else if(i=-1,r*=elem.comp.globalData.frameRate,r<data.k[0].t)i=1,o=data.k[0].t;else{for(s=0;s<a-1;s+=1)if(r===data.k[s].t){i=s+1,o=data.k[s].t;break}else if(r>data.k[s].t&&r<data.k[s+1].t){r-data.k[s].t>data.k[s+1].t-r?(i=s+2,o=data.k[s+1].t):(i=s+1,o=data.k[s].t);break}i===-1&&(i=s+1,o=data.k[s].t)}var x={};return x.index=i,x.time=o/elem.comp.globalData.frameRate,x}function key(r){var s,a,i;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+r);r-=1,s={time:data.k[r].t/elem.comp.globalData.frameRate,value:[]};var o=Object.prototype.hasOwnProperty.call(data.k[r],"s")?data.k[r].s:data.k[r-1].e;for(i=o.length,a=0;a<i;a+=1)s[a]=o[a],s.value[a]=o[a];return s}function framesToTime(r,s){return s||(s=elem.comp.globalData.frameRate),r/s}function timeToFrames(r,s){return!r&&r!==0&&(r=time),s||(s=elem.comp.globalData.frameRate),r*s}function seedRandom(r){BMMath.seedrandom(randSeed+r)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(r,s){return typeof value=="string"?s===void 0?value.substring(r):value.substring(r,s):""}function substr(r,s){return typeof value=="string"?s===void 0?value.substr(r):value.substr(r,s):""}function posterizeTime(r){time=r===0?0:Math.floor(time*r)/r,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(r){return value=r,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers=function(){function r(y,_,E){_.x&&(E.k=!0,E.x=!0,E.initiateExpression=ExpressionManager.initiateExpression,E.effectsSequence.push(E.initiateExpression(y,_,E).bind(E)))}function s(y){return y*=this.elem.globalData.frameRate,y-=this.offsetTime,y!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<y?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(y,this._cachingAtTime),this._cachingAtTime.lastFrame=y),this._cachingAtTime.value}function a(y){var _=-.01,E=this.getValueAtTime(y),R=this.getValueAtTime(y+_),S=0;if(E.length){var j;for(j=0;j<E.length;j+=1)S+=Math.pow(R[j]-E[j],2);S=Math.sqrt(S)*100}else S=0;return S}function i(y){if(this.vel!==void 0)return this.vel;var _=-.001,E=this.getValueAtTime(y),R=this.getValueAtTime(y+_),S;if(E.length){S=createTypedArray("float32",E.length);var j;for(j=0;j<E.length;j+=1)S[j]=(R[j]-E[j])/_}else S=(R-E)/_;return S}function o(){return this.pv}function x(y){this.propertyGroup=y}return{searchExpressions:r,getSpeedAtTime:a,getVelocityAtTime:i,getValueAtTime:s,getStaticValueAtTime:o,setGroupProperty:x}}();function addPropertyDecorator(){function r(T,A,M){if(!this.k||!this.keyframes)return this.pv;T=T?T.toLowerCase():"";var P=this.comp.renderedFrame,L=this.keyframes,D=L[L.length-1].t;if(P<=D)return this.pv;var O,B;M?(A?O=Math.abs(D-this.elem.comp.globalData.frameRate*A):O=Math.max(0,D-this.elem.data.ip),B=D-O):((!A||A>L.length-1)&&(A=L.length-1),B=L[L.length-1-A].t,O=D-B);var N,F,W;if(T==="pingpong"){var V=Math.floor((P-B)/O);if(V%2!==0)return this.getValueAtTime((O-(P-B)%O+B)/this.comp.globalData.frameRate,0)}else if(T==="offset"){var U=this.getValueAtTime(B/this.comp.globalData.frameRate,0),G=this.getValueAtTime(D/this.comp.globalData.frameRate,0),oe=this.getValueAtTime(((P-B)%O+B)/this.comp.globalData.frameRate,0),X=Math.floor((P-B)/O);if(this.pv.length){for(W=new Array(U.length),F=W.length,N=0;N<F;N+=1)W[N]=(G[N]-U[N])*X+oe[N];return W}return(G-U)*X+oe}else if(T==="continue"){var ee=this.getValueAtTime(D/this.comp.globalData.frameRate,0),ae=this.getValueAtTime((D-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(W=new Array(ee.length),F=W.length,N=0;N<F;N+=1)W[N]=ee[N]+(ee[N]-ae[N])*((P-D)/this.comp.globalData.frameRate)/5e-4;return W}return ee+(ee-ae)*((P-D)/.001)}return this.getValueAtTime(((P-B)%O+B)/this.comp.globalData.frameRate,0)}function s(T,A,M){if(!this.k)return this.pv;T=T?T.toLowerCase():"";var P=this.comp.renderedFrame,L=this.keyframes,D=L[0].t;if(P>=D)return this.pv;var O,B;M?(A?O=Math.abs(this.elem.comp.globalData.frameRate*A):O=Math.max(0,this.elem.data.op-D),B=D+O):((!A||A>L.length-1)&&(A=L.length-1),B=L[A].t,O=B-D);var N,F,W;if(T==="pingpong"){var V=Math.floor((D-P)/O);if(V%2===0)return this.getValueAtTime(((D-P)%O+D)/this.comp.globalData.frameRate,0)}else if(T==="offset"){var U=this.getValueAtTime(D/this.comp.globalData.frameRate,0),G=this.getValueAtTime(B/this.comp.globalData.frameRate,0),oe=this.getValueAtTime((O-(D-P)%O+D)/this.comp.globalData.frameRate,0),X=Math.floor((D-P)/O)+1;if(this.pv.length){for(W=new Array(U.length),F=W.length,N=0;N<F;N+=1)W[N]=oe[N]-(G[N]-U[N])*X;return W}return oe-(G-U)*X}else if(T==="continue"){var ee=this.getValueAtTime(D/this.comp.globalData.frameRate,0),ae=this.getValueAtTime((D+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(W=new Array(ee.length),F=W.length,N=0;N<F;N+=1)W[N]=ee[N]+(ee[N]-ae[N])*(D-P)/.001;return W}return ee+(ee-ae)*(D-P)/.001}return this.getValueAtTime((O-((D-P)%O+D))/this.comp.globalData.frameRate,0)}function a(T,A){if(!this.k)return this.pv;if(T=(T||.4)*.5,A=Math.floor(A||5),A<=1)return this.pv;var M=this.comp.renderedFrame/this.comp.globalData.frameRate,P=M-T,L=M+T,D=A>1?(L-P)/(A-1):1,O=0,B=0,N;this.pv.length?N=createTypedArray("float32",this.pv.length):N=0;for(var F;O<A;){if(F=this.getValueAtTime(P+O*D),this.pv.length)for(B=0;B<this.pv.length;B+=1)N[B]+=F[B];else N+=F;O+=1}if(this.pv.length)for(B=0;B<this.pv.length;B+=1)N[B]/=A;else N/=A;return N}function i(T){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var A=this._transformCachingAtTime.v;if(A.cloneFromProps(this.pre.props),this.appliedTransformations<1){var M=this.a.getValueAtTime(T);A.translate(-M[0]*this.a.mult,-M[1]*this.a.mult,M[2]*this.a.mult)}if(this.appliedTransformations<2){var P=this.s.getValueAtTime(T);A.scale(P[0]*this.s.mult,P[1]*this.s.mult,P[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var L=this.sk.getValueAtTime(T),D=this.sa.getValueAtTime(T);A.skewFromAxis(-L*this.sk.mult,D*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var O=this.r.getValueAtTime(T);A.rotate(-O*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var B=this.rz.getValueAtTime(T),N=this.ry.getValueAtTime(T),F=this.rx.getValueAtTime(T),W=this.or.getValueAtTime(T);A.rotateZ(-B*this.rz.mult).rotateY(N*this.ry.mult).rotateX(F*this.rx.mult).rotateZ(-W[2]*this.or.mult).rotateY(W[1]*this.or.mult).rotateX(W[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var V=this.px.getValueAtTime(T),U=this.py.getValueAtTime(T);if(this.data.p.z){var G=this.pz.getValueAtTime(T);A.translate(V*this.px.mult,U*this.py.mult,-G*this.pz.mult)}else A.translate(V*this.px.mult,U*this.py.mult,0)}else{var oe=this.p.getValueAtTime(T);A.translate(oe[0]*this.p.mult,oe[1]*this.p.mult,-oe[2]*this.p.mult)}return A}function o(){return this.v.clone(new Matrix)}var x=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(T,A,M){var P=x(T,A,M);return P.dynamicProperties.length?P.getValueAtTime=i.bind(P):P.getValueAtTime=o.bind(P),P.setGroupProperty=expressionHelpers.setGroupProperty,P};var y=PropertyFactory.getProp;PropertyFactory.getProp=function(T,A,M,P,L){var D=y(T,A,M,P,L);D.kf?D.getValueAtTime=expressionHelpers.getValueAtTime.bind(D):D.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(D),D.setGroupProperty=expressionHelpers.setGroupProperty,D.loopOut=r,D.loopIn=s,D.smooth=a,D.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(D),D.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(D),D.numKeys=A.a===1?A.k.length:0,D.propertyIndex=A.ix;var O=0;return M!==0&&(O=createTypedArray("float32",A.a===1?A.k[0].s.length:A.k.length)),D._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:O},expressionHelpers.searchExpressions(T,A,D),D.k&&L.addDynamicProperty(D),D};function _(T){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),T*=this.elem.globalData.frameRate,T-=this.offsetTime,T!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<T?this._caching.lastIndex:0,this._cachingAtTime.lastTime=T,this.interpolateShape(T,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var E=ShapePropertyFactory.getConstructorFunction(),R=ShapePropertyFactory.getKeyframedConstructorFunction();function S(){}S.prototype={vertices:function(A,M){this.k&&this.getValue();var P=this.v;M!==void 0&&(P=this.getValueAtTime(M,0));var L,D=P._length,O=P[A],B=P.v,N=createSizedArray(D);for(L=0;L<D;L+=1)A==="i"||A==="o"?N[L]=[O[L][0]-B[L][0],O[L][1]-B[L][1]]:N[L]=[O[L][0],O[L][1]];return N},points:function(A){return this.vertices("v",A)},inTangents:function(A){return this.vertices("i",A)},outTangents:function(A){return this.vertices("o",A)},isClosed:function(){return this.v.c},pointOnPath:function(A,M){var P=this.v;M!==void 0&&(P=this.getValueAtTime(M,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(P));for(var L=this._segmentsLength,D=L.lengths,O=L.totalLength*A,B=0,N=D.length,F=0,W;B<N;){if(F+D[B].addedLength>O){var V=B,U=P.c&&B===N-1?0:B+1,G=(O-F)/D[B].addedLength;W=bez.getPointInSegment(P.v[V],P.v[U],P.o[V],P.i[U],G,D[B]);break}else F+=D[B].addedLength;B+=1}return W||(W=P.c?[P.v[0][0],P.v[0][1]]:[P.v[P._length-1][0],P.v[P._length-1][1]]),W},vectorOnPath:function(A,M,P){A==1?A=this.v.c:A==0&&(A=.999);var L=this.pointOnPath(A,M),D=this.pointOnPath(A+.001,M),O=D[0]-L[0],B=D[1]-L[1],N=Math.sqrt(Math.pow(O,2)+Math.pow(B,2));if(N===0)return[0,0];var F=P==="tangent"?[O/N,B/N]:[-B/N,O/N];return F},tangentOnPath:function(A,M){return this.vectorOnPath(A,M,"tangent")},normalOnPath:function(A,M){return this.vectorOnPath(A,M,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([S],E),extendPrototype([S],R),R.prototype.getValueAtTime=_,R.prototype.initiateExpression=ExpressionManager.initiateExpression;var j=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(T,A,M,P,L){var D=j(T,A,M,P,L);return D.propertyIndex=A.ix,D.lock=!1,M===3?expressionHelpers.searchExpressions(T,A.pt,D):M===4&&expressionHelpers.searchExpressions(T,A.ks,D),D.k&&T.addDynamicProperty(D),D}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function r(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(s,a){var i=this.calculateExpression(a);if(s.t!==i){var o={};return this.copyData(o,s),o.t=i.toString(),o.__complete=!1,o}return s},TextProperty.prototype.searchProperty=function(){var s=this.searchKeyframes(),a=this.searchExpressions();return this.kf=s||a,this.kf},TextProperty.prototype.searchExpressions=r}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function r(s,a){var i=createNS("feMerge");i.setAttribute("result",s);var o,x;for(x=0;x<a.length;x+=1)o=createNS("feMergeNode"),o.setAttribute("in",a[x]),i.appendChild(o),i.appendChild(o);return i}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(r,s,a,i,o){this.filterManager=s;var x=createNS("feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("color-interpolation-filters","linearRGB"),x.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=x,x.setAttribute("result",i+"_tint_1"),r.appendChild(x),x=createNS("feColorMatrix"),x.setAttribute("type","matrix"),x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),x.setAttribute("result",i+"_tint_2"),r.appendChild(x),this.matrixFilter=x;var y=this.createMergeNode(i,[o,i+"_tint_1",i+"_tint_2"]);r.appendChild(y)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var s=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",a[0]-s[0]+" 0 0 0 "+s[0]+" "+(a[1]-s[1])+" 0 0 0 "+s[1]+" "+(a[2]-s[2])+" 0 0 0 "+s[2]+" 0 0 0 1 0")}};function SVGFillFilter(r,s,a,i){this.filterManager=s;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",i),r.appendChild(o),this.matrixFilter=o}SVGFillFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var s=this.filterManager.effectElements[2].p.v,a=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+s[0]+" 0 0 0 0 "+s[1]+" 0 0 0 0 "+s[2]+" 0 0 0 "+a+" 0")}};function SVGStrokeEffect(r,s,a){this.initialized=!1,this.filterManager=s,this.elem=a,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var r=this.elem.layerElement.children||this.elem.layerElement.childNodes,s,a,i,o;for(this.filterManager.effectElements[1].p.v===1?(o=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,o=i+1),a=createNS("g"),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-dashoffset",1),i;i<o;i+=1)s=createNS("path"),a.appendChild(s),this.paths.push({p:s,m:i});if(this.filterManager.effectElements[10].p.v===3){var x=createNS("mask"),y=createElementID();x.setAttribute("id",y),x.setAttribute("mask-type","alpha"),x.appendChild(a),this.elem.globalData.defs.appendChild(x);var _=createNS("g");for(_.setAttribute("mask","url("+getLocationHref()+"#"+y+")");r[0];)_.appendChild(r[0]);this.elem.layerElement.appendChild(_),this.masker=x,a.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(a),this.elem.layerElement.removeAttribute("mask"),a.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=a},SVGStrokeEffect.prototype.renderFrame=function(r){this.initialized||this.initialize();var s,a=this.paths.length,i,o;for(s=0;s<a;s+=1)if(this.paths[s].m!==-1&&(i=this.elem.maskManager.viewData[this.paths[s].m],o=this.paths[s].p,(r||this.filterManager._mdf||i.prop._mdf)&&o.setAttribute("d",i.lastPath),r||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var x;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var y=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,_=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,E=o.getTotalLength();x="0 0 0 "+E*y+" ";var R=E*(_-y),S=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,j=Math.floor(R/S),T;for(T=0;T<j;T+=1)x+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";x+="0 "+E*10+" 0 0"}else x="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;o.setAttribute("stroke-dasharray",x)}if((r||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(r||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(r||this.filterManager.effectElements[3].p._mdf)){var A=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(A[0]*255)+","+bmFloor(A[1]*255)+","+bmFloor(A[2]*255)+")")}};function SVGTritoneFilter(r,s,a,i){this.filterManager=s;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.appendChild(o);var x=createNS("feComponentTransfer");x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("result",i),this.matrixFilter=x;var y=createNS("feFuncR");y.setAttribute("type","table"),x.appendChild(y),this.feFuncR=y;var _=createNS("feFuncG");_.setAttribute("type","table"),x.appendChild(_),this.feFuncG=_;var E=createNS("feFuncB");E.setAttribute("type","table"),x.appendChild(E),this.feFuncB=E,r.appendChild(x)}SVGTritoneFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var s=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,o=i[0]+" "+a[0]+" "+s[0],x=i[1]+" "+a[1]+" "+s[1],y=i[2]+" "+a[2]+" "+s[2];this.feFuncR.setAttribute("tableValues",o),this.feFuncG.setAttribute("tableValues",x),this.feFuncB.setAttribute("tableValues",y)}};function SVGProLevelsFilter(r,s,a,i){this.filterManager=s;var o=this.filterManager.effectElements,x=createNS("feComponentTransfer");(o[10].p.k||o[10].p.v!==0||o[11].p.k||o[11].p.v!==1||o[12].p.k||o[12].p.v!==1||o[13].p.k||o[13].p.v!==0||o[14].p.k||o[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",x)),(o[17].p.k||o[17].p.v!==0||o[18].p.k||o[18].p.v!==1||o[19].p.k||o[19].p.v!==1||o[20].p.k||o[20].p.v!==0||o[21].p.k||o[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",x)),(o[24].p.k||o[24].p.v!==0||o[25].p.k||o[25].p.v!==1||o[26].p.k||o[26].p.v!==1||o[27].p.k||o[27].p.v!==0||o[28].p.k||o[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",x)),(o[31].p.k||o[31].p.v!==0||o[32].p.k||o[32].p.v!==1||o[33].p.k||o[33].p.v!==1||o[34].p.k||o[34].p.v!==0||o[35].p.k||o[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",x)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(x.setAttribute("color-interpolation-filters","sRGB"),r.appendChild(x)),(o[3].p.k||o[3].p.v!==0||o[4].p.k||o[4].p.v!==1||o[5].p.k||o[5].p.v!==1||o[6].p.k||o[6].p.v!==0||o[7].p.k||o[7].p.v!==1)&&(x=createNS("feComponentTransfer"),x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("result",i),r.appendChild(x),this.feFuncRComposed=this.createFeFunc("feFuncR",x),this.feFuncGComposed=this.createFeFunc("feFuncG",x),this.feFuncBComposed=this.createFeFunc("feFuncB",x))}SVGProLevelsFilter.prototype.createFeFunc=function(r,s){var a=createNS(r);return a.setAttribute("type","table"),s.appendChild(a),a},SVGProLevelsFilter.prototype.getTableValue=function(r,s,a,i,o){for(var x=0,y=256,_,E=Math.min(r,s),R=Math.max(r,s),S=Array.call(null,{length:y}),j,T=0,A=o-i,M=s-r;x<=256;)_=x/256,_<=E?j=M<0?o:i:_>=R?j=M<0?i:o:j=i+A*Math.pow((_-r)/M,1/a),S[T]=j,T+=1,x+=256/(y-1);return S.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var s,a=this.filterManager.effectElements;this.feFuncRComposed&&(r||a[3].p._mdf||a[4].p._mdf||a[5].p._mdf||a[6].p._mdf||a[7].p._mdf)&&(s=this.getTableValue(a[3].p.v,a[4].p.v,a[5].p.v,a[6].p.v,a[7].p.v),this.feFuncRComposed.setAttribute("tableValues",s),this.feFuncGComposed.setAttribute("tableValues",s),this.feFuncBComposed.setAttribute("tableValues",s)),this.feFuncR&&(r||a[10].p._mdf||a[11].p._mdf||a[12].p._mdf||a[13].p._mdf||a[14].p._mdf)&&(s=this.getTableValue(a[10].p.v,a[11].p.v,a[12].p.v,a[13].p.v,a[14].p.v),this.feFuncR.setAttribute("tableValues",s)),this.feFuncG&&(r||a[17].p._mdf||a[18].p._mdf||a[19].p._mdf||a[20].p._mdf||a[21].p._mdf)&&(s=this.getTableValue(a[17].p.v,a[18].p.v,a[19].p.v,a[20].p.v,a[21].p.v),this.feFuncG.setAttribute("tableValues",s)),this.feFuncB&&(r||a[24].p._mdf||a[25].p._mdf||a[26].p._mdf||a[27].p._mdf||a[28].p._mdf)&&(s=this.getTableValue(a[24].p.v,a[25].p.v,a[26].p.v,a[27].p.v,a[28].p.v),this.feFuncB.setAttribute("tableValues",s)),this.feFuncA&&(r||a[31].p._mdf||a[32].p._mdf||a[33].p._mdf||a[34].p._mdf||a[35].p._mdf)&&(s=this.getTableValue(a[31].p.v,a[32].p.v,a[33].p.v,a[34].p.v,a[35].p.v),this.feFuncA.setAttribute("tableValues",s))}};function SVGDropShadowEffect(r,s,a,i,o){var x=s.container.globalData.renderConfig.filterSize,y=s.data.fs||x;r.setAttribute("x",y.x||x.x),r.setAttribute("y",y.y||x.y),r.setAttribute("width",y.width||x.width),r.setAttribute("height",y.height||x.height),this.filterManager=s;var _=createNS("feGaussianBlur");_.setAttribute("in","SourceAlpha"),_.setAttribute("result",i+"_drop_shadow_1"),_.setAttribute("stdDeviation","0"),this.feGaussianBlur=_,r.appendChild(_);var E=createNS("feOffset");E.setAttribute("dx","25"),E.setAttribute("dy","0"),E.setAttribute("in",i+"_drop_shadow_1"),E.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=E,r.appendChild(E);var R=createNS("feFlood");R.setAttribute("flood-color","#00ff00"),R.setAttribute("flood-opacity","1"),R.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=R,r.appendChild(R);var S=createNS("feComposite");S.setAttribute("in",i+"_drop_shadow_3"),S.setAttribute("in2",i+"_drop_shadow_2"),S.setAttribute("operator","in"),S.setAttribute("result",i+"_drop_shadow_4"),r.appendChild(S);var j=this.createMergeNode(i,[i+"_drop_shadow_4",o]);r.appendChild(j)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){if((r||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),r||this.filterManager.effectElements[0].p._mdf){var s=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)))}if((r||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),r||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var a=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,o=a*Math.cos(i),x=a*Math.sin(i);this.feOffset.setAttribute("dx",o),this.feOffset.setAttribute("dy",x)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(r,s,a){this.initialized=!1,this.filterManager=s,this.filterElem=r,this.elem=a,a.matteElement=createNS("g"),a.matteElement.appendChild(a.layerElement),a.matteElement.appendChild(a.transformedElement),a.baseElement=a.matteElement}SVGMatte3Effect.prototype.findSymbol=function(r){for(var s=0,a=_svgMatteSymbols.length;s<a;){if(_svgMatteSymbols[s]===r)return _svgMatteSymbols[s];s+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(r,s){var a=r.layerElement.parentNode;if(a){for(var i=a.children,o=0,x=i.length;o<x&&i[o]!==r.layerElement;)o+=1;var y;o<=x-2&&(y=i[o+1]);var _=createNS("use");_.setAttribute("href","#"+s),y?a.insertBefore(_,y):a.appendChild(_)}},SVGMatte3Effect.prototype.setElementAsMask=function(r,s){if(!this.findSymbol(s)){var a=createElementID(),i=createNS("mask");i.setAttribute("id",s.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(s);var o=r.globalData.defs;o.appendChild(i);var x=createNS("symbol");x.setAttribute("id",a),this.replaceInParent(s,a),x.appendChild(s.layerElement),o.appendChild(x);var y=createNS("use");y.setAttribute("href","#"+a),i.appendChild(y),s.data.hd=!1,s.show()}r.setMatte(s.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var r=this.filterManager.effectElements[0].p.v,s=this.elem.comp.elements,a=0,i=s.length;a<i;)s[a]&&s[a].data.ind===r&&this.setElementAsMask(this.elem,s[a]),a+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(r,s,a,i){r.setAttribute("x","-100%"),r.setAttribute("y","-100%"),r.setAttribute("width","300%"),r.setAttribute("height","300%"),this.filterManager=s;var o=createNS("feGaussianBlur");o.setAttribute("result",i),r.appendChild(o),this.feGaussianBlur=o}return SVGGaussianBlurEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var s=.3,a=this.filterManager.effectElements[0].p.v*s,i=this.filterManager.effectElements[1].p.v,o=i==3?0:a,x=i==2?0:a;this.feGaussianBlur.setAttribute("stdDeviation",o+" "+x);var y=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",y)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(r,s){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var i,o,x,y,_=[],E=!0,R=!1;try{if(x=(a=a.call(r)).next,s!==0)for(;!(E=(i=x.call(a)).done)&&(_.push(i.value),_.length!==s);E=!0);}catch(S){R=!0,o=S}finally{try{if(!E&&a.return!=null&&(y=a.return(),Object(y)!==y))return}finally{if(R)throw o}}return _}}function ownKeys(r,s){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);s&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,i)}return a}function _objectSpread2(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(a),!0).forEach(function(i){_defineProperty(r,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(a,i))})}return r}function _defineProperty(r,s,a){return s=_toPropertyKey(s),s in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function _objectWithoutPropertiesLoose(r,s){if(r==null)return{};var a={},i=Object.keys(r),o,x;for(x=0;x<i.length;x++)o=i[x],!(s.indexOf(o)>=0)&&(a[o]=r[o]);return a}function _objectWithoutProperties(r,s){if(r==null)return{};var a=_objectWithoutPropertiesLoose(r,s),i,o;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(r);for(o=0;o<x.length;o++)i=x[o],!(s.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}function _slicedToArray(r,s){return _arrayWithHoles(r)||_iterableToArrayLimit(r,s)||_unsupportedIterableToArray(r,s)||_nonIterableRest()}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _unsupportedIterableToArray(r,s){if(r){if(typeof r=="string")return _arrayLikeToArray(r,s);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(r,s)}}function _arrayLikeToArray(r,s){(s==null||s>r.length)&&(s=r.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=r[a];return i}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(r,s){if(typeof r!="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,s||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function _toPropertyKey(r){var s=_toPrimitive(r,"string");return typeof s=="symbol"?s:String(s)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function r(s,a){var i=s.animationData,o=s.loop,x=s.autoplay,y=s.initialSegment,_=s.onComplete,E=s.onLoopComplete,R=s.onEnterFrame,S=s.onSegmentStart,j=s.onConfigReady,T=s.onDataReady,A=s.onDataFailed,M=s.onLoadedImages,P=s.onDOMLoaded,L=s.onDestroy;s.lottieRef,s.renderer,s.name,s.assetsPath,s.rendererSettings;var D=_objectWithoutProperties(s,_excluded$1),O=reactExports.useState(!1),B=_slicedToArray(O,2),N=B[0],F=B[1],W=reactExports.useRef(),V=reactExports.useRef(null),U=function(){var me;(me=W.current)===null||me===void 0||me.play()},G=function(){var me;(me=W.current)===null||me===void 0||me.stop()},oe=function(){var me;(me=W.current)===null||me===void 0||me.pause()},X=function(me){var ve;(ve=W.current)===null||ve===void 0||ve.setSpeed(me)},ee=function(me,ve){var xe;(xe=W.current)===null||xe===void 0||xe.goToAndPlay(me,ve)},ae=function(me,ve){var xe;(xe=W.current)===null||xe===void 0||xe.goToAndStop(me,ve)},ie=function(me){var ve;(ve=W.current)===null||ve===void 0||ve.setDirection(me)},se=function(me,ve){var xe;(xe=W.current)===null||xe===void 0||xe.playSegments(me,ve)},Q=function(me){var ve;(ve=W.current)===null||ve===void 0||ve.setSubframe(me)},Z=function(me){var ve;return(ve=W.current)===null||ve===void 0?void 0:ve.getDuration(me)},J=function(){var me;(me=W.current)===null||me===void 0||me.destroy(),W.current=void 0},te=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve;if(V.current){(ve=W.current)===null||ve===void 0||ve.destroy();var xe=_objectSpread2(_objectSpread2(_objectSpread2({},s),me),{},{container:V.current});return W.current=lottie.loadAnimation(xe),F(!!W.current),function(){var ge;(ge=W.current)===null||ge===void 0||ge.destroy(),W.current=void 0}}};reactExports.useEffect(function(){var ce=te();return function(){return ce==null?void 0:ce()}},[i,o]),reactExports.useEffect(function(){W.current&&(W.current.autoplay=!!x)},[x]),reactExports.useEffect(function(){if(W.current){if(!y){W.current.resetSegments(!0);return}!Array.isArray(y)||!y.length||((W.current.currentRawFrame<y[0]||W.current.currentRawFrame>y[1])&&(W.current.currentRawFrame=y[0]),W.current.setSegment(y[0],y[1]))}},[y]),reactExports.useEffect(function(){var ce=[{name:"complete",handler:_},{name:"loopComplete",handler:E},{name:"enterFrame",handler:R},{name:"segmentStart",handler:S},{name:"config_ready",handler:j},{name:"data_ready",handler:T},{name:"data_failed",handler:A},{name:"loaded_images",handler:M},{name:"DOMLoaded",handler:P},{name:"destroy",handler:L}],me=ce.filter(function(xe){return xe.handler!=null});if(me.length){var ve=me.map(function(xe){var ge;return(ge=W.current)===null||ge===void 0||ge.addEventListener(xe.name,xe.handler),function(){var be;(be=W.current)===null||be===void 0||be.removeEventListener(xe.name,xe.handler)}});return function(){ve.forEach(function(xe){return xe()})}}},[_,E,R,S,j,T,A,M,P,L]);var de=React$6.createElement("div",_objectSpread2({style:a,ref:V},D));return{View:de,play:U,stop:G,pause:oe,setSpeed:X,goToAndStop:ae,goToAndPlay:ee,setDirection:ie,playSegments:se,setSubframe:Q,getDuration:Z,destroy:J,animationContainerRef:V,animationLoaded:N,animationItem:W.current}};function getContainerVisibility(r){var s=r.getBoundingClientRect(),a=s.top,i=s.height,o=window.innerHeight-a,x=window.innerHeight+i;return o/x}function getContainerCursorPosition(r,s,a){var i=r.getBoundingClientRect(),o=i.top,x=i.left,y=i.width,_=i.height,E=(s-x)/y,R=(a-o)/_;return{x:E,y:R}}var useInitInteractivity=function r(s){var a=s.wrapperRef,i=s.animationItem,o=s.mode,x=s.actions;reactExports.useEffect(function(){var y=a.current;if(!(!y||!i||!x.length)){i.stop();var _=function(){var S=null,j=function(){var A=getContainerVisibility(y),M=x.find(function(L){var D=L.visibility;return D&&A>=D[0]&&A<=D[1]});if(M){if(M.type==="seek"&&M.visibility&&M.frames.length===2){var P=M.frames[0]+Math.ceil((A-M.visibility[0])/(M.visibility[1]-M.visibility[0])*M.frames[1]);//! goToAndStop must be relative to the start of the current segment
i.goToAndStop(P-i.firstFrame-1,!0)}M.type==="loop"&&(S===null||S!==M.frames||i.isPaused)&&(i.playSegments(M.frames,!0),S=M.frames),M.type==="play"&&i.isPaused&&(i.resetSegments(!0),i.play()),M.type==="stop"&&i.goToAndStop(M.frames[0]-i.firstFrame-1,!0)}};return document.addEventListener("scroll",j),function(){document.removeEventListener("scroll",j)}},E=function(){var S=function(M,P){var L=M,D=P;if(L!==-1&&D!==-1){var O=getContainerCursorPosition(y,L,D);L=O.x,D=O.y}var B=x.find(function(W){var V=W.position;return V&&Array.isArray(V.x)&&Array.isArray(V.y)?L>=V.x[0]&&L<=V.x[1]&&D>=V.y[0]&&D<=V.y[1]:V&&!Number.isNaN(V.x)&&!Number.isNaN(V.y)?L===V.x&&D===V.y:!1});if(B){if(B.type==="seek"&&B.position&&Array.isArray(B.position.x)&&Array.isArray(B.position.y)&&B.frames.length===2){var N=(L-B.position.x[0])/(B.position.x[1]-B.position.x[0]),F=(D-B.position.y[0])/(B.position.y[1]-B.position.y[0]);i.playSegments(B.frames,!0),i.goToAndStop(Math.ceil((N+F)/2*(B.frames[1]-B.frames[0])),!0)}B.type==="loop"&&i.playSegments(B.frames,!0),B.type==="play"&&(i.isPaused&&i.resetSegments(!1),i.playSegments(B.frames)),B.type==="stop"&&i.goToAndStop(B.frames[0],!0)}},j=function(M){S(M.clientX,M.clientY)},T=function(){S(-1,-1)};return y.addEventListener("mousemove",j),y.addEventListener("mouseout",T),function(){y.removeEventListener("mousemove",j),y.removeEventListener("mouseout",T)}};switch(o){case"scroll":return _();case"cursor":return E()}}},[o,i])},useLottieInteractivity=function r(s){var a=s.actions,i=s.mode,o=s.lottieObj,x=o.animationItem,y=o.View,_=o.animationContainerRef;return useInitInteractivity({actions:a,animationItem:x,mode:i,wrapperRef:_}),y},_excluded=["style","interactivity"],Lottie=function r(s){var a,i,o,x=s.style,y=s.interactivity,_=_objectWithoutProperties(s,_excluded),E=useLottie(_,x),R=E.View,S=E.play,j=E.stop,T=E.pause,A=E.setSpeed,M=E.goToAndStop,P=E.goToAndPlay,L=E.setDirection,D=E.playSegments,O=E.setSubframe,B=E.getDuration,N=E.destroy,F=E.animationContainerRef,W=E.animationLoaded,V=E.animationItem;return reactExports.useEffect(function(){s.lottieRef&&(s.lottieRef.current={play:S,stop:j,pause:T,setSpeed:A,goToAndPlay:P,goToAndStop:M,setDirection:L,playSegments:D,setSubframe:O,getDuration:B,destroy:N,animationContainerRef:F,animationLoaded:W,animationItem:V})},[(a=s.lottieRef)===null||a===void 0?void 0:a.current]),useLottieInteractivity({lottieObj:{View:R,play:S,stop:j,pause:T,setSpeed:A,goToAndStop:M,goToAndPlay:P,setDirection:L,playSegments:D,setSubframe:O,getDuration:B,destroy:N,animationContainerRef:F,animationLoaded:W,animationItem:V},actions:(i=y==null?void 0:y.actions)!==null&&i!==void 0?i:[],mode:(o=y==null?void 0:y.mode)!==null&&o!==void 0?o:"scroll"})};const v$1="5.5.6",fr=60,ip=0,op=300,w=609,h$1=812,nm="lottie (mobile)",ddd=0,assets=[{id:"comp_0",layers:[{ddd:0,ind:1,ty:0,nm:"_small-side",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[218,320,0],ix:2},a:{a:0,k:[400,400,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,w:800,h:800,ip:15,op:234,st:15,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:1,ty:4,nm:"streamer b",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:166,ix:10},p:{a:0,k:[554,664,0],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.2627450980392157,.2,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9,s:[4]},{t:57,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:14,s:[0]},{t:57,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:14,s:[35]},{t:57,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:9,op:58,st:9,bm:0},{ddd:0,ind:2,ty:4,nm:"streamer a",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:167,ix:10},p:{a:0,k:[532,582,0],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[4]},{t:48,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:10,s:[0]},{t:48,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:10,s:[35]},{t:48,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:5,op:49,st:5,bm:0},{ddd:0,ind:3,ty:4,nm:"circle a",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:29,s:[321.019]},{t:158,s:[1800]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:1,s:[599.5,838,0],to:[-30,-106.667,0],ti:[46.667,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:29,s:[419.5,198,0],to:[-46.667,0,0],ti:[0,0,0]},{t:158,s:[319.5,838,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:1,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:29,s:[100,100,100]},{t:128,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:1,op:159,st:1,bm:0},{ddd:0,ind:4,ty:4,nm:"circle b",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3,s:[0]},{t:128,s:[1440]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:3,s:[599.5,838,0],to:[-26.667,-93.333,0],ti:[66.667,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:21,s:[439.5,278,0],to:[-66.667,0,0],ti:[0,0,0]},{t:128,s:[199.5,838,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:3,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:21,s:[100,100,100]},{t:98,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:129,st:3,bm:0},{ddd:0,ind:5,ty:4,nm:"star a",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:31,s:[343.949]},{t:158,s:[1800]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:1,s:[596.087,836.292,0],to:[-36.098,-100,0],ti:[52.765,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:31,s:[379.5,236.292,0],to:[-52.765,0,0],ti:[0,0,0]},{t:158,s:[279.5,836.292,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:1,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:31,s:[100,100,100]},{t:128,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:1,op:159,st:1,bm:0},{ddd:0,ind:6,ty:4,nm:"star b",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:3,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:23,s:[288]},{t:128,s:[1800]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:3,s:[596.087,836.292,0],to:[-39.431,-113.333,0],ti:[66.098,1.667,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:23,s:[359.5,156.292,0],to:[-66.098,-1.667,0],ti:[0,0,0]},{t:128,s:[199.5,826.292,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:3,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:23,s:[100,100,100]},{t:98,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[0,.5215686274509804,.27058823529411763,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:129,st:3,bm:0},{ddd:0,ind:7,ty:4,nm:"rec a",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:33,s:[381.468]},{t:218,s:[2520]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:0,s:[599.5,842,0],to:[-23.333,-100,0],ti:[41.333,1.333,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:33,s:[459.5,242,0],to:[-41.333,-1.333,0],ti:[0,0,0]},{t:218,s:[351.5,834,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:0,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:33,s:[100,100,100]},{t:188,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:219,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"rec b",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:2,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:25,s:[262.857]},{t:191,s:[2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:2,s:[599.5,842,0],to:[-23.333,-113.333,0],ti:[74,5,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:25,s:[459.5,162,0],to:[-74,-5,0],ti:[0,0,0]},{t:191,s:[155.5,812,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:2,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:25,s:[100,100,100]},{t:161,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:192,st:2,bm:0},{ddd:0,ind:9,ty:4,nm:"square a",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:35,s:[462.385]},{t:218,s:[2880]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:0,s:[599.5,838,0],to:[-43.333,-123.333,0],ti:[60,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:35,s:[339.5,98,0],to:[-60,0,0],ti:[0,0,0]},{t:218,s:[239.5,838,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:0,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:35,s:[100,100,100]},{t:188,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:219,st:0,bm:0},{ddd:0,ind:10,ty:4,nm:"square b",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:2,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:27,s:[285.714]},{t:191,s:[2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:2,s:[599.5,838,0],to:[-30,-120,0],ti:[75,3.333,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:27,s:[419.5,118,0],to:[-75,-3.333,0],ti:[0,0,0]},{t:191,s:[149.5,818,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,0,0]},t:2,s:[50,100,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:27,s:[100,100,100]},{t:161,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:192,st:2,bm:0},{ddd:0,ind:11,ty:4,nm:"streamer b 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:171,ix:10},p:{a:0,k:[543,427,0],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:13,s:[4]},{t:61,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:18,s:[0]},{t:61,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:13,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:18,s:[35]},{t:61,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:13,op:62,st:13,bm:0},{ddd:0,ind:12,ty:4,nm:"streamer a 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:151,ix:10},p:{a:0,k:[454,444,0],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.2627450980392157,.2,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10,s:[4]},{t:53,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:15,s:[0]},{t:53,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:15,s:[35]},{t:53,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:10,op:54,st:10,bm:0},{ddd:0,ind:13,ty:4,nm:"circle a 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:29,s:[-371.368]},{t:191,s:[-2520]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:1,s:[599.5,838,0],to:[-53.333,-113.333,0],ti:[56.667,-3.333,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:29,s:[279.5,158,0],to:[-56.667,3.333,0],ti:[0,0,0]},{t:191,s:[259.5,858,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:1,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:29,s:[100,100,100]},{t:161,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:1,op:192,st:1,bm:0},{ddd:0,ind:14,ty:4,nm:"circle b 2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:3,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:21,s:[-250.839]},{t:158,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:3,s:[599.5,838,0],to:[-53.333,-100,0],ti:[63,-7,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:21,s:[279.5,238,0],to:[-63,7,0],ti:[0,0,0]},{t:158,s:[221.5,880,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:3,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:21,s:[100,100,100]},{t:128,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[0,.5215686274509804,.27058823529411763,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:159,st:3,bm:0},{ddd:0,ind:15,ty:4,nm:"star a 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:31,s:[-397.895]},{t:191,s:[-2520]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:1,s:[596.087,836.292,0],to:[-9.431,-113.333,0],ti:[42.765,-3.333,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:31,s:[539.5,156.292,0],to:[-42.765,3.333,0],ti:[0,0,0]},{t:191,s:[339.5,856.292,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:1,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:31,s:[100,100,100]},{t:161,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:1,op:192,st:1,bm:0},{ddd:0,ind:16,ty:4,nm:"star b 2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:3,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:23,s:[-278.71]},{t:158,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:3,s:[596.087,836.292,0],to:[-12.765,-96.667,0],ti:[52.765,-3.333,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:23,s:[519.5,256.292,0],to:[-52.765,3.333,0],ti:[0,0,0]},{t:158,s:[279.5,856.292,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:3,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:23,s:[100,100,100]},{t:128,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:159,st:3,bm:0},{ddd:0,ind:17,ty:4,nm:"rec a 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:33,s:[-556.875]},{t:128,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:0,s:[599.5,842,0],to:[-16.667,-120,0],ti:[66.667,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:33,s:[499.5,122,0],to:[-66.667,0,0],ti:[0,0,0]},{t:128,s:[199.5,842,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:0,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[1,.833,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:33,s:[100,100,100]},{t:98,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:129,st:0,bm:0},{ddd:0,ind:18,ty:4,nm:"rec b 2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:2,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:25,s:[-306.667]},{t:218,s:[-2880]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:2,s:[599.5,842,0],to:[-22.62,-109.87,0],ti:[2.877,-2.055,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:25,s:[339.5,262,0],to:[-51.333,36.667,0],ti:[0,0,0]},{t:218,s:[219.5,862,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:2,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:25,s:[100,100,100]},{t:188,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:219,st:2,bm:0},{ddd:0,ind:19,ty:4,nm:"square a 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:35,s:[-590.625]},{t:128,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:0,s:[599.5,838,0],to:[-20,-90,0],ti:[36.667,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:35,s:[479.5,298,0],to:[-36.667,0,0],ti:[0,0,0]},{t:128,s:[379.5,838,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:0,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:35,s:[100,100,100]},{t:98,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:129,st:0,bm:0},{ddd:0,ind:20,ty:4,nm:"square b 2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:2,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:27,s:[-333.333]},{t:218,s:[-2880]}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:.167},t:2,s:[599.5,838,0],to:[-10,-103.333,0],ti:[50,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:27,s:[539.5,218,0],to:[-50,0,0],ti:[0,0,0]},{t:218,s:[299.5,838,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,.167,0]},t:2,s:[100,50,100]},{i:{x:[.833,.833,.833],y:[.833,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:27,s:[100,100,100]},{t:188,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:219,st:2,bm:0}]},{id:"comp_2",layers:[{ddd:0,ind:1,ty:0,nm:"_small-side",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[260,320,0],ix:2},a:{a:0,k:[400,400,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:800,h:800,ip:0,op:219,st:0,bm:0}]},{id:"comp_3",layers:[{ddd:0,ind:1,ty:0,nm:"left",refId:"comp_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[400,400,0],ix:2},a:{a:0,k:[400,400,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:800,h:800,ip:13,op:313,st:13,bm:0},{ddd:0,ind:2,ty:0,nm:"right",refId:"comp_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[400,400,0],ix:2},a:{a:0,k:[400,400,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,w:800,h:800,ip:30,op:330,st:30,bm:0}]},{id:"comp_4",layers:[{ddd:0,ind:1,ty:4,nm:"streamer a 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:14,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:13,s:[219.178,-190.096,0],to:[-95.333,426.667,0],ti:[167.333,-560.667,0]},{t:173,s:[179.178,989.904,0]}],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:13,s:[4]},{t:176,s:[.5]}],ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:18,s:[0]},{t:176,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:13,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:18,s:[40]},{t:176,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:13,op:174,st:13,bm:0},{ddd:0,ind:2,ty:4,nm:"streamer b 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-1.458,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:5,s:[269.863,-175.455,0],to:[-110,415.333,0],ti:[216,-599.333,0]},{t:173,s:[69.863,984.545,0]}],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.2627450980392157,.2,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[4]},{t:173,s:[.5]}],ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10,s:[0]},{t:173,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10,s:[40]},{t:173,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:5,op:174,st:5,bm:0},{ddd:0,ind:3,ty:4,nm:"circle a 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{t:155,s:[1800]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:8,s:[325.643,-26.292,0],to:[-101.333,75.667,0],ti:[15.333,-507.667,0]},{t:155,s:[125.643,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:8,s:[50,100,100]},{t:155,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:156,st:-7,bm:0},{ddd:0,ind:4,ty:4,nm:"circle b 4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:2,s:[0]},{t:215,s:[2520]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:2,s:[619.5,-26.292,0],to:[-138,77.667,0],ti:[-2,-497.667,0]},{t:215,s:[259.5,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:2,s:[50,100,100]},{t:215,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:216,st:-13,bm:0},{ddd:0,ind:5,ty:4,nm:"star a 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{t:245,s:[2880]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:6,s:[376.929,-28,0],to:[-213.333,157.667,0],ti:[173.333,-127.667,0]},{t:245,s:[116.929,834,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:6,s:[50,100,100]},{t:245,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:6,op:246,st:-9,bm:0},{ddd:0,ind:6,ty:4,nm:"star b 4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:2,s:[0]},{t:125,s:[1800]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:2,s:[171.786,-28,0],to:[0,0,0],ti:[-161.333,-275.667,0]},{t:125,s:[251.786,834,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:2,s:[50,100,100]},{t:125,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[0,.5215686274509804,.27058823529411763,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:126,st:-13,bm:0},{ddd:0,ind:7,ty:4,nm:"rec a 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:4,s:[0]},{t:185,s:[2520]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:4,s:[428.214,-22.292,0],to:[-167.333,119.667,0],ti:[-130.667,-315.667,0]},{t:185,s:[228.214,839.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:4,s:[50,100,100]},{t:185,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:4,op:186,st:-11,bm:0},{ddd:0,ind:8,ty:4,nm:"rec b 4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{t:245,s:[2880]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:6,s:[223.071,-22.292,0],to:[0,0,0],ti:[-92.571,-383.708,0]},{t:245,s:[223.071,839.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:6,s:[50,100,100]},{t:245,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:6,op:246,st:-9,bm:0},{ddd:0,ind:9,ty:4,nm:"square a 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:4,s:[0]},{t:217,s:[2520]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:4,s:[120.5,-26.292,0],to:[13,430.305,0],ti:[52.221,-418.892,0]},{t:217,s:[198.5,833.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:4,s:[50,100,100]},{t:217,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:4,op:218,st:-11,bm:0},{ddd:0,ind:10,ty:4,nm:"square b 4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{t:215,s:[2520]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:8,s:[274.357,-26.292,0],to:[157.333,415.667,0],ti:[22.667,-253.667,0]},{t:215,s:[114.357,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:8,s:[50,100,100]},{t:215,s:[100,50,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:216,st:-7,bm:0},{ddd:0,ind:11,ty:4,nm:"streamer a 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:3,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[275.178,-173.096,0],to:[-87.333,413.333,0],ti:[177.333,-643.333,0]},{t:185,s:[219.178,974.904,0]}],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[-100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.2627450980392157,.2,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[4]},{t:177,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[0]},{t:177,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[40]},{t:177,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:186,st:0,bm:0},{ddd:0,ind:12,ty:4,nm:"streamer b 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:9,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[199.863,74.545,0],to:[-13.363,405.455,0],ti:[179.333,-430.667,0]},{t:217,s:[139.863,834.545,0]}],ix:2},a:{a:0,k:[-157,-245,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-1.685,-13.314],[0,-14.907],[0,-15.206],[0,-14.907],[0,-14.907],[0,-15.206],[1.754,-14.206],[-3.934,-9.465]],o:[[-3.895,8.562],[1.872,14.789],[0,15.206],[0,14.907],[0,14.907],[0,15.206],[0,14.314],[-1.803,14.605],[0,0]],v:[[-156.5,-406],[-166.5,-367],[-146.5,-327],[-166.5,-286],[-146.5,-246],[-166.5,-206],[-146.5,-165],[-166.5,-127],[-156.5,-84]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[4]},{t:199,s:[.5]}],ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:16,s:[0]},{t:199,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:16,s:[40]},{t:199,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:11,op:218,st:11,bm:0},{ddd:0,ind:13,ty:4,nm:"circle a 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:2,s:[0]},{t:125,s:[-1800]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:2,s:[365.643,-26.292,0],to:[-101.333,75.667,0],ti:[15.333,-507.667,0]},{t:125,s:[165.643,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:2,s:[100,50,100]},{t:125,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:126,st:-13,bm:0},{ddd:0,ind:14,ty:4,nm:"circle b 3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{t:245,s:[-2880]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:8,s:[519.5,-26.292,0],to:[-138,77.667,0],ti:[-2,-497.667,0]},{t:245,s:[159.5,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:8,s:[100,50,100]},{t:245,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[0,.5215686274509804,.27058823529411763,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:246,st:-7,bm:0},{ddd:0,ind:15,ty:4,nm:"star a 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{t:245,s:[-2880]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:6,s:[416.929,-28,0],to:[-213.333,157.667,0],ti:[173.333,-127.667,0]},{t:245,s:[156.929,834,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:6,s:[100,50,100]},{t:245,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:6,op:246,st:-9,bm:0},{ddd:0,ind:16,ty:4,nm:"star b 3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{t:155,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:8,s:[211.786,-28,0],to:[0,0,0],ti:[-161.333,-275.667,0]},{t:155,s:[291.786,834,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:8,s:[100,50,100]},{t:155,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"sr",sy:1,d:1,pt:{a:0,k:5,ix:3},p:{a:0,k:[0,0],ix:4},r:{a:0,k:0,ix:5},ir:{a:0,k:5,ix:6},is:{a:0,k:0,ix:8},or:{a:0,k:12,ix:7},os:{a:0,k:0,ix:9},ix:1,nm:"Polystar Path 1",mn:"ADBE Vector Shape - Star",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Polystar 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:156,st:-7,bm:0},{ddd:0,ind:17,ty:4,nm:"rec a 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:4,s:[0]},{t:185,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:4,s:[468.214,-22.292,0],to:[-167.333,119.667,0],ti:[-130.667,-315.667,0]},{t:185,s:[268.214,839.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:4,s:[100,50,100]},{t:185,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.2627450980392157,.2,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:4,op:186,st:-11,bm:0},{ddd:0,ind:18,ty:4,nm:"rec b 3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{t:245,s:[-2880]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:6,s:[263.071,-22.292,0],to:[0,143.667,0],ti:[-114.571,-267.708,0]},{t:245,s:[263.071,839.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:6,s:[100,50,100]},{t:245,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,8],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:6,op:246,st:-9,bm:0},{ddd:0,ind:19,ty:4,nm:"square a 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:2,s:[0]},{t:217,s:[-2520]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:2,s:[160.5,-26.292,0],to:[13,430.305,0],ti:[52.221,-418.892,0]},{t:217,s:[238.5,833.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:2,s:[100,50,100]},{t:217,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[.12156862745098039,.8431372549019608,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:2,op:218,st:-13,bm:0},{ddd:0,ind:20,ty:4,nm:"square b 3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:4,s:[0]},{t:185,s:[-2160]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:4,s:[314.357,-26.292,0],to:[157.333,415.667,0],ti:[22.667,-253.667,0]},{t:185,s:[154.357,835.708,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:4,s:[100,50,100]},{t:185,s:[50,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,.12156862745098039,.5647058823529412,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:4,op:186,st:-11,bm:0}]}],layers=[{ddd:0,ind:1,ty:0,nm:"cannon (small - left)",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[76,451.99999999999994,0],ix:2},a:{a:0,k:[0,360,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:480,h:720,ip:0,op:300,st:0,bm:0},{ddd:0,ind:2,ty:0,nm:"cannon (small - right)",refId:"comp_2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[533,451.99999999999994,0],ix:2},a:{a:0,k:[479.994,360,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:480,h:720,ip:0,op:300,st:0,bm:0},{ddd:0,ind:3,ty:0,nm:"cannon (small - top)",refId:"comp_3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[304,408,0],ix:2},a:{a:0,k:[400,400,0],ix:1},s:{a:0,k:[102,102,100],ix:6}},ao:0,w:800,h:800,ip:0,op:300,st:0,bm:0}],markers=[],confettiJson={v:v$1,fr,ip,op,w,h:h$1,nm,ddd,assets,layers,markers},root$o="_root_b0vky_1",closeButton$3="_closeButton_b0vky_10",title$7="_title_b0vky_19",subtitle$2="_subtitle_b0vky_27",paymentOption="_paymentOption_b0vky_36",selectPlan="_selectPlan_b0vky_41",radioButton="_radioButton_b0vky_55",selectPlanContent="_selectPlanContent_b0vky_59",discountBadge="_discountBadge_b0vky_61",totalAmount="_totalAmount_b0vky_82",totalNow$1="_totalNow_b0vky_91",billedAmount$1="_billedAmount_b0vky_95",cancelAnytime="_cancelAnytime_b0vky_107",features$1="_features_b0vky_115",featureIcon="_featureIcon_b0vky_130",featureLabel="_featureLabel_b0vky_143",onboardingLastStep="_onboardingLastStep_b0vky_151",onboardingLastStepContent="_onboardingLastStepContent_b0vky_156",confetti="_confetti_b0vky_179",styles$Y={root:root$o,closeButton:closeButton$3,title:title$7,subtitle:subtitle$2,paymentOption,selectPlan,radioButton,selectPlanContent,discountBadge,totalAmount,totalNow:totalNow$1,billedAmount:billedAmount$1,cancelAnytime,features:features$1,featureIcon,featureLabel,onboardingLastStep,onboardingLastStepContent,confetti},SvgUnlimitedBoardsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M5.636 16C2.91 16 2 14 2 12s.91-4 3.636-4c3.637 0 9.091 8 12.728 8C21.09 16 22 14 22 12s-.91-4-3.636-4c-3.637 0-9.091 8-12.728 8v0Z"})),SvgIntegrationsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28",...r},reactExports.createElement("g",{fill:"currentColor",clipPath:"url(#clip0_1866_30353)"},reactExports.createElement("path",{d:"M22.725 4.306a5.501 5.501 0 0 1-.495 7.212l-1.944 1.944a.75.75 0 0 1-1.06 0l-6.718-6.717a.75.75 0 0 1 0-1.06l1.944-1.945a5.501 5.501 0 0 1 7.212-.495L24.71.201a.75.75 0 0 1 1.06 1.06l-3.044 3.045Zm-2.97 7.566 1.415-1.415A4 4 0 1 0 15.513 4.8l-1.415 1.415 5.657 5.656v.001ZM12.763 9.196a.75.75 0 0 1 0 1.06l-2.127 2.127 2.947 2.947 2.126-2.126a.75.75 0 1 1 1.06 1.06l-2.124 2.127.827.826a.75.75 0 0 1 0 1.06l-1.945 1.946a5.501 5.501 0 0 1-7.212.494l-3.044 3.045a.75.75 0 0 1-1.06-1.06l3.044-3.046a5.5 5.5 0 0 1 .494-7.212L7.694 10.5a.75.75 0 0 1 1.06 0l.823.822 2.126-2.126a.75.75 0 0 1 1.06 0Zm-5.948 9.973a4 4 0 0 0 5.65-.007l1.415-1.414-5.657-5.657-1.414 1.414a4 4 0 0 0-.007 5.65l.007.007.006.006Z"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_1866_30353"},reactExports.createElement("path",{fill:"#fff",d:"M0 0h28v28H0z"})))),SvgCalendaricon$2=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M18.417 4.666H5.583c-1.012 0-1.833.82-1.833 1.833v12.834c0 1.012.82 1.833 1.833 1.833h12.834c1.012 0 1.833-.82 1.833-1.833V6.499c0-1.012-.82-1.833-1.833-1.833ZM15.664 2.834v3.667M8.336 2.834v3.667M3.75 10.166h16.5"})),SvgChecklisticon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"currentColor",d:"M11 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1Zm0 6a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM3 7a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM3 17a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"})),SvgChaticon$2=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M20.25 11.542a7.68 7.68 0 0 1-.825 3.483 7.792 7.792 0 0 1-6.967 4.308 7.683 7.683 0 0 1-3.483-.825L3.75 20.25l1.742-5.225a7.681 7.681 0 0 1-.825-3.483 7.792 7.792 0 0 1 4.308-6.967 7.682 7.682 0 0 1 3.483-.825h.459a7.773 7.773 0 0 1 7.333 7.333v.459Z"})),SvgCustomViewicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 5.25C4.5 5.25 1.5 12 1.5 12s3 6.75 10.5 6.75S22.5 12 22.5 12s-3-6.75-10.5-6.75Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"})),SvgAssignTasksicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M16 20.4v-1.6a3.2 3.2 0 0 0-3.2-3.2H7.2A3.2 3.2 0 0 0 4 18.8v1.6"}),reactExports.createElement("circle",{cx:10.001,cy:9.2,r:3.2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19.2 10v4.8M21.6 12.4h-4.8"})),SvgCustomTemplatesicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21",...r},reactExports.createElement("mask",{id:"path-1-inside-1_2385_123110",fill:"#fff"},reactExports.createElement("rect",{width:21,height:7,rx:1})),reactExports.createElement("rect",{width:21,height:7,stroke:"currentColor",strokeWidth:3.2,mask:"url(#path-1-inside-1_2385_123110)",rx:1}),reactExports.createElement("mask",{id:"path-2-inside-2_2385_123110",fill:"#fff"},reactExports.createElement("rect",{width:7,height:12,y:9,rx:1})),reactExports.createElement("rect",{width:7,height:12,y:9,stroke:"currentColor",strokeWidth:3.2,mask:"url(#path-2-inside-2_2385_123110)",rx:1}),reactExports.createElement("mask",{id:"path-3-inside-3_2385_123110",fill:"#fff"},reactExports.createElement("rect",{width:12,height:12,x:9,y:9,rx:1})),reactExports.createElement("rect",{width:12,height:12,x:9,y:9,stroke:"currentColor",strokeWidth:3.2,mask:"url(#path-3-inside-3_2385_123110)",rx:1})),trialPeriodDays=TEAMS_PLAN_TRIAL_PERIOD,TrialPeriodOnboardingModal=({workspaceId:r,onClose:s,onMount:a,onSubmitStart:i,onConfirm:o,renderPaymentElement:x,trialExpirationDate:y})=>{var ie,se;const{track:_}=useAnalytics(),[E,R]=reactExports.useState(TeamsPlanPeriod.YEAR),S=useSyncQueryModelById("space",r!=null?r:null),j=(ie=reactExports.useMemo(()=>Object.keys((S==null?void 0:S.members)||{}).length,[S==null?void 0:S.members]))!=null?ie:1,T=Math.min(TEAMS_PLAN_TRIAL_PERIOD,useDaysToDate(y)),{subscriptionData:A}=useWorkspaceSubscriptionFull(S==null?void 0:S.id),M=useWorkspaceSubscriptionPlanInfo(A),{yearlyPlanDiscountPercentage:P,formatPrice:L,[TeamsPlanPeriod.YEAR]:D,[TeamsPlanPeriod.MONTH]:O}=M,B={total:L(0),oneUser:L(0)},N={total:D.getPriceFormatted({memberCount:j,period:"month"}),oneUser:D.getPriceFormatted({memberCount:1,period:"month"})},F={total:O.getPriceFormatted({memberCount:j}),oneUser:O.getPriceFormatted({memberCount:1})};reactExports.useEffect(()=>{a==null||a({currency:M.currency,totalAmount:M[E].getPrice({memberCount:j})})},[]);const{updateWorkspaceSubscriptionPlan:W}=useSyncWorkspaceSubscription(),[V,U]=reactExports.useState(!0);reactExports.useEffect(()=>{A!=null&&A.planPeriod&&(R(A.planPeriod),U(!1))},[A==null?void 0:A.activePlan,A==null?void 0:A.planPeriod]);const G=reactExports.useCallback(async Q=>{_("teams_upsell_plan_picked",{extra_str1:r,extra_str2:M[Q].planId,extra_str3:M.currency,extra_double1:M[Q].getPrice({memberCount:j})}),R(Q)},[j,M,_,r]),oe=reactExports.useCallback(()=>i==null?void 0:i({selectedPlan:E,currency:M.currency,totalAmount:M[E].getPrice({memberCount:j})}),[j,i,E,M]),X=reactExports.useCallback(async()=>{const Q=M[E].planId;(S==null?void 0:S.id)!==void 0&&E&&(A==null?void 0:A.activePlan)!==Q&&await W(S.id,Q).catch(AnydoSentry.captureException)},[E,M,A==null?void 0:A.activePlan,W,S==null?void 0:S.id]),ee=reactExports.useCallback(async()=>{await X(),await o({stripePlanId:M[E].planId,currency:M.currency,totalAmount:M[E].getPrice({memberCount:j})})},[j,o,E,M,X]),ae=!!((se=S==null?void 0:S.metadata)!=null&&se.gpt_flow);return reactExports.useEffect(()=>{ae&&_("ob_last_step_confetti",{extra_str1:"upsell",extra_str2:r})},[ae,_,r]),jsxRuntimeExports.jsxs("div",{className:styles$Y.root,children:[s&&jsxRuntimeExports.jsx("div",{"data-testid":"trial-onboarding-modal-close-btn",className:styles$Y.closeButton,onClick:Q=>{Q.stopPropagation(),s("x")},children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsxs("h1",{className:styles$Y.title,children:[ae?"🎉 ":null,jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.title",values:{discountPercentage:P}})]}),jsxRuntimeExports.jsx("p",{className:styles$Y.subtitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.subtitle",values:{dayCount:trialPeriodDays,newLine:jsxRuntimeExports.jsx("br",{})}})}),ae&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Lottie,{className:styles$Y.confetti,animationData:confettiJson,autoPlay:!0,loop:!1})}),jsxRuntimeExports.jsx(motion.div,{className:styles$Y.onboardingLastStep,initial:{x:-512,y:128},animate:{x:0,y:0},transition:{duration:.35},children:jsxRuntimeExports.jsx("div",{className:styles$Y.onboardingLastStepContent,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModal.unlocked-offer"})})})]}),jsxRuntimeExports.jsxs("ul",{className:styles$Y.features,children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgUnlimitedBoardsicon,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.boards"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgCalendaricon$2,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.dueDates"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgAssignTasksicon,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.assignTasks"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgChecklisticon$1,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.checklists"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgCustomViewicon,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.customViews"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgChaticon$2,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.chat",values:{newLine:jsxRuntimeExports.jsx("br",{})}})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgCustomTemplatesicon,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.customTemplates"})})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:styles$Y.featureIcon,children:jsxRuntimeExports.jsx(SvgIntegrationsicon,{})}),jsxRuntimeExports.jsx("div",{className:styles$Y.featureLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.features.powerfulTemplates"})})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$Y.paymentOption,children:[jsxRuntimeExports.jsxs("div",{className:styles$Y.selectPlan,children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioButton,{disabled:!1,name:"planPeriod",value:TeamsPlanPeriod.YEAR,selectedValue:E,onChange:G,className:styles$Y.radioButton}),jsxRuntimeExports.jsxs("span",{className:styles$Y.selectPlanContent,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.period-year",values:{price:N.oneUser}})," ",jsxRuntimeExports.jsx("span",{className:styles$Y.discountBadge,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.discount",values:{discountPercentage:P}})})]})]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioButton,{disabled:!1,name:"planPeriod",value:TeamsPlanPeriod.MONTH,selectedValue:E,onChange:G,className:styles$Y.radioButton}),jsxRuntimeExports.jsx("span",{className:styles$Y.selectPlanContent,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.period-month",values:{price:F.oneUser}})})]})]}),jsxRuntimeExports.jsx("div",{children:x({isPlanLoading:V,onSubmitStart:oe,onConfirm:ee,footer:jsxRuntimeExports.jsxs("div",{className:styles$Y.totalAmount,children:[jsxRuntimeExports.jsx("div",{className:styles$Y.totalNow,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.total-now",values:{price:B.total}})}),jsxRuntimeExports.jsx("div",{className:styles$Y.billedAmount,children:E===TeamsPlanPeriod.MONTH?jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.billed-monthly",values:{dayCount:T,price:F.total}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.billed-annually",values:{dayCount:T,price:N.total}})})]})})}),jsxRuntimeExports.jsxs("p",{className:styles$Y.cancelAnytime,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalJan23.freeUntilTrialEnds",values:{dayCount:T}}),". ",jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.cancel-anytime"}),"."]})]})]})},PERMISSIONS_REQUIRING_ACTIVE_WORKSPACE$1=["create_board","invite_member"];function useTeamWorkspacePermissions(r){const{isPlanActive:s}=getWorkspaceSubscriptionBasic(r==null?void 0:r.paymentStatus),a=React$6.useMemo(()=>r!=null&&r.spacePermissions?s?r.spacePermissions:difference(r.spacePermissions,PERMISSIONS_REQUIRING_ACTIVE_WORKSPACE$1):[],[r==null?void 0:r.spacePermissions,s]),i=React$6.useMemo(()=>a.includes("create_board"),[a]),o=React$6.useMemo(()=>a.includes("invite_member"),[a]),x=React$6.useMemo(()=>a.includes("create_invitation_request"),[a]),y=React$6.useMemo(()=>a.includes("remove_member"),[a]),_=React$6.useMemo(()=>a.includes("get_payment_info"),[a]),E=React$6.useMemo(()=>a.includes("manage_subscription"),[a]),R=React$6.useMemo(()=>a.includes("toggle_ai_features"),[a]);return{canUserCreateBoard:i,canInviteMember:o,canRemoveMember:y,canViewPaymentMethodInfo:_,canManageSubscription:E,canCreateInvitationRequest:x,canToggleAiFeatures:R}}const AddBoardMemberCtx=reactExports.createContext(void 0),AddBoardMemberProvider=({spaceId:r,boardPermissions:{canAddMemberToBoard:s},onAddBoardMember:a,onInviteWorkspaceMember:i,children:o})=>jsxRuntimeExports.jsx(AddBoardMemberCtx.Provider,{value:reactExports.useMemo(()=>({spaceId:r,boardPermissions:{canAddMemberToBoard:s},onAddBoardMember:a,onInviteWorkspaceMember:i}),[r,s,a,i]),children:o});function useAddBoardMember(){var j,T;const r=reactExports.useContext(AddBoardMemberCtx),s=Recoil_index_20(r?cacheTaxonomy.space.byId(r.spaceId):Recoil_index_12(null)),{canInviteMember:a,canCreateInvitationRequest:i}=useTeamWorkspacePermissions(s),o=(j=r==null?void 0:r.boardPermissions.canAddMemberToBoard)!=null?j:!1,x=useMiniToastNotifications(),y=useStripeConfirmPayment(),_=usePushDeepLink(),E=useSyncAddWorkspaceMembers(s==null?void 0:s.id),R=r==null?void 0:r.onAddBoardMember,S=reactExports.useCallback(async A=>{var P;let M;if(typeof A!="string")M=A;else{const L=A;async function D(){var O,B,N,F,W;try{const V=await E([{memberEmail:L,permission:WorkspacePermissionLevel.MEMBER}]),U=Object.values(V).find(G=>G.email===A);return assertNonNullable(U),U}catch(V){if(isHttpError(V)&&((O=V.payload)==null?void 0:O.error_code)===ERROR_SUBSCRIPTION_PAYMENT_INTENT_PROCESSING)x.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.subscription-payment-intent-processing"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick(){}});else if(isHttpError(V)&&((B=V.payload)==null?void 0:B.error_code)===ERROR_PAYMENT_REQUIRED)try{return await y(V.payload.payment_intent_client_secret),D()}catch(U){throw x.set(errorNotification()),new Error("useAddBoardMember: could not add a workspace member",{cause:new AggregateError([V,U])})}else isHttpError(V)&&((N=V.payload)==null?void 0:N.error_code)===ERROR_MAX_MEMBERS_LIMIT?x.set((F=s==null?void 0:s.paymentStatus)!=null&&F.isTrialing?{id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.unlock-max-members"}),actionsId:["ADD_CARD"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.add-card"}),onActionClick:()=>{_(new Map([["action","paymentaddcard"]]))}}:{id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"OnboardingAddTeammatesTab.error-add-max-members",values:{maxMembers:V.payload.max_members}}),actionsId:["CONTACT_SUPPORT"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.contact-support"}),onActionClick:()=>{const U=getContactFormUrl("","","sales");openNewWindowUrl(U)}}):isHttpError(V)&&((W=V.payload)==null?void 0:W.error_code)===ERROR_PAYMENT_MISSING?x.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.subscription.update-payment"}),actionsId:["ADD_CARD"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.updateCardDetails"}),onActionClick:U=>{U==="ADD_CARD"&&_(new Map([["action","paymentaddcard"]]))}}):x.set(errorNotification());throw new Error("useAddBoardMember: could not add a workspace member",{cause:V})}}M=await D()}assertNonNullable(R);try{await R(M)}catch(L){throw x.set(errorNotification(isHttpError(L)&&((P=L.payload)==null?void 0:P.error_code)===ERROR_MAX_SHARED_BOARDS?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.sharing.errors.maxSharedBoards"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}))),new Error("useAddBoardMember: could not add board member",{cause:L})}return M},[E,y,x,R,_,(T=s==null?void 0:s.paymentStatus)==null?void 0:T.isTrialing]);return{space:s,canInviteMember:a,canCreateInvitationRequest:i,canAddMemberToBoard:o,addBoardMember:S,invitationRequest:reactExports.useCallback(A=>{const M=r==null?void 0:r.onInviteWorkspaceMember;return assertNonNullable(M),M(A)},[r==null?void 0:r.onInviteWorkspaceMember])}}const BoardTeamMemberManager=({spaceMembers:r,boardMembers:s,spaceName:a,boardId:i,updateBoardMember:o,removeBoardMember:x,leaveBoard:y,boardPermissions:_,maxHeight:E,minHeight:R=0,className:S,onScrolledToBottomChange:j,setModalOpen:T,isWorkspaceActive:A,flow:M,canEditSelfPermissions:P,hideExternalLinkManager:L,isChangePermissionsHidden:D})=>{const[O,B]=React$6.useState(""),{canAddMemberToBoard:N,canTogglePublicView:F,canToggleOnPublicView:W}=_,{formatMessage:V}=useI18n(),{userDetails:U}=useAuth(),G=React$6.useRef(),oe=React$6.useRef(null),X=React$6.useRef(null),[ee,ae]=React$6.useState(null),{scrolledToBottom:ie}=useScrollObserver(ee),[se,Q]=React$6.useState(!1);React$6.useEffect(()=>{if(E&&X.current&&oe.current){const Se=X.current.offsetHeight+oe.current.offsetHeight,Ee=Math.max(Se,R);G.current=`${Ee}px`}},[E,R,X,r.size]),React$6.useEffect(()=>{j==null||j(ie)},[j,ie]);const Z=React$6.useMemo(()=>O.toLowerCase(),[O]),J=Z===(U==null?void 0:U.email.toLowerCase()),te=React$6.useMemo(()=>sortBy$1(Array.from(r.values()),[Se=>s.has(Se.publicUserId)?0:1,Se=>Se.name]),[s,r]),de=React$6.useMemo(()=>isValidEmail(Z),[Z]),ce=React$6.useMemo(()=>Z?te.filter(({name:Se,email:Ee})=>(Se||"").toLowerCase().split(" ").concat(Ee).some(he=>he.startsWith(Z))):te,[Z,te]),me=F&&i&&!L,ve=te.length===1&&te[0].publicUserId===(U==null?void 0:U.id),xe=!!O&&!ce.length&&A,ge=useMiniToastNotifications(),{space:be,canInviteMember:ye,canCreateInvitationRequest:Ie,addBoardMember:Pe,invitationRequest:we}=useAddBoardMember(),Re=ve||de&&xe?jsxRuntimeExports.jsx(TooltipSmallInfo,{delay:150,isActive:!ye,text:V(M==="boardCreation"?"BoardTeamMemberManager.inviteTooltip.boardCreation":"BoardTeamMemberManager.inviteTooltip.default"),children:jsxRuntimeExports.jsx(CtaButton,{disabled:!de||se||J,onClick:async Se=>{Se.stopPropagation(),Q(!0);try{ye?(await Pe(Z),B("")):Ie?(await we(Z),B(""),M==="boardHeader"&&ge.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.userInvited"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})):ge.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.notAllowed"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}catch(Ee){AnydoSentry.captureException(Ee)}finally{Q(!1)}},className:"BoardTeamMemberManager__inviteToWorkspace",children:V("BoardTeamMemberManager.inviteToWorkspace")})}):void 0;return jsxRuntimeExports.jsxs("div",{className:cx$6("BoardTeamMemberManager",S,{"BoardTeamMemberManager-scrolledToBottom":ie}),style:{height:G.current,maxHeight:E},children:[be!=null&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"BoardTeamMemberManager__search",ref:oe,children:jsxRuntimeExports.jsx(SearchField,{disabled:se,loading:se,placeholder:V(ve?"BoardTeamMemberManager.addByEmail":"BoardTeamMemberManager.addByNameOrEmail"),value:O,onChange:B,autoFocus:!0,searchIcon:Re,clearIcon:Re})})}),jsxRuntimeExports.jsx(SimpleScrollView,{className:cx$6({"BoardTeamMemberManager__members--noLinkManager":!me}),ref:ae,children:jsxRuntimeExports.jsxs("div",{ref:X,children:[ce.map(Se=>{const Ee=s.get(Se.publicUserId);if(ve||!N&&!Ee)return null;const Ce=Se.publicUserId===(U==null?void 0:U.id);return jsxRuntimeExports.jsxs("div",{className:"BoardTeamMemberManager__member",children:[jsxRuntimeExports.jsx(TeamMemberBox_memo,{member:Se,theme:TeamMemberBoxTheme.TEAM_MEMBER_MANAGER}),Ee?D?null:jsxRuntimeExports.jsx(BoardMemberPicker_memo,{permissionPickerDisabled:Se.publicUserId===Se.email,boardPermissions:_,member:Ee,isCurrentUser:Ce,scrollElement:ee,removeMember:()=>x(Ee),leaveBoard:y,updatePermission:he=>o(Ee,he),setModalOpen:T,canEditSelfPermissions:P}):jsxRuntimeExports.jsx(AddMemberButton__memo,{addMember:async()=>{await Pe(Se)}})]},Se.publicUserId)}),xe&&jsxRuntimeExports.jsx("div",{className:"BoardTeamMemberManager--noResult",children:J?jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.yourself"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.no-result",values:{searchQuery:O,spaceName:a,b:Se=>jsxRuntimeExports.jsx("strong",{children:Se,"data-private":"lipsum"})}})})]})}),me&&jsxRuntimeExports.jsx(ExternalLinkManager,{disableToggleOn:!W,className:"BoardTeamMemberManager__externalLink",boardId:i})]})},BoardTeamMemberManager_memo=React$6.memo(BoardTeamMemberManager),TEAM_MEMBER_MANAGER_MAX_HEIGHT=335,TEAM_MEMBER_MANAGER_MIN_HEIGHT=140;function AppSidebarCreateBoardModalContent({initialSpaceId:r,spaces:s,createFirstBoard:a,hideCloseButton:i=!1,hideMakePrivate:o=!1,hidePermissions:x=!1,autoFocus:y=!0,onContinue:_,onClose:E,disabled:R=!1,loading:S=!1,spacePickerDisabled:j}){const{formatMessage:T}=useI18n(),{userDetails:A}=useAuth(),[M,P]=React$6.useState(""),L=React$6.useMemo(()=>M.trim(),[M]),D=L.length>0,{track:O}=useAnalytics();React$6.useEffect(()=>{D&&O("board_member_management_entered",{extra_str1:null,extra_str2:"board_menu"})},[O,D]);const[B,N]=React$6.useState(r),F=useSyncQueryModelById("space",B);if(!F)throw new Error("AppSidebarCreateBoardModalContent(): Cannot create board without space record");const{members:W}=useSyncSpaceMembers(B),[V,U]=React$6.useState(new Map);React$6.useEffect(()=>{const Re=new Map(W);A!=null&&A.id&&Re.delete(A==null?void 0:A.id),U(Re)},[W,A==null?void 0:A.id]);const G=F.name,oe=React$6.useMemo(()=>{if(!s)return;const Re=new Set;return s.filter(Se=>{var Ee;return((Ee=Se.paymentStatus)==null?void 0:Ee.isActive)===!1}).forEach(Se=>{Re.add([Se.id,Se.name])}),Re},[s]),[X,ee]=React$6.useState(!1),ae=React$6.useCallback(()=>{ee(Re=>!Re)},[]),[ie,se]=React$6.useState(null),[Q,Z]=React$6.useState(new Map),J=React$6.useRef(null),te=React$6.useMemo(()=>({canAddMemberToBoard:!0,canEditMemberPermissions:!0,canUserRemoveMembersFromBoard:!0,canMemberBeRemovedFromBoard:()=>!0,canTogglePublicView:!1,canToggleOnPublicView:!1}),[]),[de,ce]=React$6.useState([]),me=React$6.useCallback(async Re=>{ce(Se=>[...Se,Re])},[]);React$6.useEffect(()=>{var Re,Se,Ee;y&&((Ee=(Se=(Re=J.current)==null?void 0:Re.inputRef)==null?void 0:Se.current)==null||Ee.focus({preventScroll:!0}))},[y]);const ve=React$6.useCallback(Re=>{const Se=capitalize(Re);P(Se)},[]),xe=React$6.useCallback(async Re=>{const Se={...Re,permissionLevel:BoardPermissionLevel.MEMBER},Ee=new Map(Q);Ee.set(Se.publicUserId,Se),Z(Ee)},[Q]),ge=React$6.useCallback(async Re=>{const Se=new Map(Q);Se.delete(Re.publicUserId),Z(Se)},[Q]),be=React$6.useCallback(async(Re,Se)=>{const Ee={...Re,permissionLevel:Se},Ce=new Map(Q);Ce.set(Re.publicUserId,Ee),Z(Ce)},[Q]),ye=React$6.useCallback(()=>Promise.resolve(),[]),Ie=React$6.useCallback(Re=>{Re.preventDefault(),L&&_({spaceRecord:F,isPrivate:X,boardName:L,boardMembers:Q,spaceInvites:de})},[L,_,F,X,Q,de]),Pe=React$6.useCallback(Re=>{N(Re),Z(new Map)},[]),we=ie===!1&&L&&V.size;return jsxRuntimeExports.jsxs("div",{className:cx$6("AppSidebarCreateBoardModalContent",{"AppSidebarCreateBoardModalContent--hideMembers":!D,"AppSidebarCreateBoardModalContent--nameEntered":D}),children:[!i&&jsxRuntimeExports.jsx("div",{className:"AppSidebarCreateBoardModalContent__close",onClick:E,children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsx("div",{className:"AppSidebarCreateBoardModalContent__header",children:jsxRuntimeExports.jsxs(Breadcrumbs$1,{theme:"light",children:[j?jsxRuntimeExports.jsx(Breadcrumbs$1.Item,{children:G}):jsxRuntimeExports.jsx(Breadcrumbs$1.Item,{options:oe,onChange:Pe,children:G}),jsxRuntimeExports.jsx(Breadcrumbs$1.Item,{children:L||`(${T("AppSidebarCreateBoardModalContent.breadcrumb.placeholder")})`})]})}),jsxRuntimeExports.jsxs("div",{className:"AppSidebarCreateBoardModalContent__content",children:[a?jsxRuntimeExports.jsx("div",{className:"AppSidebarCreateBoardModalContent__createFirstBoardMessage",children:T("AppSidebarCreateBoardModalContent.create-first-board")}):null,jsxRuntimeExports.jsx("form",{onSubmit:Ie,id:"AppSidebarCreateBoardModalContent__form",children:jsxRuntimeExports.jsx(TextField,{theme:"cardModal",disabled:R,ref:J,"data-private":"lipsum",type:"text",value:M,onChange:ve,maxLength:BOARD_NAME_MAX_LENGTH,placeholder:T("AppSidebarCreateBoardModalContent.input.placeholder")})}),jsxRuntimeExports.jsx(AddBoardMemberProvider,{spaceId:F.id,boardPermissions:te,onAddBoardMember:xe,onInviteWorkspaceMember:me,children:jsxRuntimeExports.jsx(BoardTeamMemberManager_memo,{spaceMembers:V,boardMembers:Q,spaceName:G,removeBoardMember:ge,leaveBoard:ye,updateBoardMember:be,boardPermissions:te,className:"AppSidebarCreateBoardModalContent__teamMemberManager",maxHeight:TEAM_MEMBER_MANAGER_MAX_HEIGHT,minHeight:TEAM_MEMBER_MANAGER_MIN_HEIGHT,onScrolledToBottomChange:se,isWorkspaceActive:!0,flow:"boardCreation",isChangePermissionsHidden:x},B)})]}),jsxRuntimeExports.jsxs("div",{className:cx$6("AppSidebarCreateBoardModalContent__footer",{"AppSidebarCreateBoardModalContent__footer--showShadow":we}),children:[o?null:jsxRuntimeExports.jsx(TooltipSmallInfo,{text:T("AppSidebarCreateBoardModalContent.private-toggle.tooltip",{newLine:jsxRuntimeExports.jsx("br",{})}),position:"bottom",children:jsxRuntimeExports.jsxs("div",{className:"AppSidebarCreateBoardModalContent__switch",children:[jsxRuntimeExports.jsx(Switch,{checked:X,theme:"new",onChange:ae,disabled:R}),jsxRuntimeExports.jsx("label",{className:"AppSidebarCreateBoardModalContent__switch_label",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.make-private"})})]})}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{size:"large",theme:"primary",type:"submit",form:"AppSidebarCreateBoardModalContent__form",disabled:!L||R,"data-testid":"create-board-modal-submit",className:"AppSidebarCreateBoardModalContent__submit",loading:S,children:T("_.buttons.create")})]})]})}const transparentImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",root$n="_root_98p91_1",header$2="_header_98p91_5",title$6="_title_98p91_12",imageContainer$1="_imageContainer_98p91_22",img="_img_98p91_32",description="_description_98p91_40",buttons$4="_buttons_98p91_46",button$5="_button_98p91_46",buttonContent="_buttonContent_98p91_61",buttonChevron="_buttonChevron_98p91_66",styles$X={root:root$n,header:header$2,title:title$6,imageContainer:imageContainer$1,img,description,buttons:buttons$4,button:button$5,buttonContent,buttonChevron};function TemplateThumbnail({title:r,emoji:s,description:a,imageUrl:i,onButtonClickAction:o,className:x,loading:y=!1,workspaceTemplateType:_,onEdit:E}){const{formatMessage:R}=useI18n(),[S,j]=React$6.useState(!1),T=React$6.useCallback(()=>o(S),[S,o]),[A,M]=React$6.useState(!1),P=React$6.useCallback(()=>M(!1),[]),L=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),P],D=React$6.useRef(null),O=React$6.useRef(null),B=React$6.useRef(null);useOutSideClick(React$6.useMemo(()=>[O,B],[]),P);const N=React$6.useCallback(V=>{V.stopPropagation(),M(U=>!U)},[]),F=React$6.useCallback(V=>{V.stopPropagation(),j(!1),o(!1),P()},[P,o]),W=React$6.useCallback(V=>{V.stopPropagation(),j(!0),o(!0),P()},[P,o]);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$X.root,x),children:[jsxRuntimeExports.jsxs("div",{className:styles$X.header,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:styles$X.title,children:[s," ",r]}),jsxRuntimeExports.jsx("p",{className:styles$X.description,children:a})]}),jsxRuntimeExports.jsxs("div",{className:styles$X.buttons,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{ref:D,className:styles$X.button,theme:"primary",onClick:T,chevronRef:O,onChevronClick:N,loading:y,disabled:y,children:jsxRuntimeExports.jsx("div",{className:styles$X.buttonContent,children:R("TemplateThumbnail.action-botton-text")})})}),_&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ButtonInlineText,{onClick:E,theme:"action",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.edit"})})})]})]}),jsxRuntimeExports.jsx("div",{className:styles$X.imageContainer,onClick:T,children:jsxRuntimeExports.jsx(FallbackImg,{className:styles$X.img,src:i,errorSrc:transparentImage,loading:"lazy",alt:r})}),jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[L],children:jsxRuntimeExports.jsx(DropdownMenu,{theme:"modern-condensed-reverse",scrollbars:!0,offset:0,isVisible:A,position:"bottom",from:D.current,children:jsxRuntimeExports.jsxs("div",{ref:B,children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{onClickNative:F,selected:S===!1,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TemplateThumbnail.with-content"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{onClickNative:W,selected:S===!0,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TemplateThumbnail.without-content"})})]})})})]})}const root$m="_root_1k2w1_1",header$1="_header_1k2w1_14",splitRow="_splitRow_1k2w1_22",optionsWrapper="_optionsWrapper_1k2w1_27",textFieldLabel="_textFieldLabel_1k2w1_33",descriptionTextarea="_descriptionTextarea_1k2w1_50",closeButton$2="_closeButton_1k2w1_67",bottomControls="_bottomControls_1k2w1_74",submitButton="_submitButton_1k2w1_79",deleteButton="_deleteButton_1k2w1_83",styles$W={root:root$m,header:header$1,splitRow,optionsWrapper,textFieldLabel,descriptionTextarea,closeButton:closeButton$2,bottomControls,submitButton,deleteButton},SvgDeleteicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M5 7.2h14.4"}),reactExports.createElement("path",{fill:"currentColor",d:"M18.6 7.2a.8.8 0 0 0-1.6 0h1.6Zm-11.2 0a.8.8 0 1 0-1.6 0h1.6Zm.8 0a.8.8 0 1 0 1.6 0H8.2Zm6.4 0a.8.8 0 0 0 1.6 0h-1.6Zm2.4 0v11.2h1.6V7.2H17Zm0 11.2a.8.8 0 0 1-.8.8v1.6a2.4 2.4 0 0 0 2.4-2.4H17Zm-.8.8h-8v1.6h8v-1.6Zm-8 0a.8.8 0 0 1-.8-.8H5.8a2.4 2.4 0 0 0 2.4 2.4v-1.6Zm-.8-.8V7.2H5.8v11.2h1.6ZM9.8 7.2V5.6H8.2v1.6h1.6Zm0-1.6a.8.8 0 0 1 .8-.8V3.2a2.4 2.4 0 0 0-2.4 2.4h1.6Zm.8-.8h3.2V3.2h-3.2v1.6Zm3.2 0a.8.8 0 0 1 .8.8h1.6a2.4 2.4 0 0 0-2.4-2.4v1.6Zm.8.8v1.6h1.6V5.6h-1.6Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M10.6 11.2V16M13.8 11.2V16"})),CreateEditBoardTemplateModal=r=>{const{formatMessage:s}=useI18n(),a=r.mode==="edit",i=a?r.templateId:null,o=a?null:r.originalBoardName,x=React$6.useMemo(()=>Object.values(WorkspaceTemplateType),[]),y=a?null:r.boardId,_=a?null:r.workspace,E=a?r.onAfterDelete:null,{isVisible:R,onDismiss:S,onAfterSave:j}=r,[T,A]=React$6.useState(a?r.initialValues:{name:"",desc:"",templateType:WorkspaceTemplateType.WorkflowOnly}),M=(X,ee)=>{A(ae=>({...ae,[X]:ee}))},{create:P,update:L,remove:D}=useSyncBoardTemplates(),O=useMiniToastNotifications(),{track:B}=useAnalytics(),[N,F]=React$6.useState(!1),W=React$6.useMemo(()=>T.name.trim().length===0,[T.name]),V=React$6.useCallback(async X=>{if(X.preventDefault(),!(W||N)){if(y){F(!0);try{await P(y,T),_&&B("custom_board_template_created",{extra_str1:_.id,extra_str2:T.templateType,extra_str3:y}),O.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.templateCreated"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}}),j()}catch(ee){AnydoSentry.captureException(ee),O.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}finally{F(!1)}}else if(i){F(!0);try{await L({name:T.name,desc:T.desc,templateId:i}),j()}catch(ee){AnydoSentry.captureException(ee),O.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}finally{F(!1)}}}},[y,P,N,W,O,j,i,B,L,T,_]),[U,G]=React$6.useState(!1),oe=React$6.useCallback(async()=>{if(G(!1),i){F(!0);try{await D(i),E==null||E()}catch(X){AnydoSentry.captureException(X),O.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}finally{F(!1)}}},[O,E,D,i]);return jsxRuntimeExports.jsxs(BackdropModal,{isVisible:R,onClose:S,children:[jsxRuntimeExports.jsx(ButtonInlineText,{disabled:N,className:styles$W.closeButton,onClickNative:X=>{X.stopPropagation(),S()},children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsxs("form",{className:styles$W.root,onClick:stopPropagation$2,onSubmit:V,children:[jsxRuntimeExports.jsx("h1",{className:styles$W.header,children:jsxRuntimeExports.jsx(FormattedMessage,{id:a?"CreateEditBoardTemplateModal.title.edit":"CreateEditBoardTemplateModal.title.create"})}),jsxRuntimeExports.jsx(TextField,{theme:"flat",value:T.name,onChange:X=>M("name",X),autoFocus:!0,disabled:N,placeholder:o?s("CreateEditBoardTemplateModal.name.placeholderWithBoard",{boardName:o}):s("CreateEditBoardTemplateModal.name.placeholder")}),jsxRuntimeExports.jsxs("div",{className:styles$W.splitRow,children:[jsxRuntimeExports.jsx("div",{className:styles$W.optionsWrapper,children:x.map(X=>jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioButton,{disabled:N||a,name:"templateType",value:X,selectedValue:T.templateType,onChange:ee=>M("templateType",ee)}),jsxRuntimeExports.jsx(FormattedMessage,{id:`CreateEditBoardTemplateModal.templateType.${X}`})]},X))}),_&&jsxRuntimeExports.jsx("div",{className:styles$W.textFieldLabel,children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.saveTo"})}),jsxRuntimeExports.jsx(TextField,{name:"workspace",value:_.name,readOnly:!0,disabled:N})]})})]}),jsxRuntimeExports.jsx("div",{className:styles$W.textFieldLabel,children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.description.label"})}),jsxRuntimeExports.jsx("textarea",{className:styles$W.descriptionTextarea,placeholder:s("CreateEditBoardTemplateModal.description.placeholder"),cols:7,name:"desc",value:T.desc,disabled:N,onChange:X=>M("desc",X.target.value)})]})}),jsxRuntimeExports.jsxs("div",{className:styles$W.bottomControls,children:[a&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(ButtonInlineText,{theme:"plain",className:styles$W.deleteButton,onClick:()=>G(!0),disabled:N,children:[jsxRuntimeExports.jsx(SvgDeleteicon,{}),jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.deleteTemplate"})})]}),jsxRuntimeExports.jsx("div",{style:{flex:1}})]}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{type:"submit",className:styles$W.submitButton,theme:"primary",disabled:N||W,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})})]})]}),jsxRuntimeExports.jsx(ConfirmModal,{isVisible:U,headerElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.confirm.title"}),mainElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateEditBoardTemplateModal.confirm.content"}),declineElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"}),acceptElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.yes"}),onAccept:oe,onDecline:()=>G(!1)})]})},SvgPlusicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.776 3.772a.8.8 0 1 0-1.6-.006l-.02 5.382-5.335-.02a.8.8 0 1 0-.006 1.6l5.335.02-.02 5.382a.8.8 0 1 0 1.6.006l.02-5.382 5.429.02a.8.8 0 1 0 .006-1.6l-5.429-.02.02-5.382Z",clipRule:"evenodd"})),workflowOnlyImage="/workflow_only.webp",contentImage="/content.webp",contentAndUsersImage="/content_and_users.webp",root$l="_root_6pa3f_1",tag$3="_tag_6pa3f_7",selectButton="_selectButton_6pa3f_20",listContainer="_listContainer_6pa3f_26",styles$V={root:root$l,tag:tag$3,selectButton,listContainer},list$2="_list_1xobn_1",expanded="_expanded_1xobn_10",item$1="_item_1xobn_14",selected="_selected_1xobn_30",emoji="_emoji_1xobn_34",button$4="_button_1xobn_38",styles$U={list:list$2,expanded,item:item$1,selected,emoji,button:button$4},MAX_VISIBILE_ITEMS=3,ITEM_HEIGHT=32,BrowseTemplatesListItems=({items:r,selectedItemId:s,isExpanded:a,onItemClick:i})=>{const[o,x]=React$6.useState(!1),y=React$6.useCallback(()=>x(!0),[]),_=React$6.useCallback(()=>x(!1),[]),E=React$6.useMemo(()=>compact(r),[r]),R=React$6.useMemo(()=>E.slice(MAX_VISIBILE_ITEMS).map(M=>M.id),[E]),S=R.length,j=React$6.useMemo(()=>s?R.includes(s):!1,[R,s]),T=a||o||j,A=React$6.useMemo(()=>({"--template-list-item-height":`${ITEM_HEIGHT}px`,"--template-list-collapsed-height":`${ITEM_HEIGHT*MAX_VISIBILE_ITEMS}px`,"--template-list-expanded-height":`${ITEM_HEIGHT*E.length}px`}),[E.length]);return jsxRuntimeExports.jsxs("div",{className:cx$6({[styles$U.expanded]:T}),style:A,children:[jsxRuntimeExports.jsx("ul",{className:cx$6(styles$U.list),children:E.map(({id:M,emoji:P,title:L})=>jsxRuntimeExports.jsxs("li",{className:cx$6(styles$U.item,{[styles$U.selected]:s===M}),onClick:i(M),children:[P&&jsxRuntimeExports.jsx("span",{className:styles$U.emoji,children:P}),L]},M))}),S&&!a?o?jsxRuntimeExports.jsxs(ButtonInlineText,{theme:"plain",onClick:_,className:styles$U.button,children:["- ",jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.less"})]}):j?null:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:y,className:styles$U.button,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"BrowseTemplatesListItems.count-more",values:{count:S}})}):null]})},BrowseTemplatesList=({tags:r,templates:s,templatesToViewIds:a,selectedTagId:i,setSelectedTagId:o,selectedTemplate:x,selectTemplate:y})=>{var F,W,V;const{locale:_,formatMessage:E}=useI18n(),[R,S]=React$6.useState(!1),j=React$6.useCallback(()=>S(U=>!U),[]),T=React$6.useCallback(()=>S(!1),[]),A=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),T],M=React$6.useRef(null),P=React$6.useRef(null);useOutSideClick(React$6.useMemo(()=>[M,P],[]),T);const L=React$6.useMemo(()=>Array.from(r.values()),[r]),D=React$6.useCallback(U=>G=>{G.stopPropagation(),o(U),T()},[T,o]),O=React$6.useMemo(()=>i?r.get(i):void 0,[i,r]),B=React$6.useCallback(U=>G=>()=>y(G,U),[y]),N=O?(V=(F=O.localizedData[_])==null?void 0:F.title)!=null?V:(W=O.localizedData.en)==null?void 0:W.title:E("BrowseTemplatesList.all-templates");return jsxRuntimeExports.jsxs("div",{className:styles$V.root,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SelectButton_,{theme:"modern",className:styles$V.selectButton,ref:M,value:N,onClick:j,active:R,withTitle:!1}),jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[A],children:jsxRuntimeExports.jsx(DropdownMenu,{theme:"modern-condensed-reverse",scrollbars:!0,offset:0,isVisible:R,className:styles$V.dropdown,position:"bottom-start",from:M.current,children:jsxRuntimeExports.jsxs("div",{ref:P,children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{onClickNative:D(void 0),selected:i===void 0,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"BrowseTemplatesList.all-templates"})},"NONE"),L.map(U=>jsxRuntimeExports.jsx(DropdownMenu.Item,{onClickNative:D(U.id),selected:(O==null?void 0:O.id)===U.id,children:getTemplateLocalizedContent(U,_).title},U.id))]})})})]}),jsxRuntimeExports.jsx(SimpleScrollView,{children:jsxRuntimeExports.jsx("div",{className:styles$V.listContainer,children:(O?[O]:L).map(U=>{var X;const G=(X=s.get(U.id))==null?void 0:X.filter(({id:ee})=>a==null?void 0:a.includes(ee));if(!(G!=null&&G.length))return null;const oe=x&&x[0]===U.id?x[1]:void 0;return jsxRuntimeExports.jsxs(React$6.Fragment,{children:[!O&&jsxRuntimeExports.jsx("h2",{className:styles$V.tag,children:getTemplateLocalizedContent(U,_).title}),jsxRuntimeExports.jsx(BrowseTemplatesListItems,{items:G,selectedItemId:oe,onItemClick:B(U.id),isExpanded:!!i})]},U.id)})})})]})},TEMPLATE_ANCHOR_CLASSNAME="BrowseTemplates__template--anchor",getElementIdFromTemplate=(r,s)=>`tmpl--${s}--${r}`,getElementInViewData=r=>{const s=r.split("--");return[s[1],s[2]]};function getTemplateLocalizedContent(r,s){const a=r.localizedData;return a[s]||a.en||a.default}const filterBySearchTerm=(r,s,a)=>{const i=s.trim().toLowerCase();return r.filter(({title:o,description:x,tags:y,keywords:_})=>o.toLowerCase().includes(i)||x.toLowerCase().includes(i)||(y==null?void 0:y.some(E=>{var R;return((R=a.get(E))==null?void 0:R.toLowerCase())===i}))||(_==null?void 0:_.some(E=>E.toLowerCase()===i)))};function getCustomTemplateImage(r){switch(r){case WorkspaceTemplateType.Content:return contentImage;case WorkspaceTemplateType.ContentAndUsers:return contentAndUsersImage;case WorkspaceTemplateType.WorkflowOnly:return workflowOnlyImage}}function BrowseTemplates({templates:r,tags:s,teamTypeToTags:a,onSelectTemplate:i,selectedTemplateId:o,onCreateBlankTemplateClick:x,initialTag:y,title:_,subtitle:E,teamType:R,refetch:S,analyticsSource:j,customBlankBoardButtonConfig:T}){var Ee,Ce;const[A,M]=React$6.useState(y),[P,L]=React$6.useState(""),[D,O]=React$6.useState(null),{scrolledToTop:B,scrollToTop:N,scrollToElement:F,elementInView:W,setObservableElements:V}=useScrollObserver(D),{locale:U,formatMessage:G}=useI18n(),{track:oe}=useAnalytics(),X=React$6.useMemo(()=>W?getElementInViewData(W):void 0,[W]),ee=!!P.trim();React$6.useEffect(()=>{if(a&&R){const he=new Set(a[R]);oe("template_screen_showed",{extra_str1:j,extra_str2:JSON.stringify([...he])})}else oe("template_screen_showed",{extra_str1:j,extra_str2:y||""})},[j,y,R,a,oe]);const ae=React$6.useMemo(()=>{if(!R||!a||!s)return s;const he=a[R];if(!he)return s;const Ae=[...s];return[...he].reverse().forEach(Ne=>{const Be=Ae.findIndex(Oe=>Oe.id===Ne);Be!==-1&&Ae.unshift(Ae.splice(Be,1)[0])}),Ae},[s,R,a]),ie=React$6.useMemo(()=>r==null?void 0:r.map(he=>{const{id:Ae,tags:Ne,workspaceTemplateType:Be,emoji:Oe}=he,{title:Ue,desc:Ve,imageUrl:We,templateDataKey:Te,keywords:De}=getTemplateLocalizedContent(he,U);let Le,Fe;return o&&(Le=o===Ae,Fe=o!==Ae),{id:Ae,title:Ue,emoji:Oe,description:Ve,imageUrl:We||getCustomTemplateImage(Be),tags:Ne,keywords:De,disabled:Fe,loading:Le,workspaceTemplateType:Be,onButtonClickAction(Ke){i(he,Te,Ke)}}}),[U,i,o,r]),se=React$6.useMemo(()=>{const he=new Map;return!(ae!=null&&ae.length)||!(ie!=null&&ie.length)||ie.forEach(Ae=>{for(const Ne of Ae.tags)he.set(Ne,[...he.get(Ne)||[],Ae])}),he},[ae,ie]),Q=React$6.useMemo(()=>{const he=new Map;return ae==null||ae.forEach(Ae=>{he.set(Ae.id,getTemplateLocalizedContent(Ae,U).title)}),he},[U,ae]),Z=React$6.useMemo(()=>{if(ie!=null&&ie.length)return ee?filterBySearchTerm(ie,P,Q):A?se.get(A):ie},[se,ee,P,A,Q,ie]),J=React$6.useMemo(()=>Z==null?void 0:Z.map(he=>he.id),[Z]),te=React$6.useMemo(()=>(J==null?void 0:J.toString())||"",[J]),de=React$6.useMemo(()=>{const he=new Map;return ae!=null&&ae.length&&(ae==null||ae.forEach(Ae=>{he.set(Ae.id,Ae)})),he},[ae]),ce=React$6.useMemo(()=>A?de==null?void 0:de.get(A):void 0,[A,de]);React$6.useEffect(()=>{const he=D==null?void 0:D.getElementsByClassName(TEMPLATE_ANCHOR_CLASSNAME),Ae=he?Array.from(he):void 0;V(Ae)},[D,V,Z]),React$6.useEffect(()=>{N("auto")},[N,te]);const me=React$6.useMemo(()=>typeof E=="function"?E({selectedTemplatesCount:(Z==null?void 0:Z.length)||0}):E,[E,Z==null?void 0:Z.length]),[ve,xe]=React$6.useState(null),ge=React$6.useMemo(()=>{const he=Z==null?void 0:Z.find(Ae=>Ae.id===ve);return he&&he.workspaceTemplateType?{name:he.title,desc:he.description,templateType:he.workspaceTemplateType}:null},[ve,Z]),be=React$6.useCallback(()=>{xe(null),S()},[S]),ye=React$6.useCallback(he=>{L(""),oe("template_filter_selected",{extra_str1:he||"all"}),M(he)},[oe]),Ie=React$6.useRef(null),Pe=React$6.useCallback(he=>{M(void 0),L(he);const Ae=Ie.current;Ae!==null&&clearTimeout(Ae),Ie.current=setTimeout(()=>{oe("template_searched",{extra_str1:he})},700)},[oe]),we=React$6.useCallback((he,Ae)=>{const Ne=getElementIdFromTemplate(he,Ae);F(Ne,{behavior:"auto"})},[F]),Re=React$6.useMemo(()=>((ce?[ce]:ae)||[]).reduce((Ae,Ne)=>{const Be=se.get(Ne.id);return Be==null||Be.forEach(Oe=>{J!=null&&J.includes(Oe.id)&&Ae.push([Oe,Ne.id])}),Ae},[]),[se,ce,ae,J]),Se=React$6.useMemo(()=>{const he="POPULAR";return(se.get(he)||[]).map(Ne=>[Ne,he])},[se]);return jsxRuntimeExports.jsxs("div",{className:cx$6("BrowseTemplates",{"BrowseTemplates--withTitle":!!_,"BrowseTemplates--withSubtitle":!!E}),children:[_&&jsxRuntimeExports.jsxs("div",{className:"BrowseTemplates__headerTop__title",children:[jsxRuntimeExports.jsx("h1",{children:_}),me]}),jsxRuntimeExports.jsxs("div",{className:"BrowseTemplates__main",children:[jsxRuntimeExports.jsx("aside",{className:"BrowseTemplates__aside",children:jsxRuntimeExports.jsx(BrowseTemplatesList,{selectedTagId:A,setSelectedTagId:ye,selectedTemplate:X,selectTemplate:we,templates:se,tags:de,templatesToViewIds:J})}),jsxRuntimeExports.jsx("div",{className:"BrowseTemplates__content",children:r!=null&&r.length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6("BrowseTemplates__header",{"BrowseTemplates__header--showTopShadow":!B}),children:jsxRuntimeExports.jsx("div",{className:"BrowseTemplates__headerTop",children:jsxRuntimeExports.jsxs("span",{className:"BrowseTemplates__headerActions",children:[jsxRuntimeExports.jsx(SearchField,{theme:"fat",disabled:!ie,placeholder:G("BrowseTemplates.search-placeholder"),value:P,onChange:Pe,autoFocus:!0,className:"BrowseTemplates__searchField"}),jsxRuntimeExports.jsxs(ButtonInlineText,{onClick:(Ee=T==null?void 0:T.onClick)!=null?Ee:x,theme:"action",className:"BrowseTemplates__blankTemplateButton",children:[jsxRuntimeExports.jsx(SvgPlusicon$1,{})," ",(Ce=T==null?void 0:T.text)!=null?Ce:G("_.buttons.create-blank-board")]})]})})}),jsxRuntimeExports.jsx(SimpleScrollView,{className:"BrowseTemplates__templates",ref:O,children:jsxRuntimeExports.jsx("div",{children:ee&&Re.length===0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"BrowseTemplates__emptySearch",children:[G("BrowseTemplates.emptySearch",{term:P}),":"]}),Se.map(([he,Ae])=>jsxRuntimeExports.jsx("div",{id:getElementIdFromTemplate(he.id,Ae),className:TEMPLATE_ANCHOR_CLASSNAME,children:jsxRuntimeExports.jsx(TemplateThumbnail,{onEdit:()=>xe(he.id),title:he.title,emoji:he.emoji,description:he.description,imageUrl:he.imageUrl,disabled:he.disabled,loading:he.loading,onButtonClickAction:he.onButtonClickAction,workspaceTemplateType:he.workspaceTemplateType,className:"BrowseTemplates__template"})},he.id))]}):Re.map(([he,Ae])=>jsxRuntimeExports.jsx("div",{id:getElementIdFromTemplate(he.id,Ae),className:TEMPLATE_ANCHOR_CLASSNAME,children:jsxRuntimeExports.jsx(TemplateThumbnail,{onEdit:()=>xe(he.id),title:he.title,emoji:he.emoji,description:he.description,imageUrl:he.imageUrl,disabled:he.disabled,loading:he.loading,onButtonClickAction:he.onButtonClickAction,workspaceTemplateType:he.workspaceTemplateType,className:"BrowseTemplates__template"})},he.id))})}),ge&&ve&&jsxRuntimeExports.jsx(CreateEditBoardTemplateModal,{mode:"edit",isVisible:!!ve,templateId:ve,initialValues:ge,onDismiss:()=>xe(null),onAfterSave:be,onAfterDelete:be})]}):jsxRuntimeExports.jsx("div",{className:"BrowseTemplates--isLoading",children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})})})]})]})}const BrowseTemplates_memo=React$6.memo(BrowseTemplates);function BrowseTemplatesConnector({spaceRecord:r,boardName:s,boardMembers:a,spaceInvites:i,isInActiveFlow:o,isPrivate:x=!1,onBoardCreated:y,children:_}){const{track:E}=useAnalytics(),R=useMiniToastNotifications(),[S,j]=React$6.useState(),T=React$6.useRef(!1),[A,M]=React$6.useState(),[P,L]=React$6.useState(),{fetch:D}=useSyncBoardTemplates(),O=React$6.useRef(createGlobalModelId("uuid4"));React$6.useEffect(()=>{o&&(O.current=createGlobalModelId("uuid4"))},[o]);const B=React$6.useCallback(()=>D(r.id).then(M).catch(()=>{R.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})}),[D,R,r.id]);React$6.useEffect(()=>{B()},[B]);const{createBoard:N}=useSyncBoards(),F=React$6.useCallback((W,V,U)=>{T.current||(T.current=!0,E("added_board"),L(W),N(r,O.current,typeof s=="string"?s:s(W),a,x,i||[],V,U).then(G=>{W?E("template_selected",{extra_str1:G.id,extra_str2:W.id,extra_str3:U?"without_content":"with_content",extra_double1:W.tags.includes(WORKSPACE_TEMPLATES_TAG_ID)?1:0}):E("template_screen_create_empty",{extra_str1:G.id}),a.size>0&&E("board_member_added",{extra_str1:G.id,extra_str2:"board_create",extra_double1:a.size}),y(r,G,W,U)}).catch(()=>{T.current=!1,L(void 0);let G=S||createGlobalModelId();j(G),R.set({id:G,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{R.delete(G),j(void 0)}})}))},[E,N,r,s,a,x,i,y,S,R]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_({templateData:A,onCreate:F,selectedTemplate:P,refetch:B})})}const Modal="_Modal_izafm_1",DynamicSearchCloseButton="_DynamicSearchCloseButton_izafm_10",slimPadding="_slimPadding_izafm_18",styles$T={Modal,DynamicSearchCloseButton,slimPadding};function BrowseTemplatesModalContent({onClose:r,slimPadding:s,children:a}){return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$T.Modal,{[styles$T.slimPadding]:s}),children:[r&&jsxRuntimeExports.jsx("div",{className:styles$T.DynamicSearchCloseButton,onClick:r,children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),a]})}const DogImage="/dog.webp",FamilyImage="/family.webp";var styles$S={heading:"_18urh3u0 _1ex10dn1 hmb2lk0 _1ex10dn6 _1ex10dn8",root:"_18urh3u2 _115jq3gdo _115jq3get _115jq3gg4 _115jq3gh9 _115jq3g8",dot:"_18urh3u3",choiceButton:"_1ts6eb6b a20c7b4 _17mzgjpg _11268mk6o fw84y34 _18urh3u4 _115jq3gcm _115jq3g2",choiceImage:"_18urh3u7",choiceButtonSelected:"_18urh3u8",choiceTitle:"_18urh3u9 _1ex10dn1 hmb2lk0 _1ex10dn6 _1ex10dn8",choiceBody:"_18urh3ua _1ex10dn1 hmb2lk0 _1ex10dn2 _1ex10dn8",choices:"_18urh3uc _115jq3g4",choiceBottomText:"_18urh3ud",check:"_18urh3ue"};const noEligibility$1=Recoil_index_12({isEligible:!1}),AppSidebarWorkspaceButtonChoiceModal=({onContinue:r,isVisible:s,onClose:a,onSelect:i,heading:o=jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.heading"})})=>{const x=Recoil_index_29(s?spaceState.trialEligibility:noEligibility$1).isEligible,[y,_]=React$6.useState("family"),S=useFamilyPlanInfo().Year.getPriceFormatted({period:"month"}),j=jsxRuntimeExports.jsx("svg",{width:"10",height:"10",viewBox:"0 0 14 12",className:styles$S.check,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:".4",d:"M4.959 9.263l6.792-8.015a.71.71 0 0 1 .995-.082c.3.249.34.69.09.984l-7.29 8.602a.706.706 0 0 1-.708.228.706.706 0 0 1-.483-.248L1.165 6.97a.694.694 0 0 1 .09-.987.712.712 0 0 1 .996.085l2.708 3.195z"})});return jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:s,onClose:a,children:jsxRuntimeExports.jsxs("div",{className:styles$S.root,children:[jsxRuntimeExports.jsxs("div",{className:styles$S.heading,children:[o,jsxRuntimeExports.jsx("span",{className:styles$S.dot,children:"."})]}),jsxRuntimeExports.jsxs("div",{className:styles$S.choices,children:[jsxRuntimeExports.jsxs("div",{className:cx$6(styles$S.choiceButton,{[styles$S.choiceButtonSelected]:y==="family"}),role:"button",onClick:()=>{_("family"),i==null||i("family")},children:[y==="family"&&j,jsxRuntimeExports.jsx("img",{className:styles$S.choiceImage,src:DogImage,style:{height:84},alt:""}),jsxRuntimeExports.jsx("div",{className:styles$S.choiceTitle,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceTitle.family"}),jsxRuntimeExports.jsx("span",{className:styles$S.dot,children:"."})]})}),jsxRuntimeExports.jsx("div",{className:styles$S.choiceBody,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceBody.family"})}),jsxRuntimeExports.jsx("div",{className:styles$S.choiceBottomText,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceBottomText.family",values:{formattedPricePerMonth:S}})})]}),jsxRuntimeExports.jsxs("div",{className:cx$6(styles$S.choiceButton,{[styles$S.choiceButtonSelected]:y==="team"}),role:"button",onClick:()=>{_("team"),i==null||i("team")},children:[y==="team"&&j,jsxRuntimeExports.jsx("img",{className:styles$S.choiceImage,src:FamilyImage,alt:"",style:{height:75,marginBottom:9}}),jsxRuntimeExports.jsx("div",{className:styles$S.choiceTitle,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceTitle.team"}),jsxRuntimeExports.jsx("span",{className:styles$S.dot,children:"."})]})}),jsxRuntimeExports.jsx("div",{className:styles$S.choiceBody,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceBody.team"})}),x&&jsxRuntimeExports.jsx("div",{className:styles$S.choiceBottomText,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonChoiceModal.choiceBottomText.team"})})]})]}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{disabled:y===null,theme:"primary",onClick:()=>{y!==null&&r(y)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})})]})})},PurchaseFamilyPlan=({onMount:r,workspaceId:s,onClose:a,onSubscribed:i,source:o})=>{const x=useMiniToastNotifications(),{formatMessage:y}=useI18n(),{track:_}=useAnalytics(),[E,R]=React$6.useState(TeamsPlanPeriod.YEAR),S=useFamilyPlanInfo(),j=S[E],[T,A]=React$6.useState("");React$6.useEffect(()=>{r==null||r({currency:S.currency,totalAmount:j.getPrice()})},[]);const M=React$6.useRef(!1);useUnmountEffect(()=>{M.current||_("family_upsell_dismissed",{extra_str1:o,extra_str2:[S.Year.planId,S.Month.planId]})});const P=useSyncCreateWorkspace(),L=useAuthRefreshUserDetails(),D=React$6.useCallback(U=>(_("family_upsell_plan_picked",{extra_str1:o,extra_str2:S[U].planId,extra_double2:U===TeamsPlanPeriod.MONTH?0:1,extra_double3:j.getPrice()}),R(U),Promise.resolve()),[j,S,o,_]);React$6.useEffect(()=>()=>x.deleteAll(),[x]);const[O,B]=React$6.useState(!1),[N,F]=React$6.useState(!1),W=React$6.useCallback(async U=>{var oe;_("family_upsell_continue_tapped",{extra_str1:o,extra_str2:S[E].planId,extra_str3:S.country,extra_double2:E===TeamsPlanPeriod.MONTH?0:1,extra_double3:S[E].getPrice()}),_("family_space_creation_screen_shown",{extra_str1:o}),F(!0);const G="transactionId"in U?{subscription:{paymentProvider:TeamsPlanPaymentProvider.MAC_APP_STORE,planPeriod:E,planType:SubscriptionPlanTypeT.FAMILY,activePlan:U.productId,orderId:U.transactionId,subscriptionData:{transactionId:U.transactionId,environment:"production"}}}:{subscriptionParams:{type:SubscriptionPlanTypeT.FAMILY,planId:j.planId,countryCode:S.country,trialPeriodDays:0,stripeData:U}};try{const X=await P({id:s,spaceName:T||y("PurchaseFamilyPlan.defaultWorkspaceName"),spaceType:WorkspaceType.Family,...G});M.current=!0,_("space_name_submitted",{extra_str1:X.id}),_("family_space_created",{extra_str1:o,extra_str2:X.id}),L(),_("family_subscription_succeeded",{extra_str1:o,extra_str2:S[E].planId,extra_str3:S.country,extra_double2:E===TeamsPlanPeriod.MONTH?0:1,extra_double3:S[E].getPrice()}),i()}catch(X){throw isHttpError(X)&&((oe=X.payload)==null?void 0:oe.error_code)===ERROR_SUBSCRIPTION_USED_BY_ANOTHER_SPACE?x.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.errors.subscription-used-by-another-space"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}}):x.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}}),X}finally{F(!1)}},[y,x,T,i,j.planId,E,S,L,o,P,_,s]),V=React$6.useCallback(U=>(AnydoSentry.addBreadcrumb({category:"subscription",type:"PurchaseTeamsPlanForInactiveWorkspace: purchase after setupIntentId obtained"}),W({setupIntentId:U.id})),[W]);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$$.root,{[styles$$.stripeRoot]:PlatformConfig.installer!==PlatformInstaller.MAC_STORE}),children:[jsxRuntimeExports.jsx("div",{style:{visibility:N?"hidden":"visible"},children:jsxRuntimeExports.jsx(PurchaseFamilyPlanUpsell,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.title"}),prePickerContent:jsxRuntimeExports.jsx("div",{style:{marginTop:12},children:jsxRuntimeExports.jsx(TextField,{autoFocus:!0,theme:"default","data-private":"lipsum",type:"text",value:T,onChange:A,maxLength:WORKSPACE_NAME_MAX_LENGTH,placeholder:y("PurchaseFamilyPlan.workspacename-input-placeholder")})}),plansInfo:S,planPeriod:E,setPlanPeriod:D,paymentElement:PlatformConfig.installer===PlatformInstaller.MAC_STORE?jsxRuntimeExports.jsx("div",{className:styles$$.masPurchase,children:O?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:sprinkles({color:"primary"})}):jsxRuntimeExports.jsx(CtaButton,{onClick:async()=>{try{assertNonNullable(AnydoElectronPreload),B(!0);const U=await AnydoElectronPreload.inAppPurchaseMas.buyProduct(S[E].masProductId);if(![S.Month.masProductId,S.Year.masProductId].includes(U.productId))return;await W(U)}catch(U){if(U!=null&&typeof U=="object"&&"code"in U&&U.code==="CANCELLED")return;AnydoSentry.captureException(U),x.set(errorNotification())}finally{B(!1)}},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})})}):jsxRuntimeExports.jsx(WorkspacePaymentElementForSetupIntent,{workspaceId:s,onConfirm:V}),footer:jsxRuntimeExports.jsx(Footer,{}),onClose:a,memberCount:S.maxMembers})}),jsxRuntimeExports.jsxs("div",{className:styles$$.spinnerContainer,style:{visibility:N?"visible":"hidden"},children:[jsxRuntimeExports.jsx("div",{className:styles$$.spinner,children:jsxRuntimeExports.jsx(AppLoader_memo,{})}),jsxRuntimeExports.jsx("div",{className:styles$$.spinnerText,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseFamilyPlan.spinner"})})]})]})},Footer=()=>{const{userDetails:r}=useAuth(),s=React$6.useCallback(()=>{const a=getContactFormUrl((r==null?void 0:r.name)||"",(r==null?void 0:r.email)||"","sales");openNewWindowUrl(a)},[r==null?void 0:r.email,r==null?void 0:r.name]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.cancel-anytime"}),"."," ",jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-support",values:{a:a=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:s,children:a})}})]})},CrossIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 8 8",...r,children:jsxRuntimeExports.jsx("g",{stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"m1 1 6 6M1 7l6-6"})})});var styles$R={root:"_45ys781 _45ys780",heading:"_45ys782",content:"_45ys783",textSection:"_45ys784",overHeading:"_45ys785",teaser:"_45ys786",footer:"_45ys787",inputsSection:"_45ys788",input:"_45ys789",inputContainer:"_45ys78a",inputLabel:"_45ys78b",checkIcon:"_45ys78c",crossIcon:"_45ys78d"};const AppSidebarWorkspaceButtonInviteFamily=({isVisible:r,maxMembers:s,workspaceId:a,onDone:i,source:o})=>{const x=React$6.useMemo(()=>lodashExports.range(s-1).map(()=>""),[s]),[y,_]=React$6.useState(x),E=y.filter(V=>V.trim().length>0),R=E.every(V=>isValidEmail(V)),{formatMessage:S}=useI18n(),{track:j}=useAnalytics(),T=useNavigate();React$6.useEffect(()=>{r&&_(x)},[x,r]);const{userDetails:A}=useAuth(),M=useMiniToastNotifications(),[P,L]=React$6.useState(!1),D=useSyncAddWorkspaceMembers(a),O=useSyncQueryModelById("space",a),{createBoardsFromTemplates:B}=useSyncBoards(),N=async V=>{if(!O)return;L(!0);let U={};try{V.length>0&&(U=await D(V.map(ee=>({memberEmail:ee,permission:WorkspacePermissionLevel.MEMBER}))));const G=new Map;Object.values(U).forEach(ee=>{G.set(ee.publicUserId,{email:ee.email,name:ee.name,permissionLevel:BoardPermissionLevel.ADMIN,profilePicture:ee.profilePicture,publicUserId:ee.publicUserId})}),j("family_default_board_creation_started",{extra_str1:o});const{sortedGroceryBoards:oe}=await B({workspace:O,templates:[FAMILY_GROCERY_BOARD_TEMPLATE_ID],groceryBoards:[{id:createGlobalModelId("uuid4"),name:S("_.groceryList.defaultBoardName")}],members:G}),X=oe[0].id;if(X){const ee=`/${RouteName.GroceryBoards}/${encodeURIComponent(X)}`;T(ee)}i()}catch{M.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}})}finally{L(!1)}},F=()=>{const V=lodashExports.uniq(E.map(U=>U.toLowerCase()));j("invite_family_members_screen_continued_tapped",{extra_str1:o,extra_double1:V.length}),N(V)},W=()=>{j("invite_family_members_screen_skipped",{extra_str1:o}),N([])};return jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:r,children:jsxRuntimeExports.jsxs("div",{className:styles$R.root,children:[jsxRuntimeExports.jsx("div",{className:styles$R.heading,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.heading"})}),jsxRuntimeExports.jsxs("div",{className:styles$R.content,children:[jsxRuntimeExports.jsxs("div",{className:styles$R.textSection,children:[jsxRuntimeExports.jsx("div",{className:styles$R.overHeading,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.memberCountInfo",values:{maxMembers:s}})}),jsxRuntimeExports.jsx("div",{className:styles$R.teaser,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.teaserText"})})]}),jsxRuntimeExports.jsxs("div",{className:styles$R.inputsSection,children:[jsxRuntimeExports.jsxs("label",{className:styles$R.inputContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$R.inputLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.you"})}),jsxRuntimeExports.jsx(TextField,{className:styles$R.input,disabled:P,theme:"flatBig",readOnly:!0,value:A==null?void 0:A.email,endElement:jsxRuntimeExports.jsx(CheckmarkIcon$2,{className:styles$R.checkIcon})})]}),y.map((V,U)=>jsxRuntimeExports.jsxs("label",{className:styles$R.inputContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$R.inputLabel,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.familyMemberX",values:{index:U+1}})}),jsxRuntimeExports.jsx(TextField,{className:styles$R.input,theme:"flatBig",disabled:P,value:V,onChange:G=>_(oe=>y.map((X,ee)=>ee===U?G:X)),endElement:V.trim().length>0?isValidEmail(V)?jsxRuntimeExports.jsx(CheckmarkIcon$2,{className:styles$R.checkIcon}):jsxRuntimeExports.jsx(CrossIcon,{className:styles$R.crossIcon}):null})]},U))]})]}),jsxRuntimeExports.jsxs("div",{className:styles$R.footer,children:[jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{disabled:P||!R,theme:"primary",loading:P,onClick:F,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"secondary",onClick:W,disabled:P,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"AppSidebarWorkspaceButtonInviteFamily.finishLater"})})]})]})})},teamsImageV2Src="/teams-workspace-v2.webp";function CreateWorkspaceModal({workspaceId:r,onAfterWorkspaceCreate:s,autoFocus:a=!0,FORCE_CREATE_WORKSPACE_V2_VIEW:i,source:o}){const x=useMiniToastNotifications(),[y,_]=React$6.useState("idle"),E=useSyncCreateWorkspace(),R=useAuthRefreshUserDetails(),{track:S}=useAnalytics(),{locale:j,formatMessage:T}=useI18n(),A=useWorkspaceSubscriptionPlanInfo(void 0),M=Recoil_index_20(abExperimentState.WEB_WORKSPACE_CREATE),P=M.show_new_screen&&j==="en"||i,L=M.is_placeholder_text&&j==="en"&&!i,D=M.popup_cta_text,[O,B]=React$6.useState(L?"Workspace":""),N=React$6.useMemo(()=>O.trim(),[O]),F=async U=>{if(U.preventDefault(),!!N)try{_("loading");const G=await E({id:r,spaceName:N,subscriptionParams:{type:SubscriptionPlanTypeT.TEAMS,trialPeriodDays:TEAMS_PLAN_TRIAL_PERIOD,planId:A[ONBOARDING_DEFAULT_PLAN_PERIOD].planId,countryCode:A.country}});S("space_created",{extra_str1:o,extra_str2:G.id}),S("space_name_submitted",{extra_str1:G.id}),S("space_created",{extra_str1:"onboarding",extra_str2:G.id}),R(),s(G),_("done")}catch{_("error")}};React$6.useEffect(()=>{let U;return y==="error"&&(U=createGlobalModelId(),x.set({id:U,theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateWorkspaceModal.error-create"}),actionsId:["DISMISS"],renderButton:G=>{switch(G){case"DISMISS":return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"})}},onActionClick:()=>{_("idle")}})),()=>{U&&x.delete(U)}},[x,y]);const W=P?CreateWorkspaceInnerV2:CreateWorkspaceInner,V=j==="en"&&D?D:T("_.buttons.create");return jsxRuntimeExports.jsxs("div",{className:"CreateWorkspaceModal",children:[jsxRuntimeExports.jsx(W,{autoFocus:a,disabled:y==="loading",name:O,onSubmit:F,onNameChange:B}),jsxRuntimeExports.jsx("div",{className:cx$6("CreateWorkspaceModal__footer",{"CreateWorkspaceModal--v2__footer":P}),children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{form:"CreateWorkspaceModal__form",size:"large",theme:"primary",type:"submit",loading:y==="loading"||y==="done",disabled:!N||y==="loading"||y==="done",className:"CreateWorkspaceModal__submit",children:V})})]})}const CreateWorkspaceInner=({name:r,onNameChange:s,onSubmit:a,disabled:i,autoFocus:o,isError:x,theme:y="default"})=>{const _=React$6.useMemo(()=>r.trim(),[r]),{formatMessage:E}=useI18n(),R=React$6.useRef(null),{track:S}=useAnalytics();return React$6.useEffect(()=>{var j;o&&((j=R.current)==null||j.focus({preventScroll:!0}))},[o]),React$6.useEffect(()=>{S("space_name_screen_showed")},[S]),jsxRuntimeExports.jsxs("div",{className:cx$6({"CreateWorkspaceModal--default":y==="default","CreateWorkspaceModal--onboarding":y.startsWith("onboarding"),"CreateWorkspaceModal--nameEntered":!!_}),children:[jsxRuntimeExports.jsx("div",{className:"CreateWorkspaceModal__header",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateWorkspaceModal.title"})}),jsxRuntimeExports.jsxs("div",{className:"CreateWorkspaceModal__content",children:[jsxRuntimeExports.jsx("form",{onSubmit:a,id:"CreateWorkspaceModal__form",children:jsxRuntimeExports.jsx("input",{ref:R,className:"CreateWorkspaceModal__input","data-private":"lipsum",type:"text",value:r,onChange:j=>{s(j.target.value)},maxLength:WORKSPACE_NAME_MAX_LENGTH,disabled:i,placeholder:y==="default"?E("CreateWorkspaceModal.workspacename-input-placeholder"):""})}),x&&jsxRuntimeExports.jsx("div",{className:"CreateWorkspaceModal--error",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateWorkspaceModal.error-create"})})]})]})},v2Advantages=["CreateWorkspaceModal.advantages.0","CreateWorkspaceModal.advantages.1","CreateWorkspaceModal.advantages.2","CreateWorkspaceModal.advantages.3","CreateWorkspaceModal.advantages.4"],CreateWorkspaceInnerV2=({name:r,onNameChange:s,onSubmit:a,disabled:i,autoFocus:o,isError:x,theme:y="default"})=>{const{formatMessage:_}=useI18n(),E=React$6.useRef(null),{track:R}=useAnalytics();return React$6.useEffect(()=>{var S;o&&((S=E.current)==null||S.focus({preventScroll:!0}))},[o]),React$6.useEffect(()=>{R("space_name_screen_showed")},[R]),jsxRuntimeExports.jsxs("div",{className:cx$6("CreateWorkspaceModal--v2"),children:[jsxRuntimeExports.jsx("img",{src:teamsImageV2Src,alt:"",className:"CreateWorkspaceModal--v2__image"}),jsxRuntimeExports.jsx("div",{className:"CreateWorkspaceModal--v2__advantageList",children:v2Advantages.map(S=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CheckmarkIcon$1,{})," ",jsxRuntimeExports.jsx(FormattedMessage,{id:S})]}))}),jsxRuntimeExports.jsx("div",{className:"CreateWorkspaceModal--v2__header",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateWorkspaceModal.title"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("form",{onSubmit:a,id:"CreateWorkspaceModal__form",children:jsxRuntimeExports.jsx(TextField,{autoFocus:!0,theme:"login",className:"CreateWorkspaceModal--v2__input","data-private":"lipsum",type:"text",value:r,onChange:S=>{s(S)},maxLength:WORKSPACE_NAME_MAX_LENGTH,disabled:i,placeholder:y==="default"?_("CreateWorkspaceModal.workspacename-input-placeholder"):""})}),x&&jsxRuntimeExports.jsx("div",{className:"CreateWorkspaceModal--error",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateWorkspaceModal.error-create"})})]})]})},CheckmarkIcon$1=()=>jsxRuntimeExports.jsx("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M16.5 5L9 13L4.5 8.5",stroke:"#0083FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),root$k="_root_4xawr_1",isTemplatesStep="_isTemplatesStep_4xawr_8",isApprovalStep="_isApprovalStep_4xawr_12",close="_close_4xawr_16",loadingIndicator="_loadingIndicator_4xawr_24",styles$Q={root:root$k,isTemplatesStep,isApprovalStep,close,loadingIndicator},root$j="_root_kof6j_1",workspaceName="_workspaceName_kof6j_22",planPicker="_planPicker_kof6j_23",paymentElement="_paymentElement_kof6j_24",error$2="_error_kof6j_25",contact$1="_contact_kof6j_30",styles$P={root:root$j,workspaceName,planPicker,paymentElement,error:error$2,contact:contact$1},CreateNonTrialingWorkspace=({workspaceId:r,onAfterWorkspaceCreate:s,source:a})=>{const{userDetails:i}=useAuth(),o=useI18n(),x=useWorkspaceSubscriptionPlanInfo(void 0),[y,_]=reactExports.useState(""),[E,R]=reactExports.useState(TeamsPlanPeriod.YEAR),{track:S}=useAnalytics(),j=useSyncCreateWorkspace(),T=reactExports.useCallback(()=>{const P=getContactFormUrl((i==null?void 0:i.name)||"",(i==null?void 0:i.email)||"","sales");openNewWindowUrl(P)},[i==null?void 0:i.email,i==null?void 0:i.name]);reactExports.useEffect(()=>{S("space_name_screen_showed")},[S]);const A=useMiniToastNotifications(),M=reactExports.useCallback(async P=>{AnydoSentry.addBreadcrumb({category:"subscription",type:"CreateNonTrialingWorkspace: setupIntentId obtained"});try{const L=await j({id:r,spaceName:y,subscriptionParams:{type:SubscriptionPlanTypeT.TEAMS,planId:x[E].planId,trialPeriodDays:0,stripeData:{setupIntentId:P.id},countryCode:x.country}});S("space_created",{extra_str1:a,extra_str2:L.id}),S("space_name_submitted",{extra_str1:L.id}),S("space_created",{extra_str1:"onboarding",extra_str2:L.id}),await delay(ON_PAYMENT_CONFIRMED_CLOSE_DELAY),s(L)}catch(L){throw AnydoSentry.captureException(L),A.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.payment-failed"}),actionsId:["DISMISS"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),onActionClick:()=>{}}),L}},[j,A,y,s,E,x,a,S,r]);return jsxRuntimeExports.jsxs("div",{className:styles$P.root,children:[jsxRuntimeExports.jsx("h2",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateNonTrialingWorkspace.title"})}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CreateNonTrialingWorkspace.subtitle"})}),jsxRuntimeExports.jsx(TextField,{className:styles$P.workspaceName,autoFocus:!0,theme:"default","data-private":"lipsum",type:"text",value:y,onChange:_,maxLength:WORKSPACE_NAME_MAX_LENGTH,placeholder:o.formatMessage("CreateWorkspaceModal.workspacename-input-placeholder")}),jsxRuntimeExports.jsx("div",{className:styles$P.planPicker,children:jsxRuntimeExports.jsx(TeamsPlanPicker,{plansInfo:x,planPeriod:E,onChange:R,memberCount:1})}),jsxRuntimeExports.jsx("div",{className:styles$P.paymentElement,children:jsxRuntimeExports.jsx(CreateWorkspacePaymentElementForSetupIntent,{onConfirm:M,disabled:y.length===0})}),jsxRuntimeExports.jsx("div",{className:styles$P.contact,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-sales",values:{a:P=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:T,children:P})}})})]})},root$i="_root_1s64l_1",title$5="_title_1s64l_9",contact="_contact_1s64l_25",styles$O={root:root$i,title:title$5,contact},CreateWorkspaceApprovePayment=({invoiceUrl:r})=>{const{userDetails:s}=useAuth(),a=reactExports.useCallback(()=>{const x=getContactFormUrl((s==null?void 0:s.name)||"",(s==null?void 0:s.email)||"","sales");openNewWindowUrl(x)},[s==null?void 0:s.email,s==null?void 0:s.name]),[i,o]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:styles$O.root,children:[jsxRuntimeExports.jsx("h2",{className:styles$O.title,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"ApproveIncompletePayment.heading"})}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PurchaseTeamsPlanForInactiveWorkspace.activate-subscription"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ApprovePaymentLink,{invoiceUrl:r,isLoading:i,onClick:()=>o(!0)})}),jsxRuntimeExports.jsx("div",{className:styles$O.contact,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-sales",values:{a:x=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:a,children:x})}})})]})},ADD_ACTIONS_KEYS=[ChipsListAddKeyCodes.ENTER_KEYCODE,ChipsListAddKeyCodes.COMMA,ChipsListAddKeyCodes.SPACE_KEYCODE];function CreateWorkspaceAddMembers({onBack:r,onSkip:s,workspace:a,autoFocus:i=!0,title:o,isVisible:x,onSuccess:y}){const _=useMiniToastNotifications(),{formatMessage:E}=useI18n(),[R,S]=React$6.useState(new Set),[j,T]=React$6.useState("idle"),[A,M]=React$6.useState(!0),P=React$6.useMemo(()=>[...R],[R]),{track:L}=useAnalytics();React$6.useEffect(()=>{x&&L("space_member_invite_screen_showed",{extra_str1:a.id})},[x,L,a.id]);const D=React$6.useCallback(()=>{s&&(s(),L("space_member_invites_skipped",{extra_str1:a.id}))},[s,L,a.id]),O=useSyncAddWorkspaceMembers(a.id),B=useStripeConfirmPayment();async function N(){var G,oe;if(!A)return;T("loading");const U=[...R.values()];try{await O(U.map(X=>({memberEmail:X,permission:WorkspacePermissionLevel.MEMBER}))),T("done"),L("space_member_invites_submitted",{extra_str1:a.id}),y()}catch(X){isHttpError(X)&&((G=X.payload)==null?void 0:G.error_code)===ERROR_PAYMENT_REQUIRED?(await B(X.payload.payment_intent_client_secret),T("done"),L("space_member_invites_submitted",{extra_str1:a.id}),y()):isHttpError(X)&&((oe=X.payload)==null?void 0:oe.error_code)===ERROR_MAX_MEMBERS_LIMIT?(T("error"),_.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"OnboardingAddTeammatesTab.error-add-max-members",values:{maxMembers:X.payload.max_members}}),actionsId:["CONTACT_SUPPORT"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.contact-support"}),onActionClick:()=>{const ee=getContactFormUrl("","","sales");openNewWindowUrl(ee)}})):(T("error"),_.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"WorkspaceManagementAddMembers.error.member-add"}),actionsId:["DISMISS"],renderButton:ee=>{switch(ee){case"DISMISS":return jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"})}},onActionClick:()=>{T("idle")}}))}}function F(U){S(fn(G=>(G.delete(U),G)))}function W(U){S(fn(G=>(G.add(U),G)))}function V(U){M(!(U!=null&&U.trim()))}return jsxRuntimeExports.jsxs("div",{className:"WorkspaceManagementAddMembers",children:[jsxRuntimeExports.jsxs("div",{className:"WorkspaceManagementAddMembers__header",children:[jsxRuntimeExports.jsx(Breadcrumbs$1,{children:r?jsxRuntimeExports.jsx(Breadcrumbs$1.Back,{onClick:r,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.back-to-screen",values:{screenName:a.name}})}):jsxRuntimeExports.jsx(Breadcrumbs$1.Item,{children:a.name})}),jsxRuntimeExports.jsx("div",{className:"WorkspaceManagementAddMembers__title",children:o||jsxRuntimeExports.jsx(FormattedMessage,{id:"WorkspaceManagementAddMembers.title"})})]}),jsxRuntimeExports.jsx("div",{className:"WorkspaceManagementAddMembers__content","data-private":"lipsum",children:jsxRuntimeExports.jsx(ChipsList,{values:P,placeholder:E("WorkspaceManagementAddMembers.input-placeholder"),validateValue:isValidEmail,onDelete:F,onAdd:W,showPlaceholderEvenWithValues:!0,className:"WorkspaceManagementAddMembers__chipsList",showPlaceholderOnFocus:!0,autoFocus:i,addActionKeys:ADD_ACTIONS_KEYS,addOnBlur:!0,onTextFieldUpdate:V,renderChip:U=>jsxRuntimeExports.jsx(ChipItemV2,{...U})})}),jsxRuntimeExports.jsxs("div",{className:"WorkspaceManagementAddMembers__footer",children:[s&&R.size===0?jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:D,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.skip-for-now"})}):jsxRuntimeExports.jsx("div",{className:"WorkspaceManagementAddMembers__emailsCountText",children:E(P.length===1?"WorkspaceManagementAddMembers.email-detected":"WorkspaceManagementAddMembers.email-detected.plural",{count:P.length})}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{size:"large",theme:"primary",type:"submit",loading:j!=="idle",disabled:A&&!R.size||j!=="idle",onClick:N,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"WorkspaceManagementAddMembers.cta-add-to-workspace"})})]})]})}const MODAL_TRANSITION_DELAY=500,MODAL_TRANSITION_DELAY_ENHANCED=2e3,firstWizardStep="create_workspace",noEligibility=Recoil_index_12({isEligible:!1});function CreateTeamsWorkspaceWizardModal({isVisible:r,onClose:s,onWizardCompleted:a,FORCE_CREATE_WORKSPACE_V2_VIEW:i,source:o}){var V;const x=Recoil_index_29(r?spaceState.trialEligibility:noEligibility).isEligible,{formatMessage:y}=useI18n(),_=useNavigate(),[E,R]=React$6.useState(createGlobalModelId("uuid4")),[S,j]=React$6.useState(firstWizardStep),[T,A]=React$6.useState(),[M,P]=React$6.useState(),D=useSyncSpaces().get(E||"");React$6.useEffect(()=>{r||(j(firstWizardStep),A(void 0),R(createGlobalModelId("uuid4")))},[r]),React$6.useEffect(()=>{var U;S==="payment_approval_required"&&((U=D==null?void 0:D.paymentStatus)==null?void 0:U.status)===SubscriptionPaymentStatusT.PAYMENT_VALID&&j("add_members")},[(V=D==null?void 0:D.paymentStatus)==null?void 0:V.status,S]);const O=React$6.useCallback(U=>{var X;const{status:G,invoiceUrl:oe}=(X=U.paymentStatus)!=null?X:{};G===SubscriptionPaymentStatusT.PAYMENT_FAILED&&oe!==void 0?(P(oe),j("payment_approval_required")):j("add_members")},[]);function B(){j("create_board")}function N(U){A(U),j("choose_template")}const F=React$6.useCallback((U,G,oe)=>{const X=getBoardUrl(window.location.search,G.id);_(X),a(U,!!oe)},[_,a]),W=React$6.useMemo(()=>!["create_board","choose_template","add_members"].includes(S),[S]);return jsxRuntimeExports.jsx(BackdropCardModal,{position:"center",frameLess:!0,isVisible:r,onClose:W?s:void 0,isTransparent:!0,children:()=>jsxRuntimeExports.jsxs("div",{className:cx$6(styles$Q.root,{[styles$Q.isTemplatesStep]:S==="choose_template",[styles$Q.isApprovalStep]:S==="payment_approval_required"}),children:[W&&jsxRuntimeExports.jsx("div",{className:styles$Q.close,onClick:s,"data-testid":"create-workspace-wizard-modal-close-btn",children:jsxRuntimeExports.jsx(SvgCloseicon,{})}),jsxRuntimeExports.jsxs(TabsReplacerContainer,{active:S,children:[jsxRuntimeExports.jsx(TabsTab,{label:"create_workspace",render:()=>jsxRuntimeExports.jsx(UnsafeHeightTransition,{children:x?jsxRuntimeExports.jsx(CreateWorkspaceModal,{workspaceId:E,FORCE_CREATE_WORKSPACE_V2_VIEW:i,autoFocus:isFocusPreventScrollSupported(),onAfterWorkspaceCreate:O,source:o},E):jsxRuntimeExports.jsx(CreateNonTrialingWorkspace,{workspaceId:E,onAfterWorkspaceCreate:O,source:o},E)})}),jsxRuntimeExports.jsx(TabsTab,{label:"payment_approval_required",render:()=>M&&D&&jsxRuntimeExports.jsx(CreateWorkspaceApprovePayment,{invoiceUrl:M})}),jsxRuntimeExports.jsx(TabsTab,{label:"add_members",render:()=>D?jsxRuntimeExports.jsx(CreateWorkspaceAddMembers,{isVisible:r&&S==="add_members",workspace:D,onSkip:B,onSuccess:()=>{j("create_board")},autoFocus:isFocusPreventScrollSupported(),title:y("CreateWorkspaceWizaedModal.add-members.title")}):null}),jsxRuntimeExports.jsx(TabsTab,{label:"create_board",render:()=>{if(!D)throw new Error("invariant");return jsxRuntimeExports.jsx(AppSidebarCreateBoardModalContent,{initialSpaceId:D.id,createFirstBoard:!0,hideCloseButton:!0,autoFocus:isFocusPreventScrollSupported(),onContinue:N})}}),jsxRuntimeExports.jsx(TabsTab,{label:"choose_template",render:()=>jsxRuntimeExports.jsx(BrowseTemplatesModalContent,{children:jsxRuntimeExports.jsx(BrowseTemplatesConnector,{...T,onBoardCreated:F,isInActiveFlow:r,children:({templateData:U,onCreate:G,selectedTemplate:oe,refetch:X})=>jsxRuntimeExports.jsx(BrowseTemplates_memo,{analyticsSource:"new_board_create_workspace",...U,refetch:X,onSelectTemplate:G,onCreateBlankTemplateClick:G,selectedTemplateId:oe==null?void 0:oe.id})})})})]})]})})}const CreateTeamsWorkspaceWizardModalContainer=({isVisible:r,onClose:s,FORCE_CREATE_WORKSPACE_V2_VIEW:a,source:i})=>{const o=React$6.useCallback((x,y)=>{var E;if(!((E=x.paymentStatus)!=null&&E.isTrialing)){s();return}delay(y?MODAL_TRANSITION_DELAY_ENHANCED:MODAL_TRANSITION_DELAY).finally(()=>{s(),openModal(TrialModal,{space:x})})},[s]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Backdrop,{isVisible:r}),jsxRuntimeExports.jsx(CreateTeamsWorkspaceWizardModal,{FORCE_CREATE_WORKSPACE_V2_VIEW:a,isVisible:r,onClose:s,onWizardCompleted:o,source:i})]})},TrialModal=({isVisible:r,onClose:s,space:a})=>{const{track:i}=useAnalytics(),o=React$6.useCallback(({selectedPlan:y,currency:_,totalAmount:E})=>{i("teams_upsell_submitted",{extra_str1:a.id,extra_str2:y,extra_str3:_,extra_double1:E})},[a.id,i]),x=React$6.useCallback(({stripePlanId:y,currency:_,totalAmount:E})=>{i("teams_upsell_succeeded",{extra_str1:a.id,extra_str2:y,extra_str3:_,extra_double1:E}),s()},[a,s,i]);return jsxRuntimeExports.jsx(BackdropCardModal,{position:"top",frameLess:!0,isVisible:r,onClose:()=>{i("teams_upsell_dismissed",{extra_str1:a.id,extra_str3:"outside"}),s()},children:()=>{var _;const y=(_=a.paymentStatus)==null?void 0:_.expiration;return jsxRuntimeExports.jsx(TrialPeriodOnboardingModal,{workspaceId:a.id,onMount:({currency:E,totalAmount:R})=>{i("teams_upsell_reached",{extra_str1:a.id,extra_str2:"workspace_creation",extra_str3:E,extra_double1:R})},onConfirm:x,onSubmitStart:o,onClose:E=>{i("teams_upsell_dismissed",{extra_str1:a.id,extra_str3:E}),s()},trialExpirationDate:y,renderPaymentElement:E=>jsxRuntimeExports.jsx(WorkspacePaymentElementForSetupIntent,{...E,workspaceId:a.id})})}})},CreateWorkspaceWizardModal=({isVisible:r,onClose:s,FORCE_CREATE_WORKSPACE_V2_VIEW:a,initialModalStep:i,source:o,choiceModalHeading:x})=>{const{track:y}=useAnalytics(),[_,E]=React$6.useState(null),R=React$6.useCallback(P=>()=>React$6.startTransition(()=>E(P)),[]),S=s,j=useFamilyPlanInfo(),T=useLatest(j),[A,M]=React$6.useState(()=>createGlobalModelId("uuid4"));return React$6.useEffect(()=>{_==="family"&&M(createGlobalModelId("uuid4"))},[_]),React$6.useEffect(()=>{r?R(i!=null?i:"choice")():R(null)()},[i,r,R]),React$6.useEffect(()=>{switch(_){case"choice":y("spaces_upsell",{extra_str1:o});break;case"team":y("team_intro_page_shown",{extra_str1:o});break;case"family":y("family_upsell_shown",{extra_str1:o,extra_str2:[T.current.Month.planId,T.current.Year.planId]});break;case"invite":y("invite_family_members_screen_shown",{extra_str1:o});break}},[_,T,o,y]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CreateTeamsWorkspaceWizardModalContainer,{isVisible:_==="team",onClose:S,FORCE_CREATE_WORKSPACE_V2_VIEW:a,source:o}),jsxRuntimeExports.jsx(AppSidebarWorkspaceButtonChoiceModal,{isVisible:_==="choice",heading:x,onClose:S,onSelect:P=>{y("spaces_upsell_tapped",{extra_str1:o,extra_str2:P==="team"?"teams":"family"})},onContinue:P=>{y("spaces_upsell_continue_tapped",{extra_str1:o,extra_str2:P==="team"?"teams":"family"}),R(P)()}}),jsxRuntimeExports.jsx(BackdropCardModal,{position:"top",frameLess:!0,isVisible:_==="family",onClose:S,children:()=>{if(_)return jsxRuntimeExports.jsx(PurchaseFamilyPlan,{onClose:S,onSubscribed:()=>E("invite"),workspaceId:A,source:o})}}),jsxRuntimeExports.jsx(AppSidebarWorkspaceButtonInviteFamily,{source:o,isVisible:_==="invite",maxMembers:j.maxMembers,workspaceId:A,onDone:S})]})};function $parcel$export(r,s,a,i){Object.defineProperty(r,s,{get:a,set:i,enumerable:!0,configurable:!0})}var $44d7e150ebc754d2$exports={};$parcel$export($44d7e150ebc754d2$exports,"ErrorBoundary",()=>$44d7e150ebc754d2$export$e926676385687eaf);var $ebb31c7feaa4405e$exports={};$parcel$export($ebb31c7feaa4405e$exports,"ErrorBoundaryContext",()=>$ebb31c7feaa4405e$export$b16d9fb1a22de840);const $ebb31c7feaa4405e$export$b16d9fb1a22de840=reactExports.createContext(null),$44d7e150ebc754d2$var$initialState={didCatch:!1,error:null};class $44d7e150ebc754d2$export$e926676385687eaf extends reactExports.Component{constructor(){super(...arguments);$e(this,"state",$44d7e150ebc754d2$var$initialState);$e(this,"resetErrorBoundary",(...a)=>{var o,x;const{error:i}=this.state;i!==null&&((x=(o=this.props).onReset)==null||x.call(o,{args:a,reason:"imperative-api"}),this.setState($44d7e150ebc754d2$var$initialState))})}static getDerivedStateFromError(a){return{didCatch:!0,error:a}}componentDidCatch(a,i){var o,x;(x=(o=this.props).onError)==null||x.call(o,a,i)}componentDidUpdate(a,i){var y,_;const{didCatch:o}=this.state,{resetKeys:x}=this.props;o&&i.error!==null&&$44d7e150ebc754d2$var$hasArrayChanged(a.resetKeys,x)&&((_=(y=this.props).onReset)==null||_.call(y,{next:x,prev:a.resetKeys,reason:"keys"}),this.setState($44d7e150ebc754d2$var$initialState))}render(){const{children:a,fallbackRender:i,FallbackComponent:o,fallback:x}=this.props,{didCatch:y,error:_}=this.state;let E=a;if(y){const R={error:_,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(x))E=x;else if(typeof i=="function")E=i(R);else if(o)E=reactExports.createElement(o,R);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return reactExports.createElement($ebb31c7feaa4405e$export$b16d9fb1a22de840.Provider,{value:{didCatch:y,error:_,resetErrorBoundary:this.resetErrorBoundary}},E)}}function $44d7e150ebc754d2$var$hasArrayChanged(r=[],s=[]){return r.length!==s.length||r.some((a,i)=>!Object.is(a,s[i]))}var $7c3c25b3f398a9d6$exports={};$parcel$export($7c3c25b3f398a9d6$exports,"useErrorBoundary",()=>$7c3c25b3f398a9d6$export$c052f6604b7d51fe);function $75c9d331f9c1ed1a$export$f20aa86254872370(r){if(r==null||typeof r.didCatch!="boolean"||typeof r.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found");return!0}function $7c3c25b3f398a9d6$export$c052f6604b7d51fe(){const r=reactExports.useContext($ebb31c7feaa4405e$export$b16d9fb1a22de840);$75c9d331f9c1ed1a$export$f20aa86254872370(r);const[s,a]=reactExports.useState({error:null,hasError:!1}),i=reactExports.useMemo(()=>({resetBoundary:()=>{r==null||r.resetErrorBoundary(),a({error:null,hasError:!1})},showBoundary:o=>a({error:o,hasError:!0})}),[r==null?void 0:r.resetErrorBoundary]);if(s.hasError)throw s.error;return i}var $62ff477d53f02a5b$exports={};$parcel$export($62ff477d53f02a5b$exports,"withErrorBoundary",()=>$62ff477d53f02a5b$export$f0c7a449e0cfaec7);function $62ff477d53f02a5b$export$f0c7a449e0cfaec7(r,s){const a=reactExports.forwardRef((o,x)=>reactExports.createElement($44d7e150ebc754d2$export$e926676385687eaf,s,reactExports.createElement(r,{...o,ref:x}))),i=r.displayName||r.name||"Unknown";return a.displayName=`withErrorBoundary(${i})`,a}const fbq_=typeof fbq>"u"?fbqUndefinedGuard:fbq;function fbqUndefinedGuard(){typeof fbq>"u"||fbq.apply(void 0,arguments)}const root$h="_root_17bax_1",totalNow="_totalNow_17bax_10",billedAmount="_billedAmount_17bax_15",noWrap="_noWrap_17bax_25",styles$N={root:root$h,totalNow,billedAmount,noWrap},PremiumPaymentFooter=({plan:r})=>{var o;const{planPeriod:s,freeTrialDays:a}=r,i=(o=r.currency)!=null?o:"USD";return jsxRuntimeExports.jsxs("div",{className:styles$N.root,children:[jsxRuntimeExports.jsx("div",{className:styles$N.totalNow,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.total-now",values:{price:a>0?"$0":r.formattedPrice}})}),jsxRuntimeExports.jsx("div",{className:styles$N.billedAmount,children:a===0?null:r.planPeriod===PremiumPlanPeriod.YEAR?jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.billed-annually",values:{dayCount:a,price:r.getPriceForMonthFloat(i)}}):s===PremiumPlanPeriod.SIX_MONTHS?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["In ",a," days: ",r.getPriceForMonthFloat(i),"/mo - billed"," ",jsxRuntimeExports.jsx("span",{className:styles$N.noWrap,children:"each 6 months"})]}):jsxRuntimeExports.jsx(FormattedMessage,{id:"TrialPeriodOnboardingModalV2.billed-monthly",values:{dayCount:a,price:r.getPriceForMonthFloat(i)}})})]})};function getAnalyticsPlanPeriod(r){switch(r){case PremiumPlanPeriod.MONTH:return 0;case PremiumPlanPeriod.SIX_MONTHS:return 2;case PremiumPlanPeriod.YEAR:return 1;default:throw new UnreachableCaseError(r)}}const SvgDailyPlannercomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:36,height:36,fill:"none",viewBox:"0 0 36 36",...r},reactExports.createElement("g",{clipPath:"url(#clip0_912_11165)"},reactExports.createElement("g",{filter:"url(#filter0_d_912_11165)"},reactExports.createElement("circle",{cx:8.3,cy:18.3,r:2.3,fill:"#E7384F"})),reactExports.createElement("g",{filter:"url(#filter1_d_912_11165)"},reactExports.createElement("circle",{cx:14.9,cy:18.3,r:2.3,fill:"#1EAE72"})),reactExports.createElement("g",{filter:"url(#filter2_d_912_11165)"},reactExports.createElement("circle",{cx:21.5,cy:18.3,r:2.3,fill:"#0080FF"})),reactExports.createElement("g",{filter:"url(#filter3_d_912_11165)"},reactExports.createElement("circle",{cx:28.1,cy:18.3,r:2.3,fill:"#F5A623"}))),reactExports.createElement("defs",null,reactExports.createElement("filter",{id:"filter0_d_912_11165",width:22.6,height:22.6,x:-3,y:10,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:3}),reactExports.createElement("feGaussianBlur",{stdDeviation:4.5}),reactExports.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0976846 0"}),reactExports.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_912_11165"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_912_11165",result:"shape"})),reactExports.createElement("filter",{id:"filter1_d_912_11165",width:22.6,height:22.6,x:3.6,y:10,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:3}),reactExports.createElement("feGaussianBlur",{stdDeviation:4.5}),reactExports.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0976846 0"}),reactExports.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_912_11165"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_912_11165",result:"shape"})),reactExports.createElement("filter",{id:"filter2_d_912_11165",width:22.6,height:22.6,x:10.2,y:10,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:3}),reactExports.createElement("feGaussianBlur",{stdDeviation:4.5}),reactExports.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0976846 0"}),reactExports.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_912_11165"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_912_11165",result:"shape"})),reactExports.createElement("filter",{id:"filter3_d_912_11165",width:22.6,height:22.6,x:16.8,y:10,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:3}),reactExports.createElement("feGaussianBlur",{stdDeviation:4.5}),reactExports.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0976846 0"}),reactExports.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_912_11165"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_912_11165",result:"shape"})),reactExports.createElement("clipPath",{id:"clip0_912_11165"},reactExports.createElement("rect",{width:36,height:36,fill:"#fff",rx:18})))),SvgLocationcomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M11.903 5.981a3 3 0 1 0 0 6 3 3 0 0 0 0-6Zm0 4.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"}),reactExports.createElement("path",{fill:"#0083FF",d:"M17.668 3.212A8.153 8.153 0 0 0 5.072 13.426l5.667 8.701a1.389 1.389 0 0 0 2.327 0l5.668-8.7a8.153 8.153 0 0 0-1.067-10.215Zm-.191 9.396-5.574 8.557-5.575-8.557a6.683 6.683 0 0 1 .87-8.336 6.653 6.653 0 0 1 9.409 0 6.683 6.683 0 0 1 .87 8.336Z"})),SvgRecurrentcomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M17.301 10.5h5.898a.375.375 0 0 1 .288.615l-2.949 3.54a.375.375 0 0 1-.576 0l-2.949-3.54a.375.375 0 0 1 .288-.615Zm-16.5 3h5.898a.375.375 0 0 0 .288-.615l-2.949-3.54a.375.375 0 0 0-.576 0l-2.949 3.54a.375.375 0 0 0 .288.615Z"}),reactExports.createElement("path",{fill:"#0083FF",fillRule:"evenodd",d:"M12 4.5a7.483 7.483 0 0 0-5.785 2.727.75.75 0 1 1-1.157-.954A9.003 9.003 0 0 1 20.875 10.5H19.35a7.503 7.503 0 0 0-7.35-6Zm-7.35 9a7.503 7.503 0 0 0 13.135 3.273.75.75 0 1 1 1.157.954A9.003 9.003 0 0 1 3.125 13.5H4.65Z",clipRule:"evenodd"})),SvgTagscomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:36,height:36,fill:"none",viewBox:"0 0 36 36",...r},reactExports.createElement("g",{clipPath:"url(#clip0_912_11144)"},reactExports.createElement("mask",{id:"mask0_912_11144",width:36,height:36,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#EDEDED",d:"M36 18c0 9.941-8.059 18-18 18S0 27.941 0 18 8.059 0 18 0s18 8.059 18 18Z"})),reactExports.createElement("g",{strokeWidth:1.6,mask:"url(#mask0_912_11144)"},reactExports.createElement("rect",{width:18.4,height:6.4,x:-3.2,y:14.8,stroke:"#0083FF",rx:3.2}),reactExports.createElement("rect",{width:18.4,height:6.4,x:20.8,y:14.8,stroke:"#C361FF",rx:3.2}))),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_912_11144"},reactExports.createElement("path",{fill:"#fff",d:"M0 0h36v36H0z"})))),SvgThemescomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M21.09 2.16c-1.996 0-4.24 1.1-6.666 3.271-1.692 1.514-3.145 3.248-4.152 4.566A5.625 5.625 0 0 0 3 15.375c0 2.926-1.522 4.23-1.598 4.293A.75.75 0 0 0 1.875 21h6.75a5.626 5.626 0 0 0 5.378-7.272c1.318-1.007 3.052-2.46 4.566-4.151 2.171-2.427 3.272-4.67 3.272-6.668a.75.75 0 0 0-.75-.75ZM8.626 19.5H3.433c.536-.894 1.067-2.253 1.067-4.125A4.125 4.125 0 1 1 8.625 19.5Zm3.041-8.853a37.8 37.8 0 0 1 .954-1.171 7.144 7.144 0 0 1 1.904 1.904c-.384.326-.774.644-1.17.954a5.668 5.668 0 0 0-1.688-1.687Zm3.99-.269a8.644 8.644 0 0 0-2.034-2.033c1.838-1.986 4.31-4.16 6.637-4.604-.444 2.326-2.618 4.799-4.604 6.637Z"})),SvgWhatsappcomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M23.74 6.327a5.5 5.5 0 0 1-.495 7.212L21.3 15.483a.75.75 0 0 1-1.06 0l-6.718-6.717a.75.75 0 0 1 0-1.06l1.944-1.945a5.501 5.501 0 0 1 7.212-.495l3.045-3.044a.75.75 0 0 1 1.06 1.06L23.74 6.327Zm-2.97 7.566 1.415-1.415a4 4 0 1 0-5.657-5.657l-1.415 1.415 5.657 5.656ZM13.778 11.215a.75.75 0 0 1 0 1.06l-2.127 2.127 2.947 2.947 2.126-2.126a.75.75 0 1 1 1.06 1.06L15.66 18.41l.827.826a.75.75 0 0 1 0 1.06l-1.945 1.946a5.5 5.5 0 0 1-7.212.494L4.286 25.78a.75.75 0 0 1-1.061-1.06l3.045-3.046a5.5 5.5 0 0 1 .494-7.212l1.945-1.944a.75.75 0 0 1 1.06 0l.823.822 2.126-2.126a.75.75 0 0 1 1.06 0ZM7.83 21.188a4 4 0 0 0 5.65-.007l1.415-1.414-5.657-5.657-1.414 1.414a4 4 0 0 0-.007 5.65l.007.007.006.006Z"})),SvgAicomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:36,height:36,fill:"none",viewBox:"0 0 36 36",...r},reactExports.createElement("path",{fill:"transparent",d:"M36 18c0 9.941-8.059 18-18 18S0 27.941 0 18 8.059 0 18 0s18 8.059 18 18Z"}),reactExports.createElement("path",{fill:"#0083FF",stroke:"#0083FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"m17 10 2.43 6.57L26 19l-6.57 2.43L17 28l-2.43-6.57L8 19l6.57-2.43L17 10ZM25.5 8l.675 1.825L28 10.5l-1.825.675L25.5 13l-.675-1.825L23 10.5l1.825-.675L25.5 8Z"})),root$g="_root_6pi26_1",features="_features_6pi26_16",feature="_feature_6pi26_16",featureText="_featureText_6pi26_41",featureIconWrapper="_featureIconWrapper_6pi26_47",title$4="_title_6pi26_62",styles$M={root:root$g,features,feature,featureText,featureIconWrapper,title:title$4};function PremiumFeaturesBox(){const{enabled:r}=Recoil_index_20(abExperimentState.AI_FEATURES),s=reactExports.useMemo(()=>{const a=createFeatureElement("_.plan-feature.recurrent",jsxRuntimeExports.jsx(SvgRecurrentcomponent,{})),i=createFeatureElement("_.plan-feature.themes",jsxRuntimeExports.jsx(SvgThemescomponent,{})),o=createFeatureElement("_.plan-feature.dailyPlanner",jsxRuntimeExports.jsx(SvgDailyPlannercomponent,{})),x=createFeatureElement("_.plan-feature.tags",jsxRuntimeExports.jsx(SvgTagscomponent,{})),y=r?createFeatureElement("_.plan-feature.ai",jsxRuntimeExports.jsx(SvgAicomponent,{})):createFeatureElement("_.plan-feature.location",jsxRuntimeExports.jsx(SvgLocationcomponent,{})),_=createFeatureElement("_.plan-feature.whatsApp",jsxRuntimeExports.jsx(SvgWhatsappcomponent,{})),E=[a,i,_,x,y,o];return reactExports.Children.toArray(E)},[r]);return jsxRuntimeExports.jsxs("div",{className:styles$M.root,children:[jsxRuntimeExports.jsx("div",{className:styles$M.title,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumFeaturesBox.title.new"})}),jsxRuntimeExports.jsx("div",{className:styles$M.features,children:s})]})}const PremiumFeaturesBox_=reactExports.memo(PremiumFeaturesBox);function createFeatureElement(r,s){return jsxRuntimeExports.jsxs("div",{className:styles$M.feature,children:[jsxRuntimeExports.jsx("div",{className:styles$M.featureIconWrapper,children:s}),jsxRuntimeExports.jsx("div",{className:styles$M.featureText,children:jsxRuntimeExports.jsx(FormattedMessage,{id:r,values:{newLine:jsxRuntimeExports.jsx("br",{})}})})]})}const claireAvatarImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAD6RJREFUWAmtWGlsHOd5fubYndl7ubvkLpeHSJGSSEmUrMuqZLsSHKSBe8C1Y7lAEcBo+qtFUrSw/xQF4up3LARIjNRF0bRp0yKxEis2HB9RXVtWfEWRLFIUJfE+994l956Z3Z3pM5tI1mW5MTLAR87O9T3fezzv834CPudhWdaQDjyqm+Y+yxDijUYrbjbFuGUJsNBKCKKQMK1WQhLE84pLfjmoCnOfZyrht3mJoLr4/Nc4HrOAnRb/NAjHaBFSQ0CzCZimBUlsQZBEPmZ/XoAoChAETHKcEp143icIGd743R0E5uV4lqPMccehm5ZVb/GmYVobWsuqNJuW1rQsndfswUtWjaPSMi3NtMqNX3/L+ztBSDSPc6TuQHXbhaZlWg0CtYd9btGUNx+mfZ/D/OS6/c3HPzdIvixwPMthtmiRjfV1q7ixYTUbNM1txydz3nbjs3/aq3iW41ND7a43+IKLK/s+xzFDb2BuehoXzn0EUZDgD4Xg83sQCAbh9QVRLBZRqdThcrnR2xdHOByE0+n8bQ1zki88JQhC/fYX7wD4m9X8iP+P8QUszK9iYmICneEQVhavoV4uIbm6DM0wYDLinQ4nmqYJj9tHkB4MbduCrmgU0e4Yenq6mSB2svy/Dhvkn3FOpt4nh/zJ6Y2zb/DsGGMFibU0rkxN0Vod6AiF8f7/zmJ1dgqCKEPXmvB1+NGSFChuD4x6GdVKETWjgvp7Vea2iJ27duDwgw+gp7//xsfvcXKM9y5zHL/5mVssSKvZCfHjbDYvVCo1lEsVLMzOElwHfnXuF7j40bvIJlIQnQ7UtAZ6aKnurjAXEECtYcK0ZLTMJgzdQFdnBF63Creq4sgjf4RtO3ffPO+nndvWe4JWfOn6AzcAEpid9rOlUim6OLcKTaNF6lVwRlwev4C3Tr+OXDoDQzPQIO/RRHSrCp/XhYH+GByKCxWCtFpgrMpQXQpcBEcKRG80iENHvohdhx6CU1Guz/1p/9O8MUyQFfuBGy6mS5+uV+vRdCKN4sY6dL2MhbkZJscvsbK0SJdq8DLGJKcLTpKwwyFApqvXKxWsLa0iwuTQTQGZQhEaQZKv4fe6+Y4LeikAwXgdpWoNRx/548+KyyhxPc3RdnUbIK3XVS6Xn1mam8Pamm29BjOziGtXrmFxaQm1ShkBtwtRvw9DPT2Ix7oIUIQiOVEh8Gw+B4mgjaaJZW8ac6sJrKVzyGVMBDsCaDV1aE0DTp8ffX2D2LJrzDbOvY5niOmfaMVMG2A6nf66qqpep1OBJxBA70AX3v2f1zB5aRylWgU+WYaProlGwrh/3z4Mbh6Awt8yM1Q0QWvrLHUa8qV15AsbWFxcwtT8PJYTGcwnkvhgNY1YZwg93T2Y/OUv0DM0CLfnnoXEvvk1jm+0AWYyhT8VOZOht9DXO8g4UeENhFCu1iHYtdUhwcHg2jKwCcPbhhn8Hih0r2xfd8isthJarSZi6IclSjh4oMx3K2gaDVy6OI5/+8kpZCqNtjdahobN28ew+/CD97Kgfe+xNkBNs4YaTW3n4uICJMItV0pQGjoy+QwU1Un6aMGjyrj/wB7sP7CXQd+iICAHttOLyoWKQaR7JYfK+JQAxQklEoSP2VHJF7DdMvG3ARVvn30PZyamMbe8BIHcGesfQLS3914gKUasIenxJ7/yF/TglwzDhMMpI5/Ngt/EzLUpLM3PtRNiz8gWfPHIEfgDQciCyPvMVgKzmOHUMbZeaasXSixOLqHZ0pFPpmAxJsN06+aBYWzui2F8YhzXEutYXUuinyQ+uuu+WwC2Wq0bCaTrGvNhbUmORMP7GIMoFStQbdroiLJSLKKQSxOIBd1gfLUMGPzPE2anSAs2KbMaJGkZJjPWDgOnZTAeSeCkpg0mjZ+lUPUGyRO2PpTRNzSMP3n4IUwt/wQrqQzOvv02/vCxL0NhLOosp/V6DSsry1xcCzaedHIV+Vxmn+wP+OJNzrK+nmflSGJkyxgCHWFUaxqKpSJaRhMlZrHRqKPBVYmkFxqOFqQlG02ILQGNJoHrcvvjdcZdONIFmfRik6AlSaw8dL3gwf7fO4xjmQK+9Z8/xeTkON586UUIwW5WoDqy6VXqyQoXLBDLBqqkpFgsGpc/OPtuXJBdpIQkrl0dx0ahwuyUkM1kUeGqGqwKJb5QZ9DX3H6YTQYfwUkcLbmFhinRck5odQ3l4gZ6ejdBJiiLoQCGjCA7KFZ5zqyPDG7GnrERBN0KUrTylUvnENu6CzKTMpFYgNjU2oK3waDxB1xwiLW47HI44i5yXHz7XqwXMvCpAqKxAZK1nYl2FjcpBmghvqTrFf52QpVVWo8VRTfRFA1oZhUNAvT6vAyFGihr4WxwmqYFgSrHUh20pgUlGEJHMAKFPzMMqWQiAX84zAoE8mkZmcwKVMmNSCSGwnqBi3bGZa+vwzI4me37WHccpdwyaouMML1ON9IzlGper61UWLZkia7z0P0ERRe0KBhE6JBIwrbVnQRSYVjIsgZVqUAhpSjNIBflAWtiO8MNOoBOt9OKHqLV6d6MXY0yFCKpPLr8MYzd14dCPgvTqFiyx+NJNjcavo1CkuBWKKeq0Bo11DUdDVpBYVaqjCeZrnIqPqRSBcquedblNHL5PDIsi32UYntHh+geDR6Xl0yjouYwIRayhM9zLtTpcaF3ZDvKjGm7hwkE/fCyMvnCHdg0thdX/msSGcbhtoERjG7fjfGL5xEJDiZlh+xKbB7q2rqytoDpNyYwNnoAM1dnaKUiXOQ1B+WZQt6S7KpBclaZJD0RH9x0rYMxmN1I4crMNJOkgu3Dg+gkwUeZJGWtgnNMhOmlBHaMjOLow1+AyUrToI5k4mNTPI4Rakev1wOdZdXHjJedArVkgMli0pt9UFxqQvb5lITXqyIcjSEQiMLFRLD5rIex0cGgtWMnQvcqIt1XzeHSpffxwYcfYznHLCeocCjSLoOLiTW6jc/uj8BPqTU9voC5pRWsk+gvzs5TQDTxZY9EidaJsEdh/giM8SrKOr3WsLC8tMxCIZNq5vHa6y/C4wmxqg0k5EhXx/lMev3Ps6SYarlOsnZAUiQMbd3GlTaxkk3Seoxqpr/qsBCkeB3duh1jw05UqXg8qpsLEjGzMIfOaD/6h7ajb/d9WEwnEPKFoTL8LLYAluBgqVvEyMGD2BqP4VIyi0BXPyVdDensfDsHVEo2mQKkXCrRiiIO7O88L7OqvZxMpU7MzlxFpbzBnqMTW7aNwe0OwRWlq145ZRsROpveLmbgQ4eOElwBi7OXUd6wKYbAafVNrAzhQBjhzm4I/gD2HH4IBuM5u7aIcDyK3Q8dQefoDqI10d3XjxXSVr1GGrMkbBkewyyr1txKhuyhYROTVZUayM1NvCyr7PgvXZmdpFt3sgWHSr1Xrzc4qQuDffdDX10hGVN+lQtQGPLkEiqTHsS6YqizbteZiRrVjC3RZEnlyrmahghfzwCOPn4M+cwa6cZAkDJLdFAbEljJqGJTXzdCsQiLQQPx7gEmpAmnqGBr/xDA+K3lc5N/88IP5tpqJhLpPBWLde+0+xCbBHq5wmptgw6WEBrjqnNZ1Go6fKQYMCsFkrOH/BaI+NvgkokluqrC0KBa5jdMUpNA8SArHnJqP98RYLr8vAeszi3A4WHsdqownO+RRytI5yM4eMhP18bh8yxAK+moNfVTfPHXilpoic9n0qm/K5dq3EFoUWA26LomlldWMLOWQ7BcxG66WydFVEtlOAW2lSx7stRiBUrj2qWPiYtg+glKJF/S7XbTVJiZhEhB6+lg6WMMIxJg7RVw4P4dBFAnbTGme1kxGNvRniiqWhB1xnW1JVW6BO/z+I/fAIzFfJm3Tv/sueEtPf+YTi/gQ2ZpNpvG9PQMVfVVOCQB/8APODipzrJXo0UDzET29JiauohUooA/eOQYRFrVJmzbYnC6UdAlXH3jTew5eBhhulkVYqSdFNbWRQzGYvwaZZtDh+Ug0bPnVrk4P2lKsOTnHv3St9v7N20X26bMr587ITjFv/rmt74T1es6A7hOk7MqsK6WqVDybNBD1IUa622RaiFFgbuxUaCrPfAGO3Hm/TMY3TFG7mQzlSETiHV0d4ZxwWzg7Dtv4dDvP4CYKuHMmQv4cOIydu4exrZtJjSBSkpMtQUHp4HP50qbLfWEjck+7OW2j5Mn3zFqDXU+nUg92Wg2BZtQG3Sp3SzZ2my0P45OWi27nmWdzJPjZkncDnSG4pDJJYvJNeq9C0guX0M5tUzCdsFNolfY2V26PI46a3R0aAj//bOfYy1XALtadMaCpJoataTDJmVWFreluoSn/v6rZ8av47oB0L6wurR0pbuXQqFYPWoDtGtxTaPMYp12yiJG7Dhk7PhpyXA0hOVMDrW6CV/Aj6CP9ZqJEeJ5N8MhNjgM0W5Fq0XUzQppi0q7oxOvnH4XTrrR4OJdAQkDW9k6kLQd9JRbFY//9RNvvXAdnP2fwXLrQaUsbB7Z9SPqv2PNMnmK1USjWFVIxl99+EFugaiIB7wYHIhilU381NUclYyBABWOm890h/zopTj1cA9Hor8NFPmNMplhAB9NzuA7L76GOuPTzm5FEfDA0W64Oii1ROHkXz7xymdvfdh7I4cOHXoqWwCqsnFMpO6zV1Gq13H6wmV8Yf8oBWYVbpeMgN+P+3Z1orxOqUXmD6sKA93BPZlehLYMQ+ViivlFLFy9hqvTyzh75hyaTDjZwe0SRWaM69wUkLmfM3ByMJ62N4/os1uPW1x8/dbq6mozn0v/+LvffcHStNoRXhdsjkwxUZzcUHKT72wxG41EKbEUVNly5gopcmINusQuUGVj75LYSNkbExZ+dX4CJ/79FNvSAslaQp2U3yT5U25bLcE8/u1v/svXd+58khfuPCh1737Yq5mfnz7OrTR7ryRt71KJBDedzGO1pJHHHEgWa+32dHNfH7ri3dBZw9NaAXMk7jJjz25IM9R433v1HXy8tIaBnq52jx3yOxlv7jS3Rp546Yc/OH43y11HdYNmrl+4/X8ymXxpx44dP19aWnqaXdczXLl3PsntE8p4p5vqN1jCtt5BCs0uigk285RjHuo8b9DDzK3ihRd/iolEjptMIQR8LkzlqhVf0PEcwZ04efJke//l9jlv/n1XF9/8gH2ezWYNHmdcLte/si/WFacjtFGqdm2U7SaH5Zn8FiSoADc0HbLCnplSSqvh+6++ie+98Q66+zcxgTDZHfT+c0sNf+XVN0+/NjU1Zdw+z91+35HFd3vobtf2DQ8Plev1R6m0940OxOJ7N22OD3b3xkU2+xMrq4nLyyuJ5Uw24VDV87T8y+fPn5+723c+69r/AdiRHZG4tQMQAAAAAElFTkSuQmCC",SvgReviewStarscomponent=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:78,height:12,viewBox:"0 0 78 12",...r},reactExports.createElement("path",{fill:"#FCC716",fillRule:"evenodd",d:"m5.5 9.75-2.565 1.349a.7.7 0 0 1-1.016-.738l.49-2.857L.334 5.481a.7.7 0 0 1 .388-1.194l2.868-.416 1.282-2.6a.7.7 0 0 1 1.256 0l1.282 2.6 2.868.416a.7.7 0 0 1 .388 1.194L8.591 7.504l.49 2.857a.7.7 0 0 1-1.016.738L5.5 9.75zm17 0-2.565 1.349a.7.7 0 0 1-1.016-.738l.49-2.857-2.075-2.023a.7.7 0 0 1 .388-1.194l2.868-.416 1.282-2.6a.7.7 0 0 1 1.256 0l1.282 2.6 2.868.416a.7.7 0 0 1 .388 1.194l-2.075 2.023.49 2.857a.7.7 0 0 1-1.016.738L22.5 9.75zm17 0-2.565 1.349a.7.7 0 0 1-1.016-.738l.49-2.857-2.075-2.023a.7.7 0 0 1 .388-1.194l2.868-.416 1.282-2.6a.7.7 0 0 1 1.256 0l1.282 2.6 2.868.416a.7.7 0 0 1 .388 1.194l-2.075 2.023.49 2.857a.7.7 0 0 1-1.016.738L39.5 9.75zm17 0-2.565 1.349a.7.7 0 0 1-1.016-.738l.49-2.857-2.075-2.023a.7.7 0 0 1 .388-1.194l2.868-.416 1.282-2.6a.7.7 0 0 1 1.256 0l1.282 2.6 2.868.416a.7.7 0 0 1 .388 1.194l-2.075 2.023.49 2.857a.7.7 0 0 1-1.016.738L56.5 9.75zm16 0-2.565 1.349a.7.7 0 0 1-1.016-.738l.49-2.857-2.075-2.023a.7.7 0 0 1 .388-1.194l2.868-.416 1.282-2.6a.7.7 0 0 1 1.256 0l1.282 2.6 2.868.416a.7.7 0 0 1 .388 1.194l-2.075 2.023.49 2.857a.7.7 0 0 1-1.016.738L72.5 9.75z"}));function PremiumReview(){return jsxRuntimeExports.jsxs("div",{className:"PremiumReview",children:[jsxRuntimeExports.jsx(SvgReviewStarscomponent,{}),jsxRuntimeExports.jsx("div",{className:"PremiumReview__reviewText",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumReview.review.text"})}),jsxRuntimeExports.jsxs("div",{className:"PremiumReview__reviewer",children:[jsxRuntimeExports.jsx("img",{src:claireAvatarImageUrl,alt:"",height:"24",width:"24",className:"PremiumReview__reviewer__avatar"}),jsxRuntimeExports.jsx("span",{className:"PremiumReview__reviewer__name",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumReview.review.name"})})]})]})}const root$f="_root_153xi_1",title$3="_title_153xi_13",subtitle$1="_subtitle_153xi_21",buttons$3="_buttons_153xi_29",buyButton$1="_buyButton_153xi_38",dismissButton$1="_dismissButton_153xi_45",plansArea$1="_plansArea_153xi_83",paymentForm="_paymentForm_153xi_88",space$1="_space_153xi_89",error$1="_error_153xi_96",center$1="_center_153xi_101",errorMessage="_errorMessage_153xi_106",loading$1="_loading_153xi_110",backContainer="_backContainer_153xi_117",back="_back_153xi_117",isVisible="_isVisible_153xi_131",backButton="_backButton_153xi_137",paymentApprovalRequired="_paymentApprovalRequired_153xi_153",approve="_approve_153xi_168",styles$L={root:root$f,title:title$3,subtitle:subtitle$1,buttons:buttons$3,buyButton:buyButton$1,dismissButton:dismissButton$1,plansArea:plansArea$1,paymentForm,space:space$1,error:error$1,center:center$1,errorMessage,loading:loading$1,backContainer,back,isVisible,backButton,paymentApprovalRequired,approve};var re$3={exports:{}};const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16;var constants$1={SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH$2,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH},define_process_env_default={};const debug$1=typeof process=="object"&&define_process_env_default&&define_process_env_default.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var debug_1=debug$1;(function(r,s){const{MAX_SAFE_COMPONENT_LENGTH:a}=constants$1,i=debug_1;s=r.exports={};const o=s.re=[],x=s.src=[],y=s.t={};let _=0;const E=(R,S,j)=>{const T=_++;i(R,T,S),y[R]=T,x[T]=S,o[T]=new RegExp(S,j?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","[0-9]+"),E("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),E("MAINVERSION",`(${x[y.NUMERICIDENTIFIER]})\\.(${x[y.NUMERICIDENTIFIER]})\\.(${x[y.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${x[y.NUMERICIDENTIFIERLOOSE]})\\.(${x[y.NUMERICIDENTIFIERLOOSE]})\\.(${x[y.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${x[y.NUMERICIDENTIFIER]}|${x[y.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${x[y.NUMERICIDENTIFIERLOOSE]}|${x[y.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${x[y.PRERELEASEIDENTIFIER]}(?:\\.${x[y.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${x[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[y.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER","[0-9A-Za-z-]+"),E("BUILD",`(?:\\+(${x[y.BUILDIDENTIFIER]}(?:\\.${x[y.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${x[y.MAINVERSION]}${x[y.PRERELEASE]}?${x[y.BUILD]}?`),E("FULL",`^${x[y.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${x[y.MAINVERSIONLOOSE]}${x[y.PRERELEASELOOSE]}?${x[y.BUILD]}?`),E("LOOSE",`^${x[y.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${x[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${x[y.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${x[y.XRANGEIDENTIFIER]})(?:\\.(${x[y.XRANGEIDENTIFIER]})(?:\\.(${x[y.XRANGEIDENTIFIER]})(?:${x[y.PRERELEASE]})?${x[y.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${x[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[y.XRANGEIDENTIFIERLOOSE]})(?:${x[y.PRERELEASELOOSE]})?${x[y.BUILD]}?)?)?`),E("XRANGE",`^${x[y.GTLT]}\\s*${x[y.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${x[y.GTLT]}\\s*${x[y.XRANGEPLAINLOOSE]}$`),E("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),E("COERCERTL",x[y.COERCE],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${x[y.LONETILDE]}\\s+`,!0),s.tildeTrimReplace="$1~",E("TILDE",`^${x[y.LONETILDE]}${x[y.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${x[y.LONETILDE]}${x[y.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${x[y.LONECARET]}\\s+`,!0),s.caretTrimReplace="$1^",E("CARET",`^${x[y.LONECARET]}${x[y.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${x[y.LONECARET]}${x[y.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${x[y.GTLT]}\\s*(${x[y.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${x[y.GTLT]}\\s*(${x[y.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${x[y.GTLT]}\\s*(${x[y.LOOSEPLAIN]}|${x[y.XRANGEPLAIN]})`,!0),s.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${x[y.XRANGEPLAIN]})\\s+-\\s+(${x[y.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${x[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[y.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$3,re$3.exports);var reExports=re$3.exports;const opts=["includePrerelease","loose","rtl"],parseOptions$2=r=>r?typeof r!="object"?{loose:!0}:opts.filter(s=>r[s]).reduce((s,a)=>(s[a]=!0,s),{}):{};var parseOptions_1=parseOptions$2;const numeric=/^[0-9]+$/,compareIdentifiers$1=(r,s)=>{const a=numeric.test(r),i=numeric.test(s);return a&&i&&(r=+r,s=+s),r===s?0:a&&!i?-1:i&&!a?1:r<s?-1:1},rcompareIdentifiers=(r,s)=>compareIdentifiers$1(s,r);var identifiers$1={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER}=constants$1,{re:re$2,t:t$3}=reExports,parseOptions$1=parseOptions_1,{compareIdentifiers}=identifiers$1;let SemVer$d=class hr{constructor(s,a){if(a=parseOptions$1(a),s instanceof hr){if(s.loose===!!a.loose&&s.includePrerelease===!!a.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid Version: ${s}`);if(s.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug("SemVer",s,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const i=s.trim().match(a.loose?re$2[t$3.LOOSE]:re$2[t$3.FULL]);if(!i)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const x=+o;if(x>=0&&x<MAX_SAFE_INTEGER)return x}return o}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(debug("SemVer.compare",this.version,this.options,s),!(s instanceof hr)){if(typeof s=="string"&&s===this.version)return 0;s=new hr(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof hr||(s=new hr(s,this.options)),compareIdentifiers(this.major,s.major)||compareIdentifiers(this.minor,s.minor)||compareIdentifiers(this.patch,s.patch)}comparePre(s){if(s instanceof hr||(s=new hr(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let a=0;do{const i=this.prerelease[a],o=s.prerelease[a];if(debug("prerelease compare",a,i,o),i===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(i===void 0)return-1;if(i===o)continue;return compareIdentifiers(i,o)}while(++a)}compareBuild(s){s instanceof hr||(s=new hr(s,this.options));let a=0;do{const i=this.build[a],o=s.build[a];if(debug("prerelease compare",a,i,o),i===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(i===void 0)return-1;if(i===o)continue;return compareIdentifiers(i,o)}while(++a)}inc(s,a){switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a),this.inc("pre",a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a),this.inc("pre",a);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}a&&(compareIdentifiers(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=[a,0]):this.prerelease=[a,0]);break;default:throw new Error(`invalid increment argument: ${s}`)}return this.format(),this.raw=this.version,this}};var semver$1=SemVer$d;const{MAX_LENGTH}=constants$1,{re:re$1,t:t$2}=reExports,SemVer$c=semver$1,parseOptions=parseOptions_1,parse$6=(r,s)=>{if(s=parseOptions(s),r instanceof SemVer$c)return r;if(typeof r!="string"||r.length>MAX_LENGTH||!(s.loose?re$1[t$2.LOOSE]:re$1[t$2.FULL]).test(r))return null;try{return new SemVer$c(r,s)}catch{return null}};var parse_1=parse$6;const parse$5=parse_1,valid$2=(r,s)=>{const a=parse$5(r,s);return a?a.version:null};var valid_1=valid$2;const parse$4=parse_1,clean$1=(r,s)=>{const a=parse$4(r.trim().replace(/^[=v]+/,""),s);return a?a.version:null};var clean_1=clean$1;const SemVer$b=semver$1,inc$1=(r,s,a,i)=>{typeof a=="string"&&(i=a,a=void 0);try{return new SemVer$b(r instanceof SemVer$b?r.version:r,a).inc(s,i).version}catch{return null}};var inc_1=inc$1;const SemVer$a=semver$1,compare$b=(r,s,a)=>new SemVer$a(r,a).compare(new SemVer$a(s,a));var compare_1=compare$b;const compare$a=compare_1,eq$3=(r,s,a)=>compare$a(r,s,a)===0;var eq_1=eq$3;const parse$3=parse_1,eq$2=eq_1,diff$1=(r,s)=>{if(eq$2(r,s))return null;{const a=parse$3(r),i=parse$3(s),o=a.prerelease.length||i.prerelease.length,x=o?"pre":"",y=o?"prerelease":"";for(const _ in a)if((_==="major"||_==="minor"||_==="patch")&&a[_]!==i[_])return x+_;return y}};var diff_1=diff$1;const SemVer$9=semver$1,major$1=(r,s)=>new SemVer$9(r,s).major;var major_1=major$1;const SemVer$8=semver$1,minor$1=(r,s)=>new SemVer$8(r,s).minor;var minor_1=minor$1;const SemVer$7=semver$1,patch$1=(r,s)=>new SemVer$7(r,s).patch;var patch_1=patch$1;const parse$2=parse_1,prerelease$1=(r,s)=>{const a=parse$2(r,s);return a&&a.prerelease.length?a.prerelease:null};var prerelease_1=prerelease$1;const compare$9=compare_1,rcompare$1=(r,s,a)=>compare$9(s,r,a);var rcompare_1=rcompare$1;const compare$8=compare_1,compareLoose$1=(r,s)=>compare$8(r,s,!0);var compareLoose_1=compareLoose$1;const SemVer$6=semver$1,compareBuild$3=(r,s,a)=>{const i=new SemVer$6(r,a),o=new SemVer$6(s,a);return i.compare(o)||i.compareBuild(o)};var compareBuild_1=compareBuild$3;const compareBuild$2=compareBuild_1,sort$1=(r,s)=>r.sort((a,i)=>compareBuild$2(a,i,s));var sort_1=sort$1;const compareBuild$1=compareBuild_1,rsort$1=(r,s)=>r.sort((a,i)=>compareBuild$1(i,a,s));var rsort_1=rsort$1;const compare$7=compare_1,gt$4=(r,s,a)=>compare$7(r,s,a)>0;var gt_1=gt$4;const compare$6=compare_1,lt$3=(r,s,a)=>compare$6(r,s,a)<0;var lt_1=lt$3;const compare$5=compare_1,neq$2=(r,s,a)=>compare$5(r,s,a)!==0;var neq_1=neq$2;const compare$4=compare_1,gte$3=(r,s,a)=>compare$4(r,s,a)>=0;var gte_1=gte$3;const compare$3=compare_1,lte$3=(r,s,a)=>compare$3(r,s,a)<=0;var lte_1=lte$3;const eq$1=eq_1,neq$1=neq_1,gt$3=gt_1,gte$2=gte_1,lt$2=lt_1,lte$2=lte_1,cmp$1=(r,s,a,i)=>{switch(s){case"===":return typeof r=="object"&&(r=r.version),typeof a=="object"&&(a=a.version),r===a;case"!==":return typeof r=="object"&&(r=r.version),typeof a=="object"&&(a=a.version),r!==a;case"":case"=":case"==":return eq$1(r,a,i);case"!=":return neq$1(r,a,i);case">":return gt$3(r,a,i);case">=":return gte$2(r,a,i);case"<":return lt$2(r,a,i);case"<=":return lte$2(r,a,i);default:throw new TypeError(`Invalid operator: ${s}`)}};var cmp_1=cmp$1;const SemVer$5=semver$1,parse$1=parse_1,{re,t:t$1}=reExports,coerce$1=(r,s)=>{if(r instanceof SemVer$5)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;s=s||{};let a=null;if(!s.rtl)a=r.match(re[t$1.COERCE]);else{let i;for(;(i=re[t$1.COERCERTL].exec(r))&&(!a||a.index+a[0].length!==r.length);)(!a||i.index+i[0].length!==a.index+a[0].length)&&(a=i),re[t$1.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;re[t$1.COERCERTL].lastIndex=-1}return a===null?null:parse$1(`${a[2]}.${a[3]||"0"}.${a[4]||"0"}`,s)};var coerce_1=coerce$1,iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(r){r.prototype[Symbol.iterator]=function*(){for(let s=this.head;s;s=s.next)yield s.value}}),iterator}var yallist=Yallist$1;Yallist$1.Node=Node$1;Yallist$1.create=Yallist$1;function Yallist$1(r){var s=this;if(s instanceof Yallist$1||(s=new Yallist$1),s.tail=null,s.head=null,s.length=0,r&&typeof r.forEach=="function")r.forEach(function(o){s.push(o)});else if(arguments.length>0)for(var a=0,i=arguments.length;a<i;a++)s.push(arguments[a]);return s}Yallist$1.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var s=r.next,a=r.prev;return s&&(s.prev=a),a&&(a.next=s),r===this.head&&(this.head=s),r===this.tail&&(this.tail=a),r.list.length--,r.next=null,r.prev=null,r.list=null,s};Yallist$1.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var s=this.head;r.list=this,r.next=s,s&&(s.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Yallist$1.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var s=this.tail;r.list=this,r.prev=s,s&&(s.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Yallist$1.prototype.push=function(){for(var r=0,s=arguments.length;r<s;r++)push(this,arguments[r]);return this.length};Yallist$1.prototype.unshift=function(){for(var r=0,s=arguments.length;r<s;r++)unshift(this,arguments[r]);return this.length};Yallist$1.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Yallist$1.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Yallist$1.prototype.forEach=function(r,s){s=s||this;for(var a=this.head,i=0;a!==null;i++)r.call(s,a.value,i,this),a=a.next};Yallist$1.prototype.forEachReverse=function(r,s){s=s||this;for(var a=this.tail,i=this.length-1;a!==null;i--)r.call(s,a.value,i,this),a=a.prev};Yallist$1.prototype.get=function(r){for(var s=0,a=this.head;a!==null&&s<r;s++)a=a.next;if(s===r&&a!==null)return a.value};Yallist$1.prototype.getReverse=function(r){for(var s=0,a=this.tail;a!==null&&s<r;s++)a=a.prev;if(s===r&&a!==null)return a.value};Yallist$1.prototype.map=function(r,s){s=s||this;for(var a=new Yallist$1,i=this.head;i!==null;)a.push(r.call(s,i.value,this)),i=i.next;return a};Yallist$1.prototype.mapReverse=function(r,s){s=s||this;for(var a=new Yallist$1,i=this.tail;i!==null;)a.push(r.call(s,i.value,this)),i=i.prev;return a};Yallist$1.prototype.reduce=function(r,s){var a,i=this.head;if(arguments.length>1)a=s;else if(this.head)i=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;i!==null;o++)a=r(a,i.value,o),i=i.next;return a};Yallist$1.prototype.reduceReverse=function(r,s){var a,i=this.tail;if(arguments.length>1)a=s;else if(this.tail)i=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;i!==null;o--)a=r(a,i.value,o),i=i.prev;return a};Yallist$1.prototype.toArray=function(){for(var r=new Array(this.length),s=0,a=this.head;a!==null;s++)r[s]=a.value,a=a.next;return r};Yallist$1.prototype.toArrayReverse=function(){for(var r=new Array(this.length),s=0,a=this.tail;a!==null;s++)r[s]=a.value,a=a.prev;return r};Yallist$1.prototype.slice=function(r,s){s=s||this.length,s<0&&(s+=this.length),r=r||0,r<0&&(r+=this.length);var a=new Yallist$1;if(s<r||s<0)return a;r<0&&(r=0),s>this.length&&(s=this.length);for(var i=0,o=this.head;o!==null&&i<r;i++)o=o.next;for(;o!==null&&i<s;i++,o=o.next)a.push(o.value);return a};Yallist$1.prototype.sliceReverse=function(r,s){s=s||this.length,s<0&&(s+=this.length),r=r||0,r<0&&(r+=this.length);var a=new Yallist$1;if(s<r||s<0)return a;r<0&&(r=0),s>this.length&&(s=this.length);for(var i=this.length,o=this.tail;o!==null&&i>s;i--)o=o.prev;for(;o!==null&&i>r;i--,o=o.prev)a.push(o.value);return a};Yallist$1.prototype.splice=function(r,s,...a){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var i=0,o=this.head;o!==null&&i<r;i++)o=o.next;for(var x=[],i=0;o&&i<s;i++)x.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var i=0;i<a.length;i++)o=insert(this,o,a[i]);return x};Yallist$1.prototype.reverse=function(){for(var r=this.head,s=this.tail,a=r;a!==null;a=a.prev){var i=a.prev;a.prev=a.next,a.next=i}return this.head=s,this.tail=r,this};function insert(r,s,a){var i=s===r.head?new Node$1(a,null,s,r):new Node$1(a,s,s.next,r);return i.next===null&&(r.tail=i),i.prev===null&&(r.head=i),r.length++,i}function push(r,s){r.tail=new Node$1(s,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function unshift(r,s){r.head=new Node$1(s,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Node$1(r,s,a,i){if(!(this instanceof Node$1))return new Node$1(r,s,a,i);this.list=i,this.value=r,s?(s.next=this,this.prev=s):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{requireIterator()(Yallist$1)}catch(r){}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(s){if(typeof s=="number"&&(s={max:s}),s||(s={}),s.max&&(typeof s.max!="number"||s.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=s.max||1/0;const a=s.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof a!="function"?naiveLength:a,this[ALLOW_STALE]=s.stale||!1,s.maxAge&&typeof s.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=s.maxAge||0,this[DISPOSE]=s.dispose,this[NO_DISPOSE_ON_SET]=s.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=s.updateAgeOnGet||!1,this.reset()}set max(s){if(typeof s!="number"||s<0)throw new TypeError("max must be a non-negative number");this[MAX]=s||1/0,trim(this)}get max(){return this[MAX]}set allowStale(s){this[ALLOW_STALE]=!!s}get allowStale(){return this[ALLOW_STALE]}set maxAge(s){if(typeof s!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=s,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(s){typeof s!="function"&&(s=naiveLength),s!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=s,this[LENGTH]=0,this[LRU_LIST].forEach(a=>{a.length=this[LENGTH_CALCULATOR](a.value,a.key),this[LENGTH]+=a.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(s,a){a=a||this;for(let i=this[LRU_LIST].tail;i!==null;){const o=i.prev;forEachStep(this,s,i,a),i=o}}forEach(s,a){a=a||this;for(let i=this[LRU_LIST].head;i!==null;){const o=i.next;forEachStep(this,s,i,a),i=o}}keys(){return this[LRU_LIST].toArray().map(s=>s.key)}values(){return this[LRU_LIST].toArray().map(s=>s.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(s=>this[DISPOSE](s.key,s.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(s=>isStale(this,s)?!1:{k:s.key,v:s.value,e:s.now+(s.maxAge||0)}).toArray().filter(s=>s)}dumpLru(){return this[LRU_LIST]}set(s,a,i){if(i=i||this[MAX_AGE],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const o=i?Date.now():0,x=this[LENGTH_CALCULATOR](a,s);if(this[CACHE].has(s)){if(x>this[MAX])return del(this,this[CACHE].get(s)),!1;const E=this[CACHE].get(s).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](s,E.value)),E.now=o,E.maxAge=i,E.value=a,this[LENGTH]+=x-E.length,E.length=x,this.get(s),trim(this),!0}const y=new Entry(s,a,x,o,i);return y.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](s,a),!1):(this[LENGTH]+=y.length,this[LRU_LIST].unshift(y),this[CACHE].set(s,this[LRU_LIST].head),trim(this),!0)}has(s){if(!this[CACHE].has(s))return!1;const a=this[CACHE].get(s).value;return!isStale(this,a)}get(s){return get(this,s,!0)}peek(s){return get(this,s,!1)}pop(){const s=this[LRU_LIST].tail;return s?(del(this,s),s.value):null}del(s){del(this,this[CACHE].get(s))}load(s){this.reset();const a=Date.now();for(let i=s.length-1;i>=0;i--){const o=s[i],x=o.e||0;if(x===0)this.set(o.k,o.v);else{const y=x-a;y>0&&this.set(o.k,o.v,y)}}}prune(){this[CACHE].forEach((s,a)=>get(this,a,!1))}}const get=(r,s,a)=>{const i=r[CACHE].get(s);if(i){const o=i.value;if(isStale(r,o)){if(del(r,i),!r[ALLOW_STALE])return}else a&&(r[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),r[LRU_LIST].unshiftNode(i));return o.value}},isStale=(r,s)=>{if(!s||!s.maxAge&&!r[MAX_AGE])return!1;const a=Date.now()-s.now;return s.maxAge?a>s.maxAge:r[MAX_AGE]&&a>r[MAX_AGE]},trim=r=>{if(r[LENGTH]>r[MAX])for(let s=r[LRU_LIST].tail;r[LENGTH]>r[MAX]&&s!==null;){const a=s.prev;del(r,s),s=a}},del=(r,s)=>{if(s){const a=s.value;r[DISPOSE]&&r[DISPOSE](a.key,a.value),r[LENGTH]-=a.length,r[CACHE].delete(a.key),r[LRU_LIST].removeNode(s)}};class Entry{constructor(s,a,i,o,x){this.key=s,this.value=a,this.length=i,this.now=o,this.maxAge=x||0}}const forEachStep=(r,s,a,i)=>{let o=a.value;isStale(r,o)&&(del(r,a),r[ALLOW_STALE]||(o=void 0)),o&&s.call(i,o.value,o.key,r)};var lruCache=LRUCache,range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;class r{constructor(ee,ae){if(ae=i(ae),ee instanceof r)return ee.loose===!!ae.loose&&ee.includePrerelease===!!ae.includePrerelease?ee:new r(ee.raw,ae);if(ee instanceof o)return this.raw=ee.value,this.set=[[ee]],this.format(),this;if(this.options=ae,this.loose=!!ae.loose,this.includePrerelease=!!ae.includePrerelease,this.raw=ee,this.set=ee.split("||").map(ie=>this.parseRange(ie.trim())).filter(ie=>ie.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${ee}`);if(this.set.length>1){const ie=this.set[0];if(this.set=this.set.filter(se=>!T(se[0])),this.set.length===0)this.set=[ie];else if(this.set.length>1){for(const se of this.set)if(se.length===1&&A(se[0])){this.set=[se];break}}}this.format()}format(){return this.range=this.set.map(ee=>ee.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(ee){ee=ee.trim();const ie=`parseRange:${Object.keys(this.options).join(",")}:${ee}`,se=a.get(ie);if(se)return se;const Q=this.options.loose,Z=Q?_[E.HYPHENRANGELOOSE]:_[E.HYPHENRANGE];ee=ee.replace(Z,G(this.options.includePrerelease)),x("hyphen replace",ee),ee=ee.replace(_[E.COMPARATORTRIM],R),x("comparator trim",ee),ee=ee.replace(_[E.TILDETRIM],S),ee=ee.replace(_[E.CARETTRIM],j),ee=ee.split(/\s+/).join(" ");let J=ee.split(" ").map(me=>P(me,this.options)).join(" ").split(/\s+/).map(me=>U(me,this.options));Q&&(J=J.filter(me=>(x("loose invalid filter",me,this.options),!!me.match(_[E.COMPARATORLOOSE])))),x("range list",J);const te=new Map,de=J.map(me=>new o(me,this.options));for(const me of de){if(T(me))return[me];te.set(me.value,me)}te.size>1&&te.has("")&&te.delete("");const ce=[...te.values()];return a.set(ie,ce),ce}intersects(ee,ae){if(!(ee instanceof r))throw new TypeError("a Range is required");return this.set.some(ie=>M(ie,ae)&&ee.set.some(se=>M(se,ae)&&ie.every(Q=>se.every(Z=>Q.intersects(Z,ae)))))}test(ee){if(!ee)return!1;if(typeof ee=="string")try{ee=new y(ee,this.options)}catch{return!1}for(let ae=0;ae<this.set.length;ae++)if(oe(this.set[ae],ee,this.options))return!0;return!1}}range=r;const s=lruCache,a=new s({max:1e3}),i=parseOptions_1,o=requireComparator(),x=debug_1,y=semver$1,{re:_,t:E,comparatorTrimReplace:R,tildeTrimReplace:S,caretTrimReplace:j}=reExports,T=X=>X.value==="<0.0.0-0",A=X=>X.value==="",M=(X,ee)=>{let ae=!0;const ie=X.slice();let se=ie.pop();for(;ae&&ie.length;)ae=ie.every(Q=>se.intersects(Q,ee)),se=ie.pop();return ae},P=(X,ee)=>(x("comp",X,ee),X=B(X,ee),x("caret",X),X=D(X,ee),x("tildes",X),X=F(X,ee),x("xrange",X),X=V(X,ee),x("stars",X),X),L=X=>!X||X.toLowerCase()==="x"||X==="*",D=(X,ee)=>X.trim().split(/\s+/).map(ae=>O(ae,ee)).join(" "),O=(X,ee)=>{const ae=ee.loose?_[E.TILDELOOSE]:_[E.TILDE];return X.replace(ae,(ie,se,Q,Z,J)=>{x("tilde",X,ie,se,Q,Z,J);let te;return L(se)?te="":L(Q)?te=`>=${se}.0.0 <${+se+1}.0.0-0`:L(Z)?te=`>=${se}.${Q}.0 <${se}.${+Q+1}.0-0`:J?(x("replaceTilde pr",J),te=`>=${se}.${Q}.${Z}-${J} <${se}.${+Q+1}.0-0`):te=`>=${se}.${Q}.${Z} <${se}.${+Q+1}.0-0`,x("tilde return",te),te})},B=(X,ee)=>X.trim().split(/\s+/).map(ae=>N(ae,ee)).join(" "),N=(X,ee)=>{x("caret",X,ee);const ae=ee.loose?_[E.CARETLOOSE]:_[E.CARET],ie=ee.includePrerelease?"-0":"";return X.replace(ae,(se,Q,Z,J,te)=>{x("caret",X,se,Q,Z,J,te);let de;return L(Q)?de="":L(Z)?de=`>=${Q}.0.0${ie} <${+Q+1}.0.0-0`:L(J)?Q==="0"?de=`>=${Q}.${Z}.0${ie} <${Q}.${+Z+1}.0-0`:de=`>=${Q}.${Z}.0${ie} <${+Q+1}.0.0-0`:te?(x("replaceCaret pr",te),Q==="0"?Z==="0"?de=`>=${Q}.${Z}.${J}-${te} <${Q}.${Z}.${+J+1}-0`:de=`>=${Q}.${Z}.${J}-${te} <${Q}.${+Z+1}.0-0`:de=`>=${Q}.${Z}.${J}-${te} <${+Q+1}.0.0-0`):(x("no pr"),Q==="0"?Z==="0"?de=`>=${Q}.${Z}.${J}${ie} <${Q}.${Z}.${+J+1}-0`:de=`>=${Q}.${Z}.${J}${ie} <${Q}.${+Z+1}.0-0`:de=`>=${Q}.${Z}.${J} <${+Q+1}.0.0-0`),x("caret return",de),de})},F=(X,ee)=>(x("replaceXRanges",X,ee),X.split(/\s+/).map(ae=>W(ae,ee)).join(" ")),W=(X,ee)=>{X=X.trim();const ae=ee.loose?_[E.XRANGELOOSE]:_[E.XRANGE];return X.replace(ae,(ie,se,Q,Z,J,te)=>{x("xRange",X,ie,se,Q,Z,J,te);const de=L(Q),ce=de||L(Z),me=ce||L(J),ve=me;return se==="="&&ve&&(se=""),te=ee.includePrerelease?"-0":"",de?se===">"||se==="<"?ie="<0.0.0-0":ie="*":se&&ve?(ce&&(Z=0),J=0,se===">"?(se=">=",ce?(Q=+Q+1,Z=0,J=0):(Z=+Z+1,J=0)):se==="<="&&(se="<",ce?Q=+Q+1:Z=+Z+1),se==="<"&&(te="-0"),ie=`${se+Q}.${Z}.${J}${te}`):ce?ie=`>=${Q}.0.0${te} <${+Q+1}.0.0-0`:me&&(ie=`>=${Q}.${Z}.0${te} <${Q}.${+Z+1}.0-0`),x("xRange return",ie),ie})},V=(X,ee)=>(x("replaceStars",X,ee),X.trim().replace(_[E.STAR],"")),U=(X,ee)=>(x("replaceGTE0",X,ee),X.trim().replace(_[ee.includePrerelease?E.GTE0PRE:E.GTE0],"")),G=X=>(ee,ae,ie,se,Q,Z,J,te,de,ce,me,ve,xe)=>(L(ie)?ae="":L(se)?ae=`>=${ie}.0.0${X?"-0":""}`:L(Q)?ae=`>=${ie}.${se}.0${X?"-0":""}`:Z?ae=`>=${ae}`:ae=`>=${ae}${X?"-0":""}`,L(de)?te="":L(ce)?te=`<${+de+1}.0.0-0`:L(me)?te=`<${de}.${+ce+1}.0-0`:ve?te=`<=${de}.${ce}.${me}-${ve}`:X?te=`<${de}.${ce}.${+me+1}-0`:te=`<=${te}`,`${ae} ${te}`.trim()),oe=(X,ee,ae)=>{for(let ie=0;ie<X.length;ie++)if(!X[ie].test(ee))return!1;if(ee.prerelease.length&&!ae.includePrerelease){for(let ie=0;ie<X.length;ie++)if(x(X[ie].semver),X[ie].semver!==o.ANY&&X[ie].semver.prerelease.length>0){const se=X[ie].semver;if(se.major===ee.major&&se.minor===ee.minor&&se.patch===ee.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const r=Symbol("SemVer ANY");class s{static get ANY(){return r}constructor(S,j){if(j=a(j),S instanceof s){if(S.loose===!!j.loose)return S;S=S.value}y("comparator",S,j),this.options=j,this.loose=!!j.loose,this.parse(S),this.semver===r?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}parse(S){const j=this.options.loose?i[o.COMPARATORLOOSE]:i[o.COMPARATOR],T=S.match(j);if(!T)throw new TypeError(`Invalid comparator: ${S}`);this.operator=T[1]!==void 0?T[1]:"",this.operator==="="&&(this.operator=""),T[2]?this.semver=new _(T[2],this.options.loose):this.semver=r}toString(){return this.value}test(S){if(y("Comparator.test",S,this.options.loose),this.semver===r||S===r)return!0;if(typeof S=="string")try{S=new _(S,this.options)}catch{return!1}return x(S,this.operator,this.semver,this.options)}intersects(S,j){if(!(S instanceof s))throw new TypeError("a Comparator is required");if((!j||typeof j!="object")&&(j={loose:!!j,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new E(S.value,j).test(this.value);if(S.operator==="")return S.value===""?!0:new E(this.value,j).test(S.semver);const T=(this.operator===">="||this.operator===">")&&(S.operator===">="||S.operator===">"),A=(this.operator==="<="||this.operator==="<")&&(S.operator==="<="||S.operator==="<"),M=this.semver.version===S.semver.version,P=(this.operator===">="||this.operator==="<=")&&(S.operator===">="||S.operator==="<="),L=x(this.semver,"<",S.semver,j)&&(this.operator===">="||this.operator===">")&&(S.operator==="<="||S.operator==="<"),D=x(this.semver,">",S.semver,j)&&(this.operator==="<="||this.operator==="<")&&(S.operator===">="||S.operator===">");return T||A||M&&P||L||D}}comparator=s;const a=parseOptions_1,{re:i,t:o}=reExports,x=cmp_1,y=debug_1,_=semver$1,E=requireRange();return comparator}const Range$9=requireRange(),satisfies$4=(r,s,a)=>{try{s=new Range$9(s,a)}catch{return!1}return s.test(r)};var satisfies_1=satisfies$4;const Range$8=requireRange(),toComparators$1=(r,s)=>new Range$8(r,s).set.map(a=>a.map(i=>i.value).join(" ").trim().split(" "));var toComparators_1=toComparators$1;const SemVer$4=semver$1,Range$7=requireRange(),maxSatisfying$1=(r,s,a)=>{let i=null,o=null,x=null;try{x=new Range$7(s,a)}catch{return null}return r.forEach(y=>{x.test(y)&&(!i||o.compare(y)===-1)&&(i=y,o=new SemVer$4(i,a))}),i};var maxSatisfying_1=maxSatisfying$1;const SemVer$3=semver$1,Range$6=requireRange(),minSatisfying$1=(r,s,a)=>{let i=null,o=null,x=null;try{x=new Range$6(s,a)}catch{return null}return r.forEach(y=>{x.test(y)&&(!i||o.compare(y)===1)&&(i=y,o=new SemVer$3(i,a))}),i};var minSatisfying_1=minSatisfying$1;const SemVer$2=semver$1,Range$5=requireRange(),gt$2=gt_1,minVersion$1=(r,s)=>{r=new Range$5(r,s);let a=new SemVer$2("0.0.0");if(r.test(a)||(a=new SemVer$2("0.0.0-0"),r.test(a)))return a;a=null;for(let i=0;i<r.set.length;++i){const o=r.set[i];let x=null;o.forEach(y=>{const _=new SemVer$2(y.semver.version);switch(y.operator){case">":_.prerelease.length===0?_.patch++:_.prerelease.push(0),_.raw=_.format();case"":case">=":(!x||gt$2(_,x))&&(x=_);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${y.operator}`)}}),x&&(!a||gt$2(a,x))&&(a=x)}return a&&r.test(a)?a:null};var minVersion_1=minVersion$1;const Range$4=requireRange(),validRange$1=(r,s)=>{try{return new Range$4(r,s).range||"*"}catch{return null}};var valid$1=validRange$1;const SemVer$1=semver$1,Comparator$2=requireComparator(),{ANY:ANY$1}=Comparator$2,Range$3=requireRange(),satisfies$3=satisfies_1,gt$1=gt_1,lt$1=lt_1,lte$1=lte_1,gte$1=gte_1,outside$3=(r,s,a,i)=>{r=new SemVer$1(r,i),s=new Range$3(s,i);let o,x,y,_,E;switch(a){case">":o=gt$1,x=lte$1,y=lt$1,_=">",E=">=";break;case"<":o=lt$1,x=gte$1,y=gt$1,_="<",E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$3(r,s,i))return!1;for(let R=0;R<s.set.length;++R){const S=s.set[R];let j=null,T=null;if(S.forEach(A=>{A.semver===ANY$1&&(A=new Comparator$2(">=0.0.0")),j=j||A,T=T||A,o(A.semver,j.semver,i)?j=A:y(A.semver,T.semver,i)&&(T=A)}),j.operator===_||j.operator===E||(!T.operator||T.operator===_)&&x(r,T.semver))return!1;if(T.operator===E&&y(r,T.semver))return!1}return!0};var outside_1=outside$3;const outside$2=outside_1,gtr$1=(r,s,a)=>outside$2(r,s,">",a);var gtr_1=gtr$1;const outside$1=outside_1,ltr$1=(r,s,a)=>outside$1(r,s,"<",a);var ltr_1=ltr$1;const Range$2=requireRange(),intersects$1=(r,s,a)=>(r=new Range$2(r,a),s=new Range$2(s,a),r.intersects(s));var intersects_1=intersects$1;const satisfies$2=satisfies_1,compare$2=compare_1;var simplify=(r,s,a)=>{const i=[];let o=null,x=null;const y=r.sort((S,j)=>compare$2(S,j,a));for(const S of y)satisfies$2(S,s,a)?(x=S,o||(o=S)):(x&&i.push([o,x]),x=null,o=null);o&&i.push([o,null]);const _=[];for(const[S,j]of i)S===j?_.push(S):!j&&S===y[0]?_.push("*"):j?S===y[0]?_.push(`<=${j}`):_.push(`${S} - ${j}`):_.push(`>=${S}`);const E=_.join(" || "),R=typeof s.raw=="string"?s.raw:String(s);return E.length<R.length?E:s};const Range$1=requireRange(),Comparator$1=requireComparator(),{ANY}=Comparator$1,satisfies$1=satisfies_1,compare$1=compare_1,subset$1=(r,s,a={})=>{if(r===s)return!0;r=new Range$1(r,a),s=new Range$1(s,a);let i=!1;e:for(const o of r.set){for(const x of s.set){const y=simpleSubset(o,x,a);if(i=i||y!==null,y)continue e}if(i)return!1}return!0},simpleSubset=(r,s,a)=>{if(r===s)return!0;if(r.length===1&&r[0].semver===ANY){if(s.length===1&&s[0].semver===ANY)return!0;a.includePrerelease?r=[new Comparator$1(">=0.0.0-0")]:r=[new Comparator$1(">=0.0.0")]}if(s.length===1&&s[0].semver===ANY){if(a.includePrerelease)return!0;s=[new Comparator$1(">=0.0.0")]}const i=new Set;let o,x;for(const A of r)A.operator===">"||A.operator===">="?o=higherGT(o,A,a):A.operator==="<"||A.operator==="<="?x=lowerLT(x,A,a):i.add(A.semver);if(i.size>1)return null;let y;if(o&&x){if(y=compare$1(o.semver,x.semver,a),y>0)return null;if(y===0&&(o.operator!==">="||x.operator!=="<="))return null}for(const A of i){if(o&&!satisfies$1(A,String(o),a)||x&&!satisfies$1(A,String(x),a))return null;for(const M of s)if(!satisfies$1(A,String(M),a))return!1;return!0}let _,E,R,S,j=x&&!a.includePrerelease&&x.semver.prerelease.length?x.semver:!1,T=o&&!a.includePrerelease&&o.semver.prerelease.length?o.semver:!1;j&&j.prerelease.length===1&&x.operator==="<"&&j.prerelease[0]===0&&(j=!1);for(const A of s){if(S=S||A.operator===">"||A.operator===">=",R=R||A.operator==="<"||A.operator==="<=",o){if(T&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===T.major&&A.semver.minor===T.minor&&A.semver.patch===T.patch&&(T=!1),A.operator===">"||A.operator===">="){if(_=higherGT(o,A,a),_===A&&_!==o)return!1}else if(o.operator===">="&&!satisfies$1(o.semver,String(A),a))return!1}if(x){if(j&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===j.major&&A.semver.minor===j.minor&&A.semver.patch===j.patch&&(j=!1),A.operator==="<"||A.operator==="<="){if(E=lowerLT(x,A,a),E===A&&E!==x)return!1}else if(x.operator==="<="&&!satisfies$1(x.semver,String(A),a))return!1}if(!A.operator&&(x||o)&&y!==0)return!1}return!(o&&R&&!x&&y!==0||x&&S&&!o&&y!==0||T||j)},higherGT=(r,s,a)=>{if(!r)return s;const i=compare$1(r.semver,s.semver,a);return i>0?r:i<0||s.operator===">"&&r.operator===">="?s:r},lowerLT=(r,s,a)=>{if(!r)return s;const i=compare$1(r.semver,s.semver,a);return i<0?r:i>0||s.operator==="<"&&r.operator==="<="?s:r};var subset_1=subset$1;const internalRe=reExports,constants=constants$1,SemVer=semver$1,identifiers=identifiers$1,parse=parse_1,valid=valid_1,clean=clean_1,inc=inc_1,diff=diff_1,major=major_1,minor=minor_1,patch=patch_1,prerelease=prerelease_1,compare=compare_1,rcompare=rcompare_1,compareLoose=compareLoose_1,compareBuild=compareBuild_1,sort=sort_1,rsort=rsort_1,gt=gt_1,lt=lt_1,eq=eq_1,neq=neq_1,gte=gte_1,lte=lte_1,cmp=cmp_1,coerce=coerce_1,Comparator=requireComparator(),Range=requireRange(),satisfies=satisfies_1,toComparators=toComparators_1,maxSatisfying=maxSatisfying_1,minSatisfying=minSatisfying_1,minVersion=minVersion_1,validRange=valid$1,outside=outside_1,gtr=gtr_1,ltr=ltr_1,intersects=intersects_1,simplifyRange=simplify,subset=subset_1;var semver={parse,valid,clean,inc,diff,major,minor,patch,prerelease,compare,rcompare,compareLoose,compareBuild,sort,rsort,gt,lt,eq,neq,gte,lte,cmp,coerce,Comparator,Range,satisfies,toComparators,maxSatisfying,minSatisfying,minVersion,validRange,outside,gtr,ltr,intersects,simplifyRange,subset,SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers};const NO_AB_VERSION="---";function useShouldShowMonthlyPremiumPlans(r=getAppVersion()){const{version_in_review:s=NO_AB_VERSION}=Recoil_index_20(abExperimentState.MAC_IN_REVIEW);return!reactExports.useMemo(()=>s===NO_AB_VERSION||semver.valid(r)==null||semver.valid(s)==null?!1:semver.gte(r,s),[s,r])}function PremiumPlanChoices({onSelectedIndexPlanChange:r,premiumPlanChoices:s,selectedIndexPlan:a,isCollapsed:i}){const o=useI18n(),x=useShouldShowMonthlyPremiumPlans(),y=reactExports.useMemo(()=>s==null?[]:s.map((E,R)=>{const S=E.discountPrecent;let j=E.formattedPrice;x&&E.planPeriod!==PremiumPlanPeriod.MONTH&&(j=o.formatPrice(E.getPriceForMonthFloat(E.currency,1),E.currency));const T=S===0||S==null;return{index:R,key:R,id:R,title:o.formatMessage("PremiumPlanChoices.premium-plans.billing."+E.planPeriod),banner:E.markLabel?o.formatMessage(E.markLabel):null,subtitlePrice:o.formatMessage(`PremiumPlanChoices.premium-plans.subtitle.price.${x?PremiumPlanPeriod.MONTH:E.planPeriod}`,{formattedPrice:j}),discountPercent:S,isSubtitleDiscountPrecentHidden:T,subtitleDiscountPrecent:T?"":o.formatMessage("PremiumPlanChoices.premium-plans.subtitle.discount",{discountPercent:S})}}),[o,s,x]),_=reactExports.useMemo(()=>y.map(E=>{const R=a===E.index;return jsxRuntimeExports.jsx(PremiumPlanPickerButton,{id:E.id,title:E.title,banner:E.banner,subtitle:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[E.subtitlePrice,E.isSubtitleDiscountPrecentHidden?null:jsxRuntimeExports.jsxs("span",{className:cx$6({"PremiumPlanChoices__premiumPlan__subtitle--active":R}),children:[" ",E.subtitleDiscountPrecent]})]})},E.key)}),[y,a]);return jsxRuntimeExports.jsx(PremiumPlanPicker,{isCollapsed:i,selectedValue:a,onSelect:r,children:_})}const findInitialPlanIndex=r=>r.findIndex(s=>s.hasBestValueMark),StripePlans=({source:r,selectedPlanRef:s,onPlanSelectedByUser:a})=>{const i=Recoil_index_29(premiumState.stripePlans),o=useI18n(),{track:x}=useAnalytics(),y=Recoil_index_20(abExperimentState.WEB_PREMIUM_TRIAL).enabled,_=reactExports.useMemo(()=>y?[getPremiumPlanFromStripePlan(i,StripePlan.monthlyNoDiscount,o.locale),getPremiumPlanFromStripePlan(i,StripePlan.YearlySevenDaysDiscount,o.locale),getPremiumPlanFromStripePlan(i,StripePlan.sixMonthsNoDiscount,o.locale)]:[getPremiumPlanFromStripePlan(i,StripePlan.webMonthly2019,o.locale),getPremiumPlanFromStripePlan(i,StripePlan.webYearly2019,o.locale),getPremiumPlanFromStripePlan(i,StripePlan.web6Month2019,o.locale)],[o.locale,i,y]);reactExports.useEffect(()=>{x("premium_screen_reached",{extra_str1:r,extra_str2:_.map(S=>S.planId)})},[_,r,x]),reactExports.useEffect(()=>{a==null||a(_[findInitialPlanIndex(_)],!0)},[_]);const[E,R]=reactExports.useState(findInitialPlanIndex(_));return reactExports.useImperativeHandle(s,()=>_[E]),jsxRuntimeExports.jsx(PremiumPlanChoices,{premiumPlanChoices:_,selectedIndexPlan:E,onSelectedIndexPlanChange:S=>{R(S),a==null||a(_[S],!1)}})},premiumPlansMap={[StripePlan.webMonthly2019]:{stripeSubmitButtonLabel:"_.buttons.continue",stripeSubTitle:"_.stripeModal.subTitle.webMonthly2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!1,discountPrecent:0,markLabel:null},[StripePlan.web6Month2019]:{stripeSubmitButtonLabel:"_.buttons.continue",stripeSubTitle:"_.stripeModal.subTitle.web6Month2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!1,discountPrecent:25,markLabel:null},[StripePlan.webYearly2019]:{stripeSubmitButtonLabel:"_.buttons.continue",stripeSubTitle:"_.stripeModal.subTitle.webYearly2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!0,discountPrecent:50,markLabel:"PremiumPlanChoices.premium-plans.banner"},[StripePlan.monthlyNoDiscount]:{stripeSubmitButtonLabel:"_.buttons.continue",stripeSubTitle:"_.stripeModal.subTitle.webMonthly2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!1,discountPrecent:null,markLabel:"_.stripeModal.noTrial"},[StripePlan.sixMonthsNoDiscount]:{stripeSubmitButtonLabel:"_.buttons.continue",stripeSubTitle:"_.stripeModal.subTitle.web6Month2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!1,discountPrecent:null,markLabel:"_.stripeModal.noTrial"},[StripePlan.YearlySevenDaysDiscount]:{stripeSubmitButtonLabel:"_.stripeModal.startSevenDaysTrial",stripeSubTitle:"_.stripeModal.subTitle.webYearly2019",stripeTitle:"_.stripeModal.title",planDevice:PremiumPlanDevice.ALL_DEVICES,hasBestValueMark:!0,discountPrecent:null,markLabel:"PremiumPlanChoices.premium-plans.banner-with-50-off"}};function getPremiumPlanFromStripePlan(r,s,a){const i=r[s];assertNonNullable(i);const o=validateString(i.currency),x=validateNumber(i.price),y=validateNumber(i.trial),_=(S,j=1)=>{if(validateUsersSize(j),S.toUpperCase()==="USD")return x*j/100;throw new Error(`getPriceFloat() received unsupported currency of "${S}" for plan of "${i}"`)},E=(S,j=1)=>{switch(i==null?void 0:i.period){case"Month":return _(S,j);case"6_Month":return Math.floor(_(S,j)*100/6)/100;case"Year":return Math.floor(_(S,j)*100/12)/100;default:throw new Error(`getPriceForMonth(): Unknown plan period of "${i.period}"`)}},R=new Intl.NumberFormat(a,{currency:o,style:"currency"}).format(_(o));return{...premiumPlansMap[s],provider:PremiumSubscriptionPaymentProvider.STRIPE,currency:o,freeTrialDays:y,planId:s,planPeriod:getPremiumPlanPeriodFromStripePlanPeriod(i.period),price:x,formattedPrice:R,priceAnalytics:x,getPriceFloat:_,getPriceForMonthFloat:E}}function getPremiumPlanPeriodFromStripePlanPeriod(r){switch(r){case"Year":return PremiumPlanPeriod.YEAR;case"Month":return PremiumPlanPeriod.MONTH;case"6_Month":return PremiumPlanPeriod.SIX_MONTHS;default:throw new ReferenceError(`getPremiumPlanFromStripePlan() - getPremiumPlanPeriodFromStripePlanPeriod() - '${String(r)}' Doesn't exist`)}}function validateUsersSize(r){if(!Number.isInteger(r))throw new TypeError(`fetchStripePlansData - getPrice() Receive non interger for usersSize (\`${r}\`)`);if(r<1)throw new Error(`fetchStripePlansData - getPrice() usersSize size must be bigger than 1 but received \`${r}\``)}const BuyPremiumStripe=({source:r,onPlanSelectedByUser:s,onDismiss:a,onSuccess:i,teams:o})=>{var be;const x=useI18n(),{userDetails:y}=useAuth(),_=useAuthService(),{track:E}=useAnalytics(),R=reactExports.useRef(null),{confirmSetup:S,refreshIntentIfNeeded:j}=useStripeSetupIntent(R,premiumState.useRefreshStripeSetupIntent(),{userDetails:y}),[T,A]=reactExports.useState(1),[M,P]=reactExports.useState(!1),L=reactExports.useRef(),[D,O]=reactExports.useState(),[B,N]=reactExports.useState(),F=reactExports.useCallback((ye,Ie)=>{s==null||s(ye,Ie),N(ye)},[s]),[W,V]=reactExports.useState(),[U,G]=reactExports.useTransition(),oe=async()=>{L.current&&(E("premium_screen_plan_picked",{extra_str1:r,extra_str2:L.current.planId,extra_double1:getAnalyticsPlanPeriod(L.current.planPeriod),extra_double2:L.current.hasBestValueMark?1:0,extra_double3:L.current.priceAnalytics}),E("subscription_started",{extra_str1:r,extra_str2:L.current.planId,extra_double1:getAnalyticsPlanPeriod(L.current.planPeriod),extra_double2:L.current.hasBestValueMark?1:0,extra_double3:L.current.priceAnalytics}),G(()=>{O(L.current),A(2)}))},X=reactExports.useRef(!1);reactExports.useEffect(()=>()=>{T===2&&!X.current&&E("subscription_cancelled",{})},[T,E]);const[ee,ae]=reactExports.useState(!1),[ie,se]=reactExports.useState(!1),Q=useSyncPremiumStripeSubscribe(),Z=premiumState.useRefreshStripePlans(),[J,te]=reactExports.useState(),de=async()=>{var ye,Ie;if(ee&&D){se(!0);try{const Pe=await S(),we=await Q({planId:D.planId,stripeData:{setupIntentId:Pe.id}});try{E("subscription_succeeded",{extra_str1:r,extra_str2:D.planId,extra_double1:getAnalyticsPlanPeriod(D.planPeriod),extra_double2:D.hasBestValueMark?1:0,extra_double3:D.priceAnalytics}),trackSuccess({gtag_sendTo:"AW-1010176638/mVWrCPfct4wBEP6k2OED",currency:D.currency,value:D.getPriceFloat((ye=D.currency)!=null?ye:""),gtag_transactionId:we.subscriptionData.stripe_sub.id})}catch(Re){AnydoSentry.captureException(Re)}X.current=!0,await Promise.all([_.refreshUserFromServer().catch(AnydoSentry.captureException),_.refreshSubscriptionStatus().catch(AnydoSentry.captureException)]),i==null||i()}catch(Pe){if(isHttpError(Pe)&&((Ie=Pe.payload)==null?void 0:Ie.error_code)===ERROR_PAYMENT_INCOMPLETE){te(Pe.payload.invoice_url),A(3);return}V(Pe),E("subscription_failed",{extra_str1:String(Pe)})}finally{se(!1)}}},ce=reactExports.useCallback(()=>{const ye=getContactFormUrl((y==null?void 0:y.name)||"",(y==null?void 0:y.email)||"","sales");openNewWindowUrl(ye)},[y==null?void 0:y.email,y==null?void 0:y.name]),[me,ve]=reactExports.useState(!1),xe=()=>{_.refreshUserFromServer().catch(AnydoSentry.captureException)},ge=useIsPremium();return reactExports.useEffect(()=>{ge&&T===3&&a()},[T,ge,a]),reactExports.useEffect(()=>{const ye=()=>{document.visibilityState==="visible"&&_.refreshUserFromServer().catch(AnydoSentry.captureException)};return document.addEventListener("visibilitychange",ye),()=>document.removeEventListener("visibilitychange",ye)},[_]),jsxRuntimeExports.jsxs("section",{className:styles$L.root,children:[jsxRuntimeExports.jsxs("h1",{className:styles$L.title,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.title.new"}),jsxRuntimeExports.jsx("div",{className:styles$L.subtitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.subtitle"})})]}),jsxRuntimeExports.jsx(PremiumFeaturesBox_,{}),jsxRuntimeExports.jsx("div",{className:styles$L.backContainer,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$L.back,{[styles$L.isVisible]:T===2}),children:jsxRuntimeExports.jsx("button",{type:"button",disabled:ie,className:cx$6(styles$L.backButton,"rtl-mirror-icon"),title:x.formatMessage("_.buttons.back"),onClick:()=>A(1),children:jsxRuntimeExports.jsx(BackButtonIcon,{})})})}),jsxRuntimeExports.jsx("div",{className:styles$L.plansArea,children:jsxRuntimeExports.jsxs(TabsReplacerContainer,{isFullHeight:!0,active:T,children:[jsxRuntimeExports.jsx(TabsTab,{label:1,render:()=>jsxRuntimeExports.jsx($44d7e150ebc754d2$export$e926676385687eaf,{onError:ye=>V(ye),fallbackRender:({resetErrorBoundary:ye})=>jsxRuntimeExports.jsxs("div",{className:cx$6(styles$L.error,styles$L.center),children:[jsxRuntimeExports.jsx("div",{className:styles$L.errorMessage,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ButtonInlineText,{disabled:U,onClick:()=>{G(()=>{V(void 0),Z(),ye()})},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.tryAgain"})})," ",jsxRuntimeExports.jsx(FormattedMessage,{id:"_.or"})," ",jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>a(),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"})})]})]}),children:jsxRuntimeExports.jsx("div",{className:styles$L.space,children:jsxRuntimeExports.jsx(StripePlans,{source:r,selectedPlanRef:L,onPlanSelectedByUser:F})})})}),jsxRuntimeExports.jsx(TabsTab,{label:2,render:()=>jsxRuntimeExports.jsx("div",{className:styles$L.paymentForm,children:jsxRuntimeExports.jsx($44d7e150ebc754d2$export$e926676385687eaf,{onError:ye=>V(ye),fallbackRender:({resetErrorBoundary:ye})=>jsxRuntimeExports.jsxs("div",{className:styles$L.error,children:[jsxRuntimeExports.jsx("div",{className:styles$L.errorMessage,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"})}),jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>{G(()=>{V(void 0),j(),ye()})},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.tryAgain"})}),U&&jsxRuntimeExports.jsx(Delayed,{ms:1e3,children:jsxRuntimeExports.jsx("div",{className:styles$L.loading,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})})})]}),children:jsxRuntimeExports.jsxs(ThemedElements,{ref:R,clientSecretState:premiumState.stripeSetupIntent,children:[jsxRuntimeExports.jsx(PaymentElement,{onCompleteChange:P,onReadyStateChange:ae}),D&&jsxRuntimeExports.jsx(PremiumPaymentFooter,{plan:D})]})})})}),jsxRuntimeExports.jsx(TabsTab,{label:3,render:()=>jsxRuntimeExports.jsx("div",{className:styles$L.paymentApprovalRequired,children:jsxRuntimeExports.jsx("h2",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"ApproveIncompletePayment.heading"})})})})]})}),jsxRuntimeExports.jsx(PremiumReview,{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{className:styles$L.buttons,children:T===2?W?jsxRuntimeExports.jsxs("div",{className:styles$L.error,children:[jsxRuntimeExports.jsx("div",{className:styles$L.errorMessage,children:isStripeCardError(W)?W.message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"})}),jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>{G(()=>{j(),V(void 0)})},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.tryAgain"})}),U&&jsxRuntimeExports.jsx(Delayed,{ms:1e3,children:jsxRuntimeExports.jsx("div",{className:styles$L.loading,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})})})]}):jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{className:styles$L.buyButton,loading:ie,disabled:!M||W!==void 0,theme:"primary",onClick:de,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})}):T===3?jsxRuntimeExports.jsxs("div",{children:[J&&jsxRuntimeExports.jsx("div",{className:styles$L.approve,children:jsxRuntimeExports.jsx(ApprovePaymentLink,{invoiceUrl:J,isLoading:me,onClick:()=>ve(!0)})}),jsxRuntimeExports.jsx("div",{className:styles$L.footer,children:me?jsxRuntimeExports.jsx(FormattedMessage,{id:"ApproveIncompletePayment.refresh-the-page",values:{a:ye=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:xe,children:ye})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.billing.contact-sales",values:{a:ye=>jsxRuntimeExports.jsx(ButtonInlineText,{onClick:ce,children:ye})}})})]}):T===1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{disabled:W!==void 0,className:styles$L.buyButton,loading:U,theme:"primary",onClick:oe,children:jsxRuntimeExports.jsx(FormattedMessage,{id:(be=B==null?void 0:B.stripeSubmitButtonLabel)!=null?be:"_.buttons.continue"})}),jsxRuntimeExports.jsx("button",{type:"button",className:styles$L.dismissButton,onClick:a,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.button.dismiss"})})]}):null}),o]})};function trackSuccess({currency:r,value:s,gtag_sendTo:a,gtag_transactionId:i}){i!=null&&trackGtag("event","conversion",{send_to:a,value:s,currency:r,transaction_id:i}),r!=null&&fbq_("track","Purchase",{value:s,currency:r.toUpperCase()})}function trackGtag(...r){typeof gtag<"u"&&gtag(...r)}const root$e="_root_8wyfu_1",title$2="_title_8wyfu_13",subtitle="_subtitle_8wyfu_21",buttons$2="_buttons_8wyfu_29",buyButton="_buyButton_8wyfu_38",dismissButton="_dismissButton_8wyfu_45",plansArea="_plansArea_8wyfu_83",error="_error_8wyfu_87",space="_space_8wyfu_95",styles$K={root:root$e,title:title$2,subtitle,buttons:buttons$2,buyButton,dismissButton,plansArea,error,space},AppStorePlans=({source:r,onPlanSelectedByUser:s,selectedPlanRef:a})=>{const{track:i}=useAnalytics(),o=Recoil_index_29(premiumState.inAppProductList(r==="onboarding"?"onboardingPremiumPlanChoices":"premiumPlanChoices")),x=reactExports.useMemo(()=>toMacAppStorePremiumPlanChoices(o),[o]),[y,_]=reactExports.useState(x.findIndex(E=>E.hasBestValueMark));return reactExports.useImperativeHandle(a,()=>x[y],[x,y]),reactExports.useEffect(()=>{i("premium_screen_reached",{extra_str1:r,extra_str2:x.map(E=>E.productId)})},[x,r,i]),jsxRuntimeExports.jsx(PremiumPlanChoices,{premiumPlanChoices:x,selectedIndexPlan:y,onSelectedIndexPlanChange:E=>{_(E),s==null||s(x[E])}})};function toMacAppStorePremiumPlanChoices(r){if(r.length!==3)throw new Error(`toMacAppStorePremiumPlanChoices(): Support only 3 plans array size, but got ${r.length}`);return[toPremiumPlanMacAppStore(r[0]),toPremiumPlanMacAppStore(r[1]),toPremiumPlanMacAppStore(r[2])]}function toPremiumPlanMacAppStore(r){if(assertProvider(r))return{...r,getPriceFloat(s,a=1){return assertGetPriceArgs(r,s,a),r.price},getPriceForMonthFloat(s,a=1){switch(assertGetPriceArgs(r,s,a),r.planPeriod){case PremiumPlanPeriod.MONTH:return Math.floor(r.price*a*100/1)/100;case PremiumPlanPeriod.SIX_MONTHS:return Math.floor(r.price*a*100/6)/100;case PremiumPlanPeriod.YEAR:return Math.floor(r.price*a*100/12)/100}}};throw new Error(`getMapAppStorePremiumPlansChoicesIfChange(): Supports only OSX provider but got '${r.provider}'`)}function assertGetPriceArgs(r,s,a){if(s!==r.currency)throw new Error(`getMapAppStorePremiumPlansChoicesIfChange(): The supplied currency of '${s}' doesn't match plan currency of '${r.currency}'`);if(a!==1)throw new Error(`getMapAppStorePremiumPlansChoicesIfChange(): usersAmount must be \`1\`, but supplied \`${a}\` `)}function assertProvider(r){return r.provider===PremiumSubscriptionPaymentProvider.OSX}const BuyPremiumMacAppStore=({source:r,onPlanSelectedByUser:s,onDismiss:a,onSuccess:i})=>{const o=AnydoElectronPreload==null?void 0:AnydoElectronPreload.inAppPurchaseMas;assertNonNullable(o);const x=useAuthService(),{track:y}=useAnalytics(),_=reactExports.useRef(),[E,R]=reactExports.useState(!1),[S,j]=reactExports.useState(),T=async()=>{var A,M;if(_.current){y("premium_screen_plan_picked",{extra_str1:r,extra_str2:_.current.productId,extra_double1:getAnalyticsPlanPeriod(_.current.planPeriod),extra_double2:_.current.hasBestValueMark?1:0,extra_double3:_.current.priceAnalytics}),y("subscription_started",{extra_str1:r,extra_str2:_.current.productId,extra_double1:getAnalyticsPlanPeriod(_.current.planPeriod),extra_double2:_.current.hasBestValueMark?1:0,extra_double3:_.current.priceAnalytics}),R(!0);try{const P=await o.buyPremium(_.current.productId);if(P.type===PremiumEventType.SUBSCRIPTION_CANCELLED){y("subscription_cancelled",{});return}if(P.type===PremiumEventType.SUBSCRIPTION_FAILED)throw P.error;if(P.type!==PremiumEventType.SUBSCRIPTION_SUCCEEDED)throw new Error(`MAS: Failed to buy Premium: ${P.type}`);try{y("subscription_succeeded",{extra_str1:r,extra_str2:_.current.productId,extra_double1:getAnalyticsPlanPeriod(_.current.planPeriod),extra_double2:_.current.hasBestValueMark?1:0,extra_double3:_.current.priceAnalytics}),y("subscription_purchase_attribution",{extra_str1:(A=P.transactionId)!=null?A:"",extra_str2:"",extra_str3:(M=_.current.currency)!=null?M:"",extra_double3:_.current.priceAnalytics})}catch(L){AnydoSentry.captureException(L)}await Promise.all([x.refreshUserFromServer().catch(AnydoSentry.captureException),x.refreshSubscriptionStatus().catch(AnydoSentry.captureException)]),i==null||i()}catch(P){AnydoSentry.captureException(P),y("subscription_failed",{extra_str1:String(P)}),j(P)}finally{R(!1)}}};return jsxRuntimeExports.jsxs("section",{className:styles$K.root,children:[jsxRuntimeExports.jsxs("h1",{className:styles$K.title,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.title.new"}),jsxRuntimeExports.jsx("div",{className:styles$K.subtitle,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.subtitle"})})]}),jsxRuntimeExports.jsx(PremiumFeaturesBox_,{}),jsxRuntimeExports.jsx("div",{className:styles$K.plansArea,children:jsxRuntimeExports.jsx($44d7e150ebc754d2$export$e926676385687eaf,{fallback:jsxRuntimeExports.jsx("div",{className:styles$K.error,children:jsxRuntimeExports.jsx("div",{className:styles$K.errorMessage,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"})})}),onError:A=>j(A),children:jsxRuntimeExports.jsx("div",{className:styles$K.space,children:jsxRuntimeExports.jsx(AppStorePlans,{source:r,selectedPlanRef:_,onPlanSelectedByUser:s})})})}),jsxRuntimeExports.jsx(PremiumReview,{}),jsxRuntimeExports.jsxs("div",{className:styles$K.buttons,children:[jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{className:styles$K.buyButton,theme:"primary",onClick:T,disabled:S!==void 0,loading:E,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.continue"})}),jsxRuntimeExports.jsx("button",{type:"button",className:styles$K.dismissButton,onClick:a,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.button.dismiss"})})]})]})},root$d="_root_12xwp_1",content$1="_content_12xwp_6",PremiumPageCloseButton="_PremiumPageCloseButton_12xwp_15",closeButton$1="_closeButton_12xwp_44",terms="_terms_12xwp_51",termsLink="_termsLink_12xwp_61",teams="_teams_12xwp_74",teamsButton="_teamsButton_12xwp_80",isPending="_isPending_12xwp_92",styles$J={root:root$d,content:content$1,PremiumPageCloseButton,closeButton:closeButton$1,terms,termsLink,teams,teamsButton,isPending},helpUsImproveVideo="/help-us-improve.mp4",PremiumSuccessPurchaseModal=({isVisible:r,onClose:s})=>jsxRuntimeExports.jsxs(BackdropModal,{isVisible:r,onClose:s,children:[jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Lottie,{className:"PremiumSuccessPurchasePage__confetti",animationData:confettiJson,autoPlay:!0,loop:!1})}),jsxRuntimeExports.jsxs("section",{className:"PremiumSuccessPurchasePage",children:[jsxRuntimeExports.jsx("video",{className:"PremiumSuccessPurchasePage__video",autoPlay:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,loop:!0,width:600,height:336,style:{display:"block",width:"428px",height:"auto",margin:"0 auto 18px"},children:jsxRuntimeExports.jsx("source",{src:helpUsImproveVideo,type:"video/mp4"})}),jsxRuntimeExports.jsx("div",{className:"PremiumSuccessPurchasePage__title1",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumSuccessPurchasePage.title.1"})}),jsxRuntimeExports.jsx("div",{className:"PremiumSuccessPurchasePage__title2",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumSuccessPurchasePage.title.2"})}),jsxRuntimeExports.jsx("div",{className:"PremiumSuccessPurchasePage__subTitle",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumSuccessPurchasePage.title.3"})}),jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{theme:"primary",onClick:()=>s(),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumSuccessPurchasePage.action"})})]})]});function openBuyPremiumModal({from:r,source:s}){if(PlatformConfig.type===PlatformType.WEB_EXTENSION){openNewWindowUrl(new URL("/?d=anydo%3A%2F%2Fanydo%3Faction%3Dopenupsell",APP_BASE_URL));return}openModal(BuyPremiumModal,{fromRef:r?{current:r}:null,source:s})}const BuyPremiumModal=({isVisible:r=!1,onClose:s,fromRef:a,source:i})=>{const o=useAuthService(),x=useModal(),y=reactExports.useCallback(()=>{x.close(),openModal(PremiumSuccessPurchaseModal,{}),o.refreshUserFromServer().catch(AnydoSentry.captureException),o.refreshSubscriptionStatus().catch(AnydoSentry.captureException)},[o,x]),_=useSyncSpaces(),E=spaceState.useRefreshTrialEligibility(),[R,S]=reactExports.useTransition();return jsxRuntimeExports.jsx(BackdropModal,{fromRef:a,isVisible:r,onClose:s,children:jsxRuntimeExports.jsxs("section",{className:styles$J.root,children:[jsxRuntimeExports.jsxs("div",{className:styles$J.content,children:[PlatformConfig.installer===PlatformInstaller.MAC_STORE?jsxRuntimeExports.jsx(BuyPremiumMacAppStore,{source:i,onDismiss:s,onSuccess:y}):jsxRuntimeExports.jsx(BuyPremiumStripe,{source:i,onDismiss:s,onSuccess:y,teams:jsxRuntimeExports.jsx("div",{className:styles$J.teams,children:jsxRuntimeExports.jsx("button",{type:"button",className:cx$6(styles$J.teamsButton,{[styles$J.isPending]:R}),onClick:()=>{S(()=>{if(x.close(),_.size>0){const[j]=_.values();openModal(ActivateWorkspaceModal,{workspaceId:j.id})}else E(),openModal(CreateWorkspaceWizardModal,{source:"buy_premium_modal"})})},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"PremiumPage2.button.teams"})})})}),jsxRuntimeExports.jsx("div",{className:styles$J.closeButton,children:jsxRuntimeExports.jsx(BareButton_,{className:styles$J.PremiumPageCloseButton,onClick:s,children:jsxRuntimeExports.jsx("svg",{width:"14",height:"14",viewBox:"0 0 18 18",children:jsxRuntimeExports.jsxs("g",{fill:"currentColor",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("path",{d:"M17.475.298c.62.448.703 1.242.186 1.772L2.583 17.553c-.517.53-1.433.6-2.058.149-.62-.448-.703-1.242-.186-1.772L15.417.447c.517-.53 1.433-.6 2.058-.149z"}),jsxRuntimeExports.jsx("path",{d:"M.525.298C-.095.746-.178 1.54.34 2.07l15.078 15.483c.517.53 1.433.6 2.058.149.62-.448.703-1.242.186-1.772L2.583.447C2.066-.083 1.15-.153.525.298z"})]})})})})]}),jsxRuntimeExports.jsx("div",{className:styles$J.terms,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.premiumTerms.terms",values:{termsLink:jsxRuntimeExports.jsx("a",{href:ANYDO_TERMS_OF_SERVICE_LINK,target:"_blank",rel:"noopener noreferrer",className:styles$J.termsLink,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.premiumTerms.terms.termsLink"})}),privacyLink:jsxRuntimeExports.jsx("a",{href:ANYDO_PRIVACY_LINK,target:"_blank",rel:"noopener noreferrer",className:styles$J.termsLink,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.premiumTerms.terms.privacyLink"})})}})})]})})},ActivateWorkspaceModal=({isVisible:r,onClose:s,workspaceId:a})=>jsxRuntimeExports.jsx(BackdropCardModal,{position:"center",frameLess:!0,isVisible:r,onClose:s,children:()=>jsxRuntimeExports.jsx(PurchaseTeamsPlanForInactiveWorkspace__connector,{onClose:s,onSubscribed:s,workspaceId:a})}),container$1="_container_v1i5l_1",styles$I={container:container$1};function TaskEditPaneLabels({disabled:r,shortcut:s=NULL_KEYBOARD_SHORTCUT,taskId:a,taskLabels:i,isModalVisible:o,setIsModalVisible:x,showPremiumUpsell:y}){const _=i==null?[]:i,{track:E}=useAnalytics(),R=useIsPremium(),S=useSyncLabelsIds({labelsIds:_,isPremium:R}),j=useSyncUpdateTaskLabels(),T=reactExports.useCallback(D=>j({taskId:a,...D}),[j,a]),A=reactExports.useMemo(()=>[[s,()=>x(!0)]],[s,x]);function M(D){const O=_.filter(B=>B!==D);O.length<_.length&&(E("task_screen_remove_tag",{extra_str1:a}),j({taskId:a,labelsUpdates:[],taskLabels:O}))}function P(){E("task_screen_add_tag",{extra_str1:a,extra_str3:"existing_task"}),x(!0)}const L=reactExports.useCallback(()=>x(!1),[x]);return jsxRuntimeExports.jsxs(KeyboardShortcutsGlobal,{shortcuts:A,children:[_.length>0&&jsxRuntimeExports.jsx("div",{className:styles$I.container,children:jsxRuntimeExports.jsx(LabelsChipList_memo,{theme:"new",disabled:r,labels:S,onDeleteLabelClick:M,onAddLabelClick:P})}),jsxRuntimeExports.jsx(BackdropModal,{isVisible:o&&!r,onClose:L,children:jsxRuntimeExports.jsx(TaskLabelsTooltip,{closeEditLabelsModal:L,isPremium:R,showPremiumUpsell:y,taskLabelsIds:_,updateTaskLabels:T})})]})}function TaskLabelsTooltip({taskLabelsIds:r,updateTaskLabels:s,closeEditLabelsModal:a,isPremium:i,showPremiumUpsell:o,isEditable:x}){const y=useSyncQueryModelsByValue("label","isDeleted",!1),[_]=reactExports.useState(y),[E]=reactExports.useState(r),R=reactExports.useCallback(j=>{reactExports.startTransition(()=>{openBuyPremiumModal({from:j.currentTarget,source:"color_tags"})})},[]),S=reactExports.useCallback(j=>{s({labelsUpdates:j.labelsUpdates,taskLabels:j.taskLabels}),a()},[a,s]);return reactExports.useMemo(()=>jsxRuntimeExports.jsx(TaskLabelsTooltipContentConnected,{isEditable:x,isPremiumUser:i,showPremiumUpsell:o,initialTaskLabelsIds:E,initialLabels:_,onSaveClick:S,onCancelClick:a,onUpgradeToPremiumClick:R}),[x,i,o,E,_,S,a,R])}const TaskEditPaneLabels_memo=reactExports.memo(TaskEditPaneLabels),SvgReloadicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"#9B9B9B",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.5 8H16V4"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.604 14.243a6.282 6.282 0 0 1-3.18 1.642 6.416 6.416 0 0 1-3.59-.342 6.171 6.171 0 0 1-2.787-2.21A5.855 5.855 0 0 1 3 10c0-1.187.364-2.347 1.047-3.333a6.17 6.17 0 0 1 2.788-2.21 6.416 6.416 0 0 1 3.589-.342 6.283 6.283 0 0 1 3.18 1.642L16 8"}));function RemindMePanel({taskId:r,times:s,onReminderClick:a,onOpenRecurringReminder:i}){const{track:o}=useAnalytics();function x(S,j){o("selected_preset_time_reminder",{extra_str1:r,extra_str2:j}),a(S,j)}const y=()=>x(s.laterTodayTimestamp,"later_today"),_=()=>x(s.tomorrowTimestamp,"tomorrow"),E=()=>x(s.nextWeekTimestamp,"next_week"),R=()=>x(s.somedayTimestamp,"someday");return jsxRuntimeExports.jsxs("div",{className:"RemindMePanel",children:[s.isLaterTodayVisible?jsxRuntimeExports.jsx("button",{type:"button",onClick:y,className:"RemindMePanel__button",children:jsxRuntimeExports.jsx(FormattedMessage,{tagName:"span",id:"_.reminders.laterToday"})}):null,jsxRuntimeExports.jsx("button",{type:"button",onClick:_,className:"RemindMePanel__button",children:jsxRuntimeExports.jsx(FormattedMessage,{tagName:"span",id:"RemindMePanel.reminders.tomorrow"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:E,className:"RemindMePanel__button",children:jsxRuntimeExports.jsx(FormattedMessage,{tagName:"span",id:"_.reminders.nextWeek"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:R,className:"RemindMePanel__button",children:jsxRuntimeExports.jsx(FormattedMessage,{tagName:"span",id:"_.reminders.someday"})}),i&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:i,className:"RemindMePanel__button",children:[jsxRuntimeExports.jsx("span",{className:"RemindMePanel__button__icon",children:jsxRuntimeExports.jsx(SvgReloadicon,{})}),jsxRuntimeExports.jsx(FormattedMessage,{tagName:"span",id:"_.reminders.recurring"})]})]})}const RemindMePanel_=reactExports.memo(RemindMePanel);function messageFromError(r){var s;if(!r)return"_.ai.errors.empty";if(isHttpError(r)){if(r.status===429)return"_.ai.errors.rateLimit";switch((s=r.payload)==null?void 0:s.error_code){case ERROR_AI_MODERATION_VIOLATION:return"_.ai.errors.moderation";default:return"_.ai.errors.unknown"}}else return"_.ai.errors.unknown"}const root$c="_root_th1a8_1",heading="_heading_th1a8_11",footer$2="_footer_th1a8_20",list$1="_list_th1a8_27",closeButton="_closeButton_th1a8_33",image$1="_image_th1a8_42",styles$H={root:root$c,heading,footer:footer$2,list:list$1,closeButton,image:image$1},AgreementModal=({isVisible:r,title:s,onAgree:a,imageUrl:i,items:o,source:x,onClose:y,buttonText:_})=>{const{track:E}=useAnalytics(),R=()=>{E("ai_consent_screen_dismissed",{extra_str1:x}),y()},S=()=>{E("ai_consent_screen_approved",{extra_str1:x}),a()};return React$6.useEffect(()=>{r&&E("ai_consent_screen_shown",{extra_str1:x})},[r,x,E]),jsxRuntimeExports.jsx(BackdropCardModal,{isVisible:r,onClose:R,children:()=>jsxRuntimeExports.jsxs("div",{className:styles$H.root,children:[jsxRuntimeExports.jsx(CloseButton,{onClick:R,className:styles$H.closeButton}),jsxRuntimeExports.jsx("img",{src:i,alt:"",className:styles$H.image}),jsxRuntimeExports.jsx("h2",{className:styles$H.heading,children:s}),jsxRuntimeExports.jsx("div",{className:styles$H.list,children:o==null?void 0:o.map(j=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CheckmarkIcon,{})," ",j]},j))}),jsxRuntimeExports.jsx("div",{className:styles$H.footer,children:jsxRuntimeExports.jsx(ConfirmDialogButton_forwarded,{theme:"primary",onClick:S,fullWidth:!1,children:_!=null?_:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.agree"})})})]})})},CheckmarkIcon=()=>jsxRuntimeExports.jsx("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M16.5 5L9 13L4.5 8.5",stroke:"#0083FF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),listImage="/list.webp",paramState$1=Recoil_index_10({key:"checklistSuggestionsParamState",default:null}),approvedSuggestionsState$1=Recoil_index_10({key:"approvedChecklistSuggestionsState",default:[]}),suggestionsResultState$1=Recoil_index_11({key:"checklistSuggestionsResultState",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>async({get:s})=>{const a=s(paramState$1(r));if(!a)return[];const i=s(authSelectors.authToken);if(!i)throw new Error("no auth token supplied for checklistSuggestionsResultState with card id "+r);return await fetchSyncHttpCardChecklistSuggestions({authToken:i,spaceId:a.spaceId,approvedSuggestions:a.existingItems,rejectedSuggestions:a.rejectedSuggestions,cardName:a.title,cardNote:s(cardSelectors.noteById(r))||"",checklistName:a.checklistName})||[]}}),empty$2=[];function useChecklistSuggestions({cardId:r}){const[s,a]=Recoil_index_22(paramState$1(r)),[i,o]=Recoil_index_22(approvedSuggestionsState$1(r)),x=Recoil_index_21(suggestionsResultState$1(r)),{formatMessage:y}=useI18n(),_=Recoil_index_20(spaceSelectors.byCardId(r)),{enabled:E}=Recoil_index_20(abExperimentState.AI_FEATURES),R=useSyncUpdateSpaces(),[S,j]=React$6.useState(!1),T=React$6.useRef(null),A=N=>{a({...N,rejectedSuggestions:P||[]}),o([])},M=()=>{_&&R([{id:_==null?void 0:_.id,key:"aiFeatureConsent",value:!0}]),j(!1),T.current&&A(T.current)},P=x.valueMaybe()||empty$2,L=N=>{if(!(_!=null&&_.aiFeatureConsent)){T.current=N,j(!0);return}A(N)},D=()=>{s&&a({...s,existingItems:[...s.existingItems,...i],rejectedSuggestions:lodashExports.difference(P||[],i)}),o([])},O=React$6.useMemo(()=>lodashExports.difference(P,i),[P,i]),B=jsxRuntimeExports.jsx(AgreementModal,{source:"checklist",isVisible:S,onAgree:M,onClose:()=>j(!1),imageUrl:listImage,title:y("_.ai.checklistAgreementModal.title"),items:[y("_.ai.checklistAgreementModal.listItem.1"),y("_.ai.checklistAgreementModal.listItem.2"),y("_.ai.checklistAgreementModal.listItem.3"),y("_.ai.checklistAgreementModal.listItem.4")]});return{triggerSuggest:L,suggestions:O,loading:x.state==="loading",error:x.state==="hasError"?messageFromError(x.errorMaybe()):null,addSuggestions:N=>{var F;o(W=>[...W,...N]),(F=s==null?void 0:s.onAddRef)==null||F.current(N)},active:s!==null,activeChecklistId:s==null?void 0:s.checklistId,tryAgain:D,dismiss:React$6.useCallback(()=>a(null),[a]),modalJSX:B,isExperimentEnabled:E}}const paramState=Recoil_index_10({key:"subtaskSuggestionsParamState",default:null}),approvedSuggestionsState=Recoil_index_10({key:"approvedSubtaskSuggestionsState",default:[]}),suggestionsResultState=Recoil_index_11({key:"subtaskSuggestionsResultState",cachePolicy_UNSTABLE:{eviction:"most-recent"},get:r=>async({get:s})=>{const a=s(paramState(r));if(!a)return[];const i=s(authSelectors.authToken);if(!i)throw new Error("no auth token supplied for subtaskSuggestionsResultState with task id "+r);return await fetchSyncHttpSubtaskSuggestions({authToken:i,approvedSuggestions:a.existingItems,rejectedSuggestions:a.rejectedSuggestions,taskTitle:a.title,taskNote:s(taskSelectors.noteById(r))||""})||[]}}),empty$1=[];function useSubtasksSuggestions({taskId:r}){const[s,a]=Recoil_index_22(paramState(r)),[i,o]=Recoil_index_22(approvedSuggestionsState(r)),x=Recoil_index_21(suggestionsResultState(r)),{formatMessage:y}=useI18n(),_=x.valueMaybe()||empty$1,{enabled:E}=Recoil_index_20(abExperimentState.AI_FEATURES),R=N=>{a({...N,rejectedSuggestions:_||[]}),o([])},[S,j]=React$6.useState(!1),T=React$6.useRef(null),{userSettings:A,updateUserSettings:M}=useUserSettings(),P=N=>{if(!A.personalAiFeaturesConsent){T.current=N,j(!0);return}R(N)},L=()=>{s&&a({...s,existingItems:[...s.existingItems,...i],rejectedSuggestions:lodashExports.difference(_||[],i)}),o([])},D=()=>{M("personalAiFeaturesConsent",!0),j(!1),T.current&&R(T.current)},O=React$6.useMemo(()=>lodashExports.difference(_,i),[_,i]),B=jsxRuntimeExports.jsx(AgreementModal,{source:"subtask",isVisible:S,onAgree:D,onClose:()=>j(!1),imageUrl:listImage,title:y("_.ai.checklistAgreementModal.title"),items:[y("_.ai.checklistAgreementModal.listItem.1"),y("_.ai.checklistAgreementModal.listItem.2"),y("_.ai.checklistAgreementModal.listItem.3"),y("_.ai.checklistAgreementModal.listItem.4")]});return{triggerSuggest:P,suggestions:O,loading:x.state==="loading",error:x.state==="hasError"?messageFromError(x.errorMaybe()):null,addSuggestions:N=>{var F;o(W=>[...W,...N]),(F=s==null?void 0:s.onAddRef)==null||F.current(N)},active:s!==null,tryAgain:L,dismiss:React$6.useCallback(()=>a(null),[a]),modalJSX:B,isExperimentEnabled:E}}const SparklesIcon=r=>jsxRuntimeExports.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip0_3312_189599)",children:[jsxRuntimeExports.jsx("path",{d:"M5.5 2L6.7154 5.2846L10 6.5L6.7154 7.7154L5.5 11L4.28459 7.7154L1 6.5L4.28459 5.2846L5.5 2Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M9.75 1L10.0876 1.91238L11 2.25L10.0876 2.58762L9.75 3.5L9.41242 2.58762L8.5 2.25L9.41242 1.91238L9.75 1Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"clip0_3312_189599",children:jsxRuntimeExports.jsx("rect",{width:12,height:12,fill:"currentColor"})})})]}),TASK_ITEM_CHECKBOX_TYPE_DEFAULT=0,TASK_ITEM_CHECKBOX_TYPE_RESTORE=1,checkedIcon=jsxRuntimeExports.jsx("svg",{width:"60%",height:"60%",viewBox:"0 0 14 12",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:".4",d:"M4.959 9.263l6.792-8.015a.71.71 0 0 1 .995-.082c.3.249.34.69.09.984l-7.29 8.602a.706.706 0 0 1-.708.228.706.706 0 0 1-.483-.248L1.165 6.97a.694.694 0 0 1 .09-.987.712.712 0 0 1 .996.085l2.708 3.195z"})}),restoreIconClipId$1=`svg-${Math.random().toString(36)}`,restoreIcon$1=jsxRuntimeExports.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:restoreIconClipId$1,children:jsxRuntimeExports.jsx("rect",{width:"13",height:"13",fill:"black"})})}),jsxRuntimeExports.jsxs("g",{clipPath:`url(#${restoreIconClipId$1})`,children:[jsxRuntimeExports.jsx("path",{d:"M0.541748 2.16675V5.41675H3.79175",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M1.90133 8.12507C2.25254 9.12194 2.91822 9.97767 3.79806 10.5633C4.6779 11.149 5.72424 11.4328 6.77943 11.3721C7.83461 11.3113 8.84148 10.9093 9.64832 10.2266C10.4552 9.54388 11.0183 8.61744 11.2528 7.58685C11.4873 6.55627 11.3805 5.47738 10.9486 4.51275C10.5166 3.54812 9.78287 2.75 8.85787 2.23865C7.93287 1.7273 6.86674 1.53042 5.82011 1.67768C4.77349 1.82493 3.80308 2.30834 3.05508 3.05507L0.541748 5.41674",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),TaskItemCheckbox=reactExports.memo(function r({theme:s="default",type:a=TASK_ITEM_CHECKBOX_TYPE_DEFAULT,size:i="default",checked:o,disabled:x,onClick:y}){const _=useI18n(),E=reactExports.useRef(!1);return jsxRuntimeExports.jsx("button",{type:"button",role:"checkbox","aria-checked":o,"aria-label":o?_.formatMessage("TaskItemCheckbox.uncheck"):_.formatMessage("TaskItemCheckbox.check"),disabled:x,onMouseDown:()=>{o||(E.current=!0)},onClick:x||y==null?void 0:R=>{R.stopPropagation(),y(!o)},onMouseUp:R=>{!o&&E.current&&R.currentTarget.blur(),E.current=!1},className:cx$6("TaskItemCheckbox",{"TaskItemCheckbox--checked":o,"TaskItemCheckbox--disabled":x,"TaskItemCheckbox--themeAction":s==="action","TaskItemCheckbox--themeSecondary":s==="secondary","TaskItemCheckbox--hoverable":y!==void 0,"TaskItemCheckbox--sizeSmall":i==="small","TaskItemCheckbox--sizeBig":i==="big"}),children:jsxRuntimeExports.jsx("div",{className:cx$6("TaskItemCheckbox__checkboxAsset",{"TaskItemCheckbox__checkboxAsset--checked":o}),children:a===TASK_ITEM_CHECKBOX_TYPE_RESTORE?restoreIcon$1:checkedIcon})})}),DELETE_ICON_ELEMENT=jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",className:"TaskItemDeleteTask__button__svg",children:jsxRuntimeExports.jsxs("g",{fill:"none",fillRule:"evenodd",children:[jsxRuntimeExports.jsx("path",{d:"M2 2h16v16H2z"}),jsxRuntimeExports.jsx("path",{d:"M11.062 10l3.75-3.85c.287-.295.24-.735-.104-.984-.347-.251-.856-.212-1.143.082L10 8.91 6.435 5.25c-.287-.295-.796-.334-1.143-.083-.344.249-.39.69-.104.984L8.938 10l-3.75 3.85c-.287.295-.24.735.104.984.347.251.856.212 1.143-.082L10 11.09l3.565 3.66c.287.295.796.334 1.143.083.344-.249.39-.69.104-.984L11.062 10zM10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z",fill:"currentColor"})]})});function TaskItemDeleteTask({isIn:r,disabled:s=!1,onDelete:a}){const i=s||!r?-1:0,o=useI18n(),x=s||!r?void 0:y=>{y.stopPropagation(),a(y)};return jsxRuntimeExports.jsx("div",{className:cx$6("TaskItemDeleteTask",{"TaskItemDeleteTask--in":r}),children:jsxRuntimeExports.jsx("button",{disabled:s||!r,tabIndex:i,"aria-label":o.formatMessage("_.buttons.delete"),onClick:x,className:cx$6("TaskItemDeleteTask__button",{"TaskItemDeleteTask__button--in":r}),children:DELETE_ICON_ELEMENT})})}const CANCEL_KEYS$3=new Set(["Escape"]),TITLE_COMMIT_DEBOUNCE=1e3;function useDeferUpdate$3(r,s,a){const[i,o]=reactExports.useState(s),x=reactExports.useRef(!1),y=reactExports.useMemo(()=>debounce$1(a,TITLE_COMMIT_DEBOUNCE),[a]),_=i.trim().length>0;reactExports.useEffect(()=>()=>y.flush(),[y]),reactExports.useEffect(()=>{if(x.current)return y.cancel(),_&&y(r,i),()=>y.cancel()},[_,r,i,y]),reactExports.useEffect(()=>(x.current=!0,()=>{x.current=!1}),[]);function E(){y.flush(),_||o(s)}return{title:i,setTitle:o,onBlur:E}}function SubTaskItem({onSelect:r,onStatusChange:s,onTitleChange:a,onDeleteStart:i,onDeleteEnd:o,disabled:x,taskId:y,taskTitle:_,taskStatus:E,taskPosition:R,taskParentGlobalTaskId:S,isSelected:j=!1,isInDragOverlay:T=!1,endAdornment:A,autoFocus:M,className:P}){const{track:L}=useAnalytics(),D=useUserSearchCurrentSelectionForSelected(),{attributes:O,listeners:B,setNodeRef:N,transform:F,transition:W,isDragging:V}=useSortable({id:y}),U=reactExports.useMemo(()=>{let Te=B==null?void 0:B.onPointerDown;return x&&(Te=()=>!1),{...B,onPointerDown:Te}},[B,x]),G={transform:CSS.Transform.toString(F),transition:W!=null?W:void 0},oe=reactExports.useRef(null),X=reactExports.useRef(null),[ee,ae]=reactExports.useState(!1),[ie,se]=reactExports.useState(!1);function Q(){r(y)}const Z=reactExports.useCallback(function(){const De=E===TaskStatus.CHECKED?TaskStatus.UNCHECKED:TaskStatus.CHECKED;oe.current!=null&&(De===TaskStatus.CHECKED?oe.current.focus():oe.current.blur()),L(De===TaskStatus.CHECKED?"checked_subtask":"unchecked_subtask",{extra_str1:S,extra_str2:y}),s(y,De)},[E,S,y,L,s]),J=reactExports.useCallback(function(){L("completed_subtask",{extra_str1:S,extra_str2:y}),i(),se(!0)},[L,S,y,i]),te=reactExports.useCallback(function(){o(),s(y,TaskStatus.DONE)},[o,s,y]),{title:de,setTitle:ce,onBlur:me}=useDeferUpdate$3(y,_,a);function ve(Te){ce(Te)}function xe(Te){Te.target===Te.currentTarget&&ee&&ae(!1)}const ge=reactExports.useCallback(Te=>{var De;Te.nativeEvent.isComposing||(CANCEL_KEYS$3.has(Te.key)&&X.current&&(Te.stopPropagation(),Te.preventDefault(),X.current.blur()),CANCEL_KEYS$3.has(Te.key)&&X.current?(Te.stopPropagation(),Te.preventDefault(),X.current.blur()):Te.key==="Enter"&&!Te.shiftKey&&((De=X.current)==null||De.blur()))},[]);reactExports.useLayoutEffect(()=>{var Te;V||(Te=X.current)==null||Te.blur()},[V]);const be=D.selectedSearch!=null&&D.selectedSearch.searchCategory===UserSearchCategory.SUB_TASK&&D.selectedSearch.id===y;reactExports.useLayoutEffect(()=>{be&&oe.current!=null&&(ae(!0),D.removeSelectedSearch())},[be]);const ye=E===TaskStatus.CHECKED,Ie=E===TaskStatus.UNCHECKED,Pe=E!==TaskStatus.CHECKED&&!V,[we,Re]=reactExports.useState({isFocused:!1,cursorPosition:null}),Se=reactExports.useCallback(Te=>Re(De=>({...De,isFocused:Te})),[]),Ee=reactExports.useCallback(Te=>{we.isFocused&&Te.stopPropagation()},[we.isFocused]),Ce=reactExports.useCallback(()=>{Se(!0)},[Se]),he=reactExports.useCallback(()=>{var Te;Se(!1),(Te=X.current)==null||Te.blur(),me()},[me,Se]);reactExports.useEffect(()=>{M&&Se(!0)},[M,Se]);const Ae=reactExports.useRef(!0),Ne=reactExports.useRef(),Be=reactExports.useCallback(Te=>{Te.target.tagName==="A"&&(Ne.current=Te.target),Ae.current=!1},[]),Oe=reactExports.useCallback(Te=>{const De=Ne.current;if(Ne.current=void 0,De===Te.target)return;const Le=getSelectionCaretPosition(Te.currentTarget);Re({isFocused:!0,cursorPosition:Le})},[]),Ue=reactExports.useCallback(Te=>{var De;if(!Ae.current){Ae.current=!0;return}Te.target.tagName!=="A"&&(Re(Le=>({...Le,isFocused:!0})),(De=X.current)==null||De.focus())},[]),Ve=we.isFocused,We=x||ye;return reactExports.useLayoutEffect(()=>{if(we.isFocused&&X.current!=null){X.current.focus();const Te=X.current.visibleInput;if(we.cursorPosition){const[De,Le]=we.cursorPosition;Te==null||Te.setSelectionRange(De,Le)}Te&&(Te.scrollLeft=0)}},[we.isFocused]),jsxRuntimeExports.jsx("div",{ref:N,style:G,onTransitionEnd:ie?te:void 0,...U,...O,tabIndex:Ie&&!x?0:void 0,onFocus:Ie&&!x?Q:void 0,className:cx$6("SubTaskItem",{"SubTaskItem--allowed":!V,"SubTaskItem--notAllowed":x||V,"SubTaskItem--isDeleted":ie,"SubTaskItem--isInDragOverlay":T}),children:jsxRuntimeExports.jsxs("div",{ref:oe,role:"button",onTransitionEnd:ee?xe:void 0,className:cx$6("SubTaskItem__content",P,{"SubTaskItem__content--blip":ee,"SubTaskItem__content--isDisabled":x,"SubTaskItem__content--isDragging":V,"SubTaskItem__content--selected":j,"SubTaskItem__content--isChecked":ye,"SubTaskItem__content--isTfFocused":Ve}),children:[jsxRuntimeExports.jsx("div",{style:{marginTop:3},children:jsxRuntimeExports.jsx(TaskItemCheckbox,{checked:ye,disabled:x,onClick:Z})}),jsxRuntimeExports.jsx("div",{className:"SubTaskItem__mainContent",children:Ve?jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{theme:DynamicTextAreaTheme.LIST_TITLE_TRANSPARENT,ref:X,autoFocus:M,maxLength:CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH,onChange:ve,onFocus:Ce,onKeyDown:ge,onPointerDown:Ee,onBlur:he,value:de,disabled:x,className:"SubTaskItem__textField","data-private":"lipsum"}):jsxRuntimeExports.jsxs("div",{onFocus:We?void 0:Ue,onMouseDown:We?void 0:Be,tabIndex:We?void 0:0,role:We?void 0:"button",onMouseUp:We?void 0:Oe,className:cx$6("SubTaskItem__title",{"SubTaskItem__title--selected":j}),children:[null,jsxRuntimeExports.jsx("div",{className:cx$6("SubTaskItem__title__text",{"SubTaskItem__title__text--selected":j,"SubTaskItem__title__text--out":Pe,"SubTaskItem__title__text--checked":ye}),"data-private":"lipsum",children:_})]})}),jsxRuntimeExports.jsxs("div",{children:[A&&jsxRuntimeExports.jsx("div",{className:"SubTaskItem__endAdornment",children:A}),jsxRuntimeExports.jsx("div",{style:{marginTop:3},children:jsxRuntimeExports.jsx(TaskItemDeleteTask,{disabled:x,onDelete:J,isIn:ye})})]})]})})}const SubTaskItem_memo=reactExports.memo(SubTaskItem),TASK_ITEM_STATIC_CIRCLE_UNCHECKED=0,TASK_ITEM_STATIC_CIRCLE_CHECKED=1,TASK_ITEM_STATIC_CIRCLE_RESTORE=2,checkIcon=jsxRuntimeExports.jsx("svg",{width:"10",height:"10",viewBox:"0 0 14 12",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:".4",d:"M4.959 9.263l6.792-8.015a.71.71 0 0 1 .995-.082c.3.249.34.69.09.984l-7.29 8.602a.706.706 0 0 1-.708.228.706.706 0 0 1-.483-.248L1.165 6.97a.694.694 0 0 1 .09-.987.712.712 0 0 1 .996.085l2.708 3.195z"})}),restoreIconClipId=`svg-${Math.random().toString(36)}`,restoreIcon=jsxRuntimeExports.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:restoreIconClipId,children:jsxRuntimeExports.jsx("rect",{width:"13",height:"13",fill:"black"})})}),jsxRuntimeExports.jsxs("g",{clipPath:`url(#${restoreIconClipId})`,children:[jsxRuntimeExports.jsx("path",{d:"M0.541748 2.16675V5.41675H3.79175",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M1.90133 8.12507C2.25254 9.12194 2.91822 9.97767 3.79806 10.5633C4.6779 11.149 5.72424 11.4328 6.77943 11.3721C7.83461 11.3113 8.84148 10.9093 9.64832 10.2266C10.4552 9.54388 11.0183 8.61744 11.2528 7.58685C11.4873 6.55627 11.3805 5.47738 10.9486 4.51275C10.5166 3.54812 9.78287 2.75 8.85787 2.23865C7.93287 1.7273 6.86674 1.53042 5.82011 1.67768C4.77349 1.82493 3.80308 2.30834 3.05508 3.05507L0.541748 5.41674",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})]});function TaskItemStaticCircle({type:r=TASK_ITEM_STATIC_CIRCLE_UNCHECKED}){const s=r===TASK_ITEM_STATIC_CIRCLE_CHECKED,a=r===TASK_ITEM_STATIC_CIRCLE_RESTORE;return jsxRuntimeExports.jsx("div",{className:cx$6("TaskItemStaticCircle",{"TaskItemStaticCircle--hasIcon":s||a}),children:s?checkIcon:a?restoreIcon:null})}const TaskItemStaticCircle_=reactExports.memo(TaskItemStaticCircle);var styles$G={multilinePanel:"nxldlz0",multilinePanelButtons:"nxldlz1",multilinePanelCloseButton:"nxldlz2 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9"};const CANCEL_KEYS$2=new Set(["Escape"]);function isTitleEmpty(r){return r.trim().length===0}function NewSubTaskItem({autoFocus:r,subTaskId:s,onCancel:a,onContinuationCreate:i,onCreate:o,onCreateMultiple:x}){const{formatMessage:y}=useI18n(),_=reactExports.useRef(!1),[E,R]=reactExports.useState(""),[S,j,T]=usePasteMultiline(E);function A(){_.current||S.length>1||(_.current=!0,isTitleEmpty(E)?a(s):o(s,E))}function M(L){_.current||(CANCEL_KEYS$2.has(L.key)&&isTitleEmpty(E)&&!L.nativeEvent.isComposing?(_.current=!0,L.stopPropagation(),L.preventDefault(),a(s)):!L.nativeEvent.isComposing&&L.key==="Enter"&&!L.shiftKey&&!isTitleEmpty(E)&&(_.current=!0,L.stopPropagation(),L.preventDefault(),i(s,E)))}const P=reactExports.useRef(null);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:S.length>1?jsxRuntimeExports.jsxs(motion.div,{className:styles$G.multilinePanel,variants:{enter:{opacity:1},exit:{opacity:0}},initial:"exit",animate:"enter",exit:"exit",children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.paste-multiline.text"})}),jsxRuntimeExports.jsxs("div",{className:styles$G.multilinePanelButtons,children:[jsxRuntimeExports.jsx(ButtonInlineText,{onClick:()=>{x(S)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.paste-multiline.add",values:{count:S.length}})}),jsxRuntimeExports.jsx("button",{className:styles$G.multilinePanelCloseButton,type:"button",onClick:()=>{var L;T(),(L=P.current)==null||L.focus()},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:y("_.buttons.close"),children:jsxRuntimeExports.jsx(CloseIcon,{})})})]})]}):null}),jsxRuntimeExports.jsx("div",{className:"NewSubTaskItem",children:jsxRuntimeExports.jsxs("div",{tabIndex:0,role:"button",className:"NewSubTaskItem__content",children:[jsxRuntimeExports.jsx("div",{style:{marginTop:3},children:jsxRuntimeExports.jsx(TaskItemStaticCircle_,{})}),jsxRuntimeExports.jsx("div",{className:"NewSubTaskItem__mainContent",children:jsxRuntimeExports.jsx("div",{className:"NewSubTaskItem__textareaWrapper",children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{ref:P,theme:DynamicTextAreaTheme.LIST_TITLE_TRANSPARENT,autoFocus:r,maxLength:CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH,onKeyDown:M,onBlur:A,value:E,onChange:R,onPaste:j,className:"SubTaskItem__textField","data-private":"lipsum"})})})]})})]})}function NewSubTaskItemButton(r){return jsxRuntimeExports.jsx("button",{type:"button",onFocus:()=>r.onClick(),onClick:()=>r.onClick(),className:"NewSubTaskItemButton",children:jsxRuntimeExports.jsxs("div",{className:"NewSubTaskItemButton__content",children:[jsxRuntimeExports.jsx(TaskItemStaticCircle_,{}),jsxRuntimeExports.jsx("div",{className:"NewSubTaskItemButton__mainContent",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"NewSubTaskItemButton.text"})})]})})}const DEFAULT_ITEM_HEIGHT=50,TASK_HEIGHT_CSS_VAR="--task-item-height",INITIAL_TASK_ITEM_COUNT="--task-initial-item-count",CURRENT_TASK_ITEM_COUNT="--task-current-item-count",DND_KIT_SCROLLABLE_CONTAINER_CLASSNAME="anydo-dndkit-scrollable-container",dragOverlay$2="_dragOverlay_1skml_1",isDragged$2="_isDragged_1skml_8",styles$F={dragOverlay:dragOverlay$2,"ani-DragOverlay-out":"_ani-DragOverlay-out_1skml_1",isDragged:isDragged$2,"ani-DragOverlay-in":"_ani-DragOverlay-in_1skml_1"},ADD_SUB_TASK_NULL_ID="000000000000000000000000",CSS_VAR_HEIGHT="--SubTaskList-height";function getCommitNewSubTaskStateFunction(r,s){return(a,i)=>{let{newSubTasks:o,pendingNewSubTasks:x}=a;const y=o.findIndex(E=>E.id===r);let _=fn(o,E=>{const R=K(E[y]);TaskRecord.setMutable(R,"title",s)})[y];return o=withoutIndex(o,y),x=[...x,_],{...a,...getState({newSubTasks:o,pendingNewSubTasks:x},i),selected:_.id}}}function getNewUnCommittedSubTaskPlaceholderState(r,s){const{task:a,parentCategoryId:i}=s;let{newSubTasks:o,pendingNewSubTasks:x}=r;if(o.length>0)return r;const y=s.subTasks.concat(r.newSubTasks).concat(r.pendingNewSubTasks),_=getMaxPositionFromGroup(y),E=createNewSubTask({categoryId:i,maxSubTaskPosition:_,parentGlobalTaskId:a.id});return o=[...o,E],{...r,...getState({newSubTasks:o,pendingNewSubTasks:x},s),selected:ADD_SUB_TASK_NULL_ID}}function createNewSubTask(r){const s=createGlobalModelId(),{parentGlobalTaskId:a,maxSubTaskPosition:i,categoryId:o,title:x=""}=r,y=Date.now(),_=Positioning2.getPositionBetween(i,null);return TaskRecord.create({id:s,categoryId:o,creationDate:y,dirty:0,parentGlobalTaskId:a,position:_,title:x})}function getMaxPositionFromGroup(r){const s=Positioning2.getModelWithMaxPosition(r);return s==null?null:s.position}function getState({newSubTasks:r,pendingNewSubTasks:s},a){const i=a.parentCategoryId;let o=a.subTasks.concat();for(let x of o){for(let y of s)if(x.id===y.id){s=s.filter(_=>_!==y);break}if(s.length===0)break}return o=[...o,...s,...r],a.disabled||o.push(TaskRecord.create({id:ADD_SUB_TASK_NULL_ID,categoryId:i})),{subTasksPrevProp:a.subTasks,newSubTasks:r,subTasks:o}}function useSubTaskGroupState(r){let[s,a]=React$6.useState(()=>{const i={newSubTasks:[],pendingNewSubTasks:[],selected:null,showNewSubTask:!1,deletingSubtask:!1};return{...i,...getState(i,r)}});return r.subTasks!==s.subTasksPrevProp&&(s={...s,...getState(s,r)},a(s)),{state:s,setState:a}}function useTrackRenamedSubtask(){const{track:r}=useAnalytics();return React$6.useMemo(()=>debounce$1(s=>{r("renamed_subtask",{extra_str1:s.parentGlobalTaskId,extra_str2:s.id})},500),[r])}function SubTaskGroup(r,s){var Q,Z;const{track:a}=useAnalytics(),i=useTrackRenamedSubtask(),o=React$6.useRef(null),x=React$6.useRef(r.subTasks.length),y=React$6.useRef();y.current===void 0&&(y.current=!1);const{active:_,triggerSuggest:E,modalJSX:R,isExperimentEnabled:S}=useSubtasksSuggestions({taskId:r.task.id}),{state:j,setState:T}=useSubTaskGroupState({...r});function A(){y.current=!0,T(J=>getNewUnCommittedSubTaskPlaceholderState(J,r))}React$6.useImperativeHandle(s,()=>({createNewSubTask:A}));function M(J,te,{addNewSubTaskPlaceholder:de,updateExistingRecords:ce=!0}){ce&&T(ge=>getCommitNewSubTaskStateFunction(J,te)(ge,r));const me=r.subTasks.concat(j.newSubTasks).concat(j.pendingNewSubTasks),ve=getMaxPositionFromGroup(me),xe=Positioning2.getPositionBetween(ve,null);r.createNewSubTask({id:J,parentGlobalTaskId:r.task.id,position:xe,title:te}),de===!0&&T(ge=>getNewUnCommittedSubTaskPlaceholderState(ge,r))}function P(J,te){const{subTasks:de}=r,ce=de.findIndex(ve=>ve.id===J);let me;te===0?me=Positioning2.getPositionBetween(null,de[0].position):te===de.length-1?me=Positioning2.getPositionBetween(de[de.length-1].position,null):ce>te?me=Positioning2.getPositionBetween(de[te-1].position,de[te].position):me=Positioning2.getPositionBetween(de[te].position,de[te+1].position),r.updateTaskPosition(J,me)}function L(){T(J=>({...J,deletingSubtask:!0}))}function D(){T(J=>({...J,deletingSubtask:!1}))}function O(J){T(te=>({...te,...getState({newSubTasks:te.newSubTasks.filter(de=>de.id!==J),pendingNewSubTasks:te.pendingNewSubTasks},r)}))}const B=useUserSearchCurrentSelectionForSelected(),N=((Q=B.selectedSearch)==null?void 0:Q.searchCategory)===UserSearchCategory.SUB_TASK?(Z=B.selectedSearch)==null?void 0:Z.id:null;React$6.useEffect(()=>{const J=o.current,{scrollElement:te}=r;if(J!=null&&te!=null&&N!=null){const{subTasks:de}=j;if(de!=null){const ce=de.findIndex(me=>me.id===N);if(ce!==-1&&"scrollTo"in te){const me=ce*DEFAULT_ITEM_HEIGHT+J.offsetTop;te.scrollTo(0,me)}}}},[r.scrollElement,N]);const F=React$6.useCallback(J=>{T(fn(te=>{te.selected=J}))},[T]),{updateTaskTitle:W}=r,V=React$6.useCallback((J,te)=>{i({id:J,parentGlobalTaskId:r.task.id}),W(J,te)},[r.task.id,i,W]),{disabled:U}=r;function G(J,te){const de=J.map(ce=>{const me=N===ce.id||j.selected===ce.id;return isSubTaskVisibleInGroup(ce)?jsxRuntimeExports.jsx(SubTaskItem_memo,{disabled:te,isSelected:me,onSelect:F,onStatusChange:r.updateTaskStatus,onDeleteStart:L,onDeleteEnd:D,onTitleChange:V,taskId:ce.id,taskParentGlobalTaskId:ce.parentGlobalTaskId,taskTitle:ce.title,taskStatus:ce.status,taskPosition:void 0},ce.id):null});return te?de:jsxRuntimeExports.jsx(DraggableSubtasks,{tasks:J,handleDragEnd:P,children:de})}function oe(J){return J.map(te=>jsxRuntimeExports.jsx(NewSubTaskItem,{autoFocus:!0,subTaskId:te.id,onCancel:O,onCreate:(de,ce)=>{M(de,ce,{addNewSubTaskPlaceholder:!1})},onContinuationCreate:(de,ce)=>{M(de,ce,{addNewSubTaskPlaceholder:!0})},onCreateMultiple:de=>{a("added_multiple",{extra_str1:"subtask",extra_str2:te.categoryId,extra_str3:te.id,extra_double1:de.length}),de.forEach(ce=>{M(createGlobalModelId(),ce,{addNewSubTaskPlaceholder:!1,updateExistingRecords:!1})}),T(ce=>{let{newSubTasks:me,pendingNewSubTasks:ve}=ce;const xe=ce.newSubTasks.findIndex(ge=>ge.id===te.id);return me=withoutIndex(me,xe),{...ce,...getState({newSubTasks:me,pendingNewSubTasks:ve},r),selected:null}})}},te.id))}const X=!U,ee=r.subTasks.length+j.newSubTasks.length,ae=(ee-+j.deletingSubtask+ +X)*DEFAULT_ITEM_HEIGHT,ie=useIsPremium(),se=J=>{ie?E({existingItems:r.subTasks.map(te=>te.title),title:r.task.title,onAddRef:{current:te=>{let de=getMaxPositionFromGroup(r.subTasks.concat(j.newSubTasks).concat(j.pendingNewSubTasks));te.reverse().forEach(ce=>{de=Positioning2.getNewLast(de),r.createNewSubTaskFromSuggestion(ce)})}}}):React$6.startTransition(()=>openBuyPremiumModal({source:"checklist_suggestions",from:J.currentTarget}))};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"SubTaskList__header",children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.subtasks"})}),S?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[R,!_&&jsxRuntimeExports.jsxs(ButtonRounded_,{theme:"navbar",size:"small",spinnerSize:"small",onClick:se,children:[jsxRuntimeExports.jsx(SparklesIcon,{}),jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.suggest"})})]})]}):void 0]}),jsxRuntimeExports.jsx("div",{ref:o,children:jsxRuntimeExports.jsxs("article",{className:"SubTaskList",style:{[TASK_HEIGHT_CSS_VAR]:`${DEFAULT_ITEM_HEIGHT}px`,[CSS_VAR_HEIGHT]:`${ae}px`,[INITIAL_TASK_ITEM_COUNT]:x.current,[CURRENT_TASK_ITEM_COUNT]:ee-+j.deletingSubtask},children:[G(r.subTasks,U),oe(j.newSubTasks),X&&jsxRuntimeExports.jsx(NewSubTaskItemButton,{onClick:A})]})})]})}const SubTaskGroup_forwarded=React$6.forwardRef(SubTaskGroup);function DraggableSubtasks({tasks:r,handleDragEnd:s,children:a}){const i=React$6.useMemo(()=>r.map(({id:S})=>S),[r]),[o,x]=React$6.useState(null),y=React$6.useMemo(()=>Date.now().toString(),[i.join()]);function _(S){x(null);const{active:j,over:T}=S;if(!T||j.id===T.id)return;const A=i.indexOf(T.id);A!==-1&&s(j.id,A)}function E(S){const{active:j}=S,T=r.find(A=>A.id===j.id);T&&x(T)}const R=React$6.useMemo(()=>{if(!o)return null;const S={"--dragLayer__anim-duration":`${TASK_DROP_ANIMATION.duration}ms`,"--dragLayer__anim-easing":TASK_DROP_ANIMATION.easing};return jsxRuntimeExports.jsx("div",{style:S,children:jsxRuntimeExports.jsx(SubTaskItem_memo,{disabled:!1,taskTitle:o.title,taskStatus:o.status,onDeleteEnd:lodashExports.noop,onDeleteStart:lodashExports.noop,onSelect:lodashExports.noop,className:styles$F.dragOverlay,onStatusChange:lodashExports.noop,onTitleChange:lodashExports.noop,taskId:o.id,isInDragOverlay:!0,taskParentGlobalTaskId:o.parentGlobalTaskId})})},[o]);return jsxRuntimeExports.jsxs(DndContext,{sensors:useSensors(usePointerSensor()),collisionDetection:closestCenter,autoScroll:{canScroll:S=>S.classList.contains(DND_KIT_SCROLLABLE_CONTAINER_CLASSNAME)},onDragStart:E,onDragEnd:_,children:[jsxRuntimeExports.jsx(SortableContext,{items:i,strategy:verticalListSortingStrategy,children:a},y),jsxRuntimeExports.jsx(Portal,{type:PortalTypes.DRAG_LAYER,children:jsxRuntimeExports.jsx("div",{className:R?styles$F.isDragged:void 0,children:jsxRuntimeExports.jsx(DragOverlay,{dropAnimation:TASK_DROP_ANIMATION,children:R})})})]})}function SubTaskGroupConnected({disabled:r,scrollElement:s,task:a},i){const{list:o,parentTask:x,createSubTask:y,appendSubTask:_,updateSubTask:E}=useSyncSubTasks(a.id),R=x==null?void 0:x.categoryId,S=reactExports.useCallback((M,P)=>E(M,"position",P),[E]),j=reactExports.useCallback((M,P)=>E(M,"status",P),[E]),T=reactExports.useCallback((M,P)=>E(M,"title",P),[E]),A=reactExports.useCallback(M=>{_({parentGlobalTaskId:a.id,title:M})},[_,a.id]);return jsxRuntimeExports.jsx(ShouldUpdate_memo,{shouldUpdate:R!=null,children:R==null?null:jsxRuntimeExports.jsx(SubTaskGroup_forwarded,{ref:i,disabled:r,scrollElement:s,createNewSubTask:y,createNewSubTaskFromSuggestion:A,updateTaskPosition:S,updateTaskStatus:j,updateTaskTitle:T,parentCategoryId:R,subTasks:o,task:a})})}const SubTaskGroupConnected_=reactExports.memo(reactExports.forwardRef(SubTaskGroupConnected)),FileAttachmentsContainer=reactExports.memo(function r({children:s,taskId:a}){const i=useIsPremium(),{attachments:o,attachmentsUploadStates:x,attachmentsUploadErrors:y,abortAttachmentUpload:_,uploadAttachments:E,removeAttachment:R,resetAttachmentsUploadErrors:S}=useSyncTaskAttachments(a),j=y.length,A=usePreviousValue(j)===0&&j>0,[M,P]=useDerivedState(!1,N=>A?!0:N),[L,D]=useDerivedState(void 0,N=>A?y[y.length-1]:N),O=reactExports.useCallback(function(F){for(let W of F)if(isFileTooBig(W,i)){P(!0),D(new FileAttachmentUploadErrorRecord({type:FileAttachmentUploadErrorType.FILE_SIZE_IS_TOO_BIG,fileId:null,taskId:null,originalFileName:""}));return}E(a,F,"task_attachment")},[E,a,i,P,D]),B=reactExports.useCallback(function(){S(),P(!1)},[S,P]);return reactExports.useMemo(()=>s({attachments:o,attachmentsUploadStates:x,errorModal:{isVisible:M,errorType:L,onDismiss:B},removeAttachment:R,abortAttachmentUpload:_,uploadAttachments:O}),[_,o,x,s,L,B,O,M,R])});function useDerivedState(r,s){const a=reactExports.useRef(r),[,i]=reactExports.useReducer(x=>1+x,0),o=reactExports.useCallback(x=>{x!==a.current&&(a.current=x,i())},[]);return a.current=s(a.current),[a.current,o]}class FileAttachmentsDropzone extends reactExports.Component{constructor(){super(...arguments);$e(this,"state",{hasEnteredDrag:!1});$e(this,"handleDrop",a=>{a.stopPropagation(),a.preventDefault();const i=a.dataTransfer;this.setState({hasEnteredDrag:!1},()=>{i.files.length>0&&this.props.onFileDrop(i.files)})});$e(this,"handleFilesUpload",a=>{a.currentTarget.files!=null&&this.props.onFileDrop(a.currentTarget.files)});$e(this,"handleDragOver",a=>{a.preventDefault(),a.stopPropagation()});$e(this,"handleDragEnter",a=>{this.setState({hasEnteredDrag:!0})});$e(this,"handleDragLeave",a=>{this.setState({hasEnteredDrag:!1})})}render(){const{hasEnteredDrag:a}=this.state,{disabled:i}=this.props;return jsxRuntimeExports.jsxs("div",{className:cx$6("FileAttachmentsDropzone",{"FileAttachmentsDropzone--disabled":i,"FileAttachmentsDropzone--DragEnter":a}),onDrop:i===!0?void 0:this.handleDrop,onDragEnter:i===!0?void 0:this.handleDragEnter,onDragLeave:i===!0?void 0:this.handleDragLeave,onDragOver:i===!0?void 0:this.handleDragOver,children:[jsxRuntimeExports.jsx("input",{disabled:i,className:"FileAttachmentsDropzone__fileUploadButton",type:"file",multiple:!0,onChange:this.handleFilesUpload}),jsxRuntimeExports.jsx("div",{children:a?jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentsDropzone.text.enteredDrag"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentsDropzone.text.clickDropFile"})})]})}}class FileAttachmentErrorModal extends reactExports.Component{constructor(){super(...arguments);$e(this,"_handleDissmiss",a=>{a.preventDefault(),this.props.onDismiss()});$e(this,"handleButtonsBarClick",a=>{a==="dismiss"&&this.props.onDismiss()})}render(){const{errorType:a,isVisible:i,sizeLimit:o}=this.props;let x="",y="";return a!=null&&a.type===FileAttachmentUploadErrorType.FILE_SIZE_IS_TOO_BIG?(x=jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentErrorModal.error.too-big.title"}),y=jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentErrorModal.error.too-big.message",values:{size:o/1024/1024}})):(x=jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentErrorModal.error.unknown.title"}),y=jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentErrorModal.error.unknown.message",values:{newLine:jsxRuntimeExports.jsx("br",{})}})),jsxRuntimeExports.jsx(BackdropModal,{isVisible:i,onClose:this.props.onDismiss,children:()=>jsxRuntimeExports.jsx("form",{onSubmit:this._handleDissmiss,children:jsxRuntimeExports.jsxs("div",{className:"FileAttachmentErrorModal",children:[jsxRuntimeExports.jsx("div",{className:"FileAttachmentErrorModal__header",children:jsxRuntimeExports.jsx("h1",{className:"FileAttachmentErrorModal__headerHeading",children:x})}),jsxRuntimeExports.jsx("div",{className:"FileAttachmentErrorModal__bar FileAttachmentErrorModal__bar--text",children:y}),jsxRuntimeExports.jsx("div",{className:"FileAttachmentErrorModal__bar",children:jsxRuntimeExports.jsx(ButtonsBar,{onClick:this.handleButtonsBarClick,submitId:"dismiss",ids:["dismiss"],renderButton:_=>{switch(_){case"dismiss":return jsxRuntimeExports.jsx("strong",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"FileAttachmentErrorModal.button.gotIt"})});default:return null}}})})]})})})}}const GLOBAL_KEYBOARD_SHORTCUTS={MYDAY:"1",NEXT_SEVEN_DAYS:"2",ALL_TASKS:"3",MY_CALENDAR:"4",TASK_BATCH_EDITING_TOGGLE:"b",ADD_TASK:"t",ADD_CATEGORY:"l",OPEN_SEARCH:"super f",CLEAR_COMPLITED_TASKS:"shift s",OPEN_KEYBOARD_SHORTCUTS:"?",REGION_TASK_EDIT_TITLE:"super alt^ u",REGION_TASK_ADD_REMINDER:"super alt^ r",REGION_TASK_ADD_LABEL:"super alt^ t",REGION_TASK_CHANGE_CATEGORY:"super alt^ o",REGION_TASK_ADD_SUBTASK:"super alt^ s",CREATE_CALENDAR_EVENT:"n"};function TaskCategoryPickerTooltip({fromRef:r,categories:s,isVisible:a,onCancel:i,onUpdate:o,selectedCategoryId:x,taskId:y,showMoveToBoard:_}){return jsxRuntimeExports.jsx(BackdropModal,{fromRef:r,onClose:i,isVisible:a,children:jsxRuntimeExports.jsx(CategoryPickerMenu,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskCategoryPickerTooltip.title"}),categories:s,selectedCategoryId:x,onCategorySelect:o,showMoveToBoard:_,taskId:y,onClose:i})})}function TaskCategoryPickerTooltipEditPane({disabled:r,isVisible:s,selectedCategoryId:a,taskId:i,showMoveToBoard:o=!0,onCancel:x,onPickerClick:y,onUpdate:_,children:E}){const{categories:R}=useSyncCategories(),S=reactExports.useRef(null),j=reactExports.useMemo(()=>R.find(A=>A.id===a),[R,a]),T=reactExports.useMemo(()=>E?jsxRuntimeExports.jsx("span",{ref:S,children:E}):j==null?jsxRuntimeExports.jsx("span",{ref:S}):jsxRuntimeExports.jsx(TaskCategoryPickerButton_forwarded,{ref:S,disabled:r,onClick:y,taskCategoryName:j.name}),[E,j,r,y]);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[T,jsxRuntimeExports.jsx(TaskCategoryPickerTooltip,{fromRef:S,isVisible:s,selectedCategoryId:a,categories:R,onCancel:x,onUpdate:_,showMoveToBoard:o,taskId:i})]})}const root$b="_root_zss6o_1",switchContainer="_switchContainer_zss6o_6",reminderButton="_reminderButton_zss6o_10",styles$E={root:root$b,switchContainer,reminderButton};function InlineRemindersReminder({disabled:r,reminderText:s,canTaskReminderAlarm:a,doesAlarm:i,setDoesAlarm:o,isReminder:x,editReminder:y},_){const E=reactExports.useRef(null);reactExports.useImperativeHandle(_,()=>({focus:()=>{var T;return(T=E.current)==null?void 0:T.focus()}}),[]);function R(T){T.stopPropagation(),y({fromRef:E.current})}const[S,j]=reactExports.useState(!1);return reactExports.useLayoutEffect(()=>{j(isEllipsisActive(E.current))}),jsxRuntimeExports.jsx(TooltipSmallInfo,{isActive:S,className:styles$E.root,text:s,children:jsxRuntimeExports.jsxs("span",{className:styles$E.root,children:[jsxRuntimeExports.jsx(ButtonInlineText,{ref:E,className:styles$E.reminderButton,theme:"black",disabled:r,onClickNative:R,children:s}),jsxRuntimeExports.jsx("span",{className:styles$E.switchContainer,children:jsxRuntimeExports.jsx(Switch,{stopClickPropagation:!0,checked:i,theme:"new",color:"notification",disabled:r||!a,onChange:o})})]})})}const InlineRemindersReminder_forwarded=reactExports.forwardRef(InlineRemindersReminder);function InlineRemindersPanel(r,s){const{isReminder:a,children:i}=r,o=reactExports.useRef(null),x=reactExports.useRef(null);return reactExports.useImperativeHandle(s,()=>{function y(){var E,R;a?(E=o.current)==null||E.focus():(R=x.current)==null||R.focus()}function _(){r.setCustomOneTimeReminder({fromRef:null})}return{focus:y,setCustomOneTimeReminder:_}}),jsxRuntimeExports.jsx("div",{className:"InlineRemindersPanel",children:jsxRuntimeExports.jsx("div",{className:"InlineRemindersPanel__container",children:i(a?jsxRuntimeExports.jsx(InlineRemindersReminder_forwarded,{ref:o,...r}):jsxRuntimeExports.jsx(FormattedMessage,{id:"InlineRemindersPanel.remindMe"}))})})}const InlineRemindersPanel_forwarded=reactExports.forwardRef(InlineRemindersPanel),BUTTONS_OPTIONS$2=["DELETE","OK"];function InlineRemindersPickDateMenu({times:r,task:s,isoWeekStartDay:a,now:i,onDelete:o,onUpdate:x,onOpenRecurringReminder:y,isExistingReminder:_,onClose:E}){const R=reactExports.useMemo(()=>ReminderUtils2.getMinimumCustomTimestamp(i),[i]),S=s.dueDate==null?R:s.dueDate,[j,T]=reactExports.useState(S);function A(L){if(L==="OK"){const D=Math.max(j,R);x(fn(s,O=>ReminderUtils2.setOneTimeReminder(O,D)))}else o()}function M(L){x(fn(s,D=>ReminderUtils2.setOneTimeReminder(D,L)))}function P(L){return L==="OK"?jsxRuntimeExports.jsx("div",{className:"InlineRemindersPickDateMenu__setButton",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.set"})}):jsxRuntimeExports.jsx(FormattedMessage,{id:_?"_.buttons.delete":"_.buttons.cancel"})}return jsxRuntimeExports.jsx("section",{className:"InlineRemindersPickDateMenu",children:jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.reminder"}),type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:PlatformConfig.type===PlatformType.WEB_EXTENSION?E:void 0}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>{const L=Math.max(j,R);return jsxRuntimeExports.jsx(DateTimePicker2,{blockPastDays:!0,hasTextFields:!0,canSetTime:!0,isoWeekStartDay:a,now:R,onChange:T,timestamp:L,endPanelElement:jsxRuntimeExports.jsx("div",{className:"InlineRemindersPickDateMenu__oneTimesReminders",children:jsxRuntimeExports.jsx(RemindMePanel_,{taskId:s.id,onReminderClick:M,onOpenRecurringReminder:y,times:r})})})}}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:BUTTONS_OPTIONS$2,onClick:A,renderButton:P})]})})})}function TaskReminderTooltipWeekdays(r){const s=useUserSettingsIsoWeekStartDay(),a=reactExports.useMemo(()=>{const o=[],x=hooks().isoWeekday(s);let y=7;do{const _=x.isoWeekday();o.push({d:x.format("dd"),dddd:x.format("dddd"),isoWeekday:_}),x.add(1,"day")}while(--y>0);return o},[s]);function i(o){const x=r.alertRepeatDays.split(""),y=getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(o);x[y]=x[y]==="1"?"0":"1";const _=x.join("");r.onAlertRepeatDaysChange(_)}return jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipWeekdays",children:a.map(({isoWeekday:o,dddd:x,d:y})=>{const _=getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(o),E=r.alertRepeatDays[_]==="1";return jsxRuntimeExports.jsx("button",{type:"button",disabled:r.disabled,title:x,onClick:()=>i(o),className:cx$6("TaskReminderTooltipWeekdays__button",{"TaskReminderTooltipWeekdays__button--selected":E}),children:y},o)})})}const RecurrenceDailyIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 2 24 24",...r,children:jsxRuntimeExports.jsxs("g",{fill:"none",children:[jsxRuntimeExports.jsx("rect",{width:16.2,height:16.2,x:4,y:4.8,stroke:"#000",rx:1.8}),jsxRuntimeExports.jsx("path",{stroke:"#000",d:"M15.7 3v3.6M8.5 3v3.6"}),jsxRuntimeExports.jsx("path",{fill:"#000",d:"M13.303 16.946v-6.372h-1.26l-2.079 1.755.765.882 1.278-1.125v4.86z"})]})}),RecurrenceMonthlyIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...r,children:jsxRuntimeExports.jsxs("g",{fill:"none",children:[jsxRuntimeExports.jsx("rect",{width:16.2,height:16.2,x:4,y:3.8,stroke:"#000",rx:1.8}),jsxRuntimeExports.jsx("path",{stroke:"#000",d:"M15.7 2v3.6M8.5 2v3.6"}),jsxRuntimeExports.jsx("path",{fill:"#000",d:"M9.433 16.054c.312 0 .607-.04.886-.117.28-.078.522-.197.73-.356.206-.159.371-.358.494-.598s.185-.52.185-.837c0-.186-.027-.363-.081-.531a1.375 1.375 0 0 0-.608-.783 1.259 1.259 0 0 0-.508-.171v-.027c.354-.072.624-.234.81-.486.186-.252.279-.555.279-.91 0-.305-.059-.57-.176-.791a1.621 1.621 0 0 0-.472-.554 2.001 2.001 0 0 0-.689-.324 3.164 3.164 0 0 0-.814-.103c-.27 0-.527.028-.77.085a2.262 2.262 0 0 0-.661.266 1.77 1.77 0 0 0-.513.472c-.144.195-.252.43-.324.707l1.485.306a.78.78 0 0 1 .792-.594c.222 0 .41.063.562.189.153.126.23.285.23.477a.66.66 0 0 1-.09.364.614.614 0 0 1-.239.216 1.05 1.05 0 0 1-.328.104c-.12.018-.243.027-.37.027h-.44v1.17h.315c.15 0 .3.004.45.013.15.01.285.038.405.086a.67.67 0 0 1 .292.22c.075.1.113.239.113.419 0 .24-.07.436-.212.59-.14.152-.358.229-.652.229-.288 0-.506-.066-.653-.198a.97.97 0 0 1-.292-.54l-1.422.333c.132.57.403.987.814 1.25.411.265.902.397 1.472.397zm5.26 0c.474 0 .864-.1 1.17-.302.306-.2.548-.46.725-.778.177-.318.3-.672.369-1.062s.103-.774.103-1.152c0-.378-.034-.762-.103-1.152a3.377 3.377 0 0 0-.37-1.062 2.189 2.189 0 0 0-.724-.779c-.306-.2-.696-.301-1.17-.301s-.864.1-1.17.301a2.19 2.19 0 0 0-.724.779c-.177.318-.3.672-.37 1.062a6.7 6.7 0 0 0-.103 1.152c0 .378.035.762.104 1.152.069.39.192.744.369 1.062.177.318.418.577.724.778.306.201.696.302 1.17.302zm0-1.242c-.246 0-.436-.075-.571-.225a1.431 1.431 0 0 1-.302-.55 2.928 2.928 0 0 1-.121-.674 9.667 9.667 0 0 1-.023-.603c0-.168.008-.37.023-.603.015-.234.055-.46.121-.675.066-.216.167-.4.302-.55.135-.15.325-.224.571-.224.24 0 .43.075.567.225.138.15.24.333.306.549.066.216.107.44.122.675.015.234.022.435.022.603 0 .168-.007.369-.022.603a2.947 2.947 0 0 1-.122.675 1.403 1.403 0 0 1-.306.549c-.138.15-.327.225-.567.225z"})]})}),RecurrenceWeeklyIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 2 24 24",...r,children:jsxRuntimeExports.jsxs("g",{fill:"none",children:[jsxRuntimeExports.jsx("rect",{width:16.2,height:16.2,x:4,y:4.8,stroke:"#000",rx:1.8}),jsxRuntimeExports.jsx("path",{stroke:"#000",d:"M15.7 3v3.6M8.5 3v3.6"}),jsxRuntimeExports.jsx("path",{fill:"#000",d:"m11.807 16.946 2.547-5.184v-1.188H9.692v1.242h3.15l-2.61 5.13z"})]})}),RecurrenceYearlyIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"-3 0 24 24",...r,children:jsxRuntimeExports.jsxs("g",{fill:"none",transform:"translate(1 1)",children:[jsxRuntimeExports.jsx("text",{x:"50%",y:"50%",fill:"#000",dominantBaseline:"middle",fontFamily:"HelveticaNeue-Bold, Helvetica Neue",fontSize:7,fontWeight:"bold",textAnchor:"middle",children:jsxRuntimeExports.jsx("tspan",{x:8,y:"50%",children:"365"})}),jsxRuntimeExports.jsx("rect",{width:16.2,height:16.2,y:1.8,stroke:"#000",rx:1.8}),jsxRuntimeExports.jsx("path",{stroke:"#000",d:"M11.7 0v3.6M4.5 0v3.6"})]})}),REPEAT_ICONS$1={[TaskRepeatingMethod.TASK_REPEAT_DAY]:jsxRuntimeExports.jsx(RecurrenceDailyIcon,{}),[TaskRepeatingMethod.TASK_REPEAT_MONTH]:jsxRuntimeExports.jsx(RecurrenceMonthlyIcon,{}),[TaskRepeatingMethod.TASK_REPEAT_WEEK]:jsxRuntimeExports.jsx(RecurrenceWeeklyIcon,{}),[TaskRepeatingMethod.TASK_REPEAT_YEAR]:jsxRuntimeExports.jsx(RecurrenceYearlyIcon,{})};class TaskReminderTooltipRepeatReminderPicker extends reactExports.Component{constructor(a){super(a);$e(this,"handleRepeatIntervalChange",a=>{const i=Number.parseInt(a,10);Number.isInteger(i)&&this.props.onAlertRepeatIntervalChange(i)});$e(this,"handleAlertRepeatEndsAfterOccurrencesChange",a=>{const i=Number.parseInt(a,10);Number.isInteger(i)&&this.props.onAlertRepeatEndsAfterOccurrences(i)});$e(this,"handleRepeatMonthTypeChange",a=>{if(a===TaskAlertRepeatMonthType.ON_DATE||a===TaskAlertRepeatMonthType.ON_DAY)this.props.onAlertRepeatMonthTypeChange(a);else throw new TypeError(`<TaskReminderTooltipRepeatReminderPicker>#handleRepeatMonthTypeChange() - "${a}" is unknown TaskAlertRepeatMonthTypeT`)});$e(this,"handleRepeatEndTypeSwitchChange",a=>{a?this.props.onAlertRepeatEndsNever():this.props.onAlertRepeatEndsByDateInitialize()});$e(this,"getAlertRepeatIntervalOptions",memoizeOnce(a=>range$2(ReminderUtils2.MAX_INTERVAL-ReminderUtils2.MIN_INTERVAL+1).map(i=>(i=i+ReminderUtils2.MIN_INTERVAL,{label:this.props.i18n.formatMessage(i===1?`TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.${a}`:`TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.${a}.plural`,{interval:i}),value:i.toString(10)}))));$e(this,"getAlertRepeatMonthTypeOptions",once$1(()=>{const a=TaskAlertRepeatMonthType.ON_DATE,i=TaskAlertRepeatMonthType.ON_DAY;return[{value:a,label:this.props.i18n.formatMessage("TaskReminderTooltipRepeatReminderPicker.alertRepeatMonthType.ON_DATE")},{value:i,label:this.props.i18n.formatMessage("TaskReminderTooltipRepeatReminderPicker.alertRepeatMonthType.ON_DAY")}]}));$e(this,"getAlertRepeatEndsAfterOccurrencesOptions",once$1(()=>range$2(ReminderUtils2.MAX_OCCURRENCE-ReminderUtils2.MIN_OCCURRENCE+1).map(a=>{const i=a+ReminderUtils2.MIN_OCCURRENCE;return{label:this.props.i18n.formatMessage(i===1?"TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences":"TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences.plural",{occurrencesCount:i}),value:i.toString(10)}})));this.state={endsId:this.createElementId("ends"),repeatById:this.createElementId("repeat-by"),repeatEveryId:this.createElementId("repeat-every"),repeatWeeklyId:this.createElementId("repeat-weekly"),startsOnId:this.createElementId("starts-on")}}createElementId(a){const i=Math.floor(Math.random()*1e4);return`${a}-${i}`}renderRepeatMethodButton(a,i){return jsxRuntimeExports.jsx(ToggleRectButton,{onChange:()=>this.props.onTaskRepeatingMethodClick(i),checked:a===i,title:this.props.i18n.formatMessage(`TaskReminderTooltipRepeatReminderPicker.repeatingMethod.${i}`),icon:REPEAT_ICONS$1[i]})}render(){const{model:a,onAlertRepeatDaysChange:i,onAlertRepeatEndsAfterOccurrences:o,onGotoSetCustomRepeatEndsOn:x,onGotoSetCustomRepeatStartsOn:y,i18n:_}=this.props,E=!this.props.isUserPremium,R=ReminderUtils2.getTaskRepeatingMethod(a),S=ReminderUtils2.getAlertRepeatDays(a),j=a.alert==null?null:a.alert.repeatEndsOn,T=a.alert==null?null:a.alert.repeatStartsOn,A=ReminderUtils2.getAlertRepeatEndType(a),M=ReminderUtils2.getAlertRepeatInterval(a),P=ReminderUtils2.getAlertRepeatMonthType(a),L=ReminderUtils2.getAlertRepeatEndsAfterOccurrences(a),D=j==null?"---":hooks(j).format(_.momentParams.date),O=T==null?"---":_.formatMessage("TaskReminderTooltipRepeatReminderPicker.alertRepeatStartsOn",{dateFormatted:hooks(T).format(_.momentParams.date),timeFormatted:hooks(T).format(_.momentParams.time)}),{repeatById:B,repeatEveryId:N,repeatWeeklyId:F}=this.state,W=A!==TaskAlertRepeatEndType.REPEAT_END_OCCURRENCES,V=A!==TaskAlertRepeatEndType.REPEAT_END_ON_DATE;return jsxRuntimeExports.jsxs("div",{className:cx$6("TaskReminderTooltipRepeatReminderPicker",{"TaskReminderTooltipRepeatReminderPicker--endsOnHidden":A!==TaskAlertRepeatEndType.REPEAT_END_NEVER}),children:[jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__repeatingMethod",children:[this.renderRepeatMethodButton(R,TaskRepeatingMethod.TASK_REPEAT_DAY),this.renderRepeatMethodButton(R,TaskRepeatingMethod.TASK_REPEAT_WEEK),this.renderRepeatMethodButton(R,TaskRepeatingMethod.TASK_REPEAT_MONTH),this.renderRepeatMethodButton(R,TaskRepeatingMethod.TASK_REPEAT_YEAR)]}),jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__options",children:[jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatStartsOn"})}),jsxRuntimeExports.jsx(SelectButton_,{theme:"modern",onClick:()=>y(),value:O})]}),jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:[jsxRuntimeExports.jsx("label",{htmlFor:N,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatInterval"})}),jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__option TaskReminderTooltipRepeatReminderPicker__option--alignEnd",children:jsxRuntimeExports.jsx(Select,{theme:"modern",id:N,disabled:E,value:M.toString(10),onChange:this.handleRepeatIntervalChange,options:this.getAlertRepeatIntervalOptions(R)})})]}),R===TaskRepeatingMethod.TASK_REPEAT_WEEK?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:jsxRuntimeExports.jsx("label",{htmlFor:F,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatDays"})})}),jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__option TaskReminderTooltipRepeatReminderPicker__option--fullWidth",children:jsxRuntimeExports.jsx(TaskReminderTooltipWeekdays,{disabled:E,alertRepeatDays:S,onAlertRepeatDaysChange:i})})})]}):null,R===TaskRepeatingMethod.TASK_REPEAT_MONTH?jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:[jsxRuntimeExports.jsx("label",{htmlFor:B,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatMonthType"})}),jsxRuntimeExports.jsx(Select,{theme:"modern",id:B,disabled:E,value:P,onChange:this.handleRepeatMonthTypeChange,options:this.getAlertRepeatMonthTypeOptions()})]}):null,jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__optionRow",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_NEVER"})}),jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__option TaskReminderTooltipRepeatReminderPicker__option--alignEnd",children:jsxRuntimeExports.jsx(Switch,{theme:"new",size:"small",checked:A===TaskAlertRepeatEndType.REPEAT_END_NEVER,disabled:E,onChange:this.handleRepeatEndTypeSwitchChange,hasMargin:!0})})]}),jsxRuntimeExports.jsx("div",{hidden:A===TaskAlertRepeatEndType.REPEAT_END_NEVER,className:"TaskReminderTooltipRepeatReminderPicker__option TaskReminderTooltipRepeatReminderPicker__option--fullWidth",children:jsxRuntimeExports.jsxs("div",{className:"TaskReminderTooltipRepeatReminderPicker__repeatEndOptions",children:[jsxRuntimeExports.jsx("div",{className:cx$6("TaskReminderTooltipRepeatReminderPicker__repeatEndOption",{"TaskReminderTooltipRepeatReminderPicker__repeatEndOption--disabled":V}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_ON_DATE"})}),jsxRuntimeExports.jsx("div",{className:cx$6("TaskReminderTooltipRepeatReminderPicker__repeatEndOption",{"TaskReminderTooltipRepeatReminderPicker__repeatEndOption--disabled":V}),children:jsxRuntimeExports.jsx(SelectButtonWithUnderline,{disabled:E||V,onClick:()=>x(),value:D})}),jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__repeatEndOption",children:jsxRuntimeExports.jsx(RadioToggleButton,{theme:"modern",checked:A===TaskAlertRepeatEndType.REPEAT_END_ON_DATE,disabled:E,onChange:this.props.onAlertRepeatEndsByDateInitialize,title:this.props.i18n.formatMessage("TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsOn.radioTitle")})}),jsxRuntimeExports.jsx("div",{className:cx$6("TaskReminderTooltipRepeatReminderPicker__repeatEndOption",{"TaskReminderTooltipRepeatReminderPicker__repeatEndOption--disabled":W}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_OCCURRENCES"})}),jsxRuntimeExports.jsx("div",{className:cx$6("TaskReminderTooltipRepeatReminderPicker__repeatEndOption",{"TaskReminderTooltipRepeatReminderPicker__repeatEndOption--disabled":W}),children:jsxRuntimeExports.jsx(SelectWithUnderline,{value:L.toString(10),disabled:E||W,onChange:this.handleAlertRepeatEndsAfterOccurrencesChange,options:this.getAlertRepeatEndsAfterOccurrencesOptions()})}),jsxRuntimeExports.jsx("div",{className:"TaskReminderTooltipRepeatReminderPicker__repeatEndOption",children:jsxRuntimeExports.jsx(RadioToggleButton,{theme:"modern",checked:A===TaskAlertRepeatEndType.REPEAT_END_OCCURRENCES,disabled:E,onChange:()=>o(1),title:this.props.i18n.formatMessage("TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences.radioTitle")})})]})}),E?jsxRuntimeExports.jsx(BareButton_,{tabIndex:-1,"aria-label":this.props.i18n.formatMessage("_.premium.goPremium"),onClickNative:U=>{reactExports.startTransition(()=>{openBuyPremiumModal({from:U.currentTarget,source:"upsell_recurring"})})},className:"TaskReminderTooltipRepeatReminderPicker__options__notPremium"}):null]})]})}}const TaskReminderTooltipRepeatReminderPicker_=connectI18n(TaskReminderTooltipRepeatReminderPicker);var InlineRemindersRepeatMenuTab=(r=>(r.ADD_REMINDER="ADD_REMINDER",r.PICK_DATE="PICK_DATE",r))(InlineRemindersRepeatMenuTab||{});function useInlineRemindersRepeatMenuReducer(r,s){function a(){return{task:r,activeTab:"ADD_REMINDER",alertEditFieldByCalendar:"repeatStartsOn",pickDateTimestamp:r.dueDate==null?s:r.dueDate}}return reactExports.useReducer(reducer,void 0,a)}function reducer(r,s){switch(s.type){case"PICK_DATE_SET":return pickDateSet(r,s.payload);case"PICK_DATE_TIMESTEMP_CHANGE":return fn(r,a=>{a.pickDateTimestamp=s.payload.timestamp});case"PICK_DATE_CANCEL":return getNewStateIfChanged(r,{...r,activeTab:"ADD_REMINDER"});case"SET_CUSTOM_ALERT_REPEAT_STARTS_ON":return fn(r,a=>{a.activeTab="PICK_DATE",a.pickDateTimestamp=getCalendarFieldTimestamp(r.task,"repeatStartsOn"),a.alertEditFieldByCalendar="repeatStartsOn"});case"SET_CUSTOM_ALERT_REPEAT_ENDS_ON":return getNewStateIfChanged(r,{...r,activeTab:"PICK_DATE",pickDateTimestamp:getCalendarFieldTimestamp(r.task,"repeatEndsOn"),alertEditFieldByCalendar:"repeatEndsOn"});case"INITIALIZE_REPEATING_METHOD":return getNewStateIfChanged(r,{...r,task:initializeRepeatingMethod(s.payload.repeatingMethod,r.task,s.payload.now)});case"UPDATE_ALERT_REPEATING_DAYS":return fn(r,a=>{ReminderUtils2.setAlertRepeatDays(a.task,s.payload.alertRepeatingDays,s.payload.now),a.task.dirty=1});case"UPDATE_ALERT_REPEAT_MONTH_TYPE":return fn(r,a=>{ReminderUtils2.setAlertRepeatMonthType(a.task,s.payload.alertRepeatMonthType,s.payload.now),a.task.dirty=1});case"UPDATE_ALERT_REPEAT_INTERVAL":return fn(r,a=>{ReminderUtils2.setAlertRepeatInterval(a.task,s.payload.alertRepeatInterval,s.payload.now),a.task.dirty=1});case"UPDATE_ALERT_REPEAT_ENDS_ON":return fn(r,a=>{ReminderUtils2.setAlertRepeatEndsOn(a.task,s.payload.now,s.payload.options),a.task.dirty=1})}}function pickDateSet(r,{timestamp:s,now:a,isPremium:i}){switch(r.alertEditFieldByCalendar){case"repeatStartsOn":return fn(r,o=>{if(o.activeTab="ADD_REMINDER",!i&&ReminderUtils2.isRepeatReminder(o.task,a)&&ReminderUtils2.getAlertRepeatDays(o.task)!=="0000000"){const x="0000000".split(""),y=getISODay(s);x[y===7?0:y]="1",ReminderUtils2.setAlertRepeatDays(o.task,x.join(""),a)}ReminderUtils2.setAlertRepeatStartsOn(o.task,s,a),o.task.dirty=1});case"repeatEndsOn":return fn(r,o=>{o.activeTab="ADD_REMINDER",ReminderUtils2.setAlertRepeatEndsOn(o.task,a,{repeatEndType:TaskAlertRepeatEndType.REPEAT_END_ON_DATE,repeatEndsOn:s,repeatEndsAfterOccurrences:null}),o.task.dirty=1})}}function initializeRepeatingMethod(r,s,a){return s.repeatingMethod===r||r===TaskRepeatingMethod.TASK_REPEAT_OFF?s:fn(s,i=>{switch(i.dirty=1,r){case TaskRepeatingMethod.TASK_REPEAT_DAY:return ReminderUtils2.initializeRepeatReminderDaily(i,a);case TaskRepeatingMethod.TASK_REPEAT_WEEK:return ReminderUtils2.initializeRepeatReminderWeekly(i,a);case TaskRepeatingMethod.TASK_REPEAT_MONTH:return ReminderUtils2.initializeRepeatReminderMonthly(i,a);case TaskRepeatingMethod.TASK_REPEAT_YEAR:return ReminderUtils2.initializeRepeatReminderYearly(i,a)}})}function getCalendarFieldTimestamp(r,s){if(r.alert==null)return 0;const a=r.alert[s];return a==null?0:a}function getNewStateIfChanged(r,s){return Object.keys(r).every(o=>r[o]===s[o])?r:s}const BUTTONS_OPTIONS$1=["DELETE","OK"],BUTTONS_OPTIONS_PICK_DATE$1=PlatformConfig.type===PlatformType.WEB_EXTENSION?["OK"]:["CANCEL","OK"];function InlineRemindersRepeatMenu(r){const{onDelete:s,onUpdate:a,onCancel:i,isUserPremium:o,now:x}=r,y=reactExports.useMemo(()=>ReminderUtils2.getMinimumCustomTimestamp(x),[x]),[_,E]=useInlineRemindersRepeatMenuReducer(r.task,y);function R(V){V==="OK"?a(_.task):s()}function S(V){E({type:"INITIALIZE_REPEATING_METHOD",payload:{now:x,repeatingMethod:V}})}function j(V){E({type:"UPDATE_ALERT_REPEATING_DAYS",payload:{now:x,alertRepeatingDays:V}})}function T(V){E({type:"UPDATE_ALERT_REPEAT_MONTH_TYPE",payload:{now:x,alertRepeatMonthType:V}})}function A(V){E({type:"UPDATE_ALERT_REPEAT_INTERVAL",payload:{now:x,alertRepeatInterval:V}})}function M(){E({type:"UPDATE_ALERT_REPEAT_ENDS_ON",payload:{now:x,options:{repeatEndType:TaskAlertRepeatEndType.REPEAT_END_NEVER,repeatEndsAfterOccurrences:null,repeatEndsOn:null}}})}function P(){E({type:"UPDATE_ALERT_REPEAT_ENDS_ON",payload:{now:x,options:{repeatEndType:TaskAlertRepeatEndType.REPEAT_END_ON_DATE,repeatEndsAfterOccurrences:null,repeatEndsOn:null}}})}function L(V){E({type:"UPDATE_ALERT_REPEAT_ENDS_ON",payload:{now:x,options:{repeatEndType:TaskAlertRepeatEndType.REPEAT_END_OCCURRENCES,repeatEndsAfterOccurrences:V,repeatEndsOn:null}}})}function D(){E({type:"SET_CUSTOM_ALERT_REPEAT_STARTS_ON"})}function O(){E({type:"SET_CUSTOM_ALERT_REPEAT_ENDS_ON"})}function B(V){if(V==="OK"){const U=Math.max(_.pickDateTimestamp,y);E({type:"PICK_DATE_SET",payload:{timestamp:U,now:x,isPremium:o}})}else V==="CANCEL"?E({type:"PICK_DATE_CANCEL"}):s()}function N(){E({type:"PICK_DATE_CANCEL"})}function F(V){E({type:"PICK_DATE_TIMESTEMP_CHANGE",payload:{timestamp:V}})}function W(V){return V==="OK"?jsxRuntimeExports.jsx("div",{className:"InlineRemindersRepeatMenu__setButton",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.set"})}):V==="DELETE"?jsxRuntimeExports.jsx(FormattedMessage,{id:r.isExistingRepeatReminder?"_.buttons.delete":"_.buttons.cancel"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"})}return jsxRuntimeExports.jsx("section",{className:"InlineRemindersRepeatMenu",children:jsxRuntimeExports.jsxs(CardMenu$1,{active:_.activeTab,children:[jsxRuntimeExports.jsxs(CardMenuTab,{label:InlineRemindersRepeatMenuTab.ADD_REMINDER,children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.recurring"}),type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:PlatformConfig.type===PlatformType.WEB_EXTENSION?i:void 0,accessory:PlatformConfig.type===PlatformType.WEB_EXTENSION?null:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"black",onClick:i,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsx(SimpleScrollView,{className:"InlineRemindersRepeatMenu__maxHeightViewport",children:jsxRuntimeExports.jsx(UnsafeHeightTransition,{children:jsxRuntimeExports.jsx(TaskReminderTooltipRepeatReminderPicker_,{model:_.task,isUserPremium:o,onTaskRepeatingMethodClick:S,onAlertRepeatDaysChange:j,onAlertRepeatMonthTypeChange:T,onAlertRepeatIntervalChange:A,onAlertRepeatEndsNever:M,onAlertRepeatEndsByDateInitialize:P,onAlertRepeatEndsAfterOccurrences:L,onGotoSetCustomRepeatStartsOn:D,onGotoSetCustomRepeatEndsOn:O})})})}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:BUTTONS_OPTIONS$1,onClick:R,renderButton:W})]}),jsxRuntimeExports.jsxs(CardMenuTab,{label:InlineRemindersRepeatMenuTab.PICK_DATE,children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:"",type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:N,accessory:PlatformConfig.type===PlatformType.WEB_EXTENSION?null:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"black",onClick:N,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>{const V=Math.max(_.pickDateTimestamp,y);return jsxRuntimeExports.jsx(DateTimePicker2,{blockPastDays:!0,hasTextFields:!0,canSetTime:!0,isoWeekStartDay:r.isoWeekStartDay,now:y,onChange:F,timestamp:V})}}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:BUTTONS_OPTIONS_PICK_DATE$1,onClick:B,renderButton:W})]})]})})}function InlineReminders({children:r,calendarFlow:s,disabled:a=!1,initialNow:i,isUserPremium:o,onUpdate:x,task:y}){const{track:_}=useAnalytics(),E=useNow(i==null?void 0:{initialNow:i}),R=useUserSettingsIsoWeekStartDay(),S=reactExports.useMemo(()=>new OneTimeReminderPickerTimes({now:E,isoWeekStartDay:R}),[E,R]),j=reactExports.useMemo(()=>ReminderUtils2.isOneTimeReminder(y),[y]),T=reactExports.useMemo(()=>ReminderUtils2.isOneTimeSomedayReminder(y),[y]),A=reactExports.useMemo(()=>ReminderUtils2.isRepeatReminder(y,E),[y,E]),M=j||T||A,P=canTaskReminderAlarm(y.dueDate,y.repeatingMethod,y.alert==null?null:y.alert.repeatEndsOn,E),L=ReminderUtils2.isAlarmOn(y,E);function D(ae){areTasksReminderEqual(y,ae)||x({alert:ae.alert,dueDate:ae.dueDate,repeatingMethod:ae.repeatingMethod})}const O=function(){y.id!==NOT_INITIALIZED_ID&&_(A?"removed_recurrence":"removed_time_reminder",{extra_str1:y.id}),D(fn(y,ae=>ReminderUtils2.removeReminder(ae,s?0:E))),U()},B=function(ae){const ie=fn(y,se=>{ae?ReminderUtils2.setAlarmOn(se):ReminderUtils2.setAlarmOff(se)});y.id!==NOT_INITIALIZED_ID&&_("toggled_time_reminder",{extra_str1:y.id,extra_str2:ae?"ON":"OFF"}),D(ie)},N=reactExports.useRef(null),[F,W]=reactExports.useState(0),V=useBindingsFlowController(y);function U(){N.current=null,V.release(),W(0)}function G(ae){const ie={extra_str1:y.id};if(y.id!==NOT_INITIALIZED_ID)switch(F){case 0:break;case 1:_("added_time_reminder",{extra_str1:y.id,extra_str3:"existing_task",extra_double2:void 0});break;case 2:switch(ae.repeatingMethod){case TaskRepeatingMethod.TASK_REPEAT_DAY:_("added_recurrence_daily",ie),o&&_("added_recurrence_premium_daily",ie);break;case TaskRepeatingMethod.TASK_REPEAT_WEEK:_("added_recurrence_monthly",ie),o&&_("added_recurrence_premium_monthly",ie);break;case TaskRepeatingMethod.TASK_REPEAT_MONTH:_("added_recurrence_weekly",ie),o&&_("added_recurrence_premium_weekly",ie);break;case TaskRepeatingMethod.TASK_REPEAT_YEAR:_("added_recurrence_yearly",ie),o&&_("added_recurrence_premium_yearly",ie);break}break}const se=setTaskPartialArgs(V.value,ae);D(se),U()}function oe(ae){y.id!==NOT_INITIALIZED_ID&&(_("task_reminders_tapped_set_time",{extra_str1:y.id}),_("selected_custom_time_reminder",{extra_str1:y.id})),N.current=ae.fromRef,V.lock(),W(1)}function X(ae){y.id!==NOT_INITIALIZED_ID&&_("task_reminders_tapped_recurrence",{extra_str1:y.id}),ae&&(N.current=ae==null?void 0:ae.fromRef),V.lock(),V.update(fn(y,ie=>ReminderUtils2.initializeRepeatReminderDaily(ie,E))),W(2)}function ee(ae){N.current=ae.fromRef,V.lock(),V.update(y),A?(y.id!==NOT_INITIALIZED_ID&&_("tapped_edit_recurring_reminder",{extra_str1:y.id}),W(2)):(y.id!==NOT_INITIALIZED_ID&&_("tapped_edit_time_reminder",{extra_str1:y.id}),W(1))}return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[r({canTaskReminderAlarm:P,doesAlarm:L,disabled:a,reminderText:jsxRuntimeExports.jsx(TaskAlertReminderText,{isoWeekStartDay:R,now:E,task:y}),isReminder:M,isRepeatReminder:A,setDoesAlarm:B,editReminder:ee,setCustomOneTimeReminder:oe,setCustomRepeateReminder:X}),jsxRuntimeExports.jsx(BackdropModal,{fromRef:N,onClose:U,isVisible:F!==0,children:()=>{switch(F){case 0:return null;case 1:return jsxRuntimeExports.jsx(InlineRemindersPickDateMenu,{times:S,task:V.value,isoWeekStartDay:R,now:E,onOpenRecurringReminder:X,onUpdate:G,onDelete:O,isExistingReminder:M,onClose:U});case 2:return jsxRuntimeExports.jsx(InlineRemindersRepeatMenu,{isUserPremium:o,isoWeekStartDay:R,now:E,onCancel:()=>W(1),onDelete:O,onUpdate:G,task:V.value,isExistingRepeatReminder:A})}}})]})}function setTaskPartialArgs(r,s){return fn(r,a=>{TaskRecord.setMutable(a,"alert",s.alert),TaskRecord.setMutable(a,"dueDate",s.dueDate),TaskRecord.setMutable(a,"repeatingMethod",s.repeatingMethod)})}function areTasksReminderEqual(r,s){return r.dueDate===s.dueDate&&r.repeatingMethod===s.repeatingMethod&&areTaskAlertRecordsEqual(r.alert,s.alert)}const SvgBellicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.4,d:"M13.5 6.45c0-2.32-2.015-4.2-4.5-4.2s-4.5 1.88-4.5 4.2c0 4.9-2.25 6.3-2.25 6.3h13.5s-2.25-1.4-2.25-6.3M11.25 15.75c-.388.464-1.102.75-1.875.75-.773 0-1.487-.286-1.875-.75"})),SvgHashicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M2.727 6H14M11 2.5l-2 11M7 2.5l-2 11M2 10h11.273"})),SvgListicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:18,height:18,viewBox:"3 3 18 18",...r},reactExports.createElement("defs",null,reactExports.createElement("path",{id:"0kkx5vjasa",d:"M17.2 3.2a2.4 2.4 0 0 1 2.4 2.4v12.8a2.4 2.4 0 0 1-2.4 2.4H7.6a2.4 2.4 0 0 1-2.4-2.4V5.6a2.4 2.4 0 0 1 2.4-2.4zm0 1.6H7.6a.8.8 0 0 0-.8.8v12.8a.8.8 0 0 0 .8.8h9.6a.8.8 0 0 0 .8-.8V5.6a.8.8 0 0 0-.8-.8zm-1.6 10.4a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594l.1-.006h6.4zm0-3.2a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594L9.2 12h6.4zm-4.8-3.2a.8.8 0 0 1 .1 1.594l-.1.006H9.2a.8.8 0 0 1-.1-1.594l.1-.006h1.6z"})),reactExports.createElement("use",{xlinkHref:"#0kkx5vjasa",fill:"currentColor",fillRule:"nonzero"})),SvgRecurringicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M8 5v3M10.598 9.5 8 8M11.51 6.232h2.5v-2.5"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M11.89 11.89a5.5 5.5 0 1 1 0-7.78l2.12 2.122"})),container="_container_a008n_1",cardButton="_cardButton_a008n_14",tagsButton$1="_tagsButton_a008n_18",remindIcon="_remindIcon_a008n_22",listIcon="_listIcon_a008n_26",tagsIcon="_tagsIcon_a008n_30",listTitle="_listTitle_a008n_34",styles$D={container,cardButton,tagsButton:tagsButton$1,remindIcon,listIcon,tagsIcon,listTitle};function useUpdate$1(){const r=useSyncUpdateTasks();return reactExports.useCallback(s=>r([s]),[r])}const TaskReminder=reactExports.memo(function r({task:s,isPremium:a,disabled:i,reminderRef:o,onReminderChange:x}){const y=reactExports.useRef(null),_=useNow2();return jsxRuntimeExports.jsx(InlineReminders,{task:s,isUserPremium:a,disabled:i,onUpdate:x,children:E=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsx(InlineRemindersPanel_forwarded,{ref:o,...E,children:R=>jsxRuntimeExports.jsx(CardButton_forwarded,{ref:y,onClick:()=>E.setCustomOneTimeReminder({fromRef:y.current}),isEmptyState:!0,disabled:i,className:styles$D.cardButton,icon:jsxRuntimeExports.jsx("span",{className:styles$D.remindIcon,children:ReminderUtils2.isRepeatReminder(s,_)?jsxRuntimeExports.jsx(SvgRecurringicon,{}):jsxRuntimeExports.jsx(SvgBellicon$1,{})}),children:R})})})})}),TaskEditPaneButtons=reactExports.memo(function r({task:s,disabled:a,isPremium:i,onClickTags:o,isCategoryPickerVisible:x,reminderRef:y,setIsCategoryPickerVisible:_}){const{track:E}=useAnalytics(),R=useUpdate$1(),S=useSyncUpdateReminder(s.id),{categories:j}=useSyncCategories(),T=reactExports.useMemo(()=>j.find(A=>A.id===s.categoryId),[j,s]);return jsxRuntimeExports.jsxs("div",{className:styles$D.container,children:[jsxRuntimeExports.jsx(TaskReminder,{reminderRef:y,disabled:a,isPremium:i,task:s,onReminderChange:S}),jsxRuntimeExports.jsx(TaskCategoryPickerTooltipEditPane,{disabled:a,isVisible:x&&!a,selectedCategoryId:s.categoryId,taskId:s.id,onPickerClick:()=>_(!0),onCancel:()=>_(!1),onUpdate:A=>{_(!1),E("changed_list_for_task_from_dialog",{extra_str1:s.id,extra_str3:"existing_task"}),R({id:s.id,key:"categoryId",value:A.id})},children:jsxRuntimeExports.jsx(CardButton_forwarded,{onClick:()=>_(!0),isEmptyState:!0,disabled:a,icon:jsxRuntimeExports.jsx("span",{className:styles$D.listIcon,children:jsxRuntimeExports.jsx(SvgListicon,{})}),children:jsxRuntimeExports.jsx("span",{className:styles$D.listTitle,children:T==null?void 0:T.name})})}),(s.labels==null||s.labels.length===0)&&jsxRuntimeExports.jsx(CardButton_forwarded,{className:styles$D.tagsButton,onClick:o,isEmptyState:!0,disabled:a,icon:jsxRuntimeExports.jsx("span",{className:styles$D.tagsIcon,children:jsxRuntimeExports.jsx(SvgHashicon$1,{})}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tags.title"})})]})}),SvgDownloadicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:23,height:23,viewBox:"0 0 23 23",...r},reactExports.createElement("g",{fill:"none"},reactExports.createElement("path",{fill:"currentColor",d:"M17.29 13.623v1.863c0 .153.005.307-.014.46l-.003.022.03-.217a1.68 1.68 0 0 1-.124.432l.086-.195a1.76 1.76 0 0 1-.233.377l.134-.165c-.09.109-.192.206-.306.293l.173-.128c-.122.09-.254.164-.395.223l.204-.082a1.905 1.905 0 0 1-.451.119l.227-.03c-.183.024-.37.017-.554.017H6.722c-.115 0-.228-.002-.342-.016l.227.029a1.905 1.905 0 0 1-.451-.12l.203.083a1.872 1.872 0 0 1-.394-.223l.173.128a1.831 1.831 0 0 1-.306-.293l.134.165a1.759 1.759 0 0 1-.233-.377l.086.195a1.707 1.707 0 0 1-.125-.432l.03.217c-.02-.156-.016-.314-.016-.471v-1.874c0-.446-.388-.818-.854-.818-.465 0-.853.372-.853.818v1.863c0 .153-.005.307.013.46.019.155.039.31.081.461.044.154.114.302.182.446a2.584 2.584 0 0 0 1.759 1.329c.29.06.568.064.86.064h9.354c.526 0 1.04-.1 1.494-.369.214-.127.42-.286.585-.47.1-.113.198-.234.281-.36.09-.135.15-.283.214-.43.13-.294.172-.622.172-.94v-2.053c0-.446-.388-.818-.854-.818-.465 0-.853.372-.853.818"}),reactExports.createElement("path",{fill:"currentColor",d:"M10.646 4.834v8.21c0 .445.388.817.853.817.466 0 .854-.372.854-.817v-8.21c0-.446-.388-.818-.854-.818-.465 0-.853.372-.853.818"}),reactExports.createElement("path",{fill:"currentColor",d:"m12.103 13.622 1.71-1.639 1.271-1.216a.8.8 0 0 0 0-1.156.89.89 0 0 0-1.207 0l-1.711 1.638-1.27 1.217a.8.8 0 0 0 0 1.156.89.89 0 0 0 1.207 0"}),reactExports.createElement("path",{fill:"currentColor",d:"m12.103 12.466-1.712-1.639-1.27-1.216a.89.89 0 0 0-1.207 0 .8.8 0 0 0 0 1.156l1.71 1.638 1.271 1.217a.89.89 0 0 0 1.208 0 .8.8 0 0 0 0-1.156"}))),SvgChevronicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:34,fill:"none",viewBox:"0 0 20 34",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4.5,d:"M2.6 31.2 17 16.8 2.6 2.4"})),SvgFoldericon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:230,height:208,fill:"none",viewBox:"0 0 230 208",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M221.666 178.667A21.332 21.332 0 0 1 200.333 200H29.666a21.336 21.336 0 0 1-21.333-21.333V29.333A21.333 21.333 0 0 1 29.666 8H83l21.333 32h96a21.334 21.334 0 0 1 21.333 21.333v117.334Z"})),SvgZoomUpicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM21 21l-4.35-4.35M11 8v6M8 11h6"})),SvgZoomDownicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM21 21l-4.35-4.35M8 11h6"}));function CardArchiveModal({fromRef:r,isVisible:s,onClose:a,card:i}){const{track:o}=useAnalytics(),x=useSyncUpdateCards(),y=React$6.useCallback(()=>{o("archived_card",{extra_str1:i.id}),x([{id:i.id,key:"status",value:CardStatus.ARCHIVED}]),a()},[i.id,a,o,x]);return jsxRuntimeExports.jsx(ConfirmModal,{fromRef:r,isVisible:s,headerElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardArchiveModal.title"}),mainElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardArchiveModal.content"}),declineElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"}),acceptElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.yes"}),onAccept:y,onDecline:a})}const TeamsTagsTooltipPossibleColors=["#FF6168","#FD7A4C","#FFB900","#F4D14E","#2FC14A","#5DDB6A","#2DC2A8","#0DA5F3","#0080FF","#1E36D3","#9940DE","#C7172F","#E140E1","#FF90AD","#9197A3"],SvgCheckMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 19",...r},reactExports.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m19.2 6-9 9.6-5.4-5.4"}));function TeamsTagsTooltipColorPicker({selectedColor:r,onColorChange:s}){return jsxRuntimeExports.jsx("div",{className:"TeamsTagsTooltipColorPicker",children:TeamsTagsTooltipPossibleColors.map(a=>jsxRuntimeExports.jsx(ColorItem,{color:a,onClick:()=>{s(a)},selected:a===r},a))})}const TeamsTagsTooltipColorPicker_memo=React$6.memo(TeamsTagsTooltipColorPicker);function ColorItem({color:r,onClick:s,selected:a}){return jsxRuntimeExports.jsxs("div",{className:"TeamsTagsTooltipColorPicker__colorItem",style:{backgroundColor:r},children:[jsxRuntimeExports.jsx("input",{className:"TeamsTagsTooltipColorPicker__colorItem__input",type:"checkbox",id:`checkbox-${r}`,checked:a,onChange:s}),jsxRuntimeExports.jsx("label",{htmlFor:`checkbox-${r}`,children:jsxRuntimeExports.jsx(SvgCheckMiniicon,{})})]})}const SvgMovToMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M13 8.4H3.8M8.4 13 3.8 8.4l4.6-4.6"}));function TeamsTagsTooltipEditTag({tag:r,onSave:s,onDelete:a,onBack:i,deleteInProgress:o}){const x=useI18n(),[{name:y,color:_},E]=React$6.useState(r),R=React$6.useCallback(function(j){E(T=>({...T,color:j}))},[]);return jsxRuntimeExports.jsxs("div",{className:"TeamsTagsTooltipEditTag",children:[jsxRuntimeExports.jsx("div",{className:"TeamsTagsTooltipEditTag__header",children:jsxRuntimeExports.jsxs("div",{className:"TeamsTagsTooltipEditTag__header__backAction",onClick:i,children:[jsxRuntimeExports.jsx(SvgMovToMiniicon,{}),x.formatMessage("_.tags.editTag")]})}),jsxRuntimeExports.jsx("input",{className:"TeamsTagsTooltipEditTag__nameInput","data-private":"lipsum",type:"text",placeholder:x.formatMessage("_.tags.tagName"),value:y,onChange:S=>{const j=S.currentTarget.value;E(T=>({...T,name:j}))}}),jsxRuntimeExports.jsx(TeamsTagsTooltipColorPicker_memo,{selectedColor:_,onColorChange:R}),jsxRuntimeExports.jsxs("div",{className:"TeamsTagsTooltipEditTag__footer",children:[jsxRuntimeExports.jsx(SideSpinner,{isVisible:o,children:jsxRuntimeExports.jsx(BareButton_,{className:"TeamsTagsTooltipEditTag__footer__delete",onClick:a,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.delete"})})}),jsxRuntimeExports.jsx("div",{className:"TeamsTagsTooltipEditTag__footer__separator"}),jsxRuntimeExports.jsx(BareButton_,{className:"TeamsTagsTooltipEditTag__footer__save",onClick:()=>{s({name:y.trim(),color:_})},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})})]})]})}const TeamsTagsTooltipEditTag_memo=React$6.memo(TeamsTagsTooltipEditTag);function TeamsTagsTooltipNewTag({onSave:r,onBack:s}){const a=useI18n(),[{name:i,color:o},x]=React$6.useState(()=>({name:"",color:""})),y=React$6.useCallback(function(R){x(S=>({...S,color:R}))},[]),_=React$6.useRef(null);return React$6.useEffect(()=>{var E;(E=_.current)==null||E.focus()},[]),jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:a.formatMessage("_.tags.newTag"),type:CardMenuHeaderTabItemType.BACK,onClick:s}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{ref:_,className:"TeamsTagsTooltipNewTag__nameInput","data-private":"lipsum",type:"text",placeholder:a.formatMessage("_.tags.tagName"),value:i,onChange:E=>{const R=E.currentTarget.value;x(S=>({...S,name:R}))}}),jsxRuntimeExports.jsx(TeamsTagsTooltipColorPicker_memo,{selectedColor:o,onColorChange:y})]})}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["save"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"}),onClick:()=>r({name:i.trim(),color:o})})]})})}const TeamsTagsTooltipNewTag_memo=React$6.memo(TeamsTagsTooltipNewTag),SvgSearchMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("circle",{cx:9.4,cy:9.4,r:6.4,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m17.4 17.4-3.48-3.48"})),SvgCircleCheckMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("circle",{cx:10,cy:10,r:9.5,stroke:"currentColor"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m14.8 6-6 6.4-3.6-3.6"})),SvgCirclePartialCheckMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("circle",{cx:10,cy:10,r:9.5,stroke:"currentColor"}),reactExports.createElement("circle",{cx:10,cy:10,r:4,fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.5})),SvgEditMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.039 3.508a1.735 1.735 0 1 1 2.453 2.453L6.271 16.182 3 17l.818-3.27 10.22-10.222Z"})),SvgCircleMiniicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("circle",{cx:10,cy:10,r:9.5,stroke:"currentColor"}));function TeamsTagsTooltipList({possibleTags:r,newTagClick:s,selectedTagsIds:a,partiallySelectedTagsIds:i,editTagClick:o,toggleTagSelection:x,shouldDisallowSelection:y,alternateListTitle:_,readonly:E,onSave:R,onCancelOrClose:S}){const j=useI18n(),[T,A]=React$6.useState(""),M=React$6.useMemo(()=>T===""?r:r.filter(P=>P.name.toLowerCase().includes(T.trim().toLowerCase())),[T,r]);return jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:_||j.formatMessage("_.tags.title"),type:CardMenuHeaderTabItemType.BACK,onClick:S,accessory:jsxRuntimeExports.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),s()},className:"TeamsTagsTooltipList__header__action",disabled:E,children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:j.formatMessage("_.tags.newTag"),children:jsxRuntimeExports.jsx(PlusIcon,{})})})}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"TeamsTagsTooltipList__searchContainer",children:[jsxRuntimeExports.jsx("input",{value:T,onChange:P=>{A(P.target.value)},type:"text",className:"TeamsTagsTooltipList__searchInput",placeholder:j.formatMessage("_.tags.searchTags")}),jsxRuntimeExports.jsx(SvgSearchMiniicon,{})]}),jsxRuntimeExports.jsxs(SimpleScrollView,{className:"TeamsTagsTooltipList__tagsList",children:[M.map(P=>jsxRuntimeExports.jsx(TeamsTagsTooltipListTag,{tag:P,selected:a.has(P.id),partiallySelected:i.has(P.id),onEdit:()=>{o(P.id)},toggleSelection:()=>{x(P.id)},shouldDisallowSelection:y,readonly:E},P.id)),M.length===0?jsxRuntimeExports.jsx("div",{className:"TeamsTagsTooltipList__tagsList__noMatchingTags",children:j.formatMessage(T===""?"TeamsTagsTooltipList.tags-no-tags":"TeamsTagsTooltipList.tags-no-filter-results")}):null]})]})}),E||y?null:jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["save"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"}),onClick:()=>{R()}})]})})}const TeamsTagsTooltipList_memo=React$6.memo(TeamsTagsTooltipList);function TeamsTagsTooltipListTag({tag:r,onEdit:s,toggleSelection:a,selected:i,partiallySelected:o,shouldDisallowSelection:x,readonly:y}){return jsxRuntimeExports.jsxs("div",{className:cx$6("TeamsTagsTooltipList__tagRow",{"TeamsTagsTooltipList__tagRow--readonly":y}),style:{backgroundColor:r.color},onClick:y?void 0:a,children:[x?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{className:cx$6("TeamsTagsTooltipList__tagRow__checkbox",{"TeamsTagsTooltipList__tagRow__checkbox--partial":o}),type:"checkbox",onChange:y?void 0:a,checked:i,id:`checkboxForTag${r.id}`,readOnly:y}),jsxRuntimeExports.jsxs("label",{htmlFor:`checkboxForTag${r.id}`,children:[jsxRuntimeExports.jsx(SvgCircleMiniicon,{}),jsxRuntimeExports.jsx(SvgCircleCheckMiniicon,{}),jsxRuntimeExports.jsx(SvgCirclePartialCheckMiniicon,{})]})]}),jsxRuntimeExports.jsx("span",{className:"TeamsTagsTooltipList__tagRow__tagName","data-private":"lipsum",children:r.name}),y?null:jsxRuntimeExports.jsx(BareButton_,{className:"TeamsTagsTooltipList__tagRow__editAction",onClickNative:_=>{_.stopPropagation(),s()},children:jsxRuntimeExports.jsx(SvgEditMiniicon,{})})]})}const DEFAULT_TAG_IDS_VALUE=new Set;function TeamsTagsTooltipContent({possibleTags:r,selectedTagsIds:s=DEFAULT_TAG_IDS_VALUE,partiallySelectedTagsIds:a=DEFAULT_TAG_IDS_VALUE,shouldDisallowSelection:i,readonly:o=!1,deleteTag:x,editTag:y,createTag:_,onSelectedTagsIdsChange:E,onClose:R,alternateListTitle:S,deleteInProgress:j=!1}){const T=reactExports.useRef(!1),[A,M]=reactExports.useState(s),[P,L]=reactExports.useState(a),[D,O]=reactExports.useState(()=>({state:"list"})),B="tagId"in D?D.tagId:void 0,N=reactExports.useMemo(()=>{if(B)return r.find(ae=>ae.id===B)},[r,B]);reactExports.useEffect(()=>{T.current||M(s)},[s]),reactExports.useEffect(()=>{T.current||L(a)},[a]);const F=reactExports.useCallback(function(ie){T.current=!0,P.has(ie)?L(fn(se=>{se.delete(ie)})):M(fn(se=>{se.has(ie)?se.delete(ie):se.add(ie)}))},[P]),W=reactExports.useCallback(function(ie){O({state:"edit",tagId:ie})},[]),V=reactExports.useCallback(function(){O({state:"list"})},[]),U=reactExports.useCallback(function(){O({state:"create"})},[]),G=reactExports.useCallback(function(){E&&E(A,P)},[E,A,P]),oe=reactExports.useCallback(function(ie){const se=_(ie);F(se),O({state:"list"})},[_,F]),X=reactExports.useCallback(function(){M(s),L(a),R()},[R,a,s]),ee=reactExports.useMemo(()=>N?"edit":B?"list":D.state,[B,N,D.state]);return jsxRuntimeExports.jsx("div",{className:"TeamsTagsTooltipContent",children:jsxRuntimeExports.jsxs(TabsReplacerContainer,{active:ee,children:[jsxRuntimeExports.jsx(TabsTab,{label:"list",render:()=>jsxRuntimeExports.jsx(TeamsTagsTooltipList_memo,{selectedTagsIds:A,partiallySelectedTagsIds:P,toggleTagSelection:F,editTagClick:W,newTagClick:U,possibleTags:r,shouldDisallowSelection:i,alternateListTitle:S,readonly:o,onCancelOrClose:X,onSave:G})}),jsxRuntimeExports.jsx(TabsTab,{label:"edit",render:()=>(assertNonNullable(N),jsxRuntimeExports.jsx(TeamsTagsTooltipEditTag_memo,{onBack:V,tag:N,onSave:ae=>{y(N.id,ae),O({state:"list"})},onDelete:()=>{x(N.id)},deleteInProgress:j}))}),jsxRuntimeExports.jsx(TabsTab,{label:"create",render:()=>jsxRuntimeExports.jsx(TeamsTagsTooltipNewTag_memo,{onSave:oe,onBack:V})})]})})}const TeamsTagsTooltipContent_memo=reactExports.memo(TeamsTagsTooltipContent),TeamsTagsTooltipModal=({isVisible:r,onClose:s,boardId:a,card:i,isEditable:o})=>{const x=useSyncUpdateCards(),{createTag:y,deleteTag:_,editTag:E,sortedTagsList:R}=useSyncTags(a),S=reactExports.useMemo(()=>new Set(i.tags),[i.tags]),j=reactExports.useCallback(T=>{s(),x([{id:i.id,key:"tags",value:[...T]}])},[i.id,s,x]);return jsxRuntimeExports.jsx(BackdropModal,{isVisible:r,onClose:s,children:jsxRuntimeExports.jsx(TeamsTagsTooltipContent_memo,{readonly:!o,possibleTags:R,selectedTagsIds:S,createTag:y,editTag:E,deleteTag:_,onClose:s,shouldDisallowSelection:!1,onSelectedTagsIdsChange:j})})},PERMISSIONS_REQUIRING_ACTIVE_WORKSPACE=["remove_member_from_board","edit_board","add_member_to_board","edit_members","view_archive","create_template","view_automations","manage_automations","toggle_email_to_board"];function useTeamBoardPermissions(r){const{userDetails:s}=useAuth(),{isPlanActive:a}=useWorkspaceSubscriptionBasic(r==null?void 0:r.spaceId),i=React$6.useMemo(()=>r!=null&&r.boardPermissions?a?r.boardPermissions:difference(r.boardPermissions,PERMISSIONS_REQUIRING_ACTIVE_WORKSPACE):[],[r==null?void 0:r.boardPermissions,a]),o=React$6.useCallback(W=>{if(!r||!W)return!1;const V=r.members[W.publicUserId];return V?V.permissionLevel!==BoardPermissionLevel.ADMIN?!0:Object.values(r.members).filter(G=>G.permissionLevel===BoardPermissionLevel.ADMIN).length>1:!1},[r]),x=React$6.useMemo(()=>{if(!r||!s)return!1;const W=s.id in r.members?r.members[s.id]:void 0;return o(W)},[r,o,s]),y=React$6.useMemo(()=>i.includes("remove_member_from_board"),[i]),_=React$6.useMemo(()=>i.includes("edit_board"),[i]),E=React$6.useMemo(()=>i.includes("archive_board"),[i]),R=React$6.useMemo(()=>i.includes("add_member_to_board"),[i]),S=React$6.useMemo(()=>i.includes("edit_members"),[i]),j=React$6.useMemo(()=>i.includes("toggle_private"),[i]),T=React$6.useMemo(()=>i.includes("toggle_public_view"),[i]),A=React$6.useMemo(()=>i.includes("view_archive"),[i]),M=React$6.useMemo(()=>i.includes("create_template"),[i]),P=React$6.useMemo(()=>a&&i.includes("toggle_public_view"),[a,i]),L=React$6.useMemo(()=>i.includes("view_automations"),[i]),D=React$6.useMemo(()=>i.includes("manage_automations"),[i]),O=React$6.useMemo(()=>i.includes("toggle_email_to_board"),[i]),B=React$6.useCallback(W=>{var G,oe;if(!a||!s||!r)return!1;const V=s.id in r.members?r.members[s.id]:void 0;if(!V)return!1;const U=r.members[V.publicUserId];return U?U.permissionLevel===BoardPermissionLevel.ADMIN?!0:((oe=(G=r==null?void 0:r.customPermissions)==null?void 0:G[W])==null?void 0:oe[BoardPermissionLevel.MEMBER])!==!1:!1},[r,a,s]),N=React$6.useMemo(()=>B("archive_card"),[B]),F=React$6.useMemo(()=>B("delete_card"),[B]);return{canUserRemoveMembersFromBoard:y,canMemberBeRemovedFromBoard:o,canUserEditBoard:_,canUserArchiveBoard:E,canUserLeaveBoard:x,canAddMemberToBoard:R,canTogglePrivateBoard:j,canTogglePublicView:T,canToggleOnPublicView:P,canEditMemberPermissions:S,canEditCards:_,canViewArchive:A,canCreateTemplate:M,canViewAutomations:L,canManageAutomations:D,canToggleEmailToBoard:O,canArchiveCards:N,canDeleteCards:F}}const SvgCheckmarkicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"}),reactExports.createElement("mask",{id:"mask0",width:15,height:11,x:5,y:6,"mask-type":"alpha",maskUnits:"userSpaceOnUse"},reactExports.createElement("path",{fill:"#fff",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"})),reactExports.createElement("g",{mask:"url(#mask0)"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h24v24H0z"}))),SvgMinusicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6,d:"M4.8 12h14.4"})),CardAssigneeManager$1=({owners:r,partialOwners:s,onChange:a,onClose:i,persistHeight:o=!1,sortedBoardMembers:x})=>{const{userDetails:y}=useAuth(),{formatMessage:_}=useI18n(),E=React$6.useRef(null),[R,S]=React$6.useState(void 0),{isScrolledToBottom:j,props:T}=useScrollViewObserver(),[A,M]=React$6.useState(""),[P,L]=React$6.useState([...r!=null?r:[]]),[D,O]=React$6.useState(s||[]),B=React$6.useMemo(()=>A.toLowerCase(),[A]);React$6.useEffect(()=>{var xe;if(o){const ge=(xe=E.current)==null?void 0:xe.offsetHeight;S(ge)}},[o]);const{space:N,canInviteMember:F,canCreateInvitationRequest:W,canAddMemberToBoard:V,addBoardMember:U,invitationRequest:G}=useAddBoardMember(),oe=React$6.useCallback((xe,ge)=>{const be=[],ye=[],Ie=[];x.forEach(we=>{P.includes(we.publicUserId)||ge!=null&&ge.has(we.publicUserId)?be.push(we):D.includes(we.publicUserId)?ye.push(we):Ie.push(we)});const Pe=[...be,...ye,...Ie];return xe.length?[...Pe,...N!=null&&N.members?Object.values(N.members).filter(we=>!Pe.some(Re=>Re.publicUserId===we.publicUserId)):[]].filter(({name:we,email:Re})=>(we||"").toLowerCase().split(" ").concat(Re).some(Ee=>Ee.startsWith(xe))):Pe},[P,D,x,N==null?void 0:N.members]),[X,ee]=React$6.useState(()=>oe(B)),ae=React$6.useRef(void 0);React$6.useEffect(()=>{var be;const xe=(be=ae.current)==null?void 0:be.publicUserId;if(!xe)return;const ge=oe(B,new Set([xe]));ge.some(ye=>ye.publicUserId===xe)&&(L(ye=>[...ye,xe]),ee(ge),ae.current=void 0)},[oe,B]);const ie=React$6.useCallback(xe=>{const ge=xe.publicUserId;P.includes(ge)?L(be=>{const ye=[...be];return ye.splice(be.indexOf(ge),1),ye}):(D.includes(ge)&&O(be=>{const ye=[...be];return ye.splice(be.indexOf(ge),1),ye}),L(be=>[...be,ge]))},[P,D]),se=React$6.useCallback(()=>{a(P,D),i()},[P,a,i,D]),Q=!!(A!=null&&A.length)&&!X.length,Z=React$6.useMemo(()=>isValidEmail(B),[B]),J=B===(y==null?void 0:y.email.toLowerCase()),[te,de]=React$6.useState(!1),ce=useMiniToastNotifications(),me=async()=>{de(!0);try{F?ae.current=await U(B):(await G(B),ce.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.userInvited"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})),M(""),ee(oe(""))}catch(xe){AnydoSentry.captureException(xe)}finally{de(!1)}},ve=V&&Z&&Q?jsxRuntimeExports.jsx(TooltipSmallInfo,{delay:150,isActive:!F,text:_("BoardTeamMemberManager.inviteTooltip.default"),children:jsxRuntimeExports.jsx(CtaButton,{disabled:!Z||te||J,onClick:xe=>{xe.stopPropagation(),me()},className:"CardAssigneeManager__inviteToWorkspace",children:_("BoardTeamMemberManager.inviteToWorkspace")})}):void 0;return jsxRuntimeExports.jsxs("div",{className:"CardAssigneeManager",ref:E,style:{height:R},onWheel:stopPropagation$2,children:[jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__search",children:jsxRuntimeExports.jsx(SearchField,{tabIndex:0,placeholder:_("_.tasks.assignees.search.placeholder"),disabled:te,loading:te,value:A,onChange:xe=>{M(xe),ee(oe(xe))},searchIcon:ve,clearIcon:ve})}),X.length>0&&jsxRuntimeExports.jsx(ScrollView_forwarded,{className:"CardAssigneeManager__members-wrapper",...T,children:jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members",children:X.map(xe=>jsxRuntimeExports.jsxs("div",{className:"CardAssigneeManager__members-member",onClick:ge=>{ge.stopPropagation();const be=x.find(ye=>ye.publicUserId===xe.publicUserId);be&&ie(be)},children:[jsxRuntimeExports.jsx(TeamMemberBox_memo,{member:xe,theme:TeamMemberBoxTheme.TEAM_MEMBER_MANAGER}),x.some(ge=>ge.publicUserId===xe.publicUserId)?P.includes(xe.publicUserId)?jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members-member--icon",children:jsxRuntimeExports.jsx(SvgCheckmarkicon$1,{})}):D.includes(xe.publicUserId)&&jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members-member--icon",children:jsxRuntimeExports.jsx(SvgMinusicon,{})}):jsxRuntimeExports.jsx(AddMemberButton__memo,{addMember:async()=>{await U(xe),L(ge=>[...ge,xe.publicUserId])}})]},xe.email))})}),Q&&jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__no-result",children:J?jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.yourself"}):N!=null&&(F||W)?jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.no-result",values:{searchQuery:A,spaceName:N.name,b:xe=>jsxRuntimeExports.jsx("strong",{children:xe,"data-private":"lipsum"})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.assignees.search.no-result",values:{searchQuery:A,b:xe=>jsxRuntimeExports.jsx("strong",{children:xe})}})}),jsxRuntimeExports.jsxs("div",{className:cx$6("CardAssigneeManager__footer",{"CardAssigneeManager__footer--showShadow":j===!1}),children:[jsxRuntimeExports.jsx(ButtonInlineText,{theme:"secondary",className:"CardAssigneeManager__footer-cancel",onClick:i,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"})}),jsxRuntimeExports.jsx(ButtonInlineText,{className:"CardAssigneeManager__footer-save",onClick:se,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})})]})]})},CardAssigneeManager_memo$1=React$6.memo(CardAssigneeManager$1),CardAssigneeManager=({owners:r,partialOwners:s,onChange:a,onClose:i,sortedBoardMembers:o})=>{const{userDetails:x}=useAuth(),{formatMessage:y}=useI18n(),{props:_}=useScrollViewObserver(),[E,R]=React$6.useState(""),[S,j]=React$6.useState(r||[]),[T,A]=React$6.useState(s||[]),M=React$6.useMemo(()=>E.toLowerCase(),[E]),{space:P,canInviteMember:L,canCreateInvitationRequest:D,canAddMemberToBoard:O,addBoardMember:B,invitationRequest:N}=useAddBoardMember(),F=React$6.useCallback((te,de)=>{const ce=[],me=[],ve=[];o.forEach(ge=>{S.includes(ge.publicUserId)||de!=null&&de.has(ge.publicUserId)?ce.push(ge):T.includes(ge.publicUserId)?me.push(ge):ve.push(ge)});const xe=[...ce,...me,...ve];return te.length?[...xe,...P!=null&&P.members?Object.values(P.members).filter(ge=>!xe.some(be=>be.publicUserId===ge.publicUserId)):[]].filter(({name:ge,email:be})=>(ge||"").toLowerCase().split(" ").concat(be).some(Ie=>Ie.startsWith(te))):xe},[S,T,o,P==null?void 0:P.members]),[W,V]=React$6.useState(()=>F(M)),U=React$6.useRef(void 0);React$6.useEffect(()=>{var ce;const te=(ce=U.current)==null?void 0:ce.publicUserId;if(!te)return;const de=F(M,new Set([te]));de.some(me=>me.publicUserId===te)&&(j(me=>[...me,te]),V(de),U.current=void 0)},[F,M]);const G=React$6.useCallback(te=>{const de=te.publicUserId;S.includes(de)?j(ce=>{const me=[...ce];return me.splice(ce.indexOf(de),1),me}):(T.includes(de)&&A(ce=>{const me=[...ce];return me.splice(ce.indexOf(de),1),me}),j(ce=>[...ce,de]))},[S,T]),oe=React$6.useCallback(()=>{a(S,T),i()},[S,a,i,T]),X=!!(E!=null&&E.length)&&!W.length,ee=React$6.useMemo(()=>isValidEmail(M),[M]),ae=M===(x==null?void 0:x.email.toLowerCase()),[ie,se]=React$6.useState(!1),Q=useMiniToastNotifications(),Z=async()=>{se(!0);try{L?U.current=await B(M):(await N(M),Q.set({id:createGlobalModelId(),autoDismiss:!0,theme:MiniToastNotificationTheme.ACTION,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.userInvited"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})),R(""),V(F(""))}catch(te){AnydoSentry.captureException(te)}finally{se(!1)}},J=O&&ee&&X?jsxRuntimeExports.jsx(TooltipSmallInfo,{delay:150,isActive:!L,text:y("BoardTeamMemberManager.inviteTooltip.default"),children:jsxRuntimeExports.jsx(CtaButton,{disabled:!ee||ie||ae,onClick:te=>{te.stopPropagation(),Z()},className:"CardAssigneeManager__inviteToWorkspace",children:y("BoardTeamMemberManager.inviteToWorkspace")})}):void 0;return jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.filters.assignees"}),type:CardMenuHeaderTabItemType.BACK,onClick:i}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__search",children:jsxRuntimeExports.jsx(SearchField,{tabIndex:0,placeholder:y("_.tasks.assignees.search.placeholder"),disabled:ie,loading:ie,value:E,onChange:te=>{R(te),V(F(te))},searchIcon:J,clearIcon:J})}),W.length>0&&jsxRuntimeExports.jsx(ScrollView_forwarded,{className:"CardAssigneeManager__members-wrapper",..._,children:jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members",children:W.map(te=>jsxRuntimeExports.jsxs("div",{className:"CardAssigneeManager__members-member",onClick:de=>{de.stopPropagation();const ce=o.find(me=>me.publicUserId===te.publicUserId);ce&&G(ce)},children:[jsxRuntimeExports.jsx(TeamMemberBox_memo,{member:te,theme:TeamMemberBoxTheme.TEAM_MEMBER_MANAGER}),o.some(de=>de.publicUserId===te.publicUserId)?S.includes(te.publicUserId)?jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members-member--icon",children:jsxRuntimeExports.jsx(SvgCheckmarkicon$1,{})}):T.includes(te.publicUserId)&&jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__members-member--icon",children:jsxRuntimeExports.jsx(SvgMinusicon,{})}):jsxRuntimeExports.jsx(AddMemberButton__memo,{addMember:async()=>{await B(te),j(de=>[...de,te.publicUserId])}})]},te.email))})}),X&&jsxRuntimeExports.jsx("div",{className:"CardAssigneeManager__no-result",children:ae?jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.yourself"}):P!=null&&(L||D)?jsxRuntimeExports.jsx(FormattedMessage,{id:"BoardTeamMemberManager.no-result",values:{searchQuery:E,spaceName:P.name,b:te=>jsxRuntimeExports.jsx("strong",{children:te,"data-private":"lipsum"})}}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.assignees.search.no-result",values:{searchQuery:E,b:te=>jsxRuntimeExports.jsx("strong",{children:te})}})})]})}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["save"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"}),onClick:()=>{oe()}})]})})},CardAssigneeManager_memo=React$6.memo(function r(s){return useMatchMedia("(min-width: 480px)")?jsxRuntimeExports.jsx(CardAssigneeManager_memo$1,{...s}):jsxRuntimeExports.jsx(CardAssigneeManager,{...s})}),CardAssigneeManagerModal=({isVisible:r,onClose:s,boardId:a,card:i})=>{var L;const{track:o}=useAnalytics(),x=useSyncUpdateCards(),{sortedBoardMembers:y}=useSyncBoardSortedMembers(a),_=Recoil_index_20(cacheTaxonomy.board.byId(a)),E=Recoil_index_20(_?cacheTaxonomy.space.byId(_.spaceId):Recoil_index_12(null)),{canAddMemberToBoard:R}=useTeamBoardPermissions(_),S=reactExports.useCallback(D=>{o("card_assignee_added",{extra_str1:i.id,extra_double1:D.length}),x([{id:i.id,key:"owners",value:D}])},[i.id,o,x]),j=useSyncAddBoardMembers(),T=useSyncInviteWorkspaceMember((L=E==null?void 0:E.id)!=null?L:null),A=reactExports.useCallback(async D=>{assertNonNullable(_);const O={[D.publicUserId]:[D,BoardPermissionLevel.MEMBER]},B=await j(_,O);return o("board_member_added",{extra_str1:_.id,extra_str2:"existing_board",extra_double1:1}),B},[_,j,o]),M=reactExports.useCallback(D=>T(D,_==null?void 0:_.id),[_==null?void 0:_.id,T]),P=jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:i.owners,sortedBoardMembers:y,onChange:S,onClose:s});return jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:r,onClose:s,preventPointerDown:!0,children:E!=null?jsxRuntimeExports.jsx(AddBoardMemberProvider,{spaceId:E.id,boardPermissions:{canAddMemberToBoard:R},onAddBoardMember:A,onInviteWorkspaceMember:M,children:P}):P})};var SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,arrayMap$1=_arrayMap,baseUnary=_baseUnary,cacheHas=_cacheHas,nativeMin=Math.min;function baseIntersection$1(r,s,a){for(var i=a?arrayIncludesWith:arrayIncludes,o=r[0].length,x=r.length,y=x,_=Array(x),E=1/0,R=[];y--;){var S=r[y];y&&s&&(S=arrayMap$1(S,baseUnary(s))),E=nativeMin(S.length,E),_[y]=!a&&(s||o>=120&&S.length>=120)?new SetCache(y&&S):void 0}S=r[0];var j=-1,T=_[0];e:for(;++j<o&&R.length<E;){var A=S[j],M=s?s(A):A;if(A=a||A!==0?A:0,!(T?cacheHas(T,M):i(R,M,a))){for(y=x;--y;){var P=_[y];if(!(P?cacheHas(P,M):i(r[y],M,a)))continue e}T&&T.push(M),R.push(A)}}return R}var _baseIntersection=baseIntersection$1,isArrayLikeObject=isArrayLikeObject_1;function castArrayLikeObject$1(r){return isArrayLikeObject(r)?r:[]}var _castArrayLikeObject=castArrayLikeObject$1,arrayMap=_arrayMap,baseIntersection=_baseIntersection,baseRest=_baseRest,castArrayLikeObject=_castArrayLikeObject,intersection=baseRest(function(r){var s=arrayMap(r,castArrayLikeObject);return s.length&&s[0]===r[0]?baseIntersection(s):[]}),intersection_1=intersection;const intersection$1=getDefaultExportFromCjs(intersection_1),RemainderIcon=({children:r,className:s,size:a=SharingAvatarSize.BOARD_TOOLBAR_BUTTON_SIZE})=>jsxRuntimeExports.jsx("div",{className:cx$6("RemainderIcon",s,{"RemainderIcon--taskIndicatorCompactSize":a===SharingAvatarSize.TASK_INDICATOR_COMPACT,"RemainderIcon--listMembersButtonSize":a===SharingAvatarSize.LIST_MEMBERS_BUTTON,"RemainderIcon--boardToolbarButtonSize":a===SharingAvatarSize.BOARD_TOOLBAR_BUTTON_SIZE}),children:jsxRuntimeExports.jsxs("span",{className:"Remainder__textIcon",children:["+",r]})}),Remainder__memoIcon=React$6.memo(RemainderIcon);function LeaveBoardModal({fromRef:r,isVisible:s,onConfirm:a,onCancel:i}){return jsxRuntimeExports.jsx(ConfirmModal,{fromRef:r,isVisible:s,headerElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"LeaveBoardModal.title"}),mainElement:"",declineElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.dismiss"}),acceptElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.ok"}),onAccept:a,onDecline:i})}const RemoveMember=({board:r,member:s,onModalClose:a})=>{const{userDetails:i}=useAuth(),o=useI18n();if(!i)throw new Error("Can't render RemoveMember without userDetails");const x=s.publicUserId===i.id?"leave":"removeMember",[y,_]=React$6.useState(!1),[E,R]=React$6.useState(!1),S=React$6.useCallback(()=>{_(!1),a()},[a]),j=React$6.useCallback(()=>{R(!1),a()},[a]),T=useSyncLeaveBoard(),A=React$6.useCallback(()=>{S(),T(r)},[r,S,T]),M=useSyncRemoveBoardMembers(),P=React$6.useCallback(()=>{j(),M(r,[s])},[r,j,s,M]),L=React$6.useCallback(()=>{x==="leave"?_(!0):R(!0)},[x]),{canUserRemoveMembersFromBoard:D,canMemberBeRemovedFromBoard:O}=useTeamBoardPermissions(r),B=React$6.useMemo(()=>O(s),[O,s]);if(!D)return null;const N=x==="leave"?o.formatMessage("RemoveMember.leave-board"):o.formatMessage("RemoveMember.remove-board");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"RemoveMember",children:jsxRuntimeExports.jsx(ButtonInlineText,{disabled:!B,onClick:L,theme:"action",className:"RemoveMember__button",children:N})}),jsxRuntimeExports.jsx(LeaveBoardModal,{isVisible:y,onCancel:S,onConfirm:A}),jsxRuntimeExports.jsx(RemoveBoardMemberConfirmationModal_memo,{isVisible:E,onCancel:j,onYes:P})]})},RemoveMember_memo=React$6.memo(RemoveMember),SvgCheckmarkicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"#0083FF",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"}),reactExports.createElement("mask",{id:"mask0",width:15,height:11,x:5,y:6,"mask-type":"alpha",maskUnits:"userSpaceOnUse"},reactExports.createElement("path",{fill:"#fff",d:"M18.235 6.434a.8.8 0 0 1 1.208 1.041l-.077.09-8.8 8.8a.8.8 0 0 1-1.042.077l-.09-.077-4-4a.8.8 0 0 1 1.042-1.209l.09.077L10 14.668l8.235-8.234Z"})),reactExports.createElement("g",{mask:"url(#mask0)"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h24v24H0z"}))),SvgUnassignedicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeWidth:1.6,d:"M23.2 12c0 6.186-5.014 11.2-11.2 11.2C5.814 23.2.8 18.186.8 12 .8 5.814 5.814.8 12 .8 18.186.8 23.2 5.814 23.2 12Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6,d:"M5.55 9c.496 2.64 4.278 2.638 4.788 0M13.662 9c.497 2.64 4.278 2.638 4.788 0M16.073 16l-.061.056A5.975 5.975 0 0 1 7.926 16"})),MAX_MEMBERS_TO_PRESENT=6;function TeamMemberAvatars({members:r,board:s,hoverDisabled:a,tooltipOffset:i,className:o,itemClassName:x,maxMembers:y=MAX_MEMBERS_TO_PRESENT,displayName:_=!1,selectedMembers:E,onAvatarClick:R,showUnassigned:S,size:j=SharingAvatarSize.BOARD_TOOLBAR_BUTTON_SIZE}){const[T,A]=React$6.useState(null),[M,P]=React$6.useState(null),L=React$6.useRef(null),[D,O]=React$6.useMemo(()=>r.length>2&&r.length>y?[r.slice(0,y),r.slice(y)]:[r,[]],[y,r]),B=React$6.useMemo(()=>(E==null?void 0:E.size)&&intersection$1([...E.keys()],O.map(X=>X.publicUserId)).length===0,[O,E]),[N,F]=React$6.useState(!1),W=React$6.useCallback(()=>{P(null)},[]),V=React$6.useCallback(X=>ee=>{a||(P(ee.currentTarget),Array.isArray(X)?(A(X),F(!1)):(A(null),F(!0)))},[a]);React$6.useEffect(()=>{a&&W()},[a,W]);const U=React$6.useCallback(()=>{var X;(X=L.current)==null||X.hide()},[]),G=T&&T.length>1,oe=!!(M&&(T&&T[0]&&!a||N));return jsxRuntimeExports.jsxs("div",{className:cx$6("TeamMemberAvatars",o),children:[D.map(X=>jsxRuntimeExports.jsxs("span",{className:cx$6("TeamMemberAvatars__item",x,{"TeamMemberAvatars__item--hasClickFeedback":!!R,"TeamMemberAvatars__item--faded":E!=null&&E.size?!E.get(X.publicUserId):!1}),onMouseEnter:V([X]),onMouseLeave:W,role:R?"button":"none",onClick:R?()=>R==null?void 0:R(X.publicUserId):void 0,children:[jsxRuntimeExports.jsx(SharingAvatar_memo,{name:X.name||X.email,size:j,imageUrl:X.profilePicture||null,includeTitle:!1}),_&&jsxRuntimeExports.jsx("div",{className:"TeamMemberAvatars__item__name",children:X.name})]},X.publicUserId)),S?jsxRuntimeExports.jsx("span",{onMouseEnter:V(FILTER_UNASSIGNED_SEARCH_PARAM_NAME),onMouseLeave:W,className:cx$6("TeamMemberAvatars__item","TeamMemberAvatars__unassigned",x,{"TeamMemberAvatars__item--hasClickFeedback":!!R,"TeamMemberAvatars__item--faded":E!=null&&E.size?!E.get(FILTER_UNASSIGNED_SEARCH_PARAM_NAME):!1}),role:R?"button":"none",onClick:R?()=>R==null?void 0:R(FILTER_UNASSIGNED_SEARCH_PARAM_NAME):void 0,children:jsxRuntimeExports.jsx(SvgUnassignedicon,{})},FILTER_UNASSIGNED_SEARCH_PARAM_NAME):null,O.length?jsxRuntimeExports.jsx("span",{className:cx$6("TeamMemberAvatars__item",o),onMouseEnter:V(O),onMouseLeave:W,children:jsxRuntimeExports.jsx(Remainder__memoIcon,{className:cx$6("TeamMemberAvatars__remainder",{"TeamMemberAvatars__item--faded":B,"TeamMemberAvatars__remainder--hasClickFeedback":!!R}),size:j,children:O.length})}):null,!a&&jsxRuntimeExports.jsx(Tooltip2,{ref:L,persistOnMouseOver:!0,from:M,offset:i,isVisible:oe,position:G?"bottom-start":void 0,className:cx$6("TeamMemberAvatars__teamMemberTooltip",{TeamMemberAvatars__unassignedTooltip:N}),theme:N?TooltipTheme.DARK:void 0,children:jsxRuntimeExports.jsxs("div",{onClick:stopPropagation$2,children:[N?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.unassigned"}):null,!N&&G&&R?jsxRuntimeExports.jsx(SimpleScrollView,{className:"TeamMemberAvatars__remainders",children:O.map(X=>jsxRuntimeExports.jsxs("span",{className:cx$6("TeamMemberAvatars__item",x,"TeamMemberAvatars__item--remainder",{"TeamMemberAvatars__item--hasClickFeedback":!!R,"TeamMemberAvatars__item--faded":E!=null&&E.size?!E.get(X.publicUserId):!1}),role:"button",onClick:()=>R(X.publicUserId),children:[jsxRuntimeExports.jsx(SharingAvatar_memo,{name:X.name||X.email,size:SharingAvatarSize.BOARD_TOOLBAR_BUTTON_SIZE,imageUrl:X.profilePicture||null,includeTitle:!1}),jsxRuntimeExports.jsx("div",{className:cx$6("TeamMemberAvatars__item__name"),children:X.name||X.email}),jsxRuntimeExports.jsx("div",{className:cx$6("TeamMemberAvatars__remainders_checkbox",{"TeamMemberAvatars__remainders_checkbox--visible":E!=null&&E.size?E.get(X.publicUserId):!1}),children:jsxRuntimeExports.jsx(SvgCheckmarkicon,{})})]},X.publicUserId))}):null,!N&&!G&&T?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"TeamMemberAvatars__teamMemberTooltip__item",children:jsxRuntimeExports.jsx(TeamMemberBox_memo,{member:T[0]})}),s&&jsxRuntimeExports.jsx(RemoveMember_memo,{board:s,member:T[0],onModalClose:U},T[0].publicUserId)]}):null]})})]})}const TeamMemberAvatars_memo=TeamMemberAvatars,SvgAssignicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,clipPath:"url(#clip0_12027_271453)"},reactExports.createElement("path",{d:"M15.666 18.625v-1.583a3.167 3.167 0 0 0-3.167-3.167H6.958a3.167 3.167 0 0 0-3.167 3.167v1.583M9.73 10.708a3.167 3.167 0 1 0 0-6.333 3.167 3.167 0 0 0 0 6.333ZM18.834 8.332v4.75M21.209 10.707h-4.75"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_12027_271453"},reactExports.createElement("path",{fill:"#fff",d:"M3 2h19v19H3z"})))),CardIndicatorAssignees=({isEditable:r,withAssignButton:s=!1,cardOnHoverClassName:a,sectionId:i,owners:o,onChange:x,maxMembers:y,justifyStart:_,size:E})=>{const R=React$6.useRef(null),S=React$6.useRef(null),j=useSyncQueryModelById("section",i),{sortedBoardMembers:T,boardMembers:A}=useSyncBoardSortedMembers((j==null?void 0:j.boardId)||""),[M,P]=React$6.useState(!1),L=React$6.useCallback(()=>P(!1),[]);useOutSideEvent(["click","pointerdown","wheel"],React$6.useMemo(()=>[R,S],[]),L);const D=React$6.useMemo(()=>{const F=[];return o.forEach(V=>{const U=A.get(V);U&&F.push(U)}),sortBy$1(F,V=>V.name)},[o,A]),O=React$6.useCallback(()=>P(F=>!F),[]),B=React$6.useCallback(()=>P(!1),[]),N=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),B];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"CardIndicatorAssignees",children:jsxRuntimeExports.jsx("div",{className:cx$6("CardIndicatorAssignees__button-wrapper",{"CardIndicatorAssignees__button-wrapper--justifiedStart":_}),children:jsxRuntimeExports.jsxs("button",{className:cx$6("CardIndicatorAssignees__button",CARD_CLICK_IGNORE_CLASSNAME,{"CardIndicatorAssignees__button--sizeTaskIndicatorsCompact":E===SharingAvatarSize.TASK_INDICATOR_COMPACT}),disabled:!r,ref:R,onClick:O,children:[r&&s&&jsxRuntimeExports.jsx(SvgAssignicon$1,{className:cx$6("CardIndicatorAssignees__assignIcon",a)}),o.length?jsxRuntimeExports.jsx(TeamMemberAvatars_memo,{members:D,tooltipOffset:12,hoverDisabled:!0,maxMembers:y,size:E}):null]})})}),r&&jsxRuntimeExports.jsx(Tooltip2,{from:R,isVisible:M,className:"CardIndicatorAssignees__tooltip",position:"bottom-start",children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[N],children:jsxRuntimeExports.jsx(FocusLockCombination,{autoFocus:!0,children:jsxRuntimeExports.jsx("div",{ref:S,onClick:stopPropagation$2,onPointerDown:stopPropagation$2,children:jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:o,sortedBoardMembers:T,onClose:B,onChange:x})})})})})]})},CardIndicatorAssignees_memo=React$6.memo(CardIndicatorAssignees),SvgAttachmentsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...r},reactExports.createElement("path",{stroke:"#9B9B9B",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12.627 6.78 7.13 12.275a3.59 3.59 0 0 1-5.078-5.078l5.497-5.497a2.394 2.394 0 0 1 3.385 3.386l-5.503 5.496A1.197 1.197 0 1 1 3.74 8.891l5.078-5.072"})),SvgChecklistsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeWidth:1.3,d:"m10.515 12.492-3.97-.045c-1.774 0-3.212-1.394-3.212-3.108L3.38 2M13.19 12.448c0 .664-.56 1.235-1.294 1.235s-1.295-.571-1.295-1.235c0-.663.56-1.235 1.295-1.235.734 0 1.294.572 1.294 1.235Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"square",strokeWidth:1.3,d:"m3.6 5.718 6.738.012"}),reactExports.createElement("path",{stroke:"currentColor",strokeWidth:1.3,d:"M13.19 5.978c0 .663-.56 1.235-1.294 1.235S10.6 6.641 10.6 5.978c0-.663.56-1.235 1.295-1.235.734 0 1.294.572 1.294 1.235Z"})),SvgChaticon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...r},reactExports.createElement("path",{stroke:"#9B9B9B",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M13 6.667a5.587 5.587 0 0 1-.6 2.533 5.666 5.666 0 0 1-5.067 3.133 5.587 5.587 0 0 1-2.533-.6L1 13l1.267-3.8a5.586 5.586 0 0 1-.6-2.533A5.667 5.667 0 0 1 4.8 1.6 5.587 5.587 0 0 1 7.333 1h.334A5.653 5.653 0 0 1 13 6.333v.334Z"})),SvgRemindericon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12 5.733C12 3.671 10.21 2 8 2S4 3.671 4 5.733c0 4.356-2 5.6-2 5.6h12s-2-1.244-2-5.6M10 14c-.344.413-.98.667-1.666.667-.687 0-1.322-.254-1.667-.667"})),SvgClockicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 6.75V12h5.25"})),modal="_modal_rfqgo_1",datePicker="_datePicker_rfqgo_8",footer$1="_footer_rfqgo_12",timePicker="_timePicker_rfqgo_20",timePickerButtonWithValue="_timePickerButtonWithValue_rfqgo_30",active="_active_rfqgo_35",styles$C={modal,datePicker,footer:footer$1,timePicker,timePickerButtonWithValue,active},SvgBellicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M18 8.6C18 5.507 15.314 3 12 3S6 5.507 6 8.6C6 15.133 3 17 3 17h18s-3-1.867-3-8.4M15 21c-.517.619-1.47 1-2.5 1s-1.983-.381-2.5-1"})),value="_value_i2q1w_1",empty="_empty_i2q1w_6",menu$1="_menu_i2q1w_11",tooltip$2="_tooltip_i2q1w_15",tabsWrapper="_tabsWrapper_i2q1w_20",customButtons="_customButtons_i2q1w_24",customButtonsSeparator="_customButtonsSeparator_i2q1w_32",customUnitItem="_customUnitItem_i2q1w_38",customAmountTextfieldWrapper="_customAmountTextfieldWrapper_i2q1w_44",textfield="_textfield_i2q1w_48",overdue$1="_overdue_i2q1w_52",styles$B={value,empty,menu:menu$1,tooltip:tooltip$2,tabsWrapper,customButtons,customButtonsSeparator,customUnitItem,customAmountTextfieldWrapper,textfield,overdue:overdue$1},DEFAULT_TAB$1="MAIN",DEFAULT_CUSTOM_MINUTES=10,DEFAULT_CUSTOM_UNIT="minutes",ReminderPicker=({value:r,onChange:s,disabled:a,type:i,existingReminders:o,now:x,dueDate:y})=>{const{track:_}=useAnalytics(),[E,R]=React$6.useState(DEFAULT_TAB$1),[S,j]=React$6.useState(DEFAULT_CUSTOM_MINUTES),[T,A]=React$6.useState(DEFAULT_CUSTOM_UNIT),[M,P]=React$6.useState(!1),{formatMessage:L}=useI18n();React$6.useEffect(()=>{M?(j(r?-getReminderValue(r).add.amount:DEFAULT_CUSTOM_MINUTES),A(r?getReminderValue(r).add.unit:DEFAULT_CUSTOM_UNIT)):R("MAIN")},[M,r]);const D=React$6.useRef();React$6.useEffect(()=>{var N;E==="CUSTOM"&&((N=D.current)==null||N.focus())},[E]);const O=React$6.useMemo(()=>r&&y?userReminderHelpers.isReminderOverdue(r,new Date(y.date),x):!1,[x,r,y]),B=React$6.useMemo(()=>USER_REMINDERS_BY_CONSTRAINT[i].filter(N=>N===(r==null?void 0:r.value)||!(o!=null&&o.map(F=>F.value).includes(N))).map(N=>{let F=!1;return y&&(F=userReminderHelpers.isPresetOverdue(N,new Date(y.date),x)),{preset:N,disabled:F}}),[o,x,i,r==null?void 0:r.value,y]);return jsxRuntimeExports.jsx(TooltipCard,{isVisible:M,className:cx$6(styles$B.tooltip,CARD_CLICK_IGNORE_CLASSNAME),isTooltipStyleless:!0,onOutSideClick:()=>P(!1),renderTooltip:()=>jsxRuntimeExports.jsx("div",{className:styles$B.tabsWrapper,children:jsxRuntimeExports.jsxs(TabsReplacerContainer,{active:E,children:[jsxRuntimeExports.jsx(TabsTab,{label:"MAIN",render:()=>jsxRuntimeExports.jsx(DropdownMenu.Content,{children:jsxRuntimeExports.jsx(ScrollView_forwarded,{className:styles$B.menu,children:B.map(N=>jsxRuntimeExports.jsx(DropdownMenu.Item,{selected:N.preset===(r==null?void 0:r.value),disabled:N.disabled,onClick:()=>{s({id:createGlobalModelId("uuid4"),type:"preset",value:N.preset}),P(!1)},children:L(`_.reminders.card.${N.preset}`)},JSON.stringify(N)))})})}),jsxRuntimeExports.jsx(TabsTab,{label:"CUSTOM",render:()=>jsxRuntimeExports.jsxs(DropdownMenu.Content,{children:[jsxRuntimeExports.jsx("div",{className:styles$B.customAmountTextfieldWrapper,children:jsxRuntimeExports.jsx(TextField,{className:styles$B.textfield,autoFocus:!0,ref:D,type:"number",theme:"flat",value:String(S),onChange:N=>j(parseInt(N,10))})}),jsxRuntimeExports.jsx(ScrollView_forwarded,{className:styles$B.menu,children:USER_REMINDER_UNITS.map(N=>jsxRuntimeExports.jsxs(DropdownMenu.Item,{className:styles$B.customUnitItem,onClick:()=>A(N),children:[jsxRuntimeExports.jsx(TaskItemCheckbox,{checked:N===T,theme:"action"}),L(`_.reminders.card.unit.${N}`)]},N))}),jsxRuntimeExports.jsxs("div",{className:styles$B.customButtons,children:[jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:()=>R("MAIN"),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"})}),jsxRuntimeExports.jsx("div",{className:styles$B.customButtonsSeparator}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:()=>{s({id:createGlobalModelId("uuid4"),type:"custom",value:{constraint:i,add:{amount:-S,unit:T}}}),P(!1)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.save"})})]})]})})]})}),render:N=>jsxRuntimeExports.jsx(ButtonInlineText,{className:cx$6(styles$B.value,{[styles$B.empty]:!r,[styles$B.overdue]:O}),disabled:a,theme:"plain",onClick:()=>{P(!0),_("card_reminder_picker_tapped")},accessory:jsxRuntimeExports.jsx(SvgBellicon,{}),ref:N,children:r?r.type==="preset"?L(`_.reminders.card.${r.value}`):`${-r.value.add.amount} ${L(`_.reminders.card.unit.${r.value.add.unit}`)}`:L("_.reminders.addReminder")})})},root$a="_root_79p2k_1",cardBody="_cardBody_79p2k_5",repeatingMethod="_repeatingMethod_79p2k_9",options="_options_79p2k_16",optionsRow="_optionsRow_79p2k_23",optionAlignEnd="_optionAlignEnd_79p2k_37",optionFullWidth="_optionFullWidth_79p2k_41",radioOption="_radioOption_79p2k_45",radioOptionDisabledText="_radioOptionDisabledText_79p2k_54",gap="_gap_79p2k_58",footer="_footer_79p2k_63",footerHighlight="_footerHighlight_79p2k_68",optionTextBold$1="_optionTextBold_79p2k_90",checkWrapper$1="_checkWrapper_79p2k_95",rootOption$1="_rootOption_79p2k_99",maxHeightViewport="_maxHeightViewport_79p2k_104",setButton="_setButton_79p2k_108",loading="_loading_79p2k_112",styles$A={root:root$a,cardBody,repeatingMethod,options,optionsRow,optionAlignEnd,optionFullWidth,radioOption,radioOptionDisabledText,gap,footer,footerHighlight,optionTextBold:optionTextBold$1,checkWrapper:checkWrapper$1,rootOption:rootOption$1,maxHeightViewport,setButton,loading},TASK_REPEAT_METHOD={daily:TaskRepeatingMethod.TASK_REPEAT_DAY,weekly:TaskRepeatingMethod.TASK_REPEAT_WEEK,monthly:TaskRepeatingMethod.TASK_REPEAT_MONTH,yearly:TaskRepeatingMethod.TASK_REPEAT_YEAR},TASK_REPEAT_END_TYPE={date:TaskAlertRepeatEndType.REPEAT_END_ON_DATE,occurrences:TaskAlertRepeatEndType.REPEAT_END_OCCURRENCES},TASK_REPEAT_MONTH_TYPE={dayOfMonth:TaskAlertRepeatMonthType.ON_DATE,dayOfWeek:TaskAlertRepeatMonthType.ON_DAY};function calculateTerminationDate({now:r,dueDate:s,recurrenceType:a,repeatInterval:i,repeatBy:o,occurrences:x,terminationType:y,terminationDate:_}){const E=s.date;return calculateTaskAlertRepeatEndsOn(s.date,TASK_REPEAT_METHOD[a],x,_,y!==null?TASK_REPEAT_END_TYPE[y]:TaskAlertRepeatEndType.REPEAT_END_NEVER,i,TASK_REPEAT_MONTH_TYPE[o.type],E,r.valueOf())}const EditTermination=({terminationType:r,terminationDate:s,occurrences:a,onChange:i,disabled:o})=>{const{formatMessage:x,momentParams:y}=useI18n(),_=useNow2(),E=useUserSettingsIsoWeekStartDay(),R=reactExports.useCallback(L=>i({terminationType:L?null:"date"}),[i]),S=r===null||s===null?"---":hooks(s).format(y.date),j=reactExports.useMemo(()=>range$2(ReminderUtils2.MAX_OCCURRENCE-ReminderUtils2.MIN_OCCURRENCE+1).map(L=>{const D=L+ReminderUtils2.MIN_OCCURRENCE;return{label:x(D===1?"TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences":"TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences.plural",{occurrencesCount:D}),value:D.toString(10)}}),[x]),T=reactExports.useRef(null),A=reactExports.useRef(null),[M,P]=reactExports.useState(!1);return useOutSideClick([T,A],()=>{P(!1)}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_NEVER"})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.option,styles$A.optionAlignEnd),children:jsxRuntimeExports.jsx(Switch,{disabled:o,theme:"new",checked:r===null,onChange:R,hasMargin:!0})})]}),jsxRuntimeExports.jsxs("div",{hidden:r===null,className:cx$6(styles$A.optionsRow,styles$A.radioOption),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioToggleButton,{disabled:o,checked:r==="date",onChange:()=>i({terminationType:"date"}),title:x("TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsOn.radioTitle")}),jsxRuntimeExports.jsx("span",{className:cx$6({[styles$A.radioOptionDisabledText]:r!=="date"}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_ON_DATE"})})]})}),jsxRuntimeExports.jsx("div",{className:cx$6({[styles$A.radioOptionDisabledText]:r!=="date"}),children:jsxRuntimeExports.jsx(SelectButton_,{theme:"modern",ref:T,disabled:r!=="date"||o,value:S,onClick:()=>P(!0)})})]}),jsxRuntimeExports.jsxs("div",{hidden:r===null,className:cx$6(styles$A.optionsRow,styles$A.radioOption),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioToggleButton,{disabled:o,checked:r==="occurrences",onChange:()=>i({terminationType:"occurrences"}),title:x("TaskReminderTooltipRepeatReminderPicker.alertRepeatEndsAfterOccurrences.radioTitle")}),jsxRuntimeExports.jsx("span",{className:cx$6({[styles$A.radioOptionDisabledText]:r!=="occurrences"}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatEndType.REPEAT_END_OCCURRENCES"})})]})}),jsxRuntimeExports.jsx("div",{className:cx$6({[styles$A.radioOptionDisabledText]:r!=="occurrences"}),children:jsxRuntimeExports.jsx(Select,{theme:"modern",value:a==null?void 0:a.toString(10),disabled:r!=="occurrences"||o,onChange:L=>i({occurrences:Number(L)}),options:j})})]}),jsxRuntimeExports.jsx(Tooltip2,{from:T,isVisible:M,position:"top-start",offset:4,animationDelay:0,children:jsxRuntimeExports.jsx("div",{ref:A,className:cx$6(styles$A.rangePickerWrapper,styles$A.itemTooltipInner),onClick:stopPropagation$2,children:jsxRuntimeExports.jsx(DropdownMenu.Content,{children:jsxRuntimeExports.jsx(DateTimePicker2,{now:_,isoWeekStartDay:E,timestamp:s!=null?s:_,blockPastDays:!0,onChange:L=>{i({terminationType:"date",date:L}),P(!1)}})})})})]})},serverDateFormat=filterHelpers.storageFormat;function parseServerDate(r){return new Date(r)}const REPEAT_ICONS={daily:jsxRuntimeExports.jsx(RecurrenceDailyIcon,{}),weekly:jsxRuntimeExports.jsx(RecurrenceWeeklyIcon,{}),monthly:jsxRuntimeExports.jsx(RecurrenceMonthlyIcon,{}),yearly:jsxRuntimeExports.jsx(RecurrenceYearlyIcon,{})},REPEAT_EVERY_MESSAGE_IDS={daily:{singular:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_DAY",plural:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_DAY.plural"},weekly:{singular:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_WEEK",plural:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_WEEK.plural"},monthly:{singular:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_MONTH",plural:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_MONTH.plural"},yearly:{singular:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_YEAR",plural:"TaskReminderTooltipRepeatReminderPicker.alertRepeatInterval.TASK_REPEAT_YEAR.plural"}};function createRecurrenceEntry({type:r,terminationType:s,terminationDate:a,occurrences:i,repeatEvery:o,repeatBy:x,isoWeekStartDay:y,daysOfWeek:_,createInSectionId:E,trigger:R,fieldsToDuplicate:S}){const j={...getTermination({terminationType:s,terminationDate:a!=null?a:null,occurrences:i}),repeatEvery:o,trigger:R,fieldsToDuplicate:S,createInSection:E,timezone:getSystemTimeZone()};switch(r){case"daily":return{...j,type:r};case"weekly":return{...j,type:r,weekStartOn:WeekdayShort[getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(y)],daysOfWeek:_};case"monthly":return{...j,type:r,repeatBy:x};case"yearly":return{...j,type:r};default:throw new UnreachableCaseError(r)}}function getTermination({terminationType:r,terminationDate:s,occurrences:a}){switch(r){case null:return{terminationType:r};case"date":return assertNonNullable(s),{terminationType:r,terminationDate:format(s,serverDateFormat)};case"occurrences":return{terminationType:r,terminationOccurrences:a};default:throw new UnreachableCaseError(r)}}const SvgChevronRighticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m9.2 16.4 4.8-4.8-4.8-4.8"})),optionContent="_optionContent_d5ekl_1",option="_option_d5ekl_1",disabled$1="_disabled_d5ekl_14",optionActive="_optionActive_d5ekl_18",rootOption="_rootOption_d5ekl_22",optionText="_optionText_d5ekl_27",optionTextBold="_optionTextBold_d5ekl_35",startAdornment="_startAdornment_d5ekl_40",itemTooltipInner="_itemTooltipInner_d5ekl_49",submenuContent="_submenuContent_d5ekl_53",checkWrapper="_checkWrapper_d5ekl_61",menuStyles={optionContent,option,disabled:disabled$1,optionActive,rootOption,optionText,optionTextBold,startAdornment,itemTooltipInner,submenuContent,checkWrapper},Submenu=({label:r,isActive:s,onActivate:a,children:i,disabled:o,tooltip:x})=>{const y=reactExports.useRef(null),_=jsxRuntimeExports.jsx(RootOption,{ref:y,isActive:s,onActivate:a,text:r,disabled:o});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[x?jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:x,children:_}):_,jsxRuntimeExports.jsx(Tooltip2,{from:y,isVisible:s,position:PlatformConfig.type===PlatformType.WEB_EXTENSION?"auto-start":"right",offset:4,animationDelay:0,children:jsxRuntimeExports.jsx("div",{onClick:stopPropagation$2,className:menuStyles.itemTooltipInner,children:jsxRuntimeExports.jsx(DropdownMenu.Content,{children:jsxRuntimeExports.jsx(SimpleScrollView,{className:menuStyles.submenuContent,children:i})})})})]})},RootOption=reactExports.forwardRef(({disabled:r,onActivate:s,isActive:a,startAdornment:i,text:o},x)=>{const y=reactExports.useRef(null);return jsxRuntimeExports.jsxs(DropdownMenu.Item,{disabled:r,accessory:r?void 0:jsxRuntimeExports.jsx("span",{className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgChevronRighticon,{})}),ref:x,onMouseEnter:()=>{y.current=setTimeout(()=>{s()},150)},onMouseLeave:()=>{y.current&&clearTimeout(y.current)},onClick:s,className:menuStyles.optionContent,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption,{[menuStyles.optionActive]:a,[menuStyles.disabled]:r}),children:[jsxRuntimeExports.jsx("div",{className:menuStyles.startAdornment,children:i}),jsxRuntimeExports.jsx("div",{className:menuStyles.optionText,children:o})]})}),SvgCheckicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:21,fill:"none",viewBox:"0 0 20 21",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m16 5.75-7.5 8L4 9.25"})),EditTrigger=({boardId:r,trigger:s,onChange:a,disabled:i})=>{const o=reactExports.useId(),x=Recoil_index_20(spaceSelectors.byBoardId(r)),y=(x==null?void 0:x.showCheckboxForCards)===ShowCardCheckboxMode.Everywhere||(x==null?void 0:x.showCheckboxForCards)===ShowCardCheckboxMode.Inside,_=useSyncSectionsByBoard(r),E=s.type==="card_moved_sections"?_==null?void 0:_.find(D=>D.id===s.sectionId[0]):void 0,{sortedTagsList:R}=useSyncTags(r),S=s.type==="card_tag_added"?R.find(D=>D.id===s.tagId[0]):void 0,j=reactExports.useRef(null),T=reactExports.useRef(null),[A,M]=reactExports.useState(!1),[P,L]=reactExports.useState(void 0);return useOutSideClick(reactExports.useMemo(()=>[j,T],[]),reactExports.useCallback(()=>{M(!1),L(void 0)},[])),jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:o,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.new-task-is-created-when"})}),jsxRuntimeExports.jsx(SelectButton_,{disabled:i,ref:j,"aria-describedby":o,theme:"modern",onClick:()=>M(!0),children:(()=>{var D,O;switch(s.type){case"card_due":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.current-task-is-due"});case"card_archived":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-is-archived"});case"card_checked":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-is-checked"});case"card_moved_sections":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-moves-to-section",values:{section:(D=E==null?void 0:E.name)!=null?D:"---"}});case"card_tag_added":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.tag-changed-to-tag",values:{tag:(O=S==null?void 0:S.name)!=null?O:"---"}});default:throw new UnreachableCaseError(s)}})()}),jsxRuntimeExports.jsx(Tooltip2,{from:j,isVisible:A,position:"top-end",offset:4,animationDelay:0,children:jsxRuntimeExports.jsx("div",{ref:T,onClick:stopPropagation$2,children:jsxRuntimeExports.jsxs(DropdownMenu.Content,{children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:s.type==="card_due"?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a({type:"card_due"}),M(!1)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.current-task-is-due"})}),y||s.type==="card_checked"?jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:s.type==="card_checked"?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a({type:"card_checked"}),M(!1)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-is-checked"})}):null,jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:s.type==="card_archived"?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a({type:"card_archived"}),M(!1)},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-is-archived"})}),jsxRuntimeExports.jsx(Submenu,{label:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.tag-changed-to"}),isActive:P==="tags",onActivate:()=>L("tags"),disabled:(R==null?void 0:R.length)===0,tooltip:(R==null?void 0:R.length)===0?jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.no-tags"}):void 0,children:R==null?void 0:R.map(D=>jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:(S==null?void 0:S.id)===D.id?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a({type:"card_tag_added",tagId:[D.id]}),M(!1),L(void 0)},children:D.name},D.id))}),jsxRuntimeExports.jsx(Submenu,{label:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.EditTrigger.task-moves-to"}),isActive:P==="sections",onActivate:()=>L("sections"),children:_==null?void 0:_.map(D=>jsxRuntimeExports.jsx(DropdownMenu.Item,{accessory:(E==null?void 0:E.id)===D.id?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a({type:"card_moved_sections",sectionId:[D.id]}),M(!1),L(void 0)},children:D.name},D.id))})]})})})]})},EditInterval=({interval:r,onChange:s,i18n:{singular:a,plural:i},disabled:o})=>{const{formatMessage:x}=useI18n(),y=reactExports.useId(),_=reactExports.useMemo(()=>range$2(ReminderUtils2.MAX_INTERVAL-ReminderUtils2.MIN_INTERVAL+1).map(E=>(E=E+ReminderUtils2.MIN_INTERVAL,{label:x(E===1?a:i,{interval:E}),value:E.toString(10)})),[x,a,i]);return jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:y,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatInterval"})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.option,styles$A.optionAlignEnd),children:jsxRuntimeExports.jsx(Select,{disabled:o,theme:"modern",id:y,value:r.toString(10),onChange:E=>s(Number(E)),options:_})})]})},EditFieldsToDuplicate=({fieldsToDuplicate:r,onChange:s,disabledFields:a,disabled:i})=>{const o=reactExports.useId(),[x,y]=reactExports.useState(!1),_=reactExports.useRef(null),E=reactExports.useRef(null),R=Object.values(r),S=R.filter(Boolean).length,j=R.length===S,T=Object.values(a).some(Boolean);return useOutSideClick(reactExports.useMemo(()=>[_,E],[]),reactExports.useCallback(()=>{y(!1)},[])),jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:o,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.new-task-will-include"})}),jsxRuntimeExports.jsx(SelectButton_,{disabled:i,ref:_,theme:"modern","aria-describedby":o,onClick:()=>y(!0),children:j?jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.all-data"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.selected",values:{count:S}})}),jsxRuntimeExports.jsx(Tooltip2,{from:_,position:"top-end",isVisible:x,animationDelay:0,children:jsxRuntimeExports.jsx("div",{ref:E,onClick:stopPropagation$2,className:menuStyles.itemTooltipInner,children:jsxRuntimeExports.jsxs(DropdownMenu.Content,{children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{itemClassName:cx$6(menuStyles.rootOption,menuStyles.option,menuStyles.optionTextBold),accessory:j?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,disabled:T,onClick:()=>s({cardAttachment:!j,cardChecklist:!j,note:!j,owners:!j,tags:!j}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.all-data"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a.owners,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption),accessory:r.owners?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>s({...r,owners:!r.owners}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.filters.assignees"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a.tags,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption),accessory:r.tags?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>s({...r,tags:!r.tags}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tags.title"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a.note,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption),accessory:r.note?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>s({...r,note:!r.note}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.note"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a.cardChecklist,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption),accessory:r.cardChecklist?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>s({...r,cardChecklist:!r.cardChecklist}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.checklist"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{disabled:a.cardAttachment,itemClassName:cx$6(menuStyles.option,menuStyles.rootOption),accessory:r.cardAttachment?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>s({...r,cardAttachment:!r.cardAttachment}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskEditPaneDetails.attachments.title"})})]})})})]})},EditSection=({boardId:r,sectionId:s,onChange:a,disabled:i})=>{const o=reactExports.useId(),[x,y]=reactExports.useState(!1),_=reactExports.useRef(null),E=reactExports.useRef(null),R=useSyncSectionsByBoard(r),S=R==null?void 0:R.find(j=>j.id===s);return useOutSideClick(reactExports.useMemo(()=>[_,E],[]),reactExports.useCallback(()=>{y(!1)},[])),jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:o,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.new-task-will-appear-under"})}),jsxRuntimeExports.jsx(SelectButton_,{disabled:i,ref:_,theme:"modern","aria-describedby":o,onClick:()=>y(!0),children:S!==void 0?S.name:"---"}),jsxRuntimeExports.jsx(Tooltip2,{from:_,isVisible:x,position:"top-end",animationDelay:0,children:jsxRuntimeExports.jsx("div",{ref:E,onClick:stopPropagation$2,className:menuStyles.itemTooltipInner,children:jsxRuntimeExports.jsx(DropdownMenu.Content,{children:jsxRuntimeExports.jsx(SimpleScrollView,{className:menuStyles.submenuContent,children:R==null?void 0:R.map(j=>jsxRuntimeExports.jsx(DropdownMenu.Item,{className:menuStyles.rootOption,accessory:j.id===s?jsxRuntimeExports.jsx("div",{className:menuStyles.checkWrapper,children:jsxRuntimeExports.jsx(SvgCheckicon$1,{})}):void 0,onClick:()=>{a(j.id),y(!1)},children:j.name},j.id))})})})})]})},isWeekdayShort=r=>r!==null;function toAlertWeekdays(r){let s="";for(const a of WeekdayShort)s+=r.includes(a)?"1":"0";return s}const EditWeekDays=({days:r,onChange:s,disabled:a})=>{const i=toAlertWeekdays(r);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$A.optionsRow,children:jsxRuntimeExports.jsx("label",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.title.alertRepeatDays"})})}),jsxRuntimeExports.jsx("div",{className:styles$A.optionsRow,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.option,styles$A.optionFullWidth),children:jsxRuntimeExports.jsx(TaskReminderTooltipWeekdays,{disabled:a,alertRepeatDays:i,onAlertRepeatDaysChange:o=>s(o.padEnd(7,"0").split("").map((x,y)=>x==="1"?WeekdayShort[y]:null).filter(isWeekdayShort))})})})]})},EditRepeatMonth=({repeat:r,onChange:s,disabled:a})=>{const{formatMessage:i}=useI18n(),o=useUserSettingsIsoWeekStartDay(),x=WeekdayShort[getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(o)],y=reactExports.useMemo(()=>[...Array.from(new Array(31),(R,S)=>S+1).map(R=>{const S=R;return{label:i("CardRecurrenceModal.repeatBy.dayOfMonth",{day:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.ordinal",values:{value:S}})}),value:S.toString(10)}}),{label:i("CardRecurrenceModal.repeatBy.lastDayOfMonth"),value:"-1"}],[i]),_=reactExports.useMemo(()=>[{label:i("_.first"),value:"1"},{label:i("_.second"),value:"2"},{label:i("_.third"),value:"3"},{label:i("_.fourth"),value:"4"},{label:i("_.last"),value:`${LAST_WEEKDAY_OF_THE_MONTH}`}],[i]),E=reactExports.useMemo(()=>{const R=[],S=hooks().isoWeekday(o);let j=7;do{const T=S.isoWeekday();R.push({label:S.format("dddd"),value:WeekdayShort[getDayIndexOfTaskAlertRepeatDaysByIsoWeekday(T)]}),S.add(1,"day")}while(--j>0);return R},[o]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:cx$6(styles$A.optionsRow,styles$A.radioOption),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioToggleButton,{disabled:a,checked:r.type==="dayOfMonth",onChange:()=>s({type:"dayOfMonth",dayOfMonth:r.type==="dayOfMonth"?r.dayOfMonth:1}),title:i("CardRecurrenceModal.repeatBy.each")}),jsxRuntimeExports.jsx("span",{className:cx$6({[styles$A.radioOptionDisabledText]:r.type!=="dayOfMonth"}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.repeatBy.each"})})]})}),jsxRuntimeExports.jsx("div",{className:cx$6({[styles$A.radioOptionDisabledText]:r.type!=="dayOfMonth"}),children:jsxRuntimeExports.jsx(Select,{theme:"modern",value:r.type==="dayOfMonth"?r.dayOfMonth.toString(10):"1",disabled:r.type!=="dayOfMonth"||a,onChange:R=>s({type:"dayOfMonth",dayOfMonth:Number(R)}),options:y})})]}),jsxRuntimeExports.jsxs("div",{className:cx$6(styles$A.optionsRow,styles$A.radioOption),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx(RadioToggleButton,{disabled:a,checked:r.type==="dayOfWeek",onChange:()=>s({type:"dayOfWeek",dayOfWeek:r.type==="dayOfWeek"?r.dayOfWeek:x,dayOfWeekIndex:r.type==="dayOfWeek"?r.dayOfWeekIndex:1}),title:i("CardRecurrenceModal.repeatBy.onThe")}),jsxRuntimeExports.jsx("span",{className:cx$6({[styles$A.radioOptionDisabledText]:r.type!=="dayOfWeek"}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.repeatBy.onThe"})})]})}),jsxRuntimeExports.jsxs("div",{className:cx$6(styles$A.gap,{[styles$A.radioOptionDisabledText]:r.type!=="dayOfWeek"}),children:[jsxRuntimeExports.jsx(Select,{theme:"modern",value:r.type==="dayOfWeek"?r.dayOfWeekIndex.toString(10):"1",disabled:r.type!=="dayOfWeek"||a,onChange:R=>s({type:"dayOfWeek",dayOfWeek:r.type==="dayOfWeek"?r.dayOfWeek:x,dayOfWeekIndex:Number(R)}),options:_}),jsxRuntimeExports.jsx(Select,{theme:"modern",value:r.type==="dayOfWeek"?r.dayOfWeek:x,disabled:r.type!=="dayOfWeek"||a,onChange:R=>s({type:"dayOfWeek",dayOfWeek:R,dayOfWeekIndex:r.type==="dayOfWeek"?r.dayOfWeekIndex:1}),options:E})]})]})]})},BUTTONS_OPTIONS=["DELETE","OK"],BUTTONS_OPTIONS_PICK_DATE=["CANCEL","OK"],INITIAL_TIME_PICKER_INDEX$2=9*4,CardRecurrenceModal=({dueDate:r,boardId:s,defaultSectionId:a,recurrence:i,onChange:o,onClose:x})=>{const{locale:y,formatMessage:_}=useI18n(),E=useUnmountSignal(),R=useMiniToastNotifications(),{syncSections:S}=useSyncSections(),{sortedTagsList:j}=useSyncTags(s),{dueDate:T,setDueDate:A,recurrenceType:M,setRecurrenceType:P,repeatInterval:L,setRepeatInterval:D,repeatBy:O,setRepeatBy:B,daysOfWeek:N,setDaysOfWeek:F,terminationType:W,terminationDate:V,occurrences:U,setTermination:G,trigger:oe,setTrigger:X,fieldsToDuplicate:ee,setFieldsToDuplicate:ae,createInSectionId:ie,setCreateInSectionId:se}=useRecurrenceState({initialDueDate:r,initialRecurrence:i,defaultSectionId:a}),[Q,Z]=reactExports.useState("recurrence"),{momentParams:J}=useI18n(),te=useUserSettingsIsoWeekStartDay(),[de,ce]=reactExports.useState(!1),me=useSyncCalculateFirstOccurrence(),ve=useNow2(),xe=reactExports.useMemo(()=>ReminderUtils2.getMinimumCustomTimestamp(ve),[ve]),ge=reactExports.useCallback(Ne=>{if(Ne==="OK"){const Be=createRecurrenceEntry({type:M,isoWeekStartDay:te,daysOfWeek:N.length?N:[WeekdayShort[new Date(T.date).getDay()]],repeatEvery:L,repeatBy:O,terminationType:W,terminationDate:V,occurrences:U,createInSectionId:ie,trigger:oe,fieldsToDuplicate:ee});ce(!0),me({dueDate:T,recurrence:Be,signal:E()}).then(({firstOccurrence:Oe})=>{o({dueDate:Oe,recurrence:Be}),x()}).catch(async Oe=>{if(Oe instanceof HttpError&&Oe.status===400){R.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:(await Oe.response.json()).error,autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}});return}AnydoSentry.captureException(Oe),R.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured",values:{newLine:jsxRuntimeExports.jsx("br",{})}}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}).finally(()=>ce(!1))}else o({dueDate:r,recurrence:null}),x()},[me,ie,N,T,ee,E,r,te,R,U,o,x,M,O,L,V,W,oe]),[be,ye]=reactExports.useState(0),Ie=reactExports.useCallback(()=>{ye(0),Z("recurrence")},[]),Pe=reactExports.useCallback(Ne=>{Ne==="OK"?(be>0&&A({date:be,hasTime:!0}),Z("recurrence")):Ie()},[Ie,be,A]),we=(Ne,Be)=>jsxRuntimeExports.jsx(ToggleRectButton,{disabled:de,onChange:()=>P(Ne),checked:Ne===M,title:Be,icon:REPEAT_ICONS[Ne]}),[Re,Se]=reactExports.useState(!1),Ee=reactExports.useCallback(()=>Se(!0),[]),Ce=reactExports.useMemo(()=>{var Be,Oe;const Ne=oe.type;switch(Ne){case"card_due":return jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.time-due"})});case"card_checked":return jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.marked-as-complete"})});case"card_archived":return jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.archived"})});case"card_moved_sections":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.moves-to-section",values:{section:jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:(Be=S.get(oe.sectionId[0]))==null?void 0:Be.name})}});case"card_tag_added":return jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.tag-changed-to",values:{tag:jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:(Oe=j.find(Ue=>Ue.id===oe.tagId[0]))==null?void 0:Oe.name})}});default:throw new UnreachableCaseError(Ne)}},[Ee,S,j,oe]),he=reactExports.useMemo(()=>{if(Object.values(ee).every(Boolean))return jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer.all-data"})});const Ne=new Intl.ListFormat(y,{style:"long"});return jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:Ne.format([ee.owners&&_("CardRecurrenceModal.footer.assignees"),ee.tags&&_("CardRecurrenceModal.footer.tags"),ee.note&&_("CardRecurrenceModal.footer.notes"),ee.cardChecklist&&_("CardRecurrenceModal.footer.checklists"),ee.cardAttachment&&_("CardRecurrenceModal.footer.attachments")].filter(Be=>Be!==!1))})},[ee,_,Ee,y]),Ae=reactExports.useId();return jsxRuntimeExports.jsx("div",{className:styles$A.root,children:jsxRuntimeExports.jsxs(CardMenu$1,{active:Q,children:[jsxRuntimeExports.jsxs(CardMenuTab,{label:"recurrence",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.recurring"}),type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:PlatformConfig.type===PlatformType.WEB_EXTENSION?x:void 0}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>{var Ne;return jsxRuntimeExports.jsx(SimpleScrollView,{className:styles$A.maxHeightViewport,children:jsxRuntimeExports.jsx(UnsafeHeightTransition,{children:jsxRuntimeExports.jsxs("div",{className:styles$A.cardBody,children:[jsxRuntimeExports.jsxs("div",{className:styles$A.repeatingMethod,children:[we("daily",jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.repeatingMethod.TASK_REPEAT_DAY"})),we("weekly",jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.repeatingMethod.TASK_REPEAT_WEEK"})),we("monthly",jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.repeatingMethod.TASK_REPEAT_MONTH"})),we("yearly",jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskReminderTooltipRepeatReminderPicker.repeatingMethod.TASK_REPEAT_YEAR"}))]}),jsxRuntimeExports.jsxs("div",{className:styles$A.options,children:[M==="yearly"?jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:Ae,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.due-time"})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.option,styles$A.optionAlignEnd),children:jsxRuntimeExports.jsx(SelectButton_,{disabled:de,theme:"modern",onClick:()=>{Z("set-date")},children:hooks(T.date).format(`${J.date} ${J.time}`)})})]}):jsxRuntimeExports.jsxs("div",{className:styles$A.optionsRow,children:[jsxRuntimeExports.jsx("label",{htmlFor:Ae,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.due-time"})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.option,styles$A.optionAlignEnd),children:jsxRuntimeExports.jsx(BareTimePicker_,{isInitialValue:!(T!=null&&T.hasTime),initialItemScrollIndex:INITIAL_TIME_PICKER_INDEX$2,timestamp:T.date,align:"right",renderPicker:(Be,Oe,Ue,Ve,We)=>jsxRuntimeExports.jsx(SelectButton_,{disabled:de,ref:Oe,theme:"modern",className:styles$A.timeSelect,"aria-describedby":Ae,onClick:()=>Ve?Ve():We==null?void 0:We(),children:hooks(T.date).format(J.time)}),onChange:Be=>{A({date:Be.timestamp,hasTime:!0})}})})]}),jsxRuntimeExports.jsx(EditInterval,{disabled:de,interval:L,onChange:D,i18n:REPEAT_EVERY_MESSAGE_IDS[M]}),M==="weekly"?jsxRuntimeExports.jsx(EditWeekDays,{disabled:de,days:N,onChange:F}):null,M==="monthly"?jsxRuntimeExports.jsx(EditRepeatMonth,{disabled:de,repeat:O,onChange:B}):null,jsxRuntimeExports.jsx(EditTermination,{disabled:de,terminationType:W,terminationDate:V,occurrences:U,onChange:G})]}),Re?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(EditTrigger,{disabled:de,boardId:s,trigger:oe,onChange:X}),jsxRuntimeExports.jsx(EditSection,{disabled:de,boardId:s,sectionId:ie,onChange:se}),jsxRuntimeExports.jsx(EditFieldsToDuplicate,{disabled:de,fieldsToDuplicate:ee,onChange:ae,disabledFields:{tags:oe.type==="card_tag_added"}})]}):jsxRuntimeExports.jsx("div",{className:styles$A.footer,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardRecurrenceModal.footer",values:{section:jsxRuntimeExports.jsx("span",{className:styles$A.footerHighlight,onClick:Ee,children:(Ne=S.get(ie))==null?void 0:Ne.name}),trigger:Ce,fieldsToDuplicate:he}})})]})})})}}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:BUTTONS_OPTIONS,onClick:ge,renderButton:Ne=>Ne==="OK"?jsxRuntimeExports.jsx("div",{className:cx$6(styles$A.setButton,{[styles$A.loading]:de}),children:de?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.set"})}):jsxRuntimeExports.jsx(FormattedMessage,{id:i!==null?"_.buttons.reset":"_.buttons.cancel"})})]}),jsxRuntimeExports.jsxs(CardMenuTab,{label:"set-date",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:"",accessory:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"black",onClick:Ie,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>{const Ne=Math.max(be,xe);return jsxRuntimeExports.jsx(DateTimePicker2,{blockPastDays:!0,hasTextFields:!0,canSetTime:!0,isoWeekStartDay:te,now:xe,onChange:ye,timestamp:Ne})}}),jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:BUTTONS_OPTIONS_PICK_DATE,onClick:Pe,renderButton:Ne=>Ne==="OK"?jsxRuntimeExports.jsx("div",{className:"InlineRemindersPickDateMenu__setButton",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.ok"})}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"})})]})]})})};function recurrenceReducer(r,s){const a=s.type;switch(a){case"SET_DUE_DATE":{const i={...r,dueDate:s.dueDate};return{...i,terminationDate:calculateTerminationDate({now:s.now,...i})}}case"SET_RECURRENCE_TYPE":{const i={...r,recurrenceType:s.recurrenceType};return{...i,terminationDate:calculateTerminationDate({now:s.now,...i})}}case"SET_REPEAT_INTERVAL":{const i={...r,repeatInterval:s.interval};return{...i,terminationDate:calculateTerminationDate({now:s.now,...i})}}case"SET_REPEAT_BY":{const i={...r,repeatBy:s.repeatBy};return{...i,terminationDate:calculateTerminationDate({now:s.now,...i})}}case"SET_TERMINATION":{const i={};s.terminationType!==void 0&&(i.terminationType=s.terminationType),s.date!==void 0&&(i.terminationDate=s.date),s.occurrences!==void 0&&(i.occurrences=s.occurrences);const o={...r,...i};return{...o,terminationDate:s.date!==void 0?s.date:calculateTerminationDate({now:s.now,...o})}}case"SET_DAYS_OF_WEEK":return{...r,daysOfWeek:s.daysOfWeek};case"SET_TRIGGER":{const i=s.trigger.type==="card_tag_added"?{...r.fieldsToDuplicate,tags:!1}:r.fieldsToDuplicate;return{...r,trigger:s.trigger,fieldsToDuplicate:i}}case"SET_FIELDS_TO_DUPLICATE":return{...r,fieldsToDuplicate:{...r.fieldsToDuplicate,...s.fieldsToDuplicate}};case"SET_CREATE_IN_SECTION":return{...r,createInSectionId:s.sectionId};default:throw new UnreachableCaseError(a)}}function useRecurrenceState({defaultSectionId:r,initialDueDate:s,initialRecurrence:a}){const[{dueDate:i,recurrenceType:o,repeatInterval:x,repeatBy:y,daysOfWeek:_,terminationType:E,terminationDate:R,occurrences:S,trigger:j,fieldsToDuplicate:T,createInSectionId:A},M]=reactExports.useReducer(recurrenceReducer,{initialDueDate:s,initialRecurrence:a},({initialDueDate:P,initialRecurrence:L})=>{var U,G,oe,X,ee;const D=new Date,O=getDueDate(P),B=(U=L==null?void 0:L.type)!=null?U:"daily",N=(G=L==null?void 0:L.repeatEvery)!=null?G:1,F=(L==null?void 0:L.type)==="monthly"?L.repeatBy:{type:"dayOfMonth",dayOfMonth:new Date(O.date).getDate()},W=(oe=L==null?void 0:L.terminationType)!=null?oe:null,V=(L==null?void 0:L.terminationType)==="occurrences"?L.terminationOccurrences:1;return{dueDate:O,recurrenceType:B,repeatInterval:N,repeatBy:F,daysOfWeek:(L==null?void 0:L.type)==="weekly"?L.daysOfWeek:[],terminationType:W,occurrences:V,terminationDate:calculateTerminationDate({now:D,dueDate:O,terminationType:W,terminationDate:(L==null?void 0:L.terminationType)==="date"?parseServerDate(L.terminationDate).valueOf():null,occurrences:V,recurrenceType:B,repeatInterval:N,repeatBy:F}),trigger:(X=L==null?void 0:L.trigger)!=null?X:{type:"card_due"},fieldsToDuplicate:L?{...initialFieldsToDuplicate,...L.fieldsToDuplicate}:initialFieldsToDuplicate,createInSectionId:(ee=L==null?void 0:L.createInSection)!=null?ee:r}});return{dueDate:i,setDueDate:reactExports.useCallback(P=>M({type:"SET_DUE_DATE",dueDate:P,now:new Date}),[]),recurrenceType:o,setRecurrenceType:reactExports.useCallback(P=>M({type:"SET_RECURRENCE_TYPE",recurrenceType:P,now:new Date}),[]),repeatInterval:x,setRepeatInterval:reactExports.useCallback(P=>M({type:"SET_REPEAT_INTERVAL",interval:P,now:new Date}),[]),repeatBy:y,setRepeatBy:reactExports.useCallback(P=>M({type:"SET_REPEAT_BY",repeatBy:P,now:new Date}),[]),daysOfWeek:_,setDaysOfWeek:reactExports.useCallback(P=>M({type:"SET_DAYS_OF_WEEK",daysOfWeek:P}),[]),terminationType:E,terminationDate:R,occurrences:S,setTermination:reactExports.useCallback(P=>M({type:"SET_TERMINATION",...P,now:new Date}),[]),trigger:j,setTrigger:reactExports.useCallback(P=>M({type:"SET_TRIGGER",trigger:P}),[]),fieldsToDuplicate:T,setFieldsToDuplicate:reactExports.useCallback(P=>M({type:"SET_FIELDS_TO_DUPLICATE",fieldsToDuplicate:P}),[]),createInSectionId:A,setCreateInSectionId:reactExports.useCallback(P=>M({type:"SET_CREATE_IN_SECTION",sectionId:P}),[])}}function getDueDate(r){if(!r){const s=hooks();return s.hour()<23?s.add(1,"hour").minute(0).second(0).millisecond(0):s.add(1,"day").hour(0).minute(0).second(0).millisecond(0),{date:s.valueOf(),hasTime:!0}}return r.hasTime?r:{date:hooks(r.date).hour(9).minute(0).second(0).millisecond(0).valueOf(),hasTime:!0}}const CardRecurrenceText=({dueDate:r,recurrence:s})=>{const a=useI18n(),i=useUserSettingsIsoWeekStartDay(),o=hooks(r.date),x=getValidTaskAlertRepeatInterval(s.repeatEvery),y=s.type;switch(y){case"daily":return jsxRuntimeExports.jsx(FormattedMessage,{id:x===1?"CardRecurrenceText.daily":"CardRecurrenceText.daily.plural",values:{interval:x,time:o.format(a.momentParams.time)}});case"weekly":return jsxRuntimeExports.jsx(FormattedMessage,{id:x===1?"CardRecurrenceText.weekly":"CardRecurrenceText.weekly.plural",values:{interval:x,isoWeekdays:jsxRuntimeExports.jsx(TaskAlertRepeatDays_memo,{isoWeekStartDay:i,value:toAlertWeekdays(s.type==="weekly"?s.daysOfWeek:[])}),time:o.format(a.momentParams.time)}});case"monthly":switch(s.repeatBy.type){case"dayOfWeek":const _=s.repeatBy.dayOfWeekIndex,E=["_.last","_.first","_.second","_.third","_.fourth"],R=jsxRuntimeExports.jsx(FormattedMessage,{id:_===-1?E[0]:E[_]});return jsxRuntimeExports.jsx(FormattedMessage,{id:x===1?"CardRecurrenceText.monthly.onDay":"CardRecurrenceText.monthly.onDay.plural",values:{interval:x,weekNumberText:R,weekday:hooks().isoWeekday(WeekdayShort.indexOf(s.repeatBy.dayOfWeek)).format(a.momentParams.weekday),time:o.format(a.momentParams.time)}});case"dayOfMonth":default:return jsxRuntimeExports.jsx(FormattedMessage,{id:x===1?"CardRecurrenceText.monthly.onDate":"CardRecurrenceText.monthly.onDate.plural",values:{interval:x,day:s.repeatBy.dayOfMonth===-1?"last day":jsxRuntimeExports.jsx(FormattedMessage,{id:"_.ordinal",values:{value:s.repeatBy.dayOfMonth}}),time:o.format(a.momentParams.time)}})}case"yearly":return jsxRuntimeExports.jsx(FormattedMessage,{id:x===1?"CardRecurrenceText.yearly":"CardRecurrenceText.yearly.plural",values:{interval:x,date:o.format(`${a.momentParams.date} ${a.momentParams.time}`)}});default:throw new UnreachableCaseError(y)}},SvgRecurrenceicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m17 2.102 4 4-4 4"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M3 12.2v-2a4 4 0 0 1 4-4h12.8M7 21.9l-4-4 4-4"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M21.001 11.8v2a4 4 0 0 1-4 4h-12.8"})),CardRecurrenceInline=({dueDate:r,boardId:s,defaultSectionId:a,recurrence:i,onChange:o})=>{const[y,_]=reactExports.useState(!1),E=reactExports.useCallback(()=>_(!1),[]);return jsxRuntimeExports.jsxs("div",{onWheel:stopPropagation$2,children:[jsxRuntimeExports.jsx(ButtonInlineText,{disabled:!1,theme:"plain",onClick:()=>_(!0),accessory:jsxRuntimeExports.jsx(SvgRecurrenceicon,{}),children:r&&i?jsxRuntimeExports.jsx(CardRecurrenceText,{dueDate:r,recurrence:i}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.reminders.recurring"})}),jsxRuntimeExports.jsx(BackdropModal,{isVisible:y,onClose:E,children:jsxRuntimeExports.jsx(CardRecurrenceModal,{boardId:s,defaultSectionId:a,dueDate:r,recurrence:i,onClose:E,onChange:o})})]})},INITIAL_TIME_PICKER_INDEX$1=9*4,CardDueDate$2=React$6.forwardRef(function r({dueDate:s,now:a,recurrence:i,onChange:o,userReminders:x,...y},_){const{momentParams:E,formatMessage:R}=useI18n(),S=React$6.useMemo(()=>hooks(a).startOf("day").toDate().getTime(),[a]),[j,T]=React$6.useState(!1),A=x!==void 0;React$6.useImperativeHandle(_,()=>({destroy:()=>T(!0)}));const M=React$6.useCallback(()=>{o({dueDate:null,recurrence:null,userReminders:[]})},[o]),P=React$6.useCallback(()=>{s&&o({dueDate:{date:s.date,hasTime:!1},recurrence:null,userReminders:[]})},[s,o]),L=React$6.useMemo(()=>s!=null&&s.hasTime?"hasTime":"fullDay",[s==null?void 0:s.hasTime]),D=React$6.useMemo(()=>{const V=new Date;return(x||[]).filter(U=>getReminderValue(U).constraint===L).sort((U,G)=>userReminderHelpers.sortRemindersAsc(U,G,V))},[L,x]),O=React$6.useCallback(V=>{o({dueDate:s!=null&&s.date?s:{date:S,hasTime:!1},recurrence:i,userReminders:[...x!=null?x:[],V]})},[S,s,o,i,x]),B=React$6.useCallback(V=>{o({dueDate:s,recurrence:i,userReminders:(x||[]).filter(U=>U.id!==V.id)})},[s,o,i,x]),N=React$6.useCallback((V,U)=>{o({dueDate:s,recurrence:i,userReminders:(x||[]).map(G=>G.id===V.id?U:G)})},[s,o,i,x]),F=React$6.useCallback(V=>{o({...V,userReminders:x!=null?x:[]})},[o,x]),W=React$6.useCallback(()=>{o({dueDate:s,recurrence:null,userReminders:x!=null?x:[]})},[s,o,x]);return jsxRuntimeExports.jsxs("div",{className:styles$C.modal,children:[jsxRuntimeExports.jsx(DateTimePicker2,{className:styles$C.datePicker,timestamp:(s==null?void 0:s.date)||void 0,isoWeekStartDay:E.isoWeekStartDay,now:a,readonly:i!==null,onChange:V=>{var U;o({dueDate:{date:V,hasTime:(U=s==null?void 0:s.hasTime)!=null?U:!1},recurrence:i,userReminders:x!=null?x:[]})}}),i===null?jsxRuntimeExports.jsxs("div",{className:cx$6(styles$C.timePicker,{[styles$C.active]:s==null?void 0:s.hasTime}),onWheel:stopPropagation$2,children:[jsxRuntimeExports.jsx(BareTimePicker_,{className:CARD_CLICK_IGNORE_CLASSNAME,disabled:j,isInitialValue:!(s!=null&&s.hasTime),initialItemScrollIndex:INITIAL_TIME_PICKER_INDEX$1,timestamp:(s==null?void 0:s.date)===void 0?S:s==null?void 0:s.date,renderPicker:(V,U,G,oe,X)=>jsxRuntimeExports.jsx(ButtonInlineText,{ref:U,accessory:jsxRuntimeExports.jsx(SvgClockicon,{}),theme:"plain",onClick:oe||X,children:s!=null&&s.hasTime?hooks(s.date).format(E.timePicker):R("CardDueDate.time-picker")}),onChange:V=>{o({dueDate:{date:V.timestamp,hasTime:!0},recurrence:i,userReminders:s&&!(s!=null&&s.hasTime)?[]:x!=null?x:[]})}}),(s==null?void 0:s.hasTime)&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:P,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]}):null,A&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[D.map(V=>jsxRuntimeExports.jsxs("div",{className:styles$C.timePicker,children:[jsxRuntimeExports.jsx(ReminderPicker,{dueDate:s,now:a,value:V,existingReminders:D,onChange:U=>N(V,U),type:L}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:()=>B(V),children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]},V.id)),D.length<CARD_REMINDER_MAX_COUNT?jsxRuntimeExports.jsx("div",{className:styles$C.timePicker,children:jsxRuntimeExports.jsx(ReminderPicker,{dueDate:s,now:a,value:null,existingReminders:D,onChange:V=>O(V),type:L})}):null]}),y.allowRecurrenceConfig===void 0||y.allowRecurrenceConfig&&jsxRuntimeExports.jsxs("div",{className:cx$6(styles$C.timePicker,{[styles$C.active]:i!==null}),children:[jsxRuntimeExports.jsx(CardRecurrenceInline,{dueDate:s,boardId:y.boardId,defaultSectionId:y.defaultSectionId,recurrence:i,onChange:F}),i!==null&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:W,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]}),s&&jsxRuntimeExports.jsx("div",{className:styles$C.footer,children:jsxRuntimeExports.jsx(ButtonInlineText,{onClick:M,theme:"plain",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardDueDate.clearAll"})})})]})}),CardDueDate_memo$1=React$6.memo(CardDueDate$2),INITIAL_TIME_PICKER_INDEX=9*4,CardDueDate$1=React$6.forwardRef(function r({dueDate:s,now:a,recurrence:i,onChange:o,userReminders:x,onClose:y,..._},E){const{momentParams:R,formatMessage:S}=useI18n(),j=React$6.useMemo(()=>hooks(a).startOf("day").toDate().getTime(),[a]),[T,A]=React$6.useState(!1),M=x!==void 0;React$6.useImperativeHandle(E,()=>({destroy:()=>A(!0)}));const P=React$6.useCallback(()=>{o({dueDate:null,recurrence:null,userReminders:[]})},[o]),L=React$6.useCallback(()=>{s&&o({dueDate:{date:s.date,hasTime:!1},recurrence:null,userReminders:[]})},[s,o]),D=React$6.useMemo(()=>s!=null&&s.hasTime?"hasTime":"fullDay",[s==null?void 0:s.hasTime]),O=React$6.useMemo(()=>{const U=new Date;return(x||[]).filter(G=>getReminderValue(G).constraint===D).sort((G,oe)=>userReminderHelpers.sortRemindersAsc(G,oe,U))},[D,x]),B=React$6.useCallback(U=>{o({dueDate:s!=null&&s.date?s:{date:j,hasTime:!1},recurrence:i,userReminders:[...x!=null?x:[],U]})},[j,s,o,i,x]),N=React$6.useCallback(U=>{o({dueDate:s,recurrence:i,userReminders:(x||[]).filter(G=>G.id!==U.id)})},[s,o,i,x]),F=React$6.useCallback((U,G)=>{o({dueDate:s,recurrence:i,userReminders:(x||[]).map(oe=>oe.id===U.id?G:oe)})},[s,o,i,x]),W=React$6.useCallback(U=>{o({...U,userReminders:x!=null?x:[]})},[o,x]),V=React$6.useCallback(()=>{o({dueDate:s,recurrence:null,userReminders:x!=null?x:[]})},[s,o,x]);return jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.dueDate"}),type:CardMenuHeaderTabItemType.BACK,onClick:y}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DateTimePicker2,{className:styles$C.datePicker,timestamp:(s==null?void 0:s.date)||void 0,isoWeekStartDay:R.isoWeekStartDay,now:a,readonly:i!==null,onChange:U=>{var G;o({dueDate:{date:U,hasTime:(G=s==null?void 0:s.hasTime)!=null?G:!1},recurrence:i,userReminders:x!=null?x:[]})}}),i===null?jsxRuntimeExports.jsxs("div",{className:cx$6(styles$C.timePicker,{[styles$C.active]:s==null?void 0:s.hasTime}),onWheel:stopPropagation$2,children:[jsxRuntimeExports.jsx(BareTimePicker_,{className:CARD_CLICK_IGNORE_CLASSNAME,disabled:T,isInitialValue:!(s!=null&&s.hasTime),initialItemScrollIndex:INITIAL_TIME_PICKER_INDEX,timestamp:(s==null?void 0:s.date)===void 0?j:s==null?void 0:s.date,renderPicker:(U,G,oe,X,ee)=>jsxRuntimeExports.jsx(ButtonInlineText,{ref:G,accessory:jsxRuntimeExports.jsx(SvgClockicon,{}),theme:"plain",onClick:X||ee,children:s!=null&&s.hasTime?hooks(s.date).format(R.timePicker):S("CardDueDate.time-picker")}),onChange:U=>{o({dueDate:{date:U.timestamp,hasTime:!0},recurrence:i,userReminders:s&&!(s!=null&&s.hasTime)?[]:x!=null?x:[]})}}),(s==null?void 0:s.hasTime)&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:L,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]}):null,M&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[O.map(U=>jsxRuntimeExports.jsxs("div",{className:styles$C.timePicker,children:[jsxRuntimeExports.jsx(ReminderPicker,{dueDate:s,now:a,value:U,existingReminders:O,onChange:G=>F(U,G),type:D}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:()=>N(U),children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]},U.id)),O.length<CARD_REMINDER_MAX_COUNT?jsxRuntimeExports.jsx("div",{className:styles$C.timePicker,children:jsxRuntimeExports.jsx(ReminderPicker,{dueDate:s,now:a,value:null,existingReminders:O,onChange:U=>B(U),type:D})}):null]}),_.allowRecurrenceConfig===void 0||_.allowRecurrenceConfig&&jsxRuntimeExports.jsxs("div",{className:cx$6(styles$C.timePicker,{[styles$C.active]:i!==null}),children:[jsxRuntimeExports.jsx(CardRecurrenceInline,{dueDate:s,boardId:_.boardId,defaultSectionId:_.defaultSectionId,recurrence:i,onChange:W}),i!==null&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:V,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]})]})}),s&&jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["clear"],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"CardDueDate.clearAll"}),onClick:()=>P()})]})})}),CardDueDate_memo=React$6.memo(function r(s){return useMatchMedia("(min-width: 480px)")?jsxRuntimeExports.jsx(CardDueDate_memo$1,{...s}):jsxRuntimeExports.jsx(CardDueDate$1,{...s})}),button$3="_button_7qpy8_1",overdue="_overdue_7qpy8_14",styles$z={button:button$3,overdue},CardIndicatorDueDate=({buttonClassName:r,cardId:s,dueDate:a,now:i,onDueDateOpen:o,onChange:x,isEditable:y,disabled:_,userReminders:E,showPassedDueDateAsOverdue:R,recurrence:S,allowRecurrenceConfig:j,emptyContent:T})=>{const{momentParams:A}=useI18n(),[M,P]=React$6.useState(!1),L=React$6.useRef(null),D=React$6.useRef(null),O=React$6.useRef(null),{syncSections:B}=useSyncSections(),N=useSyncCardById(s),F=(N==null?void 0:N.sectionId)!==void 0?B.get(N.sectionId):void 0,W=React$6.useMemo(()=>{if(N!=null&&N.isChecked||(a==null?void 0:a.date)===void 0)return!1;const Q=startOfDay(i);return isBefore(a.date,Q)},[N==null?void 0:N.isChecked,a==null?void 0:a.date,i]),V=React$6.useMemo(()=>a===null||!R?!1:W,[a,W,R]),[U,G,oe]=React$6.useMemo(()=>{if(a===null)return[null,null,null];const Q=hooks(a.date);return[Q.format(A.time),Q.format(A.dateShort),Q.toString()]},[a,A]),X=React$6.useCallback(()=>{P(!0),o==null||o()},[o]),ee=React$6.useCallback(()=>{P(!1)},[]),ae=React$6.useCallback(()=>{var Q;(Q=O.current)==null||Q.destroy(),P(!1)},[]);useOutSideEvent(["click","pointerdown"],React$6.useMemo(()=>[L,D],[]),ae),React$6.useEffect(()=>{_&&ae()},[_,ae]);const ie=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),ae],se=j!==!1&&F!==void 0&&N!==null?{boardId:F.boardId,defaultSectionId:N.sectionId,recurrence:S,allowRecurrenceConfig:!0}:{recurrence:null,allowRecurrenceConfig:!1};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{ref:L,disabled:!y,className:cx$6(styles$z.button,CARD_CLICK_IGNORE_CLASSNAME,r),onClick:M?ee:X,type:"button",children:oe===null||a===null?T?T({isCalendarVisible:M}):null:jsxRuntimeExports.jsx("time",{dateTime:oe,children:V?jsxRuntimeExports.jsx("span",{className:styles$z.overdue,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.dueDate.overdue"})}):jsxRuntimeExports.jsxs("span",{className:W?styles$z.overdue:void 0,children:[G," ",a.hasTime?` ${U}`:""]})})}),jsxRuntimeExports.jsx(Tooltip2,{isVisible:M,from:L,position:"auto-end",children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[ie],children:jsxRuntimeExports.jsx("div",{ref:D,className:CARD_CLICK_IGNORE_CLASSNAME,children:x!==void 0&&jsxRuntimeExports.jsx(CardDueDate_memo,{...se,ref:O,now:i,dueDate:a,userReminders:E,recurrence:S,onChange:x})})})})]})},CardIndicatorDueDate_memo=React$6.memo(CardIndicatorDueDate),wrapper$6="_wrapper_evyl3_1",row$1="_row_evyl3_5",group="_group_evyl3_21",assignees$2="_assignees_evyl3_47",icon$6="_icon_evyl3_52",count$1="_count_evyl3_65",countIcon$1="_countIcon_evyl3_76",attachmentsIcon$1="_attachmentsIcon_evyl3_80",animatedAttachmentsIcon$1="_animatedAttachmentsIcon_evyl3_84",checklistsIcon="_checklistsIcon_evyl3_88",checklistProgress="_checklistProgress_evyl3_99",styles$y={wrapper:wrapper$6,row:row$1,group,assignees:assignees$2,icon:icon$6,count:count$1,countIcon:countIcon$1,attachmentsIcon:attachmentsIcon$1,animatedAttachmentsIcon:animatedAttachmentsIcon$1,"ani-fill-icon":"_ani-fill-icon_evyl3_1",checklistsIcon,checklistProgress};function useCardFutureReminders({dueDate:r,userReminders:s,now:a}){return reactExports.useMemo(()=>{if(!r||!s)return[];const i=r.hasTime?"hasTime":"fullDay";return s==null?void 0:s.filter(o=>getReminderValue(o).constraint===i&&!userReminderHelpers.isReminderOverdue(o,new Date(r.date),a)).sort((o,x)=>userReminderHelpers.sortRemindersAsc(o,x,a))},[r,a,s])}const row="_row_6po7q_1",styles$x={row};function CardRemindersTooltip({reminders:r,children:s}){const{formatMessage:a}=useI18n();return jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r.map(i=>jsxRuntimeExports.jsx("div",{className:styles$x.row,children:a(`_.reminders.card.${i.type==="preset"?i.value:"_.reminders.card.custom"}`)},i.id))}),children:s})}const ChecklistProgress=({cardId:r})=>{const s=Recoil_index_20(cardChecklistSelectors.withItemsByCardId(r)),{completed:a,total:i}=reactExports.useMemo(()=>{let o=0,x=0;for(const y of s)for(const _ of y.items)_.status!==CardCheckListItemStatus.DELETED&&(o+=1),_.status===CardCheckListItemStatus.CHECKED&&(x+=1);return{total:o,completed:x}},[s]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[a,"/",i]})},ANIMATION_DURATION$1=1e3,FULL_ANIMIATION_DURATION$1=2e3,CardIndicators=({model:r,isEditable:s,className:a,cardOnHoverClassName:i,disabled:o,openActivity:x,uploadProgress:y,showPassedDueDateAsOverdue:_})=>{const{id:E,sectionId:R,dueDate:S,owners:j,unreadChatMentionCount:T,hasUnreadActivity:A,userReminders:M}=r,P=useSyncUpdateCards(),{track:L}=useAnalytics(),D=Recoil_index_20(cardAttachmentSelectors.countByCardId(E)),O=Recoil_index_20(cardChecklistSelectors.countByCardId(E)),B=React$6.useCallback(({dueDate:ie,recurrence:se,userReminders:Q})=>{P([{id:E,key:"dueDate",value:ie?cardRecordDueDateToString(ie):null},{id:E,key:"recurrence",value:se},{id:E,key:"userReminders",value:Q}])},[E,P]),N=React$6.useCallback(ie=>{L("card_assignee_added",{extra_str1:E,extra_double1:ie.length}),P([{id:E,key:"owners",value:ie}])},[E,L,P]),F=React$6.useCallback(ie=>{ie.stopPropagation(),x()},[x]),W=React$6.useCallback(()=>{L("card_time_date_picker_tapped",{extra_str1:E})},[L,E]),V=React$6.useMemo(()=>S?cardDueDateFromString(S):null,[S]),U=useNow2(),G=useCardFutureReminders({dueDate:V,userReminders:M!=null?M:EMPTY$2,now:U}),[oe,X]=React$6.useState(!1),ee=React$6.useRef(0),ae=React$6.useRef();return React$6.useEffect(()=>{y!==void 0&&(ae.current&&clearTimeout(ae.current),X(!0),ee.current=ee.current||new Date().valueOf(),ae.current=setTimeout(()=>{X(!1)},5e3))},[y]),React$6.useEffect(()=>{if(D>0&&oe&&y===void 0){let ie=0;if(ee.current){const se=new Date().valueOf()-ee.current;ie+=ANIMATION_DURATION$1-se%ANIMATION_DURATION$1,((se+ie)%FULL_ANIMIATION_DURATION$1===0||(se+ie)%FULL_ANIMIATION_DURATION$1>ANIMATION_DURATION$1)&&(ie+=ANIMATION_DURATION$1)}setTimeout(()=>{X(!1),ee.current=0},ie)}},[oe,D,y]),jsxRuntimeExports.jsx("div",{className:cx$6(styles$y.wrapper,a),children:jsxRuntimeExports.jsxs("div",{className:styles$y.row,children:[jsxRuntimeExports.jsxs("div",{className:styles$y.group,children:[V&&jsxRuntimeExports.jsx(CardIndicatorDueDate_memo,{isEditable:s,dueDate:V,now:Date.now(),onDueDateOpen:W,onChange:B,disabled:o,userReminders:r.userReminders,showPassedDueDateAsOverdue:_,cardId:r.id,recurrence:r.recurrence}),V&&r.recurrence&&jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:jsxRuntimeExports.jsx(CardRecurrenceText,{dueDate:V,recurrence:r.recurrence}),children:jsxRuntimeExports.jsx("span",{className:styles$y.icon,children:jsxRuntimeExports.jsx(SvgRecurrenceicon,{})})}),D>0||oe||y!==void 0?jsxRuntimeExports.jsx("span",{className:styles$y.count,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$y.countIcon,styles$y.attachmentsIcon,{[styles$y.animatedAttachmentsIcon]:oe||y!==void 0}),children:jsxRuntimeExports.jsx(SvgAttachmentsicon,{})})}):null,O!==0&&jsxRuntimeExports.jsxs("span",{className:styles$y.count,children:[jsxRuntimeExports.jsx("span",{className:cx$6(styles$y.countIcon,styles$y.checklistsIcon),children:jsxRuntimeExports.jsx(SvgChecklistsicon,{})}),jsxRuntimeExports.jsx("span",{className:styles$y.checklistProgress,children:jsxRuntimeExports.jsx(ChecklistProgress,{cardId:E})})]}),G.length?jsxRuntimeExports.jsx(CardRemindersTooltip,{reminders:G,children:jsxRuntimeExports.jsx("span",{className:styles$y.count,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$y.countIcon),children:jsxRuntimeExports.jsx(SvgRemindericon$1,{})})})}):null,T?jsxRuntimeExports.jsx("button",{className:styles$y.count,onClick:F,children:jsxRuntimeExports.jsx(UnreadCountIndicator,{count:T})}):A&&jsxRuntimeExports.jsx("button",{className:styles$y.count,onClick:F,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$y.countIcon),children:jsxRuntimeExports.jsx(SvgChaticon$1,{})})})]}),j!=null&&j.length?jsxRuntimeExports.jsx("div",{className:styles$y.assignees,children:jsxRuntimeExports.jsx(CardIndicatorAssignees_memo,{withAssignButton:!0,cardOnHoverClassName:i,isEditable:s,owners:j!=null?j:EMPTY$2,sectionId:R,onChange:N,maxMembers:6})}):null]})})},CardIndicators_memo=React$6.memo(CardIndicators),SvgPinicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m14.873 16.032 4.87-4.468.19.19a.8.8 0 0 0 1.13-1.131l-.14-.142L13.85 3.41l-.141-.141a.8.8 0 0 0-1.132 1.13l.196.196-4.446 4.892-3.551 1.188a1 1 0 0 0-.39 1.656l3.1 3.1-3.677 3.677a.8.8 0 0 0 1.131 1.131l3.677-3.677 3.392 3.391a1 1 0 0 0 1.653-.383l1.21-3.538Zm-.967-10.304 4.703 4.703-5.118 4.697-1.03 3.013-6.258-6.257 3.029-1.012 4.674-5.144Z",clipRule:"evenodd"})),SvgUnpinicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.064 10.623a.8.8 0 1 1-1.132 1.13l-.19-.19-2.133 1.958-1.133-1.133 2.133-1.957-4.703-4.703L11.96 7.87l-1.133-1.133 1.948-2.143-.196-.195a.8.8 0 1 1 1.132-1.131l7.354 7.354Zm-4.93 4.251-1.261 1.158-1.21 3.538a1 1 0 0 1-1.653.383l-3.392-3.39-3.676 3.676a.8.8 0 0 1-1.132-1.131l3.677-3.677-3.1-3.1a1 1 0 0 1 .39-1.656l3.551-1.188L9.48 8.22l1.132 1.132-1.38 1.52-3.03 1.012 6.258 6.257 1.03-3.013 1.512-1.386 1.132 1.132Z",clipRule:"evenodd"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6,d:"M3.131 3 21 20.869"})),SvgMoveSectionicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M6.8 12.6H16M11.4 8l4.6 4.6-4.6 4.6"})),BoardAndSectionPickerMenu=({onChange:r,onClose:s,spaceId:a,firstBoardId:i})=>{var A;const{sections:o}=useSyncSections(),{formatMessage:x}=useI18n(),[y,_]=reactExports.useState(null),[E,R]=reactExports.useState(null),S=y?1:0,j=y?(A=o.get(y))!=null?A:[]:[],T=!1;return jsxRuntimeExports.jsx("div",{className:cx$6("CategoryPickerMenu",OUTSIDE_EVENT_ALWAYS_IGNORE_CLASSNAMES),children:jsxRuntimeExports.jsx(CardMenu$1,{active:"",children:jsxRuntimeExports.jsxs(CardMenuTab,{label:"",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:x(S===0?"_.boardAndSectionPicker.title.board":"_.boardAndSectionPicker.title.section"),type:y&&!T?CardMenuHeaderTabItemType.BACK:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:CardMenuHeaderTabItemType.DEFAULT,onClick:y?()=>_(null):PlatformConfig.type===PlatformType.WEB_EXTENSION?s:void 0}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsxs(TabsReplacerContainer,{active:S,isFullHeight:!0,children:[jsxRuntimeExports.jsx(TabsTab,{label:0,children:jsxRuntimeExports.jsx(ScrollView_forwarded,{children:jsxRuntimeExports.jsx("div",{className:"CategoryPickerMenu__content",children:jsxRuntimeExports.jsx(SpaceBoards,{spaceId:a,firstBoardId:i,onSelect:M=>{_(M),R(null)}})})})}),jsxRuntimeExports.jsx(TabsTab,{label:1,children:jsxRuntimeExports.jsx(ScrollView_forwarded,{children:jsxRuntimeExports.jsx("div",{className:"CategoryPickerMenu__content",children:j.map(M=>jsxRuntimeExports.jsx(CardMenuSectionItem_,{onClick:()=>{R(M.id)},disabled:T,children:jsxRuntimeExports.jsxs("div",{className:"CategoryPickerMenu__item",children:[jsxRuntimeExports.jsx("div",{className:"CategoryPickerMenu__item__title","data-private":"lipsum",children:M.name}),M.id===E?jsxRuntimeExports.jsx("div",{className:"",children:jsxRuntimeExports.jsx(CheckmarkIcon$2,{})}):null]})},M.id))})})})]})}),y?jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["confirm"],disabledOptions:!E||T?["confirm"]:[],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.confirm"}),onClick:()=>E&&r(E,y)}):null]})})})},SvgMyDayicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("circle",{r:9,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:5,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:1,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"})),SvgRemoveMyDayicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("mask",{id:"mask0",width:24,height:23,x:-4,y:5,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#EDEDED",d:"m5.5 5-9.5.5 4.5 17L17 28l2.5-9-14-14Z"})),reactExports.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask0)"},reactExports.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"})),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.5,d:"M3.061 3 21 20.939"}),reactExports.createElement("mask",{id:"mask1",width:25,height:25,x:6,y:-7,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},reactExports.createElement("path",{fill:"#C4C4C4",d:"M16.156-6.414 30.729 8.159l-9.299 9.3L6.857 2.884z"})),reactExports.createElement("g",{stroke:"currentColor",strokeWidth:1.4,mask:"url(#mask1)"},reactExports.createElement("circle",{r:9,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("path",{d:"M17 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0Z"}),reactExports.createElement("circle",{r:2,transform:"matrix(1 0 0 -1 12 12)"}))),SvgArchiveicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.308 5H3.692C3.31 5 3 5.358 3 5.8v2.4c0 .442.31.8.692.8h16.616c.382 0 .692-.358.692-.8V5.8c0-.442-.31-.8-.692-.8ZM19 9v9.23c0 .205-.067.4-.186.545a.586.586 0 0 1-.45.225H5.636a.586.586 0 0 1-.45-.225A.858.858 0 0 1 5 18.23V9M10 13h4"})),SvgCardTagBigicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.09 9H21M16.5 3.75l-3 16.5M10.5 3.75l-3 16.5M3 15h16.91"})),SvgDuedateicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 27 27",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM16 2v4M8 2v4M3 10h18"})),SvgChatBigicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.379 8.379 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5Z"})),SvgLinkicon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m11.47 6.699 1.855-1.857a4.125 4.125 0 1 1 5.834 5.834l-2.651 2.652a4.125 4.125 0 0 1-5.834 0"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m12.53 17.302-1.856 1.856a4.124 4.124 0 1 1-5.834-5.833l2.652-2.652a4.126 4.126 0 0 1 5.834 0"})),SvgMoveTopicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12.6 17.2V8M8 12.6 12.6 8l4.6 4.6"})),SvgCopyicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M19.308 10h-7.616c-.934 0-1.692.758-1.692 1.692v7.616c0 .934.758 1.692 1.692 1.692h7.616c.934 0 1.692-.758 1.692-1.692v-7.616c0-.934-.758-1.692-1.692-1.692ZM5.538 14h-.846A1.692 1.692 0 0 1 3 12.308V4.692A1.692 1.692 0 0 1 4.692 3h7.616A1.692 1.692 0 0 1 14 4.692v.846"})),dropdownItemContent="_dropdownItemContent_15wc1_1",styles$w={dropdownItemContent},DropdownMenuItem=({children:r,...s})=>jsxRuntimeExports.jsx(DropdownMenu.Item,{...s,itemClassName:styles$w.dropdownItemContent,children:r}),CardMenu=({hideMenu:r,updateChecked:s,getCardUrl:a,archiveCard:i,openTags:o,openAssign:x,openCalendar:y,openActivity:_,moveToTop:E,pinItem:R,duplicateCard:S,openSection:j,model:T,isPinned:A,canUserEditCard:M,canUserAchiveCard:P,showMyDay:L=!0})=>{const{createMyDayEntry:D,updateMyDayEntries:O,myDayEntries:B}=useSyncMyDayEntries(),[N]=React$6.useState(()=>{var we;return(we=B.find(Re=>Re.referencedObjectId===T.id))==null?void 0:we.id}),[F,W]=React$6.useState(!1),{track:V}=useAnalytics(),U=Recoil_index_20(spaceSelectors.byCardId(T.id)),G=U==null?void 0:U.id,oe=Recoil_index_20(boardSelectors.idByCardId(T.id)),X=useMiniToastNotifications(),ee=useCopyLink(),ae=React$6.useCallback(()=>{r(),assertNonNullable(a);const we=a(),Re=`${window.location.protocol}//${window.location.host}${we}`;ee(Re)},[a,ee,r]),ie=React$6.useCallback(()=>{r(),assertNonNullable(i),P?i():X.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.archiveAdmin"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})},[r,i,P,X]),se=React$6.useCallback(()=>{r(),assertNonNullable(o),o()},[r,o]),Q=React$6.useCallback(()=>{r(),assertNonNullable(x),x()},[r,x]),Z=React$6.useCallback(()=>{r(),assertNonNullable(y),y()},[r,y]),J=React$6.useCallback(()=>{r(),D({referencedObjectId:T.id,referencedObjectType:MyDayReferencedObjectType.ANYDO_CARD,source:"card_view"})},[D,r,T.id]),te=React$6.useCallback(()=>{r(),assertNonNullable(_),_()},[r,_]),de=React$6.useCallback(()=>{r(),E==null||E()},[r,E]),ce=React$6.useCallback(()=>{r(),R==null||R()},[r,R]),me=React$6.useCallback(()=>{r(),assertNonNullable(s),s(!T.isChecked)},[r,T.isChecked,s]),[ve,xe]=React$6.useState(!1),ge=React$6.useCallback(async()=>{xe(!0)},[]),be=React$6.useCallback(()=>{N&&(r(),O([{key:"visibilityStatus",value:MyDayEntryVisibilityStatus.DISMISSED,id:N}]))},[r,N,O]),ye=React$6.useCallback(()=>{r(),j==null||j()},[r,j]),Ie=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),r],Pe=N?jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgRemoveMyDayicon,{}),onClick:be,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.remove-from-my-day"})}):jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgMyDayicon,{}),onClick:J,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.add-to-my-day"})});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BackdropModal,{isVisible:ve,onClose:()=>{xe(!1)},children:jsxRuntimeExports.jsx(BoardAndSectionPickerMenu,{spaceId:G,firstBoardId:oe,onChange:async we=>{if(V("duplicate_card_tapped",{extra_str1:T.id}),xe(!1),S){W(!0);try{await S(T,we)}catch{}W(!1)}r()},onClose:()=>{xe(!1)}})}),jsxRuntimeExports.jsxs(KeyboardShortcutsGlobalOverride,{shortcuts:[Ie],children:[M&&s&&((U==null?void 0:U.showCheckboxForCards)===ShowCardCheckboxMode.Everywhere||(U==null?void 0:U.showCheckboxForCards)===ShowCardCheckboxMode.Inside)&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(CheckmarkIcon$2,{style:{fontSize:24}}),onClick:me,children:T.isChecked?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.mark-as-unchecked"}):jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.mark-as-checked-2"})}),L?Pe:null,M&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgDuedateicon,{}),onClick:Z,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.dueDate"})}),x&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgAssignicon$1,{}),onClick:Q,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.sharing.assign"})})]}),jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgChatBigicon,{}),onClick:te,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.comment"})}),M&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[j!==void 0?jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgMoveSectionicon,{}),onClick:ye,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.section"})}):null,o&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgCardTagBigicon,{}),onClick:se,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tags.title"})}),S&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgCopyicon,{}),onClick:ge,loading:F,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.duplicate"})})]}),a&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgLinkicon$1,{}),onClick:ae,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.copyLink"})}),M&&i?jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgArchiveicon$1,{}),onClick:ie,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.archive"})}):null,M&&E&&jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgMoveTopicon,{}),onClick:de,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.move-top"})}),R&&(A?jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgUnpinicon,{}),onClick:ce,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.unpin"})}):jsxRuntimeExports.jsx(DropdownMenuItem,{icon:jsxRuntimeExports.jsx(SvgPinicon,{}),onClick:ce,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.pin"})}))]})]})},CardMenu_memo=React$6.memo(CardMenu),SvgDotsicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.865 11.153c1.03 0 1.864.8 1.864 1.787 0 .987-.835 1.787-1.864 1.787-1.03 0-1.865-.8-1.865-1.787 0-.987.835-1.787 1.865-1.787Zm0-5.566c1.03 0 1.864.8 1.864 1.787 0 .987-.835 1.787-1.864 1.787C6.835 9.16 6 8.36 6 7.374c0-.987.835-1.787 1.865-1.787Zm1.871-3.8C9.736.8 8.901 0 7.871 0S6.007.8 6.007 1.787c0 .987.835 1.787 1.864 1.787 1.03 0 1.865-.8 1.865-1.787Z",clipRule:"evenodd"})),Card$1="_Card_li4ps_3",isChecked$1="_isChecked_li4ps_26",isCompact="_isCompact_li4ps_32",isTable="_isTable_li4ps_39",isSelected="_isSelected_li4ps_59",isDragOverlay$3="_isDragOverlay_li4ps_67",isDragDisableCursor="_isDragDisableCursor_li4ps_78",isFilesDragOver="_isFilesDragOver_li4ps_82",isMenuVisible$1="_isMenuVisible_li4ps_87",isPlaceholder="_isPlaceholder_li4ps_110",titleWrapper$4="_titleWrapper_li4ps_130",withAssigneeButton="_withAssigneeButton_li4ps_135",title$1="_title_li4ps_130",checkboxWrapper$5="_checkboxWrapper_li4ps_139",hasCheckbox="_hasCheckbox_li4ps_146",checkboxWrapperInline="_checkboxWrapperInline_li4ps_150",checkboxWrapperWhenBreadcrumbs="_checkboxWrapperWhenBreadcrumbs_li4ps_168",oneline="_oneline_li4ps_185",multiline="_multiline_li4ps_190",titleRow="_titleRow_li4ps_197",titleIndicators="_titleIndicators_li4ps_223",breadcrumbsWrapper="_breadcrumbsWrapper_li4ps_232",menuButton$1="_menuButton_li4ps_275",assignButton="_assignButton_li4ps_276",visibleOnHover="_visibleOnHover_li4ps_298",tags="_tags_li4ps_311",activityIndicator="_activityIndicator_li4ps_320",hasUnreadActivity="_hasUnreadActivity_li4ps_331",mainContent="_mainContent_li4ps_335",styles$v={Card:Card$1,isChecked:isChecked$1,isCompact,isTable,isSelected,isDragOverlay:isDragOverlay$3,isDragDisableCursor,isFilesDragOver,isMenuVisible:isMenuVisible$1,isPlaceholder,titleWrapper:titleWrapper$4,withAssigneeButton,title:title$1,checkboxWrapper:checkboxWrapper$5,hasCheckbox,checkboxWrapperInline,checkboxWrapperWhenBreadcrumbs,oneline,multiline,titleRow,titleIndicators,breadcrumbsWrapper,menuButton:menuButton$1,assignButton,visibleOnHover,tags,activityIndicator,hasUnreadActivity,mainContent};var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.context"),k=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v(r){if(typeof r=="object"&&r!==null){var s=r.$$typeof;switch(s){case b:switch(r=r.type,r){case d:case f:case e:case m:case n:return r;default:switch(r=r&&r.$$typeof,r){case k:case h:case l:case q:case p:case g:return r;default:return s}}case c:return s}}}reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=g;reactIs_production_min.Element=b;reactIs_production_min.ForwardRef=l;reactIs_production_min.Fragment=d;reactIs_production_min.Lazy=q;reactIs_production_min.Memo=p;reactIs_production_min.Portal=c;reactIs_production_min.Profiler=f;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m;reactIs_production_min.SuspenseList=n;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(r){return v(r)===h};reactIs_production_min.isContextProvider=function(r){return v(r)===g};reactIs_production_min.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===b};reactIs_production_min.isForwardRef=function(r){return v(r)===l};reactIs_production_min.isFragment=function(r){return v(r)===d};reactIs_production_min.isLazy=function(r){return v(r)===q};reactIs_production_min.isMemo=function(r){return v(r)===p};reactIs_production_min.isPortal=function(r){return v(r)===c};reactIs_production_min.isProfiler=function(r){return v(r)===f};reactIs_production_min.isStrictMode=function(r){return v(r)===e};reactIs_production_min.isSuspense=function(r){return v(r)===m};reactIs_production_min.isSuspenseList=function(r){return v(r)===n};reactIs_production_min.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===d||r===f||r===e||r===m||r===n||r===t||typeof r=="object"&&r!==null&&(r.$$typeof===q||r.$$typeof===p||r.$$typeof===g||r.$$typeof===h||r.$$typeof===l||r.$$typeof===u||r.getModuleId!==void 0)};reactIs_production_min.typeOf=v;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;const root$9="_root_1f1nh_1",indicatorsTooltip="_indicatorsTooltip_1f1nh_9",chevronDown="_chevronDown_1f1nh_19",styles$u={root:root$9,indicatorsTooltip,chevronDown},SvgChevronBottomicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m7.6 9.2 4.8 4.8 4.8-4.8"})),Item=({children:r})=>r,columnGap=8,chevronWidth=14,IndicatorTray=({children:r,minWidth:s=chevronWidth,remainderWidth:a=chevronWidth,className:i,btnClassName:o,remainderContent:x})=>{const y=reactExports.useRef(null),[_,E]=reactExports.useState(!1);let{containerWidth:R,ref:S}=useContainerWidth(s),j=R;const T=[],A=[],M=reactExports.Children.toArray(r).filter(reactIsExports.isElement);return M.forEach((P,L)=>{var O;const D=(O=P.props.width)!=null?O:14;L>0&&(j-=columnGap),L===M.length-1&&j>=D||j>=D+columnGap+a?(T.push(P),j-=D):(j=0,A.push(P))}),jsxRuntimeExports.jsxs("div",{ref:S,className:cx$6(styles$u.root,i),style:{minWidth:s},children:[T,A.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{ref:y,className:cx$6(styles$u.chevronDown,o),onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:x?x({totalCount:M.length,hiddenCount:A.length}):jsxRuntimeExports.jsx(SvgChevronBottomicon,{})}),jsxRuntimeExports.jsx(Tooltip2,{from:y,position:"bottom-start",isVisible:_,className:styles$u.indicatorsTooltip,persistOnMouseOver:!0,children:A})]})]})};IndicatorTray.Item=Item;function useContainerWidth(r){const s=reactExports.useRef(null),[a,i]=reactExports.useState(r);return reactExports.useLayoutEffect(()=>{if(!s.current)return;i(s.current.clientWidth);const o=new ResizeObserver(x=>{if(x.length===0)return;const y=x[0];i(y.contentRect.width)});return o.observe(s.current),()=>o.disconnect()},[]),{containerWidth:a,ref:s}}const root$8="_root_w4bxb_2",oneOwner="_oneOwner_w4bxb_13",twoOwners="_twoOwners_w4bxb_14",hasDate="_hasDate_w4bxb_15",hasIndicators="_hasIndicators_w4bxb_16",hasTime="_hasTime_w4bxb_32",overview="_overview_w4bxb_41",count="_count_w4bxb_49",icon$5="_icon_w4bxb_56",countIcon="_countIcon_w4bxb_65",dueDate$2="_dueDate_w4bxb_79",breadcrumbs$1="_breadcrumbs_w4bxb_91",tagContainer$1="_tagContainer_w4bxb_121",tag$2="_tag_w4bxb_121",styles$t={root:root$8,oneOwner,twoOwners,hasDate,hasIndicators,hasTime,overview,count,icon:icon$5,countIcon,dueDate:dueDate$2,breadcrumbs:breadcrumbs$1,tagContainer:tagContainer$1,tag:tag$2},CardIndicatorsCompact=({now:r,model:s,breadcrumbs:a,isEditable:i,disabled:o,dueDate:x,showPassedDueDateAsOverdue:y,onDueDateChange:_,tags:E,possibleTags:R,openActivity:S,className:j,cardOnHoverClassName:T})=>{const{sectionId:A,owners:M,unreadChatMentionCount:P,hasUnreadActivity:L,userReminders:D}=s,O=Recoil_index_20(cardAttachmentSelectors.countByCardId(s.id)),B=Recoil_index_20(cardChecklistSelectors.countByCardId(s.id)),N=useSyncUpdateCards(),{track:F}=useAnalytics(),W=reactExports.useCallback(()=>{F("card_time_date_picker_tapped",{extra_str1:s.id})},[F,s.id]),V=useCardFutureReminders({dueDate:x,userReminders:D!=null?D:EMPTY$2,now:r}),U=reactExports.useCallback(Z=>{Z.stopPropagation(),S==null||S()},[S]),G=reactExports.useCallback(Z=>{F("card_assignee_added",{extra_str1:s.id,extra_double1:Z.length}),N([{id:s.id,key:"owners",value:Z}])},[s.id,F,N]),oe=x&&s.recurrence!==null,X=O>0,ee=B>0,ae=V.length>0,ie=P!==null&&P>0,se=E.length>0,Q=oe||X||ee||ae||ie||L||se;return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$t.root,j,{[styles$t.twoOwners]:(M==null?void 0:M.length)&&(M==null?void 0:M.length)>=2,[styles$t.oneOwner]:(M==null?void 0:M.length)===1,[styles$t.hasDate]:x,[styles$t.hasTime]:x==null?void 0:x.hasTime,[styles$t.hasIndicators]:Q}),children:[jsxRuntimeExports.jsxs("div",{className:styles$t.overview,children:[a&&jsxRuntimeExports.jsx("div",{className:styles$t.breadcrumbs,children:a}),x&&jsxRuntimeExports.jsx(CardIndicatorDueDate_memo,{buttonClassName:styles$t.dueDate,isEditable:i,dueDate:x,now:Date.now(),onDueDateOpen:W,onChange:_,disabled:o,userReminders:s.userReminders,showPassedDueDateAsOverdue:y,cardId:s.id,recurrence:s.recurrence}),jsxRuntimeExports.jsxs(IndicatorTray,{btnClassName:CARD_CLICK_IGNORE_CLASSNAME,children:[oe&&s.recurrence&&jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:jsxRuntimeExports.jsx(CardRecurrenceText,{dueDate:x,recurrence:s.recurrence}),children:jsxRuntimeExports.jsx("span",{className:styles$t.icon,children:jsxRuntimeExports.jsx(SvgRecurrenceicon,{})})})},"recurrence"),X?jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx("span",{className:styles$t.count,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$t.countIcon,styles$t.attachmentsIcon),children:jsxRuntimeExports.jsx(SvgAttachmentsicon,{})})})},"attachments"):null,ee&&jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx("span",{className:styles$t.count,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$t.countIcon,styles$t.checklistsIcon),children:jsxRuntimeExports.jsx(SvgChecklistsicon,{})})})},"checklist"),ae?jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx(CardRemindersTooltip,{reminders:V,children:jsxRuntimeExports.jsx("span",{className:styles$t.count,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$t.countIcon),children:jsxRuntimeExports.jsx(SvgRemindericon$1,{})})})})},"reminders"):null,se&&R.filter(Z=>E.includes(Z.id)).map(Z=>jsxRuntimeExports.jsx(IndicatorTray.Item,{width:20,children:jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:Z.name,className:styles$t.tagContainer,children:jsxRuntimeExports.jsx("div",{className:styles$t.tag,style:{backgroundColor:Z.color}})})},`tag:${Z.id}`)),ie?jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx("button",{className:styles$t.count,onClick:U,children:jsxRuntimeExports.jsx(UnreadCountIndicator,{count:P})})},"mentions"):L&&jsxRuntimeExports.jsx(IndicatorTray.Item,{children:jsxRuntimeExports.jsx("button",{className:styles$t.count,onClick:U,children:jsxRuntimeExports.jsx("span",{className:cx$6(styles$t.countIcon),children:jsxRuntimeExports.jsx(SvgChaticon$1,{})})})},"activity")]})]}),M!=null&&M.length?jsxRuntimeExports.jsx("div",{className:styles$t.assignees,children:jsxRuntimeExports.jsx(CardIndicatorAssignees_memo,{withAssignButton:!0,cardOnHoverClassName:T,isEditable:i,owners:M,sectionId:A,onChange:G,maxMembers:1,size:SharingAvatarSize.TASK_INDICATOR_COMPACT})}):null]})},root$7="_root_bcz3b_1",list="_list_bcz3b_5",tagWrapper="_tagWrapper_bcz3b_16",minimized="_minimized_bcz3b_24",tag$1="_tag_bcz3b_16",maximized="_maximized_bcz3b_30",isAnimating="_isAnimating_bcz3b_44",styles$s={root:root$7,list,tagWrapper,minimized,tag:tag$1,maximized,isAnimating};function getElements(r){if(!r.current)return;const s=r.current.getElementsByClassName(styles$s.tag);return Array.from(s)}const MaximizedList=React$6.forwardRef(function r({tags:s,onClick:a,className:i,itemClassName:o},x){const y=React$6.useRef(null);return React$6.useImperativeHandle(x,()=>({getElements:()=>getElements(y),getContainerElement:()=>y.current})),jsxRuntimeExports.jsx("div",{ref:y,className:cx$6(styles$s.listWrapper,i),children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$s.list,styles$s.maximized),children:s.map(_=>jsxRuntimeExports.jsx("div",{onClick:a,className:styles$s.tagWrapper,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$s.tag,o),style:{backgroundColor:_.color},children:_.name})},_.id))})})}),MinimizedList=React$6.forwardRef(function r({tags:s,isAnimating:a,onClick:i,className:o,itemClassName:x},y){const{formatMessage:_}=useI18n(),E=React$6.useRef(null);return React$6.useImperativeHandle(y,()=>({getElements:()=>getElements(E),getContainerElement:()=>E.current})),jsxRuntimeExports.jsx("div",{ref:E,className:cx$6(styles$s.listWrapper,o),children:jsxRuntimeExports.jsx(TooltipSmallInfo.Group,{className:cx$6(styles$s.list,styles$s.minimized),isActive:!a,children:s.map(R=>{const S=R.name||`(${_("_.noTitle")})`;return jsxRuntimeExports.jsx(TooltipSmallInfo.GroupItem,{text:S,onClick:i,className:styles$s.tagWrapper,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$s.tag,x),style:{backgroundColor:R.color}})},R.id)})})})});function CardTagsListConnected({tagIds:r,possibleTags:s,isExpanded:a=!1,onExpandChange:i}){const{track:o}=useAnalytics(),[x,y]=React$6.useState(a),_=usePreviousValue(a),[E,R]=React$6.useState(!1),[S,j]=React$6.useState(!1),T=S||E,{morph:A,itemClassName:M}=useMorphAnimation(),P=React$6.useRef(null),L=React$6.useRef(null),D=React$6.useCallback(B=>{B.stopPropagation(),T||i(!a)},[T,a,i]);React$6.useEffect(()=>{_!==a&&(a?(o("tag_expand_tapped"),R(!0)):(o("tag_collapse_tapped"),j(!0)))},[a,_,o]),React$6.useEffect(()=>{var U,G,oe,X;if(!(E||S))return;const B=(U=L.current)==null?void 0:U.getContainerElement(),N=(G=L.current)==null?void 0:G.getElements(),F=(oe=P.current)==null?void 0:oe.getContainerElement(),W=(X=P.current)==null?void 0:X.getElements(),V=()=>{R(!1),j(!1),y(E)};if(!B||!(N!=null&&N.length)||!F||!W){V();return}E?A(F,W,B,N).finally(V):A(B,N,F,W).finally(V)},[E,S,A]);const O=React$6.useMemo(()=>s.filter(B=>r.includes(B.id)),[s,r]);return jsxRuntimeExports.jsxs("div",{className:cx$6(styles$s.root,{[styles$s.isAnimating]:T}),children:[!x||T?jsxRuntimeExports.jsx(MinimizedList,{ref:P,isAnimating:T,itemClassName:M,tags:O,onClick:D}):null,x||T?jsxRuntimeExports.jsx(MaximizedList,{ref:L,itemClassName:M,tags:O,onClick:D}):null]})}function CardTagsList_connector(r){const[s,a]=useUserSessionStorageBooleanKey(CARD_TAGS_MAX_MODE_ENABLED_USS,DEFAULT_IS_EXPANDED_CARD_TAGS);return jsxRuntimeExports.jsx(CardTagsListConnected,{isExpanded:s,onExpandChange:a,...r})}const root$6="_root_uobv0_1",indicatorTrayItem="_indicatorTrayItem_uobv0_7",tooltip$1="_tooltip_uobv0_11",styles$r={root:root$6,indicatorTrayItem,tooltip:tooltip$1},CardIndicatorAssigneesAutosize=({isEditable:r,sectionId:s,owners:a,onChange:i,emptyContent:o})=>{const x=React$6.useRef(null),y=React$6.useRef(null),_=useSyncQueryModelById("section",s),{sortedBoardMembers:E,boardMembers:R}=useSyncBoardSortedMembers((_==null?void 0:_.boardId)||""),[S,j]=React$6.useState(!1),T=React$6.useCallback(()=>j(!1),[]);useOutSideEvent(["click","pointerdown","wheel"],React$6.useMemo(()=>[x,y],[]),T);const A=React$6.useMemo(()=>{const D=[];return a.forEach(B=>{const N=R.get(B);N&&D.push(N)}),sortBy$1(D,B=>B.name)},[a,R]),M=React$6.useCallback(()=>{j(D=>!D)},[]),P=React$6.useCallback(()=>j(!1),[]),L=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),P];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{role:"button",className:cx$6(CARD_CLICK_IGNORE_CLASSNAME,styles$r.root),ref:x,style:{width:a.length?"100%":"auto"},children:a.length?jsxRuntimeExports.jsx(IndicatorTray,{remainderWidth:24,btnClassName:cx$6(styles$r.indicatorTrayItem,CARD_CLICK_IGNORE_CLASSNAME),remainderContent:({hiddenCount:D})=>jsxRuntimeExports.jsx("div",{onClick:M,role:"button",children:jsxRuntimeExports.jsxs(Badge,{theme:"avatar",children:["+",D]})}),children:A.map(D=>jsxRuntimeExports.jsx(IndicatorTray.Item,{width:24,children:jsxRuntimeExports.jsx(TooltipSmallInfo,{text:D.name||D.email,position:"top",children:jsxRuntimeExports.jsx("div",{className:CARD_CLICK_IGNORE_CLASSNAME,onClick:O=>{O.stopPropagation(),M()},role:"button",children:jsxRuntimeExports.jsx(SharingAvatar_memo,{name:D.name||D.email,imageUrl:D.profilePicture,size:SharingAvatarSize.BOARD_TOOLBAR_BUTTON_SIZE})})})},`user:${D.publicUserId}`))}):o?jsxRuntimeExports.jsx("div",{className:CARD_CLICK_IGNORE_CLASSNAME,onClick:D=>{D.stopPropagation(),M()},role:"button",children:o({isAssigneeModalVisible:S})}):null}),r&&jsxRuntimeExports.jsx(Tooltip2,{from:x,isVisible:S,className:styles$r.tooltip,position:"bottom-start",children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[L],children:jsxRuntimeExports.jsx("div",{ref:y,onClick:stopPropagation$2,onPointerDown:stopPropagation$2,children:jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:a,sortedBoardMembers:E,onClose:P,onChange:i})})})})]})},SvgTagicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M2.727 6H14M11 2.5l-2 11M7 2.5l-2 11M2 10h11.273"})),SvgCalendaricon$1=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.067,d:"M12.667 2.667H3.333C2.597 2.667 2 3.264 2 4v9.333c0 .737.597 1.334 1.333 1.334h9.334c.736 0 1.333-.597 1.333-1.334V4c0-.736-.597-1.333-1.333-1.333ZM10.667 1.333V4M5.333 1.333V4M2 6.667h12"})),root$5="_root_zxeus_3",checklistsOpen="_checklistsOpen_zxeus_7",isDragOverlay$2="_isDragOverlay_zxeus_15",tagContainer="_tagContainer_zxeus_20",tag="_tag_zxeus_20",titleCell$1="_titleCell_zxeus_41",cell$1="_cell_zxeus_47",dueDateCell="_dueDateCell_zxeus_55",toggleChecklists="_toggleChecklists_zxeus_69",toggleChecklistsOpen="_toggleChecklistsOpen_zxeus_74",openChat="_openChat_zxeus_78",emptyStateButton$2="_emptyStateButton_zxeus_83",emptyStateButtonForceVisible$1="_emptyStateButtonForceVisible_zxeus_93",emptyStateButtonAssignee$1="_emptyStateButtonAssignee_zxeus_97",emptyStateButtonTag="_emptyStateButtonTag_zxeus_101",emptyStateButtonDueDate$1="_emptyStateButtonDueDate_zxeus_105",recurrence="_recurrence_zxeus_113",titleWrapper$3="_titleWrapper_zxeus_120",checklistsWrapper="_checklistsWrapper_zxeus_128",columnsContainer="_columnsContainer_zxeus_132",checkboxWrapper$4="_checkboxWrapper_zxeus_139",styles$q={root:root$5,checklistsOpen,isDragOverlay:isDragOverlay$2,tagContainer,tag,titleCell:titleCell$1,cell:cell$1,dueDateCell,toggleChecklists,toggleChecklistsOpen,openChat,emptyStateButton:emptyStateButton$2,emptyStateButtonForceVisible:emptyStateButtonForceVisible$1,emptyStateButtonAssignee:emptyStateButtonAssignee$1,emptyStateButtonTag,emptyStateButtonDueDate:emptyStateButtonDueDate$1,recurrence,titleWrapper:titleWrapper$3,checklistsWrapper,columnsContainer,checkboxWrapper:checkboxWrapper$4},root$4="_root_13vjv_1",isChecked="_isChecked_13vjv_8",readState="_readState_13vjv_12",editStateInput="_editStateInput_13vjv_20",styles$p={root:root$4,isChecked,readState,editStateInput},CardTableRowTitle=({model:r,isEditable:s,isInlineEditing:a,onStopInlineEditing:i,isChecked:o})=>{const x=useSyncUpdateCards(),y=React$6.useCallback(P=>x([P]),[x]),{value:_,setValue:E,flush:R}=useDeferUpdate$2(r.id,"name",r.name,y,isCardNameValid,a),S=React$6.useMemo(()=>linkifyText(_,nonPropagatingWrapLink),[_]),j=React$6.useRef(),T=React$6.useRef(null);React$6.useLayoutEffect(()=>{!s||!a||T.current==null||(T.current.focus(),T.current.scrollLeft=5e3)},[s,a]);const A=React$6.useCallback(P=>{E(P.target.value)},[E]),M=React$6.useCallback(P=>{isCardNameValid(P.target.value)||E(r.name),R(),i()},[R,r.name,i,E]);return jsxRuntimeExports.jsx("div",{className:cx$6(styles$p.root,{[styles$p.isChecked]:o}),children:a?jsxRuntimeExports.jsx(DynamicTextField,{onPointerDown:stopPropagation$2,className:cx$6(styles$p.editStateInput,CARD_CLICK_IGNORE_CLASSNAME),type:"text",value:_,ref:T,onChange:A,onClick:stopPropagation$2,onBlur:M,onKeyDown:P=>{(P.key==="Enter"||P.key==="Escape")&&P.currentTarget.blur()}}):jsxRuntimeExports.jsx("div",{className:styles$p.readState,onMouseDown:P=>{P.stopPropagation(),P.target.tagName==="A"&&(j.current=P.target)},onMouseUp:P=>{const L=j.current;j.current=void 0,P.target},children:S})})};function useDeferUpdate$2(r,s,a,i,o,x){const[y,_]=React$6.useState(a),E=React$6.useRef(a);React$6.useEffect(()=>{E.current=a},[a]),React$6.useEffect(()=>{x||_(E.current)},[x,a]);const R=React$6.useRef(!1),S=React$6.useRef(!1),j=React$6.useMemo(()=>lodashExports.debounce((A,M,P)=>{S.current=!0,i({id:A,key:M,value:P})},1e3),[i]);React$6.useEffect(()=>()=>j.flush(),[j]),React$6.useEffect(()=>{if(R.current)return j.cancel(),o(y)&&j(r,s,y),()=>j.cancel()},[s,r,y,j,o]),React$6.useEffect(()=>(R.current=!0,()=>{S.current=!1,R.current=!1}),[]);function T(){o(y)||j(r,s,a),j.flush()}return{value:y,setValue:_,flush:T}}const button$2="_button_vsa6y_1",checkboxWrapper$3="_checkboxWrapper_vsa6y_15",text="_text_vsa6y_23",styles$o={button:button$2,checkboxWrapper:checkboxWrapper$3,text},NewCheckListItemButton=React$6.memo(function r({onClick:s,disabled:a}){return jsxRuntimeExports.jsxs("button",{type:"button","data-role":"new_item",onFocus:s,onClick:s,disabled:a,className:styles$o.button,children:[jsxRuntimeExports.jsx("div",{className:styles$o.checkboxWrapper,children:jsxRuntimeExports.jsx(TaskItemStaticCircle_,{})}),jsxRuntimeExports.jsx("div",{className:styles$o.text,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"NewCheckListItemButton.text"})})]})}),wrapper$5="_wrapper_19n09_1",titleWrapper$2="_titleWrapper_19n09_10",titleInput$1="_titleInput_19n09_20",styles$n={wrapper:wrapper$5,titleWrapper:titleWrapper$2,titleInput:titleInput$1},CardTableCheckListHeader=React$6.memo(function r({title:s,readonly:a,onTitleChange:i}){const o=React$6.useRef(null),x=React$6.useCallback(({key:y,nativeEvent:_})=>{var E;_.isComposing||y==="Enter"&&((E=o.current)==null||E.blur())},[]);return jsxRuntimeExports.jsx("div",{className:styles$n.wrapper,children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{ref:o,className:styles$n.titleWrapper,inputClassName:styles$n.titleInput,value:s,onChange:i,onKeyDown:x,theme:DynamicTextAreaTheme.LIST_TITLE_TRANSPARENT,disallowEnter:!0,disabled:a,isSingleLine:!0})})}),wrapper$4="_wrapper_bsl9x_1",titleWrapper$1="_titleWrapper_bsl9x_17",isDragOverlay$1="_isDragOverlay_bsl9x_25",isEditable$1="_isEditable_bsl9x_30",isFocused$1="_isFocused_bsl9x_30",isDragPlaceholder$1="_isDragPlaceholder_bsl9x_34",checkboxWrapper$2="_checkboxWrapper_bsl9x_43",contentWrapper$1="_contentWrapper_bsl9x_50",textFieldWrapper$1="_textFieldWrapper_bsl9x_57",textField$1="_textField_bsl9x_57",dueDate$1="_dueDate_bsl9x_89",assignees$1="_assignees_bsl9x_110",previewWrapper$1="_previewWrapper_bsl9x_114",preview$1="_preview_bsl9x_114",previewInner$1="_previewInner_bsl9x_134",completed$1="_completed_bsl9x_157",contentWrapperUnactionable$1="_contentWrapperUnactionable_bsl9x_161",titleCell="_titleCell_bsl9x_169",cell="_cell_bsl9x_174",emptyStateButton$1="_emptyStateButton_bsl9x_178",emptyStateButtonForceVisible="_emptyStateButtonForceVisible_bsl9x_187",emptyStateButtonAssignee="_emptyStateButtonAssignee_bsl9x_191",emptyStateButtonDueDate="_emptyStateButtonDueDate_bsl9x_196",styles$m={wrapper:wrapper$4,titleWrapper:titleWrapper$1,isDragOverlay:isDragOverlay$1,isEditable:isEditable$1,isFocused:isFocused$1,isDragPlaceholder:isDragPlaceholder$1,checkboxWrapper:checkboxWrapper$2,contentWrapper:contentWrapper$1,textFieldWrapper:textFieldWrapper$1,textField:textField$1,dueDate:dueDate$1,assignees:assignees$1,previewWrapper:previewWrapper$1,preview:preview$1,previewInner:previewInner$1,completed:completed$1,contentWrapperUnactionable:contentWrapperUnactionable$1,titleCell,cell,emptyStateButton:emptyStateButton$1,emptyStateButtonForceVisible,emptyStateButtonAssignee,emptyStateButtonDueDate},CANCEL_KEYS$1=new Set(["Escape"]),CardTableCheckListItem=React$6.forwardRef(function r({card:s,toggleComplete:a,completed:i,disabled:o,label:x,onLabelChange:y,isDragPlaceholder:_=!1,isDragOverlay:E=!1,autoFocus:R,onBlur:S,onEnterClick:j,dueDate:T,onDueDateChange:A,owners:M,onAssigneeChange:P,className:L},D){const O=o||i,B=React$6.useRef(null),[N,F]=React$6.useState(null),[W,V]=React$6.useState({isFocused:!1,cursorPosition:null}),U=Recoil_index_20(boardSelectors.byCardId(s.id));if(!U)throw new Error("invariant");const[G]=useBoardTableViewConfig(U.id),oe=T?cardDueDateFromString(T):null,X=React$6.useCallback(ye=>V(Ie=>({...Ie,isFocused:ye})),[]),ee=React$6.useCallback(()=>{X(!0)},[X]),ae=React$6.useCallback(()=>{var ye;X(!1),(ye=B.current)==null||ye.blur(),S&&S()},[S,X]),ie=React$6.useCallback(ye=>{y&&y(ye)},[y]),se=React$6.useCallback(({dueDate:ye})=>A==null?void 0:A(ye===null?null:cardRecordDueDateToString(ye)),[A]),Q=React$6.useCallback(ye=>P==null?void 0:P(ye),[P]),Z=React$6.useCallback(ye=>{W.isFocused&&ye.stopPropagation()},[W.isFocused]),J=React$6.useCallback(ye=>{var Ie;ye.nativeEvent.isComposing||(CANCEL_KEYS$1.has(ye.key)&&B.current?(ye.stopPropagation(),ye.preventDefault(),B.current.blur()):ye.key==="Enter"&&!ye.shiftKey&&(j?j(ye):(Ie=B.current)==null||Ie.blur()))},[j]),te=React$6.useRef(!0),de=React$6.useRef(),ce=React$6.useCallback(ye=>{var Ie;if(!te.current){te.current=!0;return}ye.target.tagName!=="A"&&(V(Pe=>({...Pe,isFocused:!0})),(Ie=B.current)==null||Ie.focus())},[]),me=React$6.useCallback(ye=>{ye.target.tagName==="A"&&(de.current=ye.target),te.current=!1},[]),ve=React$6.useCallback(ye=>{const Ie=de.current;if(de.current=void 0,Ie===ye.target)return;const Pe=getSelectionCaretPosition(ye.currentTarget);V({isFocused:!0,cursorPosition:Pe})},[]);React$6.useLayoutEffect(()=>{var ye;_||(ye=B.current)==null||ye.blur()},[_]),React$6.useEffect(()=>{R&&X(!0)},[R,X]);const ge=React$6.useMemo(()=>N?isEllipsisActive(N):!1,[N])&&!_&&!E?x:void 0,be=React$6.useMemo(()=>linkifyText(x,nonPropagatingWrapLink),[x]);return React$6.useLayoutEffect(()=>{if(W.isFocused&&B.current!=null){B.current.focus();const ye=B.current;if(W.cursorPosition){const[Ie,Pe]=W.cursorPosition;ye==null||ye.setSelectionRange(Ie,Pe)}ye&&(ye.scrollLeft=0)}},[W.isFocused]),jsxRuntimeExports.jsxs("div",{ref:D,className:cx$6(styles$m.wrapper,L,{[styles$m.isDragPlaceholder]:_,[styles$m.isFocused]:W.isFocused,[styles$m.isEditable]:!o,[styles$m.isDragOverlay]:E,[styles$m.completed]:i}),children:[G.columns.filter(ye=>ye.visible).map(ye=>{switch(ye.name){case"assignees":return jsxRuntimeExports.jsx("div",{className:styles$m.cell,style:{width:`${ye.width}%`},children:jsxRuntimeExports.jsx("div",{style:{width:"100%"},children:jsxRuntimeExports.jsx(CardIndicatorAssigneesAutosize,{owners:M,sectionId:s.sectionId,onChange:Q,isEditable:!o,emptyContent:({isAssigneeModalVisible:Ie})=>jsxRuntimeExports.jsx("div",{className:cx$6(styles$m.emptyStateButton,styles$m.emptyStateButtonAssignee,CARD_CLICK_IGNORE_CLASSNAME,{[styles$m.emptyStateButtonForceVisible]:Ie}),children:jsxRuntimeExports.jsx(SvgAssignicon$1,{})})})})},ye.name);case"attachments":return jsxRuntimeExports.jsx("div",{className:styles$m.cell,style:{width:`${ye.width}%`}},ye.name);case"dueDate":return jsxRuntimeExports.jsx("div",{className:cx$6(styles$m.cell),style:{width:`${ye.width}%`},children:jsxRuntimeExports.jsx("div",{className:styles$m.dueDate,children:jsxRuntimeExports.jsx(CardIndicatorDueDate_memo,{cardId:s.id,allowRecurrenceConfig:!1,recurrence:null,isEditable:!o,dueDate:oe,now:Date.now(),onChange:se,emptyContent:({isCalendarVisible:Ie})=>jsxRuntimeExports.jsx("div",{className:cx$6(styles$m.emptyStateButton,styles$m.emptyStateButtonDueDate,CARD_CLICK_IGNORE_CLASSNAME,{[styles$m.emptyStateButtonForceVisible]:Ie}),children:jsxRuntimeExports.jsx(SvgCalendaricon$1,{})})})})},ye.name);case"tags":return jsxRuntimeExports.jsx("div",{className:styles$m.cell,style:{width:`${ye.width}%`}},ye.name);case"title":return jsxRuntimeExports.jsx("div",{className:cx$6(styles$m.cell,styles$m.titleCell),style:{width:`${ye.width}%`},"data-private":"lipsum",children:jsxRuntimeExports.jsxs("div",{className:styles$m.titleWrapper,children:[jsxRuntimeExports.jsx("div",{className:styles$m.checkboxWrapper,children:jsxRuntimeExports.jsx(TaskItemCheckbox,{checked:i,disabled:o,onClick:a})}),W.isFocused?jsxRuntimeExports.jsx("div",{className:styles$m.textFieldWrapper,children:jsxRuntimeExports.jsx(DynamicTextField,{ref:B,autoFocus:R,maxLength:CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH,onChange:Ie=>ie(Ie.target.value),onFocus:ee,onKeyDown:J,onPointerDown:Z,onBlur:ae,value:x,className:cx$6(styles$m.textField),disabled:O,"data-private":"lipsum"})}):jsxRuntimeExports.jsx("div",{className:styles$m.previewWrapper,children:jsxRuntimeExports.jsx("div",{title:ge,className:styles$m.preview,children:jsxRuntimeExports.jsx("div",{ref:F,className:styles$m.previewInner,role:O?void 0:"button",tabIndex:O?void 0:0,onFocus:O?void 0:ce,onMouseDown:O?void 0:me,onMouseUp:O?void 0:ve,children:be})})})]})},ye.name);default:return null}}),jsxRuntimeExports.jsx("div",{style:{width:36}})]})}),listWrapper$1="_listWrapper_j7g1d_1",newItemWrapperActive$1="_newItemWrapperActive_j7g1d_5",newItemWrapperInactive="_newItemWrapperInactive_j7g1d_9",dragOverlay$1="_dragOverlay_j7g1d_18",isDragged$1="_isDragged_j7g1d_25",styles$l={listWrapper:listWrapper$1,newItemWrapperActive:newItemWrapperActive$1,newItemWrapperInactive,dragOverlay:dragOverlay$1,"ani-DragOverlay-out":"_ani-DragOverlay-out_j7g1d_1",isDragged:isDragged$1,"ani-DragOverlay-in":"_ani-DragOverlay-in_j7g1d_1"},getWrapperElementId$1=r=>`checklist_${r}`,EMPTY_ITEMS$1=[],CardTableChecklist=React$6.memo(function r({card:s,checklistId:a,title:i,readonly:o}){var B;const x=(B=Recoil_index_20(cardChecklistSelectors.checklistItemsGroupedByChecklistId).allMap.get(a))!=null?B:EMPTY_ITEMS$1,y=useSyncUpdateCardChecklists(),_=useSyncCreateChecklistItem(),E=useSyncUpdateChecklistItems(),[R,S]=React$6.useState(!1),[j,T]=React$6.useState(""),A=React$6.useRef(null),M=React$6.useMemo(()=>x.slice().sort((N,F)=>Positioning2.comparePositions(N.position,F.position)),[x]);function P(N){y([{id:a,key:"name",value:N}])}function L(N,F){const W=M.findIndex(oe=>oe.id===N),V=M.slice();V.splice(W,1);const U=getPositionInPositionableGroupAtIndex(V,F);M.find(oe=>oe.id===N)&&E([{id:N,key:"position",value:U}])}function D(){j&&(_({name:j,checklistItems:x,checklistId:a}),T("")),S(!1)}function O(N){j?(_({name:j,checklistItems:x,checklistId:a}),T(""),N.preventDefault(),setImmediate(()=>{var F;return(F=A.current)==null?void 0:F.scrollIntoView({behavior:"smooth",block:"nearest"})})):(N.preventDefault(),T(""),S(!1))}return jsxRuntimeExports.jsxs("div",{style:{width:"100%"},id:getWrapperElementId$1(a),children:[jsxRuntimeExports.jsx(CardTableCheckListHeader,{title:i,onTitleChange:P,readonly:o}),jsxRuntimeExports.jsxs("div",{className:styles$l.listWrapper,children:[jsxRuntimeExports.jsx(DraggableItems$1,{items:M,handleDragEnd:L,card:s,children:M.map(N=>jsxRuntimeExports.jsx(DraggableCheckListItem$1,{id:N.id,card:s,label:N.name+"",dueDate:N.dueDate,owners:N.owners||[],onLabelChange:F=>{E([{id:N.id,key:"name",value:F}])},onDelete:()=>{E([{id:N.id,key:"status",value:CardCheckListItemStatus.DELETED}])},onDueDateChange:F=>{E([{id:N.id,key:"dueDate",value:F}])},onAssigneeChange:F=>{E([{id:N.id,key:"owners",value:F}])},completed:N.status===CardCheckListItemStatus.CHECKED,toggleComplete:()=>{E([{id:N.id,key:"status",value:N.status===CardCheckListItemStatus.CHECKED?CardCheckListItemStatus.ACTIVE:CardCheckListItemStatus.CHECKED}])},disabled:o},N.id))}),o?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6({[styles$l.newItemWrapperActive]:R}),children:R?jsxRuntimeExports.jsx(CardTableCheckListItem,{ref:A,card:s,label:j,owners:[],dueDate:null,onBlur:D,onLabelChange:T,completed:!1,autoFocus:R,onEnterClick:O}):null}),jsxRuntimeExports.jsx("div",{className:styles$l.newItemWrapperInactive,children:jsxRuntimeExports.jsx(NewCheckListItemButton,{disabled:R,onClick:()=>S(!0)})})]})]})]})});function DraggableCheckListItem$1(r){const{listeners:s,setNodeRef:a,transform:i,transition:o,isDragging:x}=useSortable({id:r.id}),y={transform:CSS.Transform.toString(i),transition:o!=null?o:void 0};return jsxRuntimeExports.jsx("div",{style:y,ref:a,...r.disabled?{}:s,children:jsxRuntimeExports.jsx(CardTableCheckListItem,{...r,isDragPlaceholder:x})})}function DraggableItems$1({items:r,handleDragEnd:s,card:a,children:i}){const o=React$6.useMemo(()=>r.map(({id:j})=>j),[r]),[x,y]=React$6.useState(null),_=React$6.useMemo(()=>r.find(j=>j.id===x),[x,r]);function E(j){y(null);const{active:T,over:A}=j;if(!A||T.id===A.id)return;const M=o.indexOf(A.id);M!==-1&&s(T.id,M)}function R(j){const{active:T}=j;y(T.id)}const S=React$6.useMemo(()=>{if(!_)return null;const j={"--dragLayer__anim-duration":`${TASK_DROP_ANIMATION.duration}ms`,"--dragLayer__anim-easing":TASK_DROP_ANIMATION.easing};return jsxRuntimeExports.jsx("div",{style:j,children:jsxRuntimeExports.jsx(CardTableCheckListItem,{id:_.id,disabled:!0,card:a,isDragOverlay:!0,className:styles$l.dragOverlay,label:_.name,owners:_.owners||[],dueDate:_.dueDate,completed:_.status===CardCheckListItemStatus.CHECKED})})},[a,_]);return jsxRuntimeExports.jsxs(DndContext,{sensors:useSensors(usePointerSensor()),collisionDetection:closestCenter,autoScroll:{canScroll:j=>j.classList.contains(DND_KIT_SCROLLABLE_CONTAINER_CLASSNAME)},onDragStart:R,onDragEnd:E,children:[jsxRuntimeExports.jsx(SortableContext,{items:o,strategy:verticalListSortingStrategy,children:i}),jsxRuntimeExports.jsx(Portal,{type:PortalTypes.DRAG_LAYER,children:jsxRuntimeExports.jsx("div",{className:S?styles$l.isDragged:void 0,children:jsxRuntimeExports.jsx(DragOverlay,{dropAnimation:TASK_DROP_ANIMATION,children:S})})})]})}const CardTableChecklists=React$6.memo(function r({card:s,readonly:a}){var o;const i=(o=Recoil_index_20(cardChecklistSelectors.checklistsGroupedByCardId).allMap.get(s.id))!=null?o:[];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i.map(x=>jsxRuntimeExports.jsx(CardTableChecklist,{checklistId:x.id,card:s,title:x.name,readonly:a},x.id))})}),EMPTY=[];function useSyncCardAttachments(r){var R;const s=React$6.useContext(AttachmentsContext),{track:a}=useAnalytics(),i=(R=Recoil_index_20(cardAttachmentSelectors.groupedByCardId).allMap.get(r!=null?r:""))!=null?R:EMPTY,o=useSyncRemoveCardAttachment(),x=useSyncCreateCardAttachment(),y=React$6.useMemo(()=>[...s.attachmentsUploadStates.values()].filter(({taskId:S})=>S===r),[r,s.attachmentsUploadStates]),_=React$6.useCallback(S=>{r&&s.uploadAttachments(r,S,"card_attachment")},[r,s]),E=React$6.useCallback(S=>{r&&(a("removed_attachment",{extra_str1:r}),o(S))},[r,o,a]);return React$6.useEffect(()=>s.onUploadAttachmentComplete(S=>{!S.taskId||S.taskId!==r||x({id:S.fileId,cardId:S.taskId,url:S.url,displayName:S.originalFileName,mimeType:S.mimeType,fileSize:S.fileSize,duration:S.duration,creationDate:Date.now()})}),[r,s,x]),React$6.useMemo(()=>({attachments:i,attachmentsUploadStates:y,attachmentsUploadErrors:s.attachmentsUploadErrors,abortAttachmentUpload:s.abortAttachmentUpload,removeAttachment:E,uploadAttachments:_,resetAttachmentsUploadErrors:s.resetAttachmentsUploadErrors}),[i,y,s.abortAttachmentUpload,s.attachmentsUploadErrors,E,s.resetAttachmentsUploadErrors,_])}const item="_item_7wz2n_1",itemCover="_itemCover_7wz2n_8",attachmentInput$1="_attachmentInput_7wz2n_20",attachmentsIcon="_attachmentsIcon_7wz2n_42",animatedAttachmentsIcon="_animatedAttachmentsIcon_7wz2n_48",tray="_tray_7wz2n_63",styles$k={item,itemCover,attachmentInput:attachmentInput$1,attachmentsIcon,animatedAttachmentsIcon,"ani-fill-icon":"_ani-fill-icon_7wz2n_1",tray},FILE_ATTACHMENT_THUMBNAIL_BASE_URL$1=`${SETTINGS_THUMBNAIL_SERVER_URL}/get_thumbnail`,CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE=24,CardTableFileAttachments=reactExports.memo(function r({cardId:s,uploadProgress:a,animateAttachments:i,uploadButtonClassname:o}){const{attachments:x}=useSyncCardAttachments(s),{attachmentsUploadStates:y,uploadAttachments:_}=reactExports.useContext(AttachmentsContext),E=reactExports.useRef(y);reactExports.useEffect(()=>{E.current=y},[y]);const R=reactExports.useMemo(()=>x.map(j=>FileAttachmentRecord.create({...j,globalTaskId:j.cardId})),[x]),S=reactExports.useCallback(j=>{const{files:T}=j.currentTarget;T&&(_==null||_(s,T,"card_attachment"))},[s,_]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(AttachmentList,{uploadButtonClassname:o,fileAttachments:R,lastChild:jsxRuntimeExports.jsxs("div",{className:o,style:{position:"relative",width:24,height:24,marginInlineStart:4,display:"flex",alignItems:"center",justifyContent:"center",...i?{opacity:1}:{}},children:[jsxRuntimeExports.jsx("span",{className:cx$6(styles$k.attachmentsIcon,{[styles$k.animatedAttachmentsIcon]:i||a!==void 0}),children:jsxRuntimeExports.jsx(SvgAttachmentsicon,{})}),jsxRuntimeExports.jsx("input",{type:"file",title:"",onChange:S,className:cx$6(styles$k.attachmentInput,CARD_CLICK_IGNORE_CLASSNAME),multiple:!0})]})})})});function AttachmentList({fileAttachments:r,lastChild:s}){const[a,i]=reactExports.useState(!1),[o,x]=reactExports.useState(0),[y,_]=reactExports.useState({});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(IndicatorTray,{btnClassName:CARD_CLICK_IGNORE_CLASSNAME,className:styles$k.tray,children:[r.map((E,R)=>{var j;let S=(j=E.url)!=null?j:"";if(S){const T=new URLSearchParams;return T.set("url",S),T.set("w",CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE.toString(10)),T.set("h",CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE.toString(10)),jsxRuntimeExports.jsx(IndicatorTray.Item,{width:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$k.item,CARD_CLICK_IGNORE_CLASSNAME),onClick:()=>{x(R),i(!0)},style:{width:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE,height:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE},children:jsxRuntimeExports.jsx("img",{style:{opacity:y[E.id]?1:0},onLoad:()=>_(A=>({...A,[E.id]:!0})),width:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE,height:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE,src:FILE_ATTACHMENT_THUMBNAIL_BASE_URL$1+"?"+T.toString(),loading:"lazy",alt:""})})},`fa:${E.id}`)}return jsxRuntimeExports.jsx("div",{className:CARD_CLICK_IGNORE_CLASSNAME,onClick:()=>{x(R),i(!0)},style:{width:FILE_ATTACHMENT_THUMBNAIL_BASE_URL$1,height:FILE_ATTACHMENT_THUMBNAIL_BASE_URL$1,backgroundColor:"var(--action-color)"}})}),s&&jsxRuntimeExports.jsx(IndicatorTray.Item,{width:CARD_FILE_ATTACHMENT_THUMBNAIL_SIZE,children:jsxRuntimeExports.jsx("div",{children:s})},"fa:extra")]}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(FileAttachmentsGallery,{fileAttachments:r,isVisible:a,onClose:()=>i(!1),startingIndex:o})})]})}const ANIMATION_DURATION=1e3,FULL_ANIMIATION_DURATION=2e3,CardTableRowContent=({model:r,isChecked:s,onCheckedChange:a,isEditable:i,dueDate:o,isDragging:x,isDragOverlay:y,showPassedDueDateAsOverdue:_,onDueDateChange:E,openActivity:R,isInlineEditing:S,onStopInlineEditing:j,uploadProgress:T,showCheckboxForCards:A})=>{var xe;const{track:M}=useAnalytics(),P=useNow2(),L=useSyncUpdateCards(),D=useSyncQueryModelById("section",r.sectionId),[O]=useBoardTableViewConfig(D==null?void 0:D.boardId),{createTag:B,sortedTagsList:N,deleteTag:F,editTag:W}=useSyncTags((D==null?void 0:D.boardId)||null),V=React$6.useCallback(ge=>{L([{id:r.id,key:"tags",value:[...ge]}])},[r.id,L]),U=React$6.useCallback(ge=>{M("card_assignee_added",{extra_str1:r.id,extra_double1:ge.length}),L([{id:r.id,key:"owners",value:ge}])},[r.id,M,L]),G=useCardFutureReminders({dueDate:o,userReminders:(xe=r.userReminders)!=null?xe:EMPTY$2,now:P}),oe=o&&r.recurrence!==null,X=Recoil_index_20(cardAttachmentSelectors.countByCardId(r.id)),ae=Recoil_index_20(cardChecklistSelectors.countByCardId(r.id))>0,ie=G.length>0,[se,Q]=useUserSessionStorageBooleanKey(`showChecklist${r.id}`,!1),[Z,J]=React$6.useState(!1),te=React$6.useMemo(()=>new Set(r.tags),[r.tags]),[de,ce]=React$6.useState(!1),me=React$6.useRef(0),ve=React$6.useRef();return React$6.useEffect(()=>{T!==void 0&&(ve.current&&clearTimeout(ve.current),ce(!0),me.current=me.current||new Date().valueOf(),ve.current=setTimeout(()=>{ce(!1)},5e3))},[T]),React$6.useEffect(()=>{if(X>0&&de&&T===void 0){let ge=0;if(me.current){const be=new Date().valueOf()-me.current;ge+=ANIMATION_DURATION-be%ANIMATION_DURATION,((be+ge)%FULL_ANIMIATION_DURATION===0||(be+ge)%FULL_ANIMIATION_DURATION>ANIMATION_DURATION)&&(ge+=ANIMATION_DURATION)}setTimeout(()=>{ce(!1),me.current=0},ge)}},[de,X,T]),jsxRuntimeExports.jsxs("div",{className:cx$6(styles$q.root,{[styles$q.checklistsOpen]:se&&ae,[styles$q.isDragOverlay]:y}),children:[jsxRuntimeExports.jsxs("div",{className:styles$q.columnsContainer,children:[O.columns.filter(ge=>ge.visible).map(ge=>{switch(ge.name){case"assignees":return jsxRuntimeExports.jsx("div",{className:styles$q.cell,style:{width:`${ge.width}%`,maxWidth:`${ge.width}%`},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",overflow:"hidden"},children:jsxRuntimeExports.jsx(CardIndicatorAssigneesAutosize,{isEditable:i,owners:r.owners||EMPTY$2,sectionId:r.sectionId,onChange:U,emptyContent:({isAssigneeModalVisible:be})=>jsxRuntimeExports.jsx("div",{className:cx$6(styles$q.emptyStateButton,styles$q.emptyStateButtonAssignee,CARD_CLICK_IGNORE_CLASSNAME,{[styles$q.emptyStateButtonForceVisible]:be}),children:jsxRuntimeExports.jsx(SvgAssignicon$1,{})})})})},ge.name);case"attachments":return jsxRuntimeExports.jsx("div",{className:styles$q.cell,style:{width:`${ge.width}%`,maxWidth:`${ge.width}%`},children:jsxRuntimeExports.jsx(CardTableFileAttachments,{uploadButtonClassname:styles$q.emptyStateButton,cardId:r.id,uploadProgress:T,animateAttachments:de})},ge.name);case"dueDate":return jsxRuntimeExports.jsx("div",{className:cx$6(styles$q.cell,styles$q.dueDateCell),style:{width:`${ge.width}%`,maxWidth:`${ge.width}%`},children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CardIndicatorDueDate_memo,{isEditable:i,dueDate:o,now:Date.now(),onChange:E,disabled:x,userReminders:r.userReminders,showPassedDueDateAsOverdue:_,cardId:r.id,recurrence:r.recurrence,emptyContent:({isCalendarVisible:be})=>jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",className:cx$6(styles$q.emptyStateButton,styles$q.emptyStateButtonDueDate,CARD_CLICK_IGNORE_CLASSNAME,{[styles$q.emptyStateButtonForceVisible]:be}),children:jsxRuntimeExports.jsx(SvgCalendaricon$1,{})})}),oe&&r.recurrence&&jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:jsxRuntimeExports.jsx(CardRecurrenceText,{dueDate:o,recurrence:r.recurrence}),children:jsxRuntimeExports.jsx("span",{className:styles$q.recurrence,children:jsxRuntimeExports.jsx(SvgRecurrenceicon,{})})}),ie?jsxRuntimeExports.jsx(CardRemindersTooltip,{reminders:G,children:jsxRuntimeExports.jsx(SvgRemindericon$1,{})}):null]})},ge.name);case"tags":return jsxRuntimeExports.jsx("div",{className:styles$q.cell,style:{width:`${ge.width}%`,maxWidth:`${ge.width}%`},children:r.tags&&r.tags.length>0?jsxRuntimeExports.jsx(IndicatorTray,{remainderWidth:44,remainderContent:({hiddenCount:be})=>jsxRuntimeExports.jsx("div",{role:"button",onClick:i?()=>J(!0):void 0,children:jsxRuntimeExports.jsxs(Badge,{theme:"boardBadgeMini",children:["+",be]})}),btnClassName:CARD_CLICK_IGNORE_CLASSNAME,children:r.tags&&N.filter(be=>{var ye;return(ye=r.tags)==null?void 0:ye.includes(be.id)}).map(be=>jsxRuntimeExports.jsx(IndicatorTray.Item,{width:be.name.length*8,children:jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:be.name,className:styles$q.tagContainer,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$q.tag,CARD_CLICK_IGNORE_CLASSNAME),onClick:i?()=>J(!0):void 0,style:{backgroundColor:be.color},children:be.name})})},`tag:${be.id}`))}):jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",className:cx$6(styles$q.emptyStateButton,styles$q.emptyStateButtonTag,CARD_CLICK_IGNORE_CLASSNAME),onClick:i?()=>J(!0):void 0,children:jsxRuntimeExports.jsx(SvgTagicon,{})})},ge.name);case"title":return jsxRuntimeExports.jsx("div",{className:cx$6(styles$q.cell,styles$q.titleCell),style:{width:`${ge.width}%`,maxWidth:`${ge.width}%`},"data-private":"lipsum",children:jsxRuntimeExports.jsxs("div",{className:styles$q.titleWrapper,children:[A===ShowCardCheckboxMode.Everywhere?jsxRuntimeExports.jsx("div",{className:styles$q.checkboxWrapper,children:jsxRuntimeExports.jsx(TaskItemCheckbox,{theme:"secondary",checked:s,disabled:!i,onClick:a})}):null,jsxRuntimeExports.jsx(CardTableRowTitle,{isChecked:s,model:r,isEditable:i,isInlineEditing:S,onStopInlineEditing:j}),ae&&jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",className:cx$6(styles$q.toggleChecklists,{[styles$q.toggleChecklistsOpen]:se}),onClickNative:be=>{Q(!se),be.stopPropagation()},children:jsxRuntimeExports.jsx(SvgChecklistsicon,{})}),r.unreadChatMentionCount?jsxRuntimeExports.jsx(ButtonInlineText,{className:styles$q.openChat,theme:"plain",onClick:R,children:jsxRuntimeExports.jsx(UnreadCountIndicator,{count:r.unreadChatMentionCount})}):r.hasUnreadActivity&&jsxRuntimeExports.jsx(ButtonInlineText,{className:styles$q.openChat,theme:"plain",onClick:R,children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(SvgChaticon$1,{})})})]})},ge.name);default:return null}}),jsxRuntimeExports.jsx("div",{style:{width:36}})]}),se&&!x&&!y&&jsxRuntimeExports.jsx("div",{className:styles$q.checklistsWrapper,onPointerDown:stopPropagation$2,onClick:stopPropagation$2,children:jsxRuntimeExports.jsx(CardTableChecklists,{card:r,readonly:!i},`${ae?1:0}${se?1:0}`)}),jsxRuntimeExports.jsx(BackdropModal,{isVisible:Z,className:CARD_CLICK_IGNORE_CLASSNAME,onClose:()=>J(!1),children:()=>jsxRuntimeExports.jsx(TeamsTagsTooltipContent_memo,{possibleTags:N,selectedTagsIds:te,createTag:B,editTag:W,deleteTag:F,onClose:()=>J(!1),shouldDisallowSelection:!1,onSelectedTagsIdsChange:ge=>{V(ge),J(!1)}})})]})},CARD_CLICK_IGNORE_CLASSNAME="cardClickIgnore",getCardHTMLElementId=r=>`card-${r}`;function isHTMLElement(r){return r!=null&&r.classList!=null&&typeof r.classList.contains=="function"}function hasIgnoreAncenster(r){return isHTMLElement(r)?r.classList.contains(CARD_CLICK_IGNORE_CLASSNAME)?!0:hasIgnoreAncenster(r.parentElement):!1}function Card({model:r,boardId:s,customViewId:a,isEditable:i=!1,isSelected:o=!1,showCardMenu:x=!1,isDragging:y,isDragDisableCursor:_,isDragOverlay:E,className:R,style:S,possibleTags:j,breadcrumbs:T,uploadAttachments:A,attachmentsUploadStates:M,onSelect:P,showPassedDueDateAsOverdue:L,updatePosition:D,duplicateCard:O,analyticsSource:B,layout:N="default",viewType:F=BoardViewType.Kanban}){var ar,ir,lr;const{id:W,name:V,isChecked:U}=r,G=React$6.useMemo(()=>getCardHTMLElementId(W),[W]),oe=useNow2(),X=useSyncUpdateCards(),ee=useSyncUpdateCardsChecked(),{track:ae}=useAnalytics(),ie=React$6.useRef(null),se=React$6.useRef(null),Q=React$6.useRef(null),Z=React$6.useRef(null),J=React$6.useRef(null),[te,de]=React$6.useState(!1),ce=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),()=>de(!1)];useOutSideEvent(["click","pointerdown","wheel"],React$6.useMemo(()=>[J,Z],[]),()=>de(!1));const[me,ve]=React$6.useState(!1),[xe,ge]=React$6.useState(null),be=React$6.useMemo(()=>linkifyText(V,nonPropagatingWrapLink),[V]),ye=React$6.useCallback(()=>{openModal(CardArchiveModal,{card:r})},[r]),Ie=React$6.useCallback(()=>{openModal(CardAssigneeManagerModal,{boardId:s,card:r})},[s,r]),Pe=r.dueDate?cardDueDateFromString(r.dueDate):null,we=React$6.useRef(null),[Re,Se]=React$6.useState(!1),Ee=React$6.useCallback(()=>{Se(!0),ae("card_time_date_picker_tapped",{extra_str1:r.id})},[r.id,ae]),Ce=React$6.useCallback(()=>{var Xe;(Xe=we.current)==null||Xe.destroy(),Se(!1)},[]),he=React$6.useCallback(()=>{openModal(TeamsTagsTooltipModal,{boardId:s,card:r,isEditable:i})},[s,i,r]),Ae=React$6.useCallback(()=>getCardUrl("",s,W),[s,W]),Ne=React$6.useCallback(()=>ve(!1),[]),Be=React$6.useCallback(Xe=>{Xe.preventDefault(),ge({x:Xe.clientX,y:Xe.clientY}),ve(!0)},[]),Oe=React$6.useCallback(({dueDate:Xe,recurrence:$t,userReminders:Ut})=>{X([{id:W,key:"dueDate",value:Xe?cardRecordDueDateToString(Xe):null},{id:W,key:"recurrence",value:$t},{id:W,key:"userReminders",value:Ut}])},[W,X]),Ue=React$6.useCallback(()=>{P==null||P(r.id,{activity:!0,boardId:a!=null?a:s,isCustomView:!!a})},[P,r.id,a,s]),Ve=React$6.useCallback(()=>D==null?void 0:D(W,"top"),[W,D]),We=React$6.useRef(null),[Te,De]=React$6.useState(!1),Le=React$6.useCallback(Xe=>{if(F===BoardViewType.Table&&Xe.detail===2&&i){De(!0);const $t=We.current;$t!==null&&clearTimeout($t);return}hasIgnoreAncenster(Xe.target)||(We.current=setTimeout(()=>{P==null||P(r.id,{activity:!0,shiftKey:Xe.shiftKey,boardId:s,isCustomView:!!a})},F===BoardViewType.Table?300:0))},[F,i,P,r.id,s,a]),Fe=stopPropagation$2;useOutSideEvent(["pointerdown","wheel"],[Q,se],me?Ne:void 0);const[Ke,nt]=React$6.useState(!1),qe=React$6.useCallback(()=>{!i||!A||nt(!0)},[i,A]),Je=React$6.useCallback(Xe=>{Xe.preventDefault(),!(!i||!A)&&nt(!0)},[i,A]),Qe=React$6.useCallback(()=>{nt(!1)},[]),Wt=useMiniToastNotifications(),ct=React$6.useCallback(()=>{Wt.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.files.tooBig"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})},[Wt]),qt=React$6.useCallback(Xe=>{var Ut;if(Xe.preventDefault(),!i||!A)return;nt(!1);const $t=(Ut=Xe.dataTransfer)==null?void 0:Ut.items;if($t){const Yt=new DataTransfer;for(let Xt of $t)if(Xt.kind==="file"){const vr=Xt.getAsFile();vr&&(isFileTooBigTeams(vr)?ct():Yt.items.add(vr))}Yt.files.length>0&&A(Yt.files)}},[i,ct,A]),[it,sr]=React$6.useState(!1),st=Recoil_index_20(cacheTaxonomy.board.byId(s)),It=Recoil_index_20(spaceSelectors.byCardId(r.id)),er=useTeamBoardPermissions(st);React$6.useEffect(()=>{const Xe=$t=>{var Yt;const Ut=(Yt=$t.clipboardData)==null?void 0:Yt.items;if(Ut&&A){const Xt=new DataTransfer;for(let vr of Ut)if(vr.kind==="file"){const Mr=vr.getAsFile();Mr&&(isFileTooBigTeams(Mr)?ct():Xt.items.add(Mr))}Xt.files.length>0&&A(Xt.files)}};return it&&document.addEventListener("paste",Xe),()=>document.removeEventListener("paste",Xe)},[it,ct,A]);const Ge=M&&M.length>0?Math.min(...M.map(Xe=>Xe.progress)):void 0,Ze=React$6.useMemo(()=>{var Xe;return(Xe=r.tags)!=null?Xe:[]},[r.tags]),et=React$6.useCallback(Xe=>{ee([W],Xe),ae(Xe?"checked_card":"unchecked_card",{extra_str1:W,extra_str2:{component:B,method:"checkbox"}})},[B,W,ae,ee]),dt=React$6.useCallback(Xe=>{Xe.stopPropagation(),ve(xe?!0:!me),ge(null)},[xe,me]),Ct=React$6.useCallback(Xe=>{Xe.stopPropagation(),de(!0)},[]),mt=(It==null?void 0:It.showCheckboxForCards)===ShowCardCheckboxMode.Everywhere,yt=useSyncAddBoardMembers(),Ft=useSyncInviteWorkspaceMember((ar=It==null?void 0:It.id)!=null?ar:null),Rt=React$6.useCallback(async Xe=>{assertNonNullable(st);const $t={[Xe.publicUserId]:[Xe,BoardPermissionLevel.MEMBER]},Ut=await yt(st,$t);return ae("board_member_added",{extra_str1:st.id,extra_str2:"existing_board",extra_double1:1}),Ut},[st,yt,ae]),Kt=React$6.useCallback(Xe=>Ft(Xe,st==null?void 0:st.id),[st==null?void 0:st.id,Ft]),tr=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:ie,id:G,style:S,onClick:Le,onDragEnter:qe,onDragLeave:Qe,onDragOver:Je,onMouseEnter:()=>sr(!0),onMouseLeave:()=>sr(!1),onDrop:qt,className:cx$6(styles$v.Card,R,{[styles$v.isChecked]:U,[styles$v.isPlaceholder]:y,[styles$v.isDragDisableCursor]:_,[styles$v.isDragOverlay]:E,[styles$v.isMenuVisible]:me,[styles$v.isFilesDragOver]:Ke,[styles$v.isSelected]:o,[styles$v.withAssigneeButton]:i&&!((ir=r.owners)!=null&&ir.length),[styles$v.isCompact]:N==="compact",[styles$v.isTable]:F===BoardViewType.Table,[styles$v.hasCheckbox]:mt}),onContextMenu:x?Be:void 0,children:[N==="compact"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:styles$v.mainContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$v.titleWrapper,children:[jsxRuntimeExports.jsx("div",{className:styles$v.checkboxWrapperInline,children:jsxRuntimeExports.jsx(TaskItemCheckbox,{theme:"secondary",checked:U,size:"small",onClick:et,disabled:!i})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$v.title,styles$v.oneline),"data-private":"lipsum",children:be})]}),N==="compact"&&jsxRuntimeExports.jsx(CardIndicatorsCompact,{now:oe,model:r,breadcrumbs:T==null?void 0:T.compact,isEditable:i,disabled:y,dueDate:Pe,onDueDateChange:Oe,showPassedDueDateAsOverdue:L,tags:Ze,possibleTags:j,openActivity:Ue,cardOnHoverClassName:styles$v.visibleOnHover})]})}),F===BoardViewType.Table?jsxRuntimeExports.jsx(CardTableRowContent,{dueDate:Pe,isEditable:i,isInlineEditing:Te,onStopInlineEditing:()=>De(!1),model:r,onDueDateChange:Oe,openActivity:Ue,title:be,isDragging:y,isDragOverlay:E,uploadProgress:Ge,isChecked:U,onCheckedChange:et,showCheckboxForCards:It==null?void 0:It.showCheckboxForCards}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[N==="default"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:styles$v.mainContent,children:[T?jsxRuntimeExports.jsx("div",{className:styles$v.breadcrumbsWrapper,children:T==null?void 0:T.detailed}):null,jsxRuntimeExports.jsxs("div",{className:styles$v.titleWrapper,children:[jsxRuntimeExports.jsx("div",{className:styles$v.checkboxWrapperInline,children:jsxRuntimeExports.jsx(TaskItemCheckbox,{theme:"secondary",checked:U,onClick:et,disabled:!i})}),jsxRuntimeExports.jsx("div",{className:cx$6(styles$v.title,styles$v.multiline),"data-private":"lipsum",children:be})]}),Ze.length>0&&jsxRuntimeExports.jsx("div",{className:styles$v.tags,children:jsxRuntimeExports.jsx(CardTagsList_connector,{tagIds:Ze,possibleTags:j})}),jsxRuntimeExports.jsx(CardIndicators_memo,{uploadProgress:Ge,isEditable:i,model:r,now:oe,disabled:y,openActivity:Ue,showPassedDueDateAsOverdue:L,cardOnHoverClassName:styles$v.visibleOnHover})]})}),x&&!E&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!((lr=r.owners)!=null&&lr.length)&&jsxRuntimeExports.jsx(ButtonInlineText,{ref:J,theme:"plain",className:styles$v.assignButton,onClickNative:Ct,children:jsxRuntimeExports.jsx(SvgAssignicon$1,{})}),jsxRuntimeExports.jsx(ButtonInlineText,{ref:Q,theme:"plain",className:styles$v.menuButton,onClickNative:dt,children:jsxRuntimeExports.jsx(SvgDotsicon,{})})]})]})]}),x&&jsxRuntimeExports.jsx(DropdownMenu,{from:xe||Q,isVisible:me,position:"bottom-start",theme:"modern",children:jsxRuntimeExports.jsx("div",{ref:se,onPointerDown:Fe,children:jsxRuntimeExports.jsx(CardMenu_memo,{model:r,canUserEditCard:i,canUserAchiveCard:er.canArchiveCards,getCardUrl:Ae,hideMenu:Ne,archiveCard:ye,openTags:he,openAssign:Ie,openCalendar:Ee,updateChecked:et,openActivity:Ue,moveToTop:D?Ve:void 0,duplicateCard:O})})}),jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:Re,onClose:Ce,children:jsxRuntimeExports.jsx("div",{onPointerDown:Fe,children:jsxRuntimeExports.jsx(CardDueDate_memo,{ref:we,boardId:s,defaultSectionId:r.sectionId,dueDate:Pe,now:oe,userReminders:r.userReminders,recurrence:r.recurrence,onChange:Oe,allowRecurrenceConfig:!0})})}),jsxRuntimeExports.jsx(Tooltip2,{from:J,isVisible:te,className:"CardIndicatorAssignees__tooltip",position:"bottom-start",children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[ce],children:jsxRuntimeExports.jsx(FocusLockCombination,{autoFocus:!0,children:jsxRuntimeExports.jsx("div",{onClick:stopPropagation$2,onPointerDown:stopPropagation$2,children:jsxRuntimeExports.jsx(AssigneeManager,{card:r,onClose:()=>de(!1)})})})})})]});return It?jsxRuntimeExports.jsx(AddBoardMemberProvider,{spaceId:It.id,boardPermissions:{canAddMemberToBoard:er.canAddMemberToBoard},onAddBoardMember:Rt,onInviteWorkspaceMember:Kt,children:tr}):tr}React$6.memo(Card);const AssigneeManager=({card:r,onClose:s})=>{const a=Recoil_index_20(boardSelectors.idByCardId(r.id)),{sortedBoardMembers:i}=useSyncBoardSortedMembers(a!=null?a:""),{updateCards:o}=useSyncCards(),x=React$6.useCallback(y=>{o([{id:r.id,key:"owners",value:y}])},[r.id,o]);return jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:r.owners,sortedBoardMembers:i,onClose:s,onChange:x})},root$3="_root_1m6em_1",backdropModal="_backdropModal_1m6em_8",backdropInner="_backdropInner_1m6em_12",controls="_controls_1m6em_21",meta="_meta_1m6em_40",imageContainer="_imageContainer_1m6em_55",image="_image_1m6em_55",draggableImage="_draggableImage_1m6em_68",imageGrabbed="_imageGrabbed_1m6em_72",nonImageContainer="_nonImageContainer_1m6em_76",imageWrapper="_imageWrapper_1m6em_89",prev="_prev_1m6em_99",next="_next_1m6em_118",name="_name_1m6em_136",metaSecondRow="_metaSecondRow_1m6em_141",textContent="_textContent_1m6em_147",imageStateWrapper="_imageStateWrapper_1m6em_156",styles$j={root:root$3,backdropModal,backdropInner,controls,meta,imageContainer,image,draggableImage,imageGrabbed,nonImageContainer,imageWrapper,prev,next,name,metaSecondRow,textContent,imageStateWrapper},PADDING_SIZE=72,imageMimeTypes=["image/png","image/jpeg","image/jpg","image/webp","image/tiff","image/gif"],isImage=r=>r.mimeType&&imageMimeTypes.includes(r.mimeType),zoomEmitter=createSingleEventEmitter(),FileAttachmentsGallery=({fileAttachments:r,isVisible:s,startingIndex:a=0,onClose:i})=>{const[o,x]=React$6.useState(a);React$6.useEffect(()=>{x(a)},[a]);const y=React$6.useMemo(()=>o>r.length-1?0:o,[r.length,o]),_=r[y],E=y+1<r.length,R=y-1>=0,S=React$6.useCallback(()=>{x(E?y+1:0)},[E,y]),j=React$6.useCallback(()=>{x(R?y-1:r.length-1)},[R,y,r.length]);React$6.useEffect(()=>{if(s){const L=D=>{D.key==="ArrowLeft"&&(D.preventDefault(),j()),D.key==="ArrowRight"&&(D.preventDefault(),S())};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)}},[S,j,s]);const T=usePreviousValue(y),[A,M]=React$6.useState(!0);React$6.useEffect(()=>{s?setTimeout(()=>M(!1),100):M(!0)},[s]);const P=useTransition(y,{from:{transform:`translateX(${(y>T||T===r.length-1&&y===0)&&!(T===0&&y===r.length-1)?"":"-"}150%)`},enter:{transform:"translateX(0%)"},leave:{transform:`translateX(${(y>T||T===r.length-1&&y===0)&&!(T===0&&y===r.length-1)?"-":""}150%)`},config:config$1.default,immediate:A});return _?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(BackdropModal,{isVisible:s,className:cx$6(styles$j.backdropModal,CARD_CLICK_IGNORE_CLASSNAME),backdropClassName:styles$j.backdropInner,onClose:i,preventPointerDown:!0,preventBackdropClickPropagation:!0,position:"top",children:jsxRuntimeExports.jsxs("div",{onPointerDown:stopPropagation$2,onContextMenu:stopPropagation$2,className:cx$6(styles$j.root,CARD_CLICK_IGNORE_CLASSNAME),style:{"--file-attachment-gallery-padding":`${PADDING_SIZE}px`},children:[jsxRuntimeExports.jsxs("div",{className:styles$j.controls,children:[_&&isImage(_)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:()=>zoomEmitter.emit("up"),children:jsxRuntimeExports.jsx(SvgZoomUpicon,{})}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:()=>zoomEmitter.emit("down"),children:jsxRuntimeExports.jsx(SvgZoomDownicon,{})})]}),jsxRuntimeExports.jsx("a",{href:_.url,download:_.displayName,target:"_blank",rel:"noopener noreferrer",children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",children:jsxRuntimeExports.jsx(SvgDownloadicon,{})})}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:i,children:jsxRuntimeExports.jsx(SvgCloseicon,{})})]}),P((L,D)=>{var B,N,F;const O=r[D];if(!O)return null;switch(!0){case isImage(O):return jsxRuntimeExports.jsx(ImageView,{url:O.url,name:O.displayName,style:L});case O.mimeType==="application/pdf":return jsxRuntimeExports.jsx(animated.div,{style:L,className:styles$j.nonImageContainer,children:jsxRuntimeExports.jsx("iframe",{src:O.url,title:O.displayName,width:"100%",height:"100%"})});case O.mimeType==="text/html":return jsxRuntimeExports.jsx(animated.div,{style:L,className:styles$j.nonImageContainer,children:jsxRuntimeExports.jsx("iframe",{src:O.url,title:O.displayName,width:"100%",height:"100%",style:{background:"white"}})});case((B=O.mimeType)==null?void 0:B.startsWith("text/")):return jsxRuntimeExports.jsx(TextView,{url:O.url,style:L,monospace:!0});case O.mimeType==="application/json":return jsxRuntimeExports.jsx(TextView,{url:O.url,monospace:!0,style:L});case((N=O.mimeType)==null?void 0:N.startsWith("video/")):return jsxRuntimeExports.jsx(animated.div,{style:L,className:styles$j.nonImageContainer,children:jsxRuntimeExports.jsx("video",{style:{maxWidth:"100%",maxHeight:"100%"},controls:!0,children:jsxRuntimeExports.jsx("source",{src:O.url,type:(F=O.mimeType)!=null?F:void 0})})});default:return jsxRuntimeExports.jsx(animated.div,{style:L,className:styles$j.nonImageContainer,children:jsxRuntimeExports.jsx(SvgFoldericon,{})})}}),r.length>1?jsxRuntimeExports.jsx("div",{className:styles$j.prev,role:"button",onClick:j,children:jsxRuntimeExports.jsx(SvgChevronicon,{})}):null,r.length>1?jsxRuntimeExports.jsx("div",{className:styles$j.next,role:"button",onClick:S,children:jsxRuntimeExports.jsx(SvgChevronicon,{})}):null,jsxRuntimeExports.jsxs("div",{className:styles$j.meta,children:[jsxRuntimeExports.jsx("div",{className:styles$j.name,children:_.displayName}),jsxRuntimeExports.jsxs("div",{className:styles$j.metaSecondRow,children:[_.creationDate&&jsxRuntimeExports.jsx(TimeAgo,{date:_.creationDate}),jsxRuntimeExports.jsx("span",{children:"•"}),_.fileSize!==null&&formatFileSize(_.fileSize)]})]})]})})}):null},TextView=({url:r,monospace:s,style:a={},truncate:i=!1,textContainerStyle:o={}})=>{const[x,y]=React$6.useState("loading"),[_,E]=React$6.useState(""),{formatMessage:R}=useI18n();React$6.useEffect(()=>{async function j(){y("loading");try{const A=await(await fetch(r)).text();E(i?A.substring(0,500):A)}catch{y("error")}finally{y("success")}}j()},[i,r]);const S=React$6.useMemo(()=>({...o,...s?{fontFamily:"ui-monospace, monospace",whiteSpace:"pre-wrap"}:void 0}),[s,o]);return jsxRuntimeExports.jsxs(animated.div,{style:a,className:styles$j.nonImageContainer,children:[x==="error"&&jsxRuntimeExports.jsx("div",{children:R("_.errors.unknown.error-occoured")}),x==="loading"&&jsxRuntimeExports.jsx(Delayed,{ms:200,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})}),x==="success"&&jsxRuntimeExports.jsx(SimpleScrollView,{className:styles$j.textContent,style:S,children:_})]})},ImageView=({name:r,url:s,style:a})=>{const{formatMessage:i}=useI18n(),[o,x]=React$6.useState(null),y=React$6.useRef(null),_=React$6.useRef(100),E=React$6.useRef(null),R=React$6.useCallback(D=>{const O=y.current;if(!O)return;let B=D.currentTarget.naturalWidth,N=D.currentTarget.naturalHeight;E.current={width:B,height:N};const F=B/N,W=O.getBoundingClientRect(),V=W.width-2*PADDING_SIZE,U=W.height-2*PADDING_SIZE;V<B&&(B=V,N=B/F),U<N&&(N=U,B=N*F),_.current=B/D.currentTarget.naturalWidth*100,x({width:B,height:N})},[]),[S,j]=React$6.useState(!1);React$6.useEffect(()=>zoomEmitter.on(D=>{const O=y.current;if(!O)return;let B;D==="up"&&(B=lodashExports.clamp(_.current+20,5,800)),D==="down"&&(B=lodashExports.clamp(_.current-20,5,800));const N=E.current;if(B&&N){_.current=B;const F=N.width/100*B,W=N.height/100*B,V=O.getBoundingClientRect(),U=V.width,G=V.height;j(U<F||G<W),x({width:F,height:W})}}),[]);const T=React$6.useRef(!1),[A,M]=React$6.useState(!1),P=React$6.useRef(null),L=React$6.useCallback(()=>{T.current=!0,M(!0)},[]);return React$6.useEffect(()=>{const D=()=>{T.current=!1,M(!1)},O=B=>{T.current&&(B.preventDefault(),P.current.scrollLeft=P.current.scrollLeft-B.movementX,P.current.scrollTop=P.current.scrollTop-B.movementY)};return document.addEventListener("mouseup",D),document.addEventListener("mousemove",O),()=>{document.removeEventListener("mouseup",D),document.removeEventListener("mousemove",O)}},[]),jsxRuntimeExports.jsx(animated.div,{style:a,onDragStart:D=>D.preventDefault(),className:styles$j.imageContainer,ref:y,onMouseDown:L,children:jsxRuntimeExports.jsx(ImageLoader,{src:s,timeout:6e4,render:D=>D===ImageLoaderLoadingState.LOADING?jsxRuntimeExports.jsx(Delayed,{ms:200,children:jsxRuntimeExports.jsx("div",{className:styles$j.imageStateWrapper,children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{})})}):D===ImageLoaderLoadingState.FAILURE?jsxRuntimeExports.jsx("div",{className:styles$j.imageStateWrapper,children:i("_.errors.unknown.error-occoured")}):jsxRuntimeExports.jsx("div",{className:styles$j.imageWrapper,ref:P,children:jsxRuntimeExports.jsx("img",{src:s,onLoad:R,alt:r,className:cx$6(styles$j.image,{[styles$j.draggableImage]:S,[styles$j.imageGrabbed]:S&&A}),style:o||{width:"100%",height:"100%"}})})},s)})};var styles$i={root:"ttp1h0"};const TrashIcon=r=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...r,children:[jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M5 7.2h14.4"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M18.6 7.2a.8.8 0 0 0-1.6 0h1.6Zm-11.2 0a.8.8 0 1 0-1.6 0h1.6Zm.8 0a.8.8 0 1 0 1.6 0H8.2Zm6.4 0a.8.8 0 0 0 1.6 0h-1.6Zm2.4 0v11.2h1.6V7.2H17Zm0 11.2a.8.8 0 0 1-.8.8v1.6a2.4 2.4 0 0 0 2.4-2.4H17Zm-.8.8h-8v1.6h8v-1.6Zm-8 0a.8.8 0 0 1-.8-.8H5.8a2.4 2.4 0 0 0 2.4 2.4v-1.6Zm-.8-.8V7.2H5.8v11.2h1.6ZM9.8 7.2V5.6H8.2v1.6h1.6Zm0-1.6a.8.8 0 0 1 .8-.8V3.2a2.4 2.4 0 0 0-2.4 2.4h1.6Zm.8-.8h3.2V3.2h-3.2v1.6Zm3.2 0a.8.8 0 0 1 .8.8h1.6a2.4 2.4 0 0 0-2.4-2.4v1.6Zm.8.8v1.6h1.6V5.6h-1.6Z"}),jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M10.6 11.2V16M13.8 11.2V16"})]}),UnmuteIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...r,children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m22 9-6 6m0-6 6 6M11 5 6 9H2v6h4l5 4V5Z"})}),MuteIcon=r=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...r,children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M11 5 6 9H2v6h4l5 4V5ZM19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})});var THUMBNAIL_SIZES={width:522,height:325},styles$h={root:"_1ar1h20",thumbnail:"_1ar1h22",thumbnailLoaded:"_1ar1h23",meta:"_1ar1h24",filename:"_1ar1h25",date:"_1ar1h26",thumbnailContainer:"_1ar1h27",spinner:"_1ar1h28",actions:"_1ar1h21",downloadButton:"_1ar1h29",actionButton:"_1ar1h2a",audioWrapper:"_1ar1h2b"};const SvgDownloadcardicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M8.719 10.595 12 13.875l3.281-3.28M12 5.125v8.748M18.875 13.875v4.375a.624.624 0 0 1-.625.625H5.75a.625.625 0 0 1-.625-.625v-4.375"})),FILE_ATTACHMENT_THUMBNAIL_BASE_URL=`${SETTINGS_THUMBNAIL_SERVER_URL}/get_thumbnail`,FileAttachment=({displayThumbnail:r,fileAttachmentRecord:s,onClick:a,fileAttachmentUploadState:i,readonly:o,removeAttachment:x,abortAttachmentUpload:y})=>{var B,N;const[_,E]=React$6.useState(!1),R=React$6.useRef(null),S=i!=null,j=!!s,[T,A]=React$6.useState(!0),M=(B=s==null?void 0:s.mimeType)==null?void 0:B.startsWith("video/"),P=(N=s==null?void 0:s.mimeType)==null?void 0:N.startsWith("audio/"),L=React$6.useMemo(()=>{var W,V,U,G;if(r===!1)return jsxRuntimeExports.jsx("div",{className:styles$h.thumbnail});let F="";if(s&&s.url!=null&&s.url!==""&&(F=s.url),F!==""){if((W=s==null?void 0:s.mimeType)!=null&&W.startsWith("image/")){const oe=new URLSearchParams;return oe.set("url",F),oe.set("w",THUMBNAIL_SIZES.width.toString(10)),oe.set("h",THUMBNAIL_SIZES.height.toString(10)),jsxRuntimeExports.jsx("img",{className:cx$6(styles$h.thumbnail,{[styles$h.thumbnailLoaded]:_}),src:FILE_ATTACHMENT_THUMBNAIL_BASE_URL+"?"+oe.toString(),onLoad:()=>E(!0),loading:"lazy",alt:""},F)}return M?jsxRuntimeExports.jsx("video",{loop:!0,ref:R,muted:T,className:styles$h.thumbnail,width:THUMBNAIL_SIZES.width,children:jsxRuntimeExports.jsx("source",{src:F,type:(V=s==null?void 0:s.mimeType)!=null?V:void 0})},F):P?jsxRuntimeExports.jsx("div",{className:cx$6(styles$h.thumbnail,styles$h.audioWrapper),children:jsxRuntimeExports.jsx("audio",{controls:!0,children:jsxRuntimeExports.jsx("source",{src:F,type:(U=s==null?void 0:s.mimeType)!=null?U:void 0})},F)}):(s==null?void 0:s.mimeType)==="text/html"?jsxRuntimeExports.jsxs(React$6.Fragment,{children:[jsxRuntimeExports.jsx("object",{className:styles$h.thumbnail,data:F,type:"text/html",children:" "}),jsxRuntimeExports.jsx("div",{className:styles$h.thumbnail,style:{background:"transparent",position:"absolute",top:0}})]},F):(G=s==null?void 0:s.mimeType)!=null&&G.startsWith("text/")||(s==null?void 0:s.mimeType)==="application/json"?jsxRuntimeExports.jsx("div",{className:styles$h.thumbnail,children:jsxRuntimeExports.jsx(TextView,{truncate:!0,url:F,monospace:!0,textContainerStyle:{fontSize:8,padding:8,overflow:"hidden"}})},F):(s==null?void 0:s.mimeType)==="application/pdf"?jsxRuntimeExports.jsxs(React$6.Fragment,{children:[jsxRuntimeExports.jsx("object",{className:styles$h.thumbnail,data:F,type:"application/pdf",children:" "}),jsxRuntimeExports.jsx("div",{className:styles$h.thumbnail,style:{background:"transparent",position:"absolute",top:0}})]},F):jsxRuntimeExports.jsx("div",{className:styles$h.thumbnail},F)}return null},[r,s,P,T,_,M]),D=()=>{s!=null&&s.id!=null&&x!=null?x(s.id):i!=null&&i.fileId!=null&&y!=null&&y(i.fileId)};let O="";return s&&(O=s.displayName),i&&(O=i.originalFileName),jsxRuntimeExports.jsxs("div",{className:styles$h.root,onClick:a,onMouseEnter:()=>{var F;(F=R.current)==null||F.play()},onMouseLeave:()=>{var F;return(F=R.current)==null?void 0:F.pause()},children:[jsxRuntimeExports.jsxs("div",{className:styles$h.thumbnailContainer,children:[L,S&&jsxRuntimeExports.jsx(LoadingSpinnerIcon,{className:styles$h.spinner}),j||!o?jsxRuntimeExports.jsxs("div",{className:styles$h.actions,children:[j&&jsxRuntimeExports.jsx("a",{href:(s==null?void 0:s.url)||"",target:"_blank",rel:"noopener noreferrer",onClick:F=>F.stopPropagation(),className:styles$h.downloadButton,children:jsxRuntimeExports.jsx(SvgDownloadcardicon,{})}),o?null:jsxRuntimeExports.jsx("button",{className:styles$h.actionButton,onClick:F=>{F.stopPropagation(),D()},children:jsxRuntimeExports.jsx(TrashIcon,{})}),M?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx("button",{className:styles$h.actionButton,onClick:F=>{F.stopPropagation(),R.current&&(R.current.muted=!T),A(!T)},children:T?jsxRuntimeExports.jsx(UnmuteIcon,{}):jsxRuntimeExports.jsx(MuteIcon,{})})]}):null]}):null]}),jsxRuntimeExports.jsxs("div",{className:styles$h.meta,children:[jsxRuntimeExports.jsx("div",{className:styles$h.filename,children:O}),s!=null&&s.creationDate!==null?jsxRuntimeExports.jsx("div",{className:styles$h.date,children:jsxRuntimeExports.jsx(I18nConsumer,{children:F=>{const W=Number(s.creationDate),V=F.momentParams.date;return hooks(W).format(V)}})}):null]})]})};function FileAttachments({fileAttachments:r,fileAttachmentUploadStates:s,removeAttachment:a,abortAttachmentUpload:i,readonly:o,displayThumbnail:x=!0}){const[y,_]=reactExports.useState(!1),[E,R]=reactExports.useState(0),S=s.length+r.length,j=S===1?1:S<=8?2:3;return jsxRuntimeExports.jsxs("div",{className:styles$i.root,style:{"--columns-count":j},children:[r.map((T,A)=>jsxRuntimeExports.jsx(FileAttachment,{fileAttachmentRecord:T,removeAttachment:a,readonly:o,onClick:()=>{R(A),_(!0)},displayThumbnail:x},T.id)),s.map(T=>jsxRuntimeExports.jsx(FileAttachment,{fileAttachmentUploadState:T,abortAttachmentUpload:i,readonly:o},T.fileId)),jsxRuntimeExports.jsx(FileAttachmentsGallery,{fileAttachments:r,isVisible:y,onClose:()=>_(!1),startingIndex:E})]})}function useUpdate(){const r=useSyncUpdateTasks();return reactExports.useCallback(s=>r([s]),[r])}const DEFER_COMMIT_DEBOUNCE$1=1e3;function useDeferUpdate$1(r,s,a,i,o){const[x,y]=reactExports.useState(a),_=reactExports.useRef(!1),E=reactExports.useRef(!1),R=reactExports.useMemo(()=>lodashExports.debounce((j,T,A)=>{E.current=!0,i({id:j,key:T,value:A})},DEFER_COMMIT_DEBOUNCE$1),[i]);reactExports.useEffect(()=>()=>R.flush(),[R]),reactExports.useEffect(()=>{if(_.current)return R.cancel(),o(x)&&R(r,s,x),()=>R.cancel()},[s,r,x,R,o]),reactExports.useEffect(()=>(_.current=!0,()=>{E.current=!1,_.current=!1}),[]);function S(){o(x)||R(r,s,a),R.flush()}return{value:x,setValue:y,flush:S}}function SectionLabel({children:r,accessory:s}){return jsxRuntimeExports.jsx("h4",{className:"TaskEditPaneDetails__label",children:s===void 0?r:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:r}),jsxRuntimeExports.jsx("span",{children:s})]})})}function isTaskTitleValid(r){return isTaskFieldValid("title",r)}const TaskTitle=reactExports.memo(function r(s){const{track:a}=useAnalytics(),i=reactExports.useRef(!1),o=reactExports.useRef(0),{value:x,setValue:y,flush:_}=useDeferUpdate$1(s.id,"title",s.title,s.onChange,isTaskTitleValid),E=reactExports.useCallback(R=>{var S,j;R.nativeEvent.isComposing||R.key===ENTER_KEY$1&&(R.preventDefault(),(j=(S=s.titleRef)==null?void 0:S.current)==null||j.blur())},[s.titleRef]);return jsxRuntimeExports.jsx("div",{className:"TaskEditPaneDetails__taskTitle",children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{ref:s.titleRef,disabled:s.disabled,maxLength:TASK_TITLE_MAX_LENGTH,onBlur:()=>{o.current=0,i.current&&(i.current=!1,a("renamed_task",{extra_str1:s.id})),_()},onChange:R=>{i.current=!0,y(R)},onClick:()=>{o.current+=1,o.current===1&&a("tapped_edit_title",{extra_str1:s.id})},onKeyDown:E,value:x,theme:DynamicTextAreaTheme.MINIMAL})})});function isTaskNoteValid(r){return isTaskFieldValid("note",r)}const TaskNote=reactExports.memo(function r(s){const a=useI18n(),{track:i}=useAnalytics(),o=reactExports.useRef(!1),{value:x,setValue:y,flush:_}=useDeferUpdate$1(s.id,"note",s.note,s.onChange,isTaskNoteValid);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SectionLabel,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.note"})}),jsxRuntimeExports.jsx("div",{className:"TaskEditPaneDetails__taskNote",children:jsxRuntimeExports.jsx(NotesTextArea,{disabled:s.disabled,maxLength:TASK_NOTE_MAX_LENGTH,onBlur:()=>{o.current&&(o.current=!1,i("changed_task_note",{extra_str1:s.id,extra_str3:"existing_task"})),_()},onChange:E=>{o.current=!0,y(E)},value:x,placeholder:a.formatMessage("_.tasks.note.placeholder")})})]})}),TaskAttachments=reactExports.memo(function r({id:s,disabled:a,isPremium:i}){const{track:o}=useAnalytics();return jsxRuntimeExports.jsx(FileAttachmentsContainer,{taskId:s,children:x=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SectionLabel,{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"TaskEditPaneDetails.attachments.title"})}),jsxRuntimeExports.jsx(FileAttachmentErrorModal,{sizeLimit:i?PREMIUM_ACCOUNT_FILE_SIZE_LIMIT:FREE_ACCOUNT_FILE_SIZE_LIMIT,errorType:x.errorModal.errorType,isVisible:x.errorModal.isVisible,onDismiss:x.errorModal.onDismiss}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:32},children:[jsxRuntimeExports.jsx(FileAttachments,{fileAttachments:x.attachments,fileAttachmentUploadStates:x.attachmentsUploadStates,removeAttachment:y=>{o("removed_attachment",{extra_str1:s}),x.removeAttachment(y)},abortAttachmentUpload:x.abortAttachmentUpload}),jsxRuntimeExports.jsx("div",{style:{height:12}}),jsxRuntimeExports.jsx(FileAttachmentsDropzone,{disabled:a,onFileDrop:x.uploadAttachments})]})]})})}),TaskEditPaneDetails=reactExports.memo(function r({task:s,isPremium:a}){const i=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_EDIT_TITLE),o=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_CHANGE_CATEGORY),x=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_ADD_LABEL),y=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_ADD_SUBTASK),_=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_ADD_REMINDER),E=useUpdate(),R=reactExports.useRef(null),S=reactExports.useRef(null),j=reactExports.useRef(null),[T,A]=reactExports.useState(!1),M=s.status!==TaskStatus.UNCHECKED;function P(){const B=R.current;if(B!=null&&B.visibleInput!=null&&B.visibleInput!==document.activeElement){B.focus();const N=B.visibleInput.value.length;B.visibleInput.setSelectionRange(N,N)}}const[L,D]=reactExports.useState(!1),O=reactExports.useCallback(()=>D(!0),[]);return jsxRuntimeExports.jsx(KeyboardShortcutsGlobal,{shortcuts:M?[]:[[i,P],[o,()=>A(!0)],[_,()=>{var B;return(B=S.current)==null?void 0:B.setCustomOneTimeReminder()}],[y,()=>{var B;return(B=j.current)==null?void 0:B.createNewSubTask()}]],children:jsxRuntimeExports.jsx("div",{className:"TaskEditPaneDetails",children:jsxRuntimeExports.jsxs("div",{className:cx$6("TaskEditPaneDetails__content",{"TaskEditPaneDetails__content--disabled":M}),children:[jsxRuntimeExports.jsx(TaskTitle,{titleRef:R,disabled:M,id:s.id,title:s.title,onChange:E}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(TaskEditPaneButtons,{task:s,isPremium:a,reminderRef:S,disabled:M,onClickTags:O,isCategoryPickerVisible:T,setIsCategoryPickerVisible:A})}),jsxRuntimeExports.jsx("div",{className:"TaskEditPaneDetails__taskLabels",children:jsxRuntimeExports.jsx(TaskEditPaneLabels_memo,{showPremiumUpsell:!0,disabled:M,shortcut:x,taskId:s.id,taskLabels:s.labels,isModalVisible:L,setIsModalVisible:D})}),jsxRuntimeExports.jsx(TaskNote,{id:s.id,note:s.note||"",disabled:M,onChange:E}),jsxRuntimeExports.jsx("div",{className:"TaskEditPaneDetails__subTasks",children:jsxRuntimeExports.jsx(SubTaskGroupConnected_,{ref:j,disabled:M,task:s})}),jsxRuntimeExports.jsx(TaskAttachments,{id:s.id,disabled:M,isPremium:a})]})},s.id)})});var styles$g={root:"o2doqp1 _115jq3g2",item:"o2doqp3 _1ts6eb6b a20c7b4 _17mzgjpg _11268mk69 fw84y34 _115jq3gcl _1ex10dn1 hmb2lk0 _1ex10dn3 _1ex10dn8 _115jq3g2",itemSkeleton:"_1ts6eb6b a20c7b4 _17mzgjpg _11268mk69 fw84y33 _115jq3gcl _12amo771 _115jq3g5z",error:"o2doqp6",addIconWrapper:"o2doqp8 _115jq3g4q",footer:"o2doqpa _115jq3gbh _115jq3gdp _115jq3geu _115jq3gg1 _115jq3gh6",footerButton:"o2doqpc _115jq3g5x _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9 _1ex10dn1 _1ex10dn3 _1ex10dn8",tryAgainButton:"o2doqpd",separator:"o2doqpf _115jq3g7w _115jq3g5w",drawerTitle:"o2doqph _115jq3g1"};const ChecklistSuggestionsDrawer=({cardId:r,...s})=>{const{suggestions:a,loading:i,error:o,addSuggestions:x,tryAgain:y}=useChecklistSuggestions({cardId:r});return jsxRuntimeExports.jsx(DrawerCommon,{suggestions:a,loading:i,error:o,addSuggestions:x,tryAgain:y,...s})},SubtasksSuggestionsDrawer=({taskId:r,...s})=>{const{suggestions:a,loading:i,error:o,addSuggestions:x,tryAgain:y}=useSubtasksSuggestions({taskId:r});return jsxRuntimeExports.jsx(DrawerCommon,{suggestions:a,loading:i,error:o,addSuggestions:x,tryAgain:y,...s})},DrawerCommon=({suggestions:r,loading:s,error:a,addSuggestions:i,tryAgain:o,...x})=>{const{formatMessage:y}=useI18n();return jsxRuntimeExports.jsx(Drawer_memo,{title:jsxRuntimeExports.jsxs("span",{className:styles$g.drawerTitle,children:[jsxRuntimeExports.jsx(SparklesIcon,{}),y("_.ai.title.suggestions")]}),closeOnOutsideClick:!1,...x,footer:jsxRuntimeExports.jsxs("div",{className:styles$g.footer,children:[jsxRuntimeExports.jsx("button",{className:cx$6(styles$g.footerButton,styles$g.tryAgainButton),onClick:o,disabled:s,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.tryAgain"})}),jsxRuntimeExports.jsx("div",{className:styles$g.separator}),jsxRuntimeExports.jsx("button",{className:styles$g.footerButton,disabled:!!(s||a||r.length===0),onClick:()=>i(r),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.addAll"})})]}),children:jsxRuntimeExports.jsxs("div",{className:styles$g.root,children:[a?jsxRuntimeExports.jsx("div",{className:styles$g.error,children:jsxRuntimeExports.jsx(FormattedMessage,{id:a})}):null,jsxRuntimeExports.jsx(AnimatePresence,{children:s?lodashExports.range(5).map(_=>jsxRuntimeExports.jsx(AnimatedSuggestion,{children:jsxRuntimeExports.jsx("div",{className:styles$g.itemSkeleton,"data-disabled":!0})},_)):r.map(_=>jsxRuntimeExports.jsxs(AnimatedSuggestion,{className:styles$g.item,onClick:()=>i([_]),children:[jsxRuntimeExports.jsx("div",{className:styles$g.addIconWrapper,children:jsxRuntimeExports.jsx(PlusIcon,{})}),jsxRuntimeExports.jsx("div",{children:_})]},_))})]})})},AnimatedSuggestion=({onClick:r,className:s,children:a,...i})=>{const[o,x]=usePresence();return jsxRuntimeExports.jsx(motion.div,{layout:!0,style:{position:o?"static":"absolute"},animate:o?"in":"out",initial:"initial",variants:{initial:{scaleY:0,opacity:0,y:-50},in:{scaleY:1,opacity:1,y:0},out:{scaleY:0,opacity:0,zIndex:-1}},onAnimationComplete:()=>!o&&x(),className:s,role:"button",onClick:()=>r==null?void 0:r(),...i,children:a})},SvgChaticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.379 8.379 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5Z"})),SvgArrowRighticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:13,height:13,fill:"none",viewBox:"0 0 13 13",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M.8 6.6H12M6.4 1 12 6.6l-5.6 5.6"})),icon$4="_icon_1r5q3_1",button$1="_button_1r5q3_5",sectionName="_sectionName_1r5q3_9",styles$f={icon:icon$4,button:button$1,sectionName},SvgCheckicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:21,fill:"none",viewBox:"0 0 20 21",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m16 5.75-7.5 8L4 9.25"})),root$2="_root_1gphl_1",sectionItem="_sectionItem_1gphl_5",cardMenuBody="_cardMenuBody_1gphl_11",icon$3="_icon_1gphl_18",chevronIcon="_chevronIcon_1gphl_22",styles$e={root:root$2,sectionItem,cardMenuBody,icon:icon$3,chevronIcon},EMPTY_SECTION_LIST=[],MoveSectionModal=({isVisible:r,onClose:s,onMoveToAnotherBoard:a,sections:i,initialSectionId:o})=>{var W;const{formatMessage:x}=useI18n(),[y,_]=React$6.useState("initial"),[E,R]=React$6.useState(),[S,j]=React$6.useState(),T=Recoil_index_20(a&&o?boardSelectors.bySectionId(o):Recoil_index_12(null)),A=T==null?void 0:T.id,M=T==null?void 0:T.spaceId,{boards:P}=useSyncBoards(),{sections:L}=useSyncSections(),D=React$6.useMemo(()=>{const V=M?P.get(M):void 0;return V?[...V.values()].sort((U,G)=>Positioning2.comparePositions(U.position,G.position)).filter(U=>{var G;return U.id!==A&&((G=L.get(U.id))==null?void 0:G.length)&&U.boardPermissions.includes("edit_board")}):[]},[A,M,P,L]),O=(W=Recoil_index_20(E!==void 0?sectionSelectors.byBoardId(E):Recoil_index_12(null)))!=null?W:EMPTY_SECTION_LIST,[B,N]=React$6.useState(!1),F=async()=>{if(!(!a||!S)){N(!0);try{await a(S)}finally{N(!1)}}};return jsxRuntimeExports.jsx(BackdropModal,{isVisible:r,onClose:()=>s(void 0),children:jsxRuntimeExports.jsx("div",{className:styles$e.root,children:jsxRuntimeExports.jsxs(CardMenu$1,{active:y,children:[jsxRuntimeExports.jsxs(CardMenuTab,{label:"initial",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:x("_.section"),type:PlatformConfig.type===PlatformType.WEB_EXTENSION?CardMenuHeaderTabItemType.BACK:void 0,onClick:PlatformConfig.type===PlatformType.WEB_EXTENSION?()=>s(void 0):void 0}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsx(ScrollView_forwarded,{children:jsxRuntimeExports.jsxs("div",{className:styles$e.cardMenuBody,children:[i.map(V=>jsxRuntimeExports.jsx(CardMenuSectionItem_,{onClick:()=>s({sectionId:V.id}),accessory:o===V.id?jsxRuntimeExports.jsx("div",{className:cx$6(styles$e.icon),children:jsxRuntimeExports.jsx(SvgCheckicon,{})}):null,children:jsxRuntimeExports.jsx("div",{className:styles$e.sectionItem,children:V.name})},V.id)),a&&D.length?jsxRuntimeExports.jsx(CardMenuSectionItem_,{onClick:()=>_("boards"),accessory:jsxRuntimeExports.jsx("div",{className:cx$6(styles$e.chevronIcon,"rtl-mirror-icon"),children:jsxRuntimeExports.jsx(ChevronRightIcon,{})}),children:jsxRuntimeExports.jsx("div",{className:styles$e.sectionItem,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.boardAutomations.action.dropdown.move-to"})})}):null]})})})]}),jsxRuntimeExports.jsxs(CardMenuTab,{label:"boards",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:x("_.boardAutomations.action.dropdown.move-to"),type:CardMenuHeaderTabItemType.BACK,onClick:()=>_("initial")}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsx(ScrollView_forwarded,{children:jsxRuntimeExports.jsx("div",{className:styles$e.cardMenuBody,children:D.map(V=>jsxRuntimeExports.jsx(CardMenuSectionItem_,{onClick:()=>{R(V.id),_("sections")},children:jsxRuntimeExports.jsxs("div",{className:"CategoryPickerMenu__item",children:[jsxRuntimeExports.jsxs("div",{className:"CategoryPickerMenu__item__title","data-private":"lipsum",children:[V.emoji?jsxRuntimeExports.jsx("span",{className:"CategoryPickerMenu__item__emoji",children:V.emoji}):jsxRuntimeExports.jsx("span",{className:"CategoryPickerMenu__item__emojiIcon",children:jsxRuntimeExports.jsx(BoardIcon,{})}),V.name]}),jsxRuntimeExports.jsx("div",{className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(ChevronRightIcon,{})})]})},V.id))})})})]}),jsxRuntimeExports.jsxs(CardMenuTab,{label:"sections",children:[jsxRuntimeExports.jsx(CardMenuHeaderTab,{title:x("_.boardAutomations.action.dropdown.move-to"),type:CardMenuHeaderTabItemType.BACK,disabled:B,onClick:()=>{j(void 0),_("boards")}}),jsxRuntimeExports.jsx(CardMenuBodyTab,{render:()=>jsxRuntimeExports.jsx(ScrollView_forwarded,{children:O.map(V=>jsxRuntimeExports.jsx(CardMenuSectionItem_,{onClick:()=>{j(V.id)},accessory:S===V.id?jsxRuntimeExports.jsx("div",{className:cx$6(styles$e.icon),children:jsxRuntimeExports.jsx(SvgCheckicon,{})}):null,children:jsxRuntimeExports.jsx("div",{className:styles$e.sectionItem,children:V.name})},V.id))})}),E?jsxRuntimeExports.jsx(CardMenuButtonsBarFooterTab,{options:["confirm"],disabledOptions:!S||B?["confirm"]:[],renderButton:()=>jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.confirm"}),onClick:()=>F().then(()=>s(void 0))}):null]})]})})})},MoveSectionButton=({sections:r,sectionId:s,onChange:a,theme:i="myday",onMoveToAnotherBoard:o,disabled:x=!1,onClick:y})=>{const[_,E]=React$6.useState(!1),R=useSyncQueryModelById("section",s),S=React$6.useCallback(T=>{E(!1),T!==void 0&&a(T.sectionId)},[a]),j=React$6.useCallback(()=>{y==null||y(),E(!0)},[y]);return React$6.useLayoutEffect(()=>{x&&E(!1)},[x]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CardButton_forwarded,{disabled:x,onClick:j,className:styles$f.button,isEmptyState:!0,icon:jsxRuntimeExports.jsx("div",{className:cx$6(styles$f.icon,"rtl-mirror-icon"),children:jsxRuntimeExports.jsx(SvgArrowRighticon,{})}),children:i==="myday"?jsxRuntimeExports.jsx(FormattedMessage,{id:"_.section"}):jsxRuntimeExports.jsx("div",{className:styles$f.sectionName,children:R==null?void 0:R.name})}),_&&jsxRuntimeExports.jsx(MoveSectionModal,{isVisible:!0,sections:r,initialSectionId:s,onMoveToAnotherBoard:o,onClose:S})]})},root$1="_root_71o64_1",styles$d={root:root$1},TagItem=({tag:r,size:s="md",shape:a="pill"})=>jsxRuntimeExports.jsx(TooltipSmallInfo,{text:r.name,children:jsxRuntimeExports.jsx("div",{title:r.name,className:styles$d.root,"data-size":s,style:{backgroundColor:r.color},children:a==="pill"?r.name:jsxRuntimeExports.jsx(VisuallyHidden,{children:r.name})})}),SvgHashicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M2.727 6H14M11 2.5l-2 11M7 2.5l-2 11M2 10h11.273"})),SvgAddTagicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("circle",{cx:12,cy:12,r:11.2,stroke:"currentColor",strokeWidth:1.6}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6,d:"M12.008 6.669v10.4M16.989 12.018h-10.4"}));function CardEditPaneTags({selectedTags:r,possibleTags:s,createTag:a,editTag:i,deleteTag:o,readonly:x,showTags:y=!0,onChange:_,className:E,emptyStateClassName:R,onClick:S,onClose:j}){const T=React$6.useMemo(()=>new Set(r),[r]),[A,M]=React$6.useState(!1),P=React$6.useMemo(()=>r?s.filter(F=>r==null?void 0:r.includes(F.id)):[],[r,s]),L=React$6.useCallback(()=>M(!0),[]),D=React$6.useCallback(()=>{M(!1),j==null||j()},[j]),O=React$6.useCallback(function(W){D(),_(W)},[D,_]),B=React$6.useCallback(()=>{S==null||S(),x||L()},[S,L,x]),N=P.length===0;return jsxRuntimeExports.jsxs("div",{className:cx$6("CardEditPaneTags",E,{"CardEditPaneTags--isModalVisible":A},R&&{[R]:N}),children:[!y||N?jsxRuntimeExports.jsx(CardButton_forwarded,{onClick:B,disabled:x,isEmptyState:!0,icon:jsxRuntimeExports.jsx("span",{className:"CardEditPaneTags__icon",children:jsxRuntimeExports.jsx(SvgHashicon,{})}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tags.title"})}):jsxRuntimeExports.jsx("div",{className:cx$6("CardEditPaneTags__content",{"CardEditPaneTags__content--readOnly":x}),onClick:B,children:P.map((F,W)=>jsxRuntimeExports.jsxs("span",{className:"CardEditPaneTags__tagWrapper",children:[jsxRuntimeExports.jsx(TagItem,{tag:F},F.id),!x&&W===P.length-1?jsxRuntimeExports.jsx("span",{className:"CardEditPaneTags__addTagIcon",children:jsxRuntimeExports.jsx(SvgAddTagicon,{})}):null]},F.id))}),jsxRuntimeExports.jsx(BackdropModal,{isVisible:A,onClose:D,children:()=>jsxRuntimeExports.jsx(TeamsTagsTooltipContent_memo,{possibleTags:s,selectedTagsIds:T,createTag:a,editTag:i,deleteTag:o,onClose:D,shouldDisallowSelection:!1,onSelectedTagsIdsChange:O})})]})}const CardEditPaneTags_memo=React$6.memo(CardEditPaneTags),SvgCalendaricon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.067,d:"M12.667 2.667H3.333C2.597 2.667 2 3.264 2 4v9.333c0 .737.597 1.334 1.333 1.334h9.334c.736 0 1.333-.597 1.333-1.334V4c0-.736-.597-1.333-1.333-1.333ZM10.667 1.333V4M5.333 1.333V4M2 6.667h12"})),SvgRemindericon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...r},reactExports.createElement("path",{stroke:"#FF6168",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M12 5.733C12 3.671 10.21 2 8 2S4 3.671 4 5.733c0 4.356-2 5.6-2 5.6h12s-2-1.244-2-5.6M10 14c-.345.413-.98.667-1.667.667S7.01 14.413 6.666 14"})),icon$2="_icon_ctl5x_1",date="_date_ctl5x_7",recurrenceIcon="_recurrenceIcon_ctl5x_12",styles$c={icon:icon$2,date,recurrenceIcon},CardButtonDueDate=({dueDate:r,now:s,onOpen:a,onChange:i,disabled:o,sectionId:x,recurrence:y,userReminders:_,dueDateOnly:E})=>{const{momentParams:R}=useI18n(),[S,j]=React$6.useState(!1),T=React$6.useRef(null),A=React$6.useRef(null),[M,P,L]=React$6.useMemo(()=>{if(!(r!=null&&r.date))return[];const U=hooks(r.date);return[U.format(R.time),U.format(R.date),U.toString()]},[r,R]),D=React$6.useCallback(()=>{j(!0),a==null||a()},[a]),O=React$6.useCallback(()=>{j(!1)},[]),B=React$6.useCallback(()=>{var U;(U=A.current)==null||U.destroy(),j(!1)},[]);React$6.useEffect(()=>{o&&B()},[o,B]);const N=useCardFutureReminders({dueDate:r,userReminders:_!=null?_:EMPTY$2,now:s}),{syncSections:F}=useSyncSections(),W=x!==void 0?F.get(x):void 0,V=!E&&W!==void 0?{boardId:W.boardId,defaultSectionId:W.id,recurrence:y,allowRecurrenceConfig:!0}:{recurrence:null,allowRecurrenceConfig:!1};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[r?jsxRuntimeExports.jsxs(CardButton_forwarded,{onClick:S?O:D,disabled:o,icon:jsxRuntimeExports.jsx("div",{className:styles$c.icon,children:N.length?jsxRuntimeExports.jsx(CardRemindersTooltip,{reminders:N,children:jsxRuntimeExports.jsx(SvgRemindericon,{})}):jsxRuntimeExports.jsx(SvgCalendaricon,{})}),children:[jsxRuntimeExports.jsxs("time",{dateTime:L,children:[P," ",r!=null&&r.hasTime?` ${M}`:""]}),y&&jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:jsxRuntimeExports.jsx(CardRecurrenceText,{dueDate:r,recurrence:y}),children:jsxRuntimeExports.jsx("span",{className:styles$c.recurrenceIcon,children:jsxRuntimeExports.jsx(SvgRecurrenceicon,{})})})]}):jsxRuntimeExports.jsx(CardButton_forwarded,{isEmptyState:!0,onClick:S?O:D,disabled:o,icon:jsxRuntimeExports.jsx("div",{className:styles$c.icon,children:jsxRuntimeExports.jsx(SvgCalendaricon,{})}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.dueDate"})}),jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:S,fromRef:T,onClose:B,children:jsxRuntimeExports.jsx(CardDueDate_memo,{ref:A,onChange:i,onClose:B,now:s,dueDate:r,userReminders:E?void 0:_,...V})})]})},CardButtonDueDate_memo=React$6.memo(CardButtonDueDate),wrapper$3="_wrapper_1ge0r_1",titleWrapper="_titleWrapper_1ge0r_8",endContent="_endContent_1ge0r_22",completionPercentageWrapper="_completionPercentageWrapper_1ge0r_28",notStarted="_notStarted_1ge0r_34",ongoing="_ongoing_1ge0r_38",completed="_completed_1ge0r_42",menu="_menu_1ge0r_46",menuButtonWrapper$1="_menuButtonWrapper_1ge0r_72",completionProgressBarWrapper="_completionProgressBarWrapper_1ge0r_78",completionProgressBar="_completionProgressBar_1ge0r_78",styles$b={wrapper:wrapper$3,titleWrapper,endContent,completionPercentageWrapper,notStarted,ongoing,completed,menu,menuButtonWrapper:menuButtonWrapper$1,completionProgressBarWrapper,completionProgressBar},CheckListHeader=React$6.memo(function r({title:s,itemsTotal:a,itemsCompleted:i,readonly:o,onTitleChange:x,toggleHideCompletedItems:y,completedItemsHidden:_,onDelete:E,afterInputContent:R}){const[S,j]=React$6.useState(!1),T=React$6.useRef(null),A=React$6.useRef(null),M=React$6.useRef(null),P=i===0?"notStarted":i===a?"completed":"ongoing",L=i===0?0:i===a?100:Math.max(1,Math.floor(i/(a/100))),D=React$6.useCallback(()=>j(G=>!G),[]),O=React$6.useCallback(()=>j(!1),[]);useOutSideEvent(["click","pointerdown"],React$6.useMemo(()=>[T,A],[]),O);const B=React$6.useCallback(()=>{E(),O()},[O,E]),N=React$6.useCallback(()=>{y(),O()},[O,y]),[F,W]=React$6.useState(s),V=React$6.useCallback(({key:G,nativeEvent:oe,currentTarget:X})=>{var ee;oe.isComposing||G==="Enter"&&((ee=M.current)==null||ee.blur(),X.value!==s&&x(F.trim()))},[x,s,F]),U=`${i}/${a}`;return React$6.useEffect(()=>{W(s)},[s]),jsxRuntimeExports.jsxs("div",{className:styles$b.root,children:[jsxRuntimeExports.jsxs("div",{className:styles$b.wrapper,children:[jsxRuntimeExports.jsx(DynamicTextField,{ref:M,className:styles$b.titleWrapper,value:F,onChange:G=>{W(G.target.value),x(G.target.value)},onKeyDown:V,onBlur:G=>{G.target.value!==s&&x(G.target.value)},disabled:o}),R,jsxRuntimeExports.jsx("div",{className:styles$b.endContent,children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6(styles$b.completionPercentageWrapper,styles$b[P]),"data-progress-text":U,children:jsxRuntimeExports.jsx("div",{children:U})}),jsxRuntimeExports.jsxs("div",{className:styles$b.menuButtonWrapper,children:[jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",ref:T,onClick:D,className:styles$b.menu,children:jsxRuntimeExports.jsx(SvgDotsicon,{})}),jsxRuntimeExports.jsx(HeaderMenu$1,{ref:A,from:T,isVisible:S,toggleHideCompletedItems:N,completedItemsHidden:_,onDelete:o?void 0:B,hideMenu:O})]})]})})]}),jsxRuntimeExports.jsx("div",{className:styles$b.completionProgressBarWrapper,children:jsxRuntimeExports.jsx("div",{className:cx$6(styles$b.completionProgressBar,styles$b[P]),children:jsxRuntimeExports.jsx("div",{style:{width:`${L}%`}})})})]})}),HeaderMenu$1=React$6.memo(React$6.forwardRef(function r({isVisible:s,from:a,completedItemsHidden:i,toggleHideCompletedItems:o,onDelete:x,hideMenu:y},_){const E=useI18n(),R=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),y];return jsxRuntimeExports.jsx(DropdownMenu,{position:"bottom-start",from:a,isVisible:s,children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[R],children:jsxRuntimeExports.jsxs("div",{ref:_,children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:o,children:E.formatMessage(i?"CheckListHeader.menu.showCheckedItems":"CheckListHeader.menu.hideCheckedItems")}),x&&jsxRuntimeExports.jsx(DropdownMenu.Item,{onClick:x,children:E.formatMessage("_.buttons.delete")})]})})})})),SvgTrashicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M5 7.2h14.4"}),reactExports.createElement("path",{fill:"currentColor",d:"M18.6 7.2a.8.8 0 0 0-1.6 0h1.6Zm-11.2 0a.8.8 0 1 0-1.6 0h1.6Zm.8 0a.8.8 0 1 0 1.6 0H8.2Zm6.4 0a.8.8 0 0 0 1.6 0h-1.6Zm2.4 0v11.2h1.6V7.2H17Zm0 11.2a.8.8 0 0 1-.8.8v1.6a2.4 2.4 0 0 0 2.4-2.4H17Zm-.8.8h-8v1.6h8v-1.6Zm-8 0a.8.8 0 0 1-.8-.8H5.8a2.4 2.4 0 0 0 2.4 2.4v-1.6Zm-.8-.8V7.2H5.8v11.2h1.6ZM9.8 7.2V5.6H8.2v1.6h1.6Zm0-1.6a.8.8 0 0 1 .8-.8V3.2a2.4 2.4 0 0 0-2.4 2.4h1.6Zm.8-.8h3.2V3.2h-3.2v1.6Zm3.2 0a.8.8 0 0 1 .8.8h1.6a2.4 2.4 0 0 0-2.4-2.4v1.6Zm.8.8v1.6h1.6V5.6h-1.6Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M10.6 11.2V16M13.8 11.2V16"})),wrapper$2="_wrapper_gctqa_1",isDragOverlay="_isDragOverlay_gctqa_17",isFocused="_isFocused_gctqa_23",isMenuOpened="_isMenuOpened_gctqa_27",isEditable="_isEditable_gctqa_28",isDragPlaceholder="_isDragPlaceholder_gctqa_33",checkboxWrapper$1="_checkboxWrapper_gctqa_42",contentWrapper="_contentWrapper_gctqa_51",textFieldWrapper="_textFieldWrapper_gctqa_58",textField="_textField_gctqa_58",menuButtonWrapper="_menuButtonWrapper_gctqa_90",menuButton="_menuButton_gctqa_90",dueDate="_dueDate_gctqa_117",assignees="_assignees_gctqa_135",previewWrapper="_previewWrapper_gctqa_140",preview="_preview_gctqa_140",previewInner="_previewInner_gctqa_159",contentWrapperCompleted="_contentWrapperCompleted_gctqa_180",contentWrapperUnactionable="_contentWrapperUnactionable_gctqa_184",styles$a={wrapper:wrapper$2,isDragOverlay,isFocused,isMenuOpened,isEditable,isDragPlaceholder,checkboxWrapper:checkboxWrapper$1,contentWrapper,textFieldWrapper,textField,menuButtonWrapper,menuButton,dueDate,assignees,previewWrapper,preview,previewInner,contentWrapperCompleted,contentWrapperUnactionable},CANCEL_KEYS=new Set(["Escape"]),CheckListItem=React$6.forwardRef(function r({id:s,card:a,toggleComplete:i,completed:o,disabled:x,label:y,onLabelChange:_,isDragPlaceholder:E=!1,isDragOverlay:R=!1,autoFocus:S,onBlur:j,onPaste:T,onEnterClick:A,onDelete:M,dueDate:P,onDueDateChange:L,owners:D,onAssigneeChange:O,className:B,endAdornment:N,focusRef:F},W){const V=x||o,[U,G]=React$6.useState(!1),oe=React$6.useRef(null),[X,ee]=React$6.useState({isFocused:!1,cursorPosition:null}),ae=React$6.useRef(null),ie=React$6.useRef(null),se=useNow2(),Q=P?cardDueDateFromString(P):null,Z=React$6.useCallback(()=>G(he=>!he),[]),J=React$6.useCallback(()=>G(!1),[]),te=React$6.useCallback(he=>ee(Ae=>({...Ae,isFocused:he})),[]);React$6.useImperativeHandle(F,()=>()=>te(!0),[te]),useOutSideEvent(["click","pointerdown"],React$6.useMemo(()=>[ae,ie],[]),J);const de=React$6.useCallback(()=>{M==null||M(),J()},[J,M]),ce=React$6.useCallback(()=>{te(!0)},[te]),me=React$6.useCallback(he=>{var Ae;te(!1),(Ae=oe.current)==null||Ae.blur(),j&&j(he)},[j,te]),ve=React$6.useCallback(he=>{_&&_(he)},[_]),xe=React$6.useCallback(({dueDate:he})=>L==null?void 0:L(he===null?null:cardRecordDueDateToString(he)),[L]),ge=React$6.useCallback(he=>O==null?void 0:O(he),[O]),be=React$6.useCallback(he=>{X.isFocused&&he.stopPropagation()},[X.isFocused]),ye=React$6.useCallback(he=>{var Ae;he.nativeEvent.isComposing||(CANCEL_KEYS.has(he.key)&&oe.current?(he.stopPropagation(),he.preventDefault(),oe.current.blur()):he.key==="Enter"&&!he.shiftKey&&(A?A(he):(Ae=oe.current)==null||Ae.blur()))},[A]),Ie=React$6.useRef(!0),Pe=React$6.useRef(),we=React$6.useCallback(he=>{var Ae;if(!Ie.current){Ie.current=!0;return}he.target.tagName!=="A"&&(ee(Ne=>({...Ne,isFocused:!0})),(Ae=oe.current)==null||Ae.focus())},[]),Re=React$6.useCallback(he=>{he.target.tagName==="A"&&(Pe.current=he.target),Ie.current=!1},[]),Se=React$6.useCallback(he=>{const Ae=Pe.current;if(Pe.current=void 0,Ae===he.target)return;const Ne=getSelectionCaretPosition(he.currentTarget);ee({isFocused:!0,cursorPosition:Ne})},[]);React$6.useLayoutEffect(()=>{var he;E||(he=oe.current)==null||he.blur()},[E]),React$6.useEffect(()=>{S&&te(!0)},[S,te]);const Ee=!s||x&&!R,Ce=React$6.useMemo(()=>linkifyText(y,nonPropagatingWrapLink),[y]);return React$6.useLayoutEffect(()=>{if(X.isFocused&&oe.current!=null){oe.current.focus();const he=oe.current.visibleInput;if(X.cursorPosition){const[Ae,Ne]=X.cursorPosition;he==null||he.setSelectionRange(Ae,Ne)}he&&(he.scrollLeft=0)}},[X.isFocused]),jsxRuntimeExports.jsxs("div",{ref:W,className:cx$6(styles$a.wrapper,B,{[styles$a.isDragPlaceholder]:E,[styles$a.isFocused]:X.isFocused,[styles$a.isEditable]:!x,[styles$a.isDragOverlay]:R,[styles$a.isMenuOpened]:U}),children:[jsxRuntimeExports.jsx("div",{className:styles$a.checkboxWrapper,children:jsxRuntimeExports.jsx(TaskItemCheckbox,{checked:o,disabled:x,onClick:i})}),jsxRuntimeExports.jsxs("div",{className:cx$6(styles$a.contentWrapper,{[styles$a.contentWrapperCompleted]:o,[styles$a.contentWrapperUnactionable]:V}),"data-private":"lipsum",children:[X.isFocused?jsxRuntimeExports.jsx("div",{className:styles$a.textFieldWrapper,children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{theme:DynamicTextAreaTheme.LIST_TITLE_TRANSPARENT,ref:oe,autoFocus:S,maxLength:CARD_CHECKLIST_ITEM_TITLE_MAX_LENGTH,onChange:ve,onFocus:ce,onKeyDown:ye,onPointerDown:be,onPaste:T,onBlur:me,value:y,className:cx$6(styles$a.textField),disabled:V,"data-private":"lipsum"})}):jsxRuntimeExports.jsx("div",{className:styles$a.previewWrapper,children:jsxRuntimeExports.jsx("div",{className:styles$a.preview,children:jsxRuntimeExports.jsx("div",{className:styles$a.previewInner,role:V?void 0:"button",tabIndex:V?void 0:0,onFocus:V?void 0:we,onMouseDown:V?void 0:Re,onMouseUp:V?void 0:Se,children:Ce})})}),Q&&jsxRuntimeExports.jsx("div",{className:styles$a.dueDate,children:jsxRuntimeExports.jsx(CardIndicatorDueDate_memo,{cardId:a.id,allowRecurrenceConfig:!1,recurrence:null,isEditable:!x,dueDate:Q,now:Date.now(),onChange:xe})}),D!=null&&D.length?jsxRuntimeExports.jsx("div",{className:styles$a.assignees,children:jsxRuntimeExports.jsx(CardIndicatorAssignees_memo,{owners:D,sectionId:a.sectionId,onChange:ge,maxMembers:2,isEditable:!x})}):null,N&&jsxRuntimeExports.jsx("div",{style:{display:"flex",fontSize:12,paddingTop:3},children:N}),jsxRuntimeExports.jsx("div",{className:styles$a.menuButtonWrapper,children:!Ee&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonInlineText,{ref:ae,theme:"plain",onClick:Z,className:styles$a.menuButton,disabled:x,children:jsxRuntimeExports.jsx(SvgDotsicon,{})}),jsxRuntimeExports.jsx(HeaderMenu,{ref:ie,from:ae,card:a,isVisible:U,onDelete:de,dueDate:Q,owners:D,onDueDateChange:xe,onAssigneeChange:ge,hideMenu:J,now:se})]})})]})]})}),HeaderMenu=React$6.memo(React$6.forwardRef(function r({isVisible:s,from:a,onDelete:i,hideMenu:o,onDueDateChange:x,onAssigneeChange:y,owners:_,dueDate:E,now:R,card:S},j){const T=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),o],A=stopPropagation$2,[M,P]=React$6.useState(!1),L=React$6.useCallback(()=>{o(),P(!0)},[o]),D=React$6.useCallback(()=>P(!1),[]),[O,B]=React$6.useState(!1),N=React$6.useCallback(()=>{o(),B(!0)},[o]),F=React$6.useCallback(()=>B(!1),[]),W=useSyncQueryModelById("section",S.sectionId),{sortedBoardMembers:V}=useSyncBoardSortedMembers((W==null?void 0:W.boardId)||"");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DropdownMenu,{position:"bottom-start",from:a,isVisible:s,theme:"modern",children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[T],children:jsxRuntimeExports.jsxs("div",{ref:j,onPointerDown:A,children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{icon:jsxRuntimeExports.jsx(SvgAssignicon$1,{}),onClick:N,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.sharing.assign"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{icon:jsxRuntimeExports.jsx(SvgDuedateicon,{}),onClick:L,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.tasks.dueDate"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{icon:jsxRuntimeExports.jsx(SvgTrashicon,{}),onClick:i,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.delete"})})]})})}),jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:M,onClose:D,preventPointerDown:!0,children:jsxRuntimeExports.jsx(CardDueDate_memo,{allowRecurrenceConfig:!1,recurrence:null,onChange:x,dueDate:E,now:R})}),jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:O,onClose:F,preventPointerDown:!0,children:jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:_,sortedBoardMembers:V,onChange:y,onClose:F})})]})})),listWrapper="_listWrapper_pa2vi_1",newItemWrapperActive="_newItemWrapperActive_pa2vi_5",dragOverlay="_dragOverlay_pa2vi_9",isDragged="_isDragged_pa2vi_16",suggestionSecondaryButtons="_suggestionSecondaryButtons_pa2vi_52",suggestionPlaceholder="_suggestionPlaceholder_pa2vi_64",addSuggestionButton="_addSuggestionButton_pa2vi_72",styles$9={listWrapper,newItemWrapperActive,dragOverlay,"ani-DragOverlay-out":"_ani-DragOverlay-out_pa2vi_1",isDragged,"ani-DragOverlay-in":"_ani-DragOverlay-in_pa2vi_1",suggestionSecondaryButtons,suggestionPlaceholder,addSuggestionButton};var styles$8={multilinePanel:"_40toqv0",multilinePanelButtons:"_40toqv1",multilinePanelCloseButton:"_40toqv2 _1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqe9"};const getWrapperElementId=r=>`checklist_${r}`;function getChecklistElementById(r){return document.getElementById(getWrapperElementId(r))}const CheckList=React$6.memo(function r({space:s,card:a,checklistId:i,title:o,readonly:x,hideCheckedItems:y,onDelete:_,onSuggestionStart:E,onHideCheckedItemsChange:R,onTitleChange:S,onItemAdd:j,items:T,onItemChange:A}){const{track:M}=useAnalytics(),{formatMessage:P}=useI18n(),[L,D]=React$6.useState(!1),[O,B]=React$6.useState(""),N=React$6.useRef(null),F=React$6.useMemo(()=>y?T.filter(ce=>ce.status===CardCheckListItemStatus.ACTIVE):T,[y,T]),W=React$6.useMemo(()=>F.slice().sort((ce,me)=>Positioning2.comparePositions(ce.position,me.position)),[F]),{triggerSuggest:V,activeChecklistId:U,modalJSX:G,isExperimentEnabled:oe}=useChecklistSuggestions({cardId:a.id}),X=T.filter(ce=>ce.status===CardCheckListItemStatus.CHECKED).length;function ee(ce,me){const ve=W.findIndex(ye=>ye.id===ce),xe=W.slice();xe.splice(ve,1);const ge=getPositionInPositionableGroupAtIndex(xe,me);W.find(ye=>ye.id===ce)&&A([{id:ce,key:"position",value:ge}])}function ae(){Z.length||(O&&(j(O.trim()),B("")),D(!1))}function ie(ce){O?(j(O.trim()),B(""),ce.preventDefault(),setImmediate(()=>{var me;return(me=N.current)==null?void 0:me.scrollIntoView({behavior:"smooth",block:"nearest"})})):(ce.preventDefault(),B(""),D(!1))}const se=()=>{E==null||E(),s&&V({checklistId:i,title:a.name,spaceId:s==null?void 0:s.id,checklistName:o,existingItems:W.map(ce=>ce.name),onAddRef:{current:ce=>ce.forEach(me=>{j(me.trim())})}})},Q=React$6.useRef(null),[Z,J,te]=usePasteMultiline(L?O:""),de=Recoil_index_31(({snapshot:ce})=>()=>{Z.forEach(ve=>j(ve.trim()));const me=ce.getLoadable(boardSelectors.idByCardId(a.id)).getValue();M("added_multiple",{extra_str1:"checklist",extra_str2:me!=null?me:"",extra_str3:a.id,extra_double1:Z.length}),B(""),D(!1)},[a.id,Z,j,M]);return jsxRuntimeExports.jsxs("div",{id:getWrapperElementId(i),children:[jsxRuntimeExports.jsx(CheckListHeader,{title:o,onTitleChange:S,afterInputContent:oe?jsxRuntimeExports.jsx(TooltipSmallInfo,{position:"top",text:s!=null&&s.aiFeaturesEnabled?null:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.ai.tooltip.disabledByAdmin"}),delay:100,children:jsxRuntimeExports.jsxs(ButtonRounded_,{theme:"navbar",size:"small",disabled:!(s!=null&&s.aiFeaturesEnabled)||U===i,onClick:se,children:[jsxRuntimeExports.jsx(SparklesIcon,{}),jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.suggest"})})]})}):void 0,onDelete:_,readonly:x,completedItemsHidden:y,itemsCompleted:X,itemsTotal:T.length,toggleHideCompletedItems:()=>R(!y)}),G,jsxRuntimeExports.jsxs("div",{className:styles$9.listWrapper,children:[jsxRuntimeExports.jsx(DraggableItems,{items:W,handleDragEnd:ee,card:a,children:W.map(ce=>jsxRuntimeExports.jsx(DraggableCheckListItem,{id:ce.id,card:a,label:ce.name+"",dueDate:ce.dueDate,owners:ce.owners||[],onLabelChange:me=>{A([{id:ce.id,key:"name",value:me}])},onDelete:()=>{A([{id:ce.id,key:"status",value:CardCheckListItemStatus.DELETED}])},onDueDateChange:me=>{A([{id:ce.id,key:"dueDate",value:me}])},onAssigneeChange:me=>{A([{id:ce.id,key:"owners",value:me}])},completed:ce.status===CardCheckListItemStatus.CHECKED,toggleComplete:()=>{A([{id:ce.id,key:"status",value:ce.status===CardCheckListItemStatus.CHECKED?CardCheckListItemStatus.ACTIVE:CardCheckListItemStatus.CHECKED}])},disabled:x},ce.id))}),x?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6({[styles$9.newItemWrapperActive]:L}),children:L?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:Z.length>1?jsxRuntimeExports.jsxs(motion.div,{className:styles$8.multilinePanel,variants:{enter:{opacity:1},exit:{opacity:0}},initial:"exit",animate:"enter",exit:"exit",children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.paste-multiline.text"})}),jsxRuntimeExports.jsxs("div",{className:styles$8.multilinePanelButtons,children:[jsxRuntimeExports.jsx(ButtonInlineText,{onClick:de,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.paste-multiline.add",values:{count:Z.length}})}),jsxRuntimeExports.jsx("button",{className:styles$8.multilinePanelCloseButton,type:"button",onClick:()=>{var ce;te(),(ce=Q.current)==null||ce.call(Q)},children:jsxRuntimeExports.jsx($08b6689415b2f49a$export$5aec92af04ace2d2,{label:P("_.buttons.close"),children:jsxRuntimeExports.jsx(CloseIcon,{})})})]})]}):null}),jsxRuntimeExports.jsx(CheckListItem,{ref:N,card:a,label:O,owners:[],dueDate:null,onBlur:ae,onLabelChange:B,onPaste:J,completed:!1,autoFocus:L,onEnterClick:ie,focusRef:Q})]}):null}),jsxRuntimeExports.jsx(NewCheckListItemButton,{disabled:L,onClick:()=>D(!0)})]})]})]})});function DraggableCheckListItem({label:r,onEnterClick:s,onBlur:a,onLabelChange:i,...o}){const{listeners:x,setNodeRef:y,transform:_,transition:E,isDragging:R}=useSortable({id:o.id}),S={transform:CSS.Transform.toString(_),transition:E!=null?E:void 0},[j,T]=React$6.useState(r);React$6.useEffect(()=>{T(r)},[r]);const A=React$6.useCallback(L=>{L.currentTarget.value!==j&&(i==null||i(L.currentTarget.value.trim())),s==null||s(L)},[s,i,j]),M=React$6.useCallback(L=>{L.currentTarget.value!==j&&(i==null||i(L.currentTarget.value.trim())),a==null||a(L)},[a,i,j]),P=React$6.useCallback(L=>{T(L),i==null||i(L)},[i]);return jsxRuntimeExports.jsx("div",{style:S,ref:y,...o.disabled?{}:x,children:jsxRuntimeExports.jsx(CheckListItem,{label:j,onEnterClick:A,onBlur:M,onLabelChange:P,...o,isDragPlaceholder:R})})}function DraggableItems({items:r,handleDragEnd:s,card:a,children:i}){const o=React$6.useMemo(()=>r.map(({id:j})=>j),[r]),[x,y]=React$6.useState(null),_=React$6.useMemo(()=>r.find(j=>j.id===x),[x,r]);function E(j){y(null);const{active:T,over:A}=j;if(!A||T.id===A.id)return;const M=o.indexOf(A.id);M!==-1&&s(T.id,M)}function R(j){const{active:T}=j;y(T.id)}const S=React$6.useMemo(()=>{var T;if(!_)return null;const j={"--dragLayer__anim-duration":`${TASK_DROP_ANIMATION.duration}ms`,"--dragLayer__anim-easing":TASK_DROP_ANIMATION.easing};return jsxRuntimeExports.jsx("div",{style:j,children:jsxRuntimeExports.jsx(CheckListItem,{id:_.id,disabled:!0,card:a,isDragOverlay:!0,className:styles$9.dragOverlay,label:_.name,owners:(T=_.owners)!=null?T:[],dueDate:_.dueDate,completed:_.status===CardCheckListItemStatus.CHECKED})})},[a,_]);return jsxRuntimeExports.jsxs(DndContext,{sensors:useSensors(usePointerSensor()),collisionDetection:closestCenter,onDragStart:R,onDragEnd:E,children:[jsxRuntimeExports.jsx(SortableContext,{items:o,strategy:verticalListSortingStrategy,children:i}),jsxRuntimeExports.jsx(Portal,{type:PortalTypes.DRAG_LAYER,children:jsxRuntimeExports.jsx("div",{className:S?styles$9.isDragged:void 0,children:jsxRuntimeExports.jsx(DragOverlay,{dropAnimation:TASK_DROP_ANIMATION,children:S})})})]})}const RemoveCardCheckListsConfirmationModal=({isVisible:r,onAccept:s,onCancel:a})=>jsxRuntimeExports.jsx(ConfirmModal,{isVisible:r,headerElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.confirm-dialog.are-you-sure"}),mainElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"RemoveCardCheckListsConfirmationModal.content"}),declineElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.cancel"}),acceptElement:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.yes"}),onAccept:s,onDecline:a}),memo=React$6.memo(RemoveCardCheckListsConfirmationModal),EMPTY_ITEMS=[],CardCheckLists=React$6.memo(function r({card:s,readonly:a}){var N;const i=(N=Recoil_index_20(cardChecklistSelectors.checklistsGroupedByCardId).allMap.get(s.id))!=null?N:[],o=Recoil_index_20(cardChecklistSelectors.checklistItemsGroupedByChecklistId).allMap,x=Recoil_index_20(spaceSelectors.byCardId(s.id)),y=Recoil_index_20(boardSelectors.byCardId(s.id)),[_,E]=React$6.useState(null),R=React$6.useCallback(F=>()=>E(F),[]),S=React$6.useCallback(()=>E(null),[]),j=useSyncUpdateCardChecklists(),T=useSyncCreateChecklistItem(),A=useSyncUpdateChecklistItems(),M=React$6.useCallback(()=>{_&&(j([{id:_,key:"status",value:CardCheckListStatus.DELETED}]),E(null))},[_,j]),{isMyDay:P,selectedTaskActivityId:L,deselectMydayTaskActivity:D,deselectTaskActivity:O}=useTaskRouter(),B=React$6.useCallback(()=>{L&&(P?D(s.id):y&&O(y.id,s.id))},[y,s.id,D,O,P,L]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i.map(F=>{var W;return jsxRuntimeExports.jsx(CheckList,{space:x!=null?x:void 0,checklistId:F.id,card:s,items:(W=o.get(F.id))!=null?W:EMPTY_ITEMS,title:F.name,readonly:a,onDelete:R(F.id),hideCheckedItems:F.hideCheckedItems===1,onSuggestionStart:B,onHideCheckedItemsChange:V=>{j([{id:F.id,key:"hideCheckedItems",value:V?1:0}])},onTitleChange:V=>{j([{id:F.id,key:"name",value:V}])},onItemAdd:V=>{var U;T({name:V,checklistItems:(U=o.get(F.id))!=null?U:EMPTY_ITEMS,checklistId:F.id})},onItemChange:A},F.id)}),jsxRuntimeExports.jsx(memo,{isVisible:!!_,onCancel:S,onAccept:M})]})}),CardAttachments=React$6.memo(function r({readonly:s,cardId:a}){const{attachments:i,removeAttachment:o,attachmentsUploadStates:x,abortAttachmentUpload:y}=useSyncCardAttachments(a),{attachmentsUploadStates:_}=React$6.useContext(AttachmentsContext),E=React$6.useRef(_);React$6.useEffect(()=>{E.current=_},[_]);const R=React$6.useMemo(()=>i.map(S=>FileAttachmentRecord.create({...S,globalTaskId:S.cardId})),[i]);return jsxRuntimeExports.jsx(FileAttachments,{fileAttachments:R,fileAttachmentUploadStates:x,removeAttachment:o,abortAttachmentUpload:y,readonly:s})});function AddCardContentButtonConnector({cardId:r,onChecklistCreated:s,readonly:a,onAttachmentAdd:i,children:o,setIsFilesDragOver:x}){const y=Recoil_index_20(cardChecklistSelectors.checklistsGroupedByCardId).allMap.get(r),_=useSyncCreateCardChecklist(),E=React$6.useCallback(L=>{const D=_({cardChecklists:y!=null?y:[],cardId:r,name:L});s==null||s(D)},[r,y,_,s]),{uploadAttachments:R,resetAttachmentsUploadErrors:S,attachmentsUploadErrors:j}=useSyncCardAttachments(r),[T,A]=React$6.useState(void 0);React$6.useEffect(()=>{A(last$1(j))},[j]);const M=React$6.useCallback(L=>{for(let D of L)if(isFileTooBigTeams(D)){A(new FileAttachmentUploadErrorRecord({type:FileAttachmentUploadErrorType.FILE_SIZE_IS_TOO_BIG,fileId:null,taskId:null,originalFileName:""}));return}R(L),i==null||i()},[i,R]);React$6.useEffect(()=>{const L=D=>{var N;const O=(N=D.clipboardData)==null?void 0:N.items;let B=!0;if(O){const F=new DataTransfer;for(let W of O)if(W.kind==="file"){const V=W.getAsFile();V&&F.items.add(V)}else W.kind==="string"&&W.type==="text/plain"&&(B=!1);B&&F.files.length>0&&M(F.files)}};return document.addEventListener("paste",L),()=>document.removeEventListener("paste",L)},[M]),React$6.useLayoutEffect(()=>{let L=null;const D=F=>{var V;if(F.preventDefault(),a)return;L&&clearTimeout(L),x(!1);const W=(V=F.dataTransfer)==null?void 0:V.items;if(W){const U=new DataTransfer;for(let G of W)if(G.kind==="file"){const oe=G.getAsFile();oe&&U.items.add(oe)}U.files.length>0&&M(U.files)}},O=F=>{F.preventDefault(),!a&&(L&&clearTimeout(L),x(!0))},B=()=>{a||(L&&clearTimeout(L),x(!0))},N=()=>{L&&clearTimeout(L),L=setTimeout(()=>x(!1),200)};return document.addEventListener("drop",D),document.addEventListener("dragover",O),document.addEventListener("dragenter",B),document.addEventListener("dragleave",N),()=>{document.removeEventListener("drop",D),document.removeEventListener("dragover",O),document.removeEventListener("dragenter",B),document.removeEventListener("dragleave",N)}},[a,x,M]);const P=React$6.useCallback(()=>{S(),A(void 0)},[S]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[o({isDisabled:a,uploadAttachments:M,createChecklist:E}),jsxRuntimeExports.jsx(FileAttachmentErrorModal,{sizeLimit:TEAMS_FILE_SIZE_LIMIT,errorType:T,isVisible:!!T,onDismiss:P})]})}const SvgPlusicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.612 4.521a.64.64 0 0 0-1.28-.005l-.026 6.779-6.722-.025a.64.64 0 0 0-.005 1.28l6.723.025-.026 6.779a.64.64 0 0 0 1.28.005l.026-6.78 6.834.026a.64.64 0 0 0 .005-1.28l-6.835-.025.026-6.779Z",clipRule:"evenodd"})),SvgChecklisticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M8.25 6h12M8.25 12h12M8.25 18h12"}),reactExports.createElement("path",{fill:"currentColor",stroke:"currentColor",strokeWidth:.125,d:"M5 6a.875.875 0 1 1-1.75 0A.875.875 0 0 1 5 6ZM5 18a.875.875 0 1 1-1.75 0A.875.875 0 0 1 5 18ZM5 12a.875.875 0 1 1-1.75 0A.875.875 0 0 1 5 12Z"})),SvgAttachmenticon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m20.44 11.669-8.245 8.245a5.386 5.386 0 0 1-7.617-7.617l8.245-8.245A3.59 3.59 0 1 1 17.9 9.13l-8.254 8.245a1.795 1.795 0 0 1-2.54-2.539l7.618-7.608"})),wrapper$1="_wrapper_id1j9_1",mainButton="_mainButton_id1j9_7",hasError="_hasError_id1j9_26",isLoading="_isLoading_id1j9_27",isDisabled="_isDisabled_id1j9_33",isMenuVisible="_isMenuVisible_id1j9_45",icon$1="_icon_id1j9_50",attachmentInput="_attachmentInput_id1j9_64",tooltip="_tooltip_id1j9_85",dropdown="_dropdown_id1j9_95",styles$7={wrapper:wrapper$1,mainButton,hasError,isLoading,isDisabled,isMenuVisible,icon:icon$1,attachmentInput,tooltip,dropdown},DEFAULT_TAB="MAIN_MENU";function AddCardContentButton({isLoading:r,isDisabled:s,className:a,uploadAttachments:i,createChecklist:o}){const x=useI18n(),y=React$6.useRef(null),_=React$6.useRef(null),[E,R]=React$6.useState(!1);let[S,j]=React$6.useState(DEFAULT_TAB);const T=React$6.useCallback(()=>{j(DEFAULT_TAB),R(!0)},[]),A=React$6.useCallback(()=>R(!1),[]),M=React$6.useCallback(()=>{E?A==null||A():T==null||T()},[A,E,T]);useOutSideClick(React$6.useMemo(()=>[y,_],[]),A);const P=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),A],L=React$6.useCallback(O=>{const{files:B}=O.currentTarget;B&&(i==null||i(B),A())},[A,i]),D=React$6.useCallback(()=>{o==null||o(x.formatMessage("_.checklist")),A()},[o,A,x]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx$6(styles$7.wrapper,a,{[styles$7.isMenuVisible]:E,[styles$7.isDisabled]:s,[styles$7.isLoading]:r}),children:s?r?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}):null:jsxRuntimeExports.jsx("button",{className:styles$7.mainButton,ref:y,onClick:M,disabled:r,children:jsxRuntimeExports.jsx("span",{className:styles$7.icon,children:r?jsxRuntimeExports.jsx(LoadingSpinnerIcon,{}):jsxRuntimeExports.jsx(SvgPlusicon,{})})})}),jsxRuntimeExports.jsx(Tooltip2,{from:y,isVisible:E,position:"top-end",offset:24,children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[P],children:jsxRuntimeExports.jsx("div",{ref:_,className:cx$6(styles$7.tooltip,FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME),children:jsxRuntimeExports.jsx(TabsReplacerContainer,{active:S,children:jsxRuntimeExports.jsx(TabsTab,{label:"MAIN_MENU",render:()=>jsxRuntimeExports.jsxs(DropdownMenu.Content,{theme:"modern",className:styles$7.dropdown,children:[jsxRuntimeExports.jsx(DropdownMenu.Item,{icon:jsxRuntimeExports.jsx(SvgChecklisticon,{}),onClick:D,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.checklist"})}),jsxRuntimeExports.jsx(DropdownMenu.Item,{icon:jsxRuntimeExports.jsx(SvgAttachmenticon,{}),sibling:jsxRuntimeExports.jsx("input",{type:"file",title:"",onChange:L,className:styles$7.attachmentInput,multiple:!0}),isClickable:!0,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.attachment"})})]})})})})})})]})}const AddCardContentButton_memo=React$6.memo(AddCardContentButton),addCardContentButton="_addCardContentButton_18h7o_1",disabled="_disabled_18h7o_10",attachments$1="_attachments_18h7o_22",checklists="_checklists_18h7o_40",styles$6={addCardContentButton,disabled,attachments:attachments$1,checklists};function CardExtraContent({card:r,readonly:s,setIsFilesDragOver:a}){const i=React$6.useRef(null);return jsxRuntimeExports.jsx(CardExtraContentContainer,{checklists:jsxRuntimeExports.jsx(CardCheckLists,{card:r,readonly:s}),attachments:jsxRuntimeExports.jsx("div",{ref:i,tabIndex:0,children:jsxRuntimeExports.jsx(CardAttachments,{cardId:r.id,readonly:s})}),addButton:jsxRuntimeExports.jsx(AddCardContentButtonConnector,{cardId:r.id,readonly:s,setIsFilesDragOver:a,onChecklistCreated:o=>{setImmediate(()=>{var y;const x=getChecklistElementById(o.id);x&&(x.scrollIntoView({behavior:"smooth",block:"center"}),(y=x.querySelector('[data-role="new_item"]'))==null||y.focus())})},onAttachmentAdd:()=>{var o;(o=i.current)==null||o.focus()},children:o=>jsxRuntimeExports.jsx(AddCardContentButton_memo,{...o})}),isDisabled:s})}function CardExtraContentContainer({attachments:r,checklists:s,addButton:a,isDisabled:i}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s&&jsxRuntimeExports.jsx("div",{className:styles$6.checklists,children:s}),r&&jsxRuntimeExports.jsx("div",{className:styles$6.attachments,children:jsxRuntimeExports.jsx("div",{children:r})}),a&&jsxRuntimeExports.jsx("div",{className:cx$6(styles$6.addCardContentButton,{[styles$6.disabled]:i}),children:a})]})}const feed="_feed_1boyo_1",ascending="_ascending_1boyo_7",items="_items_1boyo_11",spinner="_spinner_1boyo_15",center="_center_1boyo_21",hide="_hide_1boyo_27",message="_message_1boyo_31",retryButton="_retryButton_1boyo_36",styles$5={feed,ascending,items,spinner,center,hide,message,retryButton},ACTIVITY_ID_ATTR="data-activity-id",SPINNER_OBSERVER_OPTIONS={threshold:1},ActivityDrawer=React$6.forwardRef(function r({data:s,fetch:a,forceFetch:i,fetching:o,canFetchMore:x,fetchError:y=!1,title:_,models:E,order:R="desc",emptyState:S=jsxRuntimeExports.jsx("div",{className:styles$5.message,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"ActivityDrawer.noActivity"})}),onHasUnreadMessagesChanged:j,...T},A){const{formatMessage:M}=useI18n(),{userDetails:P}=useAuth(),L=useScrollToElement(),D=React$6.useRef(null),O=React$6.useRef(null),B=React$6.useRef(),N=React$6.useRef(),[F,W]=React$6.useState(null),[V,U]=React$6.useState(!1),[G,oe]=React$6.useState(!1),[X,ee]=React$6.useState(!1),[ae,ie]=React$6.useState({activityId:"",smooth:!1}),[se,Q]=React$6.useState(s||[]),Z=React$6.useCallback((te,de=!1)=>{oe(!1),ie({activityId:te,smooth:de})},[]),J=React$6.useCallback(()=>{s!=null&&s.length&&Z(s[s.length-1].id,!0)},[s,Z]);return React$6.useImperativeHandle(A,()=>({scrollTo:te=>Z(te,!0),scrollToBottom:J})),React$6.useLayoutEffect(()=>{var de;const te=(de=O.current)==null?void 0:de.querySelector(`[${ACTIVITY_ID_ATTR}="${ae.activityId}"]`);te&&!G&&L(te,{behavior:ae.smooth?"smooth":"auto",block:"center"}).then(()=>{oe(!0)})},[ae,L,G]),React$6.useEffect(()=>{if(!s||se===s)return;const te=R==="asc"&&se.length>0&&s.length>0&&se[se.length-1].creationDate<s[s.length-1].creationDate;Q(s),R==="asc"&&X&&s.length?(Z(s[s.length-1].id||""),U(!1)):te&&U(!0)},[se,s,Z,R,X]),React$6.useEffect(()=>{X&&V&&U(!1)},[X,V]),React$6.useEffect(()=>{j&&j(V)},[V,j]),React$6.useEffect(()=>{var te,de;if(R!=="desc"&&(o&&(N.current=(te=s==null?void 0:s[0])==null?void 0:te.id),s!=null&&s.length&&!o&&!y&&!G)){let ce=N.current;const me=s.findIndex(({id:ve})=>ve===ce);!ce||me===0?ce=s[s.length-1].id:ce=(de=s[me-1])==null?void 0:de.id,ce&&Z(ce)}},[o,y,Z,R]),React$6.useEffect(()=>{if(T.isVisible&&F){const te=new IntersectionObserver(de=>{var ce;((ce=de[0])==null?void 0:ce.intersectionRatio)===SPINNER_OBSERVER_OPTIONS.threshold&&(G||R==="desc")&&a()},SPINNER_OBSERVER_OPTIONS);te.observe(F),B.current=te}return()=>{var te;return(te=B.current)==null?void 0:te.disconnect()}},[T.isVisible,a,F,G,R]),jsxRuntimeExports.jsx(Drawer_memo,{title:_||M("_.activity"),closeOnOutsideClick:!1,onScrolledToBottomChange:ee,...T,children:jsxRuntimeExports.jsxs("div",{ref:D,className:cx$6(styles$5.feed,{[styles$5.ascending]:R==="asc"}),children:[jsxRuntimeExports.jsx("div",{className:styles$5.items,ref:O,children:s==null?void 0:s.map(te=>{const de={[ACTIVITY_ID_ATTR]:te.id,key:te.id};return jsxRuntimeExports.jsx("div",{...de,children:jsxRuntimeExports.jsx(ActivityUpdate_memo,{data:te,models:E,isCurrentUser:te.creator.publicUserId===(P==null?void 0:P.id)})})})}),!y&&jsxRuntimeExports.jsx("div",{ref:W,className:cx$6(styles$5.spinner,{[styles$5.hide]:!x,[styles$5.center]:!(s!=null&&s.length)}),children:jsxRuntimeExports.jsx(LoadingSpinnerIcon,{spin:o})}),y&&jsxRuntimeExports.jsxs("div",{className:styles$5.message,children:[jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.please-try-again"}),jsxRuntimeExports.jsx(CtaButton,{className:styles$5.retryButton,onClick:i,children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.retry"})})]}),!o&&!y&&(s==null?void 0:s.length)===0&&S]})})}),ActivityDrawer_memo=React$6.memo(ActivityDrawer);function generateActivityTextItem(r){return{type:"text",text:r}}function generateActivityUserItem(r,s){return{type:USER_GROUP_MENTIONS.includes(r)?"userGroup":"user",id:r,text:s}}function convertFromRaw(r){const s=[];return r.blocks.forEach((a,i)=>{var x;if((x=a.entityRanges)!=null&&x.length){let y=0;if(a.entityRanges.forEach(_=>{const E=r.entityMap[_.key];if(E.type===ResolveMentionEntityName){if(_.offset!==y){const T=a.text.substring(y,_.offset);if(T){const A=generateActivityTextItem(T);s.push(A)}}const{id:R,name:S}=E.data,j=generateActivityUserItem(R,S);s.push(j),y=_.offset+_.length}}),y!==a.text.length){const _=a.text.substr(y,a.text.length);if(_){const E=generateActivityTextItem(_);s.push(E)}}}else a.text&&s.push(generateActivityTextItem(a.text));i===r.blocks.length-1||s.push(generateActivityTextItem(`
`))}),s}const SvgSmileyicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 17.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.248 11.875a3.751 3.751 0 0 1-6.496 0"}),reactExports.createElement("path",{fill:"currentColor",d:"M7.188 9.219a.781.781 0 1 0 0-1.563.781.781 0 0 0 0 1.563ZM12.813 9.219a.781.781 0 1 0 0-1.563.781.781 0 0 0 0 1.563Z"})),SvgSendicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",viewBox:"0 0 25 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21.082 11.346 5.246 2.478a.75.75 0 0 0-1.073.906l2.987 8.364a.75.75 0 0 1 0 .504l-2.987 8.364a.75.75 0 0 0 1.073.907l15.836-8.868a.75.75 0 0 0 0-1.31v0ZM7.25 12h6"})),SvgMentionicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M12 15.2a3.2 3.2 0 1 0 0-6.4 3.2 3.2 0 0 0 0 6.4Z"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M15.2 8.8v4a2.4 2.4 0 0 0 4.8 0V12a8 8 0 1 0-3.136 6.352"})),SvgIconDownicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:10,fill:"none",viewBox:"0 0 10 10",...r},reactExports.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M4.72 1.36V9.2M.8 5.28 4.72 9.2l3.92-3.92"})),wrapper="_wrapper_5b5ow_1",top="_top_5b5ow_7",avatar="_avatar_5b5ow_11",editorWrapper="_editorWrapper_5b5ow_15",bottom="_bottom_5b5ow_23",buttons$1="_buttons_5b5ow_29",button="_button_5b5ow_29",activeButton="_activeButton_5b5ow_42",submitting="_submitting_5b5ow_50",mentionsMenuTooltip="_mentionsMenuTooltip_5b5ow_54",narrow="_narrow_5b5ow_64",mentionsMenuWrapper="_mentionsMenuWrapper_5b5ow_68",mentionsMenu="_mentionsMenu_5b5ow_54",mentionsMenuItem="_mentionsMenuItem_5b5ow_92",newMessage="_newMessage_5b5ow_97",styles$4={wrapper,top,avatar,editorWrapper,bottom,buttons:buttons$1,button,activeButton,submitting,mentionsMenuTooltip,narrow,mentionsMenuWrapper,mentionsMenu,mentionsMenuItem,newMessage};function AddChatComment({isNarrow:r=!1,readonly:s=!1,mentionUsers:a,onAdd:i,onEscape:o,hasNewMessages:x=!1,onNewMessagesIconClick:y}){const{formatMessage:_}=useI18n(),{userDetails:E}=useAuth(),R=React$6.useRef(null),S=React$6.useRef(null),[j,T]=React$6.useState(1),A=React$6.useRef(null),M=React$6.useRef(null),P=React$6.useRef(null),[L,D]=React$6.useState(!1);useOutSideClick([P,M,R],()=>{var ie;return(ie=S.current)==null?void 0:ie.abortMention()});const O=React$6.useRef(null),B=React$6.useRef(null),[N,F]=React$6.useState(!1),W=React$6.useCallback(()=>F(!1),[]);useOutSideClick([B,O],W);const V=[useKeyboardShortcutCombination(KEYBOARD_SHORTCUT_CLOSE_MODAL),W],[U,G]=React$6.useState(!1),oe=React$6.useCallback(async()=>{var se,Q;const ie=(se=S.current)==null?void 0:se.getContent();if(ie){const Z=convertFromRaw(ie);G(!0),(Q=S.current)==null||Q.blur(),i(Z).then(J=>{J&&(T(te=>te+1),requestAnimationFrame(()=>{var te;(te=S.current)==null||te.focus()}))}).finally(()=>G(!1))}},[i]),X=async()=>{S.current&&(await S.current.toggleMention(),S.current.focus())},ee=async ie=>{var se,Q;ie&&(F(!1),await((se=S.current)==null?void 0:se.addContent(ie)),(Q=S.current)==null||Q.focus())},ae=React$6.useCallback(()=>{var ie;(ie=S.current)==null||ie.abortMention()},[]);return React$6.useEffect(()=>{var ie;(ie=S.current)==null||ie.focus()},[]),React$6.useEffect(()=>(window.addEventListener("resize",ae,!1),()=>window.removeEventListener("resize",ae)),[ae]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:cx$6(styles$4.wrapper,{[styles$4.submitting]:U}),ref:A,children:[x&&jsxRuntimeExports.jsx("div",{className:cx$6(styles$4.newMessage),onClick:y,children:jsxRuntimeExports.jsx(SvgIconDownicon,{})}),jsxRuntimeExports.jsxs("div",{className:styles$4.top,children:[E&&jsxRuntimeExports.jsx("span",{className:styles$4.avatar,children:jsxRuntimeExports.jsx(SharingAvatar_memo,{size:SharingAvatarSize.TASK_INDICATOR,name:E.name,imageUrl:E.profilePicture})}),jsxRuntimeExports.jsx(SimpleScrollView,{ref:R,className:styles$4.editorWrapper,children:jsxRuntimeExports.jsx(RichTextEditor_memo,{ref:S,onEnter:oe,onEscape:o,readonly:s,placeholder:_("AddChatComment.addComment"),features:["mentions","links"],mentionUsers:a,onMentionsMenuVisibilityChange:D,children:({filteredMentionUsers:ie,currentMentionUser:se,selectMentionUser:Q})=>jsxRuntimeExports.jsx(Tooltip2,{className:cx$6(styles$4.mentionsMenuTooltip,{[styles$4.narrow]:r}),innerClassName:styles$4.mentionsMenuWrapper,from:A,isVisible:L,position:"top-start",keepHeightInViewportBounds:!0,offset:0,children:jsxRuntimeExports.jsx(SimpleScrollView,{className:styles$4.mentionsMenu,children:jsxRuntimeExports.jsx(DropdownMenu.Content,{theme:"plain",children:ie.map(Z=>{const{id:J,name:te}=Z;return jsxRuntimeExports.jsx(DropdownMenu.Item,{itemClassName:styles$4.mentionsMenuItem,onClick:()=>Q({id:J,name:te}),selected:J===(se==null?void 0:se.id),scrollToItemOnSelect:!0,children:jsxRuntimeExports.jsx(TeamMemberBox_memo,{member:Z,theme:TeamMemberBoxTheme.TEAM_MEMBER_MANAGER})},J)})})})})},j)})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.bottom,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.buttons,children:[jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",disabled:s,ref:P,onClick:X,className:cx$6(styles$4.button,{[styles$4.activeButton]:L}),children:jsxRuntimeExports.jsx(SvgMentionicon,{})}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",disabled:s,ref:B,className:cx$6(styles$4.button,{[styles$4.activeButton]:N}),onClick:()=>F(!N),children:jsxRuntimeExports.jsx(SvgSmileyicon,{})})]}),jsxRuntimeExports.jsx(ButtonInlineText,{theme:"action",onClick:oe,disabled:U||s,className:"rtl-mirror-icon",children:jsxRuntimeExports.jsx(SvgSendicon,{})})]})]}),jsxRuntimeExports.jsx(Tooltip2,{from:B,isVisible:N,position:"top",children:jsxRuntimeExports.jsx("div",{ref:O,children:jsxRuntimeExports.jsx(KeyboardShortcutsGlobalOverride,{shortcuts:[V],children:jsxRuntimeExports.jsx(EmojiPicker_memo,{title:"Emoji picker",onPick:ee,isMacOs:!0})})})})]})}const AddChatComment_memo=React$6.memo(AddChatComment),SvgThundericon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:24,fill:"none",viewBox:"0 0 18 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M6 22.5 7.5 15l-6-2.25L12 1.5 10.5 9l6 2.25L6 22.5Z"})),filterButton="_filterButton_1blu0_1",emptyState="_emptyState_1blu0_6",styles$3={filterButton,emptyState},EMPTY_DATA=[];function CardActivity({addActivity:r,toggleChatOnly:s,isChatOnly:a,readOnly:i,hasUnreadMessages:o,isBackendReady:x=!0,onRead:y,..._}){const E=useI18n(),R=React$6.useRef(null),[S,j]=React$6.useState(!1);React$6.useEffect(()=>{o&&!S&&y()},[o,S,y]);const T=React$6.useCallback(()=>{s()},[s]),A=React$6.useCallback(L=>r(L).then(D=>(requestAnimationFrame(()=>{var O;(O=R.current)==null||O.scrollTo(D)}),D)),[r]),M=React$6.useCallback(()=>{var L;(L=R.current)==null||L.scrollToBottom()},[]),P=React$6.useMemo(()=>{const{users:L}=_.models;if(L)return[...USER_GROUP_MENTIONS.map(D=>({id:D,name:E.formatMessage(`_.mentionGroups.${D}.title`),email:E.formatMessage(`_.mentionGroups.${D}.subtitle`),type:"userGroup",profilePicture:D})),...[...L.values()].map(D=>({id:D.publicUserId,name:D.name||D.email,email:D.email,type:"user",profilePicture:D.profilePicture||void 0}))]},[_.models,E]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ActivityDrawer_memo,{ref:R,asPortal:!1,hasCloseButton:!1,order:"asc",accessory:jsxRuntimeExports.jsx(TooltipSmallInfo,{excludeArrow:!0,position:"bottom",text:a?E.formatMessage("CardActivity.updates.showActivity"):E.formatMessage("CardActivity.updates.hideActivity"),children:jsxRuntimeExports.jsx(ButtonInlineText,{className:styles$3.filterButton,theme:a?"plain":"action",onClick:T,children:jsxRuntimeExports.jsx(SvgThundericon,{})})}),emptyState:jsxRuntimeExports.jsx("div",{className:styles$3.emptyState,children:jsxRuntimeExports.jsx(EmptyState,{})}),footer:i||!_.isVisible?null:jsxRuntimeExports.jsx(AddChatComment_memo,{onAdd:A,onEscape:_.close,mentionUsers:P,hasNewMessages:S,onNewMessagesIconClick:M,readonly:!x,isNarrow:!0}),onHasUnreadMessagesChanged:j,..._,fetching:_.fetching&&x,canFetchMore:_.canFetchMore&&x,fetchError:x&&_.fetchError,data:x?_.data:EMPTY_DATA})})}const CardActivity_memo=React$6.memo(CardActivity),EmptyState=()=>{const r=useIsAppThemeDark(),{direction:s}=useI18n(),a=s==="rtl";return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:293,height:245,fill:"none",children:[jsxRuntimeExports.jsx("circle",{cx:"122",cy:"125",r:"95",filter:"url(#blur-out)",strokeWidth:1,stroke:r?"#030303":"white",fill:r?"#030303":"white"}),jsxRuntimeExports.jsx("path",{fill:"#0083FF",d:"M254.018 60.783V45.375h-3.724V57.76h-6.409v3.024h10.133Zm-16.713.218c1.209 0 2.252-.238 3.13-.714a4.95 4.95 0 0 0 2.016-2.054c.466-.893.7-1.954.7-3.183 0-1.193-.236-2.236-.708-3.13a5.106 5.106 0 0 0-1.993-2.09c-.858-.502-1.869-.753-3.032-.753-.823 0-1.575.128-2.257.384a4.848 4.848 0 0 0-1.768 1.136c-.497.501-.883 1.12-1.159 1.858-.276.732-.414 1.572-.414 2.52v.918h10.044v-2.137h-6.62c.005-.39.097-.74.278-1.045.18-.306.429-.544.745-.715a2.149 2.149 0 0 1 1.076-.263c.411 0 .779.092 1.105.278a2.09 2.09 0 0 1 1.076 1.806v2.174c0 .471-.092.885-.278 1.241a2.01 2.01 0 0 1-.79.82c-.341.196-.747.294-1.219.294a2.75 2.75 0 0 1-.888-.136 1.896 1.896 0 0 1-.684-.398 1.639 1.639 0 0 1-.429-.648l-3.378.098c.141.758.449 1.417.925 1.979.472.557 1.091.99 1.859 1.301.767.306 1.655.46 2.663.46Zm-13.136-11.774v2.709h7.29v-2.709h-7.29Zm5.763-2.768h-3.679v10.69c0 .226-.035.41-.106.55a.657.657 0 0 1-.323.293 1.384 1.384 0 0 1-.504.083 2.78 2.78 0 0 1-.444-.038 6.65 6.65 0 0 1-.361-.075l-.557 2.656c.176.05.424.112.745.188.316.075.695.123 1.136.143.863.04 1.602-.06 2.219-.301.612-.246 1.081-.627 1.407-1.144.321-.516.477-1.166.467-1.948V46.459Zm-10.428-1.084v1.716c0 .476.095.958.286 1.444.185.482.429.933.73 1.354.3.422.619.778.955 1.069l1.565-.858a7.79 7.79 0 0 1-.617-1.286c-.181-.482-.271-1.054-.271-1.716v-1.723h-2.648Zm-10.022 7.38 3.378.091c.035-.24.131-.454.286-.64.156-.19.359-.338.61-.443.245-.11.531-.166.857-.166.427 0 .79.085 1.091.256.296.17.442.401.436.692a.737.737 0 0 1-.27.587c-.191.166-.529.298-1.016.399l-2.227.421c-1.153.22-2.011.587-2.573 1.098-.567.512-.853 1.19-.858 2.032.005.792.241 1.482.708 2.069.461.586 1.093 1.043 1.896 1.369.802.32 1.72.481 2.753.481 1.65 0 2.952-.338 3.905-1.015.948-.682 1.489-1.595 1.625-2.739l-3.634-.09c-.08.421-.288.742-.624.963-.337.22-.765.331-1.287.331-.471 0-.855-.088-1.151-.263-.296-.176-.446-.41-.451-.7a.74.74 0 0 1 .346-.624c.225-.16.579-.286 1.06-.377l2.017-.383c1.158-.211 2.021-.6 2.588-1.166.566-.572.847-1.3.842-2.182.005-.773-.2-1.432-.617-1.979-.416-.552-1.008-.973-1.775-1.264-.767-.29-1.673-.436-2.716-.436-1.565 0-2.799.328-3.702.986-.902.651-1.401 1.55-1.497 2.693Zm-9.369 8.194c.853 0 1.628-.221 2.325-.662.697-.442 1.254-1.104 1.67-1.986.416-.883.624-1.98.624-3.288 0-1.36-.215-2.478-.647-3.356-.431-.877-.995-1.527-1.692-1.948a4.328 4.328 0 0 0-2.265-.632c-.607 0-1.126.105-1.557.316a3.207 3.207 0 0 0-1.069.797 3.78 3.78 0 0 0-.639 1.016h-.075v-5.83h-3.679v15.407h3.641V58.91h.113a3.6 3.6 0 0 0 .662 1c.286.312.645.562 1.076.753.426.19.93.286 1.512.286Zm-1.279-2.867c-.446 0-.827-.125-1.143-.376-.316-.256-.56-.614-.73-1.076-.171-.461-.256-1.003-.256-1.625 0-.632.085-1.176.256-1.632.165-.457.409-.808.73-1.053.316-.246.697-.37 1.143-.37.456 0 .843.126 1.159.377.316.25.556.604.722 1.06.16.457.241.996.241 1.618 0 .622-.083 1.164-.249 1.625-.165.462-.403.82-.714 1.076-.316.25-.703.376-1.159.376Zm-7.302 2.701V49.227h-3.679v11.556h3.679Zm-1.843-12.902a1.9 1.9 0 0 0 1.332-.512c.371-.346.556-.762.556-1.249 0-.481-.185-.892-.556-1.234a1.885 1.885 0 0 0-1.332-.519 1.87 1.87 0 0 0-1.332.52c-.371.34-.556.752-.556 1.233 0 .487.185.903.556 1.25.367.34.81.51 1.332.51Zm-13.516 4.875 3.378.09c.035-.24.13-.454.286-.64.155-.19.358-.338.609-.443a2.08 2.08 0 0 1 .858-.166c.426 0 .79.085 1.091.256.296.17.441.401.436.692a.738.738 0 0 1-.271.587c-.19.166-.529.298-1.015.399l-2.227.421c-1.154.22-2.012.587-2.573 1.098-.567.512-.853 1.19-.858 2.032.005.792.241 1.482.707 2.069.462.586 1.094 1.043 1.896 1.369.803.32 1.72.481 2.754.481 1.65 0 2.951-.338 3.904-1.015.948-.682 1.49-1.595 1.625-2.739l-3.633-.09c-.081.421-.289.742-.625.963-.336.22-.765.331-1.286.331-.472 0-.856-.088-1.151-.263-.296-.176-.447-.41-.452-.7a.743.743 0 0 1 .346-.624c.226-.16.58-.286 1.061-.377l2.016-.383c1.159-.211 2.022-.6 2.588-1.166.567-.572.848-1.3.843-2.182.005-.773-.201-1.432-.617-1.979-.416-.552-1.008-.973-1.776-1.264-.767-.29-1.672-.436-2.715-.436-1.565 0-2.799.328-3.702.986-.903.651-1.402 1.55-1.497 2.693ZM169.432 61c1.218 0 2.264-.25 3.137-.752a5.09 5.09 0 0 0 2.001-2.091c.466-.898.7-1.936.7-3.115 0-1.184-.234-2.222-.7-3.115a5.124 5.124 0 0 0-2.009-2.099c-.872-.501-1.913-.752-3.122-.752-1.068 0-1.999.193-2.791.58-.798.385-1.419.932-1.866 1.64-.451.702-.689 1.527-.715 2.475h3.439c.07-.592.27-1.056.601-1.392.326-.336.753-.504 1.279-.504.427 0 .8.12 1.121.36.321.236.572.588.753 1.054.175.461.263 1.033.263 1.715 0 .682-.088 1.26-.263 1.73-.181.467-.432.82-.753 1.061a1.841 1.841 0 0 1-1.121.354c-.341 0-.642-.073-.902-.218a1.74 1.74 0 0 1-.655-.64 2.563 2.563 0 0 1-.323-1.038h-3.439c.036.953.274 1.786.715 2.498.437.712 1.051 1.266 1.843 1.663.788.39 1.723.586 2.807.586Zm-13.953-5.206v-6.568h-3.671v11.556h3.506v-2.151h.12a3.361 3.361 0 0 0 1.309 1.685c.612.411 1.352.617 2.219.617.788 0 1.48-.18 2.077-.542a3.69 3.69 0 0 0 1.392-1.512c.331-.652.499-1.415.504-2.287v-7.366h-3.679v6.644c-.005.626-.171 1.12-.497 1.482-.326.36-.77.541-1.331.541-.366 0-.695-.08-.986-.24a1.781 1.781 0 0 1-.7-.715c-.175-.316-.263-.697-.263-1.144Zm-15.352-3.04 3.378.091c.035-.24.131-.454.286-.64.156-.19.359-.338.61-.443.245-.11.531-.166.857-.166.427 0 .79.085 1.091.256.296.17.442.401.436.692a.737.737 0 0 1-.27.587c-.191.166-.529.298-1.016.399l-2.227.421c-1.153.22-2.011.587-2.573 1.098-.567.512-.853 1.19-.858 2.032.005.792.241 1.482.708 2.069.461.586 1.093 1.043 1.896 1.369.802.32 1.72.481 2.753.481 1.65 0 2.952-.338 3.905-1.015.948-.682 1.489-1.595 1.625-2.739l-3.634-.09c-.08.421-.288.742-.624.963-.337.22-.765.331-1.287.331-.471 0-.855-.088-1.151-.263-.296-.176-.446-.41-.451-.7a.74.74 0 0 1 .346-.624c.225-.16.579-.286 1.06-.377l2.017-.383c1.158-.211 2.021-.6 2.588-1.166.566-.572.847-1.3.842-2.182.005-.773-.2-1.432-.617-1.979-.416-.552-1.008-.973-1.775-1.264-.767-.29-1.673-.436-2.716-.436-1.565 0-2.799.328-3.702.986-.902.651-1.401 1.55-1.497 2.693Zm-11.436 0 3.378.091c.036-.24.131-.454.286-.64.156-.19.359-.338.61-.443.245-.11.531-.166.857-.166.427 0 .79.085 1.091.256.296.17.442.401.437.692a.74.74 0 0 1-.271.587c-.191.166-.529.298-1.016.399l-2.227.421c-1.153.22-2.011.587-2.573 1.098-.567.512-.852 1.19-.857 2.032.005.792.24 1.482.707 2.069.461.586 1.093 1.043 1.896 1.369.802.32 1.72.481 2.753.481 1.65 0 2.952-.338 3.905-1.015.948-.682 1.489-1.595 1.625-2.739l-3.634-.09c-.08.421-.288.742-.624.963-.336.22-.765.331-1.287.331-.471 0-.855-.088-1.151-.263-.296-.176-.446-.41-.451-.7a.74.74 0 0 1 .346-.624c.225-.16.579-.286 1.061-.377l2.016-.383c1.158-.211 2.021-.6 2.588-1.166.567-.572.847-1.3.842-2.182.005-.773-.2-1.432-.617-1.979-.416-.552-1.008-.973-1.775-1.264-.767-.29-1.673-.436-2.716-.436-1.565 0-2.799.328-3.701.986-.903.651-1.402 1.55-1.498 2.693Zm-4.243 3.311v-.308c0-.853-.07-1.533-.211-2.04-.145-.506-.356-.912-.632-1.218a4.868 4.868 0 0 0-1.008-.85 7.88 7.88 0 0 1-.842-.61 2.755 2.755 0 0 1-.595-.677 1.558 1.558 0 0 1-.218-.82c0-.296.07-.556.211-.782a1.38 1.38 0 0 1 .579-.52c.241-.125.509-.187.805-.187.296 0 .574.067.835.203.256.135.466.328.632.58.16.245.243.543.248.894h3.461c-.015-1.053-.258-1.916-.73-2.588a4.231 4.231 0 0 0-1.888-1.49c-.783-.325-1.645-.488-2.588-.488-1.033 0-1.951.16-2.754.481-.807.321-1.442.795-1.903 1.422-.462.627-.692 1.395-.692 2.302 0 .597.1 1.124.301 1.58.2.457.481.86.842 1.211.356.347.775.663 1.257.948.376.221.689.452.94.693.246.24.431.516.557.827.125.306.188.682.188 1.129v.308h3.205Zm-1.663 4.935a1.91 1.91 0 0 0 1.392-.571 1.86 1.86 0 0 0 .564-1.385 1.818 1.818 0 0 0-.564-1.361 1.91 1.91 0 0 0-1.392-.572c-.516 0-.97.19-1.362.572a1.847 1.847 0 0 0-.308 2.347c.181.296.419.532.715.707.291.176.609.263.955.263Z"}),jsxRuntimeExports.jsx("path",{stroke:"#0083FF",strokeOpacity:.8,strokeWidth:3.775,d:"M125.185 127.994c-4.1 21.795-35.307 21.774-39.518 0m-8.201 0c-4.1 21.795-35.307 21.774-39.518 0m7.27 31.804.509.462c18.986 17.208 47.989 17.008 66.735-.462"}),jsxRuntimeExports.jsxs("g",{filter:"url(#c)",children:[jsxRuntimeExports.jsx("path",{fill:"url(#d)",fillRule:"evenodd",d:"M133.795 17.076c-19.667.011-35.601 15.963-35.59 35.63.011 19.667 15.964 35.601 35.631 35.59l2.319-.001.007 12.218c.003 4.177 4.744 6.587 8.12 4.127l22.45-16.362 71.833-.04c19.666-.01 35.6-15.962 35.589-35.629-.011-19.666-15.964-35.6-35.631-35.59l-104.728.057Z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"url(#e)",d:"M133.795 17.076v.16-.16Zm.041 71.22v-.16.16Zm2.319-.001h.16v-.16h-.16v.16Zm8.127 16.345.094.129-.094-.129Zm22.45-16.362v-.16h-.052l-.042.031.094.13Zm71.791-71.26v-.159.16ZM98.365 52.707c-.011-19.579 15.851-35.46 35.43-35.47v-.32c-19.756.011-35.76 16.035-35.75 35.79h.32Zm35.471 35.43c-19.579.011-35.46-15.852-35.471-35.43h-.32c.012 19.755 16.036 35.76 35.791 35.75v-.32Zm2.319 0h-2.319v.32l2.319-.001v-.32Zm.167 12.377-.007-12.218h-.319l.007 12.218h.319Zm7.865 3.998c-3.27 2.383-7.863.048-7.865-3.998h-.319c.002 4.308 4.891 6.793 8.373 4.256l-.189-.258Zm22.451-16.362-22.451 16.362.189.258 22.45-16.362-.188-.258Zm71.926-.07-71.832.04.001.319 71.832-.04-.001-.319Zm35.43-35.47c.012 19.58-15.851 35.46-35.43 35.47l.001.32c19.755-.011 35.76-16.035 35.749-35.79h-.32Zm-35.471-35.43c19.579-.011 35.46 15.852 35.471 35.43h.32c-.012-19.755-16.036-35.76-35.791-35.75v.32Zm-104.728.057 104.728-.058v-.319l-104.728.057v.32Z"})]}),jsxRuntimeExports.jsx("text",{fill:"#0083FF",style:{whiteSpace:"pre"},fontSize:"21.186",fontWeight:"800",letterSpacing:"-0.75",children:jsxRuntimeExports.jsx("tspan",{x:a?"256":"120",y:"60",children:jsxRuntimeExports.jsx(FormattedMessage,{id:"CardActivity.lets-discuss"})})}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"d",x1:186.163,x2:186.208,y1:24.311,y2:105.604,gradientUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("stop",{stopColor:r?"#030303":"#F6F6F6"}),jsxRuntimeExports.jsx("stop",{offset:1,stopColor:r?"#030303":"#EFEFEF"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"e",x1:231.113,x2:215.128,y1:28.63,y2:118.175,gradientUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("stop",{stopColor:r?"#030303":"#fff"}),jsxRuntimeExports.jsx("stop",{offset:.085,stopColor:r?"#030303":"#fff"}),jsxRuntimeExports.jsx("stop",{offset:.54,stopColor:r?"#030303":"#D6D6D6"})]}),jsxRuntimeExports.jsxs("filter",{id:"blur-out",children:[jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4.5",floodColor:r?"#141414":"lightgrey"}),jsxRuntimeExports.jsx("feComposite",{operator:"out",in2:"SourceGraphic"})]}),jsxRuntimeExports.jsxs("filter",{id:"a",width:237.185,height:237.186,x:0,y:6.994,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feOffset",{dy:2}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:9}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0.950065 0 0 0 0 0.950065 0 0 0 0 0.950065 0 0 0 1 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3905_69478"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feOffset",{dy:1}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:2}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"effect1_dropShadow_3905_69478",result:"effect2_dropShadow_3905_69478"})]}),jsxRuntimeExports.jsxs("filter",{id:"c",width:212.268,height:124.93,x:80.045,y:.859,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feOffset",{dy:2}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:9}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3905_69478"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feOffset",{dy:1}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:2}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"effect1_dropShadow_3905_69478",result:"effect2_dropShadow_3905_69478"}),jsxRuntimeExports.jsx("feBlend",{in:"SourceGraphic",in2:"effect2_dropShadow_3905_69478",result:"shape"})]})]})]})};function CardActivityConnector({cardId:r,boardId:s,isVisible:a,children:i}){const{locale:o,formatMessage:x}=useI18n(),y=useDocumentVisibility(),_=!0,{userSettings:E,updateUserSettings:R}=useUserSettings(),{data:S,fetching:j,fetchError:T,canFetchOlder:A,loadOlder:M,addChatActivity:P,isBackendCardReady:L}=useSyncCardActivity(r,o,{enabled:a&&y,isChatOnly:E.cardActivityChatOnly}),{attachments:D}=useSyncCardAttachments(r),O=React$6.useMemo(()=>{const G=new Map;return D.forEach(oe=>{G.set(oe.id,oe)}),G},[D]),{members:B}=useSyncBoardMembers(s||""),{syncSections:N}=useSyncSections(),{syncCards:F}=useSyncCards(),{track:W}=useAnalytics(),V=React$6.useCallback(async G=>{if(r)try{const oe=await P(G);if(oe)return W("card_comment",{extra_str1:r,extra_double1:G.filter(X=>X.type==="user").length}),oe.id}catch{}return"MISSING_ACTIVITY_ID"},[P,r,W]),U=React$6.useCallback(()=>{R("cardActivityChatOnly",!E.cardActivityChatOnly)},[R,E.cardActivityChatOnly]);return i({data:S,models:{sections:N,cards:F,users:B,attachments:O},fetch:M,isBackendReady:L,fetching:j,fetchError:T,forceFetch:()=>new Promise(G=>G()),canFetchMore:A,addActivity:V,isChatOnly:E.cardActivityChatOnly,toggleChatOnly:U,readOnly:!_,title:React$6.useMemo(()=>x("_.chat_and_activity"),[x])})}var styles$2={root:"_1fxpvqe4 hmb2lk0 _17mzgjpg _1y9dvqa3 a20c7b3 _11268mk23 _11268mk1f _11268mk7a _1fxpvqeb _1fxpvqec _1vp3lav0"};const doneBg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAazSURBVHgBzZhbiFVVGMf/a+9znZszXiZHTY5iUGKJdjcZUyuxCHyJHoou5EOQhQgGPagjBEIlA1EQRRBUD71E9iAF2UgEdoMUChJBR2cQL2cuzplzxnPZe/V963L22sczzTi9uIaPffY5e6/12//vsr81wC02BP7HGJAyMXgSy5JJLEKAjlQKpbYEhp68QwxjjuOmgT45JZeNl/DKeBm95Ro2TFaQqQb6t6QHtKaA+RlMtaXxM8F9tSSLY9vvEoOznX/WQB+ckOvzVRy+XEDvpRK8Qhm4XgNqISClnsgnoFQCaEkCHWlgYRZY2oGwO4vPezrRt33FzGAzAn3xi+w4W8GB4QnsGS4A49eBEoGUDUxAMJB6Jo8sQVBpsmxSq8VgCzLAik7IXBf2P7dGvD1noP4/Ze7iKI6cHcU9V0vANVJlqgpUQg1TCzSQdCZjIAXFShm1Ur627lZg/WIMrLsNL29dKc7fFNChAZkbLmOAYHJ5gilUtSocL1ULRBYSTYi4Sr7Q8WSh+Gi/7yS1epdj8OGleHDbKnFlVkCHThDMNQz8k0fu0iRQrGqQIHRgGCR01BF6MjZeXFgwUiZtFOIju5Dt/h6cemwNNm7uFpPu2olmQCMFfHqaYC5MEExZQ7BrWA2ripTREwnn6YSIPrNy/CChudcqx0BnxrA2/BuH6JLX3bW9Rpi9x+RLp8ewZYhgSpU4SCWIgISITMW1uS4w8IGMvrP3Vo2yrFR3C5AvYtfh3+TWaYH6/5A9lydx4MI1Ct6a8btnFpXRk1oAOOehjEDqrg2ic4ZitTgOuVxw4M8jpYbG0S+l9JoCnRvB06RMbqKs5eWbrDsshHSe3F28SifaQlIjRJWkKAeOMkalEsVjoaJLRyapAO/eN4AdTYGoxuy9XNQL+tYVLohzHhhXBEQWEEAYBpBBzVgVIVlAnxmyZqHJpgJdPriwslptVKtGrkdxVAd6c0Ded7WIVfwENi7C0HGTjMBDaX+TZJxqbEFkoTWCo6OClhqIISYJZpQKLHuCB635KNW8zhjQ5BQ2EanyM6/txoOtNRZKK0V/VrZ68ksD5xopF4bqAXiuSk27a2yKoKZ0SWER8uN4imeop32xhnuLlejp4ULJ2JJmcIpZQpv81oxz1YEnIyCK24Cuq0qdMBO0Vp6APE8HOXlndQyIUrynarJCGBfZahyEEYlwoAQtIF1M62sXyrGQrg9N9vEriBWyt5MgS2JAtGjGBqx1m63Odkq7ji1+sp6DxvMcP0JE6lhWod1rywPXIptxXFq4itMh48ykpEv75l3kVuS6g5xXA9zv1W+mQqrpzNGtnM5wM9Wqr/qoBNIxhQimwKT87rGZZSE8OHDCgVIFU0QnFkqwrF70nfDo4EXvOfOACdM/8auEalIhppDvY9C+ABmKL+Yq7Ym4iYbPWgBhVPK0gX3g18+F56vfPacbUDB0SRs3cxnVFVyMKdTh41wmoWHqQRwi1g/YDA+NUp7UCSbrSmlCVQ7UVZ4CYfMNiG3i2Hg9buLaGaoFf8UUmpfBD7aZsjf4DSqJBoXqiiH6XinhMUhCHT2rjKfNgrEnsgmtkOosffwUA9qUw+/zW5BPMYwfh/GFE0/OZ3u0E7lx7DkP4jdxFTdtrQaGhPj1tQfEUAyIti5lkvDDrFFJxZGIQ3lOprmAntegnJnYc8AsTNIEMsO0p3WLS+MjOA9WH7kFeH9BFhMqsL3ImgV3TCnE3WfdY0F8L4KxyrSntBHQ4Oosvm4K1LdBjBLQu3xhysm2ZGNMNSzmusZ34sTek2xwE6c599YcPwR08PmHxIRluKGF3bQc/fTye5Z6mTU3vDuhM1CYHAqF2ZOJ+DVw3SmMMr52D7uJEkg1Z5TuR/p6xWfu+je0sC+sFcWFaexY3IoxnkA16InIfQnHks5Rma8TIuVFW5+MySYO3nlkXQTTlVZ90GAbsLtxfYFpxqtH5TpqZ7+7UkR30WwMq87LNnCbNhm/13PqDUNmTHqzmygk2M4vasO2fRvF6VkD8dj5rVwxVsGP1BrkitVot1pzdiFSxr1Vz0ijWsbszdhNDLSoBWe6Uniib3PzbfV/AvHYTRvGkQm8Q0o9Y/fz1SYq2VLgVmJV/ExGKXUy+Pj2dry1h5JnuvVmBLLjje/liyMl7KceZqVSK4hUalTHhelIqeA9Tq+Hg+89Lo7PtM6sgezYdVRuoZjaSb3MI6TW8ooB42F3qhn9Bs9TMnzZ4uOb2YDMGcgdtP9fdTXAnZUy/cMqgSR1HRWKlTzxnKQYmfM/rW6p8S/CCE/q0Vqq3wAAAABJRU5ErkJggg==",TaskItemDoneStatusButton=({isChecked:r,onClick:s,disabled:a})=>{const{formatMessage:i}=useI18n();return jsxRuntimeExports.jsx("button",{className:styles$2.root,disabled:a,onClick:s,children:jsxRuntimeExports.jsx("span",{style:{position:"relative"},children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,children:r?jsxRuntimeExports.jsxs(motion.div,{style:{display:"flex"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.33},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:11,display:"flex",alignItems:"center",justifyContent:"center",marginInlineEnd:3,color:themeVars.color.white,backgroundImage:`url(${doneBg})`,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:16,height:16},children:jsxRuntimeExports.jsx(CheckmarkIcon$2,{})}),jsxRuntimeExports.jsx(motion.span,{style:{color:themeVars.color.brand},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,delay:.3},children:i("_.buttons.completed")})]}):jsxRuntimeExports.jsx("div",{children:i("_.buttons.mark-as-checked")})})})})},SvgAssignicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:13,fill:"none",viewBox:"0 0 14 13",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M9.444 11.416v-1.055a2.111 2.111 0 0 0-2.11-2.111H3.638a2.111 2.111 0 0 0-2.111 2.111v1.055M5.486 6.139a2.111 2.111 0 1 0 0-4.222 2.111 2.111 0 0 0 0 4.222ZM11.556 4.555v3.167M13.139 6.139H9.972"})),manager="_manager_vwpqr_1",hasMembers="_hasMembers_vwpqr_7",icon="_icon_vwpqr_11",accessory="_accessory_vwpqr_16",styles$1={manager,hasMembers,icon,accessory},CardAssigneesButton=({disabled:r=!1,sortedBoardMembers:s=[],boardMembers:a=new Map,owners:i,showMembersOnButton:o=!0,onChange:x=()=>{},onClick:y,onClose:_,displayName:E=!1,hoverDisabled:R=!1,maxMembers:S=5,sortAlphabetically:j=!0})=>{const T=React$6.useRef(null),[A,M]=React$6.useState(!1),P=React$6.useCallback(()=>M(!0),[]),L=React$6.useCallback(()=>{M(!1),_==null||_()},[_]),D=React$6.useMemo(()=>{const N=[];return i.forEach(F=>{const W=a.get(F);W&&N.push(W)}),j?sortBy$1(N,F=>F.name):N},[i,j,a]),O=D.length===0,B=React$6.useCallback(()=>{y==null||y(),P()},[y,P]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{ref:T,children:O||!o?jsxRuntimeExports.jsx(CardButton_forwarded,{isEmptyState:!0,disabled:r,onClick:B,icon:jsxRuntimeExports.jsx("span",{className:styles$1.icon,children:jsxRuntimeExports.jsx(SvgAssignicon,{})}),children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.sharing.assign"})}):jsxRuntimeExports.jsxs(CardButton_forwarded,{disabled:r,onClick:P,className:styles$1.hasMembers,children:[jsxRuntimeExports.jsx(TeamMemberAvatars_memo,{members:D,maxMembers:S,displayName:E,hoverDisabled:R}),!r&&jsxRuntimeExports.jsx("span",{className:cx$6(styles$1.icon,styles$1.accessory),children:jsxRuntimeExports.jsx(SvgAssignicon,{})})]})}),jsxRuntimeExports.jsx(BackdropCardModal,{frameLess:!0,isVisible:A,onClose:L,children:jsxRuntimeExports.jsx(CardAssigneeManager_memo,{owners:i,onClose:L,onChange:x,sortedBoardMembers:s})})]})},CardAssigneesButton_memo=React$6.memo(CardAssigneesButton),root="_root_uuzi5_3",cardRoot="_cardRoot_uuzi5_14",dropzoneWrapper="_dropzoneWrapper_uuzi5_25",dropzone="_dropzone_uuzi5_25",cardInnerRoot="_cardInnerRoot_uuzi5_59",rightPane="_rightPane_uuzi5_66",visible="_visible_uuzi5_81",header="_header_uuzi5_85",breadcrumbs="_breadcrumbs_uuzi5_93",breadcrumbsIcon="_breadcrumbsIcon_uuzi5_105",breadcrumbsText="_breadcrumbsText_uuzi5_115",buttons="_buttons_uuzi5_136",headerButtons="_headerButtons_uuzi5_143",headerButton="_headerButton_uuzi5_143",details="_details_uuzi5_168",title="_title_uuzi5_174",checkboxWrapper="_checkboxWrapper_uuzi5_181",titleInput="_titleInput_uuzi5_188",tagsButton="_tagsButton_uuzi5_193",emptyStateButton="_emptyStateButton_uuzi5_193",content="_content_uuzi5_198",notes="_notes_uuzi5_206",attachments="_attachments_uuzi5_211",loader="_loader_uuzi5_229",titleInputTextarea="_titleInputTextarea_uuzi5_236",titleInputTextareaChecked="_titleInputTextareaChecked_uuzi5_241",styles={root,cardRoot,dropzoneWrapper,dropzone,cardInnerRoot,rightPane,visible,header,breadcrumbs,breadcrumbsIcon,breadcrumbsText,buttons,headerButtons,headerButton,details,title,checkboxWrapper,titleInput,tagsButton,emptyStateButton,content,notes,attachments,loader,titleInputTextarea,titleInputTextareaChecked};function retStr(){return""}function retPromise(){return Promise.resolve()}const CardTitle=React$6.memo(function r(s){const a=useI18n(),i=React$6.useCallback(x=>{var y;x.nativeEvent.isComposing||x.key===ENTER_KEY$1&&(x.preventDefault(),(y=s.titleRef.current)==null||y.blur())},[s.titleRef]),o=s.showCheckboxForCards===ShowCardCheckboxMode.Inside||s.showCheckboxForCards===ShowCardCheckboxMode.Everywhere;return jsxRuntimeExports.jsx("div",{className:styles.title,children:jsxRuntimeExports.jsx(DynamicTextArea_forwarded,{ref:s.titleRef,className:styles.titleInput,disabled:s.disabled,onFocus:s.onFocus,maxLength:CARD_TITLE_MAX_LENGTH,onChange:s.onChange,onBlur:s.onBlur,onClick:s.onClick,value:s.title,onKeyDown:i,inputClassName:cx$6({[styles.titleInputTextarea]:o,[styles.titleInputTextareaChecked]:o&&s.isChecked}),theme:DynamicTextAreaTheme.MINIMAL,placeholder:a.formatMessage("_.tasks.add-task-name.placeholder")})})}),CardDueDate=React$6.memo(function r({sectionId:s,dueDate:a,disabled:i,userReminders:o,onOpen:x,recurrence:y,setDueDate:_=noop$4,dueDateOnly:E}){const R=useNow2(),S=a?cardDueDateFromString(a):null,j=React$6.useCallback(({dueDate:T,recurrence:A,userReminders:M})=>{_({dueDate:T?cardRecordDueDateToString(T):null,recurrence:A,userReminders:M})},[_]);return jsxRuntimeExports.jsx(CardButtonDueDate_memo,{now:R,sectionId:s,onOpen:x,onChange:j,disabled:i,dueDate:S,userReminders:o,recurrence:y,dueDateOnly:E})}),CardNote=React$6.memo(function r(s){const a=useI18n();return jsxRuntimeExports.jsx(NotesTextArea,{className:styles.notes,disabled:s.disabled,maxLength:TASK_NOTE_MAX_LENGTH,onChange:s.onChange,onFocus:s.onFocus,onBlur:s.onBlur,value:s.note,placeholder:a.formatMessage("_.tasks.note.add.placeholder")})}),CardEditPane=({closeModal:r,titleAutofocus:s,titleData:a,breadcrumbs:i,headerButtons:o,rightPane:x,rightPaneOpen:y,isEditable:_,assigneeData:E,dueDateData:R,tagsData:S,moveSectionData:j,noteData:T,extraContent:A,isFilesDragOver:M})=>{var W,V;const{formatMessage:P}=useI18n(),{track:L}=useAnalytics(),D=React$6.useRef(null),O=useKeyboardShortcutCombination(GLOBAL_KEYBOARD_SHORTCUTS.REGION_TASK_EDIT_TITLE);function B(){L("investigate_title_shortcut",{extra_str1:j==null?void 0:j.cardId});const U=D.current;if(U!=null&&U.visibleInput!=null&&U.visibleInput!==document.activeElement){U.focus();const G=U.visibleInput.value.length;U.visibleInput.setSelectionRange(G,G)}}const N=React$6.useCallback(U=>{var G;L("investigate_title_change",{extra_str1:j==null?void 0:j.cardId,extra_double2:U}),(G=a.setTitle)==null||G.call(a,U)},[j==null?void 0:j.cardId,a,L]),F=React$6.useCallback(()=>{var U;L("card_time_date_picker_tapped",{extra_str1:(U=j==null?void 0:j.cardId)!=null?U:""})},[L,j==null?void 0:j.cardId]);return React$6.useEffect(()=>{var U;s&&((U=D.current)==null||U.focus())},[s]),jsxRuntimeExports.jsxs("div",{className:styles.root,children:[jsxRuntimeExports.jsxs("div",{className:styles.cardRoot,children:[M&&jsxRuntimeExports.jsx("div",{className:styles.dropzoneWrapper,children:jsxRuntimeExports.jsxs("div",{className:styles.dropzone,children:[jsxRuntimeExports.jsx(SvgAttachmenticon,{})," ",jsxRuntimeExports.jsx(FormattedMessage,{id:"CardEditPane.dropHere"})]})}),jsxRuntimeExports.jsx(ScrollView_forwarded,{children:jsxRuntimeExports.jsxs("div",{className:styles.cardInnerRoot,children:[jsxRuntimeExports.jsxs("div",{className:styles.header,children:[i,jsxRuntimeExports.jsxs("div",{className:styles.headerButtons,children:[o,jsxRuntimeExports.jsx("span",{className:styles.headerButton,children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:r,"aria-label":P("_.buttons.dismiss"),children:jsxRuntimeExports.jsx(SvgCloseicon,{})})})]})]}),jsxRuntimeExports.jsx(KeyboardShortcutsGlobal,{shortcuts:[[O,B]],children:jsxRuntimeExports.jsxs("div",{className:styles.details,children:[jsxRuntimeExports.jsx(CardTitle,{titleRef:D,disabled:!_,title:a.title,onChange:N,onBlur:a.onBlur,onFocus:a.onFocus,onClick:a.onClick,isChecked:a.isChecked,showCheckboxForCards:a.showCheckboxForCards,onCheckedChange:a.onCheckedChange}),jsxRuntimeExports.jsxs("div",{className:styles.buttons,children:[jsxRuntimeExports.jsx(CardAssigneesButton_memo,{disabled:!_,boardMembers:E==null?void 0:E.boardMembers,sortedBoardMembers:E==null?void 0:E.sortedBoardMembers,owners:(E==null?void 0:E.current)||[],onChange:E==null?void 0:E.onChange,displayName:E==null?void 0:E.displayName,hoverDisabled:E==null?void 0:E.hoverDisabled,maxMembers:E==null?void 0:E.maxMembers,sortAlphabetically:E==null?void 0:E.sortAlphabetically}),jsxRuntimeExports.jsx(CardDueDate,{sectionId:j==null?void 0:j.sectionId,disabled:!_,dueDate:(W=R==null?void 0:R.dueDate)!=null?W:null,recurrence:(V=R==null?void 0:R.recurrence)!=null?V:null,onOpen:F,setDueDate:R==null?void 0:R.onChange,userReminders:R==null?void 0:R.userReminders,dueDateOnly:R==null?void 0:R.dueDateOnly}),j!==void 0&&jsxRuntimeExports.jsx(MoveSectionButton,{sections:j.sections,sectionId:j.sectionId,onChange:j.onChange,theme:"board",onMoveToAnotherBoard:j.onMoveToAnotherBoard,disabled:!_}),jsxRuntimeExports.jsx(CardEditPaneTags_memo,{selectedTags:(S==null?void 0:S.selectedTags)||null,createTag:(S==null?void 0:S.createTag)||retStr,possibleTags:(S==null?void 0:S.possibleTags)||[],deleteTag:(S==null?void 0:S.deleteTag)||retPromise,editTag:(S==null?void 0:S.editTag)||noop$4,onChange:(S==null?void 0:S.onChange)||noop$4,readonly:!_,className:styles.tagsButton,emptyStateClassName:styles.emptyStateButton})]}),jsxRuntimeExports.jsxs("div",{className:styles.content,children:[T?jsxRuntimeExports.jsx(CardNote,{disabled:!_,note:T.note,onChange:T.setNote||noop$4,onFocus:T.onFocus,onBlur:T.onBlur}):null,A]})]})})]})})]}),jsxRuntimeExports.jsx("div",{className:cx$6(styles.rightPane,{[styles.visible]:y}),children:x})]})},Breadcrumbs=({text:r,link:s,isExternal:a=!1,icon:i})=>{const o=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i&&jsxRuntimeExports.jsx("div",{className:styles.breadcrumbsIcon,children:i}),jsxRuntimeExports.jsx("div",{className:styles.breadcrumbsText,children:r.map((x,y,_)=>jsxRuntimeExports.jsxs(React$6.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:x}),y<_.length-1?jsxRuntimeExports.jsx("span",{children:">"}):null]},x))})]});return a?jsxRuntimeExports.jsx("a",{href:s,draggable:!1,target:"_blank",className:styles.breadcrumbs,rel:"noreferrer",children:o()}):jsxRuntimeExports.jsx(NavLink$1,{to:s,draggable:!1,className:styles.breadcrumbs,children:o()})};CardEditPane.Breadcrumbs=Breadcrumbs;const SvgAddMydayicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("circle",{r:9,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:5,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"}),reactExports.createElement("circle",{r:1,stroke:"currentColor",strokeWidth:1.4,transform:"matrix(1 0 0 -1 12 12)"})),SvgArchiveicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.308 5H3.692C3.31 5 3 5.358 3 5.8v2.4c0 .442.31.8.692.8h16.616c.382 0 .692-.358.692-.8V5.8c0-.442-.31-.8-.692-.8ZM19 9v9.23c0 .205-.067.4-.186.545a.586.586 0 0 1-.45.225H5.636a.586.586 0 0 1-.45-.225A.858.858 0 0 1 5 18.23V9M10 13h4"})),SvgLinkicon=r=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...r},reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m11.47 6.697 1.856-1.857a4.126 4.126 0 1 1 5.833 5.834l-2.651 2.652a4.126 4.126 0 0 1-5.834 0"}),reactExports.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"m12.53 17.303-1.856 1.856a4.127 4.127 0 0 1-6.73-1.337 4.126 4.126 0 0 1 .897-4.496l2.651-2.652a4.126 4.126 0 0 1 5.834 0"})),DEFER_COMMIT_DEBOUNCE=1e3,CardActivityDrawer=({isVisible:r,selectedCard:s,onClose:a})=>{const i=useSyncQueryModelById("section",(s==null?void 0:s.sectionId)||null),o=(i==null?void 0:i.boardId)||null,x=useSyncUpdateCards(),y=React$6.useCallback(()=>{r&&(s.hasUnreadActivity||s.unreadChatMentionCount)&&x([{id:s.id,key:"hasUnreadActivity",value:!1},{id:s.id,key:"unreadChatMentionCount",value:0}])},[r,s.hasUnreadActivity,s.id,s.unreadChatMentionCount,x]);return s?jsxRuntimeExports.jsx(CardActivityConnector,{cardId:s.id,boardId:o,isVisible:r,children:_=>jsxRuntimeExports.jsx(CardActivity_memo,{isAboveBackdrop:!0,close:a,isVisible:r,onRead:y,hasUnreadMessages:!!s.hasUnreadActivity,..._})}):null};function useDeferUpdate(r,s,a,i,o,x){const[y,_]=React$6.useState(a),E=React$6.useRef(a),R=React$6.useRef(!1),S=React$6.useRef(!1);React$6.useEffect(()=>{E.current=a},[a]);const j=React$6.useMemo(()=>debounce$1((A,M,P)=>{S.current=!0,i([{id:A,key:M,value:P}])},DEFER_COMMIT_DEBOUNCE),[i]);React$6.useEffect(()=>()=>{j.flush()},[j]),React$6.useEffect(()=>{if(R.current)return j.cancel(),o(y)&&j(r,s,y),()=>j.cancel()},[s,r,y,j,o]),React$6.useEffect(()=>(R.current=!0,()=>{S.current=!1,R.current=!1}),[]),React$6.useEffect(()=>{x||_(E.current)},[x,a]);function T(){o(y)||j(r,s,a),j.flush()}return{value:y,setValue:_,flush:T}}const CardEditPaneCardRecordConnector=({card:r,onRemoveFromMyDay:s,toggleCardActivityDrawer:a,selectedTaskActivityId:i,deselectCard:o,children:x,analyticsSource:y})=>{var It,er;const{formatMessage:_}=useI18n(),{track:E}=useAnalytics(),R=useMiniToastNotifications(),S=useNavigate(),j=useSyncQueryModelById("section",r.sectionId),T=useSyncQueryModelById("board",(j==null?void 0:j.boardId)||""),A=useSyncQueryModelById("space",(T==null?void 0:T.spaceId)||""),{syncBoards:M}=useSyncBoards(),{sections:P,syncSections:L}=useSyncSections(),D=React$6.useMemo(()=>{var Ge,Ze;return(Ze=P.get((Ge=T==null?void 0:T.id)!=null?Ge:""))!=null?Ze:EMPTY$2},[T==null?void 0:T.id,P]),[O,B]=React$6.useState(!1),{canEditCards:N,canArchiveCards:F,canAddMemberToBoard:W}=useTeamBoardPermissions(T),{sortedBoardMembers:V,boardMembers:U}=useSyncBoardSortedMembers((T==null?void 0:T.id)||""),G=useSyncAddBoardMembers(),oe=useSyncInviteWorkspaceMember((It=A==null?void 0:A.id)!=null?It:null),X=React$6.useCallback(async Ge=>{assertNonNullable(T);const Ze={[Ge.publicUserId]:[Ge,BoardPermissionLevel.MEMBER]},et=await G(T,Ze);return E("board_member_added",{extra_str1:T.id,extra_str2:"existing_board",extra_double1:1}),et},[T,G,E]),ee=React$6.useCallback(Ge=>oe(Ge,T==null?void 0:T.id),[T==null?void 0:T.id,oe]),ae=useSyncUpdateCards(),ie=useSyncUpdateCardsChecked(),[se,Q]=React$6.useState(),Z=React$6.useCallback(({isAlreadyAddedToMyDay:Ge,onAddToMyDay:Ze,onRemoveFromMyDay:et})=>jsxRuntimeExports.jsx(ButtonInlineText,{theme:Ge?"action":"plain",onClick:Ge?et:Ze,children:jsxRuntimeExports.jsx(SvgAddMydayicon,{})}),[]),{createTag:J,sortedTagsList:te,deleteTag:de,editTag:ce}=useSyncTags((T==null?void 0:T.id)||null),me=React$6.useCallback(Ge=>{ae([{id:r.id,key:"tags",value:[...Ge]}])},[r.id,ae]),ve=React$6.useCallback(Ge=>{E("card_assignee_added",{extra_str1:r.id,extra_double1:Ge.length}),ae([{id:r.id,key:"owners",value:Ge}])},[r.id,E,ae]),xe=useSyncMoveCards(),ge=React$6.useCallback(Ge=>{xe([r.id],Ge),E("card_section_changed",{extra_str1:r.id,extra_str2:"full_card_view",extra_str3:Ge})},[r.id,xe,E]),be=useSyncCardsMoveToAnotherBoard(),ye=React$6.useCallback(async Ge=>{var dt;const Ze=L.get(Ge);if(!Ze)return;const et=M.get(Ze.boardId);if(et)try{const Ct=await be([r.id],Ge);o(),R.set({id:createGlobalModelId(),autoDismiss:!0,theme:"ACTION",message:jsxRuntimeExports.jsx(FormattedMessage,{id:"CategoryPickerMenu.taskConverted",values:{boardName:jsxRuntimeExports.jsxs("span",{onClick:()=>{const mt=getBoardUrl(window.location.search,et.id);S(mt)},children:[jsxRuntimeExports.jsx("span",{style:{marginInlineEnd:"6px"},children:(dt=et.emoji)!=null?dt:jsxRuntimeExports.jsx(BoardIcon,{})}),et.name]})}}),actionsId:["open"],renderButton:()=>jsxRuntimeExports.jsx("span",{style:{textDecoration:"underline"},children:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.buttons.open-task"})}),onActionClick:()=>{const mt=Ct.find(Ft=>Ft.id!==r.id),yt=mt?getCardUrl(window.location.search,et.id,mt.id,!1,!1,!1):getBoardUrl(window.location.search,et.id);S(yt)}})}catch(Ct){AnydoSentry.captureException(Ct),R.set({id:createGlobalModelId(),autoDismiss:!0,theme:"ERROR",message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.unknown.error-occoured"}),actionsId:[],renderButton:()=>null,onActionClick:()=>{}})}},[r.id,o,R,be,S,M,L]),Ie=React$6.useCallback(({dueDate:Ge,recurrence:Ze,userReminders:et})=>{ae([{id:r.id,key:"dueDate",value:Ge},{id:r.id,key:"recurrence",value:Ze},{id:r.id,key:"userReminders",value:et}])},[r.id,ae]),Pe=React$6.useCallback(()=>{i||E("card_activity_opened",{extra_str1:r.id,extra_str2:"card_view"}),a()},[r.id,i,a,E]);React$6.useEffect(()=>{!i&&(r.hasUnreadActivity||r.unreadChatMentionCount)&&Pe()},[]);const we=React$6.useRef(!1),Re=React$6.useRef(0),[Se,Ee]=React$6.useState(!1),{value:Ce,setValue:he,flush:Ae}=useDeferUpdate(r.id,"name",r.name,ae,isCardNameValid,Se),Ne=React$6.useCallback(()=>{Ee(!0)},[]),Be=React$6.useCallback(()=>{Ee(!1),Re.current=0,we.current&&(we.current=!1,E("renamed_card",{extra_str1:r.id})),Ae()},[r.id,Ae,E]),Oe=React$6.useCallback(Ge=>{E("investigate_title_change_connector",{extra_str1:r.id}),we.current=!0,he(Ge)},[r.id,he,E]),Ue=React$6.useCallback(()=>{Re.current+=1,Re.current===1&&E("tapped_edit_title",{extra_str1:r.id})},[r.id,E]),Ve=React$6.useRef(!1),[We,Te]=React$6.useState(!1),{value:De,setValue:Le,flush:Fe}=useDeferUpdate(r.id,"note",r.note||"",ae,isCardNoteValid,We),Ke=React$6.useCallback(()=>{Ve.current&&(Ve.current=!1,E("changed_card_note",{extra_str1:r.id,extra_str3:"existing_card"})),Fe(),Te(!1)},[r.id,Fe,E]),nt=React$6.useCallback(()=>{Te(!0)},[]),qe=React$6.useCallback(Ge=>{Ve.current=!0,Le(Ge)},[Le]),Je=React$6.useCallback(()=>{F?openModal(CardArchiveModal,{card:r}):R.set({id:createGlobalModelId(),theme:MiniToastNotificationTheme.ERROR,message:jsxRuntimeExports.jsx(FormattedMessage,{id:"_.errors.archiveAdmin"}),autoDismiss:!0,actionsId:[],renderButton:()=>null,onActionClick:()=>{}})},[F,r,R]),Qe=useCopyLink(),Wt=React$6.useCallback(()=>{const Ge=getCardUrl("",(T==null?void 0:T.id)||"",r.id),Ze=`${window.location.protocol}//${window.location.host}${Ge}`;Qe(Ze)},[T==null?void 0:T.id,r.id,Qe]),{active:ct,dismiss:qt}=useChecklistSuggestions({cardId:r.id});React$6.useEffect(()=>{ct&&i&&qt()},[ct,qt,i]);const it=React$6.useCallback(Ge=>{ie([r.id],Ge),E(Ge?"checked_card":"unchecked_card",{extra_str1:r.id,extra_str2:{component:y,method:y==="my_day_mark_as_done"?"my_day_action":"card_icon"}})},[y,r.id,E,ie]),sr=(A==null?void 0:A.showCheckboxForCards)===ShowCardCheckboxMode.Inside||(A==null?void 0:A.showCheckboxForCards)===ShowCardCheckboxMode.Everywhere,st={isFilesDragOver:O,isEditable:N,breadcrumbs:jsxRuntimeExports.jsx(CardEditPane.Breadcrumbs,{text:[A==null?void 0:A.name,T==null?void 0:T.name,j==null?void 0:j.name],icon:jsxRuntimeExports.jsx(SvgTeamsicon,{}),link:getBoardUrl(window.location.search,(T==null?void 0:T.id)||"")}),titleData:{title:Ce,setTitle:Oe,onBlur:Be,onFocus:Ne,onClick:Ue,isChecked:r.isChecked,onCheckedChange:it,showCheckboxForCards:A==null?void 0:A.showCheckboxForCards},dueDateData:{dueDate:r.dueDate,onChange:Ie,userReminders:r.userReminders,cardId:r.id,recurrence:r.recurrence},assigneeData:{current:(er=useMemoizedValue(r,"owners"))!=null?er:EMPTY$2,sortedBoardMembers:V,boardMembers:U,onChange:ve},moveSectionData:{cardId:r.id,sections:D,sectionId:r.sectionId,onChange:ge,onMoveToAnotherBoard:ye},noteData:{note:De,setNote:qe,onBlur:Ke,onFocus:nt},tagsData:{selectedTags:useMemoizedValue(r,"tags"),possibleTags:te,deleteTag:de,editTag:ce,createTag:J,onChange:me},headerButtons:jsxRuntimeExports.jsxs(TooltipSmallInfo.Group,{children:[sr?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(TaskItemDoneStatusButton,{disabled:!N,isChecked:r.isChecked,onClick:()=>it(!r.isChecked)})}):null,jsxRuntimeExports.jsx(TooltipSmallInfo.GroupItem,{text:_(se?"_.buttons.remove-from-my-day":"_.buttons.add-to-my-day"),children:jsxRuntimeExports.jsx(MyDayAddButton_memo,{id:r.id,type:MyDayReferencedObjectType.ANYDO_CARD,renderButton:Z,onRemoveFromMyDay:s,onIsAddedToMydayChange:Q,source:"card_view"})}),jsxRuntimeExports.jsx(TooltipSmallInfo.GroupItem,{text:_("_.buttons.copyLink"),children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:Wt,children:jsxRuntimeExports.jsx(SvgLinkicon,{})})}),jsxRuntimeExports.jsx(TooltipSmallInfo.GroupItem,{text:_("_.chat_and_activity"),children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:i||r.hasUnreadActivity?"action":"plain",onClick:Pe,children:r.unreadChatMentionCount?jsxRuntimeExports.jsx(UnreadCountIndicator,{count:r.unreadChatMentionCount,size:"large"}):jsxRuntimeExports.jsx(SvgChaticon,{})})}),N&&jsxRuntimeExports.jsx(TooltipSmallInfo.GroupItem,{text:_("_.buttons.archive"),children:jsxRuntimeExports.jsx(ButtonInlineText,{theme:"plain",onClick:Je,children:jsxRuntimeExports.jsx(SvgArchiveicon,{})})})]}),extraContent:jsxRuntimeExports.jsx(CardExtraContent,{card:r,readonly:!N,setIsFilesDragOver:B}),rightPane:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CardActivityDrawer,{selectedCard:r,onClose:o,isVisible:!!i}),jsxRuntimeExports.jsx(ChecklistSuggestionsDrawer,{isVisible:ct&&!i&&!!r,cardId:r.id,close:qt,isAboveBackdrop:!0,asPortal:!1})]}),rightPaneOpen:!!i||ct};if(!j||!T||!A){const Ze="CardEditPaneCardRecordConnector: missing info - "+(j?T?"Missing space":"Missing board":"Missing section");return AnydoSentry.addBreadcrumb({data:{cardId:r.id,sectionId:r.sectionId,boardId:T==null?void 0:T.id,spaceId:A==null?void 0:A.id},message:Ze}),logError(Ze),null}return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(AddBoardMemberProvider,{spaceId:A.id,boardPermissions:{canAddMemberToBoard:W},onAddBoardMember:X,onInviteWorkspaceMember:ee,children:x(st)})})},LS_SNAPSHOT_KEY="sync.snapshot",SNAPSHOT_KEYS=["attachment","category","label","task","space","board","section","userCustomView","card","tag","myDayEntry","user","groceryBoard","grocerySection","cardChecklist","checklistItem","cardAttachment"];function clearStorage(){return browser.storage.local.remove([LS_SNAPSHOT_KEY,...SNAPSHOT_KEYS])}async function createSyncStore(r){var x,y;let s=await browser.storage.local.get([LS_SNAPSHOT_KEY,...SNAPSHOT_KEYS.map(_=>`${LS_SNAPSHOT_KEY}.${_}`)]);r.isLoggedIn()||(await clearStorage(),s={}),r.subscribe("loggedOut",()=>void clearStorage());const a=(y=(x=s[LS_SNAPSHOT_KEY])==null?void 0:x.lastUpdateDate)!=null?y:0;let i=a>0;const o={};try{for(const _ of SNAPSHOT_KEYS)o[_]=new Map(s[`${LS_SNAPSHOT_KEY}.${_}`])}catch{i=!1}return[new SyncStore(i?{lastUpdateDate:a,updates:o}:void 0),i]}async function storeSyncData(r){const{lastUpdateDate:s,...a}=r.read(),i={[LS_SNAPSHOT_KEY]:{lastUpdateDate:s}};for(const o of SNAPSHOT_KEYS)i[`${LS_SNAPSHOT_KEY}.${o}`]=[...a[o].entries()];try{await browser.storage.local.set(i)}catch{await browser.storage.local.remove([LS_SNAPSHOT_KEY,...SNAPSHOT_KEYS.map(x=>`${LS_SNAPSHOT_KEY}.${x}`)])}}export{TaskAttachments as $,AppHeaderNotificationsIcon as A,BackdropModal as B,CloseIcon as C,DateTimePicker2 as D,closestCorners as E,measuringConfig as F,RadioButton as G,useOutSideClick as H,DropdownMenu as I,ConfirmModal as J,CardButton_forwarded as K,Loading as L,MoreCircleIcon as M,SvgMyDayicon$1 as N,OneTimeReminderPickerTimes as O,themeVars as P,CheckmarkIcon$2 as Q,RemindMePanel_ as R,SvgSendicon$1 as S,TaskLabelsTooltip as T,useSubtasksSuggestions as U,GLOBAL_KEYBOARD_SHORTCUTS as V,TaskTitle as W,TaskEditPaneButtons as X,TaskEditPaneLabels_memo as Y,TaskNote as Z,SubTaskGroupConnected_ as _,areArraysTaskLabelsSameMembers as a,__assign as a$,SubtasksSuggestionsDrawer as a0,Badge as a1,useNow as a2,useSyncTaskSubTasksCount as a3,TaskItemCheckbox as a4,SvgBellicon$1 as a5,TaskItemDeleteTask as a6,DndContext as a7,SortableContext as a8,verticalListSortingStrategy as a9,CardExtraContent as aA,ChecklistSuggestionsDrawer as aB,isCardNoteValid as aC,CardActivityConnector as aD,USER_GROUP_MENTIONS as aE,CtaButton as aF,AddChatComment_memo as aG,CardArchiveModal as aH,UnreadCountIndicator as aI,SvgChaticon as aJ,linkifyText as aK,CardIndicatorsCompact as aL,nonPropagatingWrapLink as aM,onHTMLElementExists as aN,getCardHTMLElementId as aO,getFirstName as aP,PasswordField as aQ,PaneLayout as aR,AppSidebarProfileImage__memo as aS,AppSidebarProfileImageTheme as aT,browser as aU,LS_WEB_EXTENSION_BADGE_TEXT as aV,createSyncStore as aW,storeSyncData as aX,LogIn as aY,ModalRoot as aZ,__rest as a_,DragOverlay as aa,useUniqueId as ab,Label as ac,SharingAvatar_memo as ad,SharingAvatarSize as ae,useSyncBoardSortedMembers as af,CardAssigneeManager_memo as ag,BackdropCardModal as ah,CardDueDate_memo as ai,useSyncTags as aj,TeamsTagsTooltipContent_memo as ak,openModal as al,BoardAndSectionPickerMenu as am,sortBy$1 as an,SvgAssignicon as ao,TeamMemberAvatars_memo as ap,useTeamBoardPermissions as aq,useSyncUpdateCardsChecked as ar,EMPTY$2 as as,useDeferUpdate as at,useChecklistSuggestions as au,SvgAttachmenticon as av,CardButtonDueDate_memo as aw,MoveSectionButton as ax,CardEditPaneTags_memo as ay,NotesTextArea as az,filterHelpers as b,FileAttachments as b$,createSidecarMedium as b0,useMergeRefs as b1,Backdrop as b2,debounceRaf as b3,getLocationPathnameParams as b4,getMyDayUrl as b5,useLocationPathnameParams as b6,useSyncQueryModelById as b7,endOfDay as b8,delay as b9,CardAssigneeManagerModal as bA,TeamsTagsTooltipModal as bB,useSyncMoveCards as bC,MoveSectionModal as bD,ButtonRounded_ as bE,CardMenu_memo as bF,openNewWindowUrl as bG,MessageReplacer_memo as bH,$44d7e150ebc754d2$export$e926676385687eaf as bI,FOCUS_LOCK_ALWAYS_IGNORE_CLASSNAME as bJ,SvgCheckicon as bK,rectIntersection as bL,words$1 as bM,useDroppable as bN,SearchField as bO,horizontalListSortingStrategy as bP,last_1 as bQ,NavLink$1 as bR,TaskItemDoneStatusButton as bS,MyDayAddButton_memo as bT,SvgArchiveicon as bU,SvgCloseicon as bV,DND_KIT_SCROLLABLE_CONTAINER_CLASSNAME as bW,TaskEditPaneDetails as bX,_isIterateeCall as bY,useDocumentVisibility as bZ,SvgAddMydayicon as b_,Delayed as ba,useTaskRouter as bb,OutSideClickContextual as bc,TextField as bd,UnsafeHeightTransition as be,useDeepLink as bf,SvgChecklistsicon as bg,TaskCategoryPickerTooltip as bh,SvgUnpinicon as bi,SvgPinicon as bj,useSyncTaskAttachments as bk,SvgAttachmentsicon as bl,TagItem as bm,useSyncUpdateReminder as bn,useSyncUpdateTaskLabels as bo,useDebounceCallback as bp,SvgDotsicon as bq,InlineReminders as br,getBoardUrl as bs,useCardFutureReminders as bt,cardAttachmentSelectors as bu,cardChecklistSelectors as bv,CardIndicatorDueDate_memo as bw,CardRecurrenceText as bx,ChecklistProgress as by,CardRemindersTooltip as bz,useSyncUserNotifications2 as c,CheckList as c0,CardEditPane as c1,CardExtraContentContainer as c2,AddCardContentButton_memo as c3,CardEditPaneCardRecordConnector as c4,getImageUrl as c5,isDefaultNewTab as c6,Switch as c7,setDefaultNewTab as c8,FormattedList as c9,CloseButton as ca,redirectToDefaultNewTab as cb,RouterProvider as cc,useSyncNotificationCenter as d,ActivityUpdateStatus as e,fetchSyncHttpNotificationCenter as f,ActivityUpdate_memo as g,capitalize as h,init as i,AppBarMenu as j,useEffectEvent as k,useSyncQueryModelsByValue as l,useIsPremium as m,nonNullableGuard as n,openBuyPremiumModal as o,usePasteMultiline as p,useSortable as q,animateLayoutChanges as r,spaceSelectors as s,taskSelectors as t,updateLabels as u,CSS as v,arrayMove as w,getPositionInPositionableGroupAtIndex as x,useSensors as y,usePointerSensor as z};
